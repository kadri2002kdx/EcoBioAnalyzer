var AP=t=>{throw TypeError(t)};var yS=(t,e,n)=>e.has(t)||AP("Cannot "+n);var K=(t,e,n)=>(yS(t,e,"read from private field"),n?n.call(t):e.get(t)),Fe=(t,e,n)=>e.has(t)?AP("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,n),ke=(t,e,n,r)=>(yS(t,e,"write to private field"),r?r.call(t,n):e.set(t,n),n),Je=(t,e,n)=>(yS(t,e,"access private method"),n);var Py=(t,e,n,r)=>({set _(o){ke(t,e,o,n)},get _(){return K(t,e,r)}});function E3(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const o in r)if(o!=="default"&&!(o in t)){const s=Object.getOwnPropertyDescriptor(r,o);s&&Object.defineProperty(t,o,s.get?s:{enumerable:!0,get:()=>r[o]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const s of o)if(s.type==="childList")for(const i of s.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&r(i)}).observe(document,{childList:!0,subtree:!0});function n(o){const s={};return o.integrity&&(s.integrity=o.integrity),o.referrerPolicy&&(s.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?s.credentials="include":o.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(o){if(o.ep)return;o.ep=!0;const s=n(o);fetch(o.href,s)}})();var xs=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function ft(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function hQ(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var n=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(r){var o=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(n,r,o.get?o:{enumerable:!0,get:function(){return t[r]}})}),n}var N3={exports:{}},d0={},A3={exports:{}},Qe={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Wm=Symbol.for("react.element"),pQ=Symbol.for("react.portal"),mQ=Symbol.for("react.fragment"),gQ=Symbol.for("react.strict_mode"),yQ=Symbol.for("react.profiler"),vQ=Symbol.for("react.provider"),xQ=Symbol.for("react.context"),bQ=Symbol.for("react.forward_ref"),wQ=Symbol.for("react.suspense"),SQ=Symbol.for("react.memo"),CQ=Symbol.for("react.lazy"),OP=Symbol.iterator;function $Q(t){return t===null||typeof t!="object"?null:(t=OP&&t[OP]||t["@@iterator"],typeof t=="function"?t:null)}var O3={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},P3=Object.assign,R3={};function Sf(t,e,n){this.props=t,this.context=e,this.refs=R3,this.updater=n||O3}Sf.prototype.isReactComponent={};Sf.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Sf.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function _3(){}_3.prototype=Sf.prototype;function VI(t,e,n){this.props=t,this.context=e,this.refs=R3,this.updater=n||O3}var UI=VI.prototype=new _3;UI.constructor=VI;P3(UI,Sf.prototype);UI.isPureReactComponent=!0;var PP=Array.isArray,D3=Object.prototype.hasOwnProperty,GI={current:null},M3={key:!0,ref:!0,__self:!0,__source:!0};function F3(t,e,n){var r,o={},s=null,i=null;if(e!=null)for(r in e.ref!==void 0&&(i=e.ref),e.key!==void 0&&(s=""+e.key),e)D3.call(e,r)&&!M3.hasOwnProperty(r)&&(o[r]=e[r]);var a=arguments.length-2;if(a===1)o.children=n;else if(1<a){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+2];o.children=l}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)o[r]===void 0&&(o[r]=a[r]);return{$$typeof:Wm,type:t,key:s,ref:i,props:o,_owner:GI.current}}function kQ(t,e){return{$$typeof:Wm,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function HI(t){return typeof t=="object"&&t!==null&&t.$$typeof===Wm}function TQ(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var RP=/\/+/g;function vS(t,e){return typeof t=="object"&&t!==null&&t.key!=null?TQ(""+t.key):e.toString(36)}function Pv(t,e,n,r,o){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var i=!1;if(t===null)i=!0;else switch(s){case"string":case"number":i=!0;break;case"object":switch(t.$$typeof){case Wm:case pQ:i=!0}}if(i)return i=t,o=o(i),t=r===""?"."+vS(i,0):r,PP(o)?(n="",t!=null&&(n=t.replace(RP,"$&/")+"/"),Pv(o,e,n,"",function(c){return c})):o!=null&&(HI(o)&&(o=kQ(o,n+(!o.key||i&&i.key===o.key?"":(""+o.key).replace(RP,"$&/")+"/")+t)),e.push(o)),1;if(i=0,r=r===""?".":r+":",PP(t))for(var a=0;a<t.length;a++){s=t[a];var l=r+vS(s,a);i+=Pv(s,e,n,l,o)}else if(l=$Q(t),typeof l=="function")for(t=l.call(t),a=0;!(s=t.next()).done;)s=s.value,l=r+vS(s,a++),i+=Pv(s,e,n,l,o);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return i}function Ry(t,e,n){if(t==null)return t;var r=[],o=0;return Pv(t,r,"","",function(s){return e.call(n,s,o++)}),r}function IQ(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Pr={current:null},Rv={transition:null},EQ={ReactCurrentDispatcher:Pr,ReactCurrentBatchConfig:Rv,ReactCurrentOwner:GI};function L3(){throw Error("act(...) is not supported in production builds of React.")}Qe.Children={map:Ry,forEach:function(t,e,n){Ry(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Ry(t,function(){e++}),e},toArray:function(t){return Ry(t,function(e){return e})||[]},only:function(t){if(!HI(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Qe.Component=Sf;Qe.Fragment=mQ;Qe.Profiler=yQ;Qe.PureComponent=VI;Qe.StrictMode=gQ;Qe.Suspense=wQ;Qe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=EQ;Qe.act=L3;Qe.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=P3({},t.props),o=t.key,s=t.ref,i=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,i=GI.current),e.key!==void 0&&(o=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)D3.call(e,l)&&!M3.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){a=Array(l);for(var c=0;c<l;c++)a[c]=arguments[c+2];r.children=a}return{$$typeof:Wm,type:t.type,key:o,ref:s,props:r,_owner:i}};Qe.createContext=function(t){return t={$$typeof:xQ,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:vQ,_context:t},t.Consumer=t};Qe.createElement=F3;Qe.createFactory=function(t){var e=F3.bind(null,t);return e.type=t,e};Qe.createRef=function(){return{current:null}};Qe.forwardRef=function(t){return{$$typeof:bQ,render:t}};Qe.isValidElement=HI;Qe.lazy=function(t){return{$$typeof:CQ,_payload:{_status:-1,_result:t},_init:IQ}};Qe.memo=function(t,e){return{$$typeof:SQ,type:t,compare:e===void 0?null:e}};Qe.startTransition=function(t){var e=Rv.transition;Rv.transition={};try{t()}finally{Rv.transition=e}};Qe.unstable_act=L3;Qe.useCallback=function(t,e){return Pr.current.useCallback(t,e)};Qe.useContext=function(t){return Pr.current.useContext(t)};Qe.useDebugValue=function(){};Qe.useDeferredValue=function(t){return Pr.current.useDeferredValue(t)};Qe.useEffect=function(t,e){return Pr.current.useEffect(t,e)};Qe.useId=function(){return Pr.current.useId()};Qe.useImperativeHandle=function(t,e,n){return Pr.current.useImperativeHandle(t,e,n)};Qe.useInsertionEffect=function(t,e){return Pr.current.useInsertionEffect(t,e)};Qe.useLayoutEffect=function(t,e){return Pr.current.useLayoutEffect(t,e)};Qe.useMemo=function(t,e){return Pr.current.useMemo(t,e)};Qe.useReducer=function(t,e,n){return Pr.current.useReducer(t,e,n)};Qe.useRef=function(t){return Pr.current.useRef(t)};Qe.useState=function(t){return Pr.current.useState(t)};Qe.useSyncExternalStore=function(t,e,n){return Pr.current.useSyncExternalStore(t,e,n)};Qe.useTransition=function(){return Pr.current.useTransition()};Qe.version="18.3.1";A3.exports=Qe;var k=A3.exports;const z=ft(k),j3=E3({__proto__:null,default:z},[k]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var NQ=k,AQ=Symbol.for("react.element"),OQ=Symbol.for("react.fragment"),PQ=Object.prototype.hasOwnProperty,RQ=NQ.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,_Q={key:!0,ref:!0,__self:!0,__source:!0};function B3(t,e,n){var r,o={},s=null,i=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(i=e.ref);for(r in e)PQ.call(e,r)&&!_Q.hasOwnProperty(r)&&(o[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)o[r]===void 0&&(o[r]=e[r]);return{$$typeof:AQ,type:t,key:s,ref:i,props:o,_owner:RQ.current}}d0.Fragment=OQ;d0.jsx=B3;d0.jsxs=B3;N3.exports=d0;var S=N3.exports,z3={exports:{}},vo={},W3={exports:{}},V3={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(O,D){var B=O.length;O.push(D);e:for(;0<B;){var V=B-1>>>1,G=O[V];if(0<o(G,D))O[V]=D,O[B]=G,B=V;else break e}}function n(O){return O.length===0?null:O[0]}function r(O){if(O.length===0)return null;var D=O[0],B=O.pop();if(B!==D){O[0]=B;e:for(var V=0,G=O.length,Q=G>>>1;V<Q;){var re=2*(V+1)-1,ie=O[re],ce=re+1,se=O[ce];if(0>o(ie,B))ce<G&&0>o(se,ie)?(O[V]=se,O[ce]=B,V=ce):(O[V]=ie,O[re]=B,V=re);else if(ce<G&&0>o(se,B))O[V]=se,O[ce]=B,V=ce;else break e}}return D}function o(O,D){var B=O.sortIndex-D.sortIndex;return B!==0?B:O.id-D.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var i=Date,a=i.now();t.unstable_now=function(){return i.now()-a}}var l=[],c=[],u=1,d=null,f=3,h=!1,p=!1,m=!1,g=typeof setTimeout=="function"?setTimeout:null,y=typeof clearTimeout=="function"?clearTimeout:null,v=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function x(O){for(var D=n(c);D!==null;){if(D.callback===null)r(c);else if(D.startTime<=O)r(c),D.sortIndex=D.expirationTime,e(l,D);else break;D=n(c)}}function b(O){if(m=!1,x(O),!p)if(n(l)!==null)p=!0,_(w);else{var D=n(c);D!==null&&L(b,D.startTime-O)}}function w(O,D){p=!1,m&&(m=!1,y(T),T=-1),h=!0;var B=f;try{for(x(D),d=n(l);d!==null&&(!(d.expirationTime>D)||O&&!N());){var V=d.callback;if(typeof V=="function"){d.callback=null,f=d.priorityLevel;var G=V(d.expirationTime<=D);D=t.unstable_now(),typeof G=="function"?d.callback=G:d===n(l)&&r(l),x(D)}else r(l);d=n(l)}if(d!==null)var Q=!0;else{var re=n(c);re!==null&&L(b,re.startTime-D),Q=!1}return Q}finally{d=null,f=B,h=!1}}var C=!1,$=null,T=-1,I=5,E=-1;function N(){return!(t.unstable_now()-E<I)}function A(){if($!==null){var O=t.unstable_now();E=O;var D=!0;try{D=$(!0,O)}finally{D?R():(C=!1,$=null)}}else C=!1}var R;if(typeof v=="function")R=function(){v(A)};else if(typeof MessageChannel<"u"){var P=new MessageChannel,F=P.port2;P.port1.onmessage=A,R=function(){F.postMessage(null)}}else R=function(){g(A,0)};function _(O){$=O,C||(C=!0,R())}function L(O,D){T=g(function(){O(t.unstable_now())},D)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(O){O.callback=null},t.unstable_continueExecution=function(){p||h||(p=!0,_(w))},t.unstable_forceFrameRate=function(O){0>O||125<O?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):I=0<O?Math.floor(1e3/O):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(O){switch(f){case 1:case 2:case 3:var D=3;break;default:D=f}var B=f;f=D;try{return O()}finally{f=B}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(O,D){switch(O){case 1:case 2:case 3:case 4:case 5:break;default:O=3}var B=f;f=O;try{return D()}finally{f=B}},t.unstable_scheduleCallback=function(O,D,B){var V=t.unstable_now();switch(typeof B=="object"&&B!==null?(B=B.delay,B=typeof B=="number"&&0<B?V+B:V):B=V,O){case 1:var G=-1;break;case 2:G=250;break;case 5:G=1073741823;break;case 4:G=1e4;break;default:G=5e3}return G=B+G,O={id:u++,callback:D,priorityLevel:O,startTime:B,expirationTime:G,sortIndex:-1},B>V?(O.sortIndex=B,e(c,O),n(l)===null&&O===n(c)&&(m?(y(T),T=-1):m=!0,L(b,B-V))):(O.sortIndex=G,e(l,O),p||h||(p=!0,_(w))),O},t.unstable_shouldYield=N,t.unstable_wrapCallback=function(O){var D=f;return function(){var B=f;f=D;try{return O.apply(this,arguments)}finally{f=B}}}})(V3);W3.exports=V3;var DQ=W3.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var MQ=k,mo=DQ;function he(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var U3=new Set,mp={};function Jc(t,e){Ad(t,e),Ad(t+"Capture",e)}function Ad(t,e){for(mp[t]=e,t=0;t<e.length;t++)U3.add(e[t])}var Ui=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),t$=Object.prototype.hasOwnProperty,FQ=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,_P={},DP={};function LQ(t){return t$.call(DP,t)?!0:t$.call(_P,t)?!1:FQ.test(t)?DP[t]=!0:(_P[t]=!0,!1)}function jQ(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function BQ(t,e,n,r){if(e===null||typeof e>"u"||jQ(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Rr(t,e,n,r,o,s,i){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=o,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=i}var Hn={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Hn[t]=new Rr(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Hn[e]=new Rr(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Hn[t]=new Rr(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Hn[t]=new Rr(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Hn[t]=new Rr(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Hn[t]=new Rr(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Hn[t]=new Rr(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Hn[t]=new Rr(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Hn[t]=new Rr(t,5,!1,t.toLowerCase(),null,!1,!1)});var KI=/[\-:]([a-z])/g;function qI(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(KI,qI);Hn[e]=new Rr(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(KI,qI);Hn[e]=new Rr(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(KI,qI);Hn[e]=new Rr(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Hn[t]=new Rr(t,1,!1,t.toLowerCase(),null,!1,!1)});Hn.xlinkHref=new Rr("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Hn[t]=new Rr(t,1,!1,t.toLowerCase(),null,!0,!0)});function XI(t,e,n,r){var o=Hn.hasOwnProperty(e)?Hn[e]:null;(o!==null?o.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(BQ(e,n,o,r)&&(n=null),r||o===null?LQ(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):o.mustUseProperty?t[o.propertyName]=n===null?o.type===3?!1:"":n:(e=o.attributeName,r=o.attributeNamespace,n===null?t.removeAttribute(e):(o=o.type,n=o===3||o===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var sa=MQ.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,_y=Symbol.for("react.element"),Du=Symbol.for("react.portal"),Mu=Symbol.for("react.fragment"),YI=Symbol.for("react.strict_mode"),n$=Symbol.for("react.profiler"),G3=Symbol.for("react.provider"),H3=Symbol.for("react.context"),QI=Symbol.for("react.forward_ref"),r$=Symbol.for("react.suspense"),o$=Symbol.for("react.suspense_list"),ZI=Symbol.for("react.memo"),Ca=Symbol.for("react.lazy"),K3=Symbol.for("react.offscreen"),MP=Symbol.iterator;function ch(t){return t===null||typeof t!="object"?null:(t=MP&&t[MP]||t["@@iterator"],typeof t=="function"?t:null)}var Kt=Object.assign,xS;function Fh(t){if(xS===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);xS=e&&e[1]||""}return`
`+xS+t}var bS=!1;function wS(t,e){if(!t||bS)return"";bS=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var r=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){r=c}t.call(e.prototype)}else{try{throw Error()}catch(c){r=c}t()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var o=c.stack.split(`
`),s=r.stack.split(`
`),i=o.length-1,a=s.length-1;1<=i&&0<=a&&o[i]!==s[a];)a--;for(;1<=i&&0<=a;i--,a--)if(o[i]!==s[a]){if(i!==1||a!==1)do if(i--,a--,0>a||o[i]!==s[a]){var l=`
`+o[i].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=i&&0<=a);break}}}finally{bS=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Fh(t):""}function zQ(t){switch(t.tag){case 5:return Fh(t.type);case 16:return Fh("Lazy");case 13:return Fh("Suspense");case 19:return Fh("SuspenseList");case 0:case 2:case 15:return t=wS(t.type,!1),t;case 11:return t=wS(t.type.render,!1),t;case 1:return t=wS(t.type,!0),t;default:return""}}function s$(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Mu:return"Fragment";case Du:return"Portal";case n$:return"Profiler";case YI:return"StrictMode";case r$:return"Suspense";case o$:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case H3:return(t.displayName||"Context")+".Consumer";case G3:return(t._context.displayName||"Context")+".Provider";case QI:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case ZI:return e=t.displayName||null,e!==null?e:s$(t.type)||"Memo";case Ca:e=t._payload,t=t._init;try{return s$(t(e))}catch{}}return null}function WQ(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return s$(e);case 8:return e===YI?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function il(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function q3(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function VQ(t){var e=q3(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var o=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return o.call(this)},set:function(i){r=""+i,s.call(this,i)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(i){r=""+i},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Dy(t){t._valueTracker||(t._valueTracker=VQ(t))}function X3(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=q3(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Zv(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function i$(t,e){var n=e.checked;return Kt({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function FP(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=il(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function Y3(t,e){e=e.checked,e!=null&&XI(t,"checked",e,!1)}function a$(t,e){Y3(t,e);var n=il(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?l$(t,e.type,n):e.hasOwnProperty("defaultValue")&&l$(t,e.type,il(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function LP(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function l$(t,e,n){(e!=="number"||Zv(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Lh=Array.isArray;function Qu(t,e,n,r){if(t=t.options,e){e={};for(var o=0;o<n.length;o++)e["$"+n[o]]=!0;for(n=0;n<t.length;n++)o=e.hasOwnProperty("$"+t[n].value),t[n].selected!==o&&(t[n].selected=o),o&&r&&(t[n].defaultSelected=!0)}else{for(n=""+il(n),e=null,o=0;o<t.length;o++){if(t[o].value===n){t[o].selected=!0,r&&(t[o].defaultSelected=!0);return}e!==null||t[o].disabled||(e=t[o])}e!==null&&(e.selected=!0)}}function c$(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(he(91));return Kt({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function jP(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(he(92));if(Lh(n)){if(1<n.length)throw Error(he(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:il(n)}}function Q3(t,e){var n=il(e.value),r=il(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function BP(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function Z3(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function u$(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?Z3(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var My,J3=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,o){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,o)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(My=My||document.createElement("div"),My.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=My.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function gp(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Zh={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},UQ=["Webkit","ms","Moz","O"];Object.keys(Zh).forEach(function(t){UQ.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Zh[e]=Zh[t]})});function eB(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Zh.hasOwnProperty(t)&&Zh[t]?(""+e).trim():e+"px"}function tB(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,o=eB(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,o):t[n]=o}}var GQ=Kt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function d$(t,e){if(e){if(GQ[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(he(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(he(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(he(61))}if(e.style!=null&&typeof e.style!="object")throw Error(he(62))}}function f$(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var h$=null;function JI(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var p$=null,Zu=null,Ju=null;function zP(t){if(t=Gm(t)){if(typeof p$!="function")throw Error(he(280));var e=t.stateNode;e&&(e=g0(e),p$(t.stateNode,t.type,e))}}function nB(t){Zu?Ju?Ju.push(t):Ju=[t]:Zu=t}function rB(){if(Zu){var t=Zu,e=Ju;if(Ju=Zu=null,zP(t),e)for(t=0;t<e.length;t++)zP(e[t])}}function oB(t,e){return t(e)}function sB(){}var SS=!1;function iB(t,e,n){if(SS)return t(e,n);SS=!0;try{return oB(t,e,n)}finally{SS=!1,(Zu!==null||Ju!==null)&&(sB(),rB())}}function yp(t,e){var n=t.stateNode;if(n===null)return null;var r=g0(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(he(231,e,typeof n));return n}var m$=!1;if(Ui)try{var uh={};Object.defineProperty(uh,"passive",{get:function(){m$=!0}}),window.addEventListener("test",uh,uh),window.removeEventListener("test",uh,uh)}catch{m$=!1}function HQ(t,e,n,r,o,s,i,a,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(n,c)}catch(u){this.onError(u)}}var Jh=!1,Jv=null,ex=!1,g$=null,KQ={onError:function(t){Jh=!0,Jv=t}};function qQ(t,e,n,r,o,s,i,a,l){Jh=!1,Jv=null,HQ.apply(KQ,arguments)}function XQ(t,e,n,r,o,s,i,a,l){if(qQ.apply(this,arguments),Jh){if(Jh){var c=Jv;Jh=!1,Jv=null}else throw Error(he(198));ex||(ex=!0,g$=c)}}function eu(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function aB(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function WP(t){if(eu(t)!==t)throw Error(he(188))}function YQ(t){var e=t.alternate;if(!e){if(e=eu(t),e===null)throw Error(he(188));return e!==t?null:t}for(var n=t,r=e;;){var o=n.return;if(o===null)break;var s=o.alternate;if(s===null){if(r=o.return,r!==null){n=r;continue}break}if(o.child===s.child){for(s=o.child;s;){if(s===n)return WP(o),t;if(s===r)return WP(o),e;s=s.sibling}throw Error(he(188))}if(n.return!==r.return)n=o,r=s;else{for(var i=!1,a=o.child;a;){if(a===n){i=!0,n=o,r=s;break}if(a===r){i=!0,r=o,n=s;break}a=a.sibling}if(!i){for(a=s.child;a;){if(a===n){i=!0,n=s,r=o;break}if(a===r){i=!0,r=s,n=o;break}a=a.sibling}if(!i)throw Error(he(189))}}if(n.alternate!==r)throw Error(he(190))}if(n.tag!==3)throw Error(he(188));return n.stateNode.current===n?t:e}function lB(t){return t=YQ(t),t!==null?cB(t):null}function cB(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=cB(t);if(e!==null)return e;t=t.sibling}return null}var uB=mo.unstable_scheduleCallback,VP=mo.unstable_cancelCallback,QQ=mo.unstable_shouldYield,ZQ=mo.unstable_requestPaint,ln=mo.unstable_now,JQ=mo.unstable_getCurrentPriorityLevel,eE=mo.unstable_ImmediatePriority,dB=mo.unstable_UserBlockingPriority,tx=mo.unstable_NormalPriority,eZ=mo.unstable_LowPriority,fB=mo.unstable_IdlePriority,f0=null,ni=null;function tZ(t){if(ni&&typeof ni.onCommitFiberRoot=="function")try{ni.onCommitFiberRoot(f0,t,void 0,(t.current.flags&128)===128)}catch{}}var Cs=Math.clz32?Math.clz32:oZ,nZ=Math.log,rZ=Math.LN2;function oZ(t){return t>>>=0,t===0?32:31-(nZ(t)/rZ|0)|0}var Fy=64,Ly=4194304;function jh(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function nx(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,o=t.suspendedLanes,s=t.pingedLanes,i=n&268435455;if(i!==0){var a=i&~o;a!==0?r=jh(a):(s&=i,s!==0&&(r=jh(s)))}else i=n&~o,i!==0?r=jh(i):s!==0&&(r=jh(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&o)&&(o=r&-r,s=e&-e,o>=s||o===16&&(s&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Cs(e),o=1<<n,r|=t[n],e&=~o;return r}function sZ(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function iZ(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,o=t.expirationTimes,s=t.pendingLanes;0<s;){var i=31-Cs(s),a=1<<i,l=o[i];l===-1?(!(a&n)||a&r)&&(o[i]=sZ(a,e)):l<=e&&(t.expiredLanes|=a),s&=~a}}function y$(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function hB(){var t=Fy;return Fy<<=1,!(Fy&4194240)&&(Fy=64),t}function CS(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Vm(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Cs(e),t[e]=n}function aZ(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var o=31-Cs(n),s=1<<o;e[o]=0,r[o]=-1,t[o]=-1,n&=~s}}function tE(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Cs(n),o=1<<r;o&e|t[r]&e&&(t[r]|=e),n&=~o}}var yt=0;function pB(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var mB,nE,gB,yB,vB,v$=!1,jy=[],Ga=null,Ha=null,Ka=null,vp=new Map,xp=new Map,Ia=[],lZ="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function UP(t,e){switch(t){case"focusin":case"focusout":Ga=null;break;case"dragenter":case"dragleave":Ha=null;break;case"mouseover":case"mouseout":Ka=null;break;case"pointerover":case"pointerout":vp.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":xp.delete(e.pointerId)}}function dh(t,e,n,r,o,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[o]},e!==null&&(e=Gm(e),e!==null&&nE(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,o!==null&&e.indexOf(o)===-1&&e.push(o),t)}function cZ(t,e,n,r,o){switch(e){case"focusin":return Ga=dh(Ga,t,e,n,r,o),!0;case"dragenter":return Ha=dh(Ha,t,e,n,r,o),!0;case"mouseover":return Ka=dh(Ka,t,e,n,r,o),!0;case"pointerover":var s=o.pointerId;return vp.set(s,dh(vp.get(s)||null,t,e,n,r,o)),!0;case"gotpointercapture":return s=o.pointerId,xp.set(s,dh(xp.get(s)||null,t,e,n,r,o)),!0}return!1}function xB(t){var e=Zl(t.target);if(e!==null){var n=eu(e);if(n!==null){if(e=n.tag,e===13){if(e=aB(n),e!==null){t.blockedOn=e,vB(t.priority,function(){gB(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function _v(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=x$(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);h$=r,n.target.dispatchEvent(r),h$=null}else return e=Gm(n),e!==null&&nE(e),t.blockedOn=n,!1;e.shift()}return!0}function GP(t,e,n){_v(t)&&n.delete(e)}function uZ(){v$=!1,Ga!==null&&_v(Ga)&&(Ga=null),Ha!==null&&_v(Ha)&&(Ha=null),Ka!==null&&_v(Ka)&&(Ka=null),vp.forEach(GP),xp.forEach(GP)}function fh(t,e){t.blockedOn===e&&(t.blockedOn=null,v$||(v$=!0,mo.unstable_scheduleCallback(mo.unstable_NormalPriority,uZ)))}function bp(t){function e(o){return fh(o,t)}if(0<jy.length){fh(jy[0],t);for(var n=1;n<jy.length;n++){var r=jy[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Ga!==null&&fh(Ga,t),Ha!==null&&fh(Ha,t),Ka!==null&&fh(Ka,t),vp.forEach(e),xp.forEach(e),n=0;n<Ia.length;n++)r=Ia[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Ia.length&&(n=Ia[0],n.blockedOn===null);)xB(n),n.blockedOn===null&&Ia.shift()}var ed=sa.ReactCurrentBatchConfig,rx=!0;function dZ(t,e,n,r){var o=yt,s=ed.transition;ed.transition=null;try{yt=1,rE(t,e,n,r)}finally{yt=o,ed.transition=s}}function fZ(t,e,n,r){var o=yt,s=ed.transition;ed.transition=null;try{yt=4,rE(t,e,n,r)}finally{yt=o,ed.transition=s}}function rE(t,e,n,r){if(rx){var o=x$(t,e,n,r);if(o===null)RS(t,e,r,ox,n),UP(t,r);else if(cZ(o,t,e,n,r))r.stopPropagation();else if(UP(t,r),e&4&&-1<lZ.indexOf(t)){for(;o!==null;){var s=Gm(o);if(s!==null&&mB(s),s=x$(t,e,n,r),s===null&&RS(t,e,r,ox,n),s===o)break;o=s}o!==null&&r.stopPropagation()}else RS(t,e,r,null,n)}}var ox=null;function x$(t,e,n,r){if(ox=null,t=JI(r),t=Zl(t),t!==null)if(e=eu(t),e===null)t=null;else if(n=e.tag,n===13){if(t=aB(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return ox=t,null}function bB(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(JQ()){case eE:return 1;case dB:return 4;case tx:case eZ:return 16;case fB:return 536870912;default:return 16}default:return 16}}var La=null,oE=null,Dv=null;function wB(){if(Dv)return Dv;var t,e=oE,n=e.length,r,o="value"in La?La.value:La.textContent,s=o.length;for(t=0;t<n&&e[t]===o[t];t++);var i=n-t;for(r=1;r<=i&&e[n-r]===o[s-r];r++);return Dv=o.slice(t,1<r?1-r:void 0)}function Mv(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function By(){return!0}function HP(){return!1}function xo(t){function e(n,r,o,s,i){this._reactName=n,this._targetInst=o,this.type=r,this.nativeEvent=s,this.target=i,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?By:HP,this.isPropagationStopped=HP,this}return Kt(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=By)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=By)},persist:function(){},isPersistent:By}),e}var Cf={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},sE=xo(Cf),Um=Kt({},Cf,{view:0,detail:0}),hZ=xo(Um),$S,kS,hh,h0=Kt({},Um,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:iE,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==hh&&(hh&&t.type==="mousemove"?($S=t.screenX-hh.screenX,kS=t.screenY-hh.screenY):kS=$S=0,hh=t),$S)},movementY:function(t){return"movementY"in t?t.movementY:kS}}),KP=xo(h0),pZ=Kt({},h0,{dataTransfer:0}),mZ=xo(pZ),gZ=Kt({},Um,{relatedTarget:0}),TS=xo(gZ),yZ=Kt({},Cf,{animationName:0,elapsedTime:0,pseudoElement:0}),vZ=xo(yZ),xZ=Kt({},Cf,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),bZ=xo(xZ),wZ=Kt({},Cf,{data:0}),qP=xo(wZ),SZ={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},CZ={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},$Z={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function kZ(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=$Z[t])?!!e[t]:!1}function iE(){return kZ}var TZ=Kt({},Um,{key:function(t){if(t.key){var e=SZ[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Mv(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?CZ[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:iE,charCode:function(t){return t.type==="keypress"?Mv(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Mv(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),IZ=xo(TZ),EZ=Kt({},h0,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),XP=xo(EZ),NZ=Kt({},Um,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:iE}),AZ=xo(NZ),OZ=Kt({},Cf,{propertyName:0,elapsedTime:0,pseudoElement:0}),PZ=xo(OZ),RZ=Kt({},h0,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),_Z=xo(RZ),DZ=[9,13,27,32],aE=Ui&&"CompositionEvent"in window,ep=null;Ui&&"documentMode"in document&&(ep=document.documentMode);var MZ=Ui&&"TextEvent"in window&&!ep,SB=Ui&&(!aE||ep&&8<ep&&11>=ep),YP=" ",QP=!1;function CB(t,e){switch(t){case"keyup":return DZ.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function $B(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Fu=!1;function FZ(t,e){switch(t){case"compositionend":return $B(e);case"keypress":return e.which!==32?null:(QP=!0,YP);case"textInput":return t=e.data,t===YP&&QP?null:t;default:return null}}function LZ(t,e){if(Fu)return t==="compositionend"||!aE&&CB(t,e)?(t=wB(),Dv=oE=La=null,Fu=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return SB&&e.locale!=="ko"?null:e.data;default:return null}}var jZ={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function ZP(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!jZ[t.type]:e==="textarea"}function kB(t,e,n,r){nB(r),e=sx(e,"onChange"),0<e.length&&(n=new sE("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var tp=null,wp=null;function BZ(t){MB(t,0)}function p0(t){var e=Bu(t);if(X3(e))return t}function zZ(t,e){if(t==="change")return e}var TB=!1;if(Ui){var IS;if(Ui){var ES="oninput"in document;if(!ES){var JP=document.createElement("div");JP.setAttribute("oninput","return;"),ES=typeof JP.oninput=="function"}IS=ES}else IS=!1;TB=IS&&(!document.documentMode||9<document.documentMode)}function eR(){tp&&(tp.detachEvent("onpropertychange",IB),wp=tp=null)}function IB(t){if(t.propertyName==="value"&&p0(wp)){var e=[];kB(e,wp,t,JI(t)),iB(BZ,e)}}function WZ(t,e,n){t==="focusin"?(eR(),tp=e,wp=n,tp.attachEvent("onpropertychange",IB)):t==="focusout"&&eR()}function VZ(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return p0(wp)}function UZ(t,e){if(t==="click")return p0(e)}function GZ(t,e){if(t==="input"||t==="change")return p0(e)}function HZ(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Ns=typeof Object.is=="function"?Object.is:HZ;function Sp(t,e){if(Ns(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var o=n[r];if(!t$.call(e,o)||!Ns(t[o],e[o]))return!1}return!0}function tR(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function nR(t,e){var n=tR(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=tR(n)}}function EB(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?EB(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function NB(){for(var t=window,e=Zv();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Zv(t.document)}return e}function lE(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function KZ(t){var e=NB(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&EB(n.ownerDocument.documentElement,n)){if(r!==null&&lE(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var o=n.textContent.length,s=Math.min(r.start,o);r=r.end===void 0?s:Math.min(r.end,o),!t.extend&&s>r&&(o=r,r=s,s=o),o=nR(n,s);var i=nR(n,r);o&&i&&(t.rangeCount!==1||t.anchorNode!==o.node||t.anchorOffset!==o.offset||t.focusNode!==i.node||t.focusOffset!==i.offset)&&(e=e.createRange(),e.setStart(o.node,o.offset),t.removeAllRanges(),s>r?(t.addRange(e),t.extend(i.node,i.offset)):(e.setEnd(i.node,i.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var qZ=Ui&&"documentMode"in document&&11>=document.documentMode,Lu=null,b$=null,np=null,w$=!1;function rR(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;w$||Lu==null||Lu!==Zv(r)||(r=Lu,"selectionStart"in r&&lE(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),np&&Sp(np,r)||(np=r,r=sx(b$,"onSelect"),0<r.length&&(e=new sE("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Lu)))}function zy(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var ju={animationend:zy("Animation","AnimationEnd"),animationiteration:zy("Animation","AnimationIteration"),animationstart:zy("Animation","AnimationStart"),transitionend:zy("Transition","TransitionEnd")},NS={},AB={};Ui&&(AB=document.createElement("div").style,"AnimationEvent"in window||(delete ju.animationend.animation,delete ju.animationiteration.animation,delete ju.animationstart.animation),"TransitionEvent"in window||delete ju.transitionend.transition);function m0(t){if(NS[t])return NS[t];if(!ju[t])return t;var e=ju[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in AB)return NS[t]=e[n];return t}var OB=m0("animationend"),PB=m0("animationiteration"),RB=m0("animationstart"),_B=m0("transitionend"),DB=new Map,oR="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function vl(t,e){DB.set(t,e),Jc(e,[t])}for(var AS=0;AS<oR.length;AS++){var OS=oR[AS],XZ=OS.toLowerCase(),YZ=OS[0].toUpperCase()+OS.slice(1);vl(XZ,"on"+YZ)}vl(OB,"onAnimationEnd");vl(PB,"onAnimationIteration");vl(RB,"onAnimationStart");vl("dblclick","onDoubleClick");vl("focusin","onFocus");vl("focusout","onBlur");vl(_B,"onTransitionEnd");Ad("onMouseEnter",["mouseout","mouseover"]);Ad("onMouseLeave",["mouseout","mouseover"]);Ad("onPointerEnter",["pointerout","pointerover"]);Ad("onPointerLeave",["pointerout","pointerover"]);Jc("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Jc("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Jc("onBeforeInput",["compositionend","keypress","textInput","paste"]);Jc("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Jc("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Jc("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Bh="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),QZ=new Set("cancel close invalid load scroll toggle".split(" ").concat(Bh));function sR(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,XQ(r,e,void 0,t),t.currentTarget=null}function MB(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],o=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var i=r.length-1;0<=i;i--){var a=r[i],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==s&&o.isPropagationStopped())break e;sR(o,a,c),s=l}else for(i=0;i<r.length;i++){if(a=r[i],l=a.instance,c=a.currentTarget,a=a.listener,l!==s&&o.isPropagationStopped())break e;sR(o,a,c),s=l}}}if(ex)throw t=g$,ex=!1,g$=null,t}function Pt(t,e){var n=e[T$];n===void 0&&(n=e[T$]=new Set);var r=t+"__bubble";n.has(r)||(FB(e,t,2,!1),n.add(r))}function PS(t,e,n){var r=0;e&&(r|=4),FB(n,t,r,e)}var Wy="_reactListening"+Math.random().toString(36).slice(2);function Cp(t){if(!t[Wy]){t[Wy]=!0,U3.forEach(function(n){n!=="selectionchange"&&(QZ.has(n)||PS(n,!1,t),PS(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Wy]||(e[Wy]=!0,PS("selectionchange",!1,e))}}function FB(t,e,n,r){switch(bB(e)){case 1:var o=dZ;break;case 4:o=fZ;break;default:o=rE}n=o.bind(null,e,n,t),o=void 0,!m$||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(o=!0),r?o!==void 0?t.addEventListener(e,n,{capture:!0,passive:o}):t.addEventListener(e,n,!0):o!==void 0?t.addEventListener(e,n,{passive:o}):t.addEventListener(e,n,!1)}function RS(t,e,n,r,o){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var i=r.tag;if(i===3||i===4){var a=r.stateNode.containerInfo;if(a===o||a.nodeType===8&&a.parentNode===o)break;if(i===4)for(i=r.return;i!==null;){var l=i.tag;if((l===3||l===4)&&(l=i.stateNode.containerInfo,l===o||l.nodeType===8&&l.parentNode===o))return;i=i.return}for(;a!==null;){if(i=Zl(a),i===null)return;if(l=i.tag,l===5||l===6){r=s=i;continue e}a=a.parentNode}}r=r.return}iB(function(){var c=s,u=JI(n),d=[];e:{var f=DB.get(t);if(f!==void 0){var h=sE,p=t;switch(t){case"keypress":if(Mv(n)===0)break e;case"keydown":case"keyup":h=IZ;break;case"focusin":p="focus",h=TS;break;case"focusout":p="blur",h=TS;break;case"beforeblur":case"afterblur":h=TS;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":h=KP;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":h=mZ;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":h=AZ;break;case OB:case PB:case RB:h=vZ;break;case _B:h=PZ;break;case"scroll":h=hZ;break;case"wheel":h=_Z;break;case"copy":case"cut":case"paste":h=bZ;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":h=XP}var m=(e&4)!==0,g=!m&&t==="scroll",y=m?f!==null?f+"Capture":null:f;m=[];for(var v=c,x;v!==null;){x=v;var b=x.stateNode;if(x.tag===5&&b!==null&&(x=b,y!==null&&(b=yp(v,y),b!=null&&m.push($p(v,b,x)))),g)break;v=v.return}0<m.length&&(f=new h(f,p,null,n,u),d.push({event:f,listeners:m}))}}if(!(e&7)){e:{if(f=t==="mouseover"||t==="pointerover",h=t==="mouseout"||t==="pointerout",f&&n!==h$&&(p=n.relatedTarget||n.fromElement)&&(Zl(p)||p[Gi]))break e;if((h||f)&&(f=u.window===u?u:(f=u.ownerDocument)?f.defaultView||f.parentWindow:window,h?(p=n.relatedTarget||n.toElement,h=c,p=p?Zl(p):null,p!==null&&(g=eu(p),p!==g||p.tag!==5&&p.tag!==6)&&(p=null)):(h=null,p=c),h!==p)){if(m=KP,b="onMouseLeave",y="onMouseEnter",v="mouse",(t==="pointerout"||t==="pointerover")&&(m=XP,b="onPointerLeave",y="onPointerEnter",v="pointer"),g=h==null?f:Bu(h),x=p==null?f:Bu(p),f=new m(b,v+"leave",h,n,u),f.target=g,f.relatedTarget=x,b=null,Zl(u)===c&&(m=new m(y,v+"enter",p,n,u),m.target=x,m.relatedTarget=g,b=m),g=b,h&&p)t:{for(m=h,y=p,v=0,x=m;x;x=bu(x))v++;for(x=0,b=y;b;b=bu(b))x++;for(;0<v-x;)m=bu(m),v--;for(;0<x-v;)y=bu(y),x--;for(;v--;){if(m===y||y!==null&&m===y.alternate)break t;m=bu(m),y=bu(y)}m=null}else m=null;h!==null&&iR(d,f,h,m,!1),p!==null&&g!==null&&iR(d,g,p,m,!0)}}e:{if(f=c?Bu(c):window,h=f.nodeName&&f.nodeName.toLowerCase(),h==="select"||h==="input"&&f.type==="file")var w=zZ;else if(ZP(f))if(TB)w=GZ;else{w=VZ;var C=WZ}else(h=f.nodeName)&&h.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(w=UZ);if(w&&(w=w(t,c))){kB(d,w,n,u);break e}C&&C(t,f,c),t==="focusout"&&(C=f._wrapperState)&&C.controlled&&f.type==="number"&&l$(f,"number",f.value)}switch(C=c?Bu(c):window,t){case"focusin":(ZP(C)||C.contentEditable==="true")&&(Lu=C,b$=c,np=null);break;case"focusout":np=b$=Lu=null;break;case"mousedown":w$=!0;break;case"contextmenu":case"mouseup":case"dragend":w$=!1,rR(d,n,u);break;case"selectionchange":if(qZ)break;case"keydown":case"keyup":rR(d,n,u)}var $;if(aE)e:{switch(t){case"compositionstart":var T="onCompositionStart";break e;case"compositionend":T="onCompositionEnd";break e;case"compositionupdate":T="onCompositionUpdate";break e}T=void 0}else Fu?CB(t,n)&&(T="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(T="onCompositionStart");T&&(SB&&n.locale!=="ko"&&(Fu||T!=="onCompositionStart"?T==="onCompositionEnd"&&Fu&&($=wB()):(La=u,oE="value"in La?La.value:La.textContent,Fu=!0)),C=sx(c,T),0<C.length&&(T=new qP(T,t,null,n,u),d.push({event:T,listeners:C}),$?T.data=$:($=$B(n),$!==null&&(T.data=$)))),($=MZ?FZ(t,n):LZ(t,n))&&(c=sx(c,"onBeforeInput"),0<c.length&&(u=new qP("onBeforeInput","beforeinput",null,n,u),d.push({event:u,listeners:c}),u.data=$))}MB(d,e)})}function $p(t,e,n){return{instance:t,listener:e,currentTarget:n}}function sx(t,e){for(var n=e+"Capture",r=[];t!==null;){var o=t,s=o.stateNode;o.tag===5&&s!==null&&(o=s,s=yp(t,n),s!=null&&r.unshift($p(t,s,o)),s=yp(t,e),s!=null&&r.push($p(t,s,o))),t=t.return}return r}function bu(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function iR(t,e,n,r,o){for(var s=e._reactName,i=[];n!==null&&n!==r;){var a=n,l=a.alternate,c=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&c!==null&&(a=c,o?(l=yp(n,s),l!=null&&i.unshift($p(n,l,a))):o||(l=yp(n,s),l!=null&&i.push($p(n,l,a)))),n=n.return}i.length!==0&&t.push({event:e,listeners:i})}var ZZ=/\r\n?/g,JZ=/\u0000|\uFFFD/g;function aR(t){return(typeof t=="string"?t:""+t).replace(ZZ,`
`).replace(JZ,"")}function Vy(t,e,n){if(e=aR(e),aR(t)!==e&&n)throw Error(he(425))}function ix(){}var S$=null,C$=null;function $$(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var k$=typeof setTimeout=="function"?setTimeout:void 0,eJ=typeof clearTimeout=="function"?clearTimeout:void 0,lR=typeof Promise=="function"?Promise:void 0,tJ=typeof queueMicrotask=="function"?queueMicrotask:typeof lR<"u"?function(t){return lR.resolve(null).then(t).catch(nJ)}:k$;function nJ(t){setTimeout(function(){throw t})}function _S(t,e){var n=e,r=0;do{var o=n.nextSibling;if(t.removeChild(n),o&&o.nodeType===8)if(n=o.data,n==="/$"){if(r===0){t.removeChild(o),bp(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=o}while(n);bp(e)}function qa(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function cR(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var $f=Math.random().toString(36).slice(2),Qs="__reactFiber$"+$f,kp="__reactProps$"+$f,Gi="__reactContainer$"+$f,T$="__reactEvents$"+$f,rJ="__reactListeners$"+$f,oJ="__reactHandles$"+$f;function Zl(t){var e=t[Qs];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Gi]||n[Qs]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=cR(t);t!==null;){if(n=t[Qs])return n;t=cR(t)}return e}t=n,n=t.parentNode}return null}function Gm(t){return t=t[Qs]||t[Gi],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Bu(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(he(33))}function g0(t){return t[kp]||null}var I$=[],zu=-1;function xl(t){return{current:t}}function Dt(t){0>zu||(t.current=I$[zu],I$[zu]=null,zu--)}function It(t,e){zu++,I$[zu]=t.current,t.current=e}var al={},hr=xl(al),Kr=xl(!1),$c=al;function Od(t,e){var n=t.type.contextTypes;if(!n)return al;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var o={},s;for(s in n)o[s]=e[s];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=o),o}function qr(t){return t=t.childContextTypes,t!=null}function ax(){Dt(Kr),Dt(hr)}function uR(t,e,n){if(hr.current!==al)throw Error(he(168));It(hr,e),It(Kr,n)}function LB(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var o in r)if(!(o in e))throw Error(he(108,WQ(t)||"Unknown",o));return Kt({},n,r)}function lx(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||al,$c=hr.current,It(hr,t),It(Kr,Kr.current),!0}function dR(t,e,n){var r=t.stateNode;if(!r)throw Error(he(169));n?(t=LB(t,e,$c),r.__reactInternalMemoizedMergedChildContext=t,Dt(Kr),Dt(hr),It(hr,t)):Dt(Kr),It(Kr,n)}var Ii=null,y0=!1,DS=!1;function jB(t){Ii===null?Ii=[t]:Ii.push(t)}function sJ(t){y0=!0,jB(t)}function bl(){if(!DS&&Ii!==null){DS=!0;var t=0,e=yt;try{var n=Ii;for(yt=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Ii=null,y0=!1}catch(o){throw Ii!==null&&(Ii=Ii.slice(t+1)),uB(eE,bl),o}finally{yt=e,DS=!1}}return null}var Wu=[],Vu=0,cx=null,ux=0,Oo=[],Po=0,kc=null,Ai=1,Oi="";function Wl(t,e){Wu[Vu++]=ux,Wu[Vu++]=cx,cx=t,ux=e}function BB(t,e,n){Oo[Po++]=Ai,Oo[Po++]=Oi,Oo[Po++]=kc,kc=t;var r=Ai;t=Oi;var o=32-Cs(r)-1;r&=~(1<<o),n+=1;var s=32-Cs(e)+o;if(30<s){var i=o-o%5;s=(r&(1<<i)-1).toString(32),r>>=i,o-=i,Ai=1<<32-Cs(e)+o|n<<o|r,Oi=s+t}else Ai=1<<s|n<<o|r,Oi=t}function cE(t){t.return!==null&&(Wl(t,1),BB(t,1,0))}function uE(t){for(;t===cx;)cx=Wu[--Vu],Wu[Vu]=null,ux=Wu[--Vu],Wu[Vu]=null;for(;t===kc;)kc=Oo[--Po],Oo[Po]=null,Oi=Oo[--Po],Oo[Po]=null,Ai=Oo[--Po],Oo[Po]=null}var fo=null,co=null,jt=!1,hs=null;function zB(t,e){var n=Do(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function fR(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,fo=t,co=qa(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,fo=t,co=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=kc!==null?{id:Ai,overflow:Oi}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Do(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,fo=t,co=null,!0):!1;default:return!1}}function E$(t){return(t.mode&1)!==0&&(t.flags&128)===0}function N$(t){if(jt){var e=co;if(e){var n=e;if(!fR(t,e)){if(E$(t))throw Error(he(418));e=qa(n.nextSibling);var r=fo;e&&fR(t,e)?zB(r,n):(t.flags=t.flags&-4097|2,jt=!1,fo=t)}}else{if(E$(t))throw Error(he(418));t.flags=t.flags&-4097|2,jt=!1,fo=t}}}function hR(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;fo=t}function Uy(t){if(t!==fo)return!1;if(!jt)return hR(t),jt=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!$$(t.type,t.memoizedProps)),e&&(e=co)){if(E$(t))throw WB(),Error(he(418));for(;e;)zB(t,e),e=qa(e.nextSibling)}if(hR(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(he(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){co=qa(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}co=null}}else co=fo?qa(t.stateNode.nextSibling):null;return!0}function WB(){for(var t=co;t;)t=qa(t.nextSibling)}function Pd(){co=fo=null,jt=!1}function dE(t){hs===null?hs=[t]:hs.push(t)}var iJ=sa.ReactCurrentBatchConfig;function ph(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(he(309));var r=n.stateNode}if(!r)throw Error(he(147,t));var o=r,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(i){var a=o.refs;i===null?delete a[s]:a[s]=i},e._stringRef=s,e)}if(typeof t!="string")throw Error(he(284));if(!n._owner)throw Error(he(290,t))}return t}function Gy(t,e){throw t=Object.prototype.toString.call(e),Error(he(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function pR(t){var e=t._init;return e(t._payload)}function VB(t){function e(y,v){if(t){var x=y.deletions;x===null?(y.deletions=[v],y.flags|=16):x.push(v)}}function n(y,v){if(!t)return null;for(;v!==null;)e(y,v),v=v.sibling;return null}function r(y,v){for(y=new Map;v!==null;)v.key!==null?y.set(v.key,v):y.set(v.index,v),v=v.sibling;return y}function o(y,v){return y=Za(y,v),y.index=0,y.sibling=null,y}function s(y,v,x){return y.index=x,t?(x=y.alternate,x!==null?(x=x.index,x<v?(y.flags|=2,v):x):(y.flags|=2,v)):(y.flags|=1048576,v)}function i(y){return t&&y.alternate===null&&(y.flags|=2),y}function a(y,v,x,b){return v===null||v.tag!==6?(v=WS(x,y.mode,b),v.return=y,v):(v=o(v,x),v.return=y,v)}function l(y,v,x,b){var w=x.type;return w===Mu?u(y,v,x.props.children,b,x.key):v!==null&&(v.elementType===w||typeof w=="object"&&w!==null&&w.$$typeof===Ca&&pR(w)===v.type)?(b=o(v,x.props),b.ref=ph(y,v,x),b.return=y,b):(b=Vv(x.type,x.key,x.props,null,y.mode,b),b.ref=ph(y,v,x),b.return=y,b)}function c(y,v,x,b){return v===null||v.tag!==4||v.stateNode.containerInfo!==x.containerInfo||v.stateNode.implementation!==x.implementation?(v=VS(x,y.mode,b),v.return=y,v):(v=o(v,x.children||[]),v.return=y,v)}function u(y,v,x,b,w){return v===null||v.tag!==7?(v=yc(x,y.mode,b,w),v.return=y,v):(v=o(v,x),v.return=y,v)}function d(y,v,x){if(typeof v=="string"&&v!==""||typeof v=="number")return v=WS(""+v,y.mode,x),v.return=y,v;if(typeof v=="object"&&v!==null){switch(v.$$typeof){case _y:return x=Vv(v.type,v.key,v.props,null,y.mode,x),x.ref=ph(y,null,v),x.return=y,x;case Du:return v=VS(v,y.mode,x),v.return=y,v;case Ca:var b=v._init;return d(y,b(v._payload),x)}if(Lh(v)||ch(v))return v=yc(v,y.mode,x,null),v.return=y,v;Gy(y,v)}return null}function f(y,v,x,b){var w=v!==null?v.key:null;if(typeof x=="string"&&x!==""||typeof x=="number")return w!==null?null:a(y,v,""+x,b);if(typeof x=="object"&&x!==null){switch(x.$$typeof){case _y:return x.key===w?l(y,v,x,b):null;case Du:return x.key===w?c(y,v,x,b):null;case Ca:return w=x._init,f(y,v,w(x._payload),b)}if(Lh(x)||ch(x))return w!==null?null:u(y,v,x,b,null);Gy(y,x)}return null}function h(y,v,x,b,w){if(typeof b=="string"&&b!==""||typeof b=="number")return y=y.get(x)||null,a(v,y,""+b,w);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case _y:return y=y.get(b.key===null?x:b.key)||null,l(v,y,b,w);case Du:return y=y.get(b.key===null?x:b.key)||null,c(v,y,b,w);case Ca:var C=b._init;return h(y,v,x,C(b._payload),w)}if(Lh(b)||ch(b))return y=y.get(x)||null,u(v,y,b,w,null);Gy(v,b)}return null}function p(y,v,x,b){for(var w=null,C=null,$=v,T=v=0,I=null;$!==null&&T<x.length;T++){$.index>T?(I=$,$=null):I=$.sibling;var E=f(y,$,x[T],b);if(E===null){$===null&&($=I);break}t&&$&&E.alternate===null&&e(y,$),v=s(E,v,T),C===null?w=E:C.sibling=E,C=E,$=I}if(T===x.length)return n(y,$),jt&&Wl(y,T),w;if($===null){for(;T<x.length;T++)$=d(y,x[T],b),$!==null&&(v=s($,v,T),C===null?w=$:C.sibling=$,C=$);return jt&&Wl(y,T),w}for($=r(y,$);T<x.length;T++)I=h($,y,T,x[T],b),I!==null&&(t&&I.alternate!==null&&$.delete(I.key===null?T:I.key),v=s(I,v,T),C===null?w=I:C.sibling=I,C=I);return t&&$.forEach(function(N){return e(y,N)}),jt&&Wl(y,T),w}function m(y,v,x,b){var w=ch(x);if(typeof w!="function")throw Error(he(150));if(x=w.call(x),x==null)throw Error(he(151));for(var C=w=null,$=v,T=v=0,I=null,E=x.next();$!==null&&!E.done;T++,E=x.next()){$.index>T?(I=$,$=null):I=$.sibling;var N=f(y,$,E.value,b);if(N===null){$===null&&($=I);break}t&&$&&N.alternate===null&&e(y,$),v=s(N,v,T),C===null?w=N:C.sibling=N,C=N,$=I}if(E.done)return n(y,$),jt&&Wl(y,T),w;if($===null){for(;!E.done;T++,E=x.next())E=d(y,E.value,b),E!==null&&(v=s(E,v,T),C===null?w=E:C.sibling=E,C=E);return jt&&Wl(y,T),w}for($=r(y,$);!E.done;T++,E=x.next())E=h($,y,T,E.value,b),E!==null&&(t&&E.alternate!==null&&$.delete(E.key===null?T:E.key),v=s(E,v,T),C===null?w=E:C.sibling=E,C=E);return t&&$.forEach(function(A){return e(y,A)}),jt&&Wl(y,T),w}function g(y,v,x,b){if(typeof x=="object"&&x!==null&&x.type===Mu&&x.key===null&&(x=x.props.children),typeof x=="object"&&x!==null){switch(x.$$typeof){case _y:e:{for(var w=x.key,C=v;C!==null;){if(C.key===w){if(w=x.type,w===Mu){if(C.tag===7){n(y,C.sibling),v=o(C,x.props.children),v.return=y,y=v;break e}}else if(C.elementType===w||typeof w=="object"&&w!==null&&w.$$typeof===Ca&&pR(w)===C.type){n(y,C.sibling),v=o(C,x.props),v.ref=ph(y,C,x),v.return=y,y=v;break e}n(y,C);break}else e(y,C);C=C.sibling}x.type===Mu?(v=yc(x.props.children,y.mode,b,x.key),v.return=y,y=v):(b=Vv(x.type,x.key,x.props,null,y.mode,b),b.ref=ph(y,v,x),b.return=y,y=b)}return i(y);case Du:e:{for(C=x.key;v!==null;){if(v.key===C)if(v.tag===4&&v.stateNode.containerInfo===x.containerInfo&&v.stateNode.implementation===x.implementation){n(y,v.sibling),v=o(v,x.children||[]),v.return=y,y=v;break e}else{n(y,v);break}else e(y,v);v=v.sibling}v=VS(x,y.mode,b),v.return=y,y=v}return i(y);case Ca:return C=x._init,g(y,v,C(x._payload),b)}if(Lh(x))return p(y,v,x,b);if(ch(x))return m(y,v,x,b);Gy(y,x)}return typeof x=="string"&&x!==""||typeof x=="number"?(x=""+x,v!==null&&v.tag===6?(n(y,v.sibling),v=o(v,x),v.return=y,y=v):(n(y,v),v=WS(x,y.mode,b),v.return=y,y=v),i(y)):n(y,v)}return g}var Rd=VB(!0),UB=VB(!1),dx=xl(null),fx=null,Uu=null,fE=null;function hE(){fE=Uu=fx=null}function pE(t){var e=dx.current;Dt(dx),t._currentValue=e}function A$(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function td(t,e){fx=t,fE=Uu=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Vr=!0),t.firstContext=null)}function Go(t){var e=t._currentValue;if(fE!==t)if(t={context:t,memoizedValue:e,next:null},Uu===null){if(fx===null)throw Error(he(308));Uu=t,fx.dependencies={lanes:0,firstContext:t}}else Uu=Uu.next=t;return e}var Jl=null;function mE(t){Jl===null?Jl=[t]:Jl.push(t)}function GB(t,e,n,r){var o=e.interleaved;return o===null?(n.next=n,mE(e)):(n.next=o.next,o.next=n),e.interleaved=n,Hi(t,r)}function Hi(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var $a=!1;function gE(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function HB(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Mi(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Xa(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,at&2){var o=r.pending;return o===null?e.next=e:(e.next=o.next,o.next=e),r.pending=e,Hi(t,n)}return o=r.interleaved,o===null?(e.next=e,mE(r)):(e.next=o.next,o.next=e),r.interleaved=e,Hi(t,n)}function Fv(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,tE(t,n)}}function mR(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var o=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var i={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?o=s=i:s=s.next=i,n=n.next}while(n!==null);s===null?o=s=e:s=s.next=e}else o=s=e;n={baseState:r.baseState,firstBaseUpdate:o,lastBaseUpdate:s,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function hx(t,e,n,r){var o=t.updateQueue;$a=!1;var s=o.firstBaseUpdate,i=o.lastBaseUpdate,a=o.shared.pending;if(a!==null){o.shared.pending=null;var l=a,c=l.next;l.next=null,i===null?s=c:i.next=c,i=l;var u=t.alternate;u!==null&&(u=u.updateQueue,a=u.lastBaseUpdate,a!==i&&(a===null?u.firstBaseUpdate=c:a.next=c,u.lastBaseUpdate=l))}if(s!==null){var d=o.baseState;i=0,u=c=l=null,a=s;do{var f=a.lane,h=a.eventTime;if((r&f)===f){u!==null&&(u=u.next={eventTime:h,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var p=t,m=a;switch(f=e,h=n,m.tag){case 1:if(p=m.payload,typeof p=="function"){d=p.call(h,d,f);break e}d=p;break e;case 3:p.flags=p.flags&-65537|128;case 0:if(p=m.payload,f=typeof p=="function"?p.call(h,d,f):p,f==null)break e;d=Kt({},d,f);break e;case 2:$a=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,f=o.effects,f===null?o.effects=[a]:f.push(a))}else h={eventTime:h,lane:f,tag:a.tag,payload:a.payload,callback:a.callback,next:null},u===null?(c=u=h,l=d):u=u.next=h,i|=f;if(a=a.next,a===null){if(a=o.shared.pending,a===null)break;f=a,a=f.next,f.next=null,o.lastBaseUpdate=f,o.shared.pending=null}}while(!0);if(u===null&&(l=d),o.baseState=l,o.firstBaseUpdate=c,o.lastBaseUpdate=u,e=o.shared.interleaved,e!==null){o=e;do i|=o.lane,o=o.next;while(o!==e)}else s===null&&(o.shared.lanes=0);Ic|=i,t.lanes=i,t.memoizedState=d}}function gR(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],o=r.callback;if(o!==null){if(r.callback=null,r=n,typeof o!="function")throw Error(he(191,o));o.call(r)}}}var Hm={},ri=xl(Hm),Tp=xl(Hm),Ip=xl(Hm);function ec(t){if(t===Hm)throw Error(he(174));return t}function yE(t,e){switch(It(Ip,e),It(Tp,t),It(ri,Hm),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:u$(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=u$(e,t)}Dt(ri),It(ri,e)}function _d(){Dt(ri),Dt(Tp),Dt(Ip)}function KB(t){ec(Ip.current);var e=ec(ri.current),n=u$(e,t.type);e!==n&&(It(Tp,t),It(ri,n))}function vE(t){Tp.current===t&&(Dt(ri),Dt(Tp))}var Ut=xl(0);function px(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var MS=[];function xE(){for(var t=0;t<MS.length;t++)MS[t]._workInProgressVersionPrimary=null;MS.length=0}var Lv=sa.ReactCurrentDispatcher,FS=sa.ReactCurrentBatchConfig,Tc=0,Ht=null,Cn=null,Rn=null,mx=!1,rp=!1,Ep=0,aJ=0;function tr(){throw Error(he(321))}function bE(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Ns(t[n],e[n]))return!1;return!0}function wE(t,e,n,r,o,s){if(Tc=s,Ht=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Lv.current=t===null||t.memoizedState===null?dJ:fJ,t=n(r,o),rp){s=0;do{if(rp=!1,Ep=0,25<=s)throw Error(he(301));s+=1,Rn=Cn=null,e.updateQueue=null,Lv.current=hJ,t=n(r,o)}while(rp)}if(Lv.current=gx,e=Cn!==null&&Cn.next!==null,Tc=0,Rn=Cn=Ht=null,mx=!1,e)throw Error(he(300));return t}function SE(){var t=Ep!==0;return Ep=0,t}function zs(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Rn===null?Ht.memoizedState=Rn=t:Rn=Rn.next=t,Rn}function Ho(){if(Cn===null){var t=Ht.alternate;t=t!==null?t.memoizedState:null}else t=Cn.next;var e=Rn===null?Ht.memoizedState:Rn.next;if(e!==null)Rn=e,Cn=t;else{if(t===null)throw Error(he(310));Cn=t,t={memoizedState:Cn.memoizedState,baseState:Cn.baseState,baseQueue:Cn.baseQueue,queue:Cn.queue,next:null},Rn===null?Ht.memoizedState=Rn=t:Rn=Rn.next=t}return Rn}function Np(t,e){return typeof e=="function"?e(t):e}function LS(t){var e=Ho(),n=e.queue;if(n===null)throw Error(he(311));n.lastRenderedReducer=t;var r=Cn,o=r.baseQueue,s=n.pending;if(s!==null){if(o!==null){var i=o.next;o.next=s.next,s.next=i}r.baseQueue=o=s,n.pending=null}if(o!==null){s=o.next,r=r.baseState;var a=i=null,l=null,c=s;do{var u=c.lane;if((Tc&u)===u)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:t(r,c.action);else{var d={lane:u,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(a=l=d,i=r):l=l.next=d,Ht.lanes|=u,Ic|=u}c=c.next}while(c!==null&&c!==s);l===null?i=r:l.next=a,Ns(r,e.memoizedState)||(Vr=!0),e.memoizedState=r,e.baseState=i,e.baseQueue=l,n.lastRenderedState=r}if(t=n.interleaved,t!==null){o=t;do s=o.lane,Ht.lanes|=s,Ic|=s,o=o.next;while(o!==t)}else o===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function jS(t){var e=Ho(),n=e.queue;if(n===null)throw Error(he(311));n.lastRenderedReducer=t;var r=n.dispatch,o=n.pending,s=e.memoizedState;if(o!==null){n.pending=null;var i=o=o.next;do s=t(s,i.action),i=i.next;while(i!==o);Ns(s,e.memoizedState)||(Vr=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,r]}function qB(){}function XB(t,e){var n=Ht,r=Ho(),o=e(),s=!Ns(r.memoizedState,o);if(s&&(r.memoizedState=o,Vr=!0),r=r.queue,CE(ZB.bind(null,n,r,t),[t]),r.getSnapshot!==e||s||Rn!==null&&Rn.memoizedState.tag&1){if(n.flags|=2048,Ap(9,QB.bind(null,n,r,o,e),void 0,null),Dn===null)throw Error(he(349));Tc&30||YB(n,e,o)}return o}function YB(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Ht.updateQueue,e===null?(e={lastEffect:null,stores:null},Ht.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function QB(t,e,n,r){e.value=n,e.getSnapshot=r,JB(e)&&ez(t)}function ZB(t,e,n){return n(function(){JB(e)&&ez(t)})}function JB(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Ns(t,n)}catch{return!0}}function ez(t){var e=Hi(t,1);e!==null&&$s(e,t,1,-1)}function yR(t){var e=zs();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Np,lastRenderedState:t},e.queue=t,t=t.dispatch=uJ.bind(null,Ht,t),[e.memoizedState,t]}function Ap(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Ht.updateQueue,e===null?(e={lastEffect:null,stores:null},Ht.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function tz(){return Ho().memoizedState}function jv(t,e,n,r){var o=zs();Ht.flags|=t,o.memoizedState=Ap(1|e,n,void 0,r===void 0?null:r)}function v0(t,e,n,r){var o=Ho();r=r===void 0?null:r;var s=void 0;if(Cn!==null){var i=Cn.memoizedState;if(s=i.destroy,r!==null&&bE(r,i.deps)){o.memoizedState=Ap(e,n,s,r);return}}Ht.flags|=t,o.memoizedState=Ap(1|e,n,s,r)}function vR(t,e){return jv(8390656,8,t,e)}function CE(t,e){return v0(2048,8,t,e)}function nz(t,e){return v0(4,2,t,e)}function rz(t,e){return v0(4,4,t,e)}function oz(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function sz(t,e,n){return n=n!=null?n.concat([t]):null,v0(4,4,oz.bind(null,e,t),n)}function $E(){}function iz(t,e){var n=Ho();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&bE(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function az(t,e){var n=Ho();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&bE(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function lz(t,e,n){return Tc&21?(Ns(n,e)||(n=hB(),Ht.lanes|=n,Ic|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Vr=!0),t.memoizedState=n)}function lJ(t,e){var n=yt;yt=n!==0&&4>n?n:4,t(!0);var r=FS.transition;FS.transition={};try{t(!1),e()}finally{yt=n,FS.transition=r}}function cz(){return Ho().memoizedState}function cJ(t,e,n){var r=Qa(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},uz(t))dz(e,n);else if(n=GB(t,e,n,r),n!==null){var o=Er();$s(n,t,r,o),fz(n,e,r)}}function uJ(t,e,n){var r=Qa(t),o={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(uz(t))dz(e,o);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var i=e.lastRenderedState,a=s(i,n);if(o.hasEagerState=!0,o.eagerState=a,Ns(a,i)){var l=e.interleaved;l===null?(o.next=o,mE(e)):(o.next=l.next,l.next=o),e.interleaved=o;return}}catch{}finally{}n=GB(t,e,o,r),n!==null&&(o=Er(),$s(n,t,r,o),fz(n,e,r))}}function uz(t){var e=t.alternate;return t===Ht||e!==null&&e===Ht}function dz(t,e){rp=mx=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function fz(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,tE(t,n)}}var gx={readContext:Go,useCallback:tr,useContext:tr,useEffect:tr,useImperativeHandle:tr,useInsertionEffect:tr,useLayoutEffect:tr,useMemo:tr,useReducer:tr,useRef:tr,useState:tr,useDebugValue:tr,useDeferredValue:tr,useTransition:tr,useMutableSource:tr,useSyncExternalStore:tr,useId:tr,unstable_isNewReconciler:!1},dJ={readContext:Go,useCallback:function(t,e){return zs().memoizedState=[t,e===void 0?null:e],t},useContext:Go,useEffect:vR,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,jv(4194308,4,oz.bind(null,e,t),n)},useLayoutEffect:function(t,e){return jv(4194308,4,t,e)},useInsertionEffect:function(t,e){return jv(4,2,t,e)},useMemo:function(t,e){var n=zs();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=zs();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=cJ.bind(null,Ht,t),[r.memoizedState,t]},useRef:function(t){var e=zs();return t={current:t},e.memoizedState=t},useState:yR,useDebugValue:$E,useDeferredValue:function(t){return zs().memoizedState=t},useTransition:function(){var t=yR(!1),e=t[0];return t=lJ.bind(null,t[1]),zs().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Ht,o=zs();if(jt){if(n===void 0)throw Error(he(407));n=n()}else{if(n=e(),Dn===null)throw Error(he(349));Tc&30||YB(r,e,n)}o.memoizedState=n;var s={value:n,getSnapshot:e};return o.queue=s,vR(ZB.bind(null,r,s,t),[t]),r.flags|=2048,Ap(9,QB.bind(null,r,s,n,e),void 0,null),n},useId:function(){var t=zs(),e=Dn.identifierPrefix;if(jt){var n=Oi,r=Ai;n=(r&~(1<<32-Cs(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Ep++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=aJ++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},fJ={readContext:Go,useCallback:iz,useContext:Go,useEffect:CE,useImperativeHandle:sz,useInsertionEffect:nz,useLayoutEffect:rz,useMemo:az,useReducer:LS,useRef:tz,useState:function(){return LS(Np)},useDebugValue:$E,useDeferredValue:function(t){var e=Ho();return lz(e,Cn.memoizedState,t)},useTransition:function(){var t=LS(Np)[0],e=Ho().memoizedState;return[t,e]},useMutableSource:qB,useSyncExternalStore:XB,useId:cz,unstable_isNewReconciler:!1},hJ={readContext:Go,useCallback:iz,useContext:Go,useEffect:CE,useImperativeHandle:sz,useInsertionEffect:nz,useLayoutEffect:rz,useMemo:az,useReducer:jS,useRef:tz,useState:function(){return jS(Np)},useDebugValue:$E,useDeferredValue:function(t){var e=Ho();return Cn===null?e.memoizedState=t:lz(e,Cn.memoizedState,t)},useTransition:function(){var t=jS(Np)[0],e=Ho().memoizedState;return[t,e]},useMutableSource:qB,useSyncExternalStore:XB,useId:cz,unstable_isNewReconciler:!1};function ls(t,e){if(t&&t.defaultProps){e=Kt({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function O$(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Kt({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var x0={isMounted:function(t){return(t=t._reactInternals)?eu(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Er(),o=Qa(t),s=Mi(r,o);s.payload=e,n!=null&&(s.callback=n),e=Xa(t,s,o),e!==null&&($s(e,t,o,r),Fv(e,t,o))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Er(),o=Qa(t),s=Mi(r,o);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=Xa(t,s,o),e!==null&&($s(e,t,o,r),Fv(e,t,o))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Er(),r=Qa(t),o=Mi(n,r);o.tag=2,e!=null&&(o.callback=e),e=Xa(t,o,r),e!==null&&($s(e,t,r,n),Fv(e,t,r))}};function xR(t,e,n,r,o,s,i){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,s,i):e.prototype&&e.prototype.isPureReactComponent?!Sp(n,r)||!Sp(o,s):!0}function hz(t,e,n){var r=!1,o=al,s=e.contextType;return typeof s=="object"&&s!==null?s=Go(s):(o=qr(e)?$c:hr.current,r=e.contextTypes,s=(r=r!=null)?Od(t,o):al),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=x0,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=o,t.__reactInternalMemoizedMaskedChildContext=s),e}function bR(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&x0.enqueueReplaceState(e,e.state,null)}function P$(t,e,n,r){var o=t.stateNode;o.props=n,o.state=t.memoizedState,o.refs={},gE(t);var s=e.contextType;typeof s=="object"&&s!==null?o.context=Go(s):(s=qr(e)?$c:hr.current,o.context=Od(t,s)),o.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(O$(t,e,s,n),o.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof o.getSnapshotBeforeUpdate=="function"||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(e=o.state,typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount(),e!==o.state&&x0.enqueueReplaceState(o,o.state,null),hx(t,n,o,r),o.state=t.memoizedState),typeof o.componentDidMount=="function"&&(t.flags|=4194308)}function Dd(t,e){try{var n="",r=e;do n+=zQ(r),r=r.return;while(r);var o=n}catch(s){o=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:o,digest:null}}function BS(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function R$(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var pJ=typeof WeakMap=="function"?WeakMap:Map;function pz(t,e,n){n=Mi(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){vx||(vx=!0,V$=r),R$(t,e)},n}function mz(t,e,n){n=Mi(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var o=e.value;n.payload=function(){return r(o)},n.callback=function(){R$(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){R$(t,e),typeof r!="function"&&(Ya===null?Ya=new Set([this]):Ya.add(this));var i=e.stack;this.componentDidCatch(e.value,{componentStack:i!==null?i:""})}),n}function wR(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new pJ;var o=new Set;r.set(e,o)}else o=r.get(e),o===void 0&&(o=new Set,r.set(e,o));o.has(n)||(o.add(n),t=EJ.bind(null,t,e,n),e.then(t,t))}function SR(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function CR(t,e,n,r,o){return t.mode&1?(t.flags|=65536,t.lanes=o,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Mi(-1,1),e.tag=2,Xa(n,e,1))),n.lanes|=1),t)}var mJ=sa.ReactCurrentOwner,Vr=!1;function xr(t,e,n,r){e.child=t===null?UB(e,null,n,r):Rd(e,t.child,n,r)}function $R(t,e,n,r,o){n=n.render;var s=e.ref;return td(e,o),r=wE(t,e,n,r,s,o),n=SE(),t!==null&&!Vr?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~o,Ki(t,e,o)):(jt&&n&&cE(e),e.flags|=1,xr(t,e,r,o),e.child)}function kR(t,e,n,r,o){if(t===null){var s=n.type;return typeof s=="function"&&!PE(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,gz(t,e,s,r,o)):(t=Vv(n.type,null,r,e,e.mode,o),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&o)){var i=s.memoizedProps;if(n=n.compare,n=n!==null?n:Sp,n(i,r)&&t.ref===e.ref)return Ki(t,e,o)}return e.flags|=1,t=Za(s,r),t.ref=e.ref,t.return=e,e.child=t}function gz(t,e,n,r,o){if(t!==null){var s=t.memoizedProps;if(Sp(s,r)&&t.ref===e.ref)if(Vr=!1,e.pendingProps=r=s,(t.lanes&o)!==0)t.flags&131072&&(Vr=!0);else return e.lanes=t.lanes,Ki(t,e,o)}return _$(t,e,n,r,o)}function yz(t,e,n){var r=e.pendingProps,o=r.children,s=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},It(Hu,oo),oo|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,It(Hu,oo),oo|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,It(Hu,oo),oo|=r}else s!==null?(r=s.baseLanes|n,e.memoizedState=null):r=n,It(Hu,oo),oo|=r;return xr(t,e,o,n),e.child}function vz(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function _$(t,e,n,r,o){var s=qr(n)?$c:hr.current;return s=Od(e,s),td(e,o),n=wE(t,e,n,r,s,o),r=SE(),t!==null&&!Vr?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~o,Ki(t,e,o)):(jt&&r&&cE(e),e.flags|=1,xr(t,e,n,o),e.child)}function TR(t,e,n,r,o){if(qr(n)){var s=!0;lx(e)}else s=!1;if(td(e,o),e.stateNode===null)Bv(t,e),hz(e,n,r),P$(e,n,r,o),r=!0;else if(t===null){var i=e.stateNode,a=e.memoizedProps;i.props=a;var l=i.context,c=n.contextType;typeof c=="object"&&c!==null?c=Go(c):(c=qr(n)?$c:hr.current,c=Od(e,c));var u=n.getDerivedStateFromProps,d=typeof u=="function"||typeof i.getSnapshotBeforeUpdate=="function";d||typeof i.UNSAFE_componentWillReceiveProps!="function"&&typeof i.componentWillReceiveProps!="function"||(a!==r||l!==c)&&bR(e,i,r,c),$a=!1;var f=e.memoizedState;i.state=f,hx(e,r,i,o),l=e.memoizedState,a!==r||f!==l||Kr.current||$a?(typeof u=="function"&&(O$(e,n,u,r),l=e.memoizedState),(a=$a||xR(e,n,a,r,f,l,c))?(d||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount()),typeof i.componentDidMount=="function"&&(e.flags|=4194308)):(typeof i.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),i.props=r,i.state=l,i.context=c,r=a):(typeof i.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{i=e.stateNode,HB(t,e),a=e.memoizedProps,c=e.type===e.elementType?a:ls(e.type,a),i.props=c,d=e.pendingProps,f=i.context,l=n.contextType,typeof l=="object"&&l!==null?l=Go(l):(l=qr(n)?$c:hr.current,l=Od(e,l));var h=n.getDerivedStateFromProps;(u=typeof h=="function"||typeof i.getSnapshotBeforeUpdate=="function")||typeof i.UNSAFE_componentWillReceiveProps!="function"&&typeof i.componentWillReceiveProps!="function"||(a!==d||f!==l)&&bR(e,i,r,l),$a=!1,f=e.memoizedState,i.state=f,hx(e,r,i,o);var p=e.memoizedState;a!==d||f!==p||Kr.current||$a?(typeof h=="function"&&(O$(e,n,h,r),p=e.memoizedState),(c=$a||xR(e,n,c,r,f,p,l)||!1)?(u||typeof i.UNSAFE_componentWillUpdate!="function"&&typeof i.componentWillUpdate!="function"||(typeof i.componentWillUpdate=="function"&&i.componentWillUpdate(r,p,l),typeof i.UNSAFE_componentWillUpdate=="function"&&i.UNSAFE_componentWillUpdate(r,p,l)),typeof i.componentDidUpdate=="function"&&(e.flags|=4),typeof i.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof i.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof i.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=p),i.props=r,i.state=p,i.context=l,r=c):(typeof i.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof i.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),r=!1)}return D$(t,e,n,r,s,o)}function D$(t,e,n,r,o,s){vz(t,e);var i=(e.flags&128)!==0;if(!r&&!i)return o&&dR(e,n,!1),Ki(t,e,s);r=e.stateNode,mJ.current=e;var a=i&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&i?(e.child=Rd(e,t.child,null,s),e.child=Rd(e,null,a,s)):xr(t,e,a,s),e.memoizedState=r.state,o&&dR(e,n,!0),e.child}function xz(t){var e=t.stateNode;e.pendingContext?uR(t,e.pendingContext,e.pendingContext!==e.context):e.context&&uR(t,e.context,!1),yE(t,e.containerInfo)}function IR(t,e,n,r,o){return Pd(),dE(o),e.flags|=256,xr(t,e,n,r),e.child}var M$={dehydrated:null,treeContext:null,retryLane:0};function F$(t){return{baseLanes:t,cachePool:null,transitions:null}}function bz(t,e,n){var r=e.pendingProps,o=Ut.current,s=!1,i=(e.flags&128)!==0,a;if((a=i)||(a=t!==null&&t.memoizedState===null?!1:(o&2)!==0),a?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(o|=1),It(Ut,o&1),t===null)return N$(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(i=r.children,t=r.fallback,s?(r=e.mode,s=e.child,i={mode:"hidden",children:i},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=i):s=S0(i,r,0,null),t=yc(t,r,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=F$(n),e.memoizedState=M$,t):kE(e,i));if(o=t.memoizedState,o!==null&&(a=o.dehydrated,a!==null))return gJ(t,e,i,r,a,o,n);if(s){s=r.fallback,i=e.mode,o=t.child,a=o.sibling;var l={mode:"hidden",children:r.children};return!(i&1)&&e.child!==o?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=Za(o,l),r.subtreeFlags=o.subtreeFlags&14680064),a!==null?s=Za(a,s):(s=yc(s,i,n,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,i=t.child.memoizedState,i=i===null?F$(n):{baseLanes:i.baseLanes|n,cachePool:null,transitions:i.transitions},s.memoizedState=i,s.childLanes=t.childLanes&~n,e.memoizedState=M$,r}return s=t.child,t=s.sibling,r=Za(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function kE(t,e){return e=S0({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Hy(t,e,n,r){return r!==null&&dE(r),Rd(e,t.child,null,n),t=kE(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function gJ(t,e,n,r,o,s,i){if(n)return e.flags&256?(e.flags&=-257,r=BS(Error(he(422))),Hy(t,e,i,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=r.fallback,o=e.mode,r=S0({mode:"visible",children:r.children},o,0,null),s=yc(s,o,i,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&Rd(e,t.child,null,i),e.child.memoizedState=F$(i),e.memoizedState=M$,s);if(!(e.mode&1))return Hy(t,e,i,null);if(o.data==="$!"){if(r=o.nextSibling&&o.nextSibling.dataset,r)var a=r.dgst;return r=a,s=Error(he(419)),r=BS(s,r,void 0),Hy(t,e,i,r)}if(a=(i&t.childLanes)!==0,Vr||a){if(r=Dn,r!==null){switch(i&-i){case 4:o=2;break;case 16:o=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:o=32;break;case 536870912:o=268435456;break;default:o=0}o=o&(r.suspendedLanes|i)?0:o,o!==0&&o!==s.retryLane&&(s.retryLane=o,Hi(t,o),$s(r,t,o,-1))}return OE(),r=BS(Error(he(421))),Hy(t,e,i,r)}return o.data==="$?"?(e.flags|=128,e.child=t.child,e=NJ.bind(null,t),o._reactRetry=e,null):(t=s.treeContext,co=qa(o.nextSibling),fo=e,jt=!0,hs=null,t!==null&&(Oo[Po++]=Ai,Oo[Po++]=Oi,Oo[Po++]=kc,Ai=t.id,Oi=t.overflow,kc=e),e=kE(e,r.children),e.flags|=4096,e)}function ER(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),A$(t.return,e,n)}function zS(t,e,n,r,o){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:o}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=o)}function wz(t,e,n){var r=e.pendingProps,o=r.revealOrder,s=r.tail;if(xr(t,e,r.children,n),r=Ut.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&ER(t,n,e);else if(t.tag===19)ER(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(It(Ut,r),!(e.mode&1))e.memoizedState=null;else switch(o){case"forwards":for(n=e.child,o=null;n!==null;)t=n.alternate,t!==null&&px(t)===null&&(o=n),n=n.sibling;n=o,n===null?(o=e.child,e.child=null):(o=n.sibling,n.sibling=null),zS(e,!1,o,n,s);break;case"backwards":for(n=null,o=e.child,e.child=null;o!==null;){if(t=o.alternate,t!==null&&px(t)===null){e.child=o;break}t=o.sibling,o.sibling=n,n=o,o=t}zS(e,!0,n,null,s);break;case"together":zS(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Bv(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Ki(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Ic|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(he(153));if(e.child!==null){for(t=e.child,n=Za(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Za(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function yJ(t,e,n){switch(e.tag){case 3:xz(e),Pd();break;case 5:KB(e);break;case 1:qr(e.type)&&lx(e);break;case 4:yE(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,o=e.memoizedProps.value;It(dx,r._currentValue),r._currentValue=o;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(It(Ut,Ut.current&1),e.flags|=128,null):n&e.child.childLanes?bz(t,e,n):(It(Ut,Ut.current&1),t=Ki(t,e,n),t!==null?t.sibling:null);It(Ut,Ut.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return wz(t,e,n);e.flags|=128}if(o=e.memoizedState,o!==null&&(o.rendering=null,o.tail=null,o.lastEffect=null),It(Ut,Ut.current),r)break;return null;case 22:case 23:return e.lanes=0,yz(t,e,n)}return Ki(t,e,n)}var Sz,L$,Cz,$z;Sz=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};L$=function(){};Cz=function(t,e,n,r){var o=t.memoizedProps;if(o!==r){t=e.stateNode,ec(ri.current);var s=null;switch(n){case"input":o=i$(t,o),r=i$(t,r),s=[];break;case"select":o=Kt({},o,{value:void 0}),r=Kt({},r,{value:void 0}),s=[];break;case"textarea":o=c$(t,o),r=c$(t,r),s=[];break;default:typeof o.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=ix)}d$(n,r);var i;n=null;for(c in o)if(!r.hasOwnProperty(c)&&o.hasOwnProperty(c)&&o[c]!=null)if(c==="style"){var a=o[c];for(i in a)a.hasOwnProperty(i)&&(n||(n={}),n[i]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(mp.hasOwnProperty(c)?s||(s=[]):(s=s||[]).push(c,null));for(c in r){var l=r[c];if(a=o!=null?o[c]:void 0,r.hasOwnProperty(c)&&l!==a&&(l!=null||a!=null))if(c==="style")if(a){for(i in a)!a.hasOwnProperty(i)||l&&l.hasOwnProperty(i)||(n||(n={}),n[i]="");for(i in l)l.hasOwnProperty(i)&&a[i]!==l[i]&&(n||(n={}),n[i]=l[i])}else n||(s||(s=[]),s.push(c,n)),n=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(s=s||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(mp.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&Pt("scroll",t),s||a===l||(s=[])):(s=s||[]).push(c,l))}n&&(s=s||[]).push("style",n);var c=s;(e.updateQueue=c)&&(e.flags|=4)}};$z=function(t,e,n,r){n!==r&&(e.flags|=4)};function mh(t,e){if(!jt)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function nr(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var o=t.child;o!==null;)n|=o.lanes|o.childLanes,r|=o.subtreeFlags&14680064,r|=o.flags&14680064,o.return=t,o=o.sibling;else for(o=t.child;o!==null;)n|=o.lanes|o.childLanes,r|=o.subtreeFlags,r|=o.flags,o.return=t,o=o.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function vJ(t,e,n){var r=e.pendingProps;switch(uE(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return nr(e),null;case 1:return qr(e.type)&&ax(),nr(e),null;case 3:return r=e.stateNode,_d(),Dt(Kr),Dt(hr),xE(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Uy(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,hs!==null&&(H$(hs),hs=null))),L$(t,e),nr(e),null;case 5:vE(e);var o=ec(Ip.current);if(n=e.type,t!==null&&e.stateNode!=null)Cz(t,e,n,r,o),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(he(166));return nr(e),null}if(t=ec(ri.current),Uy(e)){r=e.stateNode,n=e.type;var s=e.memoizedProps;switch(r[Qs]=e,r[kp]=s,t=(e.mode&1)!==0,n){case"dialog":Pt("cancel",r),Pt("close",r);break;case"iframe":case"object":case"embed":Pt("load",r);break;case"video":case"audio":for(o=0;o<Bh.length;o++)Pt(Bh[o],r);break;case"source":Pt("error",r);break;case"img":case"image":case"link":Pt("error",r),Pt("load",r);break;case"details":Pt("toggle",r);break;case"input":FP(r,s),Pt("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},Pt("invalid",r);break;case"textarea":jP(r,s),Pt("invalid",r)}d$(n,s),o=null;for(var i in s)if(s.hasOwnProperty(i)){var a=s[i];i==="children"?typeof a=="string"?r.textContent!==a&&(s.suppressHydrationWarning!==!0&&Vy(r.textContent,a,t),o=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&Vy(r.textContent,a,t),o=["children",""+a]):mp.hasOwnProperty(i)&&a!=null&&i==="onScroll"&&Pt("scroll",r)}switch(n){case"input":Dy(r),LP(r,s,!0);break;case"textarea":Dy(r),BP(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=ix)}r=o,e.updateQueue=r,r!==null&&(e.flags|=4)}else{i=o.nodeType===9?o:o.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=Z3(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=i.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=i.createElement(n,{is:r.is}):(t=i.createElement(n),n==="select"&&(i=t,r.multiple?i.multiple=!0:r.size&&(i.size=r.size))):t=i.createElementNS(t,n),t[Qs]=e,t[kp]=r,Sz(t,e,!1,!1),e.stateNode=t;e:{switch(i=f$(n,r),n){case"dialog":Pt("cancel",t),Pt("close",t),o=r;break;case"iframe":case"object":case"embed":Pt("load",t),o=r;break;case"video":case"audio":for(o=0;o<Bh.length;o++)Pt(Bh[o],t);o=r;break;case"source":Pt("error",t),o=r;break;case"img":case"image":case"link":Pt("error",t),Pt("load",t),o=r;break;case"details":Pt("toggle",t),o=r;break;case"input":FP(t,r),o=i$(t,r),Pt("invalid",t);break;case"option":o=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},o=Kt({},r,{value:void 0}),Pt("invalid",t);break;case"textarea":jP(t,r),o=c$(t,r),Pt("invalid",t);break;default:o=r}d$(n,o),a=o;for(s in a)if(a.hasOwnProperty(s)){var l=a[s];s==="style"?tB(t,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&J3(t,l)):s==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&gp(t,l):typeof l=="number"&&gp(t,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(mp.hasOwnProperty(s)?l!=null&&s==="onScroll"&&Pt("scroll",t):l!=null&&XI(t,s,l,i))}switch(n){case"input":Dy(t),LP(t,r,!1);break;case"textarea":Dy(t),BP(t);break;case"option":r.value!=null&&t.setAttribute("value",""+il(r.value));break;case"select":t.multiple=!!r.multiple,s=r.value,s!=null?Qu(t,!!r.multiple,s,!1):r.defaultValue!=null&&Qu(t,!!r.multiple,r.defaultValue,!0);break;default:typeof o.onClick=="function"&&(t.onclick=ix)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return nr(e),null;case 6:if(t&&e.stateNode!=null)$z(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(he(166));if(n=ec(Ip.current),ec(ri.current),Uy(e)){if(r=e.stateNode,n=e.memoizedProps,r[Qs]=e,(s=r.nodeValue!==n)&&(t=fo,t!==null))switch(t.tag){case 3:Vy(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Vy(r.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Qs]=e,e.stateNode=r}return nr(e),null;case 13:if(Dt(Ut),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(jt&&co!==null&&e.mode&1&&!(e.flags&128))WB(),Pd(),e.flags|=98560,s=!1;else if(s=Uy(e),r!==null&&r.dehydrated!==null){if(t===null){if(!s)throw Error(he(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(he(317));s[Qs]=e}else Pd(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;nr(e),s=!1}else hs!==null&&(H$(hs),hs=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Ut.current&1?Tn===0&&(Tn=3):OE())),e.updateQueue!==null&&(e.flags|=4),nr(e),null);case 4:return _d(),L$(t,e),t===null&&Cp(e.stateNode.containerInfo),nr(e),null;case 10:return pE(e.type._context),nr(e),null;case 17:return qr(e.type)&&ax(),nr(e),null;case 19:if(Dt(Ut),s=e.memoizedState,s===null)return nr(e),null;if(r=(e.flags&128)!==0,i=s.rendering,i===null)if(r)mh(s,!1);else{if(Tn!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(i=px(t),i!==null){for(e.flags|=128,mh(s,!1),r=i.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)s=n,t=r,s.flags&=14680066,i=s.alternate,i===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=i.childLanes,s.lanes=i.lanes,s.child=i.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=i.memoizedProps,s.memoizedState=i.memoizedState,s.updateQueue=i.updateQueue,s.type=i.type,t=i.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return It(Ut,Ut.current&1|2),e.child}t=t.sibling}s.tail!==null&&ln()>Md&&(e.flags|=128,r=!0,mh(s,!1),e.lanes=4194304)}else{if(!r)if(t=px(i),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),mh(s,!0),s.tail===null&&s.tailMode==="hidden"&&!i.alternate&&!jt)return nr(e),null}else 2*ln()-s.renderingStartTime>Md&&n!==1073741824&&(e.flags|=128,r=!0,mh(s,!1),e.lanes=4194304);s.isBackwards?(i.sibling=e.child,e.child=i):(n=s.last,n!==null?n.sibling=i:e.child=i,s.last=i)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=ln(),e.sibling=null,n=Ut.current,It(Ut,r?n&1|2:n&1),e):(nr(e),null);case 22:case 23:return AE(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?oo&1073741824&&(nr(e),e.subtreeFlags&6&&(e.flags|=8192)):nr(e),null;case 24:return null;case 25:return null}throw Error(he(156,e.tag))}function xJ(t,e){switch(uE(e),e.tag){case 1:return qr(e.type)&&ax(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return _d(),Dt(Kr),Dt(hr),xE(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return vE(e),null;case 13:if(Dt(Ut),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(he(340));Pd()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Dt(Ut),null;case 4:return _d(),null;case 10:return pE(e.type._context),null;case 22:case 23:return AE(),null;case 24:return null;default:return null}}var Ky=!1,ar=!1,bJ=typeof WeakSet=="function"?WeakSet:Set,we=null;function Gu(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Xt(t,e,r)}else n.current=null}function j$(t,e,n){try{n()}catch(r){Xt(t,e,r)}}var NR=!1;function wJ(t,e){if(S$=rx,t=NB(),lE(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var o=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var i=0,a=-1,l=-1,c=0,u=0,d=t,f=null;t:for(;;){for(var h;d!==n||o!==0&&d.nodeType!==3||(a=i+o),d!==s||r!==0&&d.nodeType!==3||(l=i+r),d.nodeType===3&&(i+=d.nodeValue.length),(h=d.firstChild)!==null;)f=d,d=h;for(;;){if(d===t)break t;if(f===n&&++c===o&&(a=i),f===s&&++u===r&&(l=i),(h=d.nextSibling)!==null)break;d=f,f=d.parentNode}d=h}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(C$={focusedElem:t,selectionRange:n},rx=!1,we=e;we!==null;)if(e=we,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,we=t;else for(;we!==null;){e=we;try{var p=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(p!==null){var m=p.memoizedProps,g=p.memoizedState,y=e.stateNode,v=y.getSnapshotBeforeUpdate(e.elementType===e.type?m:ls(e.type,m),g);y.__reactInternalSnapshotBeforeUpdate=v}break;case 3:var x=e.stateNode.containerInfo;x.nodeType===1?x.textContent="":x.nodeType===9&&x.documentElement&&x.removeChild(x.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(he(163))}}catch(b){Xt(e,e.return,b)}if(t=e.sibling,t!==null){t.return=e.return,we=t;break}we=e.return}return p=NR,NR=!1,p}function op(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var o=r=r.next;do{if((o.tag&t)===t){var s=o.destroy;o.destroy=void 0,s!==void 0&&j$(e,n,s)}o=o.next}while(o!==r)}}function b0(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function B$(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function kz(t){var e=t.alternate;e!==null&&(t.alternate=null,kz(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Qs],delete e[kp],delete e[T$],delete e[rJ],delete e[oJ])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function Tz(t){return t.tag===5||t.tag===3||t.tag===4}function AR(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Tz(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function z$(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=ix));else if(r!==4&&(t=t.child,t!==null))for(z$(t,e,n),t=t.sibling;t!==null;)z$(t,e,n),t=t.sibling}function W$(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(W$(t,e,n),t=t.sibling;t!==null;)W$(t,e,n),t=t.sibling}var Wn=null,us=!1;function ga(t,e,n){for(n=n.child;n!==null;)Iz(t,e,n),n=n.sibling}function Iz(t,e,n){if(ni&&typeof ni.onCommitFiberUnmount=="function")try{ni.onCommitFiberUnmount(f0,n)}catch{}switch(n.tag){case 5:ar||Gu(n,e);case 6:var r=Wn,o=us;Wn=null,ga(t,e,n),Wn=r,us=o,Wn!==null&&(us?(t=Wn,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Wn.removeChild(n.stateNode));break;case 18:Wn!==null&&(us?(t=Wn,n=n.stateNode,t.nodeType===8?_S(t.parentNode,n):t.nodeType===1&&_S(t,n),bp(t)):_S(Wn,n.stateNode));break;case 4:r=Wn,o=us,Wn=n.stateNode.containerInfo,us=!0,ga(t,e,n),Wn=r,us=o;break;case 0:case 11:case 14:case 15:if(!ar&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){o=r=r.next;do{var s=o,i=s.destroy;s=s.tag,i!==void 0&&(s&2||s&4)&&j$(n,e,i),o=o.next}while(o!==r)}ga(t,e,n);break;case 1:if(!ar&&(Gu(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){Xt(n,e,a)}ga(t,e,n);break;case 21:ga(t,e,n);break;case 22:n.mode&1?(ar=(r=ar)||n.memoizedState!==null,ga(t,e,n),ar=r):ga(t,e,n);break;default:ga(t,e,n)}}function OR(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new bJ),e.forEach(function(r){var o=AJ.bind(null,t,r);n.has(r)||(n.add(r),r.then(o,o))})}}function rs(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var o=n[r];try{var s=t,i=e,a=i;e:for(;a!==null;){switch(a.tag){case 5:Wn=a.stateNode,us=!1;break e;case 3:Wn=a.stateNode.containerInfo,us=!0;break e;case 4:Wn=a.stateNode.containerInfo,us=!0;break e}a=a.return}if(Wn===null)throw Error(he(160));Iz(s,i,o),Wn=null,us=!1;var l=o.alternate;l!==null&&(l.return=null),o.return=null}catch(c){Xt(o,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)Ez(e,t),e=e.sibling}function Ez(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(rs(e,t),Bs(t),r&4){try{op(3,t,t.return),b0(3,t)}catch(m){Xt(t,t.return,m)}try{op(5,t,t.return)}catch(m){Xt(t,t.return,m)}}break;case 1:rs(e,t),Bs(t),r&512&&n!==null&&Gu(n,n.return);break;case 5:if(rs(e,t),Bs(t),r&512&&n!==null&&Gu(n,n.return),t.flags&32){var o=t.stateNode;try{gp(o,"")}catch(m){Xt(t,t.return,m)}}if(r&4&&(o=t.stateNode,o!=null)){var s=t.memoizedProps,i=n!==null?n.memoizedProps:s,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&Y3(o,s),f$(a,i);var c=f$(a,s);for(i=0;i<l.length;i+=2){var u=l[i],d=l[i+1];u==="style"?tB(o,d):u==="dangerouslySetInnerHTML"?J3(o,d):u==="children"?gp(o,d):XI(o,u,d,c)}switch(a){case"input":a$(o,s);break;case"textarea":Q3(o,s);break;case"select":var f=o._wrapperState.wasMultiple;o._wrapperState.wasMultiple=!!s.multiple;var h=s.value;h!=null?Qu(o,!!s.multiple,h,!1):f!==!!s.multiple&&(s.defaultValue!=null?Qu(o,!!s.multiple,s.defaultValue,!0):Qu(o,!!s.multiple,s.multiple?[]:"",!1))}o[kp]=s}catch(m){Xt(t,t.return,m)}}break;case 6:if(rs(e,t),Bs(t),r&4){if(t.stateNode===null)throw Error(he(162));o=t.stateNode,s=t.memoizedProps;try{o.nodeValue=s}catch(m){Xt(t,t.return,m)}}break;case 3:if(rs(e,t),Bs(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{bp(e.containerInfo)}catch(m){Xt(t,t.return,m)}break;case 4:rs(e,t),Bs(t);break;case 13:rs(e,t),Bs(t),o=t.child,o.flags&8192&&(s=o.memoizedState!==null,o.stateNode.isHidden=s,!s||o.alternate!==null&&o.alternate.memoizedState!==null||(EE=ln())),r&4&&OR(t);break;case 22:if(u=n!==null&&n.memoizedState!==null,t.mode&1?(ar=(c=ar)||u,rs(e,t),ar=c):rs(e,t),Bs(t),r&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!u&&t.mode&1)for(we=t,u=t.child;u!==null;){for(d=we=u;we!==null;){switch(f=we,h=f.child,f.tag){case 0:case 11:case 14:case 15:op(4,f,f.return);break;case 1:Gu(f,f.return);var p=f.stateNode;if(typeof p.componentWillUnmount=="function"){r=f,n=f.return;try{e=r,p.props=e.memoizedProps,p.state=e.memoizedState,p.componentWillUnmount()}catch(m){Xt(r,n,m)}}break;case 5:Gu(f,f.return);break;case 22:if(f.memoizedState!==null){RR(d);continue}}h!==null?(h.return=f,we=h):RR(d)}u=u.sibling}e:for(u=null,d=t;;){if(d.tag===5){if(u===null){u=d;try{o=d.stateNode,c?(s=o.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=d.stateNode,l=d.memoizedProps.style,i=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=eB("display",i))}catch(m){Xt(t,t.return,m)}}}else if(d.tag===6){if(u===null)try{d.stateNode.nodeValue=c?"":d.memoizedProps}catch(m){Xt(t,t.return,m)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===t)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===t)break e;for(;d.sibling===null;){if(d.return===null||d.return===t)break e;u===d&&(u=null),d=d.return}u===d&&(u=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:rs(e,t),Bs(t),r&4&&OR(t);break;case 21:break;default:rs(e,t),Bs(t)}}function Bs(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(Tz(n)){var r=n;break e}n=n.return}throw Error(he(160))}switch(r.tag){case 5:var o=r.stateNode;r.flags&32&&(gp(o,""),r.flags&=-33);var s=AR(t);W$(t,s,o);break;case 3:case 4:var i=r.stateNode.containerInfo,a=AR(t);z$(t,a,i);break;default:throw Error(he(161))}}catch(l){Xt(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function SJ(t,e,n){we=t,Nz(t)}function Nz(t,e,n){for(var r=(t.mode&1)!==0;we!==null;){var o=we,s=o.child;if(o.tag===22&&r){var i=o.memoizedState!==null||Ky;if(!i){var a=o.alternate,l=a!==null&&a.memoizedState!==null||ar;a=Ky;var c=ar;if(Ky=i,(ar=l)&&!c)for(we=o;we!==null;)i=we,l=i.child,i.tag===22&&i.memoizedState!==null?_R(o):l!==null?(l.return=i,we=l):_R(o);for(;s!==null;)we=s,Nz(s),s=s.sibling;we=o,Ky=a,ar=c}PR(t)}else o.subtreeFlags&8772&&s!==null?(s.return=o,we=s):PR(t)}}function PR(t){for(;we!==null;){var e=we;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:ar||b0(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!ar)if(n===null)r.componentDidMount();else{var o=e.elementType===e.type?n.memoizedProps:ls(e.type,n.memoizedProps);r.componentDidUpdate(o,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&gR(e,s,r);break;case 3:var i=e.updateQueue;if(i!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}gR(e,i,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var u=c.memoizedState;if(u!==null){var d=u.dehydrated;d!==null&&bp(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(he(163))}ar||e.flags&512&&B$(e)}catch(f){Xt(e,e.return,f)}}if(e===t){we=null;break}if(n=e.sibling,n!==null){n.return=e.return,we=n;break}we=e.return}}function RR(t){for(;we!==null;){var e=we;if(e===t){we=null;break}var n=e.sibling;if(n!==null){n.return=e.return,we=n;break}we=e.return}}function _R(t){for(;we!==null;){var e=we;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{b0(4,e)}catch(l){Xt(e,n,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var o=e.return;try{r.componentDidMount()}catch(l){Xt(e,o,l)}}var s=e.return;try{B$(e)}catch(l){Xt(e,s,l)}break;case 5:var i=e.return;try{B$(e)}catch(l){Xt(e,i,l)}}}catch(l){Xt(e,e.return,l)}if(e===t){we=null;break}var a=e.sibling;if(a!==null){a.return=e.return,we=a;break}we=e.return}}var CJ=Math.ceil,yx=sa.ReactCurrentDispatcher,TE=sa.ReactCurrentOwner,Wo=sa.ReactCurrentBatchConfig,at=0,Dn=null,hn=null,Gn=0,oo=0,Hu=xl(0),Tn=0,Op=null,Ic=0,w0=0,IE=0,sp=null,zr=null,EE=0,Md=1/0,Ti=null,vx=!1,V$=null,Ya=null,qy=!1,ja=null,xx=0,ip=0,U$=null,zv=-1,Wv=0;function Er(){return at&6?ln():zv!==-1?zv:zv=ln()}function Qa(t){return t.mode&1?at&2&&Gn!==0?Gn&-Gn:iJ.transition!==null?(Wv===0&&(Wv=hB()),Wv):(t=yt,t!==0||(t=window.event,t=t===void 0?16:bB(t.type)),t):1}function $s(t,e,n,r){if(50<ip)throw ip=0,U$=null,Error(he(185));Vm(t,n,r),(!(at&2)||t!==Dn)&&(t===Dn&&(!(at&2)&&(w0|=n),Tn===4&&Ea(t,Gn)),Xr(t,r),n===1&&at===0&&!(e.mode&1)&&(Md=ln()+500,y0&&bl()))}function Xr(t,e){var n=t.callbackNode;iZ(t,e);var r=nx(t,t===Dn?Gn:0);if(r===0)n!==null&&VP(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&VP(n),e===1)t.tag===0?sJ(DR.bind(null,t)):jB(DR.bind(null,t)),tJ(function(){!(at&6)&&bl()}),n=null;else{switch(pB(r)){case 1:n=eE;break;case 4:n=dB;break;case 16:n=tx;break;case 536870912:n=fB;break;default:n=tx}n=Fz(n,Az.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function Az(t,e){if(zv=-1,Wv=0,at&6)throw Error(he(327));var n=t.callbackNode;if(nd()&&t.callbackNode!==n)return null;var r=nx(t,t===Dn?Gn:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=bx(t,r);else{e=r;var o=at;at|=2;var s=Pz();(Dn!==t||Gn!==e)&&(Ti=null,Md=ln()+500,gc(t,e));do try{TJ();break}catch(a){Oz(t,a)}while(!0);hE(),yx.current=s,at=o,hn!==null?e=0:(Dn=null,Gn=0,e=Tn)}if(e!==0){if(e===2&&(o=y$(t),o!==0&&(r=o,e=G$(t,o))),e===1)throw n=Op,gc(t,0),Ea(t,r),Xr(t,ln()),n;if(e===6)Ea(t,r);else{if(o=t.current.alternate,!(r&30)&&!$J(o)&&(e=bx(t,r),e===2&&(s=y$(t),s!==0&&(r=s,e=G$(t,s))),e===1))throw n=Op,gc(t,0),Ea(t,r),Xr(t,ln()),n;switch(t.finishedWork=o,t.finishedLanes=r,e){case 0:case 1:throw Error(he(345));case 2:Vl(t,zr,Ti);break;case 3:if(Ea(t,r),(r&130023424)===r&&(e=EE+500-ln(),10<e)){if(nx(t,0)!==0)break;if(o=t.suspendedLanes,(o&r)!==r){Er(),t.pingedLanes|=t.suspendedLanes&o;break}t.timeoutHandle=k$(Vl.bind(null,t,zr,Ti),e);break}Vl(t,zr,Ti);break;case 4:if(Ea(t,r),(r&4194240)===r)break;for(e=t.eventTimes,o=-1;0<r;){var i=31-Cs(r);s=1<<i,i=e[i],i>o&&(o=i),r&=~s}if(r=o,r=ln()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*CJ(r/1960))-r,10<r){t.timeoutHandle=k$(Vl.bind(null,t,zr,Ti),r);break}Vl(t,zr,Ti);break;case 5:Vl(t,zr,Ti);break;default:throw Error(he(329))}}}return Xr(t,ln()),t.callbackNode===n?Az.bind(null,t):null}function G$(t,e){var n=sp;return t.current.memoizedState.isDehydrated&&(gc(t,e).flags|=256),t=bx(t,e),t!==2&&(e=zr,zr=n,e!==null&&H$(e)),t}function H$(t){zr===null?zr=t:zr.push.apply(zr,t)}function $J(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var o=n[r],s=o.getSnapshot;o=o.value;try{if(!Ns(s(),o))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Ea(t,e){for(e&=~IE,e&=~w0,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Cs(e),r=1<<n;t[n]=-1,e&=~r}}function DR(t){if(at&6)throw Error(he(327));nd();var e=nx(t,0);if(!(e&1))return Xr(t,ln()),null;var n=bx(t,e);if(t.tag!==0&&n===2){var r=y$(t);r!==0&&(e=r,n=G$(t,r))}if(n===1)throw n=Op,gc(t,0),Ea(t,e),Xr(t,ln()),n;if(n===6)throw Error(he(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Vl(t,zr,Ti),Xr(t,ln()),null}function NE(t,e){var n=at;at|=1;try{return t(e)}finally{at=n,at===0&&(Md=ln()+500,y0&&bl())}}function Ec(t){ja!==null&&ja.tag===0&&!(at&6)&&nd();var e=at;at|=1;var n=Wo.transition,r=yt;try{if(Wo.transition=null,yt=1,t)return t()}finally{yt=r,Wo.transition=n,at=e,!(at&6)&&bl()}}function AE(){oo=Hu.current,Dt(Hu)}function gc(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,eJ(n)),hn!==null)for(n=hn.return;n!==null;){var r=n;switch(uE(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&ax();break;case 3:_d(),Dt(Kr),Dt(hr),xE();break;case 5:vE(r);break;case 4:_d();break;case 13:Dt(Ut);break;case 19:Dt(Ut);break;case 10:pE(r.type._context);break;case 22:case 23:AE()}n=n.return}if(Dn=t,hn=t=Za(t.current,null),Gn=oo=e,Tn=0,Op=null,IE=w0=Ic=0,zr=sp=null,Jl!==null){for(e=0;e<Jl.length;e++)if(n=Jl[e],r=n.interleaved,r!==null){n.interleaved=null;var o=r.next,s=n.pending;if(s!==null){var i=s.next;s.next=o,r.next=i}n.pending=r}Jl=null}return t}function Oz(t,e){do{var n=hn;try{if(hE(),Lv.current=gx,mx){for(var r=Ht.memoizedState;r!==null;){var o=r.queue;o!==null&&(o.pending=null),r=r.next}mx=!1}if(Tc=0,Rn=Cn=Ht=null,rp=!1,Ep=0,TE.current=null,n===null||n.return===null){Tn=1,Op=e,hn=null;break}e:{var s=t,i=n.return,a=n,l=e;if(e=Gn,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,u=a,d=u.tag;if(!(u.mode&1)&&(d===0||d===11||d===15)){var f=u.alternate;f?(u.updateQueue=f.updateQueue,u.memoizedState=f.memoizedState,u.lanes=f.lanes):(u.updateQueue=null,u.memoizedState=null)}var h=SR(i);if(h!==null){h.flags&=-257,CR(h,i,a,s,e),h.mode&1&&wR(s,c,e),e=h,l=c;var p=e.updateQueue;if(p===null){var m=new Set;m.add(l),e.updateQueue=m}else p.add(l);break e}else{if(!(e&1)){wR(s,c,e),OE();break e}l=Error(he(426))}}else if(jt&&a.mode&1){var g=SR(i);if(g!==null){!(g.flags&65536)&&(g.flags|=256),CR(g,i,a,s,e),dE(Dd(l,a));break e}}s=l=Dd(l,a),Tn!==4&&(Tn=2),sp===null?sp=[s]:sp.push(s),s=i;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var y=pz(s,l,e);mR(s,y);break e;case 1:a=l;var v=s.type,x=s.stateNode;if(!(s.flags&128)&&(typeof v.getDerivedStateFromError=="function"||x!==null&&typeof x.componentDidCatch=="function"&&(Ya===null||!Ya.has(x)))){s.flags|=65536,e&=-e,s.lanes|=e;var b=mz(s,a,e);mR(s,b);break e}}s=s.return}while(s!==null)}_z(n)}catch(w){e=w,hn===n&&n!==null&&(hn=n=n.return);continue}break}while(!0)}function Pz(){var t=yx.current;return yx.current=gx,t===null?gx:t}function OE(){(Tn===0||Tn===3||Tn===2)&&(Tn=4),Dn===null||!(Ic&268435455)&&!(w0&268435455)||Ea(Dn,Gn)}function bx(t,e){var n=at;at|=2;var r=Pz();(Dn!==t||Gn!==e)&&(Ti=null,gc(t,e));do try{kJ();break}catch(o){Oz(t,o)}while(!0);if(hE(),at=n,yx.current=r,hn!==null)throw Error(he(261));return Dn=null,Gn=0,Tn}function kJ(){for(;hn!==null;)Rz(hn)}function TJ(){for(;hn!==null&&!QQ();)Rz(hn)}function Rz(t){var e=Mz(t.alternate,t,oo);t.memoizedProps=t.pendingProps,e===null?_z(t):hn=e,TE.current=null}function _z(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=xJ(n,e),n!==null){n.flags&=32767,hn=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Tn=6,hn=null;return}}else if(n=vJ(n,e,oo),n!==null){hn=n;return}if(e=e.sibling,e!==null){hn=e;return}hn=e=t}while(e!==null);Tn===0&&(Tn=5)}function Vl(t,e,n){var r=yt,o=Wo.transition;try{Wo.transition=null,yt=1,IJ(t,e,n,r)}finally{Wo.transition=o,yt=r}return null}function IJ(t,e,n,r){do nd();while(ja!==null);if(at&6)throw Error(he(327));n=t.finishedWork;var o=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(he(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(aZ(t,s),t===Dn&&(hn=Dn=null,Gn=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||qy||(qy=!0,Fz(tx,function(){return nd(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=Wo.transition,Wo.transition=null;var i=yt;yt=1;var a=at;at|=4,TE.current=null,wJ(t,n),Ez(n,t),KZ(C$),rx=!!S$,C$=S$=null,t.current=n,SJ(n),ZQ(),at=a,yt=i,Wo.transition=s}else t.current=n;if(qy&&(qy=!1,ja=t,xx=o),s=t.pendingLanes,s===0&&(Ya=null),tZ(n.stateNode),Xr(t,ln()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)o=e[n],r(o.value,{componentStack:o.stack,digest:o.digest});if(vx)throw vx=!1,t=V$,V$=null,t;return xx&1&&t.tag!==0&&nd(),s=t.pendingLanes,s&1?t===U$?ip++:(ip=0,U$=t):ip=0,bl(),null}function nd(){if(ja!==null){var t=pB(xx),e=Wo.transition,n=yt;try{if(Wo.transition=null,yt=16>t?16:t,ja===null)var r=!1;else{if(t=ja,ja=null,xx=0,at&6)throw Error(he(331));var o=at;for(at|=4,we=t.current;we!==null;){var s=we,i=s.child;if(we.flags&16){var a=s.deletions;if(a!==null){for(var l=0;l<a.length;l++){var c=a[l];for(we=c;we!==null;){var u=we;switch(u.tag){case 0:case 11:case 15:op(8,u,s)}var d=u.child;if(d!==null)d.return=u,we=d;else for(;we!==null;){u=we;var f=u.sibling,h=u.return;if(kz(u),u===c){we=null;break}if(f!==null){f.return=h,we=f;break}we=h}}}var p=s.alternate;if(p!==null){var m=p.child;if(m!==null){p.child=null;do{var g=m.sibling;m.sibling=null,m=g}while(m!==null)}}we=s}}if(s.subtreeFlags&2064&&i!==null)i.return=s,we=i;else e:for(;we!==null;){if(s=we,s.flags&2048)switch(s.tag){case 0:case 11:case 15:op(9,s,s.return)}var y=s.sibling;if(y!==null){y.return=s.return,we=y;break e}we=s.return}}var v=t.current;for(we=v;we!==null;){i=we;var x=i.child;if(i.subtreeFlags&2064&&x!==null)x.return=i,we=x;else e:for(i=v;we!==null;){if(a=we,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:b0(9,a)}}catch(w){Xt(a,a.return,w)}if(a===i){we=null;break e}var b=a.sibling;if(b!==null){b.return=a.return,we=b;break e}we=a.return}}if(at=o,bl(),ni&&typeof ni.onPostCommitFiberRoot=="function")try{ni.onPostCommitFiberRoot(f0,t)}catch{}r=!0}return r}finally{yt=n,Wo.transition=e}}return!1}function MR(t,e,n){e=Dd(n,e),e=pz(t,e,1),t=Xa(t,e,1),e=Er(),t!==null&&(Vm(t,1,e),Xr(t,e))}function Xt(t,e,n){if(t.tag===3)MR(t,t,n);else for(;e!==null;){if(e.tag===3){MR(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Ya===null||!Ya.has(r))){t=Dd(n,t),t=mz(e,t,1),e=Xa(e,t,1),t=Er(),e!==null&&(Vm(e,1,t),Xr(e,t));break}}e=e.return}}function EJ(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Er(),t.pingedLanes|=t.suspendedLanes&n,Dn===t&&(Gn&n)===n&&(Tn===4||Tn===3&&(Gn&130023424)===Gn&&500>ln()-EE?gc(t,0):IE|=n),Xr(t,e)}function Dz(t,e){e===0&&(t.mode&1?(e=Ly,Ly<<=1,!(Ly&130023424)&&(Ly=4194304)):e=1);var n=Er();t=Hi(t,e),t!==null&&(Vm(t,e,n),Xr(t,n))}function NJ(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),Dz(t,n)}function AJ(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,o=t.memoizedState;o!==null&&(n=o.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(he(314))}r!==null&&r.delete(e),Dz(t,n)}var Mz;Mz=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Kr.current)Vr=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Vr=!1,yJ(t,e,n);Vr=!!(t.flags&131072)}else Vr=!1,jt&&e.flags&1048576&&BB(e,ux,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Bv(t,e),t=e.pendingProps;var o=Od(e,hr.current);td(e,n),o=wE(null,e,r,t,o,n);var s=SE();return e.flags|=1,typeof o=="object"&&o!==null&&typeof o.render=="function"&&o.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,qr(r)?(s=!0,lx(e)):s=!1,e.memoizedState=o.state!==null&&o.state!==void 0?o.state:null,gE(e),o.updater=x0,e.stateNode=o,o._reactInternals=e,P$(e,r,t,n),e=D$(null,e,r,!0,s,n)):(e.tag=0,jt&&s&&cE(e),xr(null,e,o,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Bv(t,e),t=e.pendingProps,o=r._init,r=o(r._payload),e.type=r,o=e.tag=PJ(r),t=ls(r,t),o){case 0:e=_$(null,e,r,t,n);break e;case 1:e=TR(null,e,r,t,n);break e;case 11:e=$R(null,e,r,t,n);break e;case 14:e=kR(null,e,r,ls(r.type,t),n);break e}throw Error(he(306,r,""))}return e;case 0:return r=e.type,o=e.pendingProps,o=e.elementType===r?o:ls(r,o),_$(t,e,r,o,n);case 1:return r=e.type,o=e.pendingProps,o=e.elementType===r?o:ls(r,o),TR(t,e,r,o,n);case 3:e:{if(xz(e),t===null)throw Error(he(387));r=e.pendingProps,s=e.memoizedState,o=s.element,HB(t,e),hx(e,r,null,n);var i=e.memoizedState;if(r=i.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:i.cache,pendingSuspenseBoundaries:i.pendingSuspenseBoundaries,transitions:i.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){o=Dd(Error(he(423)),e),e=IR(t,e,r,n,o);break e}else if(r!==o){o=Dd(Error(he(424)),e),e=IR(t,e,r,n,o);break e}else for(co=qa(e.stateNode.containerInfo.firstChild),fo=e,jt=!0,hs=null,n=UB(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Pd(),r===o){e=Ki(t,e,n);break e}xr(t,e,r,n)}e=e.child}return e;case 5:return KB(e),t===null&&N$(e),r=e.type,o=e.pendingProps,s=t!==null?t.memoizedProps:null,i=o.children,$$(r,o)?i=null:s!==null&&$$(r,s)&&(e.flags|=32),vz(t,e),xr(t,e,i,n),e.child;case 6:return t===null&&N$(e),null;case 13:return bz(t,e,n);case 4:return yE(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Rd(e,null,r,n):xr(t,e,r,n),e.child;case 11:return r=e.type,o=e.pendingProps,o=e.elementType===r?o:ls(r,o),$R(t,e,r,o,n);case 7:return xr(t,e,e.pendingProps,n),e.child;case 8:return xr(t,e,e.pendingProps.children,n),e.child;case 12:return xr(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,o=e.pendingProps,s=e.memoizedProps,i=o.value,It(dx,r._currentValue),r._currentValue=i,s!==null)if(Ns(s.value,i)){if(s.children===o.children&&!Kr.current){e=Ki(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){i=s.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(s.tag===1){l=Mi(-1,n&-n),l.tag=2;var c=s.updateQueue;if(c!==null){c=c.shared;var u=c.pending;u===null?l.next=l:(l.next=u.next,u.next=l),c.pending=l}}s.lanes|=n,l=s.alternate,l!==null&&(l.lanes|=n),A$(s.return,n,e),a.lanes|=n;break}l=l.next}}else if(s.tag===10)i=s.type===e.type?null:s.child;else if(s.tag===18){if(i=s.return,i===null)throw Error(he(341));i.lanes|=n,a=i.alternate,a!==null&&(a.lanes|=n),A$(i,n,e),i=s.sibling}else i=s.child;if(i!==null)i.return=s;else for(i=s;i!==null;){if(i===e){i=null;break}if(s=i.sibling,s!==null){s.return=i.return,i=s;break}i=i.return}s=i}xr(t,e,o.children,n),e=e.child}return e;case 9:return o=e.type,r=e.pendingProps.children,td(e,n),o=Go(o),r=r(o),e.flags|=1,xr(t,e,r,n),e.child;case 14:return r=e.type,o=ls(r,e.pendingProps),o=ls(r.type,o),kR(t,e,r,o,n);case 15:return gz(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,o=e.pendingProps,o=e.elementType===r?o:ls(r,o),Bv(t,e),e.tag=1,qr(r)?(t=!0,lx(e)):t=!1,td(e,n),hz(e,r,o),P$(e,r,o,n),D$(null,e,r,!0,t,n);case 19:return wz(t,e,n);case 22:return yz(t,e,n)}throw Error(he(156,e.tag))};function Fz(t,e){return uB(t,e)}function OJ(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Do(t,e,n,r){return new OJ(t,e,n,r)}function PE(t){return t=t.prototype,!(!t||!t.isReactComponent)}function PJ(t){if(typeof t=="function")return PE(t)?1:0;if(t!=null){if(t=t.$$typeof,t===QI)return 11;if(t===ZI)return 14}return 2}function Za(t,e){var n=t.alternate;return n===null?(n=Do(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Vv(t,e,n,r,o,s){var i=2;if(r=t,typeof t=="function")PE(t)&&(i=1);else if(typeof t=="string")i=5;else e:switch(t){case Mu:return yc(n.children,o,s,e);case YI:i=8,o|=8;break;case n$:return t=Do(12,n,e,o|2),t.elementType=n$,t.lanes=s,t;case r$:return t=Do(13,n,e,o),t.elementType=r$,t.lanes=s,t;case o$:return t=Do(19,n,e,o),t.elementType=o$,t.lanes=s,t;case K3:return S0(n,o,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case G3:i=10;break e;case H3:i=9;break e;case QI:i=11;break e;case ZI:i=14;break e;case Ca:i=16,r=null;break e}throw Error(he(130,t==null?t:typeof t,""))}return e=Do(i,n,e,o),e.elementType=t,e.type=r,e.lanes=s,e}function yc(t,e,n,r){return t=Do(7,t,r,e),t.lanes=n,t}function S0(t,e,n,r){return t=Do(22,t,r,e),t.elementType=K3,t.lanes=n,t.stateNode={isHidden:!1},t}function WS(t,e,n){return t=Do(6,t,null,e),t.lanes=n,t}function VS(t,e,n){return e=Do(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function RJ(t,e,n,r,o){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=CS(0),this.expirationTimes=CS(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=CS(0),this.identifierPrefix=r,this.onRecoverableError=o,this.mutableSourceEagerHydrationData=null}function RE(t,e,n,r,o,s,i,a,l){return t=new RJ(t,e,n,a,l),e===1?(e=1,s===!0&&(e|=8)):e=0,s=Do(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},gE(s),t}function _J(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Du,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function Lz(t){if(!t)return al;t=t._reactInternals;e:{if(eu(t)!==t||t.tag!==1)throw Error(he(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(qr(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(he(171))}if(t.tag===1){var n=t.type;if(qr(n))return LB(t,n,e)}return e}function jz(t,e,n,r,o,s,i,a,l){return t=RE(n,r,!0,t,o,s,i,a,l),t.context=Lz(null),n=t.current,r=Er(),o=Qa(n),s=Mi(r,o),s.callback=e??null,Xa(n,s,o),t.current.lanes=o,Vm(t,o,r),Xr(t,r),t}function C0(t,e,n,r){var o=e.current,s=Er(),i=Qa(o);return n=Lz(n),e.context===null?e.context=n:e.pendingContext=n,e=Mi(s,i),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Xa(o,e,i),t!==null&&($s(t,o,i,s),Fv(t,o,i)),i}function wx(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function FR(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function _E(t,e){FR(t,e),(t=t.alternate)&&FR(t,e)}function DJ(){return null}var Bz=typeof reportError=="function"?reportError:function(t){console.error(t)};function DE(t){this._internalRoot=t}$0.prototype.render=DE.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(he(409));C0(t,e,null,null)};$0.prototype.unmount=DE.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Ec(function(){C0(null,t,null,null)}),e[Gi]=null}};function $0(t){this._internalRoot=t}$0.prototype.unstable_scheduleHydration=function(t){if(t){var e=yB();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Ia.length&&e!==0&&e<Ia[n].priority;n++);Ia.splice(n,0,t),n===0&&xB(t)}};function ME(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function k0(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function LR(){}function MJ(t,e,n,r,o){if(o){if(typeof r=="function"){var s=r;r=function(){var c=wx(i);s.call(c)}}var i=jz(e,r,t,0,null,!1,!1,"",LR);return t._reactRootContainer=i,t[Gi]=i.current,Cp(t.nodeType===8?t.parentNode:t),Ec(),i}for(;o=t.lastChild;)t.removeChild(o);if(typeof r=="function"){var a=r;r=function(){var c=wx(l);a.call(c)}}var l=RE(t,0,!1,null,null,!1,!1,"",LR);return t._reactRootContainer=l,t[Gi]=l.current,Cp(t.nodeType===8?t.parentNode:t),Ec(function(){C0(e,l,n,r)}),l}function T0(t,e,n,r,o){var s=n._reactRootContainer;if(s){var i=s;if(typeof o=="function"){var a=o;o=function(){var l=wx(i);a.call(l)}}C0(e,i,t,o)}else i=MJ(n,e,t,o,r);return wx(i)}mB=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=jh(e.pendingLanes);n!==0&&(tE(e,n|1),Xr(e,ln()),!(at&6)&&(Md=ln()+500,bl()))}break;case 13:Ec(function(){var r=Hi(t,1);if(r!==null){var o=Er();$s(r,t,1,o)}}),_E(t,1)}};nE=function(t){if(t.tag===13){var e=Hi(t,134217728);if(e!==null){var n=Er();$s(e,t,134217728,n)}_E(t,134217728)}};gB=function(t){if(t.tag===13){var e=Qa(t),n=Hi(t,e);if(n!==null){var r=Er();$s(n,t,e,r)}_E(t,e)}};yB=function(){return yt};vB=function(t,e){var n=yt;try{return yt=t,e()}finally{yt=n}};p$=function(t,e,n){switch(e){case"input":if(a$(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var o=g0(r);if(!o)throw Error(he(90));X3(r),a$(r,o)}}}break;case"textarea":Q3(t,n);break;case"select":e=n.value,e!=null&&Qu(t,!!n.multiple,e,!1)}};oB=NE;sB=Ec;var FJ={usingClientEntryPoint:!1,Events:[Gm,Bu,g0,nB,rB,NE]},gh={findFiberByHostInstance:Zl,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},LJ={bundleType:gh.bundleType,version:gh.version,rendererPackageName:gh.rendererPackageName,rendererConfig:gh.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:sa.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=lB(t),t===null?null:t.stateNode},findFiberByHostInstance:gh.findFiberByHostInstance||DJ,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Xy=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Xy.isDisabled&&Xy.supportsFiber)try{f0=Xy.inject(LJ),ni=Xy}catch{}}vo.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=FJ;vo.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!ME(e))throw Error(he(200));return _J(t,e,null,n)};vo.createRoot=function(t,e){if(!ME(t))throw Error(he(299));var n=!1,r="",o=Bz;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(o=e.onRecoverableError)),e=RE(t,1,!1,null,null,n,!1,r,o),t[Gi]=e.current,Cp(t.nodeType===8?t.parentNode:t),new DE(e)};vo.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(he(188)):(t=Object.keys(t).join(","),Error(he(268,t)));return t=lB(e),t=t===null?null:t.stateNode,t};vo.flushSync=function(t){return Ec(t)};vo.hydrate=function(t,e,n){if(!k0(e))throw Error(he(200));return T0(null,t,e,!0,n)};vo.hydrateRoot=function(t,e,n){if(!ME(t))throw Error(he(405));var r=n!=null&&n.hydratedSources||null,o=!1,s="",i=Bz;if(n!=null&&(n.unstable_strictMode===!0&&(o=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(i=n.onRecoverableError)),e=jz(e,null,t,1,n??null,o,!1,s,i),t[Gi]=e.current,Cp(t),r)for(t=0;t<r.length;t++)n=r[t],o=n._getVersion,o=o(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,o]:e.mutableSourceEagerHydrationData.push(n,o);return new $0(e)};vo.render=function(t,e,n){if(!k0(e))throw Error(he(200));return T0(null,t,e,!1,n)};vo.unmountComponentAtNode=function(t){if(!k0(t))throw Error(he(40));return t._reactRootContainer?(Ec(function(){T0(null,null,t,!1,function(){t._reactRootContainer=null,t[Gi]=null})}),!0):!1};vo.unstable_batchedUpdates=NE;vo.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!k0(n))throw Error(he(200));if(t==null||t._reactInternals===void 0)throw Error(he(38));return T0(t,e,n,!1,r)};vo.version="18.3.1-next-f1338f8080-20240426";function zz(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(zz)}catch(t){console.error(t)}}zz(),z3.exports=vo;var tu=z3.exports;const jJ=ft(tu);var Wz,jR=tu;Wz=jR.createRoot,jR.hydrateRoot;function BJ(t,e){if(t instanceof RegExp)return{keys:!1,pattern:t};var n,r,o,s,i=[],a="",l=t.split("/");for(l[0]||l.shift();o=l.shift();)n=o[0],n==="*"?(i.push(n),a+=o[1]==="?"?"(?:/(.*))?":"/(.*)"):n===":"?(r=o.indexOf("?",1),s=o.indexOf(".",1),i.push(o.substring(1,~r?r:~s?s:o.length)),a+=~r&&!~s?"(?:/([^/]+?))?":"/([^/]+?)",~s&&(a+=(~r?"?":"")+"\\"+o.substring(s))):a+="/"+o;return{keys:i,pattern:new RegExp("^"+a+(e?"(?=$|/)":"/?$"),"i")}}var Vz={exports:{}},Uz={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Fd=k;function zJ(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var WJ=typeof Object.is=="function"?Object.is:zJ,VJ=Fd.useState,UJ=Fd.useEffect,GJ=Fd.useLayoutEffect,HJ=Fd.useDebugValue;function KJ(t,e){var n=e(),r=VJ({inst:{value:n,getSnapshot:e}}),o=r[0].inst,s=r[1];return GJ(function(){o.value=n,o.getSnapshot=e,US(o)&&s({inst:o})},[t,n,e]),UJ(function(){return US(o)&&s({inst:o}),t(function(){US(o)&&s({inst:o})})},[t]),HJ(n),n}function US(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!WJ(t,n)}catch{return!0}}function qJ(t,e){return e()}var XJ=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?qJ:KJ;Uz.useSyncExternalStore=Fd.useSyncExternalStore!==void 0?Fd.useSyncExternalStore:XJ;Vz.exports=Uz;var YJ=Vz.exports;const QJ=j3.useInsertionEffect,ZJ=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",JJ=ZJ?k.useLayoutEffect:k.useEffect,eee=QJ||JJ,Gz=t=>{const e=k.useRef([t,(...n)=>e[0](...n)]).current;return eee(()=>{e[0]=t}),e[1]},tee="popstate",FE="pushState",LE="replaceState",nee="hashchange",BR=[tee,FE,LE,nee],ree=t=>{for(const e of BR)addEventListener(e,t);return()=>{for(const e of BR)removeEventListener(e,t)}},Hz=(t,e)=>YJ.useSyncExternalStore(ree,t,e),oee=()=>location.search,see=({ssrSearch:t=""}={})=>Hz(oee,()=>t),zR=()=>location.pathname,iee=({ssrPath:t}={})=>Hz(zR,t?()=>t:zR),aee=(t,{replace:e=!1,state:n=null}={})=>history[e?LE:FE](n,"",t),lee=(t={})=>[iee(t),aee],WR=Symbol.for("wouter_v3");if(typeof history<"u"&&typeof window[WR]>"u"){for(const t of[FE,LE]){const e=history[t];history[t]=function(){const n=e.apply(this,arguments),r=new Event(t);return r.arguments=arguments,dispatchEvent(r),n}}Object.defineProperty(window,WR,{value:!0})}const cee=(t,e)=>e.toLowerCase().indexOf(t.toLowerCase())?"~"+e:e.slice(t.length)||"/",Kz=(t="")=>t==="/"?"":t,uee=(t,e)=>t[0]==="~"?t.slice(1):Kz(e)+t,dee=(t="",e)=>cee(VR(Kz(t)),VR(e)),VR=t=>{try{return decodeURI(t)}catch{return t}},qz={hook:lee,searchHook:see,parser:BJ,base:"",ssrPath:void 0,ssrSearch:void 0,hrefs:t=>t},Xz=k.createContext(qz),Km=()=>k.useContext(Xz),Yz={},Qz=k.createContext(Yz),fee=()=>k.useContext(Qz),I0=t=>{const[e,n]=t.hook(t);return[dee(t.base,e),Gz((r,o)=>n(uee(r,t.base),o))]},hee=()=>I0(Km()),Zz=(t,e,n,r)=>{const{pattern:o,keys:s}=e instanceof RegExp?{keys:!1,pattern:e}:t(e||"*",r),i=o.exec(n)||[],[a,...l]=i;return a!==void 0?[!0,(()=>{const c=s!==!1?Object.fromEntries(s.map((d,f)=>[d,l[f]])):i.groups;let u={...l};return c&&Object.assign(u,c),u})(),...r?[a]:[]]:[!1,null]},pee=({children:t,...e})=>{var u,d;const n=Km(),r=e.hook?qz:n;let o=r;const[s,i]=((u=e.ssrPath)==null?void 0:u.split("?"))??[];i&&(e.ssrSearch=i,e.ssrPath=s),e.hrefs=e.hrefs??((d=e.hook)==null?void 0:d.hrefs);let a=k.useRef({}),l=a.current,c=l;for(let f in r){const h=f==="base"?r[f]+(e[f]||""):e[f]||r[f];l===c&&h!==c[f]&&(a.current=c={...c}),c[f]=h,h!==r[f]&&(o=c)}return k.createElement(Xz.Provider,{value:o,children:t})},UR=({children:t,component:e},n)=>e?k.createElement(e,{params:n}):typeof t=="function"?t(n):t,mee=t=>{let e=k.useRef(Yz),n=e.current;for(const r in t)t[r]!==n[r]&&(n=t);return Object.keys(t).length===0&&(n=t),e.current=n},Ll=({path:t,nest:e,match:n,...r})=>{const o=Km(),[s]=I0(o),[i,a,l]=n??Zz(o.parser,t,s,e),c=mee({...fee(),...a});if(!i)return null;const u=l?k.createElement(pee,{base:l},UR(r,c)):UR(r,c);return k.createElement(Qz.Provider,{value:c,children:u})},ys=k.forwardRef((t,e)=>{const n=Km(),[r,o]=I0(n),{to:s="",href:i=s,onClick:a,asChild:l,children:c,className:u,replace:d,state:f,...h}=t,p=Gz(g=>{g.ctrlKey||g.metaKey||g.altKey||g.shiftKey||g.button!==0||(a==null||a(g),g.defaultPrevented||(g.preventDefault(),o(i,t)))}),m=n.hrefs(i[0]==="~"?i.slice(1):n.base+i,n);return l&&k.isValidElement(c)?k.cloneElement(c,{onClick:p,href:m}):k.createElement("a",{...h,onClick:p,href:m,className:u!=null&&u.call?u(r===i):u,children:c,ref:e})}),Jz=t=>Array.isArray(t)?t.flatMap(e=>Jz(e&&e.type===k.Fragment?e.props.children:e)):[t],gee=({children:t,location:e})=>{const n=Km(),[r]=I0(n);for(const o of Jz(t)){let s=0;if(k.isValidElement(o)&&(s=Zz(n.parser,o.props.path,e||r,o.props.nest))[0])return k.cloneElement(o,{match:s})}return null};var qm=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(t){return this.listeners.add(t),this.onSubscribe(),()=>{this.listeners.delete(t),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},Nc=typeof window>"u"||"Deno"in globalThis;function Ao(){}function yee(t,e){return typeof t=="function"?t(e):t}function K$(t){return typeof t=="number"&&t>=0&&t!==1/0}function e4(t,e){return Math.max(t+(e||0)-Date.now(),0)}function rd(t,e){return typeof t=="function"?t(e):t}function ps(t,e){return typeof t=="function"?t(e):t}function GR(t,e){const{type:n="all",exact:r,fetchStatus:o,predicate:s,queryKey:i,stale:a}=t;if(i){if(r){if(e.queryHash!==jE(i,e.options))return!1}else if(!Rp(e.queryKey,i))return!1}if(n!=="all"){const l=e.isActive();if(n==="active"&&!l||n==="inactive"&&l)return!1}return!(typeof a=="boolean"&&e.isStale()!==a||o&&o!==e.state.fetchStatus||s&&!s(e))}function HR(t,e){const{exact:n,status:r,predicate:o,mutationKey:s}=t;if(s){if(!e.options.mutationKey)return!1;if(n){if(Pp(e.options.mutationKey)!==Pp(s))return!1}else if(!Rp(e.options.mutationKey,s))return!1}return!(r&&e.state.status!==r||o&&!o(e))}function jE(t,e){return((e==null?void 0:e.queryKeyHashFn)||Pp)(t)}function Pp(t){return JSON.stringify(t,(e,n)=>X$(n)?Object.keys(n).sort().reduce((r,o)=>(r[o]=n[o],r),{}):n)}function Rp(t,e){return t===e?!0:typeof t!=typeof e?!1:t&&e&&typeof t=="object"&&typeof e=="object"?!Object.keys(e).some(n=>!Rp(t[n],e[n])):!1}function t4(t,e){if(t===e)return t;const n=KR(t)&&KR(e);if(n||X$(t)&&X$(e)){const r=n?t:Object.keys(t),o=r.length,s=n?e:Object.keys(e),i=s.length,a=n?[]:{};let l=0;for(let c=0;c<i;c++){const u=n?c:s[c];(!n&&r.includes(u)||n)&&t[u]===void 0&&e[u]===void 0?(a[u]=void 0,l++):(a[u]=t4(t[u],e[u]),a[u]===t[u]&&t[u]!==void 0&&l++)}return o===i&&l===o?t:a}return e}function q$(t,e){if(!e||Object.keys(t).length!==Object.keys(e).length)return!1;for(const n in t)if(t[n]!==e[n])return!1;return!0}function KR(t){return Array.isArray(t)&&t.length===Object.keys(t).length}function X$(t){if(!qR(t))return!1;const e=t.constructor;if(e===void 0)return!0;const n=e.prototype;return!(!qR(n)||!n.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(t)!==Object.prototype)}function qR(t){return Object.prototype.toString.call(t)==="[object Object]"}function vee(t){return new Promise(e=>{setTimeout(e,t)})}function Y$(t,e,n){return typeof n.structuralSharing=="function"?n.structuralSharing(t,e):n.structuralSharing!==!1?t4(t,e):e}function xee(t,e,n=0){const r=[...t,e];return n&&r.length>n?r.slice(1):r}function bee(t,e,n=0){const r=[e,...t];return n&&r.length>n?r.slice(0,-1):r}var BE=Symbol();function n4(t,e){return!t.queryFn&&(e!=null&&e.initialPromise)?()=>e.initialPromise:!t.queryFn||t.queryFn===BE?()=>Promise.reject(new Error(`Missing queryFn: '${t.queryHash}'`)):t.queryFn}var cc,Oa,yd,x3,wee=(x3=class extends qm{constructor(){super();Fe(this,cc);Fe(this,Oa);Fe(this,yd);ke(this,yd,e=>{if(!Nc&&window.addEventListener){const n=()=>e();return window.addEventListener("visibilitychange",n,!1),()=>{window.removeEventListener("visibilitychange",n)}}})}onSubscribe(){K(this,Oa)||this.setEventListener(K(this,yd))}onUnsubscribe(){var e;this.hasListeners()||((e=K(this,Oa))==null||e.call(this),ke(this,Oa,void 0))}setEventListener(e){var n;ke(this,yd,e),(n=K(this,Oa))==null||n.call(this),ke(this,Oa,e(r=>{typeof r=="boolean"?this.setFocused(r):this.onFocus()}))}setFocused(e){K(this,cc)!==e&&(ke(this,cc,e),this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(n=>{n(e)})}isFocused(){var e;return typeof K(this,cc)=="boolean"?K(this,cc):((e=globalThis.document)==null?void 0:e.visibilityState)!=="hidden"}},cc=new WeakMap,Oa=new WeakMap,yd=new WeakMap,x3),zE=new wee,vd,Pa,xd,b3,See=(b3=class extends qm{constructor(){super();Fe(this,vd,!0);Fe(this,Pa);Fe(this,xd);ke(this,xd,e=>{if(!Nc&&window.addEventListener){const n=()=>e(!0),r=()=>e(!1);return window.addEventListener("online",n,!1),window.addEventListener("offline",r,!1),()=>{window.removeEventListener("online",n),window.removeEventListener("offline",r)}}})}onSubscribe(){K(this,Pa)||this.setEventListener(K(this,xd))}onUnsubscribe(){var e;this.hasListeners()||((e=K(this,Pa))==null||e.call(this),ke(this,Pa,void 0))}setEventListener(e){var n;ke(this,xd,e),(n=K(this,Pa))==null||n.call(this),ke(this,Pa,e(this.setOnline.bind(this)))}setOnline(e){K(this,vd)!==e&&(ke(this,vd,e),this.listeners.forEach(r=>{r(e)}))}isOnline(){return K(this,vd)}},vd=new WeakMap,Pa=new WeakMap,xd=new WeakMap,b3),Sx=new See;function Q$(){let t,e;const n=new Promise((o,s)=>{t=o,e=s});n.status="pending",n.catch(()=>{});function r(o){Object.assign(n,o),delete n.resolve,delete n.reject}return n.resolve=o=>{r({status:"fulfilled",value:o}),t(o)},n.reject=o=>{r({status:"rejected",reason:o}),e(o)},n}function Cee(t){return Math.min(1e3*2**t,3e4)}function r4(t){return(t??"online")==="online"?Sx.isOnline():!0}var o4=class extends Error{constructor(t){super("CancelledError"),this.revert=t==null?void 0:t.revert,this.silent=t==null?void 0:t.silent}};function GS(t){return t instanceof o4}function s4(t){let e=!1,n=0,r=!1,o;const s=Q$(),i=m=>{var g;r||(f(new o4(m)),(g=t.abort)==null||g.call(t))},a=()=>{e=!0},l=()=>{e=!1},c=()=>zE.isFocused()&&(t.networkMode==="always"||Sx.isOnline())&&t.canRun(),u=()=>r4(t.networkMode)&&t.canRun(),d=m=>{var g;r||(r=!0,(g=t.onSuccess)==null||g.call(t,m),o==null||o(),s.resolve(m))},f=m=>{var g;r||(r=!0,(g=t.onError)==null||g.call(t,m),o==null||o(),s.reject(m))},h=()=>new Promise(m=>{var g;o=y=>{(r||c())&&m(y)},(g=t.onPause)==null||g.call(t)}).then(()=>{var m;o=void 0,r||(m=t.onContinue)==null||m.call(t)}),p=()=>{if(r)return;let m;const g=n===0?t.initialPromise:void 0;try{m=g??t.fn()}catch(y){m=Promise.reject(y)}Promise.resolve(m).then(d).catch(y=>{var C;if(r)return;const v=t.retry??(Nc?0:3),x=t.retryDelay??Cee,b=typeof x=="function"?x(n,y):x,w=v===!0||typeof v=="number"&&n<v||typeof v=="function"&&v(n,y);if(e||!w){f(y);return}n++,(C=t.onFail)==null||C.call(t,n,y),vee(b).then(()=>c()?void 0:h()).then(()=>{e?f(y):p()})})};return{promise:s,cancel:i,continue:()=>(o==null||o(),s),cancelRetry:a,continueRetry:l,canStart:u,start:()=>(u()?p():h().then(p),s)}}function $ee(){let t=[],e=0,n=a=>{a()},r=a=>{a()},o=a=>setTimeout(a,0);const s=a=>{e?t.push(a):o(()=>{n(a)})},i=()=>{const a=t;t=[],a.length&&o(()=>{r(()=>{a.forEach(l=>{n(l)})})})};return{batch:a=>{let l;e++;try{l=a()}finally{e--,e||i()}return l},batchCalls:a=>(...l)=>{s(()=>{a(...l)})},schedule:s,setNotifyFunction:a=>{n=a},setBatchNotifyFunction:a=>{r=a},setScheduler:a=>{o=a}}}var Vn=$ee(),uc,w3,i4=(w3=class{constructor(){Fe(this,uc)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),K$(this.gcTime)&&ke(this,uc,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(t){this.gcTime=Math.max(this.gcTime||0,t??(Nc?1/0:5*60*1e3))}clearGcTimeout(){K(this,uc)&&(clearTimeout(K(this,uc)),ke(this,uc,void 0))}},uc=new WeakMap,w3),bd,wd,No,rr,Lm,dc,cs,ki,S3,kee=(S3=class extends i4{constructor(e){super();Fe(this,cs);Fe(this,bd);Fe(this,wd);Fe(this,No);Fe(this,rr);Fe(this,Lm);Fe(this,dc);ke(this,dc,!1),ke(this,Lm,e.defaultOptions),this.setOptions(e.options),this.observers=[],ke(this,No,e.cache),this.queryKey=e.queryKey,this.queryHash=e.queryHash,ke(this,bd,Tee(this.options)),this.state=e.state??K(this,bd),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var e;return(e=K(this,rr))==null?void 0:e.promise}setOptions(e){this.options={...K(this,Lm),...e},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&K(this,No).remove(this)}setData(e,n){const r=Y$(this.state.data,e,this.options);return Je(this,cs,ki).call(this,{data:r,type:"success",dataUpdatedAt:n==null?void 0:n.updatedAt,manual:n==null?void 0:n.manual}),r}setState(e,n){Je(this,cs,ki).call(this,{type:"setState",state:e,setStateOptions:n})}cancel(e){var r,o;const n=(r=K(this,rr))==null?void 0:r.promise;return(o=K(this,rr))==null||o.cancel(e),n?n.then(Ao).catch(Ao):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(K(this,bd))}isActive(){return this.observers.some(e=>ps(e.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===BE||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStale(){return this.state.isInvalidated?!0:this.getObserversCount()>0?this.observers.some(e=>e.getCurrentResult().isStale):this.state.data===void 0}isStaleByTime(e=0){return this.state.isInvalidated||this.state.data===void 0||!e4(this.state.dataUpdatedAt,e)}onFocus(){var n;const e=this.observers.find(r=>r.shouldFetchOnWindowFocus());e==null||e.refetch({cancelRefetch:!1}),(n=K(this,rr))==null||n.continue()}onOnline(){var n;const e=this.observers.find(r=>r.shouldFetchOnReconnect());e==null||e.refetch({cancelRefetch:!1}),(n=K(this,rr))==null||n.continue()}addObserver(e){this.observers.includes(e)||(this.observers.push(e),this.clearGcTimeout(),K(this,No).notify({type:"observerAdded",query:this,observer:e}))}removeObserver(e){this.observers.includes(e)&&(this.observers=this.observers.filter(n=>n!==e),this.observers.length||(K(this,rr)&&(K(this,dc)?K(this,rr).cancel({revert:!0}):K(this,rr).cancelRetry()),this.scheduleGc()),K(this,No).notify({type:"observerRemoved",query:this,observer:e}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||Je(this,cs,ki).call(this,{type:"invalidate"})}fetch(e,n){var l,c,u;if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&(n!=null&&n.cancelRefetch))this.cancel({silent:!0});else if(K(this,rr))return K(this,rr).continueRetry(),K(this,rr).promise}if(e&&this.setOptions(e),!this.options.queryFn){const d=this.observers.find(f=>f.options.queryFn);d&&this.setOptions(d.options)}const r=new AbortController,o=d=>{Object.defineProperty(d,"signal",{enumerable:!0,get:()=>(ke(this,dc,!0),r.signal)})},s=()=>{const d=n4(this.options,n),f={queryKey:this.queryKey,meta:this.meta};return o(f),ke(this,dc,!1),this.options.persister?this.options.persister(d,f,this):d(f)},i={fetchOptions:n,options:this.options,queryKey:this.queryKey,state:this.state,fetchFn:s};o(i),(l=this.options.behavior)==null||l.onFetch(i,this),ke(this,wd,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((c=i.fetchOptions)==null?void 0:c.meta))&&Je(this,cs,ki).call(this,{type:"fetch",meta:(u=i.fetchOptions)==null?void 0:u.meta});const a=d=>{var f,h,p,m;GS(d)&&d.silent||Je(this,cs,ki).call(this,{type:"error",error:d}),GS(d)||((h=(f=K(this,No).config).onError)==null||h.call(f,d,this),(m=(p=K(this,No).config).onSettled)==null||m.call(p,this.state.data,d,this)),this.scheduleGc()};return ke(this,rr,s4({initialPromise:n==null?void 0:n.initialPromise,fn:i.fetchFn,abort:r.abort.bind(r),onSuccess:d=>{var f,h,p,m;if(d===void 0){a(new Error(`${this.queryHash} data is undefined`));return}try{this.setData(d)}catch(g){a(g);return}(h=(f=K(this,No).config).onSuccess)==null||h.call(f,d,this),(m=(p=K(this,No).config).onSettled)==null||m.call(p,d,this.state.error,this),this.scheduleGc()},onError:a,onFail:(d,f)=>{Je(this,cs,ki).call(this,{type:"failed",failureCount:d,error:f})},onPause:()=>{Je(this,cs,ki).call(this,{type:"pause"})},onContinue:()=>{Je(this,cs,ki).call(this,{type:"continue"})},retry:i.options.retry,retryDelay:i.options.retryDelay,networkMode:i.options.networkMode,canRun:()=>!0})),K(this,rr).start()}},bd=new WeakMap,wd=new WeakMap,No=new WeakMap,rr=new WeakMap,Lm=new WeakMap,dc=new WeakMap,cs=new WeakSet,ki=function(e){const n=r=>{switch(e.type){case"failed":return{...r,fetchFailureCount:e.failureCount,fetchFailureReason:e.error};case"pause":return{...r,fetchStatus:"paused"};case"continue":return{...r,fetchStatus:"fetching"};case"fetch":return{...r,...a4(r.data,this.options),fetchMeta:e.meta??null};case"success":return{...r,data:e.data,dataUpdateCount:r.dataUpdateCount+1,dataUpdatedAt:e.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!e.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const o=e.error;return GS(o)&&o.revert&&K(this,wd)?{...K(this,wd),fetchStatus:"idle"}:{...r,error:o,errorUpdateCount:r.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:r.fetchFailureCount+1,fetchFailureReason:o,fetchStatus:"idle",status:"error"};case"invalidate":return{...r,isInvalidated:!0};case"setState":return{...r,...e.state}}};this.state=n(this.state),Vn.batch(()=>{this.observers.forEach(r=>{r.onQueryUpdate()}),K(this,No).notify({query:this,type:"updated",action:e})})},S3);function a4(t,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:r4(e.networkMode)?"fetching":"paused",...t===void 0&&{error:null,status:"pending"}}}function Tee(t){const e=typeof t.initialData=="function"?t.initialData():t.initialData,n=e!==void 0,r=n?typeof t.initialDataUpdatedAt=="function"?t.initialDataUpdatedAt():t.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:n?r??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:n?"success":"pending",fetchStatus:"idle"}}var Us,C3,Iee=(C3=class extends qm{constructor(e={}){super();Fe(this,Us);this.config=e,ke(this,Us,new Map)}build(e,n,r){const o=n.queryKey,s=n.queryHash??jE(o,n);let i=this.get(s);return i||(i=new kee({cache:this,queryKey:o,queryHash:s,options:e.defaultQueryOptions(n),state:r,defaultOptions:e.getQueryDefaults(o)}),this.add(i)),i}add(e){K(this,Us).has(e.queryHash)||(K(this,Us).set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const n=K(this,Us).get(e.queryHash);n&&(e.destroy(),n===e&&K(this,Us).delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){Vn.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return K(this,Us).get(e)}getAll(){return[...K(this,Us).values()]}find(e){const n={exact:!0,...e};return this.getAll().find(r=>GR(n,r))}findAll(e={}){const n=this.getAll();return Object.keys(e).length>0?n.filter(r=>GR(e,r)):n}notify(e){Vn.batch(()=>{this.listeners.forEach(n=>{n(e)})})}onFocus(){Vn.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){Vn.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},Us=new WeakMap,C3),Gs,yr,fc,Hs,ba,$3,Eee=($3=class extends i4{constructor(e){super();Fe(this,Hs);Fe(this,Gs);Fe(this,yr);Fe(this,fc);this.mutationId=e.mutationId,ke(this,yr,e.mutationCache),ke(this,Gs,[]),this.state=e.state||Nee(),this.setOptions(e.options),this.scheduleGc()}setOptions(e){this.options=e,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(e){K(this,Gs).includes(e)||(K(this,Gs).push(e),this.clearGcTimeout(),K(this,yr).notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){ke(this,Gs,K(this,Gs).filter(n=>n!==e)),this.scheduleGc(),K(this,yr).notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){K(this,Gs).length||(this.state.status==="pending"?this.scheduleGc():K(this,yr).remove(this))}continue(){var e;return((e=K(this,fc))==null?void 0:e.continue())??this.execute(this.state.variables)}async execute(e){var o,s,i,a,l,c,u,d,f,h,p,m,g,y,v,x,b,w,C,$;ke(this,fc,s4({fn:()=>this.options.mutationFn?this.options.mutationFn(e):Promise.reject(new Error("No mutationFn found")),onFail:(T,I)=>{Je(this,Hs,ba).call(this,{type:"failed",failureCount:T,error:I})},onPause:()=>{Je(this,Hs,ba).call(this,{type:"pause"})},onContinue:()=>{Je(this,Hs,ba).call(this,{type:"continue"})},retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>K(this,yr).canRun(this)}));const n=this.state.status==="pending",r=!K(this,fc).canStart();try{if(!n){Je(this,Hs,ba).call(this,{type:"pending",variables:e,isPaused:r}),await((s=(o=K(this,yr).config).onMutate)==null?void 0:s.call(o,e,this));const I=await((a=(i=this.options).onMutate)==null?void 0:a.call(i,e));I!==this.state.context&&Je(this,Hs,ba).call(this,{type:"pending",context:I,variables:e,isPaused:r})}const T=await K(this,fc).start();return await((c=(l=K(this,yr).config).onSuccess)==null?void 0:c.call(l,T,e,this.state.context,this)),await((d=(u=this.options).onSuccess)==null?void 0:d.call(u,T,e,this.state.context)),await((h=(f=K(this,yr).config).onSettled)==null?void 0:h.call(f,T,null,this.state.variables,this.state.context,this)),await((m=(p=this.options).onSettled)==null?void 0:m.call(p,T,null,e,this.state.context)),Je(this,Hs,ba).call(this,{type:"success",data:T}),T}catch(T){try{throw await((y=(g=K(this,yr).config).onError)==null?void 0:y.call(g,T,e,this.state.context,this)),await((x=(v=this.options).onError)==null?void 0:x.call(v,T,e,this.state.context)),await((w=(b=K(this,yr).config).onSettled)==null?void 0:w.call(b,void 0,T,this.state.variables,this.state.context,this)),await(($=(C=this.options).onSettled)==null?void 0:$.call(C,void 0,T,e,this.state.context)),T}finally{Je(this,Hs,ba).call(this,{type:"error",error:T})}}finally{K(this,yr).runNext(this)}}},Gs=new WeakMap,yr=new WeakMap,fc=new WeakMap,Hs=new WeakSet,ba=function(e){const n=r=>{switch(e.type){case"failed":return{...r,failureCount:e.failureCount,failureReason:e.error};case"pause":return{...r,isPaused:!0};case"continue":return{...r,isPaused:!1};case"pending":return{...r,context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:e.isPaused,status:"pending",variables:e.variables,submittedAt:Date.now()};case"success":return{...r,data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...r,data:void 0,error:e.error,failureCount:r.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"}}};this.state=n(this.state),Vn.batch(()=>{K(this,Gs).forEach(r=>{r.onMutationUpdate(e)}),K(this,yr).notify({mutation:this,type:"updated",action:e})})},$3);function Nee(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var ro,jm,k3,Aee=(k3=class extends qm{constructor(e={}){super();Fe(this,ro);Fe(this,jm);this.config=e,ke(this,ro,new Map),ke(this,jm,Date.now())}build(e,n,r){const o=new Eee({mutationCache:this,mutationId:++Py(this,jm)._,options:e.defaultMutationOptions(n),state:r});return this.add(o),o}add(e){const n=Yy(e),r=K(this,ro).get(n)??[];r.push(e),K(this,ro).set(n,r),this.notify({type:"added",mutation:e})}remove(e){var r;const n=Yy(e);if(K(this,ro).has(n)){const o=(r=K(this,ro).get(n))==null?void 0:r.filter(s=>s!==e);o&&(o.length===0?K(this,ro).delete(n):K(this,ro).set(n,o))}this.notify({type:"removed",mutation:e})}canRun(e){var r;const n=(r=K(this,ro).get(Yy(e)))==null?void 0:r.find(o=>o.state.status==="pending");return!n||n===e}runNext(e){var r;const n=(r=K(this,ro).get(Yy(e)))==null?void 0:r.find(o=>o!==e&&o.state.isPaused);return(n==null?void 0:n.continue())??Promise.resolve()}clear(){Vn.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}getAll(){return[...K(this,ro).values()].flat()}find(e){const n={exact:!0,...e};return this.getAll().find(r=>HR(n,r))}findAll(e={}){return this.getAll().filter(n=>HR(e,n))}notify(e){Vn.batch(()=>{this.listeners.forEach(n=>{n(e)})})}resumePausedMutations(){const e=this.getAll().filter(n=>n.state.isPaused);return Vn.batch(()=>Promise.all(e.map(n=>n.continue().catch(Ao))))}},ro=new WeakMap,jm=new WeakMap,k3);function Yy(t){var e;return((e=t.options.scope)==null?void 0:e.id)??String(t.mutationId)}function XR(t){return{onFetch:(e,n)=>{var u,d,f,h,p;const r=e.options,o=(f=(d=(u=e.fetchOptions)==null?void 0:u.meta)==null?void 0:d.fetchMore)==null?void 0:f.direction,s=((h=e.state.data)==null?void 0:h.pages)||[],i=((p=e.state.data)==null?void 0:p.pageParams)||[];let a={pages:[],pageParams:[]},l=0;const c=async()=>{let m=!1;const g=x=>{Object.defineProperty(x,"signal",{enumerable:!0,get:()=>(e.signal.aborted?m=!0:e.signal.addEventListener("abort",()=>{m=!0}),e.signal)})},y=n4(e.options,e.fetchOptions),v=async(x,b,w)=>{if(m)return Promise.reject();if(b==null&&x.pages.length)return Promise.resolve(x);const C={queryKey:e.queryKey,pageParam:b,direction:w?"backward":"forward",meta:e.options.meta};g(C);const $=await y(C),{maxPages:T}=e.options,I=w?bee:xee;return{pages:I(x.pages,$,T),pageParams:I(x.pageParams,b,T)}};if(o&&s.length){const x=o==="backward",b=x?Oee:YR,w={pages:s,pageParams:i},C=b(r,w);a=await v(w,C,x)}else{const x=t??s.length;do{const b=l===0?i[0]??r.initialPageParam:YR(r,a);if(l>0&&b==null)break;a=await v(a,b),l++}while(l<x)}return a};e.options.persister?e.fetchFn=()=>{var m,g;return(g=(m=e.options).persister)==null?void 0:g.call(m,c,{queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},n)}:e.fetchFn=c}}}function YR(t,{pages:e,pageParams:n}){const r=e.length-1;return e.length>0?t.getNextPageParam(e[r],e,n[r],n):void 0}function Oee(t,{pages:e,pageParams:n}){var r;return e.length>0?(r=t.getPreviousPageParam)==null?void 0:r.call(t,e[0],e,n[0],n):void 0}var qt,Ra,_a,Sd,Cd,Da,$d,kd,T3,Pee=(T3=class{constructor(t={}){Fe(this,qt);Fe(this,Ra);Fe(this,_a);Fe(this,Sd);Fe(this,Cd);Fe(this,Da);Fe(this,$d);Fe(this,kd);ke(this,qt,t.queryCache||new Iee),ke(this,Ra,t.mutationCache||new Aee),ke(this,_a,t.defaultOptions||{}),ke(this,Sd,new Map),ke(this,Cd,new Map),ke(this,Da,0)}mount(){Py(this,Da)._++,K(this,Da)===1&&(ke(this,$d,zE.subscribe(async t=>{t&&(await this.resumePausedMutations(),K(this,qt).onFocus())})),ke(this,kd,Sx.subscribe(async t=>{t&&(await this.resumePausedMutations(),K(this,qt).onOnline())})))}unmount(){var t,e;Py(this,Da)._--,K(this,Da)===0&&((t=K(this,$d))==null||t.call(this),ke(this,$d,void 0),(e=K(this,kd))==null||e.call(this),ke(this,kd,void 0))}isFetching(t){return K(this,qt).findAll({...t,fetchStatus:"fetching"}).length}isMutating(t){return K(this,Ra).findAll({...t,status:"pending"}).length}getQueryData(t){var n;const e=this.defaultQueryOptions({queryKey:t});return(n=K(this,qt).get(e.queryHash))==null?void 0:n.state.data}ensureQueryData(t){const e=this.getQueryData(t.queryKey);if(e===void 0)return this.fetchQuery(t);{const n=this.defaultQueryOptions(t),r=K(this,qt).build(this,n);return t.revalidateIfStale&&r.isStaleByTime(rd(n.staleTime,r))&&this.prefetchQuery(n),Promise.resolve(e)}}getQueriesData(t){return K(this,qt).findAll(t).map(({queryKey:e,state:n})=>{const r=n.data;return[e,r]})}setQueryData(t,e,n){const r=this.defaultQueryOptions({queryKey:t}),o=K(this,qt).get(r.queryHash),s=o==null?void 0:o.state.data,i=yee(e,s);if(i!==void 0)return K(this,qt).build(this,r).setData(i,{...n,manual:!0})}setQueriesData(t,e,n){return Vn.batch(()=>K(this,qt).findAll(t).map(({queryKey:r})=>[r,this.setQueryData(r,e,n)]))}getQueryState(t){var n;const e=this.defaultQueryOptions({queryKey:t});return(n=K(this,qt).get(e.queryHash))==null?void 0:n.state}removeQueries(t){const e=K(this,qt);Vn.batch(()=>{e.findAll(t).forEach(n=>{e.remove(n)})})}resetQueries(t,e){const n=K(this,qt),r={type:"active",...t};return Vn.batch(()=>(n.findAll(t).forEach(o=>{o.reset()}),this.refetchQueries(r,e)))}cancelQueries(t={},e={}){const n={revert:!0,...e},r=Vn.batch(()=>K(this,qt).findAll(t).map(o=>o.cancel(n)));return Promise.all(r).then(Ao).catch(Ao)}invalidateQueries(t={},e={}){return Vn.batch(()=>{if(K(this,qt).findAll(t).forEach(r=>{r.invalidate()}),t.refetchType==="none")return Promise.resolve();const n={...t,type:t.refetchType??t.type??"active"};return this.refetchQueries(n,e)})}refetchQueries(t={},e){const n={...e,cancelRefetch:(e==null?void 0:e.cancelRefetch)??!0},r=Vn.batch(()=>K(this,qt).findAll(t).filter(o=>!o.isDisabled()).map(o=>{let s=o.fetch(void 0,n);return n.throwOnError||(s=s.catch(Ao)),o.state.fetchStatus==="paused"?Promise.resolve():s}));return Promise.all(r).then(Ao)}fetchQuery(t){const e=this.defaultQueryOptions(t);e.retry===void 0&&(e.retry=!1);const n=K(this,qt).build(this,e);return n.isStaleByTime(rd(e.staleTime,n))?n.fetch(e):Promise.resolve(n.state.data)}prefetchQuery(t){return this.fetchQuery(t).then(Ao).catch(Ao)}fetchInfiniteQuery(t){return t.behavior=XR(t.pages),this.fetchQuery(t)}prefetchInfiniteQuery(t){return this.fetchInfiniteQuery(t).then(Ao).catch(Ao)}ensureInfiniteQueryData(t){return t.behavior=XR(t.pages),this.ensureQueryData(t)}resumePausedMutations(){return Sx.isOnline()?K(this,Ra).resumePausedMutations():Promise.resolve()}getQueryCache(){return K(this,qt)}getMutationCache(){return K(this,Ra)}getDefaultOptions(){return K(this,_a)}setDefaultOptions(t){ke(this,_a,t)}setQueryDefaults(t,e){K(this,Sd).set(Pp(t),{queryKey:t,defaultOptions:e})}getQueryDefaults(t){const e=[...K(this,Sd).values()];let n={};return e.forEach(r=>{Rp(t,r.queryKey)&&(n={...n,...r.defaultOptions})}),n}setMutationDefaults(t,e){K(this,Cd).set(Pp(t),{mutationKey:t,defaultOptions:e})}getMutationDefaults(t){const e=[...K(this,Cd).values()];let n={};return e.forEach(r=>{Rp(t,r.mutationKey)&&(n={...n,...r.defaultOptions})}),n}defaultQueryOptions(t){if(t._defaulted)return t;const e={...K(this,_a).queries,...this.getQueryDefaults(t.queryKey),...t,_defaulted:!0};return e.queryHash||(e.queryHash=jE(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.enabled!==!0&&e.queryFn===BE&&(e.enabled=!1),e}defaultMutationOptions(t){return t!=null&&t._defaulted?t:{...K(this,_a).mutations,...(t==null?void 0:t.mutationKey)&&this.getMutationDefaults(t.mutationKey),...t,_defaulted:!0}}clear(){K(this,qt).clear(),K(this,Ra).clear()}},qt=new WeakMap,Ra=new WeakMap,_a=new WeakMap,Sd=new WeakMap,Cd=new WeakMap,Da=new WeakMap,$d=new WeakMap,kd=new WeakMap,T3),Br,et,Bm,vr,hc,Td,Ma,Ks,zm,Id,Ed,pc,mc,Fa,Nd,pt,zh,Z$,J$,ek,tk,nk,rk,ok,l4,I3,Ree=(I3=class extends qm{constructor(e,n){super();Fe(this,pt);Fe(this,Br);Fe(this,et);Fe(this,Bm);Fe(this,vr);Fe(this,hc);Fe(this,Td);Fe(this,Ma);Fe(this,Ks);Fe(this,zm);Fe(this,Id);Fe(this,Ed);Fe(this,pc);Fe(this,mc);Fe(this,Fa);Fe(this,Nd,new Set);this.options=n,ke(this,Br,e),ke(this,Ks,null),ke(this,Ma,Q$()),this.options.experimental_prefetchInRender||K(this,Ma).reject(new Error("experimental_prefetchInRender feature flag is not enabled")),this.bindMethods(),this.setOptions(n)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(K(this,et).addObserver(this),QR(K(this,et),this.options)?Je(this,pt,zh).call(this):this.updateResult(),Je(this,pt,tk).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return sk(K(this,et),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return sk(K(this,et),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,Je(this,pt,nk).call(this),Je(this,pt,rk).call(this),K(this,et).removeObserver(this)}setOptions(e,n){const r=this.options,o=K(this,et);if(this.options=K(this,Br).defaultQueryOptions(e),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof ps(this.options.enabled,K(this,et))!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");Je(this,pt,ok).call(this),K(this,et).setOptions(this.options),r._defaulted&&!q$(this.options,r)&&K(this,Br).getQueryCache().notify({type:"observerOptionsUpdated",query:K(this,et),observer:this});const s=this.hasListeners();s&&ZR(K(this,et),o,this.options,r)&&Je(this,pt,zh).call(this),this.updateResult(n),s&&(K(this,et)!==o||ps(this.options.enabled,K(this,et))!==ps(r.enabled,K(this,et))||rd(this.options.staleTime,K(this,et))!==rd(r.staleTime,K(this,et)))&&Je(this,pt,Z$).call(this);const i=Je(this,pt,J$).call(this);s&&(K(this,et)!==o||ps(this.options.enabled,K(this,et))!==ps(r.enabled,K(this,et))||i!==K(this,Fa))&&Je(this,pt,ek).call(this,i)}getOptimisticResult(e){const n=K(this,Br).getQueryCache().build(K(this,Br),e),r=this.createResult(n,e);return Dee(this,r)&&(ke(this,vr,r),ke(this,Td,this.options),ke(this,hc,K(this,et).state)),r}getCurrentResult(){return K(this,vr)}trackResult(e,n){const r={};return Object.keys(e).forEach(o=>{Object.defineProperty(r,o,{configurable:!1,enumerable:!0,get:()=>(this.trackProp(o),n==null||n(o),e[o])})}),r}trackProp(e){K(this,Nd).add(e)}getCurrentQuery(){return K(this,et)}refetch({...e}={}){return this.fetch({...e})}fetchOptimistic(e){const n=K(this,Br).defaultQueryOptions(e),r=K(this,Br).getQueryCache().build(K(this,Br),n);return r.fetch().then(()=>this.createResult(r,n))}fetch(e){return Je(this,pt,zh).call(this,{...e,cancelRefetch:e.cancelRefetch??!0}).then(()=>(this.updateResult(),K(this,vr)))}createResult(e,n){var T;const r=K(this,et),o=this.options,s=K(this,vr),i=K(this,hc),a=K(this,Td),c=e!==r?e.state:K(this,Bm),{state:u}=e;let d={...u},f=!1,h;if(n._optimisticResults){const I=this.hasListeners(),E=!I&&QR(e,n),N=I&&ZR(e,r,n,o);(E||N)&&(d={...d,...a4(u.data,e.options)}),n._optimisticResults==="isRestoring"&&(d.fetchStatus="idle")}let{error:p,errorUpdatedAt:m,status:g}=d;if(n.select&&d.data!==void 0)if(s&&d.data===(i==null?void 0:i.data)&&n.select===K(this,zm))h=K(this,Id);else try{ke(this,zm,n.select),h=n.select(d.data),h=Y$(s==null?void 0:s.data,h,n),ke(this,Id,h),ke(this,Ks,null)}catch(I){ke(this,Ks,I)}else h=d.data;if(n.placeholderData!==void 0&&h===void 0&&g==="pending"){let I;if(s!=null&&s.isPlaceholderData&&n.placeholderData===(a==null?void 0:a.placeholderData))I=s.data;else if(I=typeof n.placeholderData=="function"?n.placeholderData((T=K(this,Ed))==null?void 0:T.state.data,K(this,Ed)):n.placeholderData,n.select&&I!==void 0)try{I=n.select(I),ke(this,Ks,null)}catch(E){ke(this,Ks,E)}I!==void 0&&(g="success",h=Y$(s==null?void 0:s.data,I,n),f=!0)}K(this,Ks)&&(p=K(this,Ks),h=K(this,Id),m=Date.now(),g="error");const y=d.fetchStatus==="fetching",v=g==="pending",x=g==="error",b=v&&y,w=h!==void 0,$={status:g,fetchStatus:d.fetchStatus,isPending:v,isSuccess:g==="success",isError:x,isInitialLoading:b,isLoading:b,data:h,dataUpdatedAt:d.dataUpdatedAt,error:p,errorUpdatedAt:m,failureCount:d.fetchFailureCount,failureReason:d.fetchFailureReason,errorUpdateCount:d.errorUpdateCount,isFetched:d.dataUpdateCount>0||d.errorUpdateCount>0,isFetchedAfterMount:d.dataUpdateCount>c.dataUpdateCount||d.errorUpdateCount>c.errorUpdateCount,isFetching:y,isRefetching:y&&!v,isLoadingError:x&&!w,isPaused:d.fetchStatus==="paused",isPlaceholderData:f,isRefetchError:x&&w,isStale:WE(e,n),refetch:this.refetch,promise:K(this,Ma)};if(this.options.experimental_prefetchInRender){const I=A=>{$.status==="error"?A.reject($.error):$.data!==void 0&&A.resolve($.data)},E=()=>{const A=ke(this,Ma,$.promise=Q$());I(A)},N=K(this,Ma);switch(N.status){case"pending":e.queryHash===r.queryHash&&I(N);break;case"fulfilled":($.status==="error"||$.data!==N.value)&&E();break;case"rejected":($.status!=="error"||$.error!==N.reason)&&E();break}}return $}updateResult(e){const n=K(this,vr),r=this.createResult(K(this,et),this.options);if(ke(this,hc,K(this,et).state),ke(this,Td,this.options),K(this,hc).data!==void 0&&ke(this,Ed,K(this,et)),q$(r,n))return;ke(this,vr,r);const o={},s=()=>{if(!n)return!0;const{notifyOnChangeProps:i}=this.options,a=typeof i=="function"?i():i;if(a==="all"||!a&&!K(this,Nd).size)return!0;const l=new Set(a??K(this,Nd));return this.options.throwOnError&&l.add("error"),Object.keys(K(this,vr)).some(c=>{const u=c;return K(this,vr)[u]!==n[u]&&l.has(u)})};(e==null?void 0:e.listeners)!==!1&&s()&&(o.listeners=!0),Je(this,pt,l4).call(this,{...o,...e})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&Je(this,pt,tk).call(this)}},Br=new WeakMap,et=new WeakMap,Bm=new WeakMap,vr=new WeakMap,hc=new WeakMap,Td=new WeakMap,Ma=new WeakMap,Ks=new WeakMap,zm=new WeakMap,Id=new WeakMap,Ed=new WeakMap,pc=new WeakMap,mc=new WeakMap,Fa=new WeakMap,Nd=new WeakMap,pt=new WeakSet,zh=function(e){Je(this,pt,ok).call(this);let n=K(this,et).fetch(this.options,e);return e!=null&&e.throwOnError||(n=n.catch(Ao)),n},Z$=function(){Je(this,pt,nk).call(this);const e=rd(this.options.staleTime,K(this,et));if(Nc||K(this,vr).isStale||!K$(e))return;const r=e4(K(this,vr).dataUpdatedAt,e)+1;ke(this,pc,setTimeout(()=>{K(this,vr).isStale||this.updateResult()},r))},J$=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(K(this,et)):this.options.refetchInterval)??!1},ek=function(e){Je(this,pt,rk).call(this),ke(this,Fa,e),!(Nc||ps(this.options.enabled,K(this,et))===!1||!K$(K(this,Fa))||K(this,Fa)===0)&&ke(this,mc,setInterval(()=>{(this.options.refetchIntervalInBackground||zE.isFocused())&&Je(this,pt,zh).call(this)},K(this,Fa)))},tk=function(){Je(this,pt,Z$).call(this),Je(this,pt,ek).call(this,Je(this,pt,J$).call(this))},nk=function(){K(this,pc)&&(clearTimeout(K(this,pc)),ke(this,pc,void 0))},rk=function(){K(this,mc)&&(clearInterval(K(this,mc)),ke(this,mc,void 0))},ok=function(){const e=K(this,Br).getQueryCache().build(K(this,Br),this.options);if(e===K(this,et))return;const n=K(this,et);ke(this,et,e),ke(this,Bm,e.state),this.hasListeners()&&(n==null||n.removeObserver(this),e.addObserver(this))},l4=function(e){Vn.batch(()=>{e.listeners&&this.listeners.forEach(n=>{n(K(this,vr))}),K(this,Br).getQueryCache().notify({query:K(this,et),type:"observerResultsUpdated"})})},I3);function _ee(t,e){return ps(e.enabled,t)!==!1&&t.state.data===void 0&&!(t.state.status==="error"&&e.retryOnMount===!1)}function QR(t,e){return _ee(t,e)||t.state.data!==void 0&&sk(t,e,e.refetchOnMount)}function sk(t,e,n){if(ps(e.enabled,t)!==!1){const r=typeof n=="function"?n(t):n;return r==="always"||r!==!1&&WE(t,e)}return!1}function ZR(t,e,n,r){return(t!==e||ps(r.enabled,t)===!1)&&(!n.suspense||t.state.status!=="error")&&WE(t,n)}function WE(t,e){return ps(e.enabled,t)!==!1&&t.isStaleByTime(rd(e.staleTime,t))}function Dee(t,e){return!q$(t.getCurrentResult(),e)}var c4=k.createContext(void 0),Mee=t=>{const e=k.useContext(c4);if(!e)throw new Error("No QueryClient set, use QueryClientProvider to set one");return e},Fee=({client:t,children:e})=>(k.useEffect(()=>(t.mount(),()=>{t.unmount()}),[t]),S.jsx(c4.Provider,{value:t,children:e})),u4=k.createContext(!1),Lee=()=>k.useContext(u4);u4.Provider;function jee(){let t=!1;return{clearReset:()=>{t=!1},reset:()=>{t=!0},isReset:()=>t}}var Bee=k.createContext(jee()),zee=()=>k.useContext(Bee);function Wee(t,e){return typeof t=="function"?t(...e):!!t}function JR(){}var Vee=(t,e)=>{(t.suspense||t.throwOnError||t.experimental_prefetchInRender)&&(e.isReset()||(t.retryOnMount=!1))},Uee=t=>{k.useEffect(()=>{t.clearReset()},[t])},Gee=({result:t,errorResetBoundary:e,throwOnError:n,query:r})=>t.isError&&!e.isReset()&&!t.isFetching&&r&&Wee(n,[t.error,r]),Hee=t=>{t.suspense&&(t.staleTime===void 0&&(t.staleTime=1e3),typeof t.gcTime=="number"&&(t.gcTime=Math.max(t.gcTime,1e3)))},Kee=(t,e)=>t.isLoading&&t.isFetching&&!e,qee=(t,e)=>(t==null?void 0:t.suspense)&&e.isPending,e_=(t,e,n)=>e.fetchOptimistic(t).catch(()=>{n.clearReset()});function Xee(t,e,n){var u,d,f,h,p;const r=Mee(),o=Lee(),s=zee(),i=r.defaultQueryOptions(t);(d=(u=r.getDefaultOptions().queries)==null?void 0:u._experimental_beforeQuery)==null||d.call(u,i),i._optimisticResults=o?"isRestoring":"optimistic",Hee(i),Vee(i,s),Uee(s);const a=!r.getQueryCache().get(i.queryHash),[l]=k.useState(()=>new e(r,i)),c=l.getOptimisticResult(i);if(k.useSyncExternalStore(k.useCallback(m=>{const g=o?JR:l.subscribe(Vn.batchCalls(m));return l.updateResult(),g},[l,o]),()=>l.getCurrentResult(),()=>l.getCurrentResult()),k.useEffect(()=>{l.setOptions(i,{listeners:!1})},[i,l]),qee(i,c))throw e_(i,l,s);if(Gee({result:c,errorResetBoundary:s,throwOnError:i.throwOnError,query:r.getQueryCache().get(i.queryHash)}))throw c.error;if((h=(f=r.getDefaultOptions().queries)==null?void 0:f._experimental_afterQuery)==null||h.call(f,i,c),i.experimental_prefetchInRender&&!Nc&&Kee(c,o)){const m=a?e_(i,l,s):(p=r.getQueryCache().get(i.queryHash))==null?void 0:p.promise;m==null||m.catch(JR).finally(()=>{l.updateResult()})}return i.notifyOnChangeProps?c:l.trackResult(c)}function E0(t,e){return Xee(t,Ree)}async function d4(t){if(!t.ok){const e=await t.text()||t.statusText;throw new Error(`${t.status}: ${e}`)}}async function Yee(t,e,n){const r=await fetch(e,{method:t,headers:n?{"Content-Type":"application/json"}:{},body:n?JSON.stringify(n):void 0,credentials:"include"});return await d4(r),r}const Qee=({on401:t})=>async({queryKey:e})=>{const n=await fetch(e[0],{credentials:"include"});return t==="returnNull"&&n.status===401?null:(await d4(n),await n.json())},f4=new Pee({defaultOptions:{queries:{queryFn:Qee({on401:"throw"}),refetchInterval:!1,refetchOnWindowFocus:!1,staleTime:1/0,retry:!1},mutations:{retry:!1}}}),Zee=1,Jee=1e6;let HS=0;function ete(){return HS=(HS+1)%Number.MAX_SAFE_INTEGER,HS.toString()}const KS=new Map,t_=t=>{if(KS.has(t))return;const e=setTimeout(()=>{KS.delete(t),ap({type:"REMOVE_TOAST",toastId:t})},Jee);KS.set(t,e)},tte=(t,e)=>{switch(e.type){case"ADD_TOAST":return{...t,toasts:[e.toast,...t.toasts].slice(0,Zee)};case"UPDATE_TOAST":return{...t,toasts:t.toasts.map(n=>n.id===e.toast.id?{...n,...e.toast}:n)};case"DISMISS_TOAST":{const{toastId:n}=e;return n?t_(n):t.toasts.forEach(r=>{t_(r.id)}),{...t,toasts:t.toasts.map(r=>r.id===n||n===void 0?{...r,open:!1}:r)}}case"REMOVE_TOAST":return e.toastId===void 0?{...t,toasts:[]}:{...t,toasts:t.toasts.filter(n=>n.id!==e.toastId)}}},Uv=[];let Gv={toasts:[]};function ap(t){Gv=tte(Gv,t),Uv.forEach(e=>{e(Gv)})}function nte({...t}){const e=ete(),n=o=>ap({type:"UPDATE_TOAST",toast:{...o,id:e}}),r=()=>ap({type:"DISMISS_TOAST",toastId:e});return ap({type:"ADD_TOAST",toast:{...t,id:e,open:!0,onOpenChange:o=>{o||r()}}}),{id:e,dismiss:r,update:n}}function N0(){const[t,e]=k.useState(Gv);return k.useEffect(()=>(Uv.push(e),()=>{const n=Uv.indexOf(e);n>-1&&Uv.splice(n,1)}),[t]),{...t,toast:nte,dismiss:n=>ap({type:"DISMISS_TOAST",toastId:n})}}function me(t,e,{checkForDefaultPrevented:n=!0}={}){return function(o){if(t==null||t(o),n===!1||!o.defaultPrevented)return e==null?void 0:e(o)}}function n_(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}function A0(...t){return e=>{let n=!1;const r=t.map(o=>{const s=n_(o,e);return!n&&typeof s=="function"&&(n=!0),s});if(n)return()=>{for(let o=0;o<r.length;o++){const s=r[o];typeof s=="function"?s():n_(t[o],null)}}}}function Xe(...t){return k.useCallback(A0(...t),t)}function rte(t,e){const n=k.createContext(e),r=s=>{const{children:i,...a}=s,l=k.useMemo(()=>a,Object.values(a));return S.jsx(n.Provider,{value:l,children:i})};r.displayName=t+"Provider";function o(s){const i=k.useContext(n);if(i)return i;if(e!==void 0)return e;throw new Error(`\`${s}\` must be used within \`${t}\``)}return[r,o]}function Jr(t,e=[]){let n=[];function r(s,i){const a=k.createContext(i),l=n.length;n=[...n,i];const c=d=>{var y;const{scope:f,children:h,...p}=d,m=((y=f==null?void 0:f[t])==null?void 0:y[l])||a,g=k.useMemo(()=>p,Object.values(p));return S.jsx(m.Provider,{value:g,children:h})};c.displayName=s+"Provider";function u(d,f){var m;const h=((m=f==null?void 0:f[t])==null?void 0:m[l])||a,p=k.useContext(h);if(p)return p;if(i!==void 0)return i;throw new Error(`\`${d}\` must be used within \`${s}\``)}return[c,u]}const o=()=>{const s=n.map(i=>k.createContext(i));return function(a){const l=(a==null?void 0:a[t])||s;return k.useMemo(()=>({[`__scope${t}`]:{...a,[t]:l}}),[a,l])}};return o.scopeName=t,[r,ote(o,...e)]}function ote(...t){const e=t[0];if(t.length===1)return e;const n=()=>{const r=t.map(o=>({useScope:o(),scopeName:o.scopeName}));return function(s){const i=r.reduce((a,{useScope:l,scopeName:c})=>{const d=l(s)[`__scope${c}`];return{...a,...d}},{});return k.useMemo(()=>({[`__scope${e.scopeName}`]:i}),[i])}};return n.scopeName=e.scopeName,n}function Ac(t){const e=ite(t),n=k.forwardRef((r,o)=>{const{children:s,...i}=r,a=k.Children.toArray(s),l=a.find(lte);if(l){const c=l.props.children,u=a.map(d=>d===l?k.Children.count(c)>1?k.Children.only(null):k.isValidElement(c)?c.props.children:null:d);return S.jsx(e,{...i,ref:o,children:k.isValidElement(c)?k.cloneElement(c,void 0,u):null})}return S.jsx(e,{...i,ref:o,children:s})});return n.displayName=`${t}.Slot`,n}var ste=Ac("Slot");function ite(t){const e=k.forwardRef((n,r)=>{const{children:o,...s}=n;if(k.isValidElement(o)){const i=ute(o),a=cte(s,o.props);return o.type!==k.Fragment&&(a.ref=r?A0(r,i):i),k.cloneElement(o,a)}return k.Children.count(o)>1?k.Children.only(null):null});return e.displayName=`${t}.SlotClone`,e}var h4=Symbol("radix.slottable");function ate(t){const e=({children:n})=>S.jsx(S.Fragment,{children:n});return e.displayName=`${t}.Slottable`,e.__radixId=h4,e}function lte(t){return k.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===h4}function cte(t,e){const n={...e};for(const r in e){const o=t[r],s=e[r];/^on[A-Z]/.test(r)?o&&s?n[r]=(...a)=>{s(...a),o(...a)}:o&&(n[r]=o):r==="style"?n[r]={...o,...s}:r==="className"&&(n[r]=[o,s].filter(Boolean).join(" "))}return{...t,...n}}function ute(t){var r,o;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(o=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:o.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}function Xm(t){const e=t+"CollectionProvider",[n,r]=Jr(e),[o,s]=n(e,{collectionRef:{current:null},itemMap:new Map}),i=m=>{const{scope:g,children:y}=m,v=z.useRef(null),x=z.useRef(new Map).current;return S.jsx(o,{scope:g,itemMap:x,collectionRef:v,children:y})};i.displayName=e;const a=t+"CollectionSlot",l=Ac(a),c=z.forwardRef((m,g)=>{const{scope:y,children:v}=m,x=s(a,y),b=Xe(g,x.collectionRef);return S.jsx(l,{ref:b,children:v})});c.displayName=a;const u=t+"CollectionItemSlot",d="data-radix-collection-item",f=Ac(u),h=z.forwardRef((m,g)=>{const{scope:y,children:v,...x}=m,b=z.useRef(null),w=Xe(g,b),C=s(u,y);return z.useEffect(()=>(C.itemMap.set(b,{ref:b,...x}),()=>void C.itemMap.delete(b))),S.jsx(f,{[d]:"",ref:w,children:v})});h.displayName=u;function p(m){const g=s(t+"CollectionConsumer",m);return z.useCallback(()=>{const v=g.collectionRef.current;if(!v)return[];const x=Array.from(v.querySelectorAll(`[${d}]`));return Array.from(g.itemMap.values()).sort((C,$)=>x.indexOf(C.ref.current)-x.indexOf($.ref.current))},[g.collectionRef,g.itemMap])}return[{Provider:i,Slot:c,ItemSlot:h},p,r]}var dte=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],Re=dte.reduce((t,e)=>{const n=Ac(`Primitive.${e}`),r=k.forwardRef((o,s)=>{const{asChild:i,...a}=o,l=i?n:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),S.jsx(l,{...a,ref:s})});return r.displayName=`Primitive.${e}`,{...t,[e]:r}},{});function VE(t,e){t&&tu.flushSync(()=>t.dispatchEvent(e))}function Kn(t){const e=k.useRef(t);return k.useEffect(()=>{e.current=t}),k.useMemo(()=>(...n)=>{var r;return(r=e.current)==null?void 0:r.call(e,...n)},[])}function fte(t,e=globalThis==null?void 0:globalThis.document){const n=Kn(t);k.useEffect(()=>{const r=o=>{o.key==="Escape"&&n(o)};return e.addEventListener("keydown",r,{capture:!0}),()=>e.removeEventListener("keydown",r,{capture:!0})},[n,e])}var hte="DismissableLayer",ik="dismissableLayer.update",pte="dismissableLayer.pointerDownOutside",mte="dismissableLayer.focusOutside",r_,p4=k.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),kf=k.forwardRef((t,e)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:r,onPointerDownOutside:o,onFocusOutside:s,onInteractOutside:i,onDismiss:a,...l}=t,c=k.useContext(p4),[u,d]=k.useState(null),f=(u==null?void 0:u.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,h]=k.useState({}),p=Xe(e,$=>d($)),m=Array.from(c.layers),[g]=[...c.layersWithOutsidePointerEventsDisabled].slice(-1),y=m.indexOf(g),v=u?m.indexOf(u):-1,x=c.layersWithOutsidePointerEventsDisabled.size>0,b=v>=y,w=yte($=>{const T=$.target,I=[...c.branches].some(E=>E.contains(T));!b||I||(o==null||o($),i==null||i($),$.defaultPrevented||a==null||a())},f),C=vte($=>{const T=$.target;[...c.branches].some(E=>E.contains(T))||(s==null||s($),i==null||i($),$.defaultPrevented||a==null||a())},f);return fte($=>{v===c.layers.size-1&&(r==null||r($),!$.defaultPrevented&&a&&($.preventDefault(),a()))},f),k.useEffect(()=>{if(u)return n&&(c.layersWithOutsidePointerEventsDisabled.size===0&&(r_=f.body.style.pointerEvents,f.body.style.pointerEvents="none"),c.layersWithOutsidePointerEventsDisabled.add(u)),c.layers.add(u),o_(),()=>{n&&c.layersWithOutsidePointerEventsDisabled.size===1&&(f.body.style.pointerEvents=r_)}},[u,f,n,c]),k.useEffect(()=>()=>{u&&(c.layers.delete(u),c.layersWithOutsidePointerEventsDisabled.delete(u),o_())},[u,c]),k.useEffect(()=>{const $=()=>h({});return document.addEventListener(ik,$),()=>document.removeEventListener(ik,$)},[]),S.jsx(Re.div,{...l,ref:p,style:{pointerEvents:x?b?"auto":"none":void 0,...t.style},onFocusCapture:me(t.onFocusCapture,C.onFocusCapture),onBlurCapture:me(t.onBlurCapture,C.onBlurCapture),onPointerDownCapture:me(t.onPointerDownCapture,w.onPointerDownCapture)})});kf.displayName=hte;var gte="DismissableLayerBranch",m4=k.forwardRef((t,e)=>{const n=k.useContext(p4),r=k.useRef(null),o=Xe(e,r);return k.useEffect(()=>{const s=r.current;if(s)return n.branches.add(s),()=>{n.branches.delete(s)}},[n.branches]),S.jsx(Re.div,{...t,ref:o})});m4.displayName=gte;function yte(t,e=globalThis==null?void 0:globalThis.document){const n=Kn(t),r=k.useRef(!1),o=k.useRef(()=>{});return k.useEffect(()=>{const s=a=>{if(a.target&&!r.current){let l=function(){g4(pte,n,c,{discrete:!0})};const c={originalEvent:a};a.pointerType==="touch"?(e.removeEventListener("click",o.current),o.current=l,e.addEventListener("click",o.current,{once:!0})):l()}else e.removeEventListener("click",o.current);r.current=!1},i=window.setTimeout(()=>{e.addEventListener("pointerdown",s)},0);return()=>{window.clearTimeout(i),e.removeEventListener("pointerdown",s),e.removeEventListener("click",o.current)}},[e,n]),{onPointerDownCapture:()=>r.current=!0}}function vte(t,e=globalThis==null?void 0:globalThis.document){const n=Kn(t),r=k.useRef(!1);return k.useEffect(()=>{const o=s=>{s.target&&!r.current&&g4(mte,n,{originalEvent:s},{discrete:!1})};return e.addEventListener("focusin",o),()=>e.removeEventListener("focusin",o)},[e,n]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function o_(){const t=new CustomEvent(ik);document.dispatchEvent(t)}function g4(t,e,n,{discrete:r}){const o=n.originalEvent.target,s=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:n});e&&o.addEventListener(t,e,{once:!0}),r?VE(o,s):o.dispatchEvent(s)}var xte=kf,bte=m4,Nn=globalThis!=null&&globalThis.document?k.useLayoutEffect:()=>{},wte="Portal",Ym=k.forwardRef((t,e)=>{var a;const{container:n,...r}=t,[o,s]=k.useState(!1);Nn(()=>s(!0),[]);const i=n||o&&((a=globalThis==null?void 0:globalThis.document)==null?void 0:a.body);return i?jJ.createPortal(S.jsx(Re.div,{...r,ref:e}),i):null});Ym.displayName=wte;function Ste(t,e){return k.useReducer((n,r)=>e[n][r]??n,t)}var Yo=t=>{const{present:e,children:n}=t,r=Cte(e),o=typeof n=="function"?n({present:r.isPresent}):k.Children.only(n),s=Xe(r.ref,$te(o));return typeof n=="function"||r.isPresent?k.cloneElement(o,{ref:s}):null};Yo.displayName="Presence";function Cte(t){const[e,n]=k.useState(),r=k.useRef({}),o=k.useRef(t),s=k.useRef("none"),i=t?"mounted":"unmounted",[a,l]=Ste(i,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return k.useEffect(()=>{const c=Qy(r.current);s.current=a==="mounted"?c:"none"},[a]),Nn(()=>{const c=r.current,u=o.current;if(u!==t){const f=s.current,h=Qy(c);t?l("MOUNT"):h==="none"||(c==null?void 0:c.display)==="none"?l("UNMOUNT"):l(u&&f!==h?"ANIMATION_OUT":"UNMOUNT"),o.current=t}},[t,l]),Nn(()=>{if(e){let c;const u=e.ownerDocument.defaultView??window,d=h=>{const m=Qy(r.current).includes(h.animationName);if(h.target===e&&m&&(l("ANIMATION_END"),!o.current)){const g=e.style.animationFillMode;e.style.animationFillMode="forwards",c=u.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=g)})}},f=h=>{h.target===e&&(s.current=Qy(r.current))};return e.addEventListener("animationstart",f),e.addEventListener("animationcancel",d),e.addEventListener("animationend",d),()=>{u.clearTimeout(c),e.removeEventListener("animationstart",f),e.removeEventListener("animationcancel",d),e.removeEventListener("animationend",d)}}else l("ANIMATION_END")},[e,l]),{isPresent:["mounted","unmountSuspended"].includes(a),ref:k.useCallback(c=>{c&&(r.current=getComputedStyle(c)),n(c)},[])}}function Qy(t){return(t==null?void 0:t.animationName)||"none"}function $te(t){var r,o;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(o=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:o.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}function qi({prop:t,defaultProp:e,onChange:n=()=>{}}){const[r,o]=kte({defaultProp:e,onChange:n}),s=t!==void 0,i=s?t:r,a=Kn(n),l=k.useCallback(c=>{if(s){const d=typeof c=="function"?c(t):c;d!==t&&a(d)}else o(c)},[s,t,o,a]);return[i,l]}function kte({defaultProp:t,onChange:e}){const n=k.useState(t),[r]=n,o=k.useRef(r),s=Kn(e);return k.useEffect(()=>{o.current!==r&&(s(r),o.current=r)},[r,o,s]),n}var Tte="VisuallyHidden",Qm=k.forwardRef((t,e)=>S.jsx(Re.span,{...t,ref:e,style:{position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal",...t.style}}));Qm.displayName=Tte;var Ite=Qm,UE="ToastProvider",[GE,Ete,Nte]=Xm("Toast"),[y4,_ot]=Jr("Toast",[Nte]),[Ate,O0]=y4(UE),v4=t=>{const{__scopeToast:e,label:n="Notification",duration:r=5e3,swipeDirection:o="right",swipeThreshold:s=50,children:i}=t,[a,l]=k.useState(null),[c,u]=k.useState(0),d=k.useRef(!1),f=k.useRef(!1);return n.trim()||console.error(`Invalid prop \`label\` supplied to \`${UE}\`. Expected non-empty \`string\`.`),S.jsx(GE.Provider,{scope:e,children:S.jsx(Ate,{scope:e,label:n,duration:r,swipeDirection:o,swipeThreshold:s,toastCount:c,viewport:a,onViewportChange:l,onToastAdd:k.useCallback(()=>u(h=>h+1),[]),onToastRemove:k.useCallback(()=>u(h=>h-1),[]),isFocusedToastEscapeKeyDownRef:d,isClosePausedRef:f,children:i})})};v4.displayName=UE;var x4="ToastViewport",Ote=["F8"],ak="toast.viewportPause",lk="toast.viewportResume",b4=k.forwardRef((t,e)=>{const{__scopeToast:n,hotkey:r=Ote,label:o="Notifications ({hotkey})",...s}=t,i=O0(x4,n),a=Ete(n),l=k.useRef(null),c=k.useRef(null),u=k.useRef(null),d=k.useRef(null),f=Xe(e,d,i.onViewportChange),h=r.join("+").replace(/Key/g,"").replace(/Digit/g,""),p=i.toastCount>0;k.useEffect(()=>{const g=y=>{var x;r.length!==0&&r.every(b=>y[b]||y.code===b)&&((x=d.current)==null||x.focus())};return document.addEventListener("keydown",g),()=>document.removeEventListener("keydown",g)},[r]),k.useEffect(()=>{const g=l.current,y=d.current;if(p&&g&&y){const v=()=>{if(!i.isClosePausedRef.current){const C=new CustomEvent(ak);y.dispatchEvent(C),i.isClosePausedRef.current=!0}},x=()=>{if(i.isClosePausedRef.current){const C=new CustomEvent(lk);y.dispatchEvent(C),i.isClosePausedRef.current=!1}},b=C=>{!g.contains(C.relatedTarget)&&x()},w=()=>{g.contains(document.activeElement)||x()};return g.addEventListener("focusin",v),g.addEventListener("focusout",b),g.addEventListener("pointermove",v),g.addEventListener("pointerleave",w),window.addEventListener("blur",v),window.addEventListener("focus",x),()=>{g.removeEventListener("focusin",v),g.removeEventListener("focusout",b),g.removeEventListener("pointermove",v),g.removeEventListener("pointerleave",w),window.removeEventListener("blur",v),window.removeEventListener("focus",x)}}},[p,i.isClosePausedRef]);const m=k.useCallback(({tabbingDirection:g})=>{const v=a().map(x=>{const b=x.ref.current,w=[b,...Ute(b)];return g==="forwards"?w:w.reverse()});return(g==="forwards"?v.reverse():v).flat()},[a]);return k.useEffect(()=>{const g=d.current;if(g){const y=v=>{var w,C,$;const x=v.altKey||v.ctrlKey||v.metaKey;if(v.key==="Tab"&&!x){const T=document.activeElement,I=v.shiftKey;if(v.target===g&&I){(w=c.current)==null||w.focus();return}const A=m({tabbingDirection:I?"backwards":"forwards"}),R=A.findIndex(P=>P===T);qS(A.slice(R+1))?v.preventDefault():I?(C=c.current)==null||C.focus():($=u.current)==null||$.focus()}};return g.addEventListener("keydown",y),()=>g.removeEventListener("keydown",y)}},[a,m]),S.jsxs(bte,{ref:l,role:"region","aria-label":o.replace("{hotkey}",h),tabIndex:-1,style:{pointerEvents:p?void 0:"none"},children:[p&&S.jsx(ck,{ref:c,onFocusFromOutsideViewport:()=>{const g=m({tabbingDirection:"forwards"});qS(g)}}),S.jsx(GE.Slot,{scope:n,children:S.jsx(Re.ol,{tabIndex:-1,...s,ref:f})}),p&&S.jsx(ck,{ref:u,onFocusFromOutsideViewport:()=>{const g=m({tabbingDirection:"backwards"});qS(g)}})]})});b4.displayName=x4;var w4="ToastFocusProxy",ck=k.forwardRef((t,e)=>{const{__scopeToast:n,onFocusFromOutsideViewport:r,...o}=t,s=O0(w4,n);return S.jsx(Qm,{"aria-hidden":!0,tabIndex:0,...o,ref:e,style:{position:"fixed"},onFocus:i=>{var c;const a=i.relatedTarget;!((c=s.viewport)!=null&&c.contains(a))&&r()}})});ck.displayName=w4;var P0="Toast",Pte="toast.swipeStart",Rte="toast.swipeMove",_te="toast.swipeCancel",Dte="toast.swipeEnd",S4=k.forwardRef((t,e)=>{const{forceMount:n,open:r,defaultOpen:o,onOpenChange:s,...i}=t,[a=!0,l]=qi({prop:r,defaultProp:o,onChange:s});return S.jsx(Yo,{present:n||a,children:S.jsx(Lte,{open:a,...i,ref:e,onClose:()=>l(!1),onPause:Kn(t.onPause),onResume:Kn(t.onResume),onSwipeStart:me(t.onSwipeStart,c=>{c.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:me(t.onSwipeMove,c=>{const{x:u,y:d}=c.detail.delta;c.currentTarget.setAttribute("data-swipe","move"),c.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${u}px`),c.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${d}px`)}),onSwipeCancel:me(t.onSwipeCancel,c=>{c.currentTarget.setAttribute("data-swipe","cancel"),c.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),c.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),c.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),c.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:me(t.onSwipeEnd,c=>{const{x:u,y:d}=c.detail.delta;c.currentTarget.setAttribute("data-swipe","end"),c.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),c.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),c.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${u}px`),c.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${d}px`),l(!1)})})})});S4.displayName=P0;var[Mte,Fte]=y4(P0,{onClose(){}}),Lte=k.forwardRef((t,e)=>{const{__scopeToast:n,type:r="foreground",duration:o,open:s,onClose:i,onEscapeKeyDown:a,onPause:l,onResume:c,onSwipeStart:u,onSwipeMove:d,onSwipeCancel:f,onSwipeEnd:h,...p}=t,m=O0(P0,n),[g,y]=k.useState(null),v=Xe(e,P=>y(P)),x=k.useRef(null),b=k.useRef(null),w=o||m.duration,C=k.useRef(0),$=k.useRef(w),T=k.useRef(0),{onToastAdd:I,onToastRemove:E}=m,N=Kn(()=>{var F;(g==null?void 0:g.contains(document.activeElement))&&((F=m.viewport)==null||F.focus()),i()}),A=k.useCallback(P=>{!P||P===1/0||(window.clearTimeout(T.current),C.current=new Date().getTime(),T.current=window.setTimeout(N,P))},[N]);k.useEffect(()=>{const P=m.viewport;if(P){const F=()=>{A($.current),c==null||c()},_=()=>{const L=new Date().getTime()-C.current;$.current=$.current-L,window.clearTimeout(T.current),l==null||l()};return P.addEventListener(ak,_),P.addEventListener(lk,F),()=>{P.removeEventListener(ak,_),P.removeEventListener(lk,F)}}},[m.viewport,w,l,c,A]),k.useEffect(()=>{s&&!m.isClosePausedRef.current&&A(w)},[s,w,m.isClosePausedRef,A]),k.useEffect(()=>(I(),()=>E()),[I,E]);const R=k.useMemo(()=>g?N4(g):null,[g]);return m.viewport?S.jsxs(S.Fragment,{children:[R&&S.jsx(jte,{__scopeToast:n,role:"status","aria-live":r==="foreground"?"assertive":"polite","aria-atomic":!0,children:R}),S.jsx(Mte,{scope:n,onClose:N,children:tu.createPortal(S.jsx(GE.ItemSlot,{scope:n,children:S.jsx(xte,{asChild:!0,onEscapeKeyDown:me(a,()=>{m.isFocusedToastEscapeKeyDownRef.current||N(),m.isFocusedToastEscapeKeyDownRef.current=!1}),children:S.jsx(Re.li,{role:"status","aria-live":"off","aria-atomic":!0,tabIndex:0,"data-state":s?"open":"closed","data-swipe-direction":m.swipeDirection,...p,ref:v,style:{userSelect:"none",touchAction:"none",...t.style},onKeyDown:me(t.onKeyDown,P=>{P.key==="Escape"&&(a==null||a(P.nativeEvent),P.nativeEvent.defaultPrevented||(m.isFocusedToastEscapeKeyDownRef.current=!0,N()))}),onPointerDown:me(t.onPointerDown,P=>{P.button===0&&(x.current={x:P.clientX,y:P.clientY})}),onPointerMove:me(t.onPointerMove,P=>{if(!x.current)return;const F=P.clientX-x.current.x,_=P.clientY-x.current.y,L=!!b.current,O=["left","right"].includes(m.swipeDirection),D=["left","up"].includes(m.swipeDirection)?Math.min:Math.max,B=O?D(0,F):0,V=O?0:D(0,_),G=P.pointerType==="touch"?10:2,Q={x:B,y:V},re={originalEvent:P,delta:Q};L?(b.current=Q,Zy(Rte,d,re,{discrete:!1})):s_(Q,m.swipeDirection,G)?(b.current=Q,Zy(Pte,u,re,{discrete:!1}),P.target.setPointerCapture(P.pointerId)):(Math.abs(F)>G||Math.abs(_)>G)&&(x.current=null)}),onPointerUp:me(t.onPointerUp,P=>{const F=b.current,_=P.target;if(_.hasPointerCapture(P.pointerId)&&_.releasePointerCapture(P.pointerId),b.current=null,x.current=null,F){const L=P.currentTarget,O={originalEvent:P,delta:F};s_(F,m.swipeDirection,m.swipeThreshold)?Zy(Dte,h,O,{discrete:!0}):Zy(_te,f,O,{discrete:!0}),L.addEventListener("click",D=>D.preventDefault(),{once:!0})}})})})}),m.viewport)})]}):null}),jte=t=>{const{__scopeToast:e,children:n,...r}=t,o=O0(P0,e),[s,i]=k.useState(!1),[a,l]=k.useState(!1);return Wte(()=>i(!0)),k.useEffect(()=>{const c=window.setTimeout(()=>l(!0),1e3);return()=>window.clearTimeout(c)},[]),a?null:S.jsx(Ym,{asChild:!0,children:S.jsx(Qm,{...r,children:s&&S.jsxs(S.Fragment,{children:[o.label," ",n]})})})},Bte="ToastTitle",C4=k.forwardRef((t,e)=>{const{__scopeToast:n,...r}=t;return S.jsx(Re.div,{...r,ref:e})});C4.displayName=Bte;var zte="ToastDescription",$4=k.forwardRef((t,e)=>{const{__scopeToast:n,...r}=t;return S.jsx(Re.div,{...r,ref:e})});$4.displayName=zte;var k4="ToastAction",T4=k.forwardRef((t,e)=>{const{altText:n,...r}=t;return n.trim()?S.jsx(E4,{altText:n,asChild:!0,children:S.jsx(HE,{...r,ref:e})}):(console.error(`Invalid prop \`altText\` supplied to \`${k4}\`. Expected non-empty \`string\`.`),null)});T4.displayName=k4;var I4="ToastClose",HE=k.forwardRef((t,e)=>{const{__scopeToast:n,...r}=t,o=Fte(I4,n);return S.jsx(E4,{asChild:!0,children:S.jsx(Re.button,{type:"button",...r,ref:e,onClick:me(t.onClick,o.onClose)})})});HE.displayName=I4;var E4=k.forwardRef((t,e)=>{const{__scopeToast:n,altText:r,...o}=t;return S.jsx(Re.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":r||void 0,...o,ref:e})});function N4(t){const e=[];return Array.from(t.childNodes).forEach(r=>{if(r.nodeType===r.TEXT_NODE&&r.textContent&&e.push(r.textContent),Vte(r)){const o=r.ariaHidden||r.hidden||r.style.display==="none",s=r.dataset.radixToastAnnounceExclude==="";if(!o)if(s){const i=r.dataset.radixToastAnnounceAlt;i&&e.push(i)}else e.push(...N4(r))}}),e}function Zy(t,e,n,{discrete:r}){const o=n.originalEvent.currentTarget,s=new CustomEvent(t,{bubbles:!0,cancelable:!0,detail:n});e&&o.addEventListener(t,e,{once:!0}),r?VE(o,s):o.dispatchEvent(s)}var s_=(t,e,n=0)=>{const r=Math.abs(t.x),o=Math.abs(t.y),s=r>o;return e==="left"||e==="right"?s&&r>n:!s&&o>n};function Wte(t=()=>{}){const e=Kn(t);Nn(()=>{let n=0,r=0;return n=window.requestAnimationFrame(()=>r=window.requestAnimationFrame(e)),()=>{window.cancelAnimationFrame(n),window.cancelAnimationFrame(r)}},[e])}function Vte(t){return t.nodeType===t.ELEMENT_NODE}function Ute(t){const e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const o=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||o?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)e.push(n.currentNode);return e}function qS(t){const e=document.activeElement;return t.some(n=>n===e?!0:(n.focus(),document.activeElement!==e))}var Gte=v4,A4=b4,O4=S4,P4=C4,R4=$4,_4=T4,D4=HE;function M4(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var o=t.length;for(e=0;e<o;e++)t[e]&&(n=M4(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function st(){for(var t,e,n=0,r="",o=arguments.length;n<o;n++)(t=arguments[n])&&(e=M4(t))&&(r&&(r+=" "),r+=e);return r}const i_=t=>typeof t=="boolean"?`${t}`:t===0?"0":t,a_=st,KE=(t,e)=>n=>{var r;if((e==null?void 0:e.variants)==null)return a_(t,n==null?void 0:n.class,n==null?void 0:n.className);const{variants:o,defaultVariants:s}=e,i=Object.keys(o).map(c=>{const u=n==null?void 0:n[c],d=s==null?void 0:s[c];if(u===null)return null;const f=i_(u)||i_(d);return o[c][f]}),a=n&&Object.entries(n).reduce((c,u)=>{let[d,f]=u;return f===void 0||(c[d]=f),c},{}),l=e==null||(r=e.compoundVariants)===null||r===void 0?void 0:r.reduce((c,u)=>{let{class:d,className:f,...h}=u;return Object.entries(h).every(p=>{let[m,g]=p;return Array.isArray(g)?g.includes({...s,...a}[m]):{...s,...a}[m]===g})?[...c,d,f]:c},[]);return a_(t,i,l,n==null?void 0:n.class,n==null?void 0:n.className)};/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hte=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),F4=(...t)=>t.filter((e,n,r)=>!!e&&r.indexOf(e)===n).join(" ");/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var Kte={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qte=k.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:o="",children:s,iconNode:i,...a},l)=>k.createElement("svg",{ref:l,...Kte,width:e,height:e,stroke:t,strokeWidth:r?Number(n)*24/Number(e):n,className:F4("lucide",o),...a},[...i.map(([c,u])=>k.createElement(c,u)),...Array.isArray(s)?s:[s]]));/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bn=(t,e)=>{const n=k.forwardRef(({className:r,...o},s)=>k.createElement(qte,{ref:s,iconNode:e,className:F4(`lucide-${Hte(t)}`,r),...o}));return n.displayName=`${t}`,n};/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xte=bn("Cable",[["path",{d:"M17 21v-2a1 1 0 0 1-1-1v-1a2 2 0 0 1 2-2h2a2 2 0 0 1 2 2v1a1 1 0 0 1-1 1",key:"10bnsj"}],["path",{d:"M19 15V6.5a1 1 0 0 0-7 0v11a1 1 0 0 1-7 0V9",key:"1eqmu1"}],["path",{d:"M21 21v-2h-4",key:"14zm7j"}],["path",{d:"M3 5h4V3",key:"z442eg"}],["path",{d:"M7 5a1 1 0 0 1 1 1v1a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V6a1 1 0 0 1 1-1V3",key:"ebdjd7"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qE=bn("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L4=bn("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yte=bn("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qte=bn("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zte=bn("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jte=bn("CirclePlay",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polygon",{points:"10 8 16 12 10 16 10 8",key:"1cimsy"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j4=bn("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ene=bn("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tne=bn("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nne=bn("Facebook",[["path",{d:"M18 2h-3a5 5 0 0 0-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 0 1 1-1h3z",key:"1jg4f8"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rne=bn("Github",[["path",{d:"M15 22v-4a4.8 4.8 0 0 0-1-3.5c3 0 6-2 6-5.5.08-1.25-.27-2.48-1-3.5.28-1.15.28-2.35 0-3.5 0 0-1 0-3 1.5-2.64-.5-5.36-.5-8 0C6 2 5 2 5 2c-.3 1.15-.3 2.35 0 3.5A5.403 5.403 0 0 0 4 9c0 3.5 3 5.5 6 5.5-.39.49-.68 1.05-.85 1.65-.17.6-.22 1.23-.15 1.85v4",key:"tonef"}],["path",{d:"M9 18c-4.51 2-5-2-7-2",key:"9comsn"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const one=bn("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cx=bn("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sne=bn("Maximize",[["path",{d:"M8 3H5a2 2 0 0 0-2 2v3",key:"1dcmit"}],["path",{d:"M21 8V5a2 2 0 0 0-2-2h-3",key:"1e4gt3"}],["path",{d:"M3 16v3a2 2 0 0 0 2 2h3",key:"wsl5sc"}],["path",{d:"M16 21h3a2 2 0 0 0 2-2v-3",key:"18trek"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ine=bn("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uk=bn("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ane=bn("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B4=bn("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XE=bn("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),YE="-",lne=t=>{const e=une(t),{conflictingClassGroups:n,conflictingClassGroupModifiers:r}=t;return{getClassGroupId:i=>{const a=i.split(YE);return a[0]===""&&a.length!==1&&a.shift(),z4(a,e)||cne(i)},getConflictingClassGroupIds:(i,a)=>{const l=n[i]||[];return a&&r[i]?[...l,...r[i]]:l}}},z4=(t,e)=>{var i;if(t.length===0)return e.classGroupId;const n=t[0],r=e.nextPart.get(n),o=r?z4(t.slice(1),r):void 0;if(o)return o;if(e.validators.length===0)return;const s=t.join(YE);return(i=e.validators.find(({validator:a})=>a(s)))==null?void 0:i.classGroupId},l_=/^\[(.+)\]$/,cne=t=>{if(l_.test(t)){const e=l_.exec(t)[1],n=e==null?void 0:e.substring(0,e.indexOf(":"));if(n)return"arbitrary.."+n}},une=t=>{const{theme:e,prefix:n}=t,r={nextPart:new Map,validators:[]};return fne(Object.entries(t.classGroups),n).forEach(([s,i])=>{dk(i,r,s,e)}),r},dk=(t,e,n,r)=>{t.forEach(o=>{if(typeof o=="string"){const s=o===""?e:c_(e,o);s.classGroupId=n;return}if(typeof o=="function"){if(dne(o)){dk(o(r),e,n,r);return}e.validators.push({validator:o,classGroupId:n});return}Object.entries(o).forEach(([s,i])=>{dk(i,c_(e,s),n,r)})})},c_=(t,e)=>{let n=t;return e.split(YE).forEach(r=>{n.nextPart.has(r)||n.nextPart.set(r,{nextPart:new Map,validators:[]}),n=n.nextPart.get(r)}),n},dne=t=>t.isThemeGetter,fne=(t,e)=>e?t.map(([n,r])=>{const o=r.map(s=>typeof s=="string"?e+s:typeof s=="object"?Object.fromEntries(Object.entries(s).map(([i,a])=>[e+i,a])):s);return[n,o]}):t,hne=t=>{if(t<1)return{get:()=>{},set:()=>{}};let e=0,n=new Map,r=new Map;const o=(s,i)=>{n.set(s,i),e++,e>t&&(e=0,r=n,n=new Map)};return{get(s){let i=n.get(s);if(i!==void 0)return i;if((i=r.get(s))!==void 0)return o(s,i),i},set(s,i){n.has(s)?n.set(s,i):o(s,i)}}},W4="!",pne=t=>{const{separator:e,experimentalParseClassName:n}=t,r=e.length===1,o=e[0],s=e.length,i=a=>{const l=[];let c=0,u=0,d;for(let g=0;g<a.length;g++){let y=a[g];if(c===0){if(y===o&&(r||a.slice(g,g+s)===e)){l.push(a.slice(u,g)),u=g+s;continue}if(y==="/"){d=g;continue}}y==="["?c++:y==="]"&&c--}const f=l.length===0?a:a.substring(u),h=f.startsWith(W4),p=h?f.substring(1):f,m=d&&d>u?d-u:void 0;return{modifiers:l,hasImportantModifier:h,baseClassName:p,maybePostfixModifierPosition:m}};return n?a=>n({className:a,parseClassName:i}):i},mne=t=>{if(t.length<=1)return t;const e=[];let n=[];return t.forEach(r=>{r[0]==="["?(e.push(...n.sort(),r),n=[]):n.push(r)}),e.push(...n.sort()),e},gne=t=>({cache:hne(t.cacheSize),parseClassName:pne(t),...lne(t)}),yne=/\s+/,vne=(t,e)=>{const{parseClassName:n,getClassGroupId:r,getConflictingClassGroupIds:o}=e,s=[],i=t.trim().split(yne);let a="";for(let l=i.length-1;l>=0;l-=1){const c=i[l],{modifiers:u,hasImportantModifier:d,baseClassName:f,maybePostfixModifierPosition:h}=n(c);let p=!!h,m=r(p?f.substring(0,h):f);if(!m){if(!p){a=c+(a.length>0?" "+a:a);continue}if(m=r(f),!m){a=c+(a.length>0?" "+a:a);continue}p=!1}const g=mne(u).join(":"),y=d?g+W4:g,v=y+m;if(s.includes(v))continue;s.push(v);const x=o(m,p);for(let b=0;b<x.length;++b){const w=x[b];s.push(y+w)}a=c+(a.length>0?" "+a:a)}return a};function xne(){let t=0,e,n,r="";for(;t<arguments.length;)(e=arguments[t++])&&(n=V4(e))&&(r&&(r+=" "),r+=n);return r}const V4=t=>{if(typeof t=="string")return t;let e,n="";for(let r=0;r<t.length;r++)t[r]&&(e=V4(t[r]))&&(n&&(n+=" "),n+=e);return n};function bne(t,...e){let n,r,o,s=i;function i(l){const c=e.reduce((u,d)=>d(u),t());return n=gne(c),r=n.cache.get,o=n.cache.set,s=a,a(l)}function a(l){const c=r(l);if(c)return c;const u=vne(l,n);return o(l,u),u}return function(){return s(xne.apply(null,arguments))}}const Ot=t=>{const e=n=>n[t]||[];return e.isThemeGetter=!0,e},U4=/^\[(?:([a-z-]+):)?(.+)\]$/i,wne=/^\d+\/\d+$/,Sne=new Set(["px","full","screen"]),Cne=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,$ne=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,kne=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,Tne=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,Ine=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Si=t=>od(t)||Sne.has(t)||wne.test(t),ya=t=>Tf(t,"length",Dne),od=t=>!!t&&!Number.isNaN(Number(t)),XS=t=>Tf(t,"number",od),yh=t=>!!t&&Number.isInteger(Number(t)),Ene=t=>t.endsWith("%")&&od(t.slice(0,-1)),Ve=t=>U4.test(t),va=t=>Cne.test(t),Nne=new Set(["length","size","percentage"]),Ane=t=>Tf(t,Nne,G4),One=t=>Tf(t,"position",G4),Pne=new Set(["image","url"]),Rne=t=>Tf(t,Pne,Fne),_ne=t=>Tf(t,"",Mne),vh=()=>!0,Tf=(t,e,n)=>{const r=U4.exec(t);return r?r[1]?typeof e=="string"?r[1]===e:e.has(r[1]):n(r[2]):!1},Dne=t=>$ne.test(t)&&!kne.test(t),G4=()=>!1,Mne=t=>Tne.test(t),Fne=t=>Ine.test(t),Lne=()=>{const t=Ot("colors"),e=Ot("spacing"),n=Ot("blur"),r=Ot("brightness"),o=Ot("borderColor"),s=Ot("borderRadius"),i=Ot("borderSpacing"),a=Ot("borderWidth"),l=Ot("contrast"),c=Ot("grayscale"),u=Ot("hueRotate"),d=Ot("invert"),f=Ot("gap"),h=Ot("gradientColorStops"),p=Ot("gradientColorStopPositions"),m=Ot("inset"),g=Ot("margin"),y=Ot("opacity"),v=Ot("padding"),x=Ot("saturate"),b=Ot("scale"),w=Ot("sepia"),C=Ot("skew"),$=Ot("space"),T=Ot("translate"),I=()=>["auto","contain","none"],E=()=>["auto","hidden","clip","visible","scroll"],N=()=>["auto",Ve,e],A=()=>[Ve,e],R=()=>["",Si,ya],P=()=>["auto",od,Ve],F=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],_=()=>["solid","dashed","dotted","double","none"],L=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],O=()=>["start","end","center","between","around","evenly","stretch"],D=()=>["","0",Ve],B=()=>["auto","avoid","all","avoid-page","page","left","right","column"],V=()=>[od,Ve];return{cacheSize:500,separator:":",theme:{colors:[vh],spacing:[Si,ya],blur:["none","",va,Ve],brightness:V(),borderColor:[t],borderRadius:["none","","full",va,Ve],borderSpacing:A(),borderWidth:R(),contrast:V(),grayscale:D(),hueRotate:V(),invert:D(),gap:A(),gradientColorStops:[t],gradientColorStopPositions:[Ene,ya],inset:N(),margin:N(),opacity:V(),padding:A(),saturate:V(),scale:V(),sepia:D(),skew:V(),space:A(),translate:A()},classGroups:{aspect:[{aspect:["auto","square","video",Ve]}],container:["container"],columns:[{columns:[va]}],"break-after":[{"break-after":B()}],"break-before":[{"break-before":B()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...F(),Ve]}],overflow:[{overflow:E()}],"overflow-x":[{"overflow-x":E()}],"overflow-y":[{"overflow-y":E()}],overscroll:[{overscroll:I()}],"overscroll-x":[{"overscroll-x":I()}],"overscroll-y":[{"overscroll-y":I()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[m]}],"inset-x":[{"inset-x":[m]}],"inset-y":[{"inset-y":[m]}],start:[{start:[m]}],end:[{end:[m]}],top:[{top:[m]}],right:[{right:[m]}],bottom:[{bottom:[m]}],left:[{left:[m]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",yh,Ve]}],basis:[{basis:N()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",Ve]}],grow:[{grow:D()}],shrink:[{shrink:D()}],order:[{order:["first","last","none",yh,Ve]}],"grid-cols":[{"grid-cols":[vh]}],"col-start-end":[{col:["auto",{span:["full",yh,Ve]},Ve]}],"col-start":[{"col-start":P()}],"col-end":[{"col-end":P()}],"grid-rows":[{"grid-rows":[vh]}],"row-start-end":[{row:["auto",{span:[yh,Ve]},Ve]}],"row-start":[{"row-start":P()}],"row-end":[{"row-end":P()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",Ve]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",Ve]}],gap:[{gap:[f]}],"gap-x":[{"gap-x":[f]}],"gap-y":[{"gap-y":[f]}],"justify-content":[{justify:["normal",...O()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...O(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...O(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[v]}],px:[{px:[v]}],py:[{py:[v]}],ps:[{ps:[v]}],pe:[{pe:[v]}],pt:[{pt:[v]}],pr:[{pr:[v]}],pb:[{pb:[v]}],pl:[{pl:[v]}],m:[{m:[g]}],mx:[{mx:[g]}],my:[{my:[g]}],ms:[{ms:[g]}],me:[{me:[g]}],mt:[{mt:[g]}],mr:[{mr:[g]}],mb:[{mb:[g]}],ml:[{ml:[g]}],"space-x":[{"space-x":[$]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[$]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",Ve,e]}],"min-w":[{"min-w":[Ve,e,"min","max","fit"]}],"max-w":[{"max-w":[Ve,e,"none","full","min","max","fit","prose",{screen:[va]},va]}],h:[{h:[Ve,e,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[Ve,e,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[Ve,e,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[Ve,e,"auto","min","max","fit"]}],"font-size":[{text:["base",va,ya]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",XS]}],"font-family":[{font:[vh]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",Ve]}],"line-clamp":[{"line-clamp":["none",od,XS]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",Si,Ve]}],"list-image":[{"list-image":["none",Ve]}],"list-style-type":[{list:["none","disc","decimal",Ve]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[t]}],"placeholder-opacity":[{"placeholder-opacity":[y]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[t]}],"text-opacity":[{"text-opacity":[y]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[..._(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",Si,ya]}],"underline-offset":[{"underline-offset":["auto",Si,Ve]}],"text-decoration-color":[{decoration:[t]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:A()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",Ve]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",Ve]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[y]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...F(),One]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",Ane]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},Rne]}],"bg-color":[{bg:[t]}],"gradient-from-pos":[{from:[p]}],"gradient-via-pos":[{via:[p]}],"gradient-to-pos":[{to:[p]}],"gradient-from":[{from:[h]}],"gradient-via":[{via:[h]}],"gradient-to":[{to:[h]}],rounded:[{rounded:[s]}],"rounded-s":[{"rounded-s":[s]}],"rounded-e":[{"rounded-e":[s]}],"rounded-t":[{"rounded-t":[s]}],"rounded-r":[{"rounded-r":[s]}],"rounded-b":[{"rounded-b":[s]}],"rounded-l":[{"rounded-l":[s]}],"rounded-ss":[{"rounded-ss":[s]}],"rounded-se":[{"rounded-se":[s]}],"rounded-ee":[{"rounded-ee":[s]}],"rounded-es":[{"rounded-es":[s]}],"rounded-tl":[{"rounded-tl":[s]}],"rounded-tr":[{"rounded-tr":[s]}],"rounded-br":[{"rounded-br":[s]}],"rounded-bl":[{"rounded-bl":[s]}],"border-w":[{border:[a]}],"border-w-x":[{"border-x":[a]}],"border-w-y":[{"border-y":[a]}],"border-w-s":[{"border-s":[a]}],"border-w-e":[{"border-e":[a]}],"border-w-t":[{"border-t":[a]}],"border-w-r":[{"border-r":[a]}],"border-w-b":[{"border-b":[a]}],"border-w-l":[{"border-l":[a]}],"border-opacity":[{"border-opacity":[y]}],"border-style":[{border:[..._(),"hidden"]}],"divide-x":[{"divide-x":[a]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[a]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[y]}],"divide-style":[{divide:_()}],"border-color":[{border:[o]}],"border-color-x":[{"border-x":[o]}],"border-color-y":[{"border-y":[o]}],"border-color-s":[{"border-s":[o]}],"border-color-e":[{"border-e":[o]}],"border-color-t":[{"border-t":[o]}],"border-color-r":[{"border-r":[o]}],"border-color-b":[{"border-b":[o]}],"border-color-l":[{"border-l":[o]}],"divide-color":[{divide:[o]}],"outline-style":[{outline:["",..._()]}],"outline-offset":[{"outline-offset":[Si,Ve]}],"outline-w":[{outline:[Si,ya]}],"outline-color":[{outline:[t]}],"ring-w":[{ring:R()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[t]}],"ring-opacity":[{"ring-opacity":[y]}],"ring-offset-w":[{"ring-offset":[Si,ya]}],"ring-offset-color":[{"ring-offset":[t]}],shadow:[{shadow:["","inner","none",va,_ne]}],"shadow-color":[{shadow:[vh]}],opacity:[{opacity:[y]}],"mix-blend":[{"mix-blend":[...L(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":L()}],filter:[{filter:["","none"]}],blur:[{blur:[n]}],brightness:[{brightness:[r]}],contrast:[{contrast:[l]}],"drop-shadow":[{"drop-shadow":["","none",va,Ve]}],grayscale:[{grayscale:[c]}],"hue-rotate":[{"hue-rotate":[u]}],invert:[{invert:[d]}],saturate:[{saturate:[x]}],sepia:[{sepia:[w]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[n]}],"backdrop-brightness":[{"backdrop-brightness":[r]}],"backdrop-contrast":[{"backdrop-contrast":[l]}],"backdrop-grayscale":[{"backdrop-grayscale":[c]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[u]}],"backdrop-invert":[{"backdrop-invert":[d]}],"backdrop-opacity":[{"backdrop-opacity":[y]}],"backdrop-saturate":[{"backdrop-saturate":[x]}],"backdrop-sepia":[{"backdrop-sepia":[w]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[i]}],"border-spacing-x":[{"border-spacing-x":[i]}],"border-spacing-y":[{"border-spacing-y":[i]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",Ve]}],duration:[{duration:V()}],ease:[{ease:["linear","in","out","in-out",Ve]}],delay:[{delay:V()}],animate:[{animate:["none","spin","ping","pulse","bounce",Ve]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[b]}],"scale-x":[{"scale-x":[b]}],"scale-y":[{"scale-y":[b]}],rotate:[{rotate:[yh,Ve]}],"translate-x":[{"translate-x":[T]}],"translate-y":[{"translate-y":[T]}],"skew-x":[{"skew-x":[C]}],"skew-y":[{"skew-y":[C]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",Ve]}],accent:[{accent:["auto",t]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",Ve]}],"caret-color":[{caret:[t]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":A()}],"scroll-mx":[{"scroll-mx":A()}],"scroll-my":[{"scroll-my":A()}],"scroll-ms":[{"scroll-ms":A()}],"scroll-me":[{"scroll-me":A()}],"scroll-mt":[{"scroll-mt":A()}],"scroll-mr":[{"scroll-mr":A()}],"scroll-mb":[{"scroll-mb":A()}],"scroll-ml":[{"scroll-ml":A()}],"scroll-p":[{"scroll-p":A()}],"scroll-px":[{"scroll-px":A()}],"scroll-py":[{"scroll-py":A()}],"scroll-ps":[{"scroll-ps":A()}],"scroll-pe":[{"scroll-pe":A()}],"scroll-pt":[{"scroll-pt":A()}],"scroll-pr":[{"scroll-pr":A()}],"scroll-pb":[{"scroll-pb":A()}],"scroll-pl":[{"scroll-pl":A()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",Ve]}],fill:[{fill:[t,"none"]}],"stroke-w":[{stroke:[Si,ya,XS]}],stroke:[{stroke:[t,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},jne=bne(Lne);function Le(...t){return jne(st(t))}const Bne=Gte,H4=k.forwardRef(({className:t,...e},n)=>S.jsx(A4,{ref:n,className:Le("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",t),...e}));H4.displayName=A4.displayName;const zne=KE("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),K4=k.forwardRef(({className:t,variant:e,...n},r)=>S.jsx(O4,{ref:r,className:Le(zne({variant:e}),t),...n}));K4.displayName=O4.displayName;const Wne=k.forwardRef(({className:t,...e},n)=>S.jsx(_4,{ref:n,className:Le("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",t),...e}));Wne.displayName=_4.displayName;const q4=k.forwardRef(({className:t,...e},n)=>S.jsx(D4,{ref:n,className:Le("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",t),"toast-close":"",...e,children:S.jsx(XE,{className:"h-4 w-4"})}));q4.displayName=D4.displayName;const X4=k.forwardRef(({className:t,...e},n)=>S.jsx(P4,{ref:n,className:Le("text-sm font-semibold",t),...e}));X4.displayName=P4.displayName;const Y4=k.forwardRef(({className:t,...e},n)=>S.jsx(R4,{ref:n,className:Le("text-sm opacity-90",t),...e}));Y4.displayName=R4.displayName;function Vne(){const{toasts:t}=N0();return S.jsxs(Bne,{children:[t.map(function({id:e,title:n,description:r,action:o,...s}){return S.jsxs(K4,{...s,children:[S.jsxs("div",{className:"grid gap-1",children:[n&&S.jsx(X4,{children:n}),r&&S.jsx(Y4,{children:r})]}),o,S.jsx(q4,{})]},e)}),S.jsx(H4,{})]})}var Une=j3[" useId ".trim().toString()]||(()=>{}),Gne=0;function Fi(t){const[e,n]=k.useState(Une());return Nn(()=>{n(r=>r??String(Gne++))},[t]),e?`radix-${e}`:""}const Hne=["top","right","bottom","left"],ll=Math.min,io=Math.max,$x=Math.round,Jy=Math.floor,oi=t=>({x:t,y:t}),Kne={left:"right",right:"left",bottom:"top",top:"bottom"},qne={start:"end",end:"start"};function fk(t,e,n){return io(t,ll(e,n))}function Xi(t,e){return typeof t=="function"?t(e):t}function Yi(t){return t.split("-")[0]}function If(t){return t.split("-")[1]}function QE(t){return t==="x"?"y":"x"}function ZE(t){return t==="y"?"height":"width"}function cl(t){return["top","bottom"].includes(Yi(t))?"y":"x"}function JE(t){return QE(cl(t))}function Xne(t,e,n){n===void 0&&(n=!1);const r=If(t),o=JE(t),s=ZE(o);let i=o==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return e.reference[s]>e.floating[s]&&(i=kx(i)),[i,kx(i)]}function Yne(t){const e=kx(t);return[hk(t),e,hk(e)]}function hk(t){return t.replace(/start|end/g,e=>qne[e])}function Qne(t,e,n){const r=["left","right"],o=["right","left"],s=["top","bottom"],i=["bottom","top"];switch(t){case"top":case"bottom":return n?e?o:r:e?r:o;case"left":case"right":return e?s:i;default:return[]}}function Zne(t,e,n,r){const o=If(t);let s=Qne(Yi(t),n==="start",r);return o&&(s=s.map(i=>i+"-"+o),e&&(s=s.concat(s.map(hk)))),s}function kx(t){return t.replace(/left|right|bottom|top/g,e=>Kne[e])}function Jne(t){return{top:0,right:0,bottom:0,left:0,...t}}function Q4(t){return typeof t!="number"?Jne(t):{top:t,right:t,bottom:t,left:t}}function Tx(t){const{x:e,y:n,width:r,height:o}=t;return{width:r,height:o,top:n,left:e,right:e+r,bottom:n+o,x:e,y:n}}function u_(t,e,n){let{reference:r,floating:o}=t;const s=cl(e),i=JE(e),a=ZE(i),l=Yi(e),c=s==="y",u=r.x+r.width/2-o.width/2,d=r.y+r.height/2-o.height/2,f=r[a]/2-o[a]/2;let h;switch(l){case"top":h={x:u,y:r.y-o.height};break;case"bottom":h={x:u,y:r.y+r.height};break;case"right":h={x:r.x+r.width,y:d};break;case"left":h={x:r.x-o.width,y:d};break;default:h={x:r.x,y:r.y}}switch(If(e)){case"start":h[i]-=f*(n&&c?-1:1);break;case"end":h[i]+=f*(n&&c?-1:1);break}return h}const ere=async(t,e,n)=>{const{placement:r="bottom",strategy:o="absolute",middleware:s=[],platform:i}=n,a=s.filter(Boolean),l=await(i.isRTL==null?void 0:i.isRTL(e));let c=await i.getElementRects({reference:t,floating:e,strategy:o}),{x:u,y:d}=u_(c,r,l),f=r,h={},p=0;for(let m=0;m<a.length;m++){const{name:g,fn:y}=a[m],{x:v,y:x,data:b,reset:w}=await y({x:u,y:d,initialPlacement:r,placement:f,strategy:o,middlewareData:h,rects:c,platform:i,elements:{reference:t,floating:e}});u=v??u,d=x??d,h={...h,[g]:{...h[g],...b}},w&&p<=50&&(p++,typeof w=="object"&&(w.placement&&(f=w.placement),w.rects&&(c=w.rects===!0?await i.getElementRects({reference:t,floating:e,strategy:o}):w.rects),{x:u,y:d}=u_(c,f,l)),m=-1)}return{x:u,y:d,placement:f,strategy:o,middlewareData:h}};async function _p(t,e){var n;e===void 0&&(e={});const{x:r,y:o,platform:s,rects:i,elements:a,strategy:l}=t,{boundary:c="clippingAncestors",rootBoundary:u="viewport",elementContext:d="floating",altBoundary:f=!1,padding:h=0}=Xi(e,t),p=Q4(h),g=a[f?d==="floating"?"reference":"floating":d],y=Tx(await s.getClippingRect({element:(n=await(s.isElement==null?void 0:s.isElement(g)))==null||n?g:g.contextElement||await(s.getDocumentElement==null?void 0:s.getDocumentElement(a.floating)),boundary:c,rootBoundary:u,strategy:l})),v=d==="floating"?{x:r,y:o,width:i.floating.width,height:i.floating.height}:i.reference,x=await(s.getOffsetParent==null?void 0:s.getOffsetParent(a.floating)),b=await(s.isElement==null?void 0:s.isElement(x))?await(s.getScale==null?void 0:s.getScale(x))||{x:1,y:1}:{x:1,y:1},w=Tx(s.convertOffsetParentRelativeRectToViewportRelativeRect?await s.convertOffsetParentRelativeRectToViewportRelativeRect({elements:a,rect:v,offsetParent:x,strategy:l}):v);return{top:(y.top-w.top+p.top)/b.y,bottom:(w.bottom-y.bottom+p.bottom)/b.y,left:(y.left-w.left+p.left)/b.x,right:(w.right-y.right+p.right)/b.x}}const tre=t=>({name:"arrow",options:t,async fn(e){const{x:n,y:r,placement:o,rects:s,platform:i,elements:a,middlewareData:l}=e,{element:c,padding:u=0}=Xi(t,e)||{};if(c==null)return{};const d=Q4(u),f={x:n,y:r},h=JE(o),p=ZE(h),m=await i.getDimensions(c),g=h==="y",y=g?"top":"left",v=g?"bottom":"right",x=g?"clientHeight":"clientWidth",b=s.reference[p]+s.reference[h]-f[h]-s.floating[p],w=f[h]-s.reference[h],C=await(i.getOffsetParent==null?void 0:i.getOffsetParent(c));let $=C?C[x]:0;(!$||!await(i.isElement==null?void 0:i.isElement(C)))&&($=a.floating[x]||s.floating[p]);const T=b/2-w/2,I=$/2-m[p]/2-1,E=ll(d[y],I),N=ll(d[v],I),A=E,R=$-m[p]-N,P=$/2-m[p]/2+T,F=fk(A,P,R),_=!l.arrow&&If(o)!=null&&P!==F&&s.reference[p]/2-(P<A?E:N)-m[p]/2<0,L=_?P<A?P-A:P-R:0;return{[h]:f[h]+L,data:{[h]:F,centerOffset:P-F-L,..._&&{alignmentOffset:L}},reset:_}}}),nre=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(e){var n,r;const{placement:o,middlewareData:s,rects:i,initialPlacement:a,platform:l,elements:c}=e,{mainAxis:u=!0,crossAxis:d=!0,fallbackPlacements:f,fallbackStrategy:h="bestFit",fallbackAxisSideDirection:p="none",flipAlignment:m=!0,...g}=Xi(t,e);if((n=s.arrow)!=null&&n.alignmentOffset)return{};const y=Yi(o),v=cl(a),x=Yi(a)===a,b=await(l.isRTL==null?void 0:l.isRTL(c.floating)),w=f||(x||!m?[kx(a)]:Yne(a)),C=p!=="none";!f&&C&&w.push(...Zne(a,m,p,b));const $=[a,...w],T=await _p(e,g),I=[];let E=((r=s.flip)==null?void 0:r.overflows)||[];if(u&&I.push(T[y]),d){const P=Xne(o,i,b);I.push(T[P[0]],T[P[1]])}if(E=[...E,{placement:o,overflows:I}],!I.every(P=>P<=0)){var N,A;const P=(((N=s.flip)==null?void 0:N.index)||0)+1,F=$[P];if(F)return{data:{index:P,overflows:E},reset:{placement:F}};let _=(A=E.filter(L=>L.overflows[0]<=0).sort((L,O)=>L.overflows[1]-O.overflows[1])[0])==null?void 0:A.placement;if(!_)switch(h){case"bestFit":{var R;const L=(R=E.filter(O=>{if(C){const D=cl(O.placement);return D===v||D==="y"}return!0}).map(O=>[O.placement,O.overflows.filter(D=>D>0).reduce((D,B)=>D+B,0)]).sort((O,D)=>O[1]-D[1])[0])==null?void 0:R[0];L&&(_=L);break}case"initialPlacement":_=a;break}if(o!==_)return{reset:{placement:_}}}return{}}}};function d_(t,e){return{top:t.top-e.height,right:t.right-e.width,bottom:t.bottom-e.height,left:t.left-e.width}}function f_(t){return Hne.some(e=>t[e]>=0)}const rre=function(t){return t===void 0&&(t={}),{name:"hide",options:t,async fn(e){const{rects:n}=e,{strategy:r="referenceHidden",...o}=Xi(t,e);switch(r){case"referenceHidden":{const s=await _p(e,{...o,elementContext:"reference"}),i=d_(s,n.reference);return{data:{referenceHiddenOffsets:i,referenceHidden:f_(i)}}}case"escaped":{const s=await _p(e,{...o,altBoundary:!0}),i=d_(s,n.floating);return{data:{escapedOffsets:i,escaped:f_(i)}}}default:return{}}}}};async function ore(t,e){const{placement:n,platform:r,elements:o}=t,s=await(r.isRTL==null?void 0:r.isRTL(o.floating)),i=Yi(n),a=If(n),l=cl(n)==="y",c=["left","top"].includes(i)?-1:1,u=s&&l?-1:1,d=Xi(e,t);let{mainAxis:f,crossAxis:h,alignmentAxis:p}=typeof d=="number"?{mainAxis:d,crossAxis:0,alignmentAxis:null}:{mainAxis:d.mainAxis||0,crossAxis:d.crossAxis||0,alignmentAxis:d.alignmentAxis};return a&&typeof p=="number"&&(h=a==="end"?p*-1:p),l?{x:h*u,y:f*c}:{x:f*c,y:h*u}}const sre=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){var n,r;const{x:o,y:s,placement:i,middlewareData:a}=e,l=await ore(e,t);return i===((n=a.offset)==null?void 0:n.placement)&&(r=a.arrow)!=null&&r.alignmentOffset?{}:{x:o+l.x,y:s+l.y,data:{...l,placement:i}}}}},ire=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(e){const{x:n,y:r,placement:o}=e,{mainAxis:s=!0,crossAxis:i=!1,limiter:a={fn:g=>{let{x:y,y:v}=g;return{x:y,y:v}}},...l}=Xi(t,e),c={x:n,y:r},u=await _p(e,l),d=cl(Yi(o)),f=QE(d);let h=c[f],p=c[d];if(s){const g=f==="y"?"top":"left",y=f==="y"?"bottom":"right",v=h+u[g],x=h-u[y];h=fk(v,h,x)}if(i){const g=d==="y"?"top":"left",y=d==="y"?"bottom":"right",v=p+u[g],x=p-u[y];p=fk(v,p,x)}const m=a.fn({...e,[f]:h,[d]:p});return{...m,data:{x:m.x-n,y:m.y-r,enabled:{[f]:s,[d]:i}}}}}},are=function(t){return t===void 0&&(t={}),{options:t,fn(e){const{x:n,y:r,placement:o,rects:s,middlewareData:i}=e,{offset:a=0,mainAxis:l=!0,crossAxis:c=!0}=Xi(t,e),u={x:n,y:r},d=cl(o),f=QE(d);let h=u[f],p=u[d];const m=Xi(a,e),g=typeof m=="number"?{mainAxis:m,crossAxis:0}:{mainAxis:0,crossAxis:0,...m};if(l){const x=f==="y"?"height":"width",b=s.reference[f]-s.floating[x]+g.mainAxis,w=s.reference[f]+s.reference[x]-g.mainAxis;h<b?h=b:h>w&&(h=w)}if(c){var y,v;const x=f==="y"?"width":"height",b=["top","left"].includes(Yi(o)),w=s.reference[d]-s.floating[x]+(b&&((y=i.offset)==null?void 0:y[d])||0)+(b?0:g.crossAxis),C=s.reference[d]+s.reference[x]+(b?0:((v=i.offset)==null?void 0:v[d])||0)-(b?g.crossAxis:0);p<w?p=w:p>C&&(p=C)}return{[f]:h,[d]:p}}}},lre=function(t){return t===void 0&&(t={}),{name:"size",options:t,async fn(e){var n,r;const{placement:o,rects:s,platform:i,elements:a}=e,{apply:l=()=>{},...c}=Xi(t,e),u=await _p(e,c),d=Yi(o),f=If(o),h=cl(o)==="y",{width:p,height:m}=s.floating;let g,y;d==="top"||d==="bottom"?(g=d,y=f===(await(i.isRTL==null?void 0:i.isRTL(a.floating))?"start":"end")?"left":"right"):(y=d,g=f==="end"?"top":"bottom");const v=m-u.top-u.bottom,x=p-u.left-u.right,b=ll(m-u[g],v),w=ll(p-u[y],x),C=!e.middlewareData.shift;let $=b,T=w;if((n=e.middlewareData.shift)!=null&&n.enabled.x&&(T=x),(r=e.middlewareData.shift)!=null&&r.enabled.y&&($=v),C&&!f){const E=io(u.left,0),N=io(u.right,0),A=io(u.top,0),R=io(u.bottom,0);h?T=p-2*(E!==0||N!==0?E+N:io(u.left,u.right)):$=m-2*(A!==0||R!==0?A+R:io(u.top,u.bottom))}await l({...e,availableWidth:T,availableHeight:$});const I=await i.getDimensions(a.floating);return p!==I.width||m!==I.height?{reset:{rects:!0}}:{}}}};function R0(){return typeof window<"u"}function Ef(t){return Z4(t)?(t.nodeName||"").toLowerCase():"#document"}function ho(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function xi(t){var e;return(e=(Z4(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function Z4(t){return R0()?t instanceof Node||t instanceof ho(t).Node:!1}function As(t){return R0()?t instanceof Element||t instanceof ho(t).Element:!1}function fi(t){return R0()?t instanceof HTMLElement||t instanceof ho(t).HTMLElement:!1}function h_(t){return!R0()||typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof ho(t).ShadowRoot}function Zm(t){const{overflow:e,overflowX:n,overflowY:r,display:o}=Os(t);return/auto|scroll|overlay|hidden|clip/.test(e+r+n)&&!["inline","contents"].includes(o)}function cre(t){return["table","td","th"].includes(Ef(t))}function _0(t){return[":popover-open",":modal"].some(e=>{try{return t.matches(e)}catch{return!1}})}function eN(t){const e=tN(),n=As(t)?Os(t):t;return["transform","translate","scale","rotate","perspective"].some(r=>n[r]?n[r]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!e&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!e&&(n.filter?n.filter!=="none":!1)||["transform","translate","scale","rotate","perspective","filter"].some(r=>(n.willChange||"").includes(r))||["paint","layout","strict","content"].some(r=>(n.contain||"").includes(r))}function ure(t){let e=ul(t);for(;fi(e)&&!Ld(e);){if(eN(e))return e;if(_0(e))return null;e=ul(e)}return null}function tN(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function Ld(t){return["html","body","#document"].includes(Ef(t))}function Os(t){return ho(t).getComputedStyle(t)}function D0(t){return As(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.scrollX,scrollTop:t.scrollY}}function ul(t){if(Ef(t)==="html")return t;const e=t.assignedSlot||t.parentNode||h_(t)&&t.host||xi(t);return h_(e)?e.host:e}function J4(t){const e=ul(t);return Ld(e)?t.ownerDocument?t.ownerDocument.body:t.body:fi(e)&&Zm(e)?e:J4(e)}function Dp(t,e,n){var r;e===void 0&&(e=[]),n===void 0&&(n=!0);const o=J4(t),s=o===((r=t.ownerDocument)==null?void 0:r.body),i=ho(o);if(s){const a=pk(i);return e.concat(i,i.visualViewport||[],Zm(o)?o:[],a&&n?Dp(a):[])}return e.concat(o,Dp(o,[],n))}function pk(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}function eW(t){const e=Os(t);let n=parseFloat(e.width)||0,r=parseFloat(e.height)||0;const o=fi(t),s=o?t.offsetWidth:n,i=o?t.offsetHeight:r,a=$x(n)!==s||$x(r)!==i;return a&&(n=s,r=i),{width:n,height:r,$:a}}function nN(t){return As(t)?t:t.contextElement}function sd(t){const e=nN(t);if(!fi(e))return oi(1);const n=e.getBoundingClientRect(),{width:r,height:o,$:s}=eW(e);let i=(s?$x(n.width):n.width)/r,a=(s?$x(n.height):n.height)/o;return(!i||!Number.isFinite(i))&&(i=1),(!a||!Number.isFinite(a))&&(a=1),{x:i,y:a}}const dre=oi(0);function tW(t){const e=ho(t);return!tN()||!e.visualViewport?dre:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function fre(t,e,n){return e===void 0&&(e=!1),!n||e&&n!==ho(t)?!1:e}function Oc(t,e,n,r){e===void 0&&(e=!1),n===void 0&&(n=!1);const o=t.getBoundingClientRect(),s=nN(t);let i=oi(1);e&&(r?As(r)&&(i=sd(r)):i=sd(t));const a=fre(s,n,r)?tW(s):oi(0);let l=(o.left+a.x)/i.x,c=(o.top+a.y)/i.y,u=o.width/i.x,d=o.height/i.y;if(s){const f=ho(s),h=r&&As(r)?ho(r):r;let p=f,m=pk(p);for(;m&&r&&h!==p;){const g=sd(m),y=m.getBoundingClientRect(),v=Os(m),x=y.left+(m.clientLeft+parseFloat(v.paddingLeft))*g.x,b=y.top+(m.clientTop+parseFloat(v.paddingTop))*g.y;l*=g.x,c*=g.y,u*=g.x,d*=g.y,l+=x,c+=b,p=ho(m),m=pk(p)}}return Tx({width:u,height:d,x:l,y:c})}function rN(t,e){const n=D0(t).scrollLeft;return e?e.left+n:Oc(xi(t)).left+n}function nW(t,e,n){n===void 0&&(n=!1);const r=t.getBoundingClientRect(),o=r.left+e.scrollLeft-(n?0:rN(t,r)),s=r.top+e.scrollTop;return{x:o,y:s}}function hre(t){let{elements:e,rect:n,offsetParent:r,strategy:o}=t;const s=o==="fixed",i=xi(r),a=e?_0(e.floating):!1;if(r===i||a&&s)return n;let l={scrollLeft:0,scrollTop:0},c=oi(1);const u=oi(0),d=fi(r);if((d||!d&&!s)&&((Ef(r)!=="body"||Zm(i))&&(l=D0(r)),fi(r))){const h=Oc(r);c=sd(r),u.x=h.x+r.clientLeft,u.y=h.y+r.clientTop}const f=i&&!d&&!s?nW(i,l,!0):oi(0);return{width:n.width*c.x,height:n.height*c.y,x:n.x*c.x-l.scrollLeft*c.x+u.x+f.x,y:n.y*c.y-l.scrollTop*c.y+u.y+f.y}}function pre(t){return Array.from(t.getClientRects())}function mre(t){const e=xi(t),n=D0(t),r=t.ownerDocument.body,o=io(e.scrollWidth,e.clientWidth,r.scrollWidth,r.clientWidth),s=io(e.scrollHeight,e.clientHeight,r.scrollHeight,r.clientHeight);let i=-n.scrollLeft+rN(t);const a=-n.scrollTop;return Os(r).direction==="rtl"&&(i+=io(e.clientWidth,r.clientWidth)-o),{width:o,height:s,x:i,y:a}}function gre(t,e){const n=ho(t),r=xi(t),o=n.visualViewport;let s=r.clientWidth,i=r.clientHeight,a=0,l=0;if(o){s=o.width,i=o.height;const c=tN();(!c||c&&e==="fixed")&&(a=o.offsetLeft,l=o.offsetTop)}return{width:s,height:i,x:a,y:l}}function yre(t,e){const n=Oc(t,!0,e==="fixed"),r=n.top+t.clientTop,o=n.left+t.clientLeft,s=fi(t)?sd(t):oi(1),i=t.clientWidth*s.x,a=t.clientHeight*s.y,l=o*s.x,c=r*s.y;return{width:i,height:a,x:l,y:c}}function p_(t,e,n){let r;if(e==="viewport")r=gre(t,n);else if(e==="document")r=mre(xi(t));else if(As(e))r=yre(e,n);else{const o=tW(t);r={x:e.x-o.x,y:e.y-o.y,width:e.width,height:e.height}}return Tx(r)}function rW(t,e){const n=ul(t);return n===e||!As(n)||Ld(n)?!1:Os(n).position==="fixed"||rW(n,e)}function vre(t,e){const n=e.get(t);if(n)return n;let r=Dp(t,[],!1).filter(a=>As(a)&&Ef(a)!=="body"),o=null;const s=Os(t).position==="fixed";let i=s?ul(t):t;for(;As(i)&&!Ld(i);){const a=Os(i),l=eN(i);!l&&a.position==="fixed"&&(o=null),(s?!l&&!o:!l&&a.position==="static"&&!!o&&["absolute","fixed"].includes(o.position)||Zm(i)&&!l&&rW(t,i))?r=r.filter(u=>u!==i):o=a,i=ul(i)}return e.set(t,r),r}function xre(t){let{element:e,boundary:n,rootBoundary:r,strategy:o}=t;const i=[...n==="clippingAncestors"?_0(e)?[]:vre(e,this._c):[].concat(n),r],a=i[0],l=i.reduce((c,u)=>{const d=p_(e,u,o);return c.top=io(d.top,c.top),c.right=ll(d.right,c.right),c.bottom=ll(d.bottom,c.bottom),c.left=io(d.left,c.left),c},p_(e,a,o));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}}function bre(t){const{width:e,height:n}=eW(t);return{width:e,height:n}}function wre(t,e,n){const r=fi(e),o=xi(e),s=n==="fixed",i=Oc(t,!0,s,e);let a={scrollLeft:0,scrollTop:0};const l=oi(0);if(r||!r&&!s)if((Ef(e)!=="body"||Zm(o))&&(a=D0(e)),r){const f=Oc(e,!0,s,e);l.x=f.x+e.clientLeft,l.y=f.y+e.clientTop}else o&&(l.x=rN(o));const c=o&&!r&&!s?nW(o,a):oi(0),u=i.left+a.scrollLeft-l.x-c.x,d=i.top+a.scrollTop-l.y-c.y;return{x:u,y:d,width:i.width,height:i.height}}function YS(t){return Os(t).position==="static"}function m_(t,e){if(!fi(t)||Os(t).position==="fixed")return null;if(e)return e(t);let n=t.offsetParent;return xi(t)===n&&(n=n.ownerDocument.body),n}function oW(t,e){const n=ho(t);if(_0(t))return n;if(!fi(t)){let o=ul(t);for(;o&&!Ld(o);){if(As(o)&&!YS(o))return o;o=ul(o)}return n}let r=m_(t,e);for(;r&&cre(r)&&YS(r);)r=m_(r,e);return r&&Ld(r)&&YS(r)&&!eN(r)?n:r||ure(t)||n}const Sre=async function(t){const e=this.getOffsetParent||oW,n=this.getDimensions,r=await n(t.floating);return{reference:wre(t.reference,await e(t.floating),t.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function Cre(t){return Os(t).direction==="rtl"}const $re={convertOffsetParentRelativeRectToViewportRelativeRect:hre,getDocumentElement:xi,getClippingRect:xre,getOffsetParent:oW,getElementRects:Sre,getClientRects:pre,getDimensions:bre,getScale:sd,isElement:As,isRTL:Cre};function sW(t,e){return t.x===e.x&&t.y===e.y&&t.width===e.width&&t.height===e.height}function kre(t,e){let n=null,r;const o=xi(t);function s(){var a;clearTimeout(r),(a=n)==null||a.disconnect(),n=null}function i(a,l){a===void 0&&(a=!1),l===void 0&&(l=1),s();const c=t.getBoundingClientRect(),{left:u,top:d,width:f,height:h}=c;if(a||e(),!f||!h)return;const p=Jy(d),m=Jy(o.clientWidth-(u+f)),g=Jy(o.clientHeight-(d+h)),y=Jy(u),x={rootMargin:-p+"px "+-m+"px "+-g+"px "+-y+"px",threshold:io(0,ll(1,l))||1};let b=!0;function w(C){const $=C[0].intersectionRatio;if($!==l){if(!b)return i();$?i(!1,$):r=setTimeout(()=>{i(!1,1e-7)},1e3)}$===1&&!sW(c,t.getBoundingClientRect())&&i(),b=!1}try{n=new IntersectionObserver(w,{...x,root:o.ownerDocument})}catch{n=new IntersectionObserver(w,x)}n.observe(t)}return i(!0),s}function Tre(t,e,n,r){r===void 0&&(r={});const{ancestorScroll:o=!0,ancestorResize:s=!0,elementResize:i=typeof ResizeObserver=="function",layoutShift:a=typeof IntersectionObserver=="function",animationFrame:l=!1}=r,c=nN(t),u=o||s?[...c?Dp(c):[],...Dp(e)]:[];u.forEach(y=>{o&&y.addEventListener("scroll",n,{passive:!0}),s&&y.addEventListener("resize",n)});const d=c&&a?kre(c,n):null;let f=-1,h=null;i&&(h=new ResizeObserver(y=>{let[v]=y;v&&v.target===c&&h&&(h.unobserve(e),cancelAnimationFrame(f),f=requestAnimationFrame(()=>{var x;(x=h)==null||x.observe(e)})),n()}),c&&!l&&h.observe(c),h.observe(e));let p,m=l?Oc(t):null;l&&g();function g(){const y=Oc(t);m&&!sW(m,y)&&n(),m=y,p=requestAnimationFrame(g)}return n(),()=>{var y;u.forEach(v=>{o&&v.removeEventListener("scroll",n),s&&v.removeEventListener("resize",n)}),d==null||d(),(y=h)==null||y.disconnect(),h=null,l&&cancelAnimationFrame(p)}}const Ire=sre,Ere=ire,Nre=nre,Are=lre,Ore=rre,g_=tre,Pre=are,Rre=(t,e,n)=>{const r=new Map,o={platform:$re,...n},s={...o.platform,_c:r};return ere(t,e,{...o,platform:s})};var Hv=typeof document<"u"?k.useLayoutEffect:k.useEffect;function Ix(t,e){if(t===e)return!0;if(typeof t!=typeof e)return!1;if(typeof t=="function"&&t.toString()===e.toString())return!0;let n,r,o;if(t&&e&&typeof t=="object"){if(Array.isArray(t)){if(n=t.length,n!==e.length)return!1;for(r=n;r--!==0;)if(!Ix(t[r],e[r]))return!1;return!0}if(o=Object.keys(t),n=o.length,n!==Object.keys(e).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(e,o[r]))return!1;for(r=n;r--!==0;){const s=o[r];if(!(s==="_owner"&&t.$$typeof)&&!Ix(t[s],e[s]))return!1}return!0}return t!==t&&e!==e}function iW(t){return typeof window>"u"?1:(t.ownerDocument.defaultView||window).devicePixelRatio||1}function y_(t,e){const n=iW(t);return Math.round(e*n)/n}function QS(t){const e=k.useRef(t);return Hv(()=>{e.current=t}),e}function _re(t){t===void 0&&(t={});const{placement:e="bottom",strategy:n="absolute",middleware:r=[],platform:o,elements:{reference:s,floating:i}={},transform:a=!0,whileElementsMounted:l,open:c}=t,[u,d]=k.useState({x:0,y:0,strategy:n,placement:e,middlewareData:{},isPositioned:!1}),[f,h]=k.useState(r);Ix(f,r)||h(r);const[p,m]=k.useState(null),[g,y]=k.useState(null),v=k.useCallback(O=>{O!==C.current&&(C.current=O,m(O))},[]),x=k.useCallback(O=>{O!==$.current&&($.current=O,y(O))},[]),b=s||p,w=i||g,C=k.useRef(null),$=k.useRef(null),T=k.useRef(u),I=l!=null,E=QS(l),N=QS(o),A=QS(c),R=k.useCallback(()=>{if(!C.current||!$.current)return;const O={placement:e,strategy:n,middleware:f};N.current&&(O.platform=N.current),Rre(C.current,$.current,O).then(D=>{const B={...D,isPositioned:A.current!==!1};P.current&&!Ix(T.current,B)&&(T.current=B,tu.flushSync(()=>{d(B)}))})},[f,e,n,N,A]);Hv(()=>{c===!1&&T.current.isPositioned&&(T.current.isPositioned=!1,d(O=>({...O,isPositioned:!1})))},[c]);const P=k.useRef(!1);Hv(()=>(P.current=!0,()=>{P.current=!1}),[]),Hv(()=>{if(b&&(C.current=b),w&&($.current=w),b&&w){if(E.current)return E.current(b,w,R);R()}},[b,w,R,E,I]);const F=k.useMemo(()=>({reference:C,floating:$,setReference:v,setFloating:x}),[v,x]),_=k.useMemo(()=>({reference:b,floating:w}),[b,w]),L=k.useMemo(()=>{const O={position:n,left:0,top:0};if(!_.floating)return O;const D=y_(_.floating,u.x),B=y_(_.floating,u.y);return a?{...O,transform:"translate("+D+"px, "+B+"px)",...iW(_.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:D,top:B}},[n,a,_.floating,u.x,u.y]);return k.useMemo(()=>({...u,update:R,refs:F,elements:_,floatingStyles:L}),[u,R,F,_,L])}const Dre=t=>{function e(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:t,fn(n){const{element:r,padding:o}=typeof t=="function"?t(n):t;return r&&e(r)?r.current!=null?g_({element:r.current,padding:o}).fn(n):{}:r?g_({element:r,padding:o}).fn(n):{}}}},Mre=(t,e)=>({...Ire(t),options:[t,e]}),Fre=(t,e)=>({...Ere(t),options:[t,e]}),Lre=(t,e)=>({...Pre(t),options:[t,e]}),jre=(t,e)=>({...Nre(t),options:[t,e]}),Bre=(t,e)=>({...Are(t),options:[t,e]}),zre=(t,e)=>({...Ore(t),options:[t,e]}),Wre=(t,e)=>({...Dre(t),options:[t,e]});var Vre="Arrow",aW=k.forwardRef((t,e)=>{const{children:n,width:r=10,height:o=5,...s}=t;return S.jsx(Re.svg,{...s,ref:e,width:r,height:o,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:t.asChild?n:S.jsx("polygon",{points:"0,0 30,0 15,10"})})});aW.displayName=Vre;var Ure=aW;function M0(t){const[e,n]=k.useState(void 0);return Nn(()=>{if(t){n({width:t.offsetWidth,height:t.offsetHeight});const r=new ResizeObserver(o=>{if(!Array.isArray(o)||!o.length)return;const s=o[0];let i,a;if("borderBoxSize"in s){const l=s.borderBoxSize,c=Array.isArray(l)?l[0]:l;i=c.inlineSize,a=c.blockSize}else i=t.offsetWidth,a=t.offsetHeight;n({width:i,height:a})});return r.observe(t,{box:"border-box"}),()=>r.unobserve(t)}else n(void 0)},[t]),e}var oN="Popper",[lW,Nf]=Jr(oN),[Gre,cW]=lW(oN),uW=t=>{const{__scopePopper:e,children:n}=t,[r,o]=k.useState(null);return S.jsx(Gre,{scope:e,anchor:r,onAnchorChange:o,children:n})};uW.displayName=oN;var dW="PopperAnchor",fW=k.forwardRef((t,e)=>{const{__scopePopper:n,virtualRef:r,...o}=t,s=cW(dW,n),i=k.useRef(null),a=Xe(e,i);return k.useEffect(()=>{s.onAnchorChange((r==null?void 0:r.current)||i.current)}),r?null:S.jsx(Re.div,{...o,ref:a})});fW.displayName=dW;var sN="PopperContent",[Hre,Kre]=lW(sN),hW=k.forwardRef((t,e)=>{var se,fe,J,ae,le,Z;const{__scopePopper:n,side:r="bottom",sideOffset:o=0,align:s="center",alignOffset:i=0,arrowPadding:a=0,avoidCollisions:l=!0,collisionBoundary:c=[],collisionPadding:u=0,sticky:d="partial",hideWhenDetached:f=!1,updatePositionStrategy:h="optimized",onPlaced:p,...m}=t,g=cW(sN,n),[y,v]=k.useState(null),x=Xe(e,$e=>v($e)),[b,w]=k.useState(null),C=M0(b),$=(C==null?void 0:C.width)??0,T=(C==null?void 0:C.height)??0,I=r+(s!=="center"?"-"+s:""),E=typeof u=="number"?u:{top:0,right:0,bottom:0,left:0,...u},N=Array.isArray(c)?c:[c],A=N.length>0,R={padding:E,boundary:N.filter(Xre),altBoundary:A},{refs:P,floatingStyles:F,placement:_,isPositioned:L,middlewareData:O}=_re({strategy:"fixed",placement:I,whileElementsMounted:(...$e)=>Tre(...$e,{animationFrame:h==="always"}),elements:{reference:g.anchor},middleware:[Mre({mainAxis:o+T,alignmentAxis:i}),l&&Fre({mainAxis:!0,crossAxis:!1,limiter:d==="partial"?Lre():void 0,...R}),l&&jre({...R}),Bre({...R,apply:({elements:$e,rects:be,availableWidth:Pe,availableHeight:Ne})=>{const{width:je,height:Ze}=be.reference,sn=$e.floating.style;sn.setProperty("--radix-popper-available-width",`${Pe}px`),sn.setProperty("--radix-popper-available-height",`${Ne}px`),sn.setProperty("--radix-popper-anchor-width",`${je}px`),sn.setProperty("--radix-popper-anchor-height",`${Ze}px`)}}),b&&Wre({element:b,padding:a}),Yre({arrowWidth:$,arrowHeight:T}),f&&zre({strategy:"referenceHidden",...R})]}),[D,B]=gW(_),V=Kn(p);Nn(()=>{L&&(V==null||V())},[L,V]);const G=(se=O.arrow)==null?void 0:se.x,Q=(fe=O.arrow)==null?void 0:fe.y,re=((J=O.arrow)==null?void 0:J.centerOffset)!==0,[ie,ce]=k.useState();return Nn(()=>{y&&ce(window.getComputedStyle(y).zIndex)},[y]),S.jsx("div",{ref:P.setFloating,"data-radix-popper-content-wrapper":"",style:{...F,transform:L?F.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:ie,"--radix-popper-transform-origin":[(ae=O.transformOrigin)==null?void 0:ae.x,(le=O.transformOrigin)==null?void 0:le.y].join(" "),...((Z=O.hide)==null?void 0:Z.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:t.dir,children:S.jsx(Hre,{scope:n,placedSide:D,onArrowChange:w,arrowX:G,arrowY:Q,shouldHideArrow:re,children:S.jsx(Re.div,{"data-side":D,"data-align":B,...m,ref:x,style:{...m.style,animation:L?void 0:"none"}})})})});hW.displayName=sN;var pW="PopperArrow",qre={top:"bottom",right:"left",bottom:"top",left:"right"},mW=k.forwardRef(function(e,n){const{__scopePopper:r,...o}=e,s=Kre(pW,r),i=qre[s.placedSide];return S.jsx("span",{ref:s.onArrowChange,style:{position:"absolute",left:s.arrowX,top:s.arrowY,[i]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[s.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[s.placedSide],visibility:s.shouldHideArrow?"hidden":void 0},children:S.jsx(Ure,{...o,ref:n,style:{...o.style,display:"block"}})})});mW.displayName=pW;function Xre(t){return t!==null}var Yre=t=>({name:"transformOrigin",options:t,fn(e){var g,y,v;const{placement:n,rects:r,middlewareData:o}=e,i=((g=o.arrow)==null?void 0:g.centerOffset)!==0,a=i?0:t.arrowWidth,l=i?0:t.arrowHeight,[c,u]=gW(n),d={start:"0%",center:"50%",end:"100%"}[u],f=(((y=o.arrow)==null?void 0:y.x)??0)+a/2,h=(((v=o.arrow)==null?void 0:v.y)??0)+l/2;let p="",m="";return c==="bottom"?(p=i?d:`${f}px`,m=`${-l}px`):c==="top"?(p=i?d:`${f}px`,m=`${r.floating.height+l}px`):c==="right"?(p=`${-l}px`,m=i?d:`${h}px`):c==="left"&&(p=`${r.floating.width+l}px`,m=i?d:`${h}px`),{data:{x:p,y:m}}}});function gW(t){const[e,n="center"]=t.split("-");return[e,n]}var yW=uW,iN=fW,aN=hW,lN=mW,[F0,Dot]=Jr("Tooltip",[Nf]),cN=Nf(),vW="TooltipProvider",Qre=700,v_="tooltip.open",[Zre,xW]=F0(vW),bW=t=>{const{__scopeTooltip:e,delayDuration:n=Qre,skipDelayDuration:r=300,disableHoverableContent:o=!1,children:s}=t,i=k.useRef(!0),a=k.useRef(!1),l=k.useRef(0);return k.useEffect(()=>{const c=l.current;return()=>window.clearTimeout(c)},[]),S.jsx(Zre,{scope:e,isOpenDelayedRef:i,delayDuration:n,onOpen:k.useCallback(()=>{window.clearTimeout(l.current),i.current=!1},[]),onClose:k.useCallback(()=>{window.clearTimeout(l.current),l.current=window.setTimeout(()=>i.current=!0,r)},[r]),isPointerInTransitRef:a,onPointerInTransitChange:k.useCallback(c=>{a.current=c},[]),disableHoverableContent:o,children:s})};bW.displayName=vW;var wW="Tooltip",[Mot,L0]=F0(wW),mk="TooltipTrigger",Jre=k.forwardRef((t,e)=>{const{__scopeTooltip:n,...r}=t,o=L0(mk,n),s=xW(mk,n),i=cN(n),a=k.useRef(null),l=Xe(e,a,o.onTriggerChange),c=k.useRef(!1),u=k.useRef(!1),d=k.useCallback(()=>c.current=!1,[]);return k.useEffect(()=>()=>document.removeEventListener("pointerup",d),[d]),S.jsx(iN,{asChild:!0,...i,children:S.jsx(Re.button,{"aria-describedby":o.open?o.contentId:void 0,"data-state":o.stateAttribute,...r,ref:l,onPointerMove:me(t.onPointerMove,f=>{f.pointerType!=="touch"&&!u.current&&!s.isPointerInTransitRef.current&&(o.onTriggerEnter(),u.current=!0)}),onPointerLeave:me(t.onPointerLeave,()=>{o.onTriggerLeave(),u.current=!1}),onPointerDown:me(t.onPointerDown,()=>{o.open&&o.onClose(),c.current=!0,document.addEventListener("pointerup",d,{once:!0})}),onFocus:me(t.onFocus,()=>{c.current||o.onOpen()}),onBlur:me(t.onBlur,o.onClose),onClick:me(t.onClick,o.onClose)})})});Jre.displayName=mk;var eoe="TooltipPortal",[Fot,toe]=F0(eoe,{forceMount:void 0}),jd="TooltipContent",SW=k.forwardRef((t,e)=>{const n=toe(jd,t.__scopeTooltip),{forceMount:r=n.forceMount,side:o="top",...s}=t,i=L0(jd,t.__scopeTooltip);return S.jsx(Yo,{present:r||i.open,children:i.disableHoverableContent?S.jsx(CW,{side:o,...s,ref:e}):S.jsx(noe,{side:o,...s,ref:e})})}),noe=k.forwardRef((t,e)=>{const n=L0(jd,t.__scopeTooltip),r=xW(jd,t.__scopeTooltip),o=k.useRef(null),s=Xe(e,o),[i,a]=k.useState(null),{trigger:l,onClose:c}=n,u=o.current,{onPointerInTransitChange:d}=r,f=k.useCallback(()=>{a(null),d(!1)},[d]),h=k.useCallback((p,m)=>{const g=p.currentTarget,y={x:p.clientX,y:p.clientY},v=aoe(y,g.getBoundingClientRect()),x=loe(y,v),b=coe(m.getBoundingClientRect()),w=doe([...x,...b]);a(w),d(!0)},[d]);return k.useEffect(()=>()=>f(),[f]),k.useEffect(()=>{if(l&&u){const p=g=>h(g,u),m=g=>h(g,l);return l.addEventListener("pointerleave",p),u.addEventListener("pointerleave",m),()=>{l.removeEventListener("pointerleave",p),u.removeEventListener("pointerleave",m)}}},[l,u,h,f]),k.useEffect(()=>{if(i){const p=m=>{const g=m.target,y={x:m.clientX,y:m.clientY},v=(l==null?void 0:l.contains(g))||(u==null?void 0:u.contains(g)),x=!uoe(y,i);v?f():x&&(f(),c())};return document.addEventListener("pointermove",p),()=>document.removeEventListener("pointermove",p)}},[l,u,i,c,f]),S.jsx(CW,{...t,ref:s})}),[roe,ooe]=F0(wW,{isInside:!1}),soe=ate("TooltipContent"),CW=k.forwardRef((t,e)=>{const{__scopeTooltip:n,children:r,"aria-label":o,onEscapeKeyDown:s,onPointerDownOutside:i,...a}=t,l=L0(jd,n),c=cN(n),{onClose:u}=l;return k.useEffect(()=>(document.addEventListener(v_,u),()=>document.removeEventListener(v_,u)),[u]),k.useEffect(()=>{if(l.trigger){const d=f=>{const h=f.target;h!=null&&h.contains(l.trigger)&&u()};return window.addEventListener("scroll",d,{capture:!0}),()=>window.removeEventListener("scroll",d,{capture:!0})}},[l.trigger,u]),S.jsx(kf,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:s,onPointerDownOutside:i,onFocusOutside:d=>d.preventDefault(),onDismiss:u,children:S.jsxs(aN,{"data-state":l.stateAttribute,...c,...a,ref:e,style:{...a.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[S.jsx(soe,{children:r}),S.jsx(roe,{scope:n,isInside:!0,children:S.jsx(Ite,{id:l.contentId,role:"tooltip",children:o||r})})]})})});SW.displayName=jd;var $W="TooltipArrow",ioe=k.forwardRef((t,e)=>{const{__scopeTooltip:n,...r}=t,o=cN(n);return ooe($W,n).isInside?null:S.jsx(lN,{...o,...r,ref:e})});ioe.displayName=$W;function aoe(t,e){const n=Math.abs(e.top-t.y),r=Math.abs(e.bottom-t.y),o=Math.abs(e.right-t.x),s=Math.abs(e.left-t.x);switch(Math.min(n,r,o,s)){case s:return"left";case o:return"right";case n:return"top";case r:return"bottom";default:throw new Error("unreachable")}}function loe(t,e,n=5){const r=[];switch(e){case"top":r.push({x:t.x-n,y:t.y+n},{x:t.x+n,y:t.y+n});break;case"bottom":r.push({x:t.x-n,y:t.y-n},{x:t.x+n,y:t.y-n});break;case"left":r.push({x:t.x+n,y:t.y-n},{x:t.x+n,y:t.y+n});break;case"right":r.push({x:t.x-n,y:t.y-n},{x:t.x-n,y:t.y+n});break}return r}function coe(t){const{top:e,right:n,bottom:r,left:o}=t;return[{x:o,y:e},{x:n,y:e},{x:n,y:r},{x:o,y:r}]}function uoe(t,e){const{x:n,y:r}=t;let o=!1;for(let s=0,i=e.length-1;s<e.length;i=s++){const a=e[s].x,l=e[s].y,c=e[i].x,u=e[i].y;l>r!=u>r&&n<(c-a)*(r-l)/(u-l)+a&&(o=!o)}return o}function doe(t){const e=t.slice();return e.sort((n,r)=>n.x<r.x?-1:n.x>r.x?1:n.y<r.y?-1:n.y>r.y?1:0),foe(e)}function foe(t){if(t.length<=1)return t.slice();const e=[];for(let r=0;r<t.length;r++){const o=t[r];for(;e.length>=2;){const s=e[e.length-1],i=e[e.length-2];if((s.x-i.x)*(o.y-i.y)>=(s.y-i.y)*(o.x-i.x))e.pop();else break}e.push(o)}e.pop();const n=[];for(let r=t.length-1;r>=0;r--){const o=t[r];for(;n.length>=2;){const s=n[n.length-1],i=n[n.length-2];if((s.x-i.x)*(o.y-i.y)>=(s.y-i.y)*(o.x-i.x))n.pop();else break}n.push(o)}return n.pop(),e.length===1&&n.length===1&&e[0].x===n[0].x&&e[0].y===n[0].y?e:e.concat(n)}var hoe=bW,kW=SW;const poe=hoe,moe=k.forwardRef(({className:t,sideOffset:e=4,...n},r)=>S.jsx(kW,{ref:r,sideOffset:e,className:Le("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-tooltip-content-transform-origin]",t),...n}));moe.displayName=kW.displayName;const Bd=k.forwardRef(({className:t,...e},n)=>S.jsx("div",{ref:n,className:Le("rounded-lg border bg-card text-card-foreground shadow-sm",t),...e}));Bd.displayName="Card";const goe=k.forwardRef(({className:t,...e},n)=>S.jsx("div",{ref:n,className:Le("flex flex-col space-y-1.5 p-6",t),...e}));goe.displayName="CardHeader";const yoe=k.forwardRef(({className:t,...e},n)=>S.jsx("div",{ref:n,className:Le("text-2xl font-semibold leading-none tracking-tight",t),...e}));yoe.displayName="CardTitle";const voe=k.forwardRef(({className:t,...e},n)=>S.jsx("div",{ref:n,className:Le("text-sm text-muted-foreground",t),...e}));voe.displayName="CardDescription";const Mp=k.forwardRef(({className:t,...e},n)=>S.jsx("div",{ref:n,className:Le("p-6 pt-0",t),...e}));Mp.displayName="CardContent";const xoe=k.forwardRef(({className:t,...e},n)=>S.jsx("div",{ref:n,className:Le("flex items-center p-6 pt-0",t),...e}));xoe.displayName="CardFooter";function boe(){return S.jsx("div",{className:"min-h-screen w-full flex items-center justify-center bg-gray-50",children:S.jsx(Bd,{className:"w-full max-w-md mx-4",children:S.jsxs(Mp,{className:"pt-6",children:[S.jsxs("div",{className:"flex mb-4 gap-2",children:[S.jsx(Zte,{className:"h-8 w-8 text-red-500"}),S.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"404 Page Not Found"})]}),S.jsx("p",{className:"mt-4 text-sm text-gray-600",children:"Did you forget to add the page to the router?"})]})})})}const x_={ar:{seo:{home:{title:"Eco DZ - منصة تحليل النباتات والتربة والبيئة",description:"منصة متكاملة لتحليل النباتات والتربة والأنظمة البيئية في الجزائر باستخدام الذكاء الاصطناعي والتحليل البيولوجي"},analysis:{title:"تحليل النباتات والتربة - Eco DZ",description:"قم بتحليل النباتات والتربة باستخدام الذكاء الاصطناعي للحصول على تقييم دقيق وتوصيات للتحسين"},database:{title:"قاعدة البيانات الإيكولوجية - Eco DZ",description:"استكشف قاعدة بياناتنا الشاملة للنباتات والتربة والأنظمة البيئية في الجزائر"},simulation:{title:"المحاكاة البيئية - Eco DZ",description:"جرب المحاكاة البيئية وتوقع تأثير التغييرات على النظام البيئي المحلي"},sensor:{title:"المسبار البيولوجي - Eco DZ",description:"تعرف على المسبار البيولوجي لتحليل النسغ النباتي ومكونات التربة بدقة عالية"},about:{title:"من نحن - Eco DZ",description:"تعرف على فريقنا وأهدافنا لتحسين البيئة والزراعة المستدامة في الجزائر"}},header:{title:"Eco DZ",analysis:"التحليل",database:"قاعدة البيانات",simulation:"المحاكاة البيئية",sensor:"المسبار",about:"من نحن",login:"حسابي"},hero:{title:"موقع ذكي لتحليل النباتات، التربة، والأنظمة البيئية",subtitle:"أداة متكاملة للطلبة، الباحثين، والفلاحين في الجزائر",startAnalysis:"ابدأ التحليل",exploreDatabase:"استكشف قاعدة البيانات"},features:{title:"خدماتنا الرئيسية",imageAnalysis:{title:"تحليل النباتات والتربة بالصور",description:"استخدام تقنيات الذكاء الاصطناعي لتحليل صور النباتات والتربة وتقديم تقييم دقيق لحالتها.",cta:"ابدأ التحليل"},bioSensor:{title:"تحليل بيولوجي عبر مسبار",description:"استخدام جهاز مسبار خاص لقياس وتحليل النسغ النباتي ومكونات التربة بشكل مباشر ودقيق.",cta:"تعرف على المسبار"},simulation:{title:"محاكاة بيئية تفاعلية",description:"محاكاة تأثير إدخال أنواع نباتية جديدة أو تغييرات في البيئة على النظام البيئي المحلي.",cta:"جرب المحاكاة"}},analysis:{title:"تحليل النباتات والتربة",description:"قم برفع صورة للنبات أو التربة، وسيقوم نظامنا الذكي بتحليلها وتقديم تقرير مفصل عن حالتها وتوصيات للتحسين.",upload:{title:"رفع صورة للتحليل",plantAnalysis:"تحليل نبات",soilAnalysis:"تحليل تربة",dragAndDrop:"اسحب الصورة هنا أو انقر للاختيار",fileTypes:"JPG, PNG أو HEIC بحد أقصى 10MB",selectImage:"اختر صورة",changeImage:"تغيير الصورة",examples:{title:"أمثلة للصور المناسبة للتحليل:",healthy:"مثال لورقة نبات صحية",diseased:"مثال لورقة نبات مريضة",soil:"مثال لعينة تربة"}},result:{title:"معاينة التحليل",noImage:"سيظهر هنا معاينة للتحليل بعد رفع الصورة",readyToAnalyze:"الصورة جاهزة للتحليل",analyzing:"جاري التحليل...",analyzeImage:"تحليل الصورة",connectSensor:"الاتصال بالمسبار",loginNotice:"تحتاج إلى تسجيل الدخول لحفظ نتائج التحليل",condition:"الحالة",recommendations:"التوصيات",confidence:"مستوى الثقة",phLevel:"درجة الحموضة (pH)",nutrients:"المغذيات",low:"منخفض",high:"مرتفع"},history:{title:"تحليلاتك السابقة",viewAll:"عرض الكل",noAnalyses:"لا توجد تحليلات سابقة"},errors:{noImage:"لم يتم اختيار صورة",pleaseSelectImage:"يرجى اختيار صورة للتحليل",failed:"فشل التحليل",tryAgain:"حدث خطأ أثناء التحليل، يرجى المحاولة مرة أخرى"},success:{title:"تم التحليل بنجاح",description:"تم تحليل الصورة وإظهار النتائج"}},database:{title:"قاعدة البيانات الإيكولوجية",description:"استكشف قاعدة بياناتنا الشاملة للأنظمة البيئية في الجزائر، بما في ذلك الأنواع النباتية المحلية، أنواع التربة، والمناخ.",search:{searchLabel:"بحث",searchPlaceholder:"اسم النبات، نوع التربة...",categoryLabel:"الفئة",regionLabel:"المنطقة",allCategories:"جميع الفئات",allRegions:"كل الجزائر",plants:"نباتات",trees:"أشجار",soils:"أنواع التربة",ecosystems:"أنظمة بيئية",north:"الشمال",south:"الجنوب",east:"الشرق",west:"الغرب",highlands:"الهضاب العليا",desert:"الصحراء"},item:{region:"المنطقة",viewMore:"عرض المزيد"},details:{scientificName:"الاسم العلمي",description:"الوصف",characteristics:"الخصائص"},noResults:"لا توجد نتائج مطابقة لبحثك",loadMore:"عرض المزيد من العناصر"},simulation:{title:"المحاكاة البيئية التفاعلية",description:"جرب كيف يمكن أن تتطور البيئة المحلية مع مرور الوقت، وتأثير إدخال أنواع نباتية جديدة أو تغييرات في النظام البيئي.",controls:{title:"إعدادات المحاكاة",selectEcosystem:"اختر النظام البيئي",ecosystemPlaceholder:"غابات البحر المتوسط (شمال)",introducedSpecies:"إدخال أنواع جديدة",plants:{eucalyptus:"أشجار الكينا",argan:"نبات الأرغان",aleppoPine:"الصنوبر الحلبي",durumWheat:"القمح الصلب"},climateFactors:"عوامل المناخ",rainfall:"معدل هطول الأمطار",rainfallUnit:"ملم/سنة",temperature:"متوسط درجة الحرارة",windSpeed:"سرعة الرياح",windSpeeds:{low:"منخفضة",medium:"متوسطة",high:"مرتفعة"},simulationPeriod:"فترة المحاكاة",years:"سنة",startSimulation:"بدء المحاكاة",simulating:"جاري المحاكاة..."},results:{title:"نتائج المحاكاة",fullscreenTitle:"المحاكاة البيئية (عرض كامل)",pressToStart:"اضغط لبدء المحاكاة",selectSettings:"حدد الإعدادات أولاً من القائمة المجاورة",simulating:"جاري تنفيذ المحاكاة...",year:"السنة",years:"السنوات",percentage:"النسبة المئوية",indicators:{vegetation:"الغطاء النباتي",biodiversity:"التنوع الحيوي",soilQuality:"جودة التربة",sustainability:"الاستدامة"}},success:{title:"تمت المحاكاة بنجاح",description:"تم إنشاء محاكاة جديدة وعرض النتائج"},error:{title:"فشلت المحاكاة",description:"حدث خطأ أثناء تنفيذ المحاكاة، يرجى المحاولة مرة أخرى"}},sensor:{title:"المسبار الذكي للتحليل البيولوجي",description:"يتيح المسبار البيولوجي الخاص بنا إجراء تحليل دقيق ومباشر للنباتات والتربة، مما يساعد على تحديد المشكلات قبل أن تصبح مرئية للعين المجردة.",features:{title:"مميزات المسبار",item1:"قياس مستويات المغذيات والمعادن في التربة بدقة عالية",item2:"تحليل النسغ النباتي والكشف المبكر عن الأمراض",item3:"قياس درجة الحموضة والتوصيل الكهربائي للتربة",item4:"اتصال مباشر عبر USB/USB-C مع تطبيق التحليل"},requestInfo:"طلب معلومات",watchVideo:"مشاهدة الفيديو التوضيحي",comingSoon:"قريباً",deviceImage:"جهاز المسبار البيولوجي للتحليل",infoCard:{title:"قياسات دقيقة",description:"يقدم المسبار قياسات بدقة تصل إلى 99.8% للعناصر الأساسية في التربة."}},about:{title:"عن المشروع",description:"نحن فريق من الباحثين والمهندسين والمتخصصين في علوم البيئة والزراعة، نعمل معًا لتطوير أدوات تكنولوجية متقدمة تساعد في فهم وتحسين النظم البيئية في الجزائر.",objectives:{title:"أهدافنا",item1:"تعزيز الوعي البيئي والمحافظة على التنوع الحيوي",item2:"دعم اتخاذ القرارات الزراعية المستنيرة بناءً على تحليلات دقيقة",item3:"تقديم أدوات تعليمية تفاعلية للطلاب والباحثين",item4:"المساهمة في تطوير الزراعة المستدامة والذكية"},contactUs:"تواصل معنا",readMore:"اقرأ المزيد",images:{lab:"باحثون يقومون بتحليل عينات نباتية",field:"عامل ميداني يستخدم جهاز لوحي لمراقبة النباتات",data:"تصور البيانات من مراقبة البيئة",conservation:"جهود الحفاظ على البيئة في المناظر الطبيعية الجزائرية"}},footer:{title:"Eco DZ",description:"منصة رقمية لتحليل ومراقبة وتحسين النظم البيئية في الجزائر باستخدام تقنيات الذكاء الاصطناعي والتحليل البيولوجي.",quickLinks:{title:"روابط سريعة",analysis:"التحليل الذكي",database:"قاعدة البيانات",simulation:"المحاكاة البيئية",sensor:"المسبار البيولوجي",about:"من نحن"},support:{title:"الدعم والمساعدة",faq:"الأسئلة الشائعة",guide:"دليل الاستخدام",terms:"المصطلحات العلمية",help:"مركز المساعدة",contact:"اتصل بنا"},newsletter:{title:"اشترك في النشرة البريدية",description:"احصل على آخر الأخبار والتحديثات حول المشروع والبيئة الجزائرية.",emailPlaceholder:"البريد الإلكتروني"},copyright:"© 2023 Eco DZ. جميع الحقوق محفوظة.",privacy:"سياسة الخصوصية",terms:"شروط الاستخدام",cookies:"سياسة ملفات تعريف الارتباط"},auth:{login:"تسجيل الدخول",logout:"تسجيل الخروج",profile:"الملف الشخصي",greeting:"مرحباً",user:"المستخدم",loginRequired:"تسجيل الدخول مطلوب",loginToAnalyze:"يجب تسجيل الدخول لاستخدام ميزة التحليل",loginToSimulate:"يجب تسجيل الدخول لاستخدام ميزة المحاكاة",loginToSaveResults:"قم بتسجيل الدخول لحفظ نتائج التحليل",loginToSaveSimulations:"قم بتسجيل الدخول لحفظ نتائج المحاكاة",loginToSaveDesc:"سجل دخولك لحفظ نتائج التحليل والمحاكاة والاستفادة من جميع ميزات المنصة"},settings:{languageChanged:"تم تغيير اللغة",languageChangeFailed:"فشل تغيير اللغة",tryAgain:"يرجى المحاولة مرة أخرى"}},fr:{seo:{home:{title:"Eco DZ - Plateforme d'analyse des plantes, sols et environnements",description:"Plateforme intégrée pour l'analyse des plantes, sols et écosystèmes en Algérie utilisant l'intelligence artificielle et l'analyse biologique"},analysis:{title:"Analyse des Plantes et Sols - Eco DZ",description:"Analysez les plantes et les sols à l'aide de l'intelligence artificielle pour obtenir une évaluation précise et des recommandations d'amélioration"},database:{title:"Base de Données Écologique - Eco DZ",description:"Explorez notre base de données complète sur les plantes, sols et écosystèmes en Algérie"},simulation:{title:"Simulation Environnementale - Eco DZ",description:"Expérimentez avec la simulation environnementale et prédisez l'impact des changements sur l'écosystème local"},sensor:{title:"Sonde Biologique - Eco DZ",description:"Découvrez la sonde biologique pour analyser la sève des plantes et les composants du sol avec haute précision"},about:{title:"À Propos - Eco DZ",description:"Découvrez notre équipe et nos objectifs pour améliorer l'environnement et l'agriculture durable en Algérie"}},header:{title:"Eco DZ",analysis:"Analyse",database:"Base de Données",simulation:"Simulation",sensor:"Sonde",about:"À Propos",login:"Mon Compte"},hero:{title:"Plateforme Intelligente d'Analyse des Plantes, Sols et Écosystèmes",subtitle:"Outil intégré pour étudiants, chercheurs et agriculteurs en Algérie",startAnalysis:"Commencer l'Analyse",exploreDatabase:"Explorer la Base de Données"},features:{title:"Nos Services Principaux",imageAnalysis:{title:"Analyse des Plantes et Sols par Image",description:"Utilisation de techniques d'intelligence artificielle pour analyser les images de plantes et de sols et fournir une évaluation précise de leur état.",cta:"Commencer l'Analyse"},bioSensor:{title:"Analyse Biologique par Sonde",description:"Utilisation d'une sonde spéciale pour mesurer et analyser la sève des plantes et les composants du sol avec précision.",cta:"Découvrir la Sonde"},simulation:{title:"Simulation Environnementale Interactive",description:"Simulation de l'impact de l'introduction de nouvelles espèces végétales ou des changements environnementaux sur l'écosystème local.",cta:"Essayer la Simulation"}},analysis:{title:"Analyse des Plantes et des Sols",description:"Téléchargez une image de plante ou de sol, et notre système intelligent l'analysera pour fournir un rapport détaillé sur son état et des recommandations d'amélioration.",upload:{title:"Télécharger une Image pour Analyse",plantAnalysis:"Analyse de Plante",soilAnalysis:"Analyse de Sol",dragAndDrop:"Glissez l'image ici ou cliquez pour sélectionner",fileTypes:"JPG, PNG ou HEIC jusqu'à 10MB",selectImage:"Sélectionner une Image",changeImage:"Changer l'Image",examples:{title:"Exemples d'images appropriées pour l'analyse:",healthy:"Exemple de feuille de plante saine",diseased:"Exemple de feuille de plante malade",soil:"Exemple d'échantillon de sol"}},result:{title:"Aperçu de l'Analyse",noImage:"L'aperçu de l'analyse apparaîtra ici après avoir téléchargé une image",readyToAnalyze:"Image prête pour l'analyse",analyzing:"Analyse en cours...",analyzeImage:"Analyser l'Image",connectSensor:"Connecter la Sonde",loginNotice:"Vous devez vous connecter pour sauvegarder les résultats d'analyse",condition:"Condition",recommendations:"Recommandations",confidence:"Niveau de Confiance",phLevel:"Niveau de pH",nutrients:"Nutriments",low:"Faible",high:"Élevé"},history:{title:"Vos Analyses Précédentes",viewAll:"Voir Tout",noAnalyses:"Aucune analyse précédente"},errors:{noImage:"Aucune image sélectionnée",pleaseSelectImage:"Veuillez sélectionner une image pour l'analyse",failed:"Échec de l'analyse",tryAgain:"Une erreur s'est produite lors de l'analyse, veuillez réessayer"},success:{title:"Analyse Réussie",description:"L'image a été analysée et les résultats sont affichés"}},database:{title:"Base de Données Écologique",description:"Explorez notre base de données complète des écosystèmes en Algérie, y compris les espèces végétales locales, les types de sols, et le climat.",search:{searchLabel:"Recherche",searchPlaceholder:"Nom de plante, type de sol...",categoryLabel:"Catégorie",regionLabel:"Région",allCategories:"Toutes les Catégories",allRegions:"Toute l'Algérie",plants:"Plantes",trees:"Arbres",soils:"Types de Sol",ecosystems:"Écosystèmes",north:"Nord",south:"Sud",east:"Est",west:"Ouest",highlands:"Hauts Plateaux",desert:"Désert"},item:{region:"Région",viewMore:"Voir Plus"},details:{scientificName:"Nom Scientifique",description:"Description",characteristics:"Caractéristiques"},noResults:"Aucun résultat correspondant à votre recherche",loadMore:"Afficher Plus d'Éléments"},simulation:{title:"Simulation Environnementale Interactive",description:"Expérimentez comment l'environnement local peut évoluer au fil du temps, et l'impact de l'introduction de nouvelles espèces végétales ou des changements dans l'écosystème.",controls:{title:"Paramètres de Simulation",selectEcosystem:"Sélectionner l'Écosystème",ecosystemPlaceholder:"Forêts Méditerranéennes (Nord)",introducedSpecies:"Introduction de Nouvelles Espèces",plants:{eucalyptus:"Eucalyptus",argan:"Arganier",aleppoPine:"Pin d'Alep",durumWheat:"Blé Dur"},climateFactors:"Facteurs Climatiques",rainfall:"Niveau de Précipitations",rainfallUnit:"mm/an",temperature:"Température Moyenne",windSpeed:"Vitesse du Vent",windSpeeds:{low:"Faible",medium:"Moyenne",high:"Élevée"},simulationPeriod:"Période de Simulation",years:"années",startSimulation:"Démarrer la Simulation",simulating:"Simulation en cours..."},results:{title:"Résultats de la Simulation",fullscreenTitle:"Simulation Environnementale (Plein Écran)",pressToStart:"Cliquez pour Démarrer la Simulation",selectSettings:"Sélectionnez d'abord les paramètres dans le menu adjacent",simulating:"Exécution de la simulation...",year:"Année",years:"Années",percentage:"Pourcentage",indicators:{vegetation:"Couverture Végétale",biodiversity:"Biodiversité",soilQuality:"Qualité du Sol",sustainability:"Durabilité"}},success:{title:"Simulation Réussie",description:"Une nouvelle simulation a été créée et les résultats sont affichés"},error:{title:"Échec de la Simulation",description:"Une erreur s'est produite lors de la simulation, veuillez réessayer"}},sensor:{title:"Sonde Intelligente pour Analyse Biologique",description:"Notre sonde biologique permet une analyse précise et directe des plantes et des sols, aidant à identifier les problèmes avant qu'ils ne deviennent visibles à l'œil nu.",features:{title:"Caractéristiques de la Sonde",item1:"Mesure des niveaux de nutriments et de minéraux dans le sol avec haute précision",item2:"Analyse de la sève des plantes et détection précoce des maladies",item3:"Mesure du pH et de la conductivité électrique du sol",item4:"Connexion directe via USB/USB-C avec l'application d'analyse"},requestInfo:"Demander des Informations",watchVideo:"Regarder la Vidéo Explicative",comingSoon:"Bientôt",deviceImage:"Dispositif de sonde biologique pour analyse",infoCard:{title:"Mesures Précises",description:"La sonde fournit des mesures avec une précision de 99,8% pour les éléments essentiels du sol."}},about:{title:"À Propos du Projet",description:"Nous sommes une équipe de chercheurs, d'ingénieurs et de spécialistes en sciences environnementales et agricoles, travaillant ensemble pour développer des outils technologiques avancés qui aident à comprendre et améliorer les écosystèmes en Algérie.",objectives:{title:"Nos Objectifs",item1:"Promouvoir la sensibilisation environnementale et la conservation de la biodiversité",item2:"Soutenir la prise de décisions agricoles éclairées basées sur des analyses précises",item3:"Fournir des outils éducatifs interactifs pour les étudiants et les chercheurs",item4:"Contribuer au développement de l'agriculture durable et intelligente"},contactUs:"Contactez-nous",readMore:"Lire Plus",images:{lab:"Chercheurs analysant des échantillons de plantes",field:"Travailleur de terrain utilisant une tablette pour surveiller les plantes",data:"Visualisation de données de surveillance environnementale",conservation:"Efforts de conservation dans les paysages algériens"}},footer:{title:"Eco DZ",description:"Plateforme numérique pour analyser, surveiller et améliorer les écosystèmes en Algérie en utilisant l'intelligence artificielle et l'analyse biologique.",quickLinks:{title:"Liens Rapides",analysis:"Analyse Intelligente",database:"Base de Données",simulation:"Simulation Environnementale",sensor:"Sonde Biologique",about:"À Propos"},support:{title:"Support et Aide",faq:"FAQ",guide:"Guide d'Utilisation",terms:"Termes Scientifiques",help:"Centre d'Aide",contact:"Contactez-nous"},newsletter:{title:"Inscrivez-vous à la Newsletter",description:"Recevez les dernières nouvelles et mises à jour sur le projet et l'environnement algérien.",emailPlaceholder:"Email"},copyright:"© 2023 Eco DZ. Tous droits réservés.",privacy:"Politique de Confidentialité",terms:"Conditions d'Utilisation",cookies:"Politique de Cookies"},auth:{login:"Se Connecter",logout:"Se Déconnecter",profile:"Profil",greeting:"Bonjour",user:"Utilisateur",loginRequired:"Connexion Requise",loginToAnalyze:"Vous devez vous connecter pour utiliser la fonction d'analyse",loginToSimulate:"Vous devez vous connecter pour utiliser la fonction de simulation",loginToSaveResults:"Connectez-vous pour sauvegarder les résultats d'analyse",loginToSaveSimulations:"Connectez-vous pour sauvegarder les résultats de simulation",loginToSaveDesc:"Connectez-vous pour sauvegarder les résultats d'analyses et de simulations et profiter de toutes les fonctionnalités de la plateforme"},settings:{languageChanged:"Langue Modifiée",languageChangeFailed:"Échec de Changement de Langue",tryAgain:"Veuillez réessayer"}}};function Jm(){const{data:t,isLoading:e}=E0({queryKey:["/api/auth/user"],retry:!1});return{user:t,isLoading:e,isAuthenticated:!!t}}function tn(){const{user:t}=Jm(),e=(t==null?void 0:t.language)||"ar";return k.useMemo(()=>({language:e,isRTL:e==="ar",t:r=>{const o=r.split(".");let s=x_[e];for(const i of o){if(!s[i])return console.warn(`Translation missing for key: ${r} in language: ${e}`),r;s=s[i]}return s},tObj:r=>{const o=r.split(".");let s=x_[e];for(const i of o){if(!s[i])return console.warn(`Translation section missing: ${r} in language: ${e}`),{};s=s[i]}return s}}),[e])}const woe=KE("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),Jt=k.forwardRef(({className:t,variant:e,size:n,asChild:r=!1,...o},s)=>{const i=r?ste:"button";return S.jsx(i,{className:Le(woe({variant:e,size:n,className:t})),ref:s,...o})});Jt.displayName="Button";function Soe(){const{t}=tn();return S.jsxs("section",{className:"relative h-96 overflow-hidden",style:{backgroundImage:"url('/images/landscape.png')",backgroundSize:"cover",backgroundPosition:"center"},children:[S.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-50"}),S.jsx("div",{className:"container mx-auto px-4 h-full flex items-center justify-center relative z-10",children:S.jsxs("div",{className:"text-center",children:[S.jsx("h1",{className:"text-4xl md:text-5xl font-bold text-white font-cairo mb-4",children:t("hero.title")}),S.jsx("p",{className:"text-lg md:text-xl text-white mb-8",children:t("hero.subtitle")}),S.jsxs("div",{className:"flex flex-col sm:flex-row justify-center gap-4",children:[S.jsx(ys,{href:"/analysis",children:S.jsx(Jt,{className:"bg-primary hover:bg-primary-dark text-white font-bold py-3 px-6 rounded-lg transition duration-300 shadow-lg",children:t("hero.startAnalysis")})}),S.jsx(ys,{href:"/database",children:S.jsx(Jt,{variant:"outline",className:"bg-white hover:bg-gray-100 text-primary font-bold py-3 px-6 rounded-lg transition duration-300 shadow-lg",children:t("hero.exploreDatabase")})})]})]})})]})}function Coe(){const{t}=tn();return S.jsx("section",{className:"py-16 bg-white",children:S.jsxs("div",{className:"container mx-auto px-4",children:[S.jsx("h2",{className:"text-3xl font-bold text-center mb-12 font-cairo",children:t("features.title")}),S.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:[S.jsx(ZS,{icon:S.jsx("img",{src:"/images/plant-analysis-icon.png",alt:"Plant Analysis",className:"w-10 h-10"}),title:t("features.imageAnalysis.title"),description:t("features.imageAnalysis.description"),linkText:t("features.imageAnalysis.cta"),linkHref:"/analysis",iconBgClass:"bg-primary-light bg-opacity-20",linkColor:"text-primary"}),S.jsx(ZS,{icon:S.jsx("img",{src:"/images/sensor-icon.svg",alt:"Bio Sensor",className:"w-10 h-10"}),title:t("features.bioSensor.title"),description:t("features.bioSensor.description"),linkText:t("features.bioSensor.cta"),linkHref:"/sensor",iconBgClass:"bg-secondary-light bg-opacity-20",linkColor:"text-secondary"}),S.jsx(ZS,{icon:S.jsx("img",{src:"/images/simulation-icon.svg",alt:"Environmental Simulation",className:"w-10 h-10"}),title:t("features.simulation.title"),description:t("features.simulation.description"),linkText:t("features.simulation.cta"),linkHref:"/simulation",iconBgClass:"bg-accent-light bg-opacity-20",linkColor:"text-accent"})]})]})})}function ZS({icon:t,iconBgClass:e,title:n,description:r,linkText:o,linkHref:s,linkColor:i}){return S.jsx(Bd,{className:"bg-gray-50 rounded-xl p-6 shadow-md hover:shadow-lg transition duration-300",children:S.jsxs(Mp,{className:"p-0",children:[S.jsx("div",{className:`w-16 h-16 ${e} rounded-full flex items-center justify-center mb-4`,children:t}),S.jsx("h3",{className:"text-xl font-bold mb-3 font-cairo",children:n}),S.jsx("p",{className:"text-gray-600 mb-4",children:r}),S.jsx(ys,{href:s,children:S.jsxs("a",{className:`${i} font-semibold flex items-center gap-1`,children:[o,S.jsx("span",{className:"material-icons text-sm",children:"arrow_back"})]})})]})})}var TW={exports:{}},$oe="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",koe=$oe,Toe=koe;function IW(){}function EW(){}EW.resetWarningCache=IW;var Ioe=function(){function t(r,o,s,i,a,l){if(l!==Toe){var c=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw c.name="Invariant Violation",c}}t.isRequired=t;function e(){return t}var n={array:t,bigint:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,elementType:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:EW,resetWarningCache:IW};return n.PropTypes=n,n};TW.exports=Ioe();var Eoe=TW.exports;const Oe=ft(Eoe);function Noe(t){return t&&typeof t=="object"&&"default"in t?t.default:t}var NW=k,Aoe=Noe(NW);function b_(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Ooe(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}var Poe=!!(typeof window<"u"&&window.document&&window.document.createElement);function Roe(t,e,n){if(typeof t!="function")throw new Error("Expected reducePropsToState to be a function.");if(typeof e!="function")throw new Error("Expected handleStateChangeOnClient to be a function.");if(typeof n<"u"&&typeof n!="function")throw new Error("Expected mapStateOnServer to either be undefined or a function.");function r(o){return o.displayName||o.name||"Component"}return function(s){if(typeof s!="function")throw new Error("Expected WrappedComponent to be a React component.");var i=[],a;function l(){a=t(i.map(function(u){return u.props})),c.canUseDOM?e(a):n&&(a=n(a))}var c=function(u){Ooe(d,u);function d(){return u.apply(this,arguments)||this}d.peek=function(){return a},d.rewind=function(){if(d.canUseDOM)throw new Error("You may only call rewind() on the server. Call peek() to read the current state.");var p=a;return a=void 0,i=[],p};var f=d.prototype;return f.UNSAFE_componentWillMount=function(){i.push(this),l()},f.componentDidUpdate=function(){l()},f.componentWillUnmount=function(){var p=i.indexOf(this);i.splice(p,1),l()},f.render=function(){return Aoe.createElement(s,this.props)},d}(NW.PureComponent);return b_(c,"displayName","SideEffect("+r(s)+")"),b_(c,"canUseDOM",Poe),c}}var _oe=Roe;const Doe=ft(_oe);var Moe=typeof Element<"u",Foe=typeof Map=="function",Loe=typeof Set=="function",joe=typeof ArrayBuffer=="function"&&!!ArrayBuffer.isView;function Kv(t,e){if(t===e)return!0;if(t&&e&&typeof t=="object"&&typeof e=="object"){if(t.constructor!==e.constructor)return!1;var n,r,o;if(Array.isArray(t)){if(n=t.length,n!=e.length)return!1;for(r=n;r--!==0;)if(!Kv(t[r],e[r]))return!1;return!0}var s;if(Foe&&t instanceof Map&&e instanceof Map){if(t.size!==e.size)return!1;for(s=t.entries();!(r=s.next()).done;)if(!e.has(r.value[0]))return!1;for(s=t.entries();!(r=s.next()).done;)if(!Kv(r.value[1],e.get(r.value[0])))return!1;return!0}if(Loe&&t instanceof Set&&e instanceof Set){if(t.size!==e.size)return!1;for(s=t.entries();!(r=s.next()).done;)if(!e.has(r.value[0]))return!1;return!0}if(joe&&ArrayBuffer.isView(t)&&ArrayBuffer.isView(e)){if(n=t.length,n!=e.length)return!1;for(r=n;r--!==0;)if(t[r]!==e[r])return!1;return!0}if(t.constructor===RegExp)return t.source===e.source&&t.flags===e.flags;if(t.valueOf!==Object.prototype.valueOf&&typeof t.valueOf=="function"&&typeof e.valueOf=="function")return t.valueOf()===e.valueOf();if(t.toString!==Object.prototype.toString&&typeof t.toString=="function"&&typeof e.toString=="function")return t.toString()===e.toString();if(o=Object.keys(t),n=o.length,n!==Object.keys(e).length)return!1;for(r=n;r--!==0;)if(!Object.prototype.hasOwnProperty.call(e,o[r]))return!1;if(Moe&&t instanceof Element)return!1;for(r=n;r--!==0;)if(!((o[r]==="_owner"||o[r]==="__v"||o[r]==="__o")&&t.$$typeof)&&!Kv(t[o[r]],e[o[r]]))return!1;return!0}return t!==t&&e!==e}var Boe=function(e,n){try{return Kv(e,n)}catch(r){if((r.message||"").match(/stack|recursion/i))return console.warn("react-fast-compare cannot handle circular refs"),!1;throw r}};const zoe=ft(Boe);/*
object-assign
(c) Sindre Sorhus
@license MIT
*/var w_=Object.getOwnPropertySymbols,Woe=Object.prototype.hasOwnProperty,Voe=Object.prototype.propertyIsEnumerable;function Uoe(t){if(t==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(t)}function Goe(){try{if(!Object.assign)return!1;var t=new String("abc");if(t[5]="de",Object.getOwnPropertyNames(t)[0]==="5")return!1;for(var e={},n=0;n<10;n++)e["_"+String.fromCharCode(n)]=n;var r=Object.getOwnPropertyNames(e).map(function(s){return e[s]});if(r.join("")!=="0123456789")return!1;var o={};return"abcdefghijklmnopqrst".split("").forEach(function(s){o[s]=s}),Object.keys(Object.assign({},o)).join("")==="abcdefghijklmnopqrst"}catch{return!1}}var Hoe=Goe()?Object.assign:function(t,e){for(var n,r=Uoe(t),o,s=1;s<arguments.length;s++){n=Object(arguments[s]);for(var i in n)Woe.call(n,i)&&(r[i]=n[i]);if(w_){o=w_(n);for(var a=0;a<o.length;a++)Voe.call(n,o[a])&&(r[o[a]]=n[o[a]])}}return r};const Koe=ft(Hoe);var vc={BODY:"bodyAttributes",HTML:"htmlAttributes",TITLE:"titleAttributes"},ze={BASE:"base",BODY:"body",HEAD:"head",HTML:"html",LINK:"link",META:"meta",NOSCRIPT:"noscript",SCRIPT:"script",STYLE:"style",TITLE:"title"};Object.keys(ze).map(function(t){return ze[t]});var Lt={CHARSET:"charset",CSS_TEXT:"cssText",HREF:"href",HTTPEQUIV:"http-equiv",INNER_HTML:"innerHTML",ITEM_PROP:"itemprop",NAME:"name",PROPERTY:"property",REL:"rel",SRC:"src",TARGET:"target"},Ex={accesskey:"accessKey",charset:"charSet",class:"className",contenteditable:"contentEditable",contextmenu:"contextMenu","http-equiv":"httpEquiv",itemprop:"itemProp",tabindex:"tabIndex"},Fp={DEFAULT_TITLE:"defaultTitle",DEFER:"defer",ENCODE_SPECIAL_CHARACTERS:"encodeSpecialCharacters",ON_CHANGE_CLIENT_STATE:"onChangeClientState",TITLE_TEMPLATE:"titleTemplate"},qoe=Object.keys(Ex).reduce(function(t,e){return t[Ex[e]]=e,t},{}),Xoe=[ze.NOSCRIPT,ze.SCRIPT,ze.STYLE],bs="data-react-helmet",Yoe=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Qoe=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},Zoe=function(){function t(e,n){for(var r=0;r<n.length;r++){var o=n[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),Lr=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Joe=function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)},S_=function(t,e){var n={};for(var r in t)e.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r]);return n},ese=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t},gk=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return n===!1?String(e):String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;")},tse=function(e){var n=id(e,ze.TITLE),r=id(e,Fp.TITLE_TEMPLATE);if(r&&n)return r.replace(/%s/g,function(){return Array.isArray(n)?n.join(""):n});var o=id(e,Fp.DEFAULT_TITLE);return n||o||void 0},nse=function(e){return id(e,Fp.ON_CHANGE_CLIENT_STATE)||function(){}},JS=function(e,n){return n.filter(function(r){return typeof r[e]<"u"}).map(function(r){return r[e]}).reduce(function(r,o){return Lr({},r,o)},{})},rse=function(e,n){return n.filter(function(r){return typeof r[ze.BASE]<"u"}).map(function(r){return r[ze.BASE]}).reverse().reduce(function(r,o){if(!r.length)for(var s=Object.keys(o),i=0;i<s.length;i++){var a=s[i],l=a.toLowerCase();if(e.indexOf(l)!==-1&&o[l])return r.concat(o)}return r},[])},xh=function(e,n,r){var o={};return r.filter(function(s){return Array.isArray(s[e])?!0:(typeof s[e]<"u"&&ase("Helmet: "+e+' should be of type "Array". Instead found type "'+Yoe(s[e])+'"'),!1)}).map(function(s){return s[e]}).reverse().reduce(function(s,i){var a={};i.filter(function(f){for(var h=void 0,p=Object.keys(f),m=0;m<p.length;m++){var g=p[m],y=g.toLowerCase();n.indexOf(y)!==-1&&!(h===Lt.REL&&f[h].toLowerCase()==="canonical")&&!(y===Lt.REL&&f[y].toLowerCase()==="stylesheet")&&(h=y),n.indexOf(g)!==-1&&(g===Lt.INNER_HTML||g===Lt.CSS_TEXT||g===Lt.ITEM_PROP)&&(h=g)}if(!h||!f[h])return!1;var v=f[h].toLowerCase();return o[h]||(o[h]={}),a[h]||(a[h]={}),o[h][v]?!1:(a[h][v]=!0,!0)}).reverse().forEach(function(f){return s.push(f)});for(var l=Object.keys(a),c=0;c<l.length;c++){var u=l[c],d=Koe({},o[u],a[u]);o[u]=d}return s},[]).reverse()},id=function(e,n){for(var r=e.length-1;r>=0;r--){var o=e[r];if(o.hasOwnProperty(n))return o[n]}return null},ose=function(e){return{baseTag:rse([Lt.HREF,Lt.TARGET],e),bodyAttributes:JS(vc.BODY,e),defer:id(e,Fp.DEFER),encode:id(e,Fp.ENCODE_SPECIAL_CHARACTERS),htmlAttributes:JS(vc.HTML,e),linkTags:xh(ze.LINK,[Lt.REL,Lt.HREF],e),metaTags:xh(ze.META,[Lt.NAME,Lt.CHARSET,Lt.HTTPEQUIV,Lt.PROPERTY,Lt.ITEM_PROP],e),noscriptTags:xh(ze.NOSCRIPT,[Lt.INNER_HTML],e),onChangeClientState:nse(e),scriptTags:xh(ze.SCRIPT,[Lt.SRC,Lt.INNER_HTML],e),styleTags:xh(ze.STYLE,[Lt.CSS_TEXT],e),title:tse(e),titleAttributes:JS(vc.TITLE,e)}},yk=function(){var t=Date.now();return function(e){var n=Date.now();n-t>16?(t=n,e(n)):setTimeout(function(){yk(e)},0)}}(),C_=function(e){return clearTimeout(e)},sse=typeof window<"u"?window.requestAnimationFrame&&window.requestAnimationFrame.bind(window)||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||yk:global.requestAnimationFrame||yk,ise=typeof window<"u"?window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||C_:global.cancelAnimationFrame||C_,ase=function(e){return console&&typeof console.warn=="function"&&console.warn(e)},bh=null,lse=function(e){bh&&ise(bh),e.defer?bh=sse(function(){$_(e,function(){bh=null})}):($_(e),bh=null)},$_=function(e,n){var r=e.baseTag,o=e.bodyAttributes,s=e.htmlAttributes,i=e.linkTags,a=e.metaTags,l=e.noscriptTags,c=e.onChangeClientState,u=e.scriptTags,d=e.styleTags,f=e.title,h=e.titleAttributes;vk(ze.BODY,o),vk(ze.HTML,s),cse(f,h);var p={baseTag:wu(ze.BASE,r),linkTags:wu(ze.LINK,i),metaTags:wu(ze.META,a),noscriptTags:wu(ze.NOSCRIPT,l),scriptTags:wu(ze.SCRIPT,u),styleTags:wu(ze.STYLE,d)},m={},g={};Object.keys(p).forEach(function(y){var v=p[y],x=v.newTags,b=v.oldTags;x.length&&(m[y]=x),b.length&&(g[y]=p[y].oldTags)}),n&&n(),c(e,m,g)},AW=function(e){return Array.isArray(e)?e.join(""):e},cse=function(e,n){typeof e<"u"&&document.title!==e&&(document.title=AW(e)),vk(ze.TITLE,n)},vk=function(e,n){var r=document.getElementsByTagName(e)[0];if(r){for(var o=r.getAttribute(bs),s=o?o.split(","):[],i=[].concat(s),a=Object.keys(n),l=0;l<a.length;l++){var c=a[l],u=n[c]||"";r.getAttribute(c)!==u&&r.setAttribute(c,u),s.indexOf(c)===-1&&s.push(c);var d=i.indexOf(c);d!==-1&&i.splice(d,1)}for(var f=i.length-1;f>=0;f--)r.removeAttribute(i[f]);s.length===i.length?r.removeAttribute(bs):r.getAttribute(bs)!==a.join(",")&&r.setAttribute(bs,a.join(","))}},wu=function(e,n){var r=document.head||document.querySelector(ze.HEAD),o=r.querySelectorAll(e+"["+bs+"]"),s=Array.prototype.slice.call(o),i=[],a=void 0;return n&&n.length&&n.forEach(function(l){var c=document.createElement(e);for(var u in l)if(l.hasOwnProperty(u))if(u===Lt.INNER_HTML)c.innerHTML=l.innerHTML;else if(u===Lt.CSS_TEXT)c.styleSheet?c.styleSheet.cssText=l.cssText:c.appendChild(document.createTextNode(l.cssText));else{var d=typeof l[u]>"u"?"":l[u];c.setAttribute(u,d)}c.setAttribute(bs,"true"),s.some(function(f,h){return a=h,c.isEqualNode(f)})?s.splice(a,1):i.push(c)}),s.forEach(function(l){return l.parentNode.removeChild(l)}),i.forEach(function(l){return r.appendChild(l)}),{oldTags:s,newTags:i}},OW=function(e){return Object.keys(e).reduce(function(n,r){var o=typeof e[r]<"u"?r+'="'+e[r]+'"':""+r;return n?n+" "+o:o},"")},use=function(e,n,r,o){var s=OW(r),i=AW(n);return s?"<"+e+" "+bs+'="true" '+s+">"+gk(i,o)+"</"+e+">":"<"+e+" "+bs+'="true">'+gk(i,o)+"</"+e+">"},dse=function(e,n,r){return n.reduce(function(o,s){var i=Object.keys(s).filter(function(c){return!(c===Lt.INNER_HTML||c===Lt.CSS_TEXT)}).reduce(function(c,u){var d=typeof s[u]>"u"?u:u+'="'+gk(s[u],r)+'"';return c?c+" "+d:d},""),a=s.innerHTML||s.cssText||"",l=Xoe.indexOf(e)===-1;return o+"<"+e+" "+bs+'="true" '+i+(l?"/>":">"+a+"</"+e+">")},"")},PW=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return Object.keys(e).reduce(function(r,o){return r[Ex[o]||o]=e[o],r},n)},fse=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return Object.keys(e).reduce(function(r,o){return r[qoe[o]||o]=e[o],r},n)},hse=function(e,n,r){var o,s=(o={key:n},o[bs]=!0,o),i=PW(r,s);return[z.createElement(ze.TITLE,i,n)]},pse=function(e,n){return n.map(function(r,o){var s,i=(s={key:o},s[bs]=!0,s);return Object.keys(r).forEach(function(a){var l=Ex[a]||a;if(l===Lt.INNER_HTML||l===Lt.CSS_TEXT){var c=r.innerHTML||r.cssText;i.dangerouslySetInnerHTML={__html:c}}else i[l]=r[a]}),z.createElement(e,i)})},Ci=function(e,n,r){switch(e){case ze.TITLE:return{toComponent:function(){return hse(e,n.title,n.titleAttributes)},toString:function(){return use(e,n.title,n.titleAttributes,r)}};case vc.BODY:case vc.HTML:return{toComponent:function(){return PW(n)},toString:function(){return OW(n)}};default:return{toComponent:function(){return pse(e,n)},toString:function(){return dse(e,n,r)}}}},RW=function(e){var n=e.baseTag,r=e.bodyAttributes,o=e.encode,s=e.htmlAttributes,i=e.linkTags,a=e.metaTags,l=e.noscriptTags,c=e.scriptTags,u=e.styleTags,d=e.title,f=d===void 0?"":d,h=e.titleAttributes;return{base:Ci(ze.BASE,n,o),bodyAttributes:Ci(vc.BODY,r,o),htmlAttributes:Ci(vc.HTML,s,o),link:Ci(ze.LINK,i,o),meta:Ci(ze.META,a,o),noscript:Ci(ze.NOSCRIPT,l,o),script:Ci(ze.SCRIPT,c,o),style:Ci(ze.STYLE,u,o),title:Ci(ze.TITLE,{title:f,titleAttributes:h},o)}},mse=function(e){var n,r;return r=n=function(o){Joe(s,o);function s(){return Qoe(this,s),ese(this,o.apply(this,arguments))}return s.prototype.shouldComponentUpdate=function(a){return!zoe(this.props,a)},s.prototype.mapNestedChildrenToProps=function(a,l){if(!l)return null;switch(a.type){case ze.SCRIPT:case ze.NOSCRIPT:return{innerHTML:l};case ze.STYLE:return{cssText:l}}throw new Error("<"+a.type+" /> elements are self-closing and can not contain children. Refer to our API for more information.")},s.prototype.flattenArrayTypeChildren=function(a){var l,c=a.child,u=a.arrayTypeChildren,d=a.newChildProps,f=a.nestedChildren;return Lr({},u,(l={},l[c.type]=[].concat(u[c.type]||[],[Lr({},d,this.mapNestedChildrenToProps(c,f))]),l))},s.prototype.mapObjectTypeChildren=function(a){var l,c,u=a.child,d=a.newProps,f=a.newChildProps,h=a.nestedChildren;switch(u.type){case ze.TITLE:return Lr({},d,(l={},l[u.type]=h,l.titleAttributes=Lr({},f),l));case ze.BODY:return Lr({},d,{bodyAttributes:Lr({},f)});case ze.HTML:return Lr({},d,{htmlAttributes:Lr({},f)})}return Lr({},d,(c={},c[u.type]=Lr({},f),c))},s.prototype.mapArrayTypeChildrenToProps=function(a,l){var c=Lr({},l);return Object.keys(a).forEach(function(u){var d;c=Lr({},c,(d={},d[u]=a[u],d))}),c},s.prototype.warnOnInvalidChildren=function(a,l){return!0},s.prototype.mapChildrenToProps=function(a,l){var c=this,u={};return z.Children.forEach(a,function(d){if(!(!d||!d.props)){var f=d.props,h=f.children,p=S_(f,["children"]),m=fse(p);switch(c.warnOnInvalidChildren(d,h),d.type){case ze.LINK:case ze.META:case ze.NOSCRIPT:case ze.SCRIPT:case ze.STYLE:u=c.flattenArrayTypeChildren({child:d,arrayTypeChildren:u,newChildProps:m,nestedChildren:h});break;default:l=c.mapObjectTypeChildren({child:d,newProps:l,newChildProps:m,nestedChildren:h});break}}}),l=this.mapArrayTypeChildrenToProps(u,l),l},s.prototype.render=function(){var a=this.props,l=a.children,c=S_(a,["children"]),u=Lr({},c);return l&&(u=this.mapChildrenToProps(l,u)),z.createElement(e,u)},Zoe(s,null,[{key:"canUseDOM",set:function(a){e.canUseDOM=a}}]),s}(z.Component),n.propTypes={base:Oe.object,bodyAttributes:Oe.object,children:Oe.oneOfType([Oe.arrayOf(Oe.node),Oe.node]),defaultTitle:Oe.string,defer:Oe.bool,encodeSpecialCharacters:Oe.bool,htmlAttributes:Oe.object,link:Oe.arrayOf(Oe.object),meta:Oe.arrayOf(Oe.object),noscript:Oe.arrayOf(Oe.object),onChangeClientState:Oe.func,script:Oe.arrayOf(Oe.object),style:Oe.arrayOf(Oe.object),title:Oe.string,titleAttributes:Oe.object,titleTemplate:Oe.string},n.defaultProps={defer:!0,encodeSpecialCharacters:!0},n.peek=e.peek,n.rewind=function(){var o=e.rewind();return o||(o=RW({baseTag:[],bodyAttributes:{},encodeSpecialCharacters:!0,htmlAttributes:{},linkTags:[],metaTags:[],noscriptTags:[],scriptTags:[],styleTags:[],title:"",titleAttributes:{}})),o},r},gse=function(){return null},yse=Doe(ose,lse,RW)(gse),dl=mse(yse);dl.renderStatic=dl.rewind;function vse(){const{t}=tn();return S.jsxs(S.Fragment,{children:[S.jsxs(dl,{children:[S.jsx("title",{children:t("seo.home.title")}),S.jsx("meta",{name:"description",content:t("seo.home.description")})]}),S.jsxs("div",{className:"bg-gray-50",children:[S.jsx(Soe,{}),S.jsx(Coe,{})]})]})}var xse=k.createContext(void 0);function eg(t){const e=k.useContext(xse);return t||e||"ltr"}var eC="rovingFocusGroup.onEntryFocus",bse={bubbles:!1,cancelable:!0},j0="RovingFocusGroup",[xk,_W,wse]=Xm(j0),[Sse,B0]=Jr(j0,[wse]),[Cse,$se]=Sse(j0),DW=k.forwardRef((t,e)=>S.jsx(xk.Provider,{scope:t.__scopeRovingFocusGroup,children:S.jsx(xk.Slot,{scope:t.__scopeRovingFocusGroup,children:S.jsx(kse,{...t,ref:e})})}));DW.displayName=j0;var kse=k.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:n,orientation:r,loop:o=!1,dir:s,currentTabStopId:i,defaultCurrentTabStopId:a,onCurrentTabStopIdChange:l,onEntryFocus:c,preventScrollOnEntryFocus:u=!1,...d}=t,f=k.useRef(null),h=Xe(e,f),p=eg(s),[m=null,g]=qi({prop:i,defaultProp:a,onChange:l}),[y,v]=k.useState(!1),x=Kn(c),b=_W(n),w=k.useRef(!1),[C,$]=k.useState(0);return k.useEffect(()=>{const T=f.current;if(T)return T.addEventListener(eC,x),()=>T.removeEventListener(eC,x)},[x]),S.jsx(Cse,{scope:n,orientation:r,dir:p,loop:o,currentTabStopId:m,onItemFocus:k.useCallback(T=>g(T),[g]),onItemShiftTab:k.useCallback(()=>v(!0),[]),onFocusableItemAdd:k.useCallback(()=>$(T=>T+1),[]),onFocusableItemRemove:k.useCallback(()=>$(T=>T-1),[]),children:S.jsx(Re.div,{tabIndex:y||C===0?-1:0,"data-orientation":r,...d,ref:h,style:{outline:"none",...t.style},onMouseDown:me(t.onMouseDown,()=>{w.current=!0}),onFocus:me(t.onFocus,T=>{const I=!w.current;if(T.target===T.currentTarget&&I&&!y){const E=new CustomEvent(eC,bse);if(T.currentTarget.dispatchEvent(E),!E.defaultPrevented){const N=b().filter(_=>_.focusable),A=N.find(_=>_.active),R=N.find(_=>_.id===m),F=[A,R,...N].filter(Boolean).map(_=>_.ref.current);LW(F,u)}}w.current=!1}),onBlur:me(t.onBlur,()=>v(!1))})})}),MW="RovingFocusGroupItem",FW=k.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:n,focusable:r=!0,active:o=!1,tabStopId:s,...i}=t,a=Fi(),l=s||a,c=$se(MW,n),u=c.currentTabStopId===l,d=_W(n),{onFocusableItemAdd:f,onFocusableItemRemove:h}=c;return k.useEffect(()=>{if(r)return f(),()=>h()},[r,f,h]),S.jsx(xk.ItemSlot,{scope:n,id:l,focusable:r,active:o,children:S.jsx(Re.span,{tabIndex:u?0:-1,"data-orientation":c.orientation,...i,ref:e,onMouseDown:me(t.onMouseDown,p=>{r?c.onItemFocus(l):p.preventDefault()}),onFocus:me(t.onFocus,()=>c.onItemFocus(l)),onKeyDown:me(t.onKeyDown,p=>{if(p.key==="Tab"&&p.shiftKey){c.onItemShiftTab();return}if(p.target!==p.currentTarget)return;const m=Ese(p,c.orientation,c.dir);if(m!==void 0){if(p.metaKey||p.ctrlKey||p.altKey||p.shiftKey)return;p.preventDefault();let y=d().filter(v=>v.focusable).map(v=>v.ref.current);if(m==="last")y.reverse();else if(m==="prev"||m==="next"){m==="prev"&&y.reverse();const v=y.indexOf(p.currentTarget);y=c.loop?Nse(y,v+1):y.slice(v+1)}setTimeout(()=>LW(y))}})})})});FW.displayName=MW;var Tse={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function Ise(t,e){return e!=="rtl"?t:t==="ArrowLeft"?"ArrowRight":t==="ArrowRight"?"ArrowLeft":t}function Ese(t,e,n){const r=Ise(t.key,n);if(!(e==="vertical"&&["ArrowLeft","ArrowRight"].includes(r))&&!(e==="horizontal"&&["ArrowUp","ArrowDown"].includes(r)))return Tse[r]}function LW(t,e=!1){const n=document.activeElement;for(const r of t)if(r===n||(r.focus({preventScroll:e}),document.activeElement!==n))return}function Nse(t,e){return t.map((n,r)=>t[(e+r)%t.length])}var jW=DW,BW=FW;function z0(t){const e=k.useRef({value:t,previous:t});return k.useMemo(()=>(e.current.value!==t&&(e.current.previous=e.current.value,e.current.value=t),e.current.previous),[t])}var uN="Radio",[Ase,zW]=Jr(uN),[Ose,Pse]=Ase(uN),WW=k.forwardRef((t,e)=>{const{__scopeRadio:n,name:r,checked:o=!1,required:s,disabled:i,value:a="on",onCheck:l,form:c,...u}=t,[d,f]=k.useState(null),h=Xe(e,g=>f(g)),p=k.useRef(!1),m=d?c||!!d.closest("form"):!0;return S.jsxs(Ose,{scope:n,checked:o,disabled:i,children:[S.jsx(Re.button,{type:"button",role:"radio","aria-checked":o,"data-state":GW(o),"data-disabled":i?"":void 0,disabled:i,value:a,...u,ref:h,onClick:me(t.onClick,g=>{o||l==null||l(),m&&(p.current=g.isPropagationStopped(),p.current||g.stopPropagation())})}),m&&S.jsx(Rse,{control:d,bubbles:!p.current,name:r,value:a,checked:o,required:s,disabled:i,form:c,style:{transform:"translateX(-100%)"}})]})});WW.displayName=uN;var VW="RadioIndicator",UW=k.forwardRef((t,e)=>{const{__scopeRadio:n,forceMount:r,...o}=t,s=Pse(VW,n);return S.jsx(Yo,{present:r||s.checked,children:S.jsx(Re.span,{"data-state":GW(s.checked),"data-disabled":s.disabled?"":void 0,...o,ref:e})})});UW.displayName=VW;var Rse=t=>{const{control:e,checked:n,bubbles:r=!0,...o}=t,s=k.useRef(null),i=z0(n),a=M0(e);return k.useEffect(()=>{const l=s.current,c=window.HTMLInputElement.prototype,d=Object.getOwnPropertyDescriptor(c,"checked").set;if(i!==n&&d){const f=new Event("click",{bubbles:r});d.call(l,n),l.dispatchEvent(f)}},[i,n,r]),S.jsx("input",{type:"radio","aria-hidden":!0,defaultChecked:n,...o,tabIndex:-1,ref:s,style:{...t.style,...a,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function GW(t){return t?"checked":"unchecked"}var _se=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],dN="RadioGroup",[Dse,Lot]=Jr(dN,[B0,zW]),HW=B0(),KW=zW(),[Mse,Fse]=Dse(dN),qW=k.forwardRef((t,e)=>{const{__scopeRadioGroup:n,name:r,defaultValue:o,value:s,required:i=!1,disabled:a=!1,orientation:l,dir:c,loop:u=!0,onValueChange:d,...f}=t,h=HW(n),p=eg(c),[m,g]=qi({prop:s,defaultProp:o,onChange:d});return S.jsx(Mse,{scope:n,name:r,required:i,disabled:a,value:m,onValueChange:g,children:S.jsx(jW,{asChild:!0,...h,orientation:l,dir:p,loop:u,children:S.jsx(Re.div,{role:"radiogroup","aria-required":i,"aria-orientation":l,"data-disabled":a?"":void 0,dir:p,...f,ref:e})})})});qW.displayName=dN;var XW="RadioGroupItem",YW=k.forwardRef((t,e)=>{const{__scopeRadioGroup:n,disabled:r,...o}=t,s=Fse(XW,n),i=s.disabled||r,a=HW(n),l=KW(n),c=k.useRef(null),u=Xe(e,c),d=s.value===o.value,f=k.useRef(!1);return k.useEffect(()=>{const h=m=>{_se.includes(m.key)&&(f.current=!0)},p=()=>f.current=!1;return document.addEventListener("keydown",h),document.addEventListener("keyup",p),()=>{document.removeEventListener("keydown",h),document.removeEventListener("keyup",p)}},[]),S.jsx(BW,{asChild:!0,...a,focusable:!i,active:d,children:S.jsx(WW,{disabled:i,required:s.required,checked:d,...l,...o,name:s.name,ref:u,onCheck:()=>s.onValueChange(o.value),onKeyDown:me(h=>{h.key==="Enter"&&h.preventDefault()}),onFocus:me(o.onFocus,()=>{var h;f.current&&((h=c.current)==null||h.click())})})})});YW.displayName=XW;var Lse="RadioGroupIndicator",QW=k.forwardRef((t,e)=>{const{__scopeRadioGroup:n,...r}=t,o=KW(n);return S.jsx(UW,{...o,...r,ref:e})});QW.displayName=Lse;var ZW=qW,JW=YW,jse=QW;const eV=k.forwardRef(({className:t,...e},n)=>S.jsx(ZW,{className:Le("grid gap-2",t),...e,ref:n}));eV.displayName=ZW.displayName;const bk=k.forwardRef(({className:t,...e},n)=>S.jsx(JW,{ref:n,className:Le("aspect-square h-4 w-4 rounded-full border border-primary text-primary ring-offset-background focus:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",t),...e,children:S.jsx(jse,{className:"flex items-center justify-center",children:S.jsx(j4,{className:"h-2.5 w-2.5 fill-current text-current"})})}));bk.displayName=JW.displayName;var Bse="Label",tV=k.forwardRef((t,e)=>S.jsx(Re.label,{...t,ref:e,onMouseDown:n=>{var o;n.target.closest("button, input, select, textarea")||((o=t.onMouseDown)==null||o.call(t,n),!n.defaultPrevented&&n.detail>1&&n.preventDefault())}}));tV.displayName=Bse;var nV=tV;const zse=KE("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),Na=k.forwardRef(({className:t,...e},n)=>S.jsx(nV,{ref:n,className:Le(zse(),t),...e}));Na.displayName=nV.displayName;function Wse({analysisType:t,onAnalysisTypeChange:e,onImageChange:n,previewUrl:r}){const{t:o}=tn(),[s,i]=k.useState(!1),a=k.useRef(null),l=p=>{e(p)},c=p=>{p.target.files&&p.target.files[0]&&n(p.target.files[0])},u=p=>{p.preventDefault(),i(!0)},d=()=>{i(!1)},f=p=>{p.preventDefault(),i(!1),p.dataTransfer.files&&p.dataTransfer.files[0]&&n(p.dataTransfer.files[0])},h=()=>{var p;(p=a.current)==null||p.click()};return S.jsxs("div",{className:"p-6 border-b md:border-b-0 md:border-l border-gray-200",children:[S.jsx("h3",{className:"text-xl font-bold mb-4 font-cairo",children:o("analysis.upload.title")}),S.jsx("div",{className:"mb-6",children:S.jsxs(eV,{value:t,onValueChange:l,className:"flex items-center",children:[S.jsxs("div",{className:"flex items-center mr-6",children:[S.jsx(bk,{value:"plant",id:"plant-radio"}),S.jsx(Na,{htmlFor:"plant-radio",className:"mr-2 text-gray-700",children:o("analysis.upload.plantAnalysis")})]}),S.jsxs("div",{className:"flex items-center",children:[S.jsx(bk,{value:"soil",id:"soil-radio"}),S.jsx(Na,{htmlFor:"soil-radio",className:"mr-2 text-gray-700",children:o("analysis.upload.soilAnalysis")})]})]})}),S.jsx("div",{className:`border-2 border-dashed ${s?"border-primary bg-primary/5":"border-gray-300"} 
                   rounded-lg p-8 text-center cursor-pointer hover:bg-gray-50 transition`,onDragOver:u,onDragLeave:d,onDrop:f,onClick:h,children:r?S.jsxs("div",{className:"relative",children:[S.jsx("img",{src:r,alt:"Preview",className:"w-full h-48 object-contain rounded"}),S.jsx(Jt,{variant:"default",size:"sm",className:"mt-4",onClick:p=>{p.stopPropagation(),n(null)},children:o("analysis.upload.changeImage")})]}):S.jsxs(S.Fragment,{children:[S.jsx(ane,{className:"h-12 w-12 text-gray-400 mx-auto mb-2"}),S.jsx("p",{className:"text-gray-500 mb-2",children:o("analysis.upload.dragAndDrop")}),S.jsx("p",{className:"text-gray-400 text-sm",children:o("analysis.upload.fileTypes")}),S.jsx("input",{type:"file",className:"hidden",accept:"image/*",ref:a,onChange:c}),S.jsx(Jt,{className:"mt-4 px-4 py-2 bg-primary text-white rounded-lg hover:bg-primary-dark transition",children:o("analysis.upload.selectImage")})]})}),S.jsxs("div",{className:"mt-6",children:[S.jsx("h4",{className:"font-bold mb-2",children:o("analysis.upload.examples.title")}),S.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[S.jsx("img",{src:"https://images.unsplash.com/photo-1530836369250-ef72a3f5cda8?ixlib=rb-4.0.3&auto=format&fit=crop&w=200&h=150",className:"rounded-lg h-20 w-full object-cover",alt:o("analysis.upload.examples.healthy")}),S.jsx("img",{src:"https://pixabay.com/get/gb61cfcd1132601bd801eb4031738d33b917aab4e19fa12db751895991ddb76c4f019e5188b4ecb1644cc3ecd43aca4cc80138e011f9c03b465f9db5b404cf9eb_1280.jpg",className:"rounded-lg h-20 w-full object-cover",alt:o("analysis.upload.examples.diseased")}),S.jsx("img",{src:"https://images.unsplash.com/photo-1431794062232-2a99a5431c6c?ixlib=rb-4.0.3&auto=format&fit=crop&w=200&h=150",className:"rounded-lg h-20 w-full object-cover",alt:o("analysis.upload.examples.soil")})]})]})]})}function Vse({analysisType:t,previewUrl:e,result:n,isAnalyzing:r,onAnalyze:o,isAuthenticated:s}){const{t:i}=tn();return S.jsxs("div",{className:"p-6 bg-gray-50",children:[S.jsx("h3",{className:"text-xl font-bold mb-4 font-cairo",children:i("analysis.result.title")}),S.jsx("div",{className:"bg-white rounded-lg shadow-inner p-4 h-80 flex items-center justify-center relative",children:r?S.jsxs("div",{className:"text-center",children:[S.jsx(Cx,{className:"h-12 w-12 animate-spin text-primary mx-auto mb-3"}),S.jsx("p",{className:"text-gray-500",children:i("analysis.result.analyzing")})]}):n?S.jsx("div",{className:"w-full h-full overflow-auto p-4",children:t==="plant"?S.jsx(Use,{result:n}):S.jsx(Gse,{result:n})}):e?S.jsxs("div",{className:"text-center",children:[S.jsx(uk,{className:"h-12 w-12 text-primary mx-auto mb-3"}),S.jsx("p",{className:"text-gray-500",children:i("analysis.result.readyToAnalyze")})]}):S.jsxs("div",{className:"text-center",children:[S.jsx(uk,{className:"h-12 w-12 text-gray-300 mx-auto mb-3"}),S.jsx("p",{className:"text-gray-500",children:i("analysis.result.noImage")})]})}),S.jsxs("div",{className:"mt-6",children:[S.jsxs("div",{className:"flex justify-between mb-4",children:[S.jsx(Jt,{className:"px-6 py-2.5 bg-primary text-white rounded-lg hover:bg-primary-dark transition font-bold",disabled:!e||r,onClick:o,children:r?S.jsxs(S.Fragment,{children:[S.jsx(Cx,{className:"mr-2 h-4 w-4 animate-spin"}),i("analysis.result.analyzing")]}):i("analysis.result.analyzeImage")}),S.jsxs(Jt,{variant:"outline",className:"px-6 py-2.5 bg-white border border-gray-300 text-gray-500 rounded-lg hover:bg-gray-50 transition",disabled:!0,children:[S.jsx(Xte,{className:"mr-2 h-4 w-4"}),i("analysis.result.connectSensor")]})]}),!s&&S.jsxs("p",{className:"text-xs text-gray-500",children:["* ",i("analysis.result.loginNotice")]})]})]})}function Use({result:t}){const{t:e}=tn();return S.jsxs("div",{className:"space-y-4",children:[S.jsxs("div",{className:"flex justify-between",children:[S.jsx("h4",{className:"text-lg font-bold",children:t.plantName}),S.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${t.healthStatus==="سليم"?"bg-success bg-opacity-10 text-success":t.healthStatus==="مصاب"?"bg-error bg-opacity-10 text-error":"bg-warning bg-opacity-10 text-warning"}`,children:t.healthStatus})]}),S.jsxs("div",{children:[S.jsxs("h5",{className:"font-semibold mb-1",children:[e("analysis.result.condition"),":"]}),S.jsx("p",{children:t.condition})]}),S.jsxs("div",{children:[S.jsxs("h5",{className:"font-semibold mb-1",children:[e("analysis.result.recommendations"),":"]}),S.jsx("p",{children:t.recommendations})]}),S.jsxs("div",{children:[S.jsxs("h5",{className:"font-semibold mb-1",children:[e("analysis.result.confidence"),":"]}),S.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2.5",children:S.jsx("div",{className:"bg-primary h-2.5 rounded-full",style:{width:`${t.confidenceScore}%`}})}),S.jsxs("div",{className:"flex justify-between mt-1",children:[S.jsx("span",{className:"text-xs",children:e("analysis.result.low")}),S.jsxs("span",{className:"text-xs",children:[t.confidenceScore,"%"]}),S.jsx("span",{className:"text-xs",children:e("analysis.result.high")})]})]})]})}function Gse({result:t}){const{t:e}=tn();return S.jsxs("div",{className:"space-y-4",children:[S.jsxs("div",{className:"flex justify-between",children:[S.jsx("h4",{className:"text-lg font-bold",children:t.soilType}),S.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${t.quality==="جيد"?"bg-success bg-opacity-10 text-success":t.quality==="ضعيف"?"bg-error bg-opacity-10 text-error":"bg-warning bg-opacity-10 text-warning"}`,children:t.quality})]}),S.jsxs("div",{children:[S.jsxs("h5",{className:"font-semibold mb-1",children:[e("analysis.result.phLevel"),":"]}),S.jsx("p",{children:t.phLevel})]}),S.jsxs("div",{children:[S.jsxs("h5",{className:"font-semibold mb-1",children:[e("analysis.result.nutrients"),":"]}),S.jsx("div",{className:"grid grid-cols-3 gap-2",children:Object.entries(t.nutrients).map(([n,r])=>S.jsxs("div",{className:"bg-gray-100 p-2 rounded text-center",children:[S.jsx("div",{className:"text-sm font-medium",children:n}),S.jsx("div",{className:"text-xs",children:r})]},n))})]}),S.jsxs("div",{children:[S.jsxs("h5",{className:"font-semibold mb-1",children:[e("analysis.result.recommendations"),":"]}),S.jsx("p",{children:t.recommendations})]}),S.jsxs("div",{children:[S.jsxs("h5",{className:"font-semibold mb-1",children:[e("analysis.result.confidence"),":"]}),S.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2.5",children:S.jsx("div",{className:"bg-primary h-2.5 rounded-full",style:{width:`${t.confidenceScore}%`}})}),S.jsxs("div",{className:"flex justify-between mt-1",children:[S.jsx("span",{className:"text-xs",children:e("analysis.result.low")}),S.jsxs("span",{className:"text-xs",children:[t.confidenceScore,"%"]}),S.jsx("span",{className:"text-xs",children:e("analysis.result.high")})]})]})]})}function Ds(t){const e=Object.prototype.toString.call(t);return t instanceof Date||typeof t=="object"&&e==="[object Date]"?new t.constructor(+t):typeof t=="number"||e==="[object Number]"||typeof t=="string"||e==="[object String]"?new Date(t):new Date(NaN)}function Pc(t,e){return t instanceof Date?new t.constructor(e):new Date(e)}const rV=6048e5,Hse=864e5;let Kse={};function W0(){return Kse}function Lp(t,e){var a,l,c,u;const n=W0(),r=(e==null?void 0:e.weekStartsOn)??((l=(a=e==null?void 0:e.locale)==null?void 0:a.options)==null?void 0:l.weekStartsOn)??n.weekStartsOn??((u=(c=n.locale)==null?void 0:c.options)==null?void 0:u.weekStartsOn)??0,o=Ds(t),s=o.getDay(),i=(s<r?7:0)+s-r;return o.setDate(o.getDate()-i),o.setHours(0,0,0,0),o}function Nx(t){return Lp(t,{weekStartsOn:1})}function oV(t){const e=Ds(t),n=e.getFullYear(),r=Pc(t,0);r.setFullYear(n+1,0,4),r.setHours(0,0,0,0);const o=Nx(r),s=Pc(t,0);s.setFullYear(n,0,4),s.setHours(0,0,0,0);const i=Nx(s);return e.getTime()>=o.getTime()?n+1:e.getTime()>=i.getTime()?n:n-1}function k_(t){const e=Ds(t);return e.setHours(0,0,0,0),e}function T_(t){const e=Ds(t),n=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return n.setUTCFullYear(e.getFullYear()),+t-+n}function qse(t,e){const n=k_(t),r=k_(e),o=+n-T_(n),s=+r-T_(r);return Math.round((o-s)/Hse)}function Xse(t){const e=oV(t),n=Pc(t,0);return n.setFullYear(e,0,4),n.setHours(0,0,0,0),Nx(n)}function Yse(t){return t instanceof Date||typeof t=="object"&&Object.prototype.toString.call(t)==="[object Date]"}function Qse(t){if(!Yse(t)&&typeof t!="number")return!1;const e=Ds(t);return!isNaN(Number(e))}function Zse(t){const e=Ds(t),n=Pc(t,0);return n.setFullYear(e.getFullYear(),0,1),n.setHours(0,0,0,0),n}const Jse={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},eie=(t,e,n)=>{let r;const o=Jse[t];return typeof o=="string"?r=o:e===1?r=o.one:r=o.other.replace("{{count}}",e.toString()),n!=null&&n.addSuffix?n.comparison&&n.comparison>0?"in "+r:r+" ago":r};function Li(t){return(e={})=>{const n=e.width?String(e.width):t.defaultWidth;return t.formats[n]||t.formats[t.defaultWidth]}}const tie={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},nie={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},rie={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},oie={date:Li({formats:tie,defaultWidth:"full"}),time:Li({formats:nie,defaultWidth:"full"}),dateTime:Li({formats:rie,defaultWidth:"full"})},sie={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},iie=(t,e,n,r)=>sie[t];function kr(t){return(e,n)=>{const r=n!=null&&n.context?String(n.context):"standalone";let o;if(r==="formatting"&&t.formattingValues){const i=t.defaultFormattingWidth||t.defaultWidth,a=n!=null&&n.width?String(n.width):i;o=t.formattingValues[a]||t.formattingValues[i]}else{const i=t.defaultWidth,a=n!=null&&n.width?String(n.width):t.defaultWidth;o=t.values[a]||t.values[i]}const s=t.argumentCallback?t.argumentCallback(e):e;return o[s]}}const aie={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},lie={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},cie={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},uie={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},die={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},fie={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},hie=(t,e)=>{const n=Number(t),r=n%100;if(r>20||r<10)switch(r%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},pie={ordinalNumber:hie,era:kr({values:aie,defaultWidth:"wide"}),quarter:kr({values:lie,defaultWidth:"wide",argumentCallback:t=>t-1}),month:kr({values:cie,defaultWidth:"wide"}),day:kr({values:uie,defaultWidth:"wide"}),dayPeriod:kr({values:die,defaultWidth:"wide",formattingValues:fie,defaultFormattingWidth:"wide"})};function Tr(t){return(e,n={})=>{const r=n.width,o=r&&t.matchPatterns[r]||t.matchPatterns[t.defaultMatchWidth],s=e.match(o);if(!s)return null;const i=s[0],a=r&&t.parsePatterns[r]||t.parsePatterns[t.defaultParseWidth],l=Array.isArray(a)?gie(a,d=>d.test(i)):mie(a,d=>d.test(i));let c;c=t.valueCallback?t.valueCallback(l):l,c=n.valueCallback?n.valueCallback(c):c;const u=e.slice(i.length);return{value:c,rest:u}}}function mie(t,e){for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)&&e(t[n]))return n}function gie(t,e){for(let n=0;n<t.length;n++)if(e(t[n]))return n}function fN(t){return(e,n={})=>{const r=e.match(t.matchPattern);if(!r)return null;const o=r[0],s=e.match(t.parsePattern);if(!s)return null;let i=t.valueCallback?t.valueCallback(s[0]):s[0];i=n.valueCallback?n.valueCallback(i):i;const a=e.slice(o.length);return{value:i,rest:a}}}const yie=/^(\d+)(th|st|nd|rd)?/i,vie=/\d+/i,xie={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},bie={any:[/^b/i,/^(a|c)/i]},wie={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},Sie={any:[/1/i,/2/i,/3/i,/4/i]},Cie={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},$ie={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},kie={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},Tie={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},Iie={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},Eie={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},Nie={ordinalNumber:fN({matchPattern:yie,parsePattern:vie,valueCallback:t=>parseInt(t,10)}),era:Tr({matchPatterns:xie,defaultMatchWidth:"wide",parsePatterns:bie,defaultParseWidth:"any"}),quarter:Tr({matchPatterns:wie,defaultMatchWidth:"wide",parsePatterns:Sie,defaultParseWidth:"any",valueCallback:t=>t+1}),month:Tr({matchPatterns:Cie,defaultMatchWidth:"wide",parsePatterns:$ie,defaultParseWidth:"any"}),day:Tr({matchPatterns:kie,defaultMatchWidth:"wide",parsePatterns:Tie,defaultParseWidth:"any"}),dayPeriod:Tr({matchPatterns:Iie,defaultMatchWidth:"any",parsePatterns:Eie,defaultParseWidth:"any"})},Aie={code:"en-US",formatDistance:eie,formatLong:oie,formatRelative:iie,localize:pie,match:Nie,options:{weekStartsOn:0,firstWeekContainsDate:1}};function Oie(t){const e=Ds(t);return qse(e,Zse(e))+1}function Pie(t){const e=Ds(t),n=+Nx(e)-+Xse(e);return Math.round(n/rV)+1}function sV(t,e){var u,d,f,h;const n=Ds(t),r=n.getFullYear(),o=W0(),s=(e==null?void 0:e.firstWeekContainsDate)??((d=(u=e==null?void 0:e.locale)==null?void 0:u.options)==null?void 0:d.firstWeekContainsDate)??o.firstWeekContainsDate??((h=(f=o.locale)==null?void 0:f.options)==null?void 0:h.firstWeekContainsDate)??1,i=Pc(t,0);i.setFullYear(r+1,0,s),i.setHours(0,0,0,0);const a=Lp(i,e),l=Pc(t,0);l.setFullYear(r,0,s),l.setHours(0,0,0,0);const c=Lp(l,e);return n.getTime()>=a.getTime()?r+1:n.getTime()>=c.getTime()?r:r-1}function Rie(t,e){var a,l,c,u;const n=W0(),r=(e==null?void 0:e.firstWeekContainsDate)??((l=(a=e==null?void 0:e.locale)==null?void 0:a.options)==null?void 0:l.firstWeekContainsDate)??n.firstWeekContainsDate??((u=(c=n.locale)==null?void 0:c.options)==null?void 0:u.firstWeekContainsDate)??1,o=sV(t,e),s=Pc(t,0);return s.setFullYear(o,0,r),s.setHours(0,0,0,0),Lp(s,e)}function _ie(t,e){const n=Ds(t),r=+Lp(n,e)-+Rie(n,e);return Math.round(r/rV)+1}function gt(t,e){const n=t<0?"-":"",r=Math.abs(t).toString().padStart(e,"0");return n+r}const xa={y(t,e){const n=t.getFullYear(),r=n>0?n:1-n;return gt(e==="yy"?r%100:r,e.length)},M(t,e){const n=t.getMonth();return e==="M"?String(n+1):gt(n+1,2)},d(t,e){return gt(t.getDate(),e.length)},a(t,e){const n=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];case"aaaa":default:return n==="am"?"a.m.":"p.m."}},h(t,e){return gt(t.getHours()%12||12,e.length)},H(t,e){return gt(t.getHours(),e.length)},m(t,e){return gt(t.getMinutes(),e.length)},s(t,e){return gt(t.getSeconds(),e.length)},S(t,e){const n=e.length,r=t.getMilliseconds(),o=Math.trunc(r*Math.pow(10,n-3));return gt(o,e.length)}},Su={am:"am",pm:"pm",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},I_={G:function(t,e,n){const r=t.getFullYear()>0?1:0;switch(e){case"G":case"GG":case"GGG":return n.era(r,{width:"abbreviated"});case"GGGGG":return n.era(r,{width:"narrow"});case"GGGG":default:return n.era(r,{width:"wide"})}},y:function(t,e,n){if(e==="yo"){const r=t.getFullYear(),o=r>0?r:1-r;return n.ordinalNumber(o,{unit:"year"})}return xa.y(t,e)},Y:function(t,e,n,r){const o=sV(t,r),s=o>0?o:1-o;if(e==="YY"){const i=s%100;return gt(i,2)}return e==="Yo"?n.ordinalNumber(s,{unit:"year"}):gt(s,e.length)},R:function(t,e){const n=oV(t);return gt(n,e.length)},u:function(t,e){const n=t.getFullYear();return gt(n,e.length)},Q:function(t,e,n){const r=Math.ceil((t.getMonth()+1)/3);switch(e){case"Q":return String(r);case"QQ":return gt(r,2);case"Qo":return n.ordinalNumber(r,{unit:"quarter"});case"QQQ":return n.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(r,{width:"narrow",context:"formatting"});case"QQQQ":default:return n.quarter(r,{width:"wide",context:"formatting"})}},q:function(t,e,n){const r=Math.ceil((t.getMonth()+1)/3);switch(e){case"q":return String(r);case"qq":return gt(r,2);case"qo":return n.ordinalNumber(r,{unit:"quarter"});case"qqq":return n.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(r,{width:"narrow",context:"standalone"});case"qqqq":default:return n.quarter(r,{width:"wide",context:"standalone"})}},M:function(t,e,n){const r=t.getMonth();switch(e){case"M":case"MM":return xa.M(t,e);case"Mo":return n.ordinalNumber(r+1,{unit:"month"});case"MMM":return n.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(r,{width:"narrow",context:"formatting"});case"MMMM":default:return n.month(r,{width:"wide",context:"formatting"})}},L:function(t,e,n){const r=t.getMonth();switch(e){case"L":return String(r+1);case"LL":return gt(r+1,2);case"Lo":return n.ordinalNumber(r+1,{unit:"month"});case"LLL":return n.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(r,{width:"narrow",context:"standalone"});case"LLLL":default:return n.month(r,{width:"wide",context:"standalone"})}},w:function(t,e,n,r){const o=_ie(t,r);return e==="wo"?n.ordinalNumber(o,{unit:"week"}):gt(o,e.length)},I:function(t,e,n){const r=Pie(t);return e==="Io"?n.ordinalNumber(r,{unit:"week"}):gt(r,e.length)},d:function(t,e,n){return e==="do"?n.ordinalNumber(t.getDate(),{unit:"date"}):xa.d(t,e)},D:function(t,e,n){const r=Oie(t);return e==="Do"?n.ordinalNumber(r,{unit:"dayOfYear"}):gt(r,e.length)},E:function(t,e,n){const r=t.getDay();switch(e){case"E":case"EE":case"EEE":return n.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(r,{width:"short",context:"formatting"});case"EEEE":default:return n.day(r,{width:"wide",context:"formatting"})}},e:function(t,e,n,r){const o=t.getDay(),s=(o-r.weekStartsOn+8)%7||7;switch(e){case"e":return String(s);case"ee":return gt(s,2);case"eo":return n.ordinalNumber(s,{unit:"day"});case"eee":return n.day(o,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(o,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(o,{width:"short",context:"formatting"});case"eeee":default:return n.day(o,{width:"wide",context:"formatting"})}},c:function(t,e,n,r){const o=t.getDay(),s=(o-r.weekStartsOn+8)%7||7;switch(e){case"c":return String(s);case"cc":return gt(s,e.length);case"co":return n.ordinalNumber(s,{unit:"day"});case"ccc":return n.day(o,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(o,{width:"narrow",context:"standalone"});case"cccccc":return n.day(o,{width:"short",context:"standalone"});case"cccc":default:return n.day(o,{width:"wide",context:"standalone"})}},i:function(t,e,n){const r=t.getDay(),o=r===0?7:r;switch(e){case"i":return String(o);case"ii":return gt(o,e.length);case"io":return n.ordinalNumber(o,{unit:"day"});case"iii":return n.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(r,{width:"short",context:"formatting"});case"iiii":default:return n.day(r,{width:"wide",context:"formatting"})}},a:function(t,e,n){const o=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return n.dayPeriod(o,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(o,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(o,{width:"narrow",context:"formatting"});case"aaaa":default:return n.dayPeriod(o,{width:"wide",context:"formatting"})}},b:function(t,e,n){const r=t.getHours();let o;switch(r===12?o=Su.noon:r===0?o=Su.midnight:o=r/12>=1?"pm":"am",e){case"b":case"bb":return n.dayPeriod(o,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(o,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(o,{width:"narrow",context:"formatting"});case"bbbb":default:return n.dayPeriod(o,{width:"wide",context:"formatting"})}},B:function(t,e,n){const r=t.getHours();let o;switch(r>=17?o=Su.evening:r>=12?o=Su.afternoon:r>=4?o=Su.morning:o=Su.night,e){case"B":case"BB":case"BBB":return n.dayPeriod(o,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(o,{width:"narrow",context:"formatting"});case"BBBB":default:return n.dayPeriod(o,{width:"wide",context:"formatting"})}},h:function(t,e,n){if(e==="ho"){let r=t.getHours()%12;return r===0&&(r=12),n.ordinalNumber(r,{unit:"hour"})}return xa.h(t,e)},H:function(t,e,n){return e==="Ho"?n.ordinalNumber(t.getHours(),{unit:"hour"}):xa.H(t,e)},K:function(t,e,n){const r=t.getHours()%12;return e==="Ko"?n.ordinalNumber(r,{unit:"hour"}):gt(r,e.length)},k:function(t,e,n){let r=t.getHours();return r===0&&(r=24),e==="ko"?n.ordinalNumber(r,{unit:"hour"}):gt(r,e.length)},m:function(t,e,n){return e==="mo"?n.ordinalNumber(t.getMinutes(),{unit:"minute"}):xa.m(t,e)},s:function(t,e,n){return e==="so"?n.ordinalNumber(t.getSeconds(),{unit:"second"}):xa.s(t,e)},S:function(t,e){return xa.S(t,e)},X:function(t,e,n){const r=t.getTimezoneOffset();if(r===0)return"Z";switch(e){case"X":return N_(r);case"XXXX":case"XX":return Ul(r);case"XXXXX":case"XXX":default:return Ul(r,":")}},x:function(t,e,n){const r=t.getTimezoneOffset();switch(e){case"x":return N_(r);case"xxxx":case"xx":return Ul(r);case"xxxxx":case"xxx":default:return Ul(r,":")}},O:function(t,e,n){const r=t.getTimezoneOffset();switch(e){case"O":case"OO":case"OOO":return"GMT"+E_(r,":");case"OOOO":default:return"GMT"+Ul(r,":")}},z:function(t,e,n){const r=t.getTimezoneOffset();switch(e){case"z":case"zz":case"zzz":return"GMT"+E_(r,":");case"zzzz":default:return"GMT"+Ul(r,":")}},t:function(t,e,n){const r=Math.trunc(t.getTime()/1e3);return gt(r,e.length)},T:function(t,e,n){const r=t.getTime();return gt(r,e.length)}};function E_(t,e=""){const n=t>0?"-":"+",r=Math.abs(t),o=Math.trunc(r/60),s=r%60;return s===0?n+String(o):n+String(o)+e+gt(s,2)}function N_(t,e){return t%60===0?(t>0?"-":"+")+gt(Math.abs(t)/60,2):Ul(t,e)}function Ul(t,e=""){const n=t>0?"-":"+",r=Math.abs(t),o=gt(Math.trunc(r/60),2),s=gt(r%60,2);return n+o+e+s}const A_=(t,e)=>{switch(t){case"P":return e.date({width:"short"});case"PP":return e.date({width:"medium"});case"PPP":return e.date({width:"long"});case"PPPP":default:return e.date({width:"full"})}},iV=(t,e)=>{switch(t){case"p":return e.time({width:"short"});case"pp":return e.time({width:"medium"});case"ppp":return e.time({width:"long"});case"pppp":default:return e.time({width:"full"})}},Die=(t,e)=>{const n=t.match(/(P+)(p+)?/)||[],r=n[1],o=n[2];if(!o)return A_(t,e);let s;switch(r){case"P":s=e.dateTime({width:"short"});break;case"PP":s=e.dateTime({width:"medium"});break;case"PPP":s=e.dateTime({width:"long"});break;case"PPPP":default:s=e.dateTime({width:"full"});break}return s.replace("{{date}}",A_(r,e)).replace("{{time}}",iV(o,e))},Mie={p:iV,P:Die},Fie=/^D+$/,Lie=/^Y+$/,jie=["D","DD","YY","YYYY"];function Bie(t){return Fie.test(t)}function zie(t){return Lie.test(t)}function Wie(t,e,n){const r=Vie(t,e,n);if(console.warn(r),jie.includes(t))throw new RangeError(r)}function Vie(t,e,n){const r=t[0]==="Y"?"years":"days of the month";return`Use \`${t.toLowerCase()}\` instead of \`${t}\` (in \`${e}\`) for formatting ${r} to the input \`${n}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const Uie=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,Gie=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,Hie=/^'([^]*?)'?$/,Kie=/''/g,qie=/[a-zA-Z]/;function Xie(t,e,n){var u,d,f,h,p,m,g,y;const r=W0(),o=(n==null?void 0:n.locale)??r.locale??Aie,s=(n==null?void 0:n.firstWeekContainsDate)??((d=(u=n==null?void 0:n.locale)==null?void 0:u.options)==null?void 0:d.firstWeekContainsDate)??r.firstWeekContainsDate??((h=(f=r.locale)==null?void 0:f.options)==null?void 0:h.firstWeekContainsDate)??1,i=(n==null?void 0:n.weekStartsOn)??((m=(p=n==null?void 0:n.locale)==null?void 0:p.options)==null?void 0:m.weekStartsOn)??r.weekStartsOn??((y=(g=r.locale)==null?void 0:g.options)==null?void 0:y.weekStartsOn)??0,a=Ds(t);if(!Qse(a))throw new RangeError("Invalid time value");let l=e.match(Gie).map(v=>{const x=v[0];if(x==="p"||x==="P"){const b=Mie[x];return b(v,o.formatLong)}return v}).join("").match(Uie).map(v=>{if(v==="''")return{isToken:!1,value:"'"};const x=v[0];if(x==="'")return{isToken:!1,value:Yie(v)};if(I_[x])return{isToken:!0,value:v};if(x.match(qie))throw new RangeError("Format string contains an unescaped latin alphabet character `"+x+"`");return{isToken:!1,value:v}});o.localize.preprocessor&&(l=o.localize.preprocessor(a,l));const c={firstWeekContainsDate:s,weekStartsOn:i,locale:o};return l.map(v=>{if(!v.isToken)return v.value;const x=v.value;(!(n!=null&&n.useAdditionalWeekYearTokens)&&zie(x)||!(n!=null&&n.useAdditionalDayOfYearTokens)&&Bie(x))&&Wie(x,e,String(t));const b=I_[x[0]];return b(a,x,o.localize,c)}).join("")}function Yie(t){const e=t.match(Hie);return e?e[1].replace(Kie,"'"):t}const Qie={lessThanXSeconds:{one:"أقل من ثانية",two:"أقل من ثانيتين",threeToTen:"أقل من {{count}} ثواني",other:"أقل من {{count}} ثانية"},xSeconds:{one:"ثانية واحدة",two:"ثانيتان",threeToTen:"{{count}} ثواني",other:"{{count}} ثانية"},halfAMinute:"نصف دقيقة",lessThanXMinutes:{one:"أقل من دقيقة",two:"أقل من دقيقتين",threeToTen:"أقل من {{count}} دقائق",other:"أقل من {{count}} دقيقة"},xMinutes:{one:"دقيقة واحدة",two:"دقيقتان",threeToTen:"{{count}} دقائق",other:"{{count}} دقيقة"},aboutXHours:{one:"ساعة واحدة تقريباً",two:"ساعتين تقريبا",threeToTen:"{{count}} ساعات تقريباً",other:"{{count}} ساعة تقريباً"},xHours:{one:"ساعة واحدة",two:"ساعتان",threeToTen:"{{count}} ساعات",other:"{{count}} ساعة"},xDays:{one:"يوم واحد",two:"يومان",threeToTen:"{{count}} أيام",other:"{{count}} يوم"},aboutXWeeks:{one:"أسبوع واحد تقريبا",two:"أسبوعين تقريبا",threeToTen:"{{count}} أسابيع تقريبا",other:"{{count}} أسبوعا تقريبا"},xWeeks:{one:"أسبوع واحد",two:"أسبوعان",threeToTen:"{{count}} أسابيع",other:"{{count}} أسبوعا"},aboutXMonths:{one:"شهر واحد تقريباً",two:"شهرين تقريبا",threeToTen:"{{count}} أشهر تقريبا",other:"{{count}} شهرا تقريباً"},xMonths:{one:"شهر واحد",two:"شهران",threeToTen:"{{count}} أشهر",other:"{{count}} شهرا"},aboutXYears:{one:"سنة واحدة تقريباً",two:"سنتين تقريبا",threeToTen:"{{count}} سنوات تقريباً",other:"{{count}} سنة تقريباً"},xYears:{one:"سنة واحد",two:"سنتان",threeToTen:"{{count}} سنوات",other:"{{count}} سنة"},overXYears:{one:"أكثر من سنة",two:"أكثر من سنتين",threeToTen:"أكثر من {{count}} سنوات",other:"أكثر من {{count}} سنة"},almostXYears:{one:"ما يقارب سنة واحدة",two:"ما يقارب سنتين",threeToTen:"ما يقارب {{count}} سنوات",other:"ما يقارب {{count}} سنة"}},Zie=(t,e,n)=>{const r=Qie[t];let o;return typeof r=="string"?o=r:e===1?o=r.one:e===2?o=r.two:e<=10?o=r.threeToTen.replace("{{count}}",String(e)):o=r.other.replace("{{count}}",String(e)),n!=null&&n.addSuffix?n.comparison&&n.comparison>0?"خلال "+o:"منذ "+o:o},Jie={full:"EEEE، do MMMM y",long:"do MMMM y",medium:"d MMM y",short:"dd/MM/yyyy"},eae={full:"HH:mm:ss",long:"HH:mm:ss",medium:"HH:mm:ss",short:"HH:mm"},tae={full:"{{date}} 'عند الساعة' {{time}}",long:"{{date}} 'عند الساعة' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},nae={date:Li({formats:Jie,defaultWidth:"full"}),time:Li({formats:eae,defaultWidth:"full"}),dateTime:Li({formats:tae,defaultWidth:"full"})},rae={lastWeek:"eeee 'الماضي عند الساعة' p",yesterday:"'الأمس عند الساعة' p",today:"'اليوم عند الساعة' p",tomorrow:"'غدا عند الساعة' p",nextWeek:"eeee 'القادم عند الساعة' p",other:"P"},oae=t=>rae[t],sae={narrow:["ق","ب"],abbreviated:["ق.م.","ب.م."],wide:["قبل الميلاد","بعد الميلاد"]},iae={narrow:["1","2","3","4"],abbreviated:["ر1","ر2","ر3","ر4"],wide:["الربع الأول","الربع الثاني","الربع الثالث","الربع الرابع"]},aae={narrow:["ي","ف","م","أ","م","ي","ي","أ","س","أ","ن","د"],abbreviated:["يناير","فبراير","مارس","أبريل","مايو","يونيو","يوليو","أغسطس","سبتمبر","أكتوبر","نوفمبر","ديسمبر"],wide:["يناير","فبراير","مارس","أبريل","مايو","يونيو","يوليو","أغسطس","سبتمبر","أكتوبر","نوفمبر","ديسمبر"]},lae={narrow:["ح","ن","ث","ر","خ","ج","س"],short:["أحد","اثنين","ثلاثاء","أربعاء","خميس","جمعة","سبت"],abbreviated:["أحد","اثنين","ثلاثاء","أربعاء","خميس","جمعة","سبت"],wide:["الأحد","الاثنين","الثلاثاء","الأربعاء","الخميس","الجمعة","السبت"]},cae={narrow:{am:"ص",pm:"م",morning:"الصباح",noon:"الظهر",afternoon:"بعد الظهر",evening:"المساء",night:"الليل",midnight:"منتصف الليل"},abbreviated:{am:"ص",pm:"م",morning:"الصباح",noon:"الظهر",afternoon:"بعد الظهر",evening:"المساء",night:"الليل",midnight:"منتصف الليل"},wide:{am:"ص",pm:"م",morning:"الصباح",noon:"الظهر",afternoon:"بعد الظهر",evening:"المساء",night:"الليل",midnight:"منتصف الليل"}},uae={narrow:{am:"ص",pm:"م",morning:"في الصباح",noon:"الظهر",afternoon:"بعد الظهر",evening:"في المساء",night:"في الليل",midnight:"منتصف الليل"},abbreviated:{am:"ص",pm:"م",morning:"في الصباح",noon:"الظهر",afternoon:"بعد الظهر",evening:"في المساء",night:"في الليل",midnight:"منتصف الليل"},wide:{am:"ص",pm:"م",morning:"في الصباح",noon:"الظهر",afternoon:"بعد الظهر",evening:"في المساء",night:"في الليل",midnight:"منتصف الليل"}},dae=t=>String(t),fae={ordinalNumber:dae,era:kr({values:sae,defaultWidth:"wide"}),quarter:kr({values:iae,defaultWidth:"wide",argumentCallback:t=>t-1}),month:kr({values:aae,defaultWidth:"wide"}),day:kr({values:lae,defaultWidth:"wide"}),dayPeriod:kr({values:cae,defaultWidth:"wide",formattingValues:uae,defaultFormattingWidth:"wide"})},hae=/^(\d+)(th|st|nd|rd)?/i,pae=/\d+/i,mae={narrow:/[قب]/,abbreviated:/[قب]\.م\./,wide:/(قبل|بعد) الميلاد/},gae={any:[/قبل/,/بعد/]},yae={narrow:/^[1234]/i,abbreviated:/ر[1234]/,wide:/الربع (الأول|الثاني|الثالث|الرابع)/},vae={any:[/1/i,/2/i,/3/i,/4/i]},xae={narrow:/^[أيفمسند]/,abbreviated:/^(يناير|فبراير|مارس|أبريل|مايو|يونيو|يوليو|أغسطس|سبتمبر|أكتوبر|نوفمبر|ديسمبر)/,wide:/^(يناير|فبراير|مارس|أبريل|مايو|يونيو|يوليو|أغسطس|سبتمبر|أكتوبر|نوفمبر|ديسمبر)/},bae={narrow:[/^ي/i,/^ف/i,/^م/i,/^أ/i,/^م/i,/^ي/i,/^ي/i,/^أ/i,/^س/i,/^أ/i,/^ن/i,/^د/i],any:[/^يناير/i,/^فبراير/i,/^مارس/i,/^أبريل/i,/^مايو/i,/^يونيو/i,/^يوليو/i,/^أغسطس/i,/^سبتمبر/i,/^أكتوبر/i,/^نوفمبر/i,/^ديسمبر/i]},wae={narrow:/^[حنثرخجس]/i,short:/^(أحد|اثنين|ثلاثاء|أربعاء|خميس|جمعة|سبت)/i,abbreviated:/^(أحد|اثنين|ثلاثاء|أربعاء|خميس|جمعة|سبت)/i,wide:/^(الأحد|الاثنين|الثلاثاء|الأربعاء|الخميس|الجمعة|السبت)/i},Sae={narrow:[/^ح/i,/^ن/i,/^ث/i,/^ر/i,/^خ/i,/^ج/i,/^س/i],wide:[/^الأحد/i,/^الاثنين/i,/^الثلاثاء/i,/^الأربعاء/i,/^الخميس/i,/^الجمعة/i,/^السبت/i],any:[/^أح/i,/^اث/i,/^ث/i,/^أر/i,/^خ/i,/^ج/i,/^س/i]},Cae={narrow:/^(ص|م|منتصف الليل|الظهر|بعد الظهر|في الصباح|في المساء|في الليل)/,any:/^(ص|م|منتصف الليل|الظهر|بعد الظهر|في الصباح|في المساء|في الليل)/},$ae={any:{am:/^ص/,pm:/^م/,midnight:/منتصف الليل/,noon:/الظهر/,afternoon:/بعد الظهر/,morning:/في الصباح/,evening:/في المساء/,night:/في الليل/}},kae={ordinalNumber:fN({matchPattern:hae,parsePattern:pae,valueCallback:t=>parseInt(t,10)}),era:Tr({matchPatterns:mae,defaultMatchWidth:"wide",parsePatterns:gae,defaultParseWidth:"any"}),quarter:Tr({matchPatterns:yae,defaultMatchWidth:"wide",parsePatterns:vae,defaultParseWidth:"any",valueCallback:t=>t+1}),month:Tr({matchPatterns:xae,defaultMatchWidth:"wide",parsePatterns:bae,defaultParseWidth:"any"}),day:Tr({matchPatterns:wae,defaultMatchWidth:"wide",parsePatterns:Sae,defaultParseWidth:"any"}),dayPeriod:Tr({matchPatterns:Cae,defaultMatchWidth:"any",parsePatterns:$ae,defaultParseWidth:"any"})},Tae={code:"ar",formatDistance:Zie,formatLong:nae,formatRelative:oae,localize:fae,match:kae,options:{weekStartsOn:6,firstWeekContainsDate:1}},Iae={lessThanXSeconds:{one:"moins d’une seconde",other:"moins de {{count}} secondes"},xSeconds:{one:"1 seconde",other:"{{count}} secondes"},halfAMinute:"30 secondes",lessThanXMinutes:{one:"moins d’une minute",other:"moins de {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"environ 1 heure",other:"environ {{count}} heures"},xHours:{one:"1 heure",other:"{{count}} heures"},xDays:{one:"1 jour",other:"{{count}} jours"},aboutXWeeks:{one:"environ 1 semaine",other:"environ {{count}} semaines"},xWeeks:{one:"1 semaine",other:"{{count}} semaines"},aboutXMonths:{one:"environ 1 mois",other:"environ {{count}} mois"},xMonths:{one:"1 mois",other:"{{count}} mois"},aboutXYears:{one:"environ 1 an",other:"environ {{count}} ans"},xYears:{one:"1 an",other:"{{count}} ans"},overXYears:{one:"plus d’un an",other:"plus de {{count}} ans"},almostXYears:{one:"presqu’un an",other:"presque {{count}} ans"}},Eae=(t,e,n)=>{let r;const o=Iae[t];return typeof o=="string"?r=o:e===1?r=o.one:r=o.other.replace("{{count}}",String(e)),n!=null&&n.addSuffix?n.comparison&&n.comparison>0?"dans "+r:"il y a "+r:r},Nae={full:"EEEE d MMMM y",long:"d MMMM y",medium:"d MMM y",short:"dd/MM/y"},Aae={full:"HH:mm:ss zzzz",long:"HH:mm:ss z",medium:"HH:mm:ss",short:"HH:mm"},Oae={full:"{{date}} 'à' {{time}}",long:"{{date}} 'à' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},Pae={date:Li({formats:Nae,defaultWidth:"full"}),time:Li({formats:Aae,defaultWidth:"full"}),dateTime:Li({formats:Oae,defaultWidth:"full"})},Rae={lastWeek:"eeee 'dernier à' p",yesterday:"'hier à' p",today:"'aujourd’hui à' p",tomorrow:"'demain à' p'",nextWeek:"eeee 'prochain à' p",other:"P"},_ae=(t,e,n,r)=>Rae[t],Dae={narrow:["av. J.-C","ap. J.-C"],abbreviated:["av. J.-C","ap. J.-C"],wide:["avant Jésus-Christ","après Jésus-Christ"]},Mae={narrow:["T1","T2","T3","T4"],abbreviated:["1er trim.","2ème trim.","3ème trim.","4ème trim."],wide:["1er trimestre","2ème trimestre","3ème trimestre","4ème trimestre"]},Fae={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["janv.","févr.","mars","avr.","mai","juin","juil.","août","sept.","oct.","nov.","déc."],wide:["janvier","février","mars","avril","mai","juin","juillet","août","septembre","octobre","novembre","décembre"]},Lae={narrow:["D","L","M","M","J","V","S"],short:["di","lu","ma","me","je","ve","sa"],abbreviated:["dim.","lun.","mar.","mer.","jeu.","ven.","sam."],wide:["dimanche","lundi","mardi","mercredi","jeudi","vendredi","samedi"]},jae={narrow:{am:"AM",pm:"PM",midnight:"minuit",noon:"midi",morning:"mat.",afternoon:"ap.m.",evening:"soir",night:"mat."},abbreviated:{am:"AM",pm:"PM",midnight:"minuit",noon:"midi",morning:"matin",afternoon:"après-midi",evening:"soir",night:"matin"},wide:{am:"AM",pm:"PM",midnight:"minuit",noon:"midi",morning:"du matin",afternoon:"de l’après-midi",evening:"du soir",night:"du matin"}},Bae=(t,e)=>{const n=Number(t),r=e==null?void 0:e.unit;if(n===0)return"0";const o=["year","week","hour","minute","second"];let s;return n===1?s=r&&o.includes(r)?"ère":"er":s="ème",n+s},zae=["MMM","MMMM"],Wae={preprocessor:(t,e)=>t.getDate()===1||!e.some(r=>r.isToken&&zae.includes(r.value))?e:e.map(r=>r.isToken&&r.value==="do"?{isToken:!0,value:"d"}:r),ordinalNumber:Bae,era:kr({values:Dae,defaultWidth:"wide"}),quarter:kr({values:Mae,defaultWidth:"wide",argumentCallback:t=>t-1}),month:kr({values:Fae,defaultWidth:"wide"}),day:kr({values:Lae,defaultWidth:"wide"}),dayPeriod:kr({values:jae,defaultWidth:"wide"})},Vae=/^(\d+)(ième|ère|ème|er|e)?/i,Uae=/\d+/i,Gae={narrow:/^(av\.J\.C|ap\.J\.C|ap\.J\.-C)/i,abbreviated:/^(av\.J\.-C|av\.J-C|apr\.J\.-C|apr\.J-C|ap\.J-C)/i,wide:/^(avant Jésus-Christ|après Jésus-Christ)/i},Hae={any:[/^av/i,/^ap/i]},Kae={narrow:/^T?[1234]/i,abbreviated:/^[1234](er|ème|e)? trim\.?/i,wide:/^[1234](er|ème|e)? trimestre/i},qae={any:[/1/i,/2/i,/3/i,/4/i]},Xae={narrow:/^[jfmasond]/i,abbreviated:/^(janv|févr|mars|avr|mai|juin|juill|juil|août|sept|oct|nov|déc)\.?/i,wide:/^(janvier|février|mars|avril|mai|juin|juillet|août|septembre|octobre|novembre|décembre)/i},Yae={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^av/i,/^ma/i,/^juin/i,/^juil/i,/^ao/i,/^s/i,/^o/i,/^n/i,/^d/i]},Qae={narrow:/^[lmjvsd]/i,short:/^(di|lu|ma|me|je|ve|sa)/i,abbreviated:/^(dim|lun|mar|mer|jeu|ven|sam)\.?/i,wide:/^(dimanche|lundi|mardi|mercredi|jeudi|vendredi|samedi)/i},Zae={narrow:[/^d/i,/^l/i,/^m/i,/^m/i,/^j/i,/^v/i,/^s/i],any:[/^di/i,/^lu/i,/^ma/i,/^me/i,/^je/i,/^ve/i,/^sa/i]},Jae={narrow:/^(a|p|minuit|midi|mat\.?|ap\.?m\.?|soir|nuit)/i,any:/^([ap]\.?\s?m\.?|du matin|de l'après[-\s]midi|du soir|de la nuit)/i},ele={any:{am:/^a/i,pm:/^p/i,midnight:/^min/i,noon:/^mid/i,morning:/mat/i,afternoon:/ap/i,evening:/soir/i,night:/nuit/i}},tle={ordinalNumber:fN({matchPattern:Vae,parsePattern:Uae,valueCallback:t=>parseInt(t)}),era:Tr({matchPatterns:Gae,defaultMatchWidth:"wide",parsePatterns:Hae,defaultParseWidth:"any"}),quarter:Tr({matchPatterns:Kae,defaultMatchWidth:"wide",parsePatterns:qae,defaultParseWidth:"any",valueCallback:t=>t+1}),month:Tr({matchPatterns:Xae,defaultMatchWidth:"wide",parsePatterns:Yae,defaultParseWidth:"any"}),day:Tr({matchPatterns:Qae,defaultMatchWidth:"wide",parsePatterns:Zae,defaultParseWidth:"any"}),dayPeriod:Tr({matchPatterns:Jae,defaultMatchWidth:"any",parsePatterns:ele,defaultParseWidth:"any"})},nle={code:"fr",formatDistance:Eae,formatLong:Pae,formatRelative:_ae,localize:Wae,match:tle,options:{weekStartsOn:1,firstWeekContainsDate:4}};function br({className:t,...e}){return S.jsx("div",{className:Le("animate-pulse rounded-md bg-muted",t),...e})}function rle({analysisHistory:t,isLoading:e}){const{t:n,language:r}=tn(),o=i=>i==="سليم"||i==="جيد"?"bg-success bg-opacity-10 text-success":i==="مصاب"||i==="ضعيف"?"bg-error bg-opacity-10 text-error":"bg-warning bg-opacity-10 text-warning",s=i=>{const a=new Date(i);return Xie(a,"dd MMM yyyy",{locale:r==="ar"?Tae:nle})};return S.jsxs("div",{className:"mt-12",children:[S.jsxs("div",{className:"flex justify-between items-center mb-6",children:[S.jsx("h3",{className:"text-xl font-bold font-cairo",children:n("analysis.history.title")}),t.length>3&&S.jsx("a",{href:"#",className:"text-primary hover:underline",children:n("analysis.history.viewAll")})]}),e?S.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[1,2,3].map(i=>S.jsxs(Bd,{className:"overflow-hidden",children:[S.jsx(br,{className:"w-full h-40"}),S.jsxs(Mp,{className:"p-4",children:[S.jsxs("div",{className:"flex justify-between items-start mb-2",children:[S.jsx(br,{className:"h-6 w-24"}),S.jsx(br,{className:"h-5 w-16"})]}),S.jsx(br,{className:"h-4 w-full mb-2"}),S.jsx(br,{className:"h-4 w-3/4 mb-4"}),S.jsxs("div",{className:"flex justify-between items-center",children:[S.jsx(br,{className:"h-4 w-20"}),S.jsx(br,{className:"h-6 w-6 rounded-full"})]})]})]},i))}):t.length>0?S.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:t.slice(0,3).map(i=>S.jsxs(Bd,{className:"analysis-card bg-white rounded-lg shadow-md overflow-hidden",children:[S.jsx("img",{src:i.imageUrl,className:"w-full h-40 object-cover",alt:i.plantName||i.soilType}),S.jsxs(Mp,{className:"p-4",children:[S.jsx("span",{className:`inline-block px-2 py-1 text-xs rounded-full mb-2 ${o(i.healthStatus||i.quality)}`,children:i.healthStatus||i.quality}),S.jsx("h4",{className:"font-bold text-gray-800 mb-1",children:i.plantName||i.soilType}),S.jsx("p",{className:"text-gray-600 text-sm mb-2",children:i.condition||(i.phLevel?`pH: ${i.phLevel}`:"")}),S.jsxs("div",{className:"flex justify-between items-center mt-3",children:[S.jsx("span",{className:"text-xs text-gray-500",children:s(i.createdAt)}),S.jsx("button",{className:"text-primary hover:text-primary-dark","aria-label":"View Details",children:S.jsx(tne,{className:"h-4 w-4"})})]})]})]},i.id))}):S.jsx("div",{className:"text-center py-12 bg-white rounded-xl shadow-sm",children:S.jsx("p",{className:"text-gray-500",children:n("analysis.history.noAnalyses")})})]})}function ole(){const{t}=tn(),{isAuthenticated:e}=Jm(),{toast:n}=N0(),[r,o]=k.useState("plant"),[s,i]=k.useState(null),[a,l]=k.useState(null),[c,u]=k.useState(null),[d,f]=k.useState(!1),{data:h=[],isLoading:p}=E0({queryKey:["/api/analysis/history"],enabled:e}),m=v=>{if(v){i(v);const x=URL.createObjectURL(v);l(x),u(null)}},g=v=>{o(v),u(null)},y=async()=>{if(!s){n({title:t("analysis.errors.noImage"),description:t("analysis.errors.pleaseSelectImage"),variant:"destructive"});return}if(!e){n({title:t("auth.loginRequired"),description:t("auth.loginToAnalyze"),variant:"destructive"});return}try{f(!0);const v=new FormData;v.append("image",s),v.append("analysisType",r);const x=await fetch("/api/analysis/upload",{method:"POST",body:v,credentials:"include"});if(!x.ok)throw new Error("Analysis failed");const b=await x.json();u(b),n({title:t("analysis.success.title"),description:t("analysis.success.description")})}catch(v){console.error("Analysis error:",v),n({title:t("analysis.errors.failed"),description:t("analysis.errors.tryAgain"),variant:"destructive"})}finally{f(!1)}};return S.jsxs(S.Fragment,{children:[S.jsxs(dl,{children:[S.jsx("title",{children:t("seo.analysis.title")}),S.jsx("meta",{name:"description",content:t("seo.analysis.description")})]}),S.jsx("section",{id:"analysis",className:"py-16 bg-gray-50",children:S.jsxs("div",{className:"container mx-auto px-4",children:[S.jsx("h2",{className:"text-3xl font-bold text-center mb-8 font-cairo",children:t("analysis.title")}),S.jsx("p",{className:"text-center text-gray-600 max-w-2xl mx-auto mb-12",children:t("analysis.description")}),S.jsx("div",{className:"bg-white rounded-xl shadow-md overflow-hidden",children:S.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2",children:[S.jsx(Wse,{analysisType:r,onAnalysisTypeChange:g,onImageChange:m,previewUrl:a}),S.jsx(Vse,{analysisType:r,previewUrl:a,result:c,isAnalyzing:d,onAnalyze:y,isAuthenticated:e})]})}),e&&S.jsx(rle,{analysisHistory:h,isLoading:p}),!e&&S.jsxs("div",{className:"mt-12 text-center p-8 bg-white rounded-xl shadow-sm",children:[S.jsx("h3",{className:"text-xl font-bold mb-4",children:t("auth.loginToSaveResults")}),S.jsx("p",{className:"text-gray-600 mb-6",children:t("auth.loginToSaveDesc")}),S.jsx(Jt,{onClick:()=>window.location.href="/api/login",className:"bg-primary hover:bg-primary-dark text-white",children:t("auth.login")})]})]})})]})}const V0=k.forwardRef(({className:t,type:e,...n},r)=>S.jsx("input",{type:e,className:Le("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),ref:r,...n}));V0.displayName="Input";function Ax(t,[e,n]){return Math.min(n,Math.max(e,t))}var tC=0;function hN(){k.useEffect(()=>{const t=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",t[0]??O_()),document.body.insertAdjacentElement("beforeend",t[1]??O_()),tC++,()=>{tC===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(e=>e.remove()),tC--}},[])}function O_(){const t=document.createElement("span");return t.setAttribute("data-radix-focus-guard",""),t.tabIndex=0,t.style.outline="none",t.style.opacity="0",t.style.position="fixed",t.style.pointerEvents="none",t}var nC="focusScope.autoFocusOnMount",rC="focusScope.autoFocusOnUnmount",P_={bubbles:!1,cancelable:!0},sle="FocusScope",U0=k.forwardRef((t,e)=>{const{loop:n=!1,trapped:r=!1,onMountAutoFocus:o,onUnmountAutoFocus:s,...i}=t,[a,l]=k.useState(null),c=Kn(o),u=Kn(s),d=k.useRef(null),f=Xe(e,m=>l(m)),h=k.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;k.useEffect(()=>{if(r){let m=function(x){if(h.paused||!a)return;const b=x.target;a.contains(b)?d.current=b:wa(d.current,{select:!0})},g=function(x){if(h.paused||!a)return;const b=x.relatedTarget;b!==null&&(a.contains(b)||wa(d.current,{select:!0}))},y=function(x){if(document.activeElement===document.body)for(const w of x)w.removedNodes.length>0&&wa(a)};document.addEventListener("focusin",m),document.addEventListener("focusout",g);const v=new MutationObserver(y);return a&&v.observe(a,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",m),document.removeEventListener("focusout",g),v.disconnect()}}},[r,a,h.paused]),k.useEffect(()=>{if(a){__.add(h);const m=document.activeElement;if(!a.contains(m)){const y=new CustomEvent(nC,P_);a.addEventListener(nC,c),a.dispatchEvent(y),y.defaultPrevented||(ile(dle(aV(a)),{select:!0}),document.activeElement===m&&wa(a))}return()=>{a.removeEventListener(nC,c),setTimeout(()=>{const y=new CustomEvent(rC,P_);a.addEventListener(rC,u),a.dispatchEvent(y),y.defaultPrevented||wa(m??document.body,{select:!0}),a.removeEventListener(rC,u),__.remove(h)},0)}}},[a,c,u,h]);const p=k.useCallback(m=>{if(!n&&!r||h.paused)return;const g=m.key==="Tab"&&!m.altKey&&!m.ctrlKey&&!m.metaKey,y=document.activeElement;if(g&&y){const v=m.currentTarget,[x,b]=ale(v);x&&b?!m.shiftKey&&y===b?(m.preventDefault(),n&&wa(x,{select:!0})):m.shiftKey&&y===x&&(m.preventDefault(),n&&wa(b,{select:!0})):y===v&&m.preventDefault()}},[n,r,h.paused]);return S.jsx(Re.div,{tabIndex:-1,...i,ref:f,onKeyDown:p})});U0.displayName=sle;function ile(t,{select:e=!1}={}){const n=document.activeElement;for(const r of t)if(wa(r,{select:e}),document.activeElement!==n)return}function ale(t){const e=aV(t),n=R_(e,t),r=R_(e.reverse(),t);return[n,r]}function aV(t){const e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const o=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||o?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)e.push(n.currentNode);return e}function R_(t,e){for(const n of t)if(!lle(n,{upTo:e}))return n}function lle(t,{upTo:e}){if(getComputedStyle(t).visibility==="hidden")return!0;for(;t;){if(e!==void 0&&t===e)return!1;if(getComputedStyle(t).display==="none")return!0;t=t.parentElement}return!1}function cle(t){return t instanceof HTMLInputElement&&"select"in t}function wa(t,{select:e=!1}={}){if(t&&t.focus){const n=document.activeElement;t.focus({preventScroll:!0}),t!==n&&cle(t)&&e&&t.select()}}var __=ule();function ule(){let t=[];return{add(e){const n=t[0];e!==n&&(n==null||n.pause()),t=D_(t,e),t.unshift(e)},remove(e){var n;t=D_(t,e),(n=t[0])==null||n.resume()}}}function D_(t,e){const n=[...t],r=n.indexOf(e);return r!==-1&&n.splice(r,1),n}function dle(t){return t.filter(e=>e.tagName!=="A")}var fle=function(t){if(typeof document>"u")return null;var e=Array.isArray(t)?t[0]:t;return e.ownerDocument.body},Cu=new WeakMap,ev=new WeakMap,tv={},oC=0,lV=function(t){return t&&(t.host||lV(t.parentNode))},hle=function(t,e){return e.map(function(n){if(t.contains(n))return n;var r=lV(n);return r&&t.contains(r)?r:(console.error("aria-hidden",n,"in not contained inside",t,". Doing nothing"),null)}).filter(function(n){return!!n})},ple=function(t,e,n,r){var o=hle(e,Array.isArray(t)?t:[t]);tv[n]||(tv[n]=new WeakMap);var s=tv[n],i=[],a=new Set,l=new Set(o),c=function(d){!d||a.has(d)||(a.add(d),c(d.parentNode))};o.forEach(c);var u=function(d){!d||l.has(d)||Array.prototype.forEach.call(d.children,function(f){if(a.has(f))u(f);else try{var h=f.getAttribute(r),p=h!==null&&h!=="false",m=(Cu.get(f)||0)+1,g=(s.get(f)||0)+1;Cu.set(f,m),s.set(f,g),i.push(f),m===1&&p&&ev.set(f,!0),g===1&&f.setAttribute(n,"true"),p||f.setAttribute(r,"true")}catch(y){console.error("aria-hidden: cannot operate on ",f,y)}})};return u(e),a.clear(),oC++,function(){i.forEach(function(d){var f=Cu.get(d)-1,h=s.get(d)-1;Cu.set(d,f),s.set(d,h),f||(ev.has(d)||d.removeAttribute(r),ev.delete(d)),h||d.removeAttribute(n)}),oC--,oC||(Cu=new WeakMap,Cu=new WeakMap,ev=new WeakMap,tv={})}},pN=function(t,e,n){n===void 0&&(n="data-aria-hidden");var r=Array.from(Array.isArray(t)?t:[t]),o=fle(t);return o?(r.push.apply(r,Array.from(o.querySelectorAll("[aria-live]"))),ple(r,o,n,"aria-hidden")):function(){return null}},Zs=function(){return Zs=Object.assign||function(e){for(var n,r=1,o=arguments.length;r<o;r++){n=arguments[r];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},Zs.apply(this,arguments)};function cV(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]]);return n}function mle(t,e,n){if(n||arguments.length===2)for(var r=0,o=e.length,s;r<o;r++)(s||!(r in e))&&(s||(s=Array.prototype.slice.call(e,0,r)),s[r]=e[r]);return t.concat(s||Array.prototype.slice.call(e))}var qv="right-scroll-bar-position",Xv="width-before-scroll-bar",gle="with-scroll-bars-hidden",yle="--removed-body-scroll-bar-size";function sC(t,e){return typeof t=="function"?t(e):t&&(t.current=e),t}function vle(t,e){var n=k.useState(function(){return{value:t,callback:e,facade:{get current(){return n.value},set current(r){var o=n.value;o!==r&&(n.value=r,n.callback(r,o))}}}})[0];return n.callback=e,n.facade}var xle=typeof window<"u"?k.useLayoutEffect:k.useEffect,M_=new WeakMap;function ble(t,e){var n=vle(null,function(r){return t.forEach(function(o){return sC(o,r)})});return xle(function(){var r=M_.get(n);if(r){var o=new Set(r),s=new Set(t),i=n.current;o.forEach(function(a){s.has(a)||sC(a,null)}),s.forEach(function(a){o.has(a)||sC(a,i)})}M_.set(n,t)},[t]),n}function wle(t){return t}function Sle(t,e){e===void 0&&(e=wle);var n=[],r=!1,o={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:t},useMedium:function(s){var i=e(s,r);return n.push(i),function(){n=n.filter(function(a){return a!==i})}},assignSyncMedium:function(s){for(r=!0;n.length;){var i=n;n=[],i.forEach(s)}n={push:function(a){return s(a)},filter:function(){return n}}},assignMedium:function(s){r=!0;var i=[];if(n.length){var a=n;n=[],a.forEach(s),i=n}var l=function(){var u=i;i=[],u.forEach(s)},c=function(){return Promise.resolve().then(l)};c(),n={push:function(u){i.push(u),c()},filter:function(u){return i=i.filter(u),n}}}};return o}function Cle(t){t===void 0&&(t={});var e=Sle(null);return e.options=Zs({async:!0,ssr:!1},t),e}var uV=function(t){var e=t.sideCar,n=cV(t,["sideCar"]);if(!e)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=e.read();if(!r)throw new Error("Sidecar medium not found");return k.createElement(r,Zs({},n))};uV.isSideCarExport=!0;function $le(t,e){return t.useMedium(e),uV}var dV=Cle(),iC=function(){},G0=k.forwardRef(function(t,e){var n=k.useRef(null),r=k.useState({onScrollCapture:iC,onWheelCapture:iC,onTouchMoveCapture:iC}),o=r[0],s=r[1],i=t.forwardProps,a=t.children,l=t.className,c=t.removeScrollBar,u=t.enabled,d=t.shards,f=t.sideCar,h=t.noIsolation,p=t.inert,m=t.allowPinchZoom,g=t.as,y=g===void 0?"div":g,v=t.gapMode,x=cV(t,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as","gapMode"]),b=f,w=ble([n,e]),C=Zs(Zs({},x),o);return k.createElement(k.Fragment,null,u&&k.createElement(b,{sideCar:dV,removeScrollBar:c,shards:d,noIsolation:h,inert:p,setCallbacks:s,allowPinchZoom:!!m,lockRef:n,gapMode:v}),i?k.cloneElement(k.Children.only(a),Zs(Zs({},C),{ref:w})):k.createElement(y,Zs({},C,{className:l,ref:w}),a))});G0.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};G0.classNames={fullWidth:Xv,zeroRight:qv};var kle=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function Tle(){if(!document)return null;var t=document.createElement("style");t.type="text/css";var e=kle();return e&&t.setAttribute("nonce",e),t}function Ile(t,e){t.styleSheet?t.styleSheet.cssText=e:t.appendChild(document.createTextNode(e))}function Ele(t){var e=document.head||document.getElementsByTagName("head")[0];e.appendChild(t)}var Nle=function(){var t=0,e=null;return{add:function(n){t==0&&(e=Tle())&&(Ile(e,n),Ele(e)),t++},remove:function(){t--,!t&&e&&(e.parentNode&&e.parentNode.removeChild(e),e=null)}}},Ale=function(){var t=Nle();return function(e,n){k.useEffect(function(){return t.add(e),function(){t.remove()}},[e&&n])}},fV=function(){var t=Ale(),e=function(n){var r=n.styles,o=n.dynamic;return t(r,o),null};return e},Ole={left:0,top:0,right:0,gap:0},aC=function(t){return parseInt(t||"",10)||0},Ple=function(t){var e=window.getComputedStyle(document.body),n=e[t==="padding"?"paddingLeft":"marginLeft"],r=e[t==="padding"?"paddingTop":"marginTop"],o=e[t==="padding"?"paddingRight":"marginRight"];return[aC(n),aC(r),aC(o)]},Rle=function(t){if(t===void 0&&(t="margin"),typeof window>"u")return Ole;var e=Ple(t),n=document.documentElement.clientWidth,r=window.innerWidth;return{left:e[0],top:e[1],right:e[2],gap:Math.max(0,r-n+e[2]-e[0])}},_le=fV(),ad="data-scroll-locked",Dle=function(t,e,n,r){var o=t.left,s=t.top,i=t.right,a=t.gap;return n===void 0&&(n="margin"),`
  .`.concat(gle,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(a,"px ").concat(r,`;
  }
  body[`).concat(ad,`] {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([e&&"position: relative ".concat(r,";"),n==="margin"&&`
    padding-left: `.concat(o,`px;
    padding-top: `).concat(s,`px;
    padding-right: `).concat(i,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(a,"px ").concat(r,`;
    `),n==="padding"&&"padding-right: ".concat(a,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(qv,` {
    right: `).concat(a,"px ").concat(r,`;
  }
  
  .`).concat(Xv,` {
    margin-right: `).concat(a,"px ").concat(r,`;
  }
  
  .`).concat(qv," .").concat(qv,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(Xv," .").concat(Xv,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body[`).concat(ad,`] {
    `).concat(yle,": ").concat(a,`px;
  }
`)},F_=function(){var t=parseInt(document.body.getAttribute(ad)||"0",10);return isFinite(t)?t:0},Mle=function(){k.useEffect(function(){return document.body.setAttribute(ad,(F_()+1).toString()),function(){var t=F_()-1;t<=0?document.body.removeAttribute(ad):document.body.setAttribute(ad,t.toString())}},[])},Fle=function(t){var e=t.noRelative,n=t.noImportant,r=t.gapMode,o=r===void 0?"margin":r;Mle();var s=k.useMemo(function(){return Rle(o)},[o]);return k.createElement(_le,{styles:Dle(s,!e,o,n?"":"!important")})},wk=!1;if(typeof window<"u")try{var nv=Object.defineProperty({},"passive",{get:function(){return wk=!0,!0}});window.addEventListener("test",nv,nv),window.removeEventListener("test",nv,nv)}catch{wk=!1}var $u=wk?{passive:!1}:!1,Lle=function(t){return t.tagName==="TEXTAREA"},hV=function(t,e){if(!(t instanceof Element))return!1;var n=window.getComputedStyle(t);return n[e]!=="hidden"&&!(n.overflowY===n.overflowX&&!Lle(t)&&n[e]==="visible")},jle=function(t){return hV(t,"overflowY")},Ble=function(t){return hV(t,"overflowX")},L_=function(t,e){var n=e.ownerDocument,r=e;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var o=pV(t,r);if(o){var s=mV(t,r),i=s[1],a=s[2];if(i>a)return!0}r=r.parentNode}while(r&&r!==n.body);return!1},zle=function(t){var e=t.scrollTop,n=t.scrollHeight,r=t.clientHeight;return[e,n,r]},Wle=function(t){var e=t.scrollLeft,n=t.scrollWidth,r=t.clientWidth;return[e,n,r]},pV=function(t,e){return t==="v"?jle(e):Ble(e)},mV=function(t,e){return t==="v"?zle(e):Wle(e)},Vle=function(t,e){return t==="h"&&e==="rtl"?-1:1},Ule=function(t,e,n,r,o){var s=Vle(t,window.getComputedStyle(e).direction),i=s*r,a=n.target,l=e.contains(a),c=!1,u=i>0,d=0,f=0;do{var h=mV(t,a),p=h[0],m=h[1],g=h[2],y=m-g-s*p;(p||y)&&pV(t,a)&&(d+=y,f+=p),a instanceof ShadowRoot?a=a.host:a=a.parentNode}while(!l&&a!==document.body||l&&(e.contains(a)||e===a));return(u&&(Math.abs(d)<1||!o)||!u&&(Math.abs(f)<1||!o))&&(c=!0),c},rv=function(t){return"changedTouches"in t?[t.changedTouches[0].clientX,t.changedTouches[0].clientY]:[0,0]},j_=function(t){return[t.deltaX,t.deltaY]},B_=function(t){return t&&"current"in t?t.current:t},Gle=function(t,e){return t[0]===e[0]&&t[1]===e[1]},Hle=function(t){return`
  .block-interactivity-`.concat(t,` {pointer-events: none;}
  .allow-interactivity-`).concat(t,` {pointer-events: all;}
`)},Kle=0,ku=[];function qle(t){var e=k.useRef([]),n=k.useRef([0,0]),r=k.useRef(),o=k.useState(Kle++)[0],s=k.useState(fV)[0],i=k.useRef(t);k.useEffect(function(){i.current=t},[t]),k.useEffect(function(){if(t.inert){document.body.classList.add("block-interactivity-".concat(o));var m=mle([t.lockRef.current],(t.shards||[]).map(B_),!0).filter(Boolean);return m.forEach(function(g){return g.classList.add("allow-interactivity-".concat(o))}),function(){document.body.classList.remove("block-interactivity-".concat(o)),m.forEach(function(g){return g.classList.remove("allow-interactivity-".concat(o))})}}},[t.inert,t.lockRef.current,t.shards]);var a=k.useCallback(function(m,g){if("touches"in m&&m.touches.length===2||m.type==="wheel"&&m.ctrlKey)return!i.current.allowPinchZoom;var y=rv(m),v=n.current,x="deltaX"in m?m.deltaX:v[0]-y[0],b="deltaY"in m?m.deltaY:v[1]-y[1],w,C=m.target,$=Math.abs(x)>Math.abs(b)?"h":"v";if("touches"in m&&$==="h"&&C.type==="range")return!1;var T=L_($,C);if(!T)return!0;if(T?w=$:(w=$==="v"?"h":"v",T=L_($,C)),!T)return!1;if(!r.current&&"changedTouches"in m&&(x||b)&&(r.current=w),!w)return!0;var I=r.current||w;return Ule(I,g,m,I==="h"?x:b,!0)},[]),l=k.useCallback(function(m){var g=m;if(!(!ku.length||ku[ku.length-1]!==s)){var y="deltaY"in g?j_(g):rv(g),v=e.current.filter(function(w){return w.name===g.type&&(w.target===g.target||g.target===w.shadowParent)&&Gle(w.delta,y)})[0];if(v&&v.should){g.cancelable&&g.preventDefault();return}if(!v){var x=(i.current.shards||[]).map(B_).filter(Boolean).filter(function(w){return w.contains(g.target)}),b=x.length>0?a(g,x[0]):!i.current.noIsolation;b&&g.cancelable&&g.preventDefault()}}},[]),c=k.useCallback(function(m,g,y,v){var x={name:m,delta:g,target:y,should:v,shadowParent:Xle(y)};e.current.push(x),setTimeout(function(){e.current=e.current.filter(function(b){return b!==x})},1)},[]),u=k.useCallback(function(m){n.current=rv(m),r.current=void 0},[]),d=k.useCallback(function(m){c(m.type,j_(m),m.target,a(m,t.lockRef.current))},[]),f=k.useCallback(function(m){c(m.type,rv(m),m.target,a(m,t.lockRef.current))},[]);k.useEffect(function(){return ku.push(s),t.setCallbacks({onScrollCapture:d,onWheelCapture:d,onTouchMoveCapture:f}),document.addEventListener("wheel",l,$u),document.addEventListener("touchmove",l,$u),document.addEventListener("touchstart",u,$u),function(){ku=ku.filter(function(m){return m!==s}),document.removeEventListener("wheel",l,$u),document.removeEventListener("touchmove",l,$u),document.removeEventListener("touchstart",u,$u)}},[]);var h=t.removeScrollBar,p=t.inert;return k.createElement(k.Fragment,null,p?k.createElement(s,{styles:Hle(o)}):null,h?k.createElement(Fle,{gapMode:t.gapMode}):null)}function Xle(t){for(var e=null;t!==null;)t instanceof ShadowRoot&&(e=t.host,t=t.host),t=t.parentNode;return e}const Yle=$le(dV,qle);var H0=k.forwardRef(function(t,e){return k.createElement(G0,Zs({},t,{ref:e,sideCar:Yle}))});H0.classNames=G0.classNames;var Qle=[" ","Enter","ArrowUp","ArrowDown"],Zle=[" ","Enter"],tg="Select",[K0,q0,Jle]=Xm(tg),[Af,jot]=Jr(tg,[Jle,Nf]),X0=Nf(),[ece,wl]=Af(tg),[tce,nce]=Af(tg),gV=t=>{const{__scopeSelect:e,children:n,open:r,defaultOpen:o,onOpenChange:s,value:i,defaultValue:a,onValueChange:l,dir:c,name:u,autoComplete:d,disabled:f,required:h,form:p}=t,m=X0(e),[g,y]=k.useState(null),[v,x]=k.useState(null),[b,w]=k.useState(!1),C=eg(c),[$=!1,T]=qi({prop:r,defaultProp:o,onChange:s}),[I,E]=qi({prop:i,defaultProp:a,onChange:l}),N=k.useRef(null),A=g?p||!!g.closest("form"):!0,[R,P]=k.useState(new Set),F=Array.from(R).map(_=>_.props.value).join(";");return S.jsx(yW,{...m,children:S.jsxs(ece,{required:h,scope:e,trigger:g,onTriggerChange:y,valueNode:v,onValueNodeChange:x,valueNodeHasChildren:b,onValueNodeHasChildrenChange:w,contentId:Fi(),value:I,onValueChange:E,open:$,onOpenChange:T,dir:C,triggerPointerDownPosRef:N,disabled:f,children:[S.jsx(K0.Provider,{scope:e,children:S.jsx(tce,{scope:t.__scopeSelect,onNativeOptionAdd:k.useCallback(_=>{P(L=>new Set(L).add(_))},[]),onNativeOptionRemove:k.useCallback(_=>{P(L=>{const O=new Set(L);return O.delete(_),O})},[]),children:n})}),A?S.jsxs(zV,{"aria-hidden":!0,required:h,tabIndex:-1,name:u,autoComplete:d,value:I,onChange:_=>E(_.target.value),disabled:f,form:p,children:[I===void 0?S.jsx("option",{value:""}):null,Array.from(R)]},F):null]})})};gV.displayName=tg;var yV="SelectTrigger",vV=k.forwardRef((t,e)=>{const{__scopeSelect:n,disabled:r=!1,...o}=t,s=X0(n),i=wl(yV,n),a=i.disabled||r,l=Xe(e,i.onTriggerChange),c=q0(n),u=k.useRef("touch"),[d,f,h]=WV(m=>{const g=c().filter(x=>!x.disabled),y=g.find(x=>x.value===i.value),v=VV(g,m,y);v!==void 0&&i.onValueChange(v.value)}),p=m=>{a||(i.onOpenChange(!0),h()),m&&(i.triggerPointerDownPosRef.current={x:Math.round(m.pageX),y:Math.round(m.pageY)})};return S.jsx(iN,{asChild:!0,...s,children:S.jsx(Re.button,{type:"button",role:"combobox","aria-controls":i.contentId,"aria-expanded":i.open,"aria-required":i.required,"aria-autocomplete":"none",dir:i.dir,"data-state":i.open?"open":"closed",disabled:a,"data-disabled":a?"":void 0,"data-placeholder":BV(i.value)?"":void 0,...o,ref:l,onClick:me(o.onClick,m=>{m.currentTarget.focus(),u.current!=="mouse"&&p(m)}),onPointerDown:me(o.onPointerDown,m=>{u.current=m.pointerType;const g=m.target;g.hasPointerCapture(m.pointerId)&&g.releasePointerCapture(m.pointerId),m.button===0&&m.ctrlKey===!1&&m.pointerType==="mouse"&&(p(m),m.preventDefault())}),onKeyDown:me(o.onKeyDown,m=>{const g=d.current!=="";!(m.ctrlKey||m.altKey||m.metaKey)&&m.key.length===1&&f(m.key),!(g&&m.key===" ")&&Qle.includes(m.key)&&(p(),m.preventDefault())})})})});vV.displayName=yV;var xV="SelectValue",bV=k.forwardRef((t,e)=>{const{__scopeSelect:n,className:r,style:o,children:s,placeholder:i="",...a}=t,l=wl(xV,n),{onValueNodeHasChildrenChange:c}=l,u=s!==void 0,d=Xe(e,l.onValueNodeChange);return Nn(()=>{c(u)},[c,u]),S.jsx(Re.span,{...a,ref:d,style:{pointerEvents:"none"},children:BV(l.value)?S.jsx(S.Fragment,{children:i}):s})});bV.displayName=xV;var rce="SelectIcon",wV=k.forwardRef((t,e)=>{const{__scopeSelect:n,children:r,...o}=t;return S.jsx(Re.span,{"aria-hidden":!0,...o,ref:e,children:r||"▼"})});wV.displayName=rce;var oce="SelectPortal",SV=t=>S.jsx(Ym,{asChild:!0,...t});SV.displayName=oce;var Rc="SelectContent",CV=k.forwardRef((t,e)=>{const n=wl(Rc,t.__scopeSelect),[r,o]=k.useState();if(Nn(()=>{o(new DocumentFragment)},[]),!n.open){const s=r;return s?tu.createPortal(S.jsx($V,{scope:t.__scopeSelect,children:S.jsx(K0.Slot,{scope:t.__scopeSelect,children:S.jsx("div",{children:t.children})})}),s):null}return S.jsx(kV,{...t,ref:e})});CV.displayName=Rc;var is=10,[$V,Sl]=Af(Rc),sce="SelectContentImpl",ice=Ac("SelectContent.RemoveScroll"),kV=k.forwardRef((t,e)=>{const{__scopeSelect:n,position:r="item-aligned",onCloseAutoFocus:o,onEscapeKeyDown:s,onPointerDownOutside:i,side:a,sideOffset:l,align:c,alignOffset:u,arrowPadding:d,collisionBoundary:f,collisionPadding:h,sticky:p,hideWhenDetached:m,avoidCollisions:g,...y}=t,v=wl(Rc,n),[x,b]=k.useState(null),[w,C]=k.useState(null),$=Xe(e,se=>b(se)),[T,I]=k.useState(null),[E,N]=k.useState(null),A=q0(n),[R,P]=k.useState(!1),F=k.useRef(!1);k.useEffect(()=>{if(x)return pN(x)},[x]),hN();const _=k.useCallback(se=>{const[fe,...J]=A().map(Z=>Z.ref.current),[ae]=J.slice(-1),le=document.activeElement;for(const Z of se)if(Z===le||(Z==null||Z.scrollIntoView({block:"nearest"}),Z===fe&&w&&(w.scrollTop=0),Z===ae&&w&&(w.scrollTop=w.scrollHeight),Z==null||Z.focus(),document.activeElement!==le))return},[A,w]),L=k.useCallback(()=>_([T,x]),[_,T,x]);k.useEffect(()=>{R&&L()},[R,L]);const{onOpenChange:O,triggerPointerDownPosRef:D}=v;k.useEffect(()=>{if(x){let se={x:0,y:0};const fe=ae=>{var le,Z;se={x:Math.abs(Math.round(ae.pageX)-(((le=D.current)==null?void 0:le.x)??0)),y:Math.abs(Math.round(ae.pageY)-(((Z=D.current)==null?void 0:Z.y)??0))}},J=ae=>{se.x<=10&&se.y<=10?ae.preventDefault():x.contains(ae.target)||O(!1),document.removeEventListener("pointermove",fe),D.current=null};return D.current!==null&&(document.addEventListener("pointermove",fe),document.addEventListener("pointerup",J,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",fe),document.removeEventListener("pointerup",J,{capture:!0})}}},[x,O,D]),k.useEffect(()=>{const se=()=>O(!1);return window.addEventListener("blur",se),window.addEventListener("resize",se),()=>{window.removeEventListener("blur",se),window.removeEventListener("resize",se)}},[O]);const[B,V]=WV(se=>{const fe=A().filter(le=>!le.disabled),J=fe.find(le=>le.ref.current===document.activeElement),ae=VV(fe,se,J);ae&&setTimeout(()=>ae.ref.current.focus())}),G=k.useCallback((se,fe,J)=>{const ae=!F.current&&!J;(v.value!==void 0&&v.value===fe||ae)&&(I(se),ae&&(F.current=!0))},[v.value]),Q=k.useCallback(()=>x==null?void 0:x.focus(),[x]),re=k.useCallback((se,fe,J)=>{const ae=!F.current&&!J;(v.value!==void 0&&v.value===fe||ae)&&N(se)},[v.value]),ie=r==="popper"?Sk:TV,ce=ie===Sk?{side:a,sideOffset:l,align:c,alignOffset:u,arrowPadding:d,collisionBoundary:f,collisionPadding:h,sticky:p,hideWhenDetached:m,avoidCollisions:g}:{};return S.jsx($V,{scope:n,content:x,viewport:w,onViewportChange:C,itemRefCallback:G,selectedItem:T,onItemLeave:Q,itemTextRefCallback:re,focusSelectedItem:L,selectedItemText:E,position:r,isPositioned:R,searchRef:B,children:S.jsx(H0,{as:ice,allowPinchZoom:!0,children:S.jsx(U0,{asChild:!0,trapped:v.open,onMountAutoFocus:se=>{se.preventDefault()},onUnmountAutoFocus:me(o,se=>{var fe;(fe=v.trigger)==null||fe.focus({preventScroll:!0}),se.preventDefault()}),children:S.jsx(kf,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:s,onPointerDownOutside:i,onFocusOutside:se=>se.preventDefault(),onDismiss:()=>v.onOpenChange(!1),children:S.jsx(ie,{role:"listbox",id:v.contentId,"data-state":v.open?"open":"closed",dir:v.dir,onContextMenu:se=>se.preventDefault(),...y,...ce,onPlaced:()=>P(!0),ref:$,style:{display:"flex",flexDirection:"column",outline:"none",...y.style},onKeyDown:me(y.onKeyDown,se=>{const fe=se.ctrlKey||se.altKey||se.metaKey;if(se.key==="Tab"&&se.preventDefault(),!fe&&se.key.length===1&&V(se.key),["ArrowUp","ArrowDown","Home","End"].includes(se.key)){let ae=A().filter(le=>!le.disabled).map(le=>le.ref.current);if(["ArrowUp","End"].includes(se.key)&&(ae=ae.slice().reverse()),["ArrowUp","ArrowDown"].includes(se.key)){const le=se.target,Z=ae.indexOf(le);ae=ae.slice(Z+1)}setTimeout(()=>_(ae)),se.preventDefault()}})})})})})})});kV.displayName=sce;var ace="SelectItemAlignedPosition",TV=k.forwardRef((t,e)=>{const{__scopeSelect:n,onPlaced:r,...o}=t,s=wl(Rc,n),i=Sl(Rc,n),[a,l]=k.useState(null),[c,u]=k.useState(null),d=Xe(e,$=>u($)),f=q0(n),h=k.useRef(!1),p=k.useRef(!0),{viewport:m,selectedItem:g,selectedItemText:y,focusSelectedItem:v}=i,x=k.useCallback(()=>{if(s.trigger&&s.valueNode&&a&&c&&m&&g&&y){const $=s.trigger.getBoundingClientRect(),T=c.getBoundingClientRect(),I=s.valueNode.getBoundingClientRect(),E=y.getBoundingClientRect();if(s.dir!=="rtl"){const le=E.left-T.left,Z=I.left-le,$e=$.left-Z,be=$.width+$e,Pe=Math.max(be,T.width),Ne=window.innerWidth-is,je=Ax(Z,[is,Math.max(is,Ne-Pe)]);a.style.minWidth=be+"px",a.style.left=je+"px"}else{const le=T.right-E.right,Z=window.innerWidth-I.right-le,$e=window.innerWidth-$.right-Z,be=$.width+$e,Pe=Math.max(be,T.width),Ne=window.innerWidth-is,je=Ax(Z,[is,Math.max(is,Ne-Pe)]);a.style.minWidth=be+"px",a.style.right=je+"px"}const N=f(),A=window.innerHeight-is*2,R=m.scrollHeight,P=window.getComputedStyle(c),F=parseInt(P.borderTopWidth,10),_=parseInt(P.paddingTop,10),L=parseInt(P.borderBottomWidth,10),O=parseInt(P.paddingBottom,10),D=F+_+R+O+L,B=Math.min(g.offsetHeight*5,D),V=window.getComputedStyle(m),G=parseInt(V.paddingTop,10),Q=parseInt(V.paddingBottom,10),re=$.top+$.height/2-is,ie=A-re,ce=g.offsetHeight/2,se=g.offsetTop+ce,fe=F+_+se,J=D-fe;if(fe<=re){const le=N.length>0&&g===N[N.length-1].ref.current;a.style.bottom="0px";const Z=c.clientHeight-m.offsetTop-m.offsetHeight,$e=Math.max(ie,ce+(le?Q:0)+Z+L),be=fe+$e;a.style.height=be+"px"}else{const le=N.length>0&&g===N[0].ref.current;a.style.top="0px";const $e=Math.max(re,F+m.offsetTop+(le?G:0)+ce)+J;a.style.height=$e+"px",m.scrollTop=fe-re+m.offsetTop}a.style.margin=`${is}px 0`,a.style.minHeight=B+"px",a.style.maxHeight=A+"px",r==null||r(),requestAnimationFrame(()=>h.current=!0)}},[f,s.trigger,s.valueNode,a,c,m,g,y,s.dir,r]);Nn(()=>x(),[x]);const[b,w]=k.useState();Nn(()=>{c&&w(window.getComputedStyle(c).zIndex)},[c]);const C=k.useCallback($=>{$&&p.current===!0&&(x(),v==null||v(),p.current=!1)},[x,v]);return S.jsx(cce,{scope:n,contentWrapper:a,shouldExpandOnScrollRef:h,onScrollButtonChange:C,children:S.jsx("div",{ref:l,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:b},children:S.jsx(Re.div,{...o,ref:d,style:{boxSizing:"border-box",maxHeight:"100%",...o.style}})})})});TV.displayName=ace;var lce="SelectPopperPosition",Sk=k.forwardRef((t,e)=>{const{__scopeSelect:n,align:r="start",collisionPadding:o=is,...s}=t,i=X0(n);return S.jsx(aN,{...i,...s,ref:e,align:r,collisionPadding:o,style:{boxSizing:"border-box",...s.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});Sk.displayName=lce;var[cce,mN]=Af(Rc,{}),Ck="SelectViewport",IV=k.forwardRef((t,e)=>{const{__scopeSelect:n,nonce:r,...o}=t,s=Sl(Ck,n),i=mN(Ck,n),a=Xe(e,s.onViewportChange),l=k.useRef(0);return S.jsxs(S.Fragment,{children:[S.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:r}),S.jsx(K0.Slot,{scope:n,children:S.jsx(Re.div,{"data-radix-select-viewport":"",role:"presentation",...o,ref:a,style:{position:"relative",flex:1,overflow:"hidden auto",...o.style},onScroll:me(o.onScroll,c=>{const u=c.currentTarget,{contentWrapper:d,shouldExpandOnScrollRef:f}=i;if(f!=null&&f.current&&d){const h=Math.abs(l.current-u.scrollTop);if(h>0){const p=window.innerHeight-is*2,m=parseFloat(d.style.minHeight),g=parseFloat(d.style.height),y=Math.max(m,g);if(y<p){const v=y+h,x=Math.min(p,v),b=v-x;d.style.height=x+"px",d.style.bottom==="0px"&&(u.scrollTop=b>0?b:0,d.style.justifyContent="flex-end")}}}l.current=u.scrollTop})})})]})});IV.displayName=Ck;var EV="SelectGroup",[uce,dce]=Af(EV),fce=k.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t,o=Fi();return S.jsx(uce,{scope:n,id:o,children:S.jsx(Re.div,{role:"group","aria-labelledby":o,...r,ref:e})})});fce.displayName=EV;var NV="SelectLabel",AV=k.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t,o=dce(NV,n);return S.jsx(Re.div,{id:o.id,...r,ref:e})});AV.displayName=NV;var Ox="SelectItem",[hce,OV]=Af(Ox),PV=k.forwardRef((t,e)=>{const{__scopeSelect:n,value:r,disabled:o=!1,textValue:s,...i}=t,a=wl(Ox,n),l=Sl(Ox,n),c=a.value===r,[u,d]=k.useState(s??""),[f,h]=k.useState(!1),p=Xe(e,v=>{var x;return(x=l.itemRefCallback)==null?void 0:x.call(l,v,r,o)}),m=Fi(),g=k.useRef("touch"),y=()=>{o||(a.onValueChange(r),a.onOpenChange(!1))};if(r==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return S.jsx(hce,{scope:n,value:r,disabled:o,textId:m,isSelected:c,onItemTextChange:k.useCallback(v=>{d(x=>x||((v==null?void 0:v.textContent)??"").trim())},[]),children:S.jsx(K0.ItemSlot,{scope:n,value:r,disabled:o,textValue:u,children:S.jsx(Re.div,{role:"option","aria-labelledby":m,"data-highlighted":f?"":void 0,"aria-selected":c&&f,"data-state":c?"checked":"unchecked","aria-disabled":o||void 0,"data-disabled":o?"":void 0,tabIndex:o?void 0:-1,...i,ref:p,onFocus:me(i.onFocus,()=>h(!0)),onBlur:me(i.onBlur,()=>h(!1)),onClick:me(i.onClick,()=>{g.current!=="mouse"&&y()}),onPointerUp:me(i.onPointerUp,()=>{g.current==="mouse"&&y()}),onPointerDown:me(i.onPointerDown,v=>{g.current=v.pointerType}),onPointerMove:me(i.onPointerMove,v=>{var x;g.current=v.pointerType,o?(x=l.onItemLeave)==null||x.call(l):g.current==="mouse"&&v.currentTarget.focus({preventScroll:!0})}),onPointerLeave:me(i.onPointerLeave,v=>{var x;v.currentTarget===document.activeElement&&((x=l.onItemLeave)==null||x.call(l))}),onKeyDown:me(i.onKeyDown,v=>{var b;((b=l.searchRef)==null?void 0:b.current)!==""&&v.key===" "||(Zle.includes(v.key)&&y(),v.key===" "&&v.preventDefault())})})})})});PV.displayName=Ox;var Wh="SelectItemText",RV=k.forwardRef((t,e)=>{const{__scopeSelect:n,className:r,style:o,...s}=t,i=wl(Wh,n),a=Sl(Wh,n),l=OV(Wh,n),c=nce(Wh,n),[u,d]=k.useState(null),f=Xe(e,y=>d(y),l.onItemTextChange,y=>{var v;return(v=a.itemTextRefCallback)==null?void 0:v.call(a,y,l.value,l.disabled)}),h=u==null?void 0:u.textContent,p=k.useMemo(()=>S.jsx("option",{value:l.value,disabled:l.disabled,children:h},l.value),[l.disabled,l.value,h]),{onNativeOptionAdd:m,onNativeOptionRemove:g}=c;return Nn(()=>(m(p),()=>g(p)),[m,g,p]),S.jsxs(S.Fragment,{children:[S.jsx(Re.span,{id:l.textId,...s,ref:f}),l.isSelected&&i.valueNode&&!i.valueNodeHasChildren?tu.createPortal(s.children,i.valueNode):null]})});RV.displayName=Wh;var _V="SelectItemIndicator",DV=k.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t;return OV(_V,n).isSelected?S.jsx(Re.span,{"aria-hidden":!0,...r,ref:e}):null});DV.displayName=_V;var $k="SelectScrollUpButton",MV=k.forwardRef((t,e)=>{const n=Sl($k,t.__scopeSelect),r=mN($k,t.__scopeSelect),[o,s]=k.useState(!1),i=Xe(e,r.onScrollButtonChange);return Nn(()=>{if(n.viewport&&n.isPositioned){let a=function(){const c=l.scrollTop>0;s(c)};const l=n.viewport;return a(),l.addEventListener("scroll",a),()=>l.removeEventListener("scroll",a)}},[n.viewport,n.isPositioned]),o?S.jsx(LV,{...t,ref:i,onAutoScroll:()=>{const{viewport:a,selectedItem:l}=n;a&&l&&(a.scrollTop=a.scrollTop-l.offsetHeight)}}):null});MV.displayName=$k;var kk="SelectScrollDownButton",FV=k.forwardRef((t,e)=>{const n=Sl(kk,t.__scopeSelect),r=mN(kk,t.__scopeSelect),[o,s]=k.useState(!1),i=Xe(e,r.onScrollButtonChange);return Nn(()=>{if(n.viewport&&n.isPositioned){let a=function(){const c=l.scrollHeight-l.clientHeight,u=Math.ceil(l.scrollTop)<c;s(u)};const l=n.viewport;return a(),l.addEventListener("scroll",a),()=>l.removeEventListener("scroll",a)}},[n.viewport,n.isPositioned]),o?S.jsx(LV,{...t,ref:i,onAutoScroll:()=>{const{viewport:a,selectedItem:l}=n;a&&l&&(a.scrollTop=a.scrollTop+l.offsetHeight)}}):null});FV.displayName=kk;var LV=k.forwardRef((t,e)=>{const{__scopeSelect:n,onAutoScroll:r,...o}=t,s=Sl("SelectScrollButton",n),i=k.useRef(null),a=q0(n),l=k.useCallback(()=>{i.current!==null&&(window.clearInterval(i.current),i.current=null)},[]);return k.useEffect(()=>()=>l(),[l]),Nn(()=>{var u;const c=a().find(d=>d.ref.current===document.activeElement);(u=c==null?void 0:c.ref.current)==null||u.scrollIntoView({block:"nearest"})},[a]),S.jsx(Re.div,{"aria-hidden":!0,...o,ref:e,style:{flexShrink:0,...o.style},onPointerDown:me(o.onPointerDown,()=>{i.current===null&&(i.current=window.setInterval(r,50))}),onPointerMove:me(o.onPointerMove,()=>{var c;(c=s.onItemLeave)==null||c.call(s),i.current===null&&(i.current=window.setInterval(r,50))}),onPointerLeave:me(o.onPointerLeave,()=>{l()})})}),pce="SelectSeparator",jV=k.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t;return S.jsx(Re.div,{"aria-hidden":!0,...r,ref:e})});jV.displayName=pce;var Tk="SelectArrow",mce=k.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t,o=X0(n),s=wl(Tk,n),i=Sl(Tk,n);return s.open&&i.position==="popper"?S.jsx(lN,{...o,...r,ref:e}):null});mce.displayName=Tk;function BV(t){return t===""||t===void 0}var zV=k.forwardRef((t,e)=>{const{value:n,...r}=t,o=k.useRef(null),s=Xe(e,o),i=z0(n);return k.useEffect(()=>{const a=o.current,l=window.HTMLSelectElement.prototype,u=Object.getOwnPropertyDescriptor(l,"value").set;if(i!==n&&u){const d=new Event("change",{bubbles:!0});u.call(a,n),a.dispatchEvent(d)}},[i,n]),S.jsx(Qm,{asChild:!0,children:S.jsx("select",{...r,ref:s,defaultValue:n})})});zV.displayName="BubbleSelect";function WV(t){const e=Kn(t),n=k.useRef(""),r=k.useRef(0),o=k.useCallback(i=>{const a=n.current+i;e(a),function l(c){n.current=c,window.clearTimeout(r.current),c!==""&&(r.current=window.setTimeout(()=>l(""),1e3))}(a)},[e]),s=k.useCallback(()=>{n.current="",window.clearTimeout(r.current)},[]);return k.useEffect(()=>()=>window.clearTimeout(r.current),[]),[n,o,s]}function VV(t,e,n){const o=e.length>1&&Array.from(e).every(c=>c===e[0])?e[0]:e,s=n?t.indexOf(n):-1;let i=gce(t,Math.max(s,0));o.length===1&&(i=i.filter(c=>c!==n));const l=i.find(c=>c.textValue.toLowerCase().startsWith(o.toLowerCase()));return l!==n?l:void 0}function gce(t,e){return t.map((n,r)=>t[(e+r)%t.length])}var yce=gV,UV=vV,vce=bV,xce=wV,bce=SV,GV=CV,wce=IV,HV=AV,KV=PV,Sce=RV,Cce=DV,qV=MV,XV=FV,YV=jV;const Ik=yce,Ek=vce,Px=k.forwardRef(({className:t,children:e,...n},r)=>S.jsxs(UV,{ref:r,className:Le("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background data-[placeholder]:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",t),...n,children:[e,S.jsx(xce,{asChild:!0,children:S.jsx(L4,{className:"h-4 w-4 opacity-50"})})]}));Px.displayName=UV.displayName;const QV=k.forwardRef(({className:t,...e},n)=>S.jsx(qV,{ref:n,className:Le("flex cursor-default items-center justify-center py-1",t),...e,children:S.jsx(Qte,{className:"h-4 w-4"})}));QV.displayName=qV.displayName;const ZV=k.forwardRef(({className:t,...e},n)=>S.jsx(XV,{ref:n,className:Le("flex cursor-default items-center justify-center py-1",t),...e,children:S.jsx(L4,{className:"h-4 w-4"})}));ZV.displayName=XV.displayName;const Rx=k.forwardRef(({className:t,children:e,position:n="popper",...r},o)=>S.jsx(bce,{children:S.jsxs(GV,{ref:o,className:Le("relative z-50 max-h-[--radix-select-content-available-height] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-select-content-transform-origin]",n==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",t),position:n,...r,children:[S.jsx(QV,{}),S.jsx(wce,{className:Le("p-1",n==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:e}),S.jsx(ZV,{})]})}));Rx.displayName=GV.displayName;const $ce=k.forwardRef(({className:t,...e},n)=>S.jsx(HV,{ref:n,className:Le("py-1.5 pl-8 pr-2 text-sm font-semibold",t),...e}));$ce.displayName=HV.displayName;const jr=k.forwardRef(({className:t,children:e,...n},r)=>S.jsxs(KV,{ref:r,className:Le("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...n,children:[S.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:S.jsx(Cce,{children:S.jsx(qE,{className:"h-4 w-4"})})}),S.jsx(Sce,{children:e})]}));jr.displayName=KV.displayName;const kce=k.forwardRef(({className:t,...e},n)=>S.jsx(YV,{ref:n,className:Le("-mx-1 my-1 h-px bg-muted",t),...e}));kce.displayName=YV.displayName;function Tce({onSearch:t,onCategoryChange:e,onRegionChange:n,category:r,region:o,search:s}){const{t:i}=tn(),[a,l]=k.useState(s),c=u=>{u.preventDefault(),t(a)};return S.jsx("div",{className:"p-6 border-b border-gray-200",children:S.jsx("form",{onSubmit:c,children:S.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[S.jsxs("div",{className:"col-span-2",children:[S.jsx("label",{className:"block text-gray-700 mb-2",children:i("database.search.searchLabel")}),S.jsxs("div",{className:"flex",children:[S.jsx(V0,{type:"text",className:"w-full border border-gray-300 rounded-r-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent",placeholder:i("database.search.searchPlaceholder"),value:a,onChange:u=>l(u.target.value)}),S.jsx(Jt,{type:"submit",className:"bg-primary text-white px-4 py-2 rounded-l-lg hover:bg-primary-dark transition",children:S.jsx(uk,{className:"h-4 w-4"})})]})]}),S.jsxs("div",{children:[S.jsx("label",{className:"block text-gray-700 mb-2",children:i("database.search.categoryLabel")}),S.jsxs(Ik,{value:r,onValueChange:e,children:[S.jsx(Px,{className:"w-full",children:S.jsx(Ek,{placeholder:i("database.search.allCategories")})}),S.jsxs(Rx,{children:[S.jsx(jr,{value:"all",children:i("database.search.allCategories")}),S.jsx(jr,{value:"plants",children:i("database.search.plants")}),S.jsx(jr,{value:"trees",children:i("database.search.trees")}),S.jsx(jr,{value:"soils",children:i("database.search.soils")}),S.jsx(jr,{value:"ecosystems",children:i("database.search.ecosystems")})]})]})]}),S.jsxs("div",{children:[S.jsx("label",{className:"block text-gray-700 mb-2",children:i("database.search.regionLabel")}),S.jsxs(Ik,{value:o,onValueChange:n,children:[S.jsx(Px,{className:"w-full",children:S.jsx(Ek,{placeholder:i("database.search.allRegions")})}),S.jsxs(Rx,{children:[S.jsx(jr,{value:"all",children:i("database.search.allRegions")}),S.jsx(jr,{value:"north",children:i("database.search.north")}),S.jsx(jr,{value:"south",children:i("database.search.south")}),S.jsx(jr,{value:"east",children:i("database.search.east")}),S.jsx(jr,{value:"west",children:i("database.search.west")}),S.jsx(jr,{value:"highlands",children:i("database.search.highlands")}),S.jsx(jr,{value:"desert",children:i("database.search.desert")})]})]})]})]})})})}var gN="Dialog",[JV,Bot]=Jr(gN),[Ice,Ms]=JV(gN),eU=t=>{const{__scopeDialog:e,children:n,open:r,defaultOpen:o,onOpenChange:s,modal:i=!0}=t,a=k.useRef(null),l=k.useRef(null),[c=!1,u]=qi({prop:r,defaultProp:o,onChange:s});return S.jsx(Ice,{scope:e,triggerRef:a,contentRef:l,contentId:Fi(),titleId:Fi(),descriptionId:Fi(),open:c,onOpenChange:u,onOpenToggle:k.useCallback(()=>u(d=>!d),[u]),modal:i,children:n})};eU.displayName=gN;var tU="DialogTrigger",nU=k.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,o=Ms(tU,n),s=Xe(e,o.triggerRef);return S.jsx(Re.button,{type:"button","aria-haspopup":"dialog","aria-expanded":o.open,"aria-controls":o.contentId,"data-state":xN(o.open),...r,ref:s,onClick:me(t.onClick,o.onOpenToggle)})});nU.displayName=tU;var yN="DialogPortal",[Ece,rU]=JV(yN,{forceMount:void 0}),oU=t=>{const{__scopeDialog:e,forceMount:n,children:r,container:o}=t,s=Ms(yN,e);return S.jsx(Ece,{scope:e,forceMount:n,children:k.Children.map(r,i=>S.jsx(Yo,{present:n||s.open,children:S.jsx(Ym,{asChild:!0,container:o,children:i})}))})};oU.displayName=yN;var _x="DialogOverlay",sU=k.forwardRef((t,e)=>{const n=rU(_x,t.__scopeDialog),{forceMount:r=n.forceMount,...o}=t,s=Ms(_x,t.__scopeDialog);return s.modal?S.jsx(Yo,{present:r||s.open,children:S.jsx(Ace,{...o,ref:e})}):null});sU.displayName=_x;var Nce=Ac("DialogOverlay.RemoveScroll"),Ace=k.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,o=Ms(_x,n);return S.jsx(H0,{as:Nce,allowPinchZoom:!0,shards:[o.contentRef],children:S.jsx(Re.div,{"data-state":xN(o.open),...r,ref:e,style:{pointerEvents:"auto",...r.style}})})}),_c="DialogContent",iU=k.forwardRef((t,e)=>{const n=rU(_c,t.__scopeDialog),{forceMount:r=n.forceMount,...o}=t,s=Ms(_c,t.__scopeDialog);return S.jsx(Yo,{present:r||s.open,children:s.modal?S.jsx(Oce,{...o,ref:e}):S.jsx(Pce,{...o,ref:e})})});iU.displayName=_c;var Oce=k.forwardRef((t,e)=>{const n=Ms(_c,t.__scopeDialog),r=k.useRef(null),o=Xe(e,n.contentRef,r);return k.useEffect(()=>{const s=r.current;if(s)return pN(s)},[]),S.jsx(aU,{...t,ref:o,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:me(t.onCloseAutoFocus,s=>{var i;s.preventDefault(),(i=n.triggerRef.current)==null||i.focus()}),onPointerDownOutside:me(t.onPointerDownOutside,s=>{const i=s.detail.originalEvent,a=i.button===0&&i.ctrlKey===!0;(i.button===2||a)&&s.preventDefault()}),onFocusOutside:me(t.onFocusOutside,s=>s.preventDefault())})}),Pce=k.forwardRef((t,e)=>{const n=Ms(_c,t.__scopeDialog),r=k.useRef(!1),o=k.useRef(!1);return S.jsx(aU,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:s=>{var i,a;(i=t.onCloseAutoFocus)==null||i.call(t,s),s.defaultPrevented||(r.current||(a=n.triggerRef.current)==null||a.focus(),s.preventDefault()),r.current=!1,o.current=!1},onInteractOutside:s=>{var l,c;(l=t.onInteractOutside)==null||l.call(t,s),s.defaultPrevented||(r.current=!0,s.detail.originalEvent.type==="pointerdown"&&(o.current=!0));const i=s.target;((c=n.triggerRef.current)==null?void 0:c.contains(i))&&s.preventDefault(),s.detail.originalEvent.type==="focusin"&&o.current&&s.preventDefault()}})}),aU=k.forwardRef((t,e)=>{const{__scopeDialog:n,trapFocus:r,onOpenAutoFocus:o,onCloseAutoFocus:s,...i}=t,a=Ms(_c,n),l=k.useRef(null),c=Xe(e,l);return hN(),S.jsxs(S.Fragment,{children:[S.jsx(U0,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:o,onUnmountAutoFocus:s,children:S.jsx(kf,{role:"dialog",id:a.contentId,"aria-describedby":a.descriptionId,"aria-labelledby":a.titleId,"data-state":xN(a.open),...i,ref:c,onDismiss:()=>a.onOpenChange(!1)})}),S.jsxs(S.Fragment,{children:[S.jsx(Rce,{titleId:a.titleId}),S.jsx(Dce,{contentRef:l,descriptionId:a.descriptionId})]})]})}),vN="DialogTitle",lU=k.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,o=Ms(vN,n);return S.jsx(Re.h2,{id:o.titleId,...r,ref:e})});lU.displayName=vN;var cU="DialogDescription",uU=k.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,o=Ms(cU,n);return S.jsx(Re.p,{id:o.descriptionId,...r,ref:e})});uU.displayName=cU;var dU="DialogClose",fU=k.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,o=Ms(dU,n);return S.jsx(Re.button,{type:"button",...r,ref:e,onClick:me(t.onClick,()=>o.onOpenChange(!1))})});fU.displayName=dU;function xN(t){return t?"open":"closed"}var hU="DialogTitleWarning",[zot,pU]=rte(hU,{contentName:_c,titleName:vN,docsSlug:"dialog"}),Rce=({titleId:t})=>{const e=pU(hU),n=`\`${e.contentName}\` requires a \`${e.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${e.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${e.docsSlug}`;return k.useEffect(()=>{t&&(document.getElementById(t)||console.error(n))},[n,t]),null},_ce="DialogDescriptionWarning",Dce=({contentRef:t,descriptionId:e})=>{const r=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${pU(_ce).contentName}}.`;return k.useEffect(()=>{var s;const o=(s=t.current)==null?void 0:s.getAttribute("aria-describedby");e&&o&&(document.getElementById(e)||console.warn(r))},[r,t,e]),null},Mce=eU,Fce=nU,Lce=oU,mU=sU,gU=iU,yU=lU,vU=uU,jce=fU;const xU=Mce,bU=Fce,Bce=Lce,wU=k.forwardRef(({className:t,...e},n)=>S.jsx(mU,{ref:n,className:Le("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...e}));wU.displayName=mU.displayName;const bN=k.forwardRef(({className:t,children:e,...n},r)=>S.jsxs(Bce,{children:[S.jsx(wU,{}),S.jsxs(gU,{ref:r,className:Le("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",t),...n,children:[e,S.jsxs(jce,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[S.jsx(XE,{className:"h-4 w-4"}),S.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));bN.displayName=gU.displayName;const wN=({className:t,...e})=>S.jsx("div",{className:Le("flex flex-col space-y-1.5 text-center sm:text-left",t),...e});wN.displayName="DialogHeader";const SN=k.forwardRef(({className:t,...e},n)=>S.jsx(yU,{ref:n,className:Le("text-lg font-semibold leading-none tracking-tight",t),...e}));SN.displayName=yU.displayName;const SU=k.forwardRef(({className:t,...e},n)=>S.jsx(vU,{ref:n,className:Le("text-sm text-muted-foreground",t),...e}));SU.displayName=vU.displayName;function zce({item:t}){const{t:e}=tn(),[n,r]=k.useState(!1);let o="نبات",s="bg-green-100 text-green-800";return t.soilType?(o="تربة",s="bg-yellow-100 text-yellow-800"):t.ecosystemId?(o="نظام بيئي",s="bg-blue-100 text-blue-800"):t.category&&(o=t.category),S.jsxs("div",{className:"border border-gray-200 rounded-lg overflow-hidden hover:shadow-md transition duration-300",children:[S.jsx("img",{src:t.imageUrl,className:"w-full h-44 object-cover",alt:t.name||t.plantName||t.soilType}),S.jsxs("div",{className:"p-4",children:[S.jsxs("div",{className:"flex justify-between items-start mb-2",children:[S.jsx("h4",{className:"font-bold",children:t.name||t.plantName||t.soilType}),S.jsx("span",{className:`text-xs ${s} px-2 py-0.5 rounded-full`,children:o})]}),S.jsx("p",{className:"text-sm text-gray-600 mb-3 line-clamp-2",children:t.description}),S.jsxs("div",{className:"flex justify-between text-xs text-gray-500",children:[S.jsxs("span",{children:[e("database.item.region"),": ",t.region]}),S.jsxs(xU,{open:n,onOpenChange:r,children:[S.jsx(bU,{asChild:!0,children:S.jsx(Jt,{variant:"link",className:"text-primary hover:underline p-0 h-auto",children:e("database.item.viewMore")})}),S.jsxs(bN,{className:"sm:max-w-[500px]",children:[S.jsxs(wN,{children:[S.jsx(SN,{children:t.name||t.plantName||t.soilType}),S.jsxs(SU,{children:[o," - ",t.region]})]}),S.jsxs("div",{className:"mt-4",children:[S.jsx("img",{src:t.imageUrl,className:"w-full h-48 object-cover rounded-md mb-4",alt:t.name||t.plantName||t.soilType}),t.scientificName&&S.jsxs("div",{className:"mb-3",children:[S.jsxs("h4",{className:"text-sm font-semibold",children:[e("database.details.scientificName"),":"]}),S.jsx("p",{className:"text-sm",children:t.scientificName})]}),S.jsxs("div",{className:"mb-3",children:[S.jsxs("h4",{className:"text-sm font-semibold",children:[e("database.details.description"),":"]}),S.jsx("p",{className:"text-sm",children:t.description})]}),t.characteristics&&S.jsxs("div",{children:[S.jsxs("h4",{className:"text-sm font-semibold",children:[e("database.details.characteristics"),":"]}),S.jsx("div",{className:"grid grid-cols-2 gap-2 mt-2",children:Object.entries(t.characteristics).map(([i,a])=>S.jsxs("div",{className:"bg-gray-100 p-2 rounded",children:[S.jsxs("span",{className:"text-xs font-medium",children:[i,": "]}),S.jsx("span",{className:"text-xs",children:String(a)})]},i))})]})]})]})]})]})]})]})}function Wce(){const{t}=tn(),[e,n]=k.useState("all"),[r,o]=k.useState("all"),[s,i]=k.useState(""),[a,l]=k.useState(1),c={all:"كل الجزائر",north:"الشمال",south:"الجنوب",east:"الشرق",west:"الغرب",highlands:"الهضاب العليا",desert:"الصحراء"},u={all:"جميع الفئات",plants:"نباتات",trees:"أشجار",soils:"أنواع التربة",ecosystems:"أنظمة بيئية"},d=()=>e==="soils"?"/api/database/soil-types":e==="ecosystems"?"/api/database/ecosystems":"/api/database/plant-species",f=()=>{const C=new URLSearchParams;return r!=="all"&&C.append("region",c[r]),s&&C.append("search",s),e!=="all"&&e!=="soils"&&e!=="ecosystems"&&C.append("category",u[e]),C.toString()},{data:h=[],isLoading:p}=E0({queryKey:[d(),f()]}),m=C=>{i(C),l(1)},g=C=>{n(C),l(1)},y=C=>{o(C),l(1)},v=()=>{l(C=>C+1)},b=h.slice(0,a*6),w=b.length<h.length;return S.jsxs(S.Fragment,{children:[S.jsxs(dl,{children:[S.jsx("title",{children:t("seo.database.title")}),S.jsx("meta",{name:"description",content:t("seo.database.description")})]}),S.jsx("section",{id:"database",className:"py-16 bg-gray-50",children:S.jsxs("div",{className:"container mx-auto px-4",children:[S.jsx("h2",{className:"text-3xl font-bold text-center mb-8 font-cairo",children:t("database.title")}),S.jsx("p",{className:"text-center text-gray-600 max-w-2xl mx-auto mb-12",children:t("database.description")}),S.jsxs("div",{className:"bg-white rounded-xl shadow-md overflow-hidden mb-8",children:[S.jsx(Tce,{onSearch:m,onCategoryChange:g,onRegionChange:y,category:e,region:r,search:s}),S.jsxs("div",{className:"p-6",children:[p?S.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:Array(6).fill(0).map((C,$)=>S.jsxs("div",{className:"border border-gray-200 rounded-lg overflow-hidden",children:[S.jsx(br,{className:"w-full h-44"}),S.jsxs("div",{className:"p-4",children:[S.jsxs("div",{className:"flex justify-between items-start mb-2",children:[S.jsx(br,{className:"h-6 w-24"}),S.jsx(br,{className:"h-5 w-16"})]}),S.jsx(br,{className:"h-4 w-full mb-2"}),S.jsx(br,{className:"h-4 w-full mb-2"}),S.jsx(br,{className:"h-4 w-3/4 mb-3"}),S.jsxs("div",{className:"flex justify-between",children:[S.jsx(br,{className:"h-4 w-28"}),S.jsx(br,{className:"h-4 w-20"})]})]})]},$))}):b.length>0?S.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:b.map(C=>S.jsx(zce,{item:C},C.id))}):S.jsx("div",{className:"text-center py-12",children:S.jsx("p",{className:"text-gray-500 text-lg",children:t("database.noResults")})}),w&&!p&&S.jsx("div",{className:"mt-8 flex justify-center",children:S.jsx(Jt,{onClick:v,className:"px-6 py-3 bg-white border border-primary text-primary rounded-lg hover:bg-primary hover:text-white transition",children:t("database.loadMore")})})]})]})]})})]})}var CU=["PageUp","PageDown"],$U=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],kU={"from-left":["Home","PageDown","ArrowDown","ArrowLeft"],"from-right":["Home","PageDown","ArrowDown","ArrowRight"],"from-bottom":["Home","PageDown","ArrowDown","ArrowLeft"],"from-top":["Home","PageDown","ArrowUp","ArrowLeft"]},Of="Slider",[Nk,Vce,Uce]=Xm(Of),[TU,Wot]=Jr(Of,[Uce]),[Gce,Y0]=TU(Of),IU=k.forwardRef((t,e)=>{const{name:n,min:r=0,max:o=100,step:s=1,orientation:i="horizontal",disabled:a=!1,minStepsBetweenThumbs:l=0,defaultValue:c=[r],value:u,onValueChange:d=()=>{},onValueCommit:f=()=>{},inverted:h=!1,form:p,...m}=t,g=k.useRef(new Set),y=k.useRef(0),x=i==="horizontal"?Hce:Kce,[b=[],w]=qi({prop:u,defaultProp:c,onChange:N=>{var R;(R=[...g.current][y.current])==null||R.focus(),d(N)}}),C=k.useRef(b);function $(N){const A=Zce(b,N);E(N,A)}function T(N){E(N,y.current)}function I(){const N=C.current[y.current];b[y.current]!==N&&f(b)}function E(N,A,{commit:R}={commit:!1}){const P=nue(s),F=rue(Math.round((N-r)/s)*s+r,P),_=Ax(F,[r,o]);w((L=[])=>{const O=Yce(L,_,A);if(tue(O,l*s)){y.current=O.indexOf(_);const D=String(O)!==String(L);return D&&R&&f(O),D?O:L}else return L})}return S.jsx(Gce,{scope:t.__scopeSlider,name:n,disabled:a,min:r,max:o,valueIndexToChangeRef:y,thumbs:g.current,values:b,orientation:i,form:p,children:S.jsx(Nk.Provider,{scope:t.__scopeSlider,children:S.jsx(Nk.Slot,{scope:t.__scopeSlider,children:S.jsx(x,{"aria-disabled":a,"data-disabled":a?"":void 0,...m,ref:e,onPointerDown:me(m.onPointerDown,()=>{a||(C.current=b)}),min:r,max:o,inverted:h,onSlideStart:a?void 0:$,onSlideMove:a?void 0:T,onSlideEnd:a?void 0:I,onHomeKeyDown:()=>!a&&E(r,0,{commit:!0}),onEndKeyDown:()=>!a&&E(o,b.length-1,{commit:!0}),onStepKeyDown:({event:N,direction:A})=>{if(!a){const F=CU.includes(N.key)||N.shiftKey&&$U.includes(N.key)?10:1,_=y.current,L=b[_],O=s*F*A;E(L+O,_,{commit:!0})}}})})})})});IU.displayName=Of;var[EU,NU]=TU(Of,{startEdge:"left",endEdge:"right",size:"width",direction:1}),Hce=k.forwardRef((t,e)=>{const{min:n,max:r,dir:o,inverted:s,onSlideStart:i,onSlideMove:a,onSlideEnd:l,onStepKeyDown:c,...u}=t,[d,f]=k.useState(null),h=Xe(e,x=>f(x)),p=k.useRef(void 0),m=eg(o),g=m==="ltr",y=g&&!s||!g&&s;function v(x){const b=p.current||d.getBoundingClientRect(),w=[0,b.width],$=CN(w,y?[n,r]:[r,n]);return p.current=b,$(x-b.left)}return S.jsx(EU,{scope:t.__scopeSlider,startEdge:y?"left":"right",endEdge:y?"right":"left",direction:y?1:-1,size:"width",children:S.jsx(AU,{dir:m,"data-orientation":"horizontal",...u,ref:h,style:{...u.style,"--radix-slider-thumb-transform":"translateX(-50%)"},onSlideStart:x=>{const b=v(x.clientX);i==null||i(b)},onSlideMove:x=>{const b=v(x.clientX);a==null||a(b)},onSlideEnd:()=>{p.current=void 0,l==null||l()},onStepKeyDown:x=>{const w=kU[y?"from-left":"from-right"].includes(x.key);c==null||c({event:x,direction:w?-1:1})}})})}),Kce=k.forwardRef((t,e)=>{const{min:n,max:r,inverted:o,onSlideStart:s,onSlideMove:i,onSlideEnd:a,onStepKeyDown:l,...c}=t,u=k.useRef(null),d=Xe(e,u),f=k.useRef(void 0),h=!o;function p(m){const g=f.current||u.current.getBoundingClientRect(),y=[0,g.height],x=CN(y,h?[r,n]:[n,r]);return f.current=g,x(m-g.top)}return S.jsx(EU,{scope:t.__scopeSlider,startEdge:h?"bottom":"top",endEdge:h?"top":"bottom",size:"height",direction:h?1:-1,children:S.jsx(AU,{"data-orientation":"vertical",...c,ref:d,style:{...c.style,"--radix-slider-thumb-transform":"translateY(50%)"},onSlideStart:m=>{const g=p(m.clientY);s==null||s(g)},onSlideMove:m=>{const g=p(m.clientY);i==null||i(g)},onSlideEnd:()=>{f.current=void 0,a==null||a()},onStepKeyDown:m=>{const y=kU[h?"from-bottom":"from-top"].includes(m.key);l==null||l({event:m,direction:y?-1:1})}})})}),AU=k.forwardRef((t,e)=>{const{__scopeSlider:n,onSlideStart:r,onSlideMove:o,onSlideEnd:s,onHomeKeyDown:i,onEndKeyDown:a,onStepKeyDown:l,...c}=t,u=Y0(Of,n);return S.jsx(Re.span,{...c,ref:e,onKeyDown:me(t.onKeyDown,d=>{d.key==="Home"?(i(d),d.preventDefault()):d.key==="End"?(a(d),d.preventDefault()):CU.concat($U).includes(d.key)&&(l(d),d.preventDefault())}),onPointerDown:me(t.onPointerDown,d=>{const f=d.target;f.setPointerCapture(d.pointerId),d.preventDefault(),u.thumbs.has(f)?f.focus():r(d)}),onPointerMove:me(t.onPointerMove,d=>{d.target.hasPointerCapture(d.pointerId)&&o(d)}),onPointerUp:me(t.onPointerUp,d=>{const f=d.target;f.hasPointerCapture(d.pointerId)&&(f.releasePointerCapture(d.pointerId),s(d))})})}),OU="SliderTrack",PU=k.forwardRef((t,e)=>{const{__scopeSlider:n,...r}=t,o=Y0(OU,n);return S.jsx(Re.span,{"data-disabled":o.disabled?"":void 0,"data-orientation":o.orientation,...r,ref:e})});PU.displayName=OU;var Ak="SliderRange",RU=k.forwardRef((t,e)=>{const{__scopeSlider:n,...r}=t,o=Y0(Ak,n),s=NU(Ak,n),i=k.useRef(null),a=Xe(e,i),l=o.values.length,c=o.values.map(f=>DU(f,o.min,o.max)),u=l>1?Math.min(...c):0,d=100-Math.max(...c);return S.jsx(Re.span,{"data-orientation":o.orientation,"data-disabled":o.disabled?"":void 0,...r,ref:a,style:{...t.style,[s.startEdge]:u+"%",[s.endEdge]:d+"%"}})});RU.displayName=Ak;var Ok="SliderThumb",_U=k.forwardRef((t,e)=>{const n=Vce(t.__scopeSlider),[r,o]=k.useState(null),s=Xe(e,a=>o(a)),i=k.useMemo(()=>r?n().findIndex(a=>a.ref.current===r):-1,[n,r]);return S.jsx(qce,{...t,ref:s,index:i})}),qce=k.forwardRef((t,e)=>{const{__scopeSlider:n,index:r,name:o,...s}=t,i=Y0(Ok,n),a=NU(Ok,n),[l,c]=k.useState(null),u=Xe(e,v=>c(v)),d=l?i.form||!!l.closest("form"):!0,f=M0(l),h=i.values[r],p=h===void 0?0:DU(h,i.min,i.max),m=Qce(r,i.values.length),g=f==null?void 0:f[a.size],y=g?Jce(g,p,a.direction):0;return k.useEffect(()=>{if(l)return i.thumbs.add(l),()=>{i.thumbs.delete(l)}},[l,i.thumbs]),S.jsxs("span",{style:{transform:"var(--radix-slider-thumb-transform)",position:"absolute",[a.startEdge]:`calc(${p}% + ${y}px)`},children:[S.jsx(Nk.ItemSlot,{scope:t.__scopeSlider,children:S.jsx(Re.span,{role:"slider","aria-label":t["aria-label"]||m,"aria-valuemin":i.min,"aria-valuenow":h,"aria-valuemax":i.max,"aria-orientation":i.orientation,"data-orientation":i.orientation,"data-disabled":i.disabled?"":void 0,tabIndex:i.disabled?void 0:0,...s,ref:u,style:h===void 0?{display:"none"}:t.style,onFocus:me(t.onFocus,()=>{i.valueIndexToChangeRef.current=r})})}),d&&S.jsx(Xce,{name:o??(i.name?i.name+(i.values.length>1?"[]":""):void 0),form:i.form,value:h},r)]})});_U.displayName=Ok;var Xce=t=>{const{value:e,...n}=t,r=k.useRef(null),o=z0(e);return k.useEffect(()=>{const s=r.current,i=window.HTMLInputElement.prototype,l=Object.getOwnPropertyDescriptor(i,"value").set;if(o!==e&&l){const c=new Event("input",{bubbles:!0});l.call(s,e),s.dispatchEvent(c)}},[o,e]),S.jsx("input",{style:{display:"none"},...n,ref:r,defaultValue:e})};function Yce(t=[],e,n){const r=[...t];return r[n]=e,r.sort((o,s)=>o-s)}function DU(t,e,n){const s=100/(n-e)*(t-e);return Ax(s,[0,100])}function Qce(t,e){return e>2?`Value ${t+1} of ${e}`:e===2?["Minimum","Maximum"][t]:void 0}function Zce(t,e){if(t.length===1)return 0;const n=t.map(o=>Math.abs(o-e)),r=Math.min(...n);return n.indexOf(r)}function Jce(t,e,n){const r=t/2,s=CN([0,50],[0,r]);return(r-s(e)*n)*n}function eue(t){return t.slice(0,-1).map((e,n)=>t[n+1]-e)}function tue(t,e){if(e>0){const n=eue(t);return Math.min(...n)>=e}return!0}function CN(t,e){return n=>{if(t[0]===t[1]||e[0]===e[1])return e[0];const r=(e[1]-e[0])/(t[1]-t[0]);return e[0]+r*(n-t[0])}}function nue(t){return(String(t).split(".")[1]||"").length}function rue(t,e){const n=Math.pow(10,e);return Math.round(t*n)/n}var MU=IU,oue=PU,sue=RU,iue=_U;const Vh=k.forwardRef(({className:t,...e},n)=>S.jsxs(MU,{ref:n,className:Le("relative flex w-full touch-none select-none items-center",t),...e,children:[S.jsx(oue,{className:"relative h-2 w-full grow overflow-hidden rounded-full bg-secondary",children:S.jsx(sue,{className:"absolute h-full bg-primary"})}),S.jsx(iue,{className:"block h-5 w-5 rounded-full border-2 border-primary bg-background ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50"})]}));Vh.displayName=MU.displayName;var $N="Checkbox",[aue,Vot]=Jr($N),[lue,cue]=aue($N),FU=k.forwardRef((t,e)=>{const{__scopeCheckbox:n,name:r,checked:o,defaultChecked:s,required:i,disabled:a,value:l="on",onCheckedChange:c,form:u,...d}=t,[f,h]=k.useState(null),p=Xe(e,b=>h(b)),m=k.useRef(!1),g=f?u||!!f.closest("form"):!0,[y=!1,v]=qi({prop:o,defaultProp:s,onChange:c}),x=k.useRef(y);return k.useEffect(()=>{const b=f==null?void 0:f.form;if(b){const w=()=>v(x.current);return b.addEventListener("reset",w),()=>b.removeEventListener("reset",w)}},[f,v]),S.jsxs(lue,{scope:n,state:y,disabled:a,children:[S.jsx(Re.button,{type:"button",role:"checkbox","aria-checked":Ja(y)?"mixed":y,"aria-required":i,"data-state":BU(y),"data-disabled":a?"":void 0,disabled:a,value:l,...d,ref:p,onKeyDown:me(t.onKeyDown,b=>{b.key==="Enter"&&b.preventDefault()}),onClick:me(t.onClick,b=>{v(w=>Ja(w)?!0:!w),g&&(m.current=b.isPropagationStopped(),m.current||b.stopPropagation())})}),g&&S.jsx(uue,{control:f,bubbles:!m.current,name:r,value:l,checked:y,required:i,disabled:a,form:u,style:{transform:"translateX(-100%)"},defaultChecked:Ja(s)?!1:s})]})});FU.displayName=$N;var LU="CheckboxIndicator",jU=k.forwardRef((t,e)=>{const{__scopeCheckbox:n,forceMount:r,...o}=t,s=cue(LU,n);return S.jsx(Yo,{present:r||Ja(s.state)||s.state===!0,children:S.jsx(Re.span,{"data-state":BU(s.state),"data-disabled":s.disabled?"":void 0,...o,ref:e,style:{pointerEvents:"none",...t.style}})})});jU.displayName=LU;var uue=t=>{const{control:e,checked:n,bubbles:r=!0,defaultChecked:o,...s}=t,i=k.useRef(null),a=z0(n),l=M0(e);k.useEffect(()=>{const u=i.current,d=window.HTMLInputElement.prototype,h=Object.getOwnPropertyDescriptor(d,"checked").set;if(a!==n&&h){const p=new Event("click",{bubbles:r});u.indeterminate=Ja(n),h.call(u,Ja(n)?!1:n),u.dispatchEvent(p)}},[a,n,r]);const c=k.useRef(Ja(n)?!1:n);return S.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:o??c.current,...s,tabIndex:-1,ref:i,style:{...t.style,...l,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function Ja(t){return t==="indeterminate"}function BU(t){return Ja(t)?"indeterminate":t?"checked":"unchecked"}var zU=FU,due=jU;const WU=k.forwardRef(({className:t,...e},n)=>S.jsx(zU,{ref:n,className:Le("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",t),...e,children:S.jsx(due,{className:Le("flex items-center justify-center text-current"),children:S.jsx(qE,{className:"h-4 w-4"})})}));WU.displayName=zU.displayName;function fue({ecosystems:t,onRunSimulation:e,isSimulating:n}){const{t:r}=tn(),[o,s]=k.useState(null),[i,a]=k.useState([]),[l,c]=k.useState(400),[u,d]=k.useState(22),[f,h]=k.useState(2),[p,m]=k.useState(10),g=[{id:"eucalyptus",name:r("simulation.controls.plants.eucalyptus")},{id:"argan",name:r("simulation.controls.plants.argan")},{id:"aleppo_pine",name:r("simulation.controls.plants.aleppoPine")},{id:"durum_wheat",name:r("simulation.controls.plants.durumWheat")}],y=I=>{i.includes(I)?a(i.filter(E=>E!==I)):a([...i,I])},v=I=>{c(I[0])},x=I=>{d(I[0])},b=I=>{h(I[0])},w=I=>{const E=Math.min(30,Math.max(1,parseInt(I.target.value)||1));m(E)},C=I=>{m(I[0])},$=()=>{if(!o)return;e({ecosystemId:o,parameters:{plantSpecies:i,rainfall:l,temperature:u,windSpeed:f},duration:p})},T=()=>r(f===1?"simulation.controls.windSpeeds.low":f===2?"simulation.controls.windSpeeds.medium":"simulation.controls.windSpeeds.high");return S.jsxs("div",{className:"p-6 border-b lg:border-b-0 lg:border-l border-gray-200",children:[S.jsx("h3",{className:"text-xl font-bold mb-6 font-cairo",children:r("simulation.controls.title")}),S.jsxs("div",{className:"space-y-6",children:[S.jsxs("div",{children:[S.jsx(Na,{className:"block text-gray-700 mb-2",children:r("simulation.controls.selectEcosystem")}),S.jsxs(Ik,{value:(o==null?void 0:o.toString())||"",onValueChange:I=>s(parseInt(I)),children:[S.jsx(Px,{className:"w-full border border-gray-300 rounded-lg",children:S.jsx(Ek,{placeholder:r("simulation.controls.ecosystemPlaceholder")})}),S.jsx(Rx,{children:t.map(I=>S.jsx(jr,{value:I.id.toString(),children:I.name},I.id))})]})]}),S.jsxs("div",{children:[S.jsx(Na,{className:"block text-gray-700 mb-2",children:r("simulation.controls.introducedSpecies")}),S.jsx("div",{className:"grid grid-cols-2 gap-3",children:g.map(I=>S.jsx("div",{className:`bg-white border ${i.includes(I.id)?"border-accent":"border-gray-200"} rounded-lg p-3 cursor-pointer hover:border-accent`,onClick:()=>y(I.id),children:S.jsxs("div",{className:"flex items-center",children:[S.jsx(WU,{id:`plant-${I.id}`,checked:i.includes(I.id),onCheckedChange:()=>y(I.id),className:"ml-2 text-accent"}),S.jsx(Na,{htmlFor:`plant-${I.id}`,className:"cursor-pointer",children:I.name})]})},I.id))})]}),S.jsxs("div",{children:[S.jsx(Na,{className:"block text-gray-700 mb-2",children:r("simulation.controls.climateFactors")}),S.jsxs("div",{className:"space-y-3",children:[S.jsxs("div",{children:[S.jsxs("div",{className:"flex justify-between",children:[S.jsx("span",{className:"text-sm",children:r("simulation.controls.rainfall")}),S.jsxs("span",{className:"text-sm text-accent",children:[l," ",r("simulation.controls.rainfallUnit")]})]}),S.jsx(Vh,{value:[l],min:100,max:1e3,step:10,onValueChange:v,className:"mt-1.5"})]}),S.jsxs("div",{children:[S.jsxs("div",{className:"flex justify-between",children:[S.jsx("span",{className:"text-sm",children:r("simulation.controls.temperature")}),S.jsxs("span",{className:"text-sm text-accent",children:[u,"°C"]})]}),S.jsx(Vh,{value:[u],min:10,max:35,step:1,onValueChange:x,className:"mt-1.5"})]}),S.jsxs("div",{children:[S.jsxs("div",{className:"flex justify-between",children:[S.jsx("span",{className:"text-sm",children:r("simulation.controls.windSpeed")}),S.jsx("span",{className:"text-sm text-accent",children:T()})]}),S.jsx(Vh,{value:[f],min:1,max:3,step:1,onValueChange:b,className:"mt-1.5"})]})]})]}),S.jsxs("div",{children:[S.jsx(Na,{className:"block text-gray-700 mb-2",children:r("simulation.controls.simulationPeriod")}),S.jsxs("div",{className:"flex items-center",children:[S.jsx(V0,{type:"number",min:1,max:30,value:p,onChange:w,className:"w-16 border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-accent focus:border-transparent text-center"}),S.jsx("span",{className:"mr-2",children:r("simulation.controls.years")}),S.jsx(Vh,{value:[p],min:1,max:30,step:1,onValueChange:C,className:"mr-3 w-full"})]})]}),S.jsx(Jt,{className:"w-full py-3 bg-accent text-white rounded-lg hover:bg-accent-dark transition",onClick:$,disabled:n||!o,children:n?S.jsxs(S.Fragment,{children:[S.jsx(Cx,{className:"mr-2 h-4 w-4 animate-spin"}),r("simulation.controls.simulating")]}):r("simulation.controls.startSimulation")})]})]})}var hue=Array.isArray,eo=hue,pue=typeof xs=="object"&&xs&&xs.Object===Object&&xs,VU=pue,mue=VU,gue=typeof self=="object"&&self&&self.Object===Object&&self,yue=mue||gue||Function("return this")(),bi=yue,vue=bi,xue=vue.Symbol,ng=xue,z_=ng,UU=Object.prototype,bue=UU.hasOwnProperty,wue=UU.toString,wh=z_?z_.toStringTag:void 0;function Sue(t){var e=bue.call(t,wh),n=t[wh];try{t[wh]=void 0;var r=!0}catch{}var o=wue.call(t);return r&&(e?t[wh]=n:delete t[wh]),o}var Cue=Sue,$ue=Object.prototype,kue=$ue.toString;function Tue(t){return kue.call(t)}var Iue=Tue,W_=ng,Eue=Cue,Nue=Iue,Aue="[object Null]",Oue="[object Undefined]",V_=W_?W_.toStringTag:void 0;function Pue(t){return t==null?t===void 0?Oue:Aue:V_&&V_ in Object(t)?Eue(t):Nue(t)}var ia=Pue;function Rue(t){return t!=null&&typeof t=="object"}var aa=Rue,_ue=ia,Due=aa,Mue="[object Symbol]";function Fue(t){return typeof t=="symbol"||Due(t)&&_ue(t)==Mue}var Pf=Fue,Lue=eo,jue=Pf,Bue=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,zue=/^\w*$/;function Wue(t,e){if(Lue(t))return!1;var n=typeof t;return n=="number"||n=="symbol"||n=="boolean"||t==null||jue(t)?!0:zue.test(t)||!Bue.test(t)||e!=null&&t in Object(e)}var kN=Wue;function Vue(t){var e=typeof t;return t!=null&&(e=="object"||e=="function")}var Cl=Vue;const Rf=ft(Cl);var Uue=ia,Gue=Cl,Hue="[object AsyncFunction]",Kue="[object Function]",que="[object GeneratorFunction]",Xue="[object Proxy]";function Yue(t){if(!Gue(t))return!1;var e=Uue(t);return e==Kue||e==que||e==Hue||e==Xue}var TN=Yue;const Ue=ft(TN);var Que=bi,Zue=Que["__core-js_shared__"],Jue=Zue,lC=Jue,U_=function(){var t=/[^.]+$/.exec(lC&&lC.keys&&lC.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}();function ede(t){return!!U_&&U_ in t}var tde=ede,nde=Function.prototype,rde=nde.toString;function ode(t){if(t!=null){try{return rde.call(t)}catch{}try{return t+""}catch{}}return""}var GU=ode,sde=TN,ide=tde,ade=Cl,lde=GU,cde=/[\\^$.*+?()[\]{}|]/g,ude=/^\[object .+?Constructor\]$/,dde=Function.prototype,fde=Object.prototype,hde=dde.toString,pde=fde.hasOwnProperty,mde=RegExp("^"+hde.call(pde).replace(cde,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function gde(t){if(!ade(t)||ide(t))return!1;var e=sde(t)?mde:ude;return e.test(lde(t))}var yde=gde;function vde(t,e){return t==null?void 0:t[e]}var xde=vde,bde=yde,wde=xde;function Sde(t,e){var n=wde(t,e);return bde(n)?n:void 0}var nu=Sde,Cde=nu,$de=Cde(Object,"create"),Q0=$de,G_=Q0;function kde(){this.__data__=G_?G_(null):{},this.size=0}var Tde=kde;function Ide(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}var Ede=Ide,Nde=Q0,Ade="__lodash_hash_undefined__",Ode=Object.prototype,Pde=Ode.hasOwnProperty;function Rde(t){var e=this.__data__;if(Nde){var n=e[t];return n===Ade?void 0:n}return Pde.call(e,t)?e[t]:void 0}var _de=Rde,Dde=Q0,Mde=Object.prototype,Fde=Mde.hasOwnProperty;function Lde(t){var e=this.__data__;return Dde?e[t]!==void 0:Fde.call(e,t)}var jde=Lde,Bde=Q0,zde="__lodash_hash_undefined__";function Wde(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=Bde&&e===void 0?zde:e,this}var Vde=Wde,Ude=Tde,Gde=Ede,Hde=_de,Kde=jde,qde=Vde;function _f(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}_f.prototype.clear=Ude;_f.prototype.delete=Gde;_f.prototype.get=Hde;_f.prototype.has=Kde;_f.prototype.set=qde;var Xde=_f;function Yde(){this.__data__=[],this.size=0}var Qde=Yde;function Zde(t,e){return t===e||t!==t&&e!==e}var IN=Zde,Jde=IN;function efe(t,e){for(var n=t.length;n--;)if(Jde(t[n][0],e))return n;return-1}var Z0=efe,tfe=Z0,nfe=Array.prototype,rfe=nfe.splice;function ofe(t){var e=this.__data__,n=tfe(e,t);if(n<0)return!1;var r=e.length-1;return n==r?e.pop():rfe.call(e,n,1),--this.size,!0}var sfe=ofe,ife=Z0;function afe(t){var e=this.__data__,n=ife(e,t);return n<0?void 0:e[n][1]}var lfe=afe,cfe=Z0;function ufe(t){return cfe(this.__data__,t)>-1}var dfe=ufe,ffe=Z0;function hfe(t,e){var n=this.__data__,r=ffe(n,t);return r<0?(++this.size,n.push([t,e])):n[r][1]=e,this}var pfe=hfe,mfe=Qde,gfe=sfe,yfe=lfe,vfe=dfe,xfe=pfe;function Df(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}Df.prototype.clear=mfe;Df.prototype.delete=gfe;Df.prototype.get=yfe;Df.prototype.has=vfe;Df.prototype.set=xfe;var J0=Df,bfe=nu,wfe=bi,Sfe=bfe(wfe,"Map"),EN=Sfe,H_=Xde,Cfe=J0,$fe=EN;function kfe(){this.size=0,this.__data__={hash:new H_,map:new($fe||Cfe),string:new H_}}var Tfe=kfe;function Ife(t){var e=typeof t;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?t!=="__proto__":t===null}var Efe=Ife,Nfe=Efe;function Afe(t,e){var n=t.__data__;return Nfe(e)?n[typeof e=="string"?"string":"hash"]:n.map}var ew=Afe,Ofe=ew;function Pfe(t){var e=Ofe(this,t).delete(t);return this.size-=e?1:0,e}var Rfe=Pfe,_fe=ew;function Dfe(t){return _fe(this,t).get(t)}var Mfe=Dfe,Ffe=ew;function Lfe(t){return Ffe(this,t).has(t)}var jfe=Lfe,Bfe=ew;function zfe(t,e){var n=Bfe(this,t),r=n.size;return n.set(t,e),this.size+=n.size==r?0:1,this}var Wfe=zfe,Vfe=Tfe,Ufe=Rfe,Gfe=Mfe,Hfe=jfe,Kfe=Wfe;function Mf(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}Mf.prototype.clear=Vfe;Mf.prototype.delete=Ufe;Mf.prototype.get=Gfe;Mf.prototype.has=Hfe;Mf.prototype.set=Kfe;var NN=Mf,HU=NN,qfe="Expected a function";function AN(t,e){if(typeof t!="function"||e!=null&&typeof e!="function")throw new TypeError(qfe);var n=function(){var r=arguments,o=e?e.apply(this,r):r[0],s=n.cache;if(s.has(o))return s.get(o);var i=t.apply(this,r);return n.cache=s.set(o,i)||s,i};return n.cache=new(AN.Cache||HU),n}AN.Cache=HU;var KU=AN;const Xfe=ft(KU);var Yfe=KU,Qfe=500;function Zfe(t){var e=Yfe(t,function(r){return n.size===Qfe&&n.clear(),r}),n=e.cache;return e}var Jfe=Zfe,ehe=Jfe,the=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,nhe=/\\(\\)?/g,rhe=ehe(function(t){var e=[];return t.charCodeAt(0)===46&&e.push(""),t.replace(the,function(n,r,o,s){e.push(o?s.replace(nhe,"$1"):r||n)}),e}),ohe=rhe;function she(t,e){for(var n=-1,r=t==null?0:t.length,o=Array(r);++n<r;)o[n]=e(t[n],n,t);return o}var ON=she,K_=ng,ihe=ON,ahe=eo,lhe=Pf,che=1/0,q_=K_?K_.prototype:void 0,X_=q_?q_.toString:void 0;function qU(t){if(typeof t=="string")return t;if(ahe(t))return ihe(t,qU)+"";if(lhe(t))return X_?X_.call(t):"";var e=t+"";return e=="0"&&1/t==-che?"-0":e}var uhe=qU,dhe=uhe;function fhe(t){return t==null?"":dhe(t)}var XU=fhe,hhe=eo,phe=kN,mhe=ohe,ghe=XU;function yhe(t,e){return hhe(t)?t:phe(t,e)?[t]:mhe(ghe(t))}var YU=yhe,vhe=Pf,xhe=1/0;function bhe(t){if(typeof t=="string"||vhe(t))return t;var e=t+"";return e=="0"&&1/t==-xhe?"-0":e}var tw=bhe,whe=YU,She=tw;function Che(t,e){e=whe(e,t);for(var n=0,r=e.length;t!=null&&n<r;)t=t[She(e[n++])];return n&&n==r?t:void 0}var PN=Che,$he=PN;function khe(t,e,n){var r=t==null?void 0:$he(t,e);return r===void 0?n:r}var QU=khe;const Vo=ft(QU);function The(t){return t==null}var Ihe=The;const tt=ft(Ihe);var Ehe=ia,Nhe=eo,Ahe=aa,Ohe="[object String]";function Phe(t){return typeof t=="string"||!Nhe(t)&&Ahe(t)&&Ehe(t)==Ohe}var Rhe=Phe;const rg=ft(Rhe);var ZU={exports:{}},xt={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var RN=Symbol.for("react.element"),_N=Symbol.for("react.portal"),nw=Symbol.for("react.fragment"),rw=Symbol.for("react.strict_mode"),ow=Symbol.for("react.profiler"),sw=Symbol.for("react.provider"),iw=Symbol.for("react.context"),_he=Symbol.for("react.server_context"),aw=Symbol.for("react.forward_ref"),lw=Symbol.for("react.suspense"),cw=Symbol.for("react.suspense_list"),uw=Symbol.for("react.memo"),dw=Symbol.for("react.lazy"),Dhe=Symbol.for("react.offscreen"),JU;JU=Symbol.for("react.module.reference");function Qo(t){if(typeof t=="object"&&t!==null){var e=t.$$typeof;switch(e){case RN:switch(t=t.type,t){case nw:case ow:case rw:case lw:case cw:return t;default:switch(t=t&&t.$$typeof,t){case _he:case iw:case aw:case dw:case uw:case sw:return t;default:return e}}case _N:return e}}}xt.ContextConsumer=iw;xt.ContextProvider=sw;xt.Element=RN;xt.ForwardRef=aw;xt.Fragment=nw;xt.Lazy=dw;xt.Memo=uw;xt.Portal=_N;xt.Profiler=ow;xt.StrictMode=rw;xt.Suspense=lw;xt.SuspenseList=cw;xt.isAsyncMode=function(){return!1};xt.isConcurrentMode=function(){return!1};xt.isContextConsumer=function(t){return Qo(t)===iw};xt.isContextProvider=function(t){return Qo(t)===sw};xt.isElement=function(t){return typeof t=="object"&&t!==null&&t.$$typeof===RN};xt.isForwardRef=function(t){return Qo(t)===aw};xt.isFragment=function(t){return Qo(t)===nw};xt.isLazy=function(t){return Qo(t)===dw};xt.isMemo=function(t){return Qo(t)===uw};xt.isPortal=function(t){return Qo(t)===_N};xt.isProfiler=function(t){return Qo(t)===ow};xt.isStrictMode=function(t){return Qo(t)===rw};xt.isSuspense=function(t){return Qo(t)===lw};xt.isSuspenseList=function(t){return Qo(t)===cw};xt.isValidElementType=function(t){return typeof t=="string"||typeof t=="function"||t===nw||t===ow||t===rw||t===lw||t===cw||t===Dhe||typeof t=="object"&&t!==null&&(t.$$typeof===dw||t.$$typeof===uw||t.$$typeof===sw||t.$$typeof===iw||t.$$typeof===aw||t.$$typeof===JU||t.getModuleId!==void 0)};xt.typeOf=Qo;ZU.exports=xt;var Mhe=ZU.exports,Fhe=ia,Lhe=aa,jhe="[object Number]";function Bhe(t){return typeof t=="number"||Lhe(t)&&Fhe(t)==jhe}var eG=Bhe;const zhe=ft(eG);var Whe=eG;function Vhe(t){return Whe(t)&&t!=+t}var Uhe=Vhe;const Ff=ft(Uhe);var ws=function(e){return e===0?0:e>0?1:-1},tc=function(e){return rg(e)&&e.indexOf("%")===e.length-1},pe=function(e){return zhe(e)&&!Ff(e)},In=function(e){return pe(e)||rg(e)},Ghe=0,og=function(e){var n=++Ghe;return"".concat(e||"").concat(n)},Dc=function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,o=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!pe(e)&&!rg(e))return r;var s;if(tc(e)){var i=e.indexOf("%");s=n*parseFloat(e.slice(0,i))/100}else s=+e;return Ff(s)&&(s=r),o&&s>n&&(s=n),s},Aa=function(e){if(!e)return null;var n=Object.keys(e);return n&&n.length?e[n[0]]:null},Hhe=function(e){if(!Array.isArray(e))return!1;for(var n=e.length,r={},o=0;o<n;o++)if(!r[e[o]])r[e[o]]=!0;else return!0;return!1},Ro=function(e,n){return pe(e)&&pe(n)?function(r){return e+r*(n-e)}:function(){return n}};function Dx(t,e,n){return!t||!t.length?null:t.find(function(r){return r&&(typeof e=="function"?e(r):Vo(r,e))===n})}function ld(t,e){for(var n in t)if({}.hasOwnProperty.call(t,n)&&(!{}.hasOwnProperty.call(e,n)||t[n]!==e[n]))return!1;for(var r in e)if({}.hasOwnProperty.call(e,r)&&!{}.hasOwnProperty.call(t,r))return!1;return!0}function Pk(t){"@babel/helpers - typeof";return Pk=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Pk(t)}var Khe=["viewBox","children"],qhe=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],Y_=["points","pathLength"],cC={svg:Khe,polygon:Y_,polyline:Y_},DN=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"],Mx=function(e,n){if(!e||typeof e=="function"||typeof e=="boolean")return null;var r=e;if(k.isValidElement(e)&&(r=e.props),!Rf(r))return null;var o={};return Object.keys(r).forEach(function(s){DN.includes(s)&&(o[s]=n||function(i){return r[s](r,i)})}),o},Xhe=function(e,n,r){return function(o){return e(n,r,o),null}},Fx=function(e,n,r){if(!Rf(e)||Pk(e)!=="object")return null;var o=null;return Object.keys(e).forEach(function(s){var i=e[s];DN.includes(s)&&typeof i=="function"&&(o||(o={}),o[s]=Xhe(i,n,r))}),o},Yhe=["children"],Qhe=["children"];function Q_(t,e){if(t==null)return{};var n=Zhe(t,e),r,o;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(o=0;o<s.length;o++)r=s[o],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function Zhe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function Rk(t){"@babel/helpers - typeof";return Rk=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Rk(t)}var Z_={click:"onClick",mousedown:"onMouseDown",mouseup:"onMouseUp",mouseover:"onMouseOver",mousemove:"onMouseMove",mouseout:"onMouseOut",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",touchcancel:"onTouchCancel",touchend:"onTouchEnd",touchmove:"onTouchMove",touchstart:"onTouchStart",contextmenu:"onContextMenu",dblclick:"onDoubleClick"},ji=function(e){return typeof e=="string"?e:e?e.displayName||e.name||"Component":""},J_=null,uC=null,MN=function t(e){if(e===J_&&Array.isArray(uC))return uC;var n=[];return k.Children.forEach(e,function(r){tt(r)||(Mhe.isFragment(r)?n=n.concat(t(r.props.children)):n.push(r))}),uC=n,J_=e,n};function ks(t,e){var n=[],r=[];return Array.isArray(e)?r=e.map(function(o){return ji(o)}):r=[ji(e)],MN(t).forEach(function(o){var s=Vo(o,"type.displayName")||Vo(o,"type.name");r.indexOf(s)!==-1&&n.push(o)}),n}function so(t,e){var n=ks(t,e);return n&&n[0]}var eD=function(e){if(!e||!e.props)return!1;var n=e.props,r=n.width,o=n.height;return!(!pe(r)||r<=0||!pe(o)||o<=0)},Jhe=["a","altGlyph","altGlyphDef","altGlyphItem","animate","animateColor","animateMotion","animateTransform","circle","clipPath","color-profile","cursor","defs","desc","ellipse","feBlend","feColormatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","filter","font","font-face","font-face-format","font-face-name","font-face-url","foreignObject","g","glyph","glyphRef","hkern","image","line","lineGradient","marker","mask","metadata","missing-glyph","mpath","path","pattern","polygon","polyline","radialGradient","rect","script","set","stop","style","svg","switch","symbol","text","textPath","title","tref","tspan","use","view","vkern"],epe=function(e){return e&&e.type&&rg(e.type)&&Jhe.indexOf(e.type)>=0},tpe=function(e){return e&&Rk(e)==="object"&&"clipDot"in e},npe=function(e,n,r,o){var s,i=(s=cC==null?void 0:cC[o])!==null&&s!==void 0?s:[];return n.startsWith("data-")||!Ue(e)&&(o&&i.includes(n)||qhe.includes(n))||r&&DN.includes(n)},Ye=function(e,n,r){if(!e||typeof e=="function"||typeof e=="boolean")return null;var o=e;if(k.isValidElement(e)&&(o=e.props),!Rf(o))return null;var s={};return Object.keys(o).forEach(function(i){var a;npe((a=o)===null||a===void 0?void 0:a[i],i,n,r)&&(s[i]=o[i])}),s},_k=function t(e,n){if(e===n)return!0;var r=k.Children.count(e);if(r!==k.Children.count(n))return!1;if(r===0)return!0;if(r===1)return tD(Array.isArray(e)?e[0]:e,Array.isArray(n)?n[0]:n);for(var o=0;o<r;o++){var s=e[o],i=n[o];if(Array.isArray(s)||Array.isArray(i)){if(!t(s,i))return!1}else if(!tD(s,i))return!1}return!0},tD=function(e,n){if(tt(e)&&tt(n))return!0;if(!tt(e)&&!tt(n)){var r=e.props||{},o=r.children,s=Q_(r,Yhe),i=n.props||{},a=i.children,l=Q_(i,Qhe);return o&&a?ld(s,l)&&_k(o,a):!o&&!a?ld(s,l):!1}return!1},nD=function(e,n){var r=[],o={};return MN(e).forEach(function(s,i){if(epe(s))r.push(s);else if(s){var a=ji(s.type),l=n[a]||{},c=l.handler,u=l.once;if(c&&(!u||!o[a])){var d=c(s,a,i);r.push(d),o[a]=!0}}}),r},rpe=function(e){var n=e&&e.type;return n&&Z_[n]?Z_[n]:null},ope=function(e,n){return MN(n).indexOf(e)},spe=["children","width","height","viewBox","className","style","title","desc"];function Dk(){return Dk=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Dk.apply(this,arguments)}function ipe(t,e){if(t==null)return{};var n=ape(t,e),r,o;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(o=0;o<s.length;o++)r=s[o],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function ape(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function Mk(t){var e=t.children,n=t.width,r=t.height,o=t.viewBox,s=t.className,i=t.style,a=t.title,l=t.desc,c=ipe(t,spe),u=o||{width:n,height:r,x:0,y:0},d=st("recharts-surface",s);return z.createElement("svg",Dk({},Ye(c,!0,"svg"),{className:d,width:n,height:r,style:i,viewBox:"".concat(u.x," ").concat(u.y," ").concat(u.width," ").concat(u.height)}),z.createElement("title",null,a),z.createElement("desc",null,l),e)}var lpe=["children","className"];function Fk(){return Fk=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Fk.apply(this,arguments)}function cpe(t,e){if(t==null)return{};var n=upe(t,e),r,o;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(o=0;o<s.length;o++)r=s[o],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function upe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}var Gt=z.forwardRef(function(t,e){var n=t.children,r=t.className,o=cpe(t,lpe),s=st("recharts-layer",r);return z.createElement("g",Fk({className:s},Ye(o,!0),{ref:e}),n)}),Bi=function(e,n){for(var r=arguments.length,o=new Array(r>2?r-2:0),s=2;s<r;s++)o[s-2]=arguments[s]};function dpe(t,e,n){var r=-1,o=t.length;e<0&&(e=-e>o?0:o+e),n=n>o?o:n,n<0&&(n+=o),o=e>n?0:n-e>>>0,e>>>=0;for(var s=Array(o);++r<o;)s[r]=t[r+e];return s}var fpe=dpe,hpe=fpe;function ppe(t,e,n){var r=t.length;return n=n===void 0?r:n,!e&&n>=r?t:hpe(t,e,n)}var mpe=ppe,gpe="\\ud800-\\udfff",ype="\\u0300-\\u036f",vpe="\\ufe20-\\ufe2f",xpe="\\u20d0-\\u20ff",bpe=ype+vpe+xpe,wpe="\\ufe0e\\ufe0f",Spe="\\u200d",Cpe=RegExp("["+Spe+gpe+bpe+wpe+"]");function $pe(t){return Cpe.test(t)}var tG=$pe;function kpe(t){return t.split("")}var Tpe=kpe,nG="\\ud800-\\udfff",Ipe="\\u0300-\\u036f",Epe="\\ufe20-\\ufe2f",Npe="\\u20d0-\\u20ff",Ape=Ipe+Epe+Npe,Ope="\\ufe0e\\ufe0f",Ppe="["+nG+"]",Lk="["+Ape+"]",jk="\\ud83c[\\udffb-\\udfff]",Rpe="(?:"+Lk+"|"+jk+")",rG="[^"+nG+"]",oG="(?:\\ud83c[\\udde6-\\uddff]){2}",sG="[\\ud800-\\udbff][\\udc00-\\udfff]",_pe="\\u200d",iG=Rpe+"?",aG="["+Ope+"]?",Dpe="(?:"+_pe+"(?:"+[rG,oG,sG].join("|")+")"+aG+iG+")*",Mpe=aG+iG+Dpe,Fpe="(?:"+[rG+Lk+"?",Lk,oG,sG,Ppe].join("|")+")",Lpe=RegExp(jk+"(?="+jk+")|"+Fpe+Mpe,"g");function jpe(t){return t.match(Lpe)||[]}var Bpe=jpe,zpe=Tpe,Wpe=tG,Vpe=Bpe;function Upe(t){return Wpe(t)?Vpe(t):zpe(t)}var Gpe=Upe,Hpe=mpe,Kpe=tG,qpe=Gpe,Xpe=XU;function Ype(t){return function(e){e=Xpe(e);var n=Kpe(e)?qpe(e):void 0,r=n?n[0]:e.charAt(0),o=n?Hpe(n,1).join(""):e.slice(1);return r[t]()+o}}var Qpe=Ype,Zpe=Qpe,Jpe=Zpe("toUpperCase"),eme=Jpe;const fw=ft(eme);function Tt(t){return function(){return t}}const lG=Math.cos,Lx=Math.sin,Fs=Math.sqrt,jx=Math.PI,hw=2*jx,Bk=Math.PI,zk=2*Bk,Gl=1e-6,tme=zk-Gl;function cG(t){this._+=t[0];for(let e=1,n=t.length;e<n;++e)this._+=arguments[e]+t[e]}function nme(t){let e=Math.floor(t);if(!(e>=0))throw new Error(`invalid digits: ${t}`);if(e>15)return cG;const n=10**e;return function(r){this._+=r[0];for(let o=1,s=r.length;o<s;++o)this._+=Math.round(arguments[o]*n)/n+r[o]}}class rme{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=e==null?cG:nme(e)}moveTo(e,n){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(e,n){this._append`L${this._x1=+e},${this._y1=+n}`}quadraticCurveTo(e,n,r,o){this._append`Q${+e},${+n},${this._x1=+r},${this._y1=+o}`}bezierCurveTo(e,n,r,o,s,i){this._append`C${+e},${+n},${+r},${+o},${this._x1=+s},${this._y1=+i}`}arcTo(e,n,r,o,s){if(e=+e,n=+n,r=+r,o=+o,s=+s,s<0)throw new Error(`negative radius: ${s}`);let i=this._x1,a=this._y1,l=r-e,c=o-n,u=i-e,d=a-n,f=u*u+d*d;if(this._x1===null)this._append`M${this._x1=e},${this._y1=n}`;else if(f>Gl)if(!(Math.abs(d*l-c*u)>Gl)||!s)this._append`L${this._x1=e},${this._y1=n}`;else{let h=r-i,p=o-a,m=l*l+c*c,g=h*h+p*p,y=Math.sqrt(m),v=Math.sqrt(f),x=s*Math.tan((Bk-Math.acos((m+f-g)/(2*y*v)))/2),b=x/v,w=x/y;Math.abs(b-1)>Gl&&this._append`L${e+b*u},${n+b*d}`,this._append`A${s},${s},0,0,${+(d*h>u*p)},${this._x1=e+w*l},${this._y1=n+w*c}`}}arc(e,n,r,o,s,i){if(e=+e,n=+n,r=+r,i=!!i,r<0)throw new Error(`negative radius: ${r}`);let a=r*Math.cos(o),l=r*Math.sin(o),c=e+a,u=n+l,d=1^i,f=i?o-s:s-o;this._x1===null?this._append`M${c},${u}`:(Math.abs(this._x1-c)>Gl||Math.abs(this._y1-u)>Gl)&&this._append`L${c},${u}`,r&&(f<0&&(f=f%zk+zk),f>tme?this._append`A${r},${r},0,1,${d},${e-a},${n-l}A${r},${r},0,1,${d},${this._x1=c},${this._y1=u}`:f>Gl&&this._append`A${r},${r},0,${+(f>=Bk)},${d},${this._x1=e+r*Math.cos(s)},${this._y1=n+r*Math.sin(s)}`)}rect(e,n,r,o){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}h${r=+r}v${+o}h${-r}Z`}toString(){return this._}}function FN(t){let e=3;return t.digits=function(n){if(!arguments.length)return e;if(n==null)e=null;else{const r=Math.floor(n);if(!(r>=0))throw new RangeError(`invalid digits: ${n}`);e=r}return t},()=>new rme(e)}function LN(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function uG(t){this._context=t}uG.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e);break}}};function pw(t){return new uG(t)}function dG(t){return t[0]}function fG(t){return t[1]}function hG(t,e){var n=Tt(!0),r=null,o=pw,s=null,i=FN(a);t=typeof t=="function"?t:t===void 0?dG:Tt(t),e=typeof e=="function"?e:e===void 0?fG:Tt(e);function a(l){var c,u=(l=LN(l)).length,d,f=!1,h;for(r==null&&(s=o(h=i())),c=0;c<=u;++c)!(c<u&&n(d=l[c],c,l))===f&&((f=!f)?s.lineStart():s.lineEnd()),f&&s.point(+t(d,c,l),+e(d,c,l));if(h)return s=null,h+""||null}return a.x=function(l){return arguments.length?(t=typeof l=="function"?l:Tt(+l),a):t},a.y=function(l){return arguments.length?(e=typeof l=="function"?l:Tt(+l),a):e},a.defined=function(l){return arguments.length?(n=typeof l=="function"?l:Tt(!!l),a):n},a.curve=function(l){return arguments.length?(o=l,r!=null&&(s=o(r)),a):o},a.context=function(l){return arguments.length?(l==null?r=s=null:s=o(r=l),a):r},a}function ov(t,e,n){var r=null,o=Tt(!0),s=null,i=pw,a=null,l=FN(c);t=typeof t=="function"?t:t===void 0?dG:Tt(+t),e=typeof e=="function"?e:Tt(e===void 0?0:+e),n=typeof n=="function"?n:n===void 0?fG:Tt(+n);function c(d){var f,h,p,m=(d=LN(d)).length,g,y=!1,v,x=new Array(m),b=new Array(m);for(s==null&&(a=i(v=l())),f=0;f<=m;++f){if(!(f<m&&o(g=d[f],f,d))===y)if(y=!y)h=f,a.areaStart(),a.lineStart();else{for(a.lineEnd(),a.lineStart(),p=f-1;p>=h;--p)a.point(x[p],b[p]);a.lineEnd(),a.areaEnd()}y&&(x[f]=+t(g,f,d),b[f]=+e(g,f,d),a.point(r?+r(g,f,d):x[f],n?+n(g,f,d):b[f]))}if(v)return a=null,v+""||null}function u(){return hG().defined(o).curve(i).context(s)}return c.x=function(d){return arguments.length?(t=typeof d=="function"?d:Tt(+d),r=null,c):t},c.x0=function(d){return arguments.length?(t=typeof d=="function"?d:Tt(+d),c):t},c.x1=function(d){return arguments.length?(r=d==null?null:typeof d=="function"?d:Tt(+d),c):r},c.y=function(d){return arguments.length?(e=typeof d=="function"?d:Tt(+d),n=null,c):e},c.y0=function(d){return arguments.length?(e=typeof d=="function"?d:Tt(+d),c):e},c.y1=function(d){return arguments.length?(n=d==null?null:typeof d=="function"?d:Tt(+d),c):n},c.lineX0=c.lineY0=function(){return u().x(t).y(e)},c.lineY1=function(){return u().x(t).y(n)},c.lineX1=function(){return u().x(r).y(e)},c.defined=function(d){return arguments.length?(o=typeof d=="function"?d:Tt(!!d),c):o},c.curve=function(d){return arguments.length?(i=d,s!=null&&(a=i(s)),c):i},c.context=function(d){return arguments.length?(d==null?s=a=null:a=i(s=d),c):s},c}class pG{constructor(e,n){this._context=e,this._x=n}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(e,n){switch(e=+e,n=+n,this._point){case 0:{this._point=1,this._line?this._context.lineTo(e,n):this._context.moveTo(e,n);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+e)/2,this._y0,this._x0,n,e,n):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+n)/2,e,this._y0,e,n);break}}this._x0=e,this._y0=n}}function ome(t){return new pG(t,!0)}function sme(t){return new pG(t,!1)}const jN={draw(t,e){const n=Fs(e/jx);t.moveTo(n,0),t.arc(0,0,n,0,hw)}},ime={draw(t,e){const n=Fs(e/5)/2;t.moveTo(-3*n,-n),t.lineTo(-n,-n),t.lineTo(-n,-3*n),t.lineTo(n,-3*n),t.lineTo(n,-n),t.lineTo(3*n,-n),t.lineTo(3*n,n),t.lineTo(n,n),t.lineTo(n,3*n),t.lineTo(-n,3*n),t.lineTo(-n,n),t.lineTo(-3*n,n),t.closePath()}},mG=Fs(1/3),ame=mG*2,lme={draw(t,e){const n=Fs(e/ame),r=n*mG;t.moveTo(0,-n),t.lineTo(r,0),t.lineTo(0,n),t.lineTo(-r,0),t.closePath()}},cme={draw(t,e){const n=Fs(e),r=-n/2;t.rect(r,r,n,n)}},ume=.8908130915292852,gG=Lx(jx/10)/Lx(7*jx/10),dme=Lx(hw/10)*gG,fme=-lG(hw/10)*gG,hme={draw(t,e){const n=Fs(e*ume),r=dme*n,o=fme*n;t.moveTo(0,-n),t.lineTo(r,o);for(let s=1;s<5;++s){const i=hw*s/5,a=lG(i),l=Lx(i);t.lineTo(l*n,-a*n),t.lineTo(a*r-l*o,l*r+a*o)}t.closePath()}},dC=Fs(3),pme={draw(t,e){const n=-Fs(e/(dC*3));t.moveTo(0,n*2),t.lineTo(-dC*n,-n),t.lineTo(dC*n,-n),t.closePath()}},Co=-.5,$o=Fs(3)/2,Wk=1/Fs(12),mme=(Wk/2+1)*3,gme={draw(t,e){const n=Fs(e/mme),r=n/2,o=n*Wk,s=r,i=n*Wk+n,a=-s,l=i;t.moveTo(r,o),t.lineTo(s,i),t.lineTo(a,l),t.lineTo(Co*r-$o*o,$o*r+Co*o),t.lineTo(Co*s-$o*i,$o*s+Co*i),t.lineTo(Co*a-$o*l,$o*a+Co*l),t.lineTo(Co*r+$o*o,Co*o-$o*r),t.lineTo(Co*s+$o*i,Co*i-$o*s),t.lineTo(Co*a+$o*l,Co*l-$o*a),t.closePath()}};function yme(t,e){let n=null,r=FN(o);t=typeof t=="function"?t:Tt(t||jN),e=typeof e=="function"?e:Tt(e===void 0?64:+e);function o(){let s;if(n||(n=s=r()),t.apply(this,arguments).draw(n,+e.apply(this,arguments)),s)return n=null,s+""||null}return o.type=function(s){return arguments.length?(t=typeof s=="function"?s:Tt(s),o):t},o.size=function(s){return arguments.length?(e=typeof s=="function"?s:Tt(+s),o):e},o.context=function(s){return arguments.length?(n=s??null,o):n},o}function Bx(){}function zx(t,e,n){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+e)/6,(t._y0+4*t._y1+n)/6)}function yG(t){this._context=t}yG.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:zx(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:zx(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function vme(t){return new yG(t)}function vG(t){this._context=t}vG.prototype={areaStart:Bx,areaEnd:Bx,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x2=t,this._y2=e;break;case 1:this._point=2,this._x3=t,this._y3=e;break;case 2:this._point=3,this._x4=t,this._y4=e,this._context.moveTo((this._x0+4*this._x1+t)/6,(this._y0+4*this._y1+e)/6);break;default:zx(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function xme(t){return new vG(t)}function xG(t){this._context=t}xG.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+t)/6,r=(this._y0+4*this._y1+e)/6;this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 3:this._point=4;default:zx(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function bme(t){return new xG(t)}function bG(t){this._context=t}bG.prototype={areaStart:Bx,areaEnd:Bx,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(t,e){t=+t,e=+e,this._point?this._context.lineTo(t,e):(this._point=1,this._context.moveTo(t,e))}};function wme(t){return new bG(t)}function rD(t){return t<0?-1:1}function oD(t,e,n){var r=t._x1-t._x0,o=e-t._x1,s=(t._y1-t._y0)/(r||o<0&&-0),i=(n-t._y1)/(o||r<0&&-0),a=(s*o+i*r)/(r+o);return(rD(s)+rD(i))*Math.min(Math.abs(s),Math.abs(i),.5*Math.abs(a))||0}function sD(t,e){var n=t._x1-t._x0;return n?(3*(t._y1-t._y0)/n-e)/2:e}function fC(t,e,n){var r=t._x0,o=t._y0,s=t._x1,i=t._y1,a=(s-r)/3;t._context.bezierCurveTo(r+a,o+a*e,s-a,i-a*n,s,i)}function Wx(t){this._context=t}Wx.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:fC(this,this._t0,sD(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){var n=NaN;if(t=+t,e=+e,!(t===this._x1&&e===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,fC(this,sD(this,n=oD(this,t,e)),n);break;default:fC(this,this._t0,n=oD(this,t,e));break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e,this._t0=n}}};function wG(t){this._context=new SG(t)}(wG.prototype=Object.create(Wx.prototype)).point=function(t,e){Wx.prototype.point.call(this,e,t)};function SG(t){this._context=t}SG.prototype={moveTo:function(t,e){this._context.moveTo(e,t)},closePath:function(){this._context.closePath()},lineTo:function(t,e){this._context.lineTo(e,t)},bezierCurveTo:function(t,e,n,r,o,s){this._context.bezierCurveTo(e,t,r,n,s,o)}};function Sme(t){return new Wx(t)}function Cme(t){return new wG(t)}function CG(t){this._context=t}CG.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var t=this._x,e=this._y,n=t.length;if(n)if(this._line?this._context.lineTo(t[0],e[0]):this._context.moveTo(t[0],e[0]),n===2)this._context.lineTo(t[1],e[1]);else for(var r=iD(t),o=iD(e),s=0,i=1;i<n;++s,++i)this._context.bezierCurveTo(r[0][s],o[0][s],r[1][s],o[1][s],t[i],e[i]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(t,e){this._x.push(+t),this._y.push(+e)}};function iD(t){var e,n=t.length-1,r,o=new Array(n),s=new Array(n),i=new Array(n);for(o[0]=0,s[0]=2,i[0]=t[0]+2*t[1],e=1;e<n-1;++e)o[e]=1,s[e]=4,i[e]=4*t[e]+2*t[e+1];for(o[n-1]=2,s[n-1]=7,i[n-1]=8*t[n-1]+t[n],e=1;e<n;++e)r=o[e]/s[e-1],s[e]-=r,i[e]-=r*i[e-1];for(o[n-1]=i[n-1]/s[n-1],e=n-2;e>=0;--e)o[e]=(i[e]-o[e+1])/s[e];for(s[n-1]=(t[n]+o[n-1])/2,e=0;e<n-1;++e)s[e]=2*t[e+1]-o[e+1];return[o,s]}function $me(t){return new CG(t)}function mw(t,e){this._context=t,this._t=e}mw.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,e),this._context.lineTo(t,e);else{var n=this._x*(1-this._t)+t*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,e)}break}}this._x=t,this._y=e}};function kme(t){return new mw(t,.5)}function Tme(t){return new mw(t,0)}function Ime(t){return new mw(t,1)}function zd(t,e){if((i=t.length)>1)for(var n=1,r,o,s=t[e[0]],i,a=s.length;n<i;++n)for(o=s,s=t[e[n]],r=0;r<a;++r)s[r][1]+=s[r][0]=isNaN(o[r][1])?o[r][0]:o[r][1]}function Vk(t){for(var e=t.length,n=new Array(e);--e>=0;)n[e]=e;return n}function Eme(t,e){return t[e]}function Nme(t){const e=[];return e.key=t,e}function Ame(){var t=Tt([]),e=Vk,n=zd,r=Eme;function o(s){var i=Array.from(t.apply(this,arguments),Nme),a,l=i.length,c=-1,u;for(const d of s)for(a=0,++c;a<l;++a)(i[a][c]=[0,+r(d,i[a].key,c,s)]).data=d;for(a=0,u=LN(e(i));a<l;++a)i[u[a]].index=a;return n(i,u),i}return o.keys=function(s){return arguments.length?(t=typeof s=="function"?s:Tt(Array.from(s)),o):t},o.value=function(s){return arguments.length?(r=typeof s=="function"?s:Tt(+s),o):r},o.order=function(s){return arguments.length?(e=s==null?Vk:typeof s=="function"?s:Tt(Array.from(s)),o):e},o.offset=function(s){return arguments.length?(n=s??zd,o):n},o}function Ome(t,e){if((r=t.length)>0){for(var n,r,o=0,s=t[0].length,i;o<s;++o){for(i=n=0;n<r;++n)i+=t[n][o][1]||0;if(i)for(n=0;n<r;++n)t[n][o][1]/=i}zd(t,e)}}function Pme(t,e){if((o=t.length)>0){for(var n=0,r=t[e[0]],o,s=r.length;n<s;++n){for(var i=0,a=0;i<o;++i)a+=t[i][n][1]||0;r[n][1]+=r[n][0]=-a/2}zd(t,e)}}function Rme(t,e){if(!(!((i=t.length)>0)||!((s=(o=t[e[0]]).length)>0))){for(var n=0,r=1,o,s,i;r<s;++r){for(var a=0,l=0,c=0;a<i;++a){for(var u=t[e[a]],d=u[r][1]||0,f=u[r-1][1]||0,h=(d-f)/2,p=0;p<a;++p){var m=t[e[p]],g=m[r][1]||0,y=m[r-1][1]||0;h+=g-y}l+=d,c+=h*d}o[r-1][1]+=o[r-1][0]=n,l&&(n-=c/l)}o[r-1][1]+=o[r-1][0]=n,zd(t,e)}}function jp(t){"@babel/helpers - typeof";return jp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},jp(t)}var _me=["type","size","sizeType"];function Uk(){return Uk=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Uk.apply(this,arguments)}function aD(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),n.push.apply(n,r)}return n}function lD(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?aD(Object(n),!0).forEach(function(r){Dme(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):aD(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Dme(t,e,n){return e=Mme(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Mme(t){var e=Fme(t,"string");return jp(e)=="symbol"?e:e+""}function Fme(t,e){if(jp(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(jp(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Lme(t,e){if(t==null)return{};var n=jme(t,e),r,o;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(o=0;o<s.length;o++)r=s[o],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function jme(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}var $G={symbolCircle:jN,symbolCross:ime,symbolDiamond:lme,symbolSquare:cme,symbolStar:hme,symbolTriangle:pme,symbolWye:gme},Bme=Math.PI/180,zme=function(e){var n="symbol".concat(fw(e));return $G[n]||jN},Wme=function(e,n,r){if(n==="area")return e;switch(r){case"cross":return 5*e*e/9;case"diamond":return .5*e*e/Math.sqrt(3);case"square":return e*e;case"star":{var o=18*Bme;return 1.25*e*e*(Math.tan(o)-Math.tan(o*2)*Math.pow(Math.tan(o),2))}case"triangle":return Math.sqrt(3)*e*e/4;case"wye":return(21-10*Math.sqrt(3))*e*e/8;default:return Math.PI*e*e/4}},Vme=function(e,n){$G["symbol".concat(fw(e))]=n},BN=function(e){var n=e.type,r=n===void 0?"circle":n,o=e.size,s=o===void 0?64:o,i=e.sizeType,a=i===void 0?"area":i,l=Lme(e,_me),c=lD(lD({},l),{},{type:r,size:s,sizeType:a}),u=function(){var g=zme(r),y=yme().type(g).size(Wme(s,a,r));return y()},d=c.className,f=c.cx,h=c.cy,p=Ye(c,!0);return f===+f&&h===+h&&s===+s?z.createElement("path",Uk({},p,{className:st("recharts-symbols",d),transform:"translate(".concat(f,", ").concat(h,")"),d:u()})):null};BN.registerSymbol=Vme;function Wd(t){"@babel/helpers - typeof";return Wd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Wd(t)}function Gk(){return Gk=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Gk.apply(this,arguments)}function cD(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),n.push.apply(n,r)}return n}function Ume(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?cD(Object(n),!0).forEach(function(r){Bp(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):cD(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Gme(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Hme(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,TG(r.key),r)}}function Kme(t,e,n){return e&&Hme(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function qme(t,e,n){return e=Vx(e),Xme(t,kG()?Reflect.construct(e,n||[],Vx(t).constructor):e.apply(t,n))}function Xme(t,e){if(e&&(Wd(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Yme(t)}function Yme(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function kG(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(kG=function(){return!!t})()}function Vx(t){return Vx=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Vx(t)}function Qme(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Hk(t,e)}function Hk(t,e){return Hk=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,o){return r.__proto__=o,r},Hk(t,e)}function Bp(t,e,n){return e=TG(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function TG(t){var e=Zme(t,"string");return Wd(e)=="symbol"?e:e+""}function Zme(t,e){if(Wd(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Wd(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var ko=32,zN=function(t){function e(){return Gme(this,e),qme(this,e,arguments)}return Qme(e,t),Kme(e,[{key:"renderIcon",value:function(r){var o=this.props.inactiveColor,s=ko/2,i=ko/6,a=ko/3,l=r.inactive?o:r.color;if(r.type==="plainline")return z.createElement("line",{strokeWidth:4,fill:"none",stroke:l,strokeDasharray:r.payload.strokeDasharray,x1:0,y1:s,x2:ko,y2:s,className:"recharts-legend-icon"});if(r.type==="line")return z.createElement("path",{strokeWidth:4,fill:"none",stroke:l,d:"M0,".concat(s,"h").concat(a,`
            A`).concat(i,",").concat(i,",0,1,1,").concat(2*a,",").concat(s,`
            H`).concat(ko,"M").concat(2*a,",").concat(s,`
            A`).concat(i,",").concat(i,",0,1,1,").concat(a,",").concat(s),className:"recharts-legend-icon"});if(r.type==="rect")return z.createElement("path",{stroke:"none",fill:l,d:"M0,".concat(ko/8,"h").concat(ko,"v").concat(ko*3/4,"h").concat(-ko,"z"),className:"recharts-legend-icon"});if(z.isValidElement(r.legendIcon)){var c=Ume({},r);return delete c.legendIcon,z.cloneElement(r.legendIcon,c)}return z.createElement(BN,{fill:l,cx:s,cy:s,size:ko,sizeType:"diameter",type:r.type})}},{key:"renderItems",value:function(){var r=this,o=this.props,s=o.payload,i=o.iconSize,a=o.layout,l=o.formatter,c=o.inactiveColor,u={x:0,y:0,width:ko,height:ko},d={display:a==="horizontal"?"inline-block":"block",marginRight:10},f={display:"inline-block",verticalAlign:"middle",marginRight:4};return s.map(function(h,p){var m=h.formatter||l,g=st(Bp(Bp({"recharts-legend-item":!0},"legend-item-".concat(p),!0),"inactive",h.inactive));if(h.type==="none")return null;var y=Ue(h.value)?null:h.value;Bi(!Ue(h.value),`The name property is also required when using a function for the dataKey of a chart's cartesian components. Ex: <Bar name="Name of my Data"/>`);var v=h.inactive?c:h.color;return z.createElement("li",Gk({className:g,style:d,key:"legend-item-".concat(p)},Fx(r.props,h,p)),z.createElement(Mk,{width:i,height:i,viewBox:u,style:f},r.renderIcon(h)),z.createElement("span",{className:"recharts-legend-item-text",style:{color:v}},m?m(y,h,p):y))})}},{key:"render",value:function(){var r=this.props,o=r.payload,s=r.layout,i=r.align;if(!o||!o.length)return null;var a={padding:0,margin:0,textAlign:s==="horizontal"?i:"left"};return z.createElement("ul",{className:"recharts-default-legend",style:a},this.renderItems())}}])}(k.PureComponent);Bp(zN,"displayName","Legend");Bp(zN,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"middle",inactiveColor:"#ccc"});var Jme=J0;function ege(){this.__data__=new Jme,this.size=0}var tge=ege;function nge(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n}var rge=nge;function oge(t){return this.__data__.get(t)}var sge=oge;function ige(t){return this.__data__.has(t)}var age=ige,lge=J0,cge=EN,uge=NN,dge=200;function fge(t,e){var n=this.__data__;if(n instanceof lge){var r=n.__data__;if(!cge||r.length<dge-1)return r.push([t,e]),this.size=++n.size,this;n=this.__data__=new uge(r)}return n.set(t,e),this.size=n.size,this}var hge=fge,pge=J0,mge=tge,gge=rge,yge=sge,vge=age,xge=hge;function Lf(t){var e=this.__data__=new pge(t);this.size=e.size}Lf.prototype.clear=mge;Lf.prototype.delete=gge;Lf.prototype.get=yge;Lf.prototype.has=vge;Lf.prototype.set=xge;var IG=Lf,bge="__lodash_hash_undefined__";function wge(t){return this.__data__.set(t,bge),this}var Sge=wge;function Cge(t){return this.__data__.has(t)}var $ge=Cge,kge=NN,Tge=Sge,Ige=$ge;function Ux(t){var e=-1,n=t==null?0:t.length;for(this.__data__=new kge;++e<n;)this.add(t[e])}Ux.prototype.add=Ux.prototype.push=Tge;Ux.prototype.has=Ige;var EG=Ux;function Ege(t,e){for(var n=-1,r=t==null?0:t.length;++n<r;)if(e(t[n],n,t))return!0;return!1}var NG=Ege;function Nge(t,e){return t.has(e)}var AG=Nge,Age=EG,Oge=NG,Pge=AG,Rge=1,_ge=2;function Dge(t,e,n,r,o,s){var i=n&Rge,a=t.length,l=e.length;if(a!=l&&!(i&&l>a))return!1;var c=s.get(t),u=s.get(e);if(c&&u)return c==e&&u==t;var d=-1,f=!0,h=n&_ge?new Age:void 0;for(s.set(t,e),s.set(e,t);++d<a;){var p=t[d],m=e[d];if(r)var g=i?r(m,p,d,e,t,s):r(p,m,d,t,e,s);if(g!==void 0){if(g)continue;f=!1;break}if(h){if(!Oge(e,function(y,v){if(!Pge(h,v)&&(p===y||o(p,y,n,r,s)))return h.push(v)})){f=!1;break}}else if(!(p===m||o(p,m,n,r,s))){f=!1;break}}return s.delete(t),s.delete(e),f}var OG=Dge,Mge=bi,Fge=Mge.Uint8Array,Lge=Fge;function jge(t){var e=-1,n=Array(t.size);return t.forEach(function(r,o){n[++e]=[o,r]}),n}var Bge=jge;function zge(t){var e=-1,n=Array(t.size);return t.forEach(function(r){n[++e]=r}),n}var WN=zge,uD=ng,dD=Lge,Wge=IN,Vge=OG,Uge=Bge,Gge=WN,Hge=1,Kge=2,qge="[object Boolean]",Xge="[object Date]",Yge="[object Error]",Qge="[object Map]",Zge="[object Number]",Jge="[object RegExp]",eye="[object Set]",tye="[object String]",nye="[object Symbol]",rye="[object ArrayBuffer]",oye="[object DataView]",fD=uD?uD.prototype:void 0,hC=fD?fD.valueOf:void 0;function sye(t,e,n,r,o,s,i){switch(n){case oye:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case rye:return!(t.byteLength!=e.byteLength||!s(new dD(t),new dD(e)));case qge:case Xge:case Zge:return Wge(+t,+e);case Yge:return t.name==e.name&&t.message==e.message;case Jge:case tye:return t==e+"";case Qge:var a=Uge;case eye:var l=r&Hge;if(a||(a=Gge),t.size!=e.size&&!l)return!1;var c=i.get(t);if(c)return c==e;r|=Kge,i.set(t,e);var u=Vge(a(t),a(e),r,o,s,i);return i.delete(t),u;case nye:if(hC)return hC.call(t)==hC.call(e)}return!1}var iye=sye;function aye(t,e){for(var n=-1,r=e.length,o=t.length;++n<r;)t[o+n]=e[n];return t}var PG=aye,lye=PG,cye=eo;function uye(t,e,n){var r=e(t);return cye(t)?r:lye(r,n(t))}var dye=uye;function fye(t,e){for(var n=-1,r=t==null?0:t.length,o=0,s=[];++n<r;){var i=t[n];e(i,n,t)&&(s[o++]=i)}return s}var hye=fye;function pye(){return[]}var mye=pye,gye=hye,yye=mye,vye=Object.prototype,xye=vye.propertyIsEnumerable,hD=Object.getOwnPropertySymbols,bye=hD?function(t){return t==null?[]:(t=Object(t),gye(hD(t),function(e){return xye.call(t,e)}))}:yye,wye=bye;function Sye(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r}var Cye=Sye,$ye=ia,kye=aa,Tye="[object Arguments]";function Iye(t){return kye(t)&&$ye(t)==Tye}var Eye=Iye,pD=Eye,Nye=aa,RG=Object.prototype,Aye=RG.hasOwnProperty,Oye=RG.propertyIsEnumerable,Pye=pD(function(){return arguments}())?pD:function(t){return Nye(t)&&Aye.call(t,"callee")&&!Oye.call(t,"callee")},VN=Pye,Gx={exports:{}};function Rye(){return!1}var _ye=Rye;Gx.exports;(function(t,e){var n=bi,r=_ye,o=e&&!e.nodeType&&e,s=o&&!0&&t&&!t.nodeType&&t,i=s&&s.exports===o,a=i?n.Buffer:void 0,l=a?a.isBuffer:void 0,c=l||r;t.exports=c})(Gx,Gx.exports);var _G=Gx.exports,Dye=9007199254740991,Mye=/^(?:0|[1-9]\d*)$/;function Fye(t,e){var n=typeof t;return e=e??Dye,!!e&&(n=="number"||n!="symbol"&&Mye.test(t))&&t>-1&&t%1==0&&t<e}var UN=Fye,Lye=9007199254740991;function jye(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=Lye}var GN=jye,Bye=ia,zye=GN,Wye=aa,Vye="[object Arguments]",Uye="[object Array]",Gye="[object Boolean]",Hye="[object Date]",Kye="[object Error]",qye="[object Function]",Xye="[object Map]",Yye="[object Number]",Qye="[object Object]",Zye="[object RegExp]",Jye="[object Set]",eve="[object String]",tve="[object WeakMap]",nve="[object ArrayBuffer]",rve="[object DataView]",ove="[object Float32Array]",sve="[object Float64Array]",ive="[object Int8Array]",ave="[object Int16Array]",lve="[object Int32Array]",cve="[object Uint8Array]",uve="[object Uint8ClampedArray]",dve="[object Uint16Array]",fve="[object Uint32Array]",Rt={};Rt[ove]=Rt[sve]=Rt[ive]=Rt[ave]=Rt[lve]=Rt[cve]=Rt[uve]=Rt[dve]=Rt[fve]=!0;Rt[Vye]=Rt[Uye]=Rt[nve]=Rt[Gye]=Rt[rve]=Rt[Hye]=Rt[Kye]=Rt[qye]=Rt[Xye]=Rt[Yye]=Rt[Qye]=Rt[Zye]=Rt[Jye]=Rt[eve]=Rt[tve]=!1;function hve(t){return Wye(t)&&zye(t.length)&&!!Rt[Bye(t)]}var pve=hve;function mve(t){return function(e){return t(e)}}var DG=mve,Hx={exports:{}};Hx.exports;(function(t,e){var n=VU,r=e&&!e.nodeType&&e,o=r&&!0&&t&&!t.nodeType&&t,s=o&&o.exports===r,i=s&&n.process,a=function(){try{var l=o&&o.require&&o.require("util").types;return l||i&&i.binding&&i.binding("util")}catch{}}();t.exports=a})(Hx,Hx.exports);var gve=Hx.exports,yve=pve,vve=DG,mD=gve,gD=mD&&mD.isTypedArray,xve=gD?vve(gD):yve,MG=xve,bve=Cye,wve=VN,Sve=eo,Cve=_G,$ve=UN,kve=MG,Tve=Object.prototype,Ive=Tve.hasOwnProperty;function Eve(t,e){var n=Sve(t),r=!n&&wve(t),o=!n&&!r&&Cve(t),s=!n&&!r&&!o&&kve(t),i=n||r||o||s,a=i?bve(t.length,String):[],l=a.length;for(var c in t)(e||Ive.call(t,c))&&!(i&&(c=="length"||o&&(c=="offset"||c=="parent")||s&&(c=="buffer"||c=="byteLength"||c=="byteOffset")||$ve(c,l)))&&a.push(c);return a}var Nve=Eve,Ave=Object.prototype;function Ove(t){var e=t&&t.constructor,n=typeof e=="function"&&e.prototype||Ave;return t===n}var Pve=Ove;function Rve(t,e){return function(n){return t(e(n))}}var FG=Rve,_ve=FG,Dve=_ve(Object.keys,Object),Mve=Dve,Fve=Pve,Lve=Mve,jve=Object.prototype,Bve=jve.hasOwnProperty;function zve(t){if(!Fve(t))return Lve(t);var e=[];for(var n in Object(t))Bve.call(t,n)&&n!="constructor"&&e.push(n);return e}var Wve=zve,Vve=TN,Uve=GN;function Gve(t){return t!=null&&Uve(t.length)&&!Vve(t)}var sg=Gve,Hve=Nve,Kve=Wve,qve=sg;function Xve(t){return qve(t)?Hve(t):Kve(t)}var gw=Xve,Yve=dye,Qve=wye,Zve=gw;function Jve(t){return Yve(t,Zve,Qve)}var exe=Jve,yD=exe,txe=1,nxe=Object.prototype,rxe=nxe.hasOwnProperty;function oxe(t,e,n,r,o,s){var i=n&txe,a=yD(t),l=a.length,c=yD(e),u=c.length;if(l!=u&&!i)return!1;for(var d=l;d--;){var f=a[d];if(!(i?f in e:rxe.call(e,f)))return!1}var h=s.get(t),p=s.get(e);if(h&&p)return h==e&&p==t;var m=!0;s.set(t,e),s.set(e,t);for(var g=i;++d<l;){f=a[d];var y=t[f],v=e[f];if(r)var x=i?r(v,y,f,e,t,s):r(y,v,f,t,e,s);if(!(x===void 0?y===v||o(y,v,n,r,s):x)){m=!1;break}g||(g=f=="constructor")}if(m&&!g){var b=t.constructor,w=e.constructor;b!=w&&"constructor"in t&&"constructor"in e&&!(typeof b=="function"&&b instanceof b&&typeof w=="function"&&w instanceof w)&&(m=!1)}return s.delete(t),s.delete(e),m}var sxe=oxe,ixe=nu,axe=bi,lxe=ixe(axe,"DataView"),cxe=lxe,uxe=nu,dxe=bi,fxe=uxe(dxe,"Promise"),hxe=fxe,pxe=nu,mxe=bi,gxe=pxe(mxe,"Set"),LG=gxe,yxe=nu,vxe=bi,xxe=yxe(vxe,"WeakMap"),bxe=xxe,Kk=cxe,qk=EN,Xk=hxe,Yk=LG,Qk=bxe,jG=ia,jf=GU,vD="[object Map]",wxe="[object Object]",xD="[object Promise]",bD="[object Set]",wD="[object WeakMap]",SD="[object DataView]",Sxe=jf(Kk),Cxe=jf(qk),$xe=jf(Xk),kxe=jf(Yk),Txe=jf(Qk),Hl=jG;(Kk&&Hl(new Kk(new ArrayBuffer(1)))!=SD||qk&&Hl(new qk)!=vD||Xk&&Hl(Xk.resolve())!=xD||Yk&&Hl(new Yk)!=bD||Qk&&Hl(new Qk)!=wD)&&(Hl=function(t){var e=jG(t),n=e==wxe?t.constructor:void 0,r=n?jf(n):"";if(r)switch(r){case Sxe:return SD;case Cxe:return vD;case $xe:return xD;case kxe:return bD;case Txe:return wD}return e});var Ixe=Hl,pC=IG,Exe=OG,Nxe=iye,Axe=sxe,CD=Ixe,$D=eo,kD=_G,Oxe=MG,Pxe=1,TD="[object Arguments]",ID="[object Array]",sv="[object Object]",Rxe=Object.prototype,ED=Rxe.hasOwnProperty;function _xe(t,e,n,r,o,s){var i=$D(t),a=$D(e),l=i?ID:CD(t),c=a?ID:CD(e);l=l==TD?sv:l,c=c==TD?sv:c;var u=l==sv,d=c==sv,f=l==c;if(f&&kD(t)){if(!kD(e))return!1;i=!0,u=!1}if(f&&!u)return s||(s=new pC),i||Oxe(t)?Exe(t,e,n,r,o,s):Nxe(t,e,l,n,r,o,s);if(!(n&Pxe)){var h=u&&ED.call(t,"__wrapped__"),p=d&&ED.call(e,"__wrapped__");if(h||p){var m=h?t.value():t,g=p?e.value():e;return s||(s=new pC),o(m,g,n,r,s)}}return f?(s||(s=new pC),Axe(t,e,n,r,o,s)):!1}var Dxe=_xe,Mxe=Dxe,ND=aa;function BG(t,e,n,r,o){return t===e?!0:t==null||e==null||!ND(t)&&!ND(e)?t!==t&&e!==e:Mxe(t,e,n,r,BG,o)}var HN=BG,Fxe=IG,Lxe=HN,jxe=1,Bxe=2;function zxe(t,e,n,r){var o=n.length,s=o,i=!r;if(t==null)return!s;for(t=Object(t);o--;){var a=n[o];if(i&&a[2]?a[1]!==t[a[0]]:!(a[0]in t))return!1}for(;++o<s;){a=n[o];var l=a[0],c=t[l],u=a[1];if(i&&a[2]){if(c===void 0&&!(l in t))return!1}else{var d=new Fxe;if(r)var f=r(c,u,l,t,e,d);if(!(f===void 0?Lxe(u,c,jxe|Bxe,r,d):f))return!1}}return!0}var Wxe=zxe,Vxe=Cl;function Uxe(t){return t===t&&!Vxe(t)}var zG=Uxe,Gxe=zG,Hxe=gw;function Kxe(t){for(var e=Hxe(t),n=e.length;n--;){var r=e[n],o=t[r];e[n]=[r,o,Gxe(o)]}return e}var qxe=Kxe;function Xxe(t,e){return function(n){return n==null?!1:n[t]===e&&(e!==void 0||t in Object(n))}}var WG=Xxe,Yxe=Wxe,Qxe=qxe,Zxe=WG;function Jxe(t){var e=Qxe(t);return e.length==1&&e[0][2]?Zxe(e[0][0],e[0][1]):function(n){return n===t||Yxe(n,t,e)}}var ebe=Jxe;function tbe(t,e){return t!=null&&e in Object(t)}var nbe=tbe,rbe=YU,obe=VN,sbe=eo,ibe=UN,abe=GN,lbe=tw;function cbe(t,e,n){e=rbe(e,t);for(var r=-1,o=e.length,s=!1;++r<o;){var i=lbe(e[r]);if(!(s=t!=null&&n(t,i)))break;t=t[i]}return s||++r!=o?s:(o=t==null?0:t.length,!!o&&abe(o)&&ibe(i,o)&&(sbe(t)||obe(t)))}var ube=cbe,dbe=nbe,fbe=ube;function hbe(t,e){return t!=null&&fbe(t,e,dbe)}var pbe=hbe,mbe=HN,gbe=QU,ybe=pbe,vbe=kN,xbe=zG,bbe=WG,wbe=tw,Sbe=1,Cbe=2;function $be(t,e){return vbe(t)&&xbe(e)?bbe(wbe(t),e):function(n){var r=gbe(n,t);return r===void 0&&r===e?ybe(n,t):mbe(e,r,Sbe|Cbe)}}var kbe=$be;function Tbe(t){return t}var Bf=Tbe;function Ibe(t){return function(e){return e==null?void 0:e[t]}}var Ebe=Ibe,Nbe=PN;function Abe(t){return function(e){return Nbe(e,t)}}var Obe=Abe,Pbe=Ebe,Rbe=Obe,_be=kN,Dbe=tw;function Mbe(t){return _be(t)?Pbe(Dbe(t)):Rbe(t)}var Fbe=Mbe,Lbe=ebe,jbe=kbe,Bbe=Bf,zbe=eo,Wbe=Fbe;function Vbe(t){return typeof t=="function"?t:t==null?Bbe:typeof t=="object"?zbe(t)?jbe(t[0],t[1]):Lbe(t):Wbe(t)}var $l=Vbe;function Ube(t,e,n,r){for(var o=t.length,s=n+(r?1:-1);r?s--:++s<o;)if(e(t[s],s,t))return s;return-1}var VG=Ube;function Gbe(t){return t!==t}var Hbe=Gbe;function Kbe(t,e,n){for(var r=n-1,o=t.length;++r<o;)if(t[r]===e)return r;return-1}var qbe=Kbe,Xbe=VG,Ybe=Hbe,Qbe=qbe;function Zbe(t,e,n){return e===e?Qbe(t,e,n):Xbe(t,Ybe,n)}var Jbe=Zbe,e0e=Jbe;function t0e(t,e){var n=t==null?0:t.length;return!!n&&e0e(t,e,0)>-1}var n0e=t0e;function r0e(t,e,n){for(var r=-1,o=t==null?0:t.length;++r<o;)if(n(e,t[r]))return!0;return!1}var o0e=r0e;function s0e(){}var i0e=s0e,mC=LG,a0e=i0e,l0e=WN,c0e=1/0,u0e=mC&&1/l0e(new mC([,-0]))[1]==c0e?function(t){return new mC(t)}:a0e,d0e=u0e,f0e=EG,h0e=n0e,p0e=o0e,m0e=AG,g0e=d0e,y0e=WN,v0e=200;function x0e(t,e,n){var r=-1,o=h0e,s=t.length,i=!0,a=[],l=a;if(n)i=!1,o=p0e;else if(s>=v0e){var c=e?null:g0e(t);if(c)return y0e(c);i=!1,o=m0e,l=new f0e}else l=e?[]:a;e:for(;++r<s;){var u=t[r],d=e?e(u):u;if(u=n||u!==0?u:0,i&&d===d){for(var f=l.length;f--;)if(l[f]===d)continue e;e&&l.push(d),a.push(u)}else o(l,d,n)||(l!==a&&l.push(d),a.push(u))}return a}var b0e=x0e,w0e=$l,S0e=b0e;function C0e(t,e){return t&&t.length?S0e(t,w0e(e)):[]}var $0e=C0e;const AD=ft($0e);function UG(t,e,n){return e===!0?AD(t,n):Ue(e)?AD(t,e):t}function Vd(t){"@babel/helpers - typeof";return Vd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Vd(t)}var k0e=["ref"];function OD(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),n.push.apply(n,r)}return n}function $i(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?OD(Object(n),!0).forEach(function(r){yw(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):OD(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function T0e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function PD(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,HG(r.key),r)}}function I0e(t,e,n){return e&&PD(t.prototype,e),n&&PD(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function E0e(t,e,n){return e=Kx(e),N0e(t,GG()?Reflect.construct(e,n||[],Kx(t).constructor):e.apply(t,n))}function N0e(t,e){if(e&&(Vd(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return A0e(t)}function A0e(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function GG(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(GG=function(){return!!t})()}function Kx(t){return Kx=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Kx(t)}function O0e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Zk(t,e)}function Zk(t,e){return Zk=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,o){return r.__proto__=o,r},Zk(t,e)}function yw(t,e,n){return e=HG(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function HG(t){var e=P0e(t,"string");return Vd(e)=="symbol"?e:e+""}function P0e(t,e){if(Vd(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Vd(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function R0e(t,e){if(t==null)return{};var n=_0e(t,e),r,o;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(o=0;o<s.length;o++)r=s[o],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function _0e(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function D0e(t){return t.value}function M0e(t,e){if(z.isValidElement(t))return z.cloneElement(t,e);if(typeof t=="function")return z.createElement(t,e);e.ref;var n=R0e(e,k0e);return z.createElement(zN,n)}var RD=1,cd=function(t){function e(){var n;T0e(this,e);for(var r=arguments.length,o=new Array(r),s=0;s<r;s++)o[s]=arguments[s];return n=E0e(this,e,[].concat(o)),yw(n,"lastBoundingBox",{width:-1,height:-1}),n}return O0e(e,t),I0e(e,[{key:"componentDidMount",value:function(){this.updateBBox()}},{key:"componentDidUpdate",value:function(){this.updateBBox()}},{key:"getBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var r=this.wrapperNode.getBoundingClientRect();return r.height=this.wrapperNode.offsetHeight,r.width=this.wrapperNode.offsetWidth,r}return null}},{key:"updateBBox",value:function(){var r=this.props.onBBoxUpdate,o=this.getBBox();o?(Math.abs(o.width-this.lastBoundingBox.width)>RD||Math.abs(o.height-this.lastBoundingBox.height)>RD)&&(this.lastBoundingBox.width=o.width,this.lastBoundingBox.height=o.height,r&&r(o)):(this.lastBoundingBox.width!==-1||this.lastBoundingBox.height!==-1)&&(this.lastBoundingBox.width=-1,this.lastBoundingBox.height=-1,r&&r(null))}},{key:"getBBoxSnapshot",value:function(){return this.lastBoundingBox.width>=0&&this.lastBoundingBox.height>=0?$i({},this.lastBoundingBox):{width:0,height:0}}},{key:"getDefaultPosition",value:function(r){var o=this.props,s=o.layout,i=o.align,a=o.verticalAlign,l=o.margin,c=o.chartWidth,u=o.chartHeight,d,f;if(!r||(r.left===void 0||r.left===null)&&(r.right===void 0||r.right===null))if(i==="center"&&s==="vertical"){var h=this.getBBoxSnapshot();d={left:((c||0)-h.width)/2}}else d=i==="right"?{right:l&&l.right||0}:{left:l&&l.left||0};if(!r||(r.top===void 0||r.top===null)&&(r.bottom===void 0||r.bottom===null))if(a==="middle"){var p=this.getBBoxSnapshot();f={top:((u||0)-p.height)/2}}else f=a==="bottom"?{bottom:l&&l.bottom||0}:{top:l&&l.top||0};return $i($i({},d),f)}},{key:"render",value:function(){var r=this,o=this.props,s=o.content,i=o.width,a=o.height,l=o.wrapperStyle,c=o.payloadUniqBy,u=o.payload,d=$i($i({position:"absolute",width:i||"auto",height:a||"auto"},this.getDefaultPosition(l)),l);return z.createElement("div",{className:"recharts-legend-wrapper",style:d,ref:function(h){r.wrapperNode=h}},M0e(s,$i($i({},this.props),{},{payload:UG(u,c,D0e)})))}}],[{key:"getWithHeight",value:function(r,o){var s=$i($i({},this.defaultProps),r.props),i=s.layout;return i==="vertical"&&pe(r.props.height)?{height:r.props.height}:i==="horizontal"?{width:r.props.width||o}:null}}])}(k.PureComponent);yw(cd,"displayName","Legend");yw(cd,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"bottom"});var _D=ng,F0e=VN,L0e=eo,DD=_D?_D.isConcatSpreadable:void 0;function j0e(t){return L0e(t)||F0e(t)||!!(DD&&t&&t[DD])}var B0e=j0e,z0e=PG,W0e=B0e;function KG(t,e,n,r,o){var s=-1,i=t.length;for(n||(n=W0e),o||(o=[]);++s<i;){var a=t[s];e>0&&n(a)?e>1?KG(a,e-1,n,r,o):z0e(o,a):r||(o[o.length]=a)}return o}var qG=KG;function V0e(t){return function(e,n,r){for(var o=-1,s=Object(e),i=r(e),a=i.length;a--;){var l=i[t?a:++o];if(n(s[l],l,s)===!1)break}return e}}var U0e=V0e,G0e=U0e,H0e=G0e(),K0e=H0e,q0e=K0e,X0e=gw;function Y0e(t,e){return t&&q0e(t,e,X0e)}var XG=Y0e,Q0e=sg;function Z0e(t,e){return function(n,r){if(n==null)return n;if(!Q0e(n))return t(n,r);for(var o=n.length,s=e?o:-1,i=Object(n);(e?s--:++s<o)&&r(i[s],s,i)!==!1;);return n}}var J0e=Z0e,ewe=XG,twe=J0e,nwe=twe(ewe),KN=nwe,rwe=KN,owe=sg;function swe(t,e){var n=-1,r=owe(t)?Array(t.length):[];return rwe(t,function(o,s,i){r[++n]=e(o,s,i)}),r}var YG=swe;function iwe(t,e){var n=t.length;for(t.sort(e);n--;)t[n]=t[n].value;return t}var awe=iwe,MD=Pf;function lwe(t,e){if(t!==e){var n=t!==void 0,r=t===null,o=t===t,s=MD(t),i=e!==void 0,a=e===null,l=e===e,c=MD(e);if(!a&&!c&&!s&&t>e||s&&i&&l&&!a&&!c||r&&i&&l||!n&&l||!o)return 1;if(!r&&!s&&!c&&t<e||c&&n&&o&&!r&&!s||a&&n&&o||!i&&o||!l)return-1}return 0}var cwe=lwe,uwe=cwe;function dwe(t,e,n){for(var r=-1,o=t.criteria,s=e.criteria,i=o.length,a=n.length;++r<i;){var l=uwe(o[r],s[r]);if(l){if(r>=a)return l;var c=n[r];return l*(c=="desc"?-1:1)}}return t.index-e.index}var fwe=dwe,gC=ON,hwe=PN,pwe=$l,mwe=YG,gwe=awe,ywe=DG,vwe=fwe,xwe=Bf,bwe=eo;function wwe(t,e,n){e.length?e=gC(e,function(s){return bwe(s)?function(i){return hwe(i,s.length===1?s[0]:s)}:s}):e=[xwe];var r=-1;e=gC(e,ywe(pwe));var o=mwe(t,function(s,i,a){var l=gC(e,function(c){return c(s)});return{criteria:l,index:++r,value:s}});return gwe(o,function(s,i){return vwe(s,i,n)})}var Swe=wwe;function Cwe(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}var $we=Cwe,kwe=$we,FD=Math.max;function Twe(t,e,n){return e=FD(e===void 0?t.length-1:e,0),function(){for(var r=arguments,o=-1,s=FD(r.length-e,0),i=Array(s);++o<s;)i[o]=r[e+o];o=-1;for(var a=Array(e+1);++o<e;)a[o]=r[o];return a[e]=n(i),kwe(t,this,a)}}var Iwe=Twe;function Ewe(t){return function(){return t}}var Nwe=Ewe,Awe=nu,Owe=function(){try{var t=Awe(Object,"defineProperty");return t({},"",{}),t}catch{}}(),QG=Owe,Pwe=Nwe,LD=QG,Rwe=Bf,_we=LD?function(t,e){return LD(t,"toString",{configurable:!0,enumerable:!1,value:Pwe(e),writable:!0})}:Rwe,Dwe=_we,Mwe=800,Fwe=16,Lwe=Date.now;function jwe(t){var e=0,n=0;return function(){var r=Lwe(),o=Fwe-(r-n);if(n=r,o>0){if(++e>=Mwe)return arguments[0]}else e=0;return t.apply(void 0,arguments)}}var Bwe=jwe,zwe=Dwe,Wwe=Bwe,Vwe=Wwe(zwe),Uwe=Vwe,Gwe=Bf,Hwe=Iwe,Kwe=Uwe;function qwe(t,e){return Kwe(Hwe(t,e,Gwe),t+"")}var Xwe=qwe,Ywe=IN,Qwe=sg,Zwe=UN,Jwe=Cl;function e1e(t,e,n){if(!Jwe(n))return!1;var r=typeof e;return(r=="number"?Qwe(n)&&Zwe(e,n.length):r=="string"&&e in n)?Ywe(n[e],t):!1}var vw=e1e,t1e=qG,n1e=Swe,r1e=Xwe,jD=vw,o1e=r1e(function(t,e){if(t==null)return[];var n=e.length;return n>1&&jD(t,e[0],e[1])?e=[]:n>2&&jD(e[0],e[1],e[2])&&(e=[e[0]]),n1e(t,t1e(e,1),[])}),s1e=o1e;const qN=ft(s1e);function zp(t){"@babel/helpers - typeof";return zp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},zp(t)}function Jk(){return Jk=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Jk.apply(this,arguments)}function i1e(t,e){return u1e(t)||c1e(t,e)||l1e(t,e)||a1e()}function a1e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function l1e(t,e){if(t){if(typeof t=="string")return BD(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return BD(t,e)}}function BD(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function c1e(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,o,s,i,a=[],l=!0,c=!1;try{if(s=(n=n.call(t)).next,e!==0)for(;!(l=(r=s.call(n)).done)&&(a.push(r.value),a.length!==e);l=!0);}catch(u){c=!0,o=u}finally{try{if(!l&&n.return!=null&&(i=n.return(),Object(i)!==i))return}finally{if(c)throw o}}return a}}function u1e(t){if(Array.isArray(t))return t}function zD(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),n.push.apply(n,r)}return n}function yC(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?zD(Object(n),!0).forEach(function(r){d1e(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):zD(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function d1e(t,e,n){return e=f1e(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function f1e(t){var e=h1e(t,"string");return zp(e)=="symbol"?e:e+""}function h1e(t,e){if(zp(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(zp(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function p1e(t){return Array.isArray(t)&&In(t[0])&&In(t[1])?t.join(" ~ "):t}var m1e=function(e){var n=e.separator,r=n===void 0?" : ":n,o=e.contentStyle,s=o===void 0?{}:o,i=e.itemStyle,a=i===void 0?{}:i,l=e.labelStyle,c=l===void 0?{}:l,u=e.payload,d=e.formatter,f=e.itemSorter,h=e.wrapperClassName,p=e.labelClassName,m=e.label,g=e.labelFormatter,y=e.accessibilityLayer,v=y===void 0?!1:y,x=function(){if(u&&u.length){var A={padding:0,margin:0},R=(f?qN(u,f):u).map(function(P,F){if(P.type==="none")return null;var _=yC({display:"block",paddingTop:4,paddingBottom:4,color:P.color||"#000"},a),L=P.formatter||d||p1e,O=P.value,D=P.name,B=O,V=D;if(L&&B!=null&&V!=null){var G=L(O,D,P,F,u);if(Array.isArray(G)){var Q=i1e(G,2);B=Q[0],V=Q[1]}else B=G}return z.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(F),style:_},In(V)?z.createElement("span",{className:"recharts-tooltip-item-name"},V):null,In(V)?z.createElement("span",{className:"recharts-tooltip-item-separator"},r):null,z.createElement("span",{className:"recharts-tooltip-item-value"},B),z.createElement("span",{className:"recharts-tooltip-item-unit"},P.unit||""))});return z.createElement("ul",{className:"recharts-tooltip-item-list",style:A},R)}return null},b=yC({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},s),w=yC({margin:0},c),C=!tt(m),$=C?m:"",T=st("recharts-default-tooltip",h),I=st("recharts-tooltip-label",p);C&&g&&u!==void 0&&u!==null&&($=g(m,u));var E=v?{role:"status","aria-live":"assertive"}:{};return z.createElement("div",Jk({className:T,style:b},E),z.createElement("p",{className:I,style:w},z.isValidElement($)?$:"".concat($)),x())};function Wp(t){"@babel/helpers - typeof";return Wp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Wp(t)}function iv(t,e,n){return e=g1e(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function g1e(t){var e=y1e(t,"string");return Wp(e)=="symbol"?e:e+""}function y1e(t,e){if(Wp(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Wp(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Sh="recharts-tooltip-wrapper",v1e={visibility:"hidden"};function x1e(t){var e=t.coordinate,n=t.translateX,r=t.translateY;return st(Sh,iv(iv(iv(iv({},"".concat(Sh,"-right"),pe(n)&&e&&pe(e.x)&&n>=e.x),"".concat(Sh,"-left"),pe(n)&&e&&pe(e.x)&&n<e.x),"".concat(Sh,"-bottom"),pe(r)&&e&&pe(e.y)&&r>=e.y),"".concat(Sh,"-top"),pe(r)&&e&&pe(e.y)&&r<e.y))}function WD(t){var e=t.allowEscapeViewBox,n=t.coordinate,r=t.key,o=t.offsetTopLeft,s=t.position,i=t.reverseDirection,a=t.tooltipDimension,l=t.viewBox,c=t.viewBoxDimension;if(s&&pe(s[r]))return s[r];var u=n[r]-a-o,d=n[r]+o;if(e[r])return i[r]?u:d;if(i[r]){var f=u,h=l[r];return f<h?Math.max(d,l[r]):Math.max(u,l[r])}var p=d+a,m=l[r]+c;return p>m?Math.max(u,l[r]):Math.max(d,l[r])}function b1e(t){var e=t.translateX,n=t.translateY,r=t.useTranslate3d;return{transform:r?"translate3d(".concat(e,"px, ").concat(n,"px, 0)"):"translate(".concat(e,"px, ").concat(n,"px)")}}function w1e(t){var e=t.allowEscapeViewBox,n=t.coordinate,r=t.offsetTopLeft,o=t.position,s=t.reverseDirection,i=t.tooltipBox,a=t.useTranslate3d,l=t.viewBox,c,u,d;return i.height>0&&i.width>0&&n?(u=WD({allowEscapeViewBox:e,coordinate:n,key:"x",offsetTopLeft:r,position:o,reverseDirection:s,tooltipDimension:i.width,viewBox:l,viewBoxDimension:l.width}),d=WD({allowEscapeViewBox:e,coordinate:n,key:"y",offsetTopLeft:r,position:o,reverseDirection:s,tooltipDimension:i.height,viewBox:l,viewBoxDimension:l.height}),c=b1e({translateX:u,translateY:d,useTranslate3d:a})):c=v1e,{cssProperties:c,cssClasses:x1e({translateX:u,translateY:d,coordinate:n})}}function Ud(t){"@babel/helpers - typeof";return Ud=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ud(t)}function VD(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),n.push.apply(n,r)}return n}function UD(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?VD(Object(n),!0).forEach(function(r){tT(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):VD(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function S1e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function C1e(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,JG(r.key),r)}}function $1e(t,e,n){return e&&C1e(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function k1e(t,e,n){return e=qx(e),T1e(t,ZG()?Reflect.construct(e,n||[],qx(t).constructor):e.apply(t,n))}function T1e(t,e){if(e&&(Ud(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return I1e(t)}function I1e(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function ZG(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(ZG=function(){return!!t})()}function qx(t){return qx=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},qx(t)}function E1e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&eT(t,e)}function eT(t,e){return eT=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,o){return r.__proto__=o,r},eT(t,e)}function tT(t,e,n){return e=JG(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function JG(t){var e=N1e(t,"string");return Ud(e)=="symbol"?e:e+""}function N1e(t,e){if(Ud(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Ud(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var GD=1,A1e=function(t){function e(){var n;S1e(this,e);for(var r=arguments.length,o=new Array(r),s=0;s<r;s++)o[s]=arguments[s];return n=k1e(this,e,[].concat(o)),tT(n,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0},lastBoundingBox:{width:-1,height:-1}}),tT(n,"handleKeyDown",function(i){if(i.key==="Escape"){var a,l,c,u;n.setState({dismissed:!0,dismissedAtCoordinate:{x:(a=(l=n.props.coordinate)===null||l===void 0?void 0:l.x)!==null&&a!==void 0?a:0,y:(c=(u=n.props.coordinate)===null||u===void 0?void 0:u.y)!==null&&c!==void 0?c:0}})}}),n}return E1e(e,t),$1e(e,[{key:"updateBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var r=this.wrapperNode.getBoundingClientRect();(Math.abs(r.width-this.state.lastBoundingBox.width)>GD||Math.abs(r.height-this.state.lastBoundingBox.height)>GD)&&this.setState({lastBoundingBox:{width:r.width,height:r.height}})}else(this.state.lastBoundingBox.width!==-1||this.state.lastBoundingBox.height!==-1)&&this.setState({lastBoundingBox:{width:-1,height:-1}})}},{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.handleKeyDown),this.updateBBox()}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.handleKeyDown)}},{key:"componentDidUpdate",value:function(){var r,o;this.props.active&&this.updateBBox(),this.state.dismissed&&(((r=this.props.coordinate)===null||r===void 0?void 0:r.x)!==this.state.dismissedAtCoordinate.x||((o=this.props.coordinate)===null||o===void 0?void 0:o.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}},{key:"render",value:function(){var r=this,o=this.props,s=o.active,i=o.allowEscapeViewBox,a=o.animationDuration,l=o.animationEasing,c=o.children,u=o.coordinate,d=o.hasPayload,f=o.isAnimationActive,h=o.offset,p=o.position,m=o.reverseDirection,g=o.useTranslate3d,y=o.viewBox,v=o.wrapperStyle,x=w1e({allowEscapeViewBox:i,coordinate:u,offsetTopLeft:h,position:p,reverseDirection:m,tooltipBox:this.state.lastBoundingBox,useTranslate3d:g,viewBox:y}),b=x.cssClasses,w=x.cssProperties,C=UD(UD({transition:f&&s?"transform ".concat(a,"ms ").concat(l):void 0},w),{},{pointerEvents:"none",visibility:!this.state.dismissed&&s&&d?"visible":"hidden",position:"absolute",top:0,left:0},v);return z.createElement("div",{tabIndex:-1,className:b,style:C,ref:function(T){r.wrapperNode=T}},c)}}])}(k.PureComponent),O1e=function(){return!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout)},zi={isSsr:O1e(),get:function(e){return zi[e]},set:function(e,n){if(typeof e=="string")zi[e]=n;else{var r=Object.keys(e);r&&r.length&&r.forEach(function(o){zi[o]=e[o]})}}};function Gd(t){"@babel/helpers - typeof";return Gd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Gd(t)}function HD(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),n.push.apply(n,r)}return n}function KD(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?HD(Object(n),!0).forEach(function(r){XN(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):HD(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function P1e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function R1e(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,tH(r.key),r)}}function _1e(t,e,n){return e&&R1e(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function D1e(t,e,n){return e=Xx(e),M1e(t,eH()?Reflect.construct(e,n||[],Xx(t).constructor):e.apply(t,n))}function M1e(t,e){if(e&&(Gd(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return F1e(t)}function F1e(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function eH(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(eH=function(){return!!t})()}function Xx(t){return Xx=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Xx(t)}function L1e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&nT(t,e)}function nT(t,e){return nT=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,o){return r.__proto__=o,r},nT(t,e)}function XN(t,e,n){return e=tH(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function tH(t){var e=j1e(t,"string");return Gd(e)=="symbol"?e:e+""}function j1e(t,e){if(Gd(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Gd(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function B1e(t){return t.dataKey}function z1e(t,e){return z.isValidElement(t)?z.cloneElement(t,e):typeof t=="function"?z.createElement(t,e):z.createElement(m1e,e)}var ds=function(t){function e(){return P1e(this,e),D1e(this,e,arguments)}return L1e(e,t),_1e(e,[{key:"render",value:function(){var r=this,o=this.props,s=o.active,i=o.allowEscapeViewBox,a=o.animationDuration,l=o.animationEasing,c=o.content,u=o.coordinate,d=o.filterNull,f=o.isAnimationActive,h=o.offset,p=o.payload,m=o.payloadUniqBy,g=o.position,y=o.reverseDirection,v=o.useTranslate3d,x=o.viewBox,b=o.wrapperStyle,w=p??[];d&&w.length&&(w=UG(p.filter(function($){return $.value!=null&&($.hide!==!0||r.props.includeHidden)}),m,B1e));var C=w.length>0;return z.createElement(A1e,{allowEscapeViewBox:i,animationDuration:a,animationEasing:l,isAnimationActive:f,active:s,coordinate:u,hasPayload:C,offset:h,position:g,reverseDirection:y,useTranslate3d:v,viewBox:x,wrapperStyle:b},z1e(c,KD(KD({},this.props),{},{payload:w})))}}])}(k.PureComponent);XN(ds,"displayName","Tooltip");XN(ds,"defaultProps",{accessibilityLayer:!1,allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",contentStyle:{},coordinate:{x:0,y:0},cursor:!0,cursorStyle:{},filterNull:!0,isAnimationActive:!zi.isSsr,itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,viewBox:{x:0,y:0,height:0,width:0},wrapperStyle:{}});var W1e=bi,V1e=function(){return W1e.Date.now()},U1e=V1e,G1e=/\s/;function H1e(t){for(var e=t.length;e--&&G1e.test(t.charAt(e)););return e}var K1e=H1e,q1e=K1e,X1e=/^\s+/;function Y1e(t){return t&&t.slice(0,q1e(t)+1).replace(X1e,"")}var Q1e=Y1e,Z1e=Q1e,qD=Cl,J1e=Pf,XD=NaN,eSe=/^[-+]0x[0-9a-f]+$/i,tSe=/^0b[01]+$/i,nSe=/^0o[0-7]+$/i,rSe=parseInt;function oSe(t){if(typeof t=="number")return t;if(J1e(t))return XD;if(qD(t)){var e=typeof t.valueOf=="function"?t.valueOf():t;t=qD(e)?e+"":e}if(typeof t!="string")return t===0?t:+t;t=Z1e(t);var n=tSe.test(t);return n||nSe.test(t)?rSe(t.slice(2),n?2:8):eSe.test(t)?XD:+t}var nH=oSe,sSe=Cl,vC=U1e,YD=nH,iSe="Expected a function",aSe=Math.max,lSe=Math.min;function cSe(t,e,n){var r,o,s,i,a,l,c=0,u=!1,d=!1,f=!0;if(typeof t!="function")throw new TypeError(iSe);e=YD(e)||0,sSe(n)&&(u=!!n.leading,d="maxWait"in n,s=d?aSe(YD(n.maxWait)||0,e):s,f="trailing"in n?!!n.trailing:f);function h(C){var $=r,T=o;return r=o=void 0,c=C,i=t.apply(T,$),i}function p(C){return c=C,a=setTimeout(y,e),u?h(C):i}function m(C){var $=C-l,T=C-c,I=e-$;return d?lSe(I,s-T):I}function g(C){var $=C-l,T=C-c;return l===void 0||$>=e||$<0||d&&T>=s}function y(){var C=vC();if(g(C))return v(C);a=setTimeout(y,m(C))}function v(C){return a=void 0,f&&r?h(C):(r=o=void 0,i)}function x(){a!==void 0&&clearTimeout(a),c=0,r=l=o=a=void 0}function b(){return a===void 0?i:v(vC())}function w(){var C=vC(),$=g(C);if(r=arguments,o=this,l=C,$){if(a===void 0)return p(l);if(d)return clearTimeout(a),a=setTimeout(y,e),h(l)}return a===void 0&&(a=setTimeout(y,e)),i}return w.cancel=x,w.flush=b,w}var uSe=cSe,dSe=uSe,fSe=Cl,hSe="Expected a function";function pSe(t,e,n){var r=!0,o=!0;if(typeof t!="function")throw new TypeError(hSe);return fSe(n)&&(r="leading"in n?!!n.leading:r,o="trailing"in n?!!n.trailing:o),dSe(t,e,{leading:r,maxWait:e,trailing:o})}var mSe=pSe;const rH=ft(mSe);function Vp(t){"@babel/helpers - typeof";return Vp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Vp(t)}function QD(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),n.push.apply(n,r)}return n}function av(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?QD(Object(n),!0).forEach(function(r){gSe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):QD(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function gSe(t,e,n){return e=ySe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function ySe(t){var e=vSe(t,"string");return Vp(e)=="symbol"?e:e+""}function vSe(t,e){if(Vp(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Vp(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function xSe(t,e){return CSe(t)||SSe(t,e)||wSe(t,e)||bSe()}function bSe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function wSe(t,e){if(t){if(typeof t=="string")return ZD(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ZD(t,e)}}function ZD(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function SSe(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,o,s,i,a=[],l=!0,c=!1;try{if(s=(n=n.call(t)).next,e!==0)for(;!(l=(r=s.call(n)).done)&&(a.push(r.value),a.length!==e);l=!0);}catch(u){c=!0,o=u}finally{try{if(!l&&n.return!=null&&(i=n.return(),Object(i)!==i))return}finally{if(c)throw o}}return a}}function CSe(t){if(Array.isArray(t))return t}var JD=k.forwardRef(function(t,e){var n=t.aspect,r=t.initialDimension,o=r===void 0?{width:-1,height:-1}:r,s=t.width,i=s===void 0?"100%":s,a=t.height,l=a===void 0?"100%":a,c=t.minWidth,u=c===void 0?0:c,d=t.minHeight,f=t.maxHeight,h=t.children,p=t.debounce,m=p===void 0?0:p,g=t.id,y=t.className,v=t.onResize,x=t.style,b=x===void 0?{}:x,w=k.useRef(null),C=k.useRef();C.current=v,k.useImperativeHandle(e,function(){return Object.defineProperty(w.current,"current",{get:function(){return console.warn("The usage of ref.current.current is deprecated and will no longer be supported."),w.current},configurable:!0})});var $=k.useState({containerWidth:o.width,containerHeight:o.height}),T=xSe($,2),I=T[0],E=T[1],N=k.useCallback(function(R,P){E(function(F){var _=Math.round(R),L=Math.round(P);return F.containerWidth===_&&F.containerHeight===L?F:{containerWidth:_,containerHeight:L}})},[]);k.useEffect(function(){var R=function(D){var B,V=D[0].contentRect,G=V.width,Q=V.height;N(G,Q),(B=C.current)===null||B===void 0||B.call(C,G,Q)};m>0&&(R=rH(R,m,{trailing:!0,leading:!1}));var P=new ResizeObserver(R),F=w.current.getBoundingClientRect(),_=F.width,L=F.height;return N(_,L),P.observe(w.current),function(){P.disconnect()}},[N,m]);var A=k.useMemo(function(){var R=I.containerWidth,P=I.containerHeight;if(R<0||P<0)return null;Bi(tc(i)||tc(l),`The width(%s) and height(%s) are both fixed numbers,
       maybe you don't need to use a ResponsiveContainer.`,i,l),Bi(!n||n>0,"The aspect(%s) must be greater than zero.",n);var F=tc(i)?R:i,_=tc(l)?P:l;n&&n>0&&(F?_=F/n:_&&(F=_*n),f&&_>f&&(_=f)),Bi(F>0||_>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,F,_,i,l,u,d,n);var L=!Array.isArray(h)&&ji(h.type).endsWith("Chart");return z.Children.map(h,function(O){return z.isValidElement(O)?k.cloneElement(O,av({width:F,height:_},L?{style:av({height:"100%",width:"100%",maxHeight:_,maxWidth:F},O.props.style)}:{})):O})},[n,h,l,f,d,u,I,i]);return z.createElement("div",{id:g?"".concat(g):void 0,className:st("recharts-responsive-container",y),style:av(av({},b),{},{width:i,height:l,minWidth:u,minHeight:d,maxHeight:f}),ref:w},A)}),oH=function(e){return null};oH.displayName="Cell";function Up(t){"@babel/helpers - typeof";return Up=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Up(t)}function eM(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),n.push.apply(n,r)}return n}function rT(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?eM(Object(n),!0).forEach(function(r){$Se(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):eM(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function $Se(t,e,n){return e=kSe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function kSe(t){var e=TSe(t,"string");return Up(e)=="symbol"?e:e+""}function TSe(t,e){if(Up(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Up(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Tu={widthCache:{},cacheCount:0},ISe=2e3,ESe={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},tM="recharts_measurement_span";function NSe(t){var e=rT({},t);return Object.keys(e).forEach(function(n){e[n]||delete e[n]}),e}var lp=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(e==null||zi.isSsr)return{width:0,height:0};var r=NSe(n),o=JSON.stringify({text:e,copyStyle:r});if(Tu.widthCache[o])return Tu.widthCache[o];try{var s=document.getElementById(tM);s||(s=document.createElement("span"),s.setAttribute("id",tM),s.setAttribute("aria-hidden","true"),document.body.appendChild(s));var i=rT(rT({},ESe),r);Object.assign(s.style,i),s.textContent="".concat(e);var a=s.getBoundingClientRect(),l={width:a.width,height:a.height};return Tu.widthCache[o]=l,++Tu.cacheCount>ISe&&(Tu.cacheCount=0,Tu.widthCache={}),l}catch{return{width:0,height:0}}},ASe=function(e){return{top:e.top+window.scrollY-document.documentElement.clientTop,left:e.left+window.scrollX-document.documentElement.clientLeft}};function Gp(t){"@babel/helpers - typeof";return Gp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Gp(t)}function Yx(t,e){return _Se(t)||RSe(t,e)||PSe(t,e)||OSe()}function OSe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function PSe(t,e){if(t){if(typeof t=="string")return nM(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return nM(t,e)}}function nM(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function RSe(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,o,s,i,a=[],l=!0,c=!1;try{if(s=(n=n.call(t)).next,e===0){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=s.call(n)).done)&&(a.push(r.value),a.length!==e);l=!0);}catch(u){c=!0,o=u}finally{try{if(!l&&n.return!=null&&(i=n.return(),Object(i)!==i))return}finally{if(c)throw o}}return a}}function _Se(t){if(Array.isArray(t))return t}function DSe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function rM(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,FSe(r.key),r)}}function MSe(t,e,n){return e&&rM(t.prototype,e),n&&rM(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function FSe(t){var e=LSe(t,"string");return Gp(e)=="symbol"?e:e+""}function LSe(t,e){if(Gp(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Gp(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var oM=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,sM=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,jSe=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,BSe=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,sH={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},zSe=Object.keys(sH),Ku="NaN";function WSe(t,e){return t*sH[e]}var lv=function(){function t(e,n){DSe(this,t),this.num=e,this.unit=n,this.num=e,this.unit=n,Number.isNaN(e)&&(this.unit=""),n!==""&&!jSe.test(n)&&(this.num=NaN,this.unit=""),zSe.includes(n)&&(this.num=WSe(e,n),this.unit="px")}return MSe(t,[{key:"add",value:function(n){return this.unit!==n.unit?new t(NaN,""):new t(this.num+n.num,this.unit)}},{key:"subtract",value:function(n){return this.unit!==n.unit?new t(NaN,""):new t(this.num-n.num,this.unit)}},{key:"multiply",value:function(n){return this.unit!==""&&n.unit!==""&&this.unit!==n.unit?new t(NaN,""):new t(this.num*n.num,this.unit||n.unit)}},{key:"divide",value:function(n){return this.unit!==""&&n.unit!==""&&this.unit!==n.unit?new t(NaN,""):new t(this.num/n.num,this.unit||n.unit)}},{key:"toString",value:function(){return"".concat(this.num).concat(this.unit)}},{key:"isNaN",value:function(){return Number.isNaN(this.num)}}],[{key:"parse",value:function(n){var r,o=(r=BSe.exec(n))!==null&&r!==void 0?r:[],s=Yx(o,3),i=s[1],a=s[2];return new t(parseFloat(i),a??"")}}])}();function iH(t){if(t.includes(Ku))return Ku;for(var e=t;e.includes("*")||e.includes("/");){var n,r=(n=oM.exec(e))!==null&&n!==void 0?n:[],o=Yx(r,4),s=o[1],i=o[2],a=o[3],l=lv.parse(s??""),c=lv.parse(a??""),u=i==="*"?l.multiply(c):l.divide(c);if(u.isNaN())return Ku;e=e.replace(oM,u.toString())}for(;e.includes("+")||/.-\d+(?:\.\d+)?/.test(e);){var d,f=(d=sM.exec(e))!==null&&d!==void 0?d:[],h=Yx(f,4),p=h[1],m=h[2],g=h[3],y=lv.parse(p??""),v=lv.parse(g??""),x=m==="+"?y.add(v):y.subtract(v);if(x.isNaN())return Ku;e=e.replace(sM,x.toString())}return e}var iM=/\(([^()]*)\)/;function VSe(t){for(var e=t;e.includes("(");){var n=iM.exec(e),r=Yx(n,2),o=r[1];e=e.replace(iM,iH(o))}return e}function USe(t){var e=t.replace(/\s+/g,"");return e=VSe(e),e=iH(e),e}function GSe(t){try{return USe(t)}catch{return Ku}}function xC(t){var e=GSe(t.slice(5,-1));return e===Ku?"":e}var HSe=["x","y","lineHeight","capHeight","scaleToFit","textAnchor","verticalAnchor","fill"],KSe=["dx","dy","angle","className","breakAll"];function oT(){return oT=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},oT.apply(this,arguments)}function aM(t,e){if(t==null)return{};var n=qSe(t,e),r,o;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(o=0;o<s.length;o++)r=s[o],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function qSe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function lM(t,e){return ZSe(t)||QSe(t,e)||YSe(t,e)||XSe()}function XSe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function YSe(t,e){if(t){if(typeof t=="string")return cM(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return cM(t,e)}}function cM(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function QSe(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,o,s,i,a=[],l=!0,c=!1;try{if(s=(n=n.call(t)).next,e===0){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=s.call(n)).done)&&(a.push(r.value),a.length!==e);l=!0);}catch(u){c=!0,o=u}finally{try{if(!l&&n.return!=null&&(i=n.return(),Object(i)!==i))return}finally{if(c)throw o}}return a}}function ZSe(t){if(Array.isArray(t))return t}var aH=/[ \f\n\r\t\v\u2028\u2029]+/,lH=function(e){var n=e.children,r=e.breakAll,o=e.style;try{var s=[];tt(n)||(r?s=n.toString().split(""):s=n.toString().split(aH));var i=s.map(function(l){return{word:l,width:lp(l,o).width}}),a=r?0:lp(" ",o).width;return{wordsWithComputedWidth:i,spaceWidth:a}}catch{return null}},JSe=function(e,n,r,o,s){var i=e.maxLines,a=e.children,l=e.style,c=e.breakAll,u=pe(i),d=a,f=function(){var F=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return F.reduce(function(_,L){var O=L.word,D=L.width,B=_[_.length-1];if(B&&(o==null||s||B.width+D+r<Number(o)))B.words.push(O),B.width+=D+r;else{var V={words:[O],width:D};_.push(V)}return _},[])},h=f(n),p=function(F){return F.reduce(function(_,L){return _.width>L.width?_:L})};if(!u)return h;for(var m="…",g=function(F){var _=d.slice(0,F),L=lH({breakAll:c,style:l,children:_+m}).wordsWithComputedWidth,O=f(L),D=O.length>i||p(O).width>Number(o);return[D,O]},y=0,v=d.length-1,x=0,b;y<=v&&x<=d.length-1;){var w=Math.floor((y+v)/2),C=w-1,$=g(C),T=lM($,2),I=T[0],E=T[1],N=g(w),A=lM(N,1),R=A[0];if(!I&&!R&&(y=w+1),I&&R&&(v=w-1),!I&&R){b=E;break}x++}return b||h},uM=function(e){var n=tt(e)?[]:e.toString().split(aH);return[{words:n}]},eCe=function(e){var n=e.width,r=e.scaleToFit,o=e.children,s=e.style,i=e.breakAll,a=e.maxLines;if((n||r)&&!zi.isSsr){var l,c,u=lH({breakAll:i,children:o,style:s});if(u){var d=u.wordsWithComputedWidth,f=u.spaceWidth;l=d,c=f}else return uM(o);return JSe({breakAll:i,children:o,maxLines:a,style:s},l,c,n,r)}return uM(o)},dM="#808080",Qx=function(e){var n=e.x,r=n===void 0?0:n,o=e.y,s=o===void 0?0:o,i=e.lineHeight,a=i===void 0?"1em":i,l=e.capHeight,c=l===void 0?"0.71em":l,u=e.scaleToFit,d=u===void 0?!1:u,f=e.textAnchor,h=f===void 0?"start":f,p=e.verticalAnchor,m=p===void 0?"end":p,g=e.fill,y=g===void 0?dM:g,v=aM(e,HSe),x=k.useMemo(function(){return eCe({breakAll:v.breakAll,children:v.children,maxLines:v.maxLines,scaleToFit:d,style:v.style,width:v.width})},[v.breakAll,v.children,v.maxLines,d,v.style,v.width]),b=v.dx,w=v.dy,C=v.angle,$=v.className,T=v.breakAll,I=aM(v,KSe);if(!In(r)||!In(s))return null;var E=r+(pe(b)?b:0),N=s+(pe(w)?w:0),A;switch(m){case"start":A=xC("calc(".concat(c,")"));break;case"middle":A=xC("calc(".concat((x.length-1)/2," * -").concat(a," + (").concat(c," / 2))"));break;default:A=xC("calc(".concat(x.length-1," * -").concat(a,")"));break}var R=[];if(d){var P=x[0].width,F=v.width;R.push("scale(".concat((pe(F)?F/P:1)/P,")"))}return C&&R.push("rotate(".concat(C,", ").concat(E,", ").concat(N,")")),R.length&&(I.transform=R.join(" ")),z.createElement("text",oT({},Ye(I,!0),{x:E,y:N,className:st("recharts-text",$),textAnchor:h,fill:y.includes("url")?dM:y}),x.map(function(_,L){var O=_.words.join(T?"":" ");return z.createElement("tspan",{x:E,dy:L===0?A:a,key:"".concat(O,"-").concat(L)},O)}))};function el(t,e){return t==null||e==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function tCe(t,e){return t==null||e==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function YN(t){let e,n,r;t.length!==2?(e=el,n=(a,l)=>el(t(a),l),r=(a,l)=>t(a)-l):(e=t===el||t===tCe?t:nCe,n=t,r=t);function o(a,l,c=0,u=a.length){if(c<u){if(e(l,l)!==0)return u;do{const d=c+u>>>1;n(a[d],l)<0?c=d+1:u=d}while(c<u)}return c}function s(a,l,c=0,u=a.length){if(c<u){if(e(l,l)!==0)return u;do{const d=c+u>>>1;n(a[d],l)<=0?c=d+1:u=d}while(c<u)}return c}function i(a,l,c=0,u=a.length){const d=o(a,l,c,u-1);return d>c&&r(a[d-1],l)>-r(a[d],l)?d-1:d}return{left:o,center:i,right:s}}function nCe(){return 0}function cH(t){return t===null?NaN:+t}function*rCe(t,e){for(let n of t)n!=null&&(n=+n)>=n&&(yield n)}const oCe=YN(el),ig=oCe.right;YN(cH).center;class fM extends Map{constructor(e,n=aCe){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),e!=null)for(const[r,o]of e)this.set(r,o)}get(e){return super.get(hM(this,e))}has(e){return super.has(hM(this,e))}set(e,n){return super.set(sCe(this,e),n)}delete(e){return super.delete(iCe(this,e))}}function hM({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):n}function sCe({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):(t.set(r,n),n)}function iCe({_intern:t,_key:e},n){const r=e(n);return t.has(r)&&(n=t.get(r),t.delete(r)),n}function aCe(t){return t!==null&&typeof t=="object"?t.valueOf():t}function lCe(t=el){if(t===el)return uH;if(typeof t!="function")throw new TypeError("compare is not a function");return(e,n)=>{const r=t(e,n);return r||r===0?r:(t(n,n)===0)-(t(e,e)===0)}}function uH(t,e){return(t==null||!(t>=t))-(e==null||!(e>=e))||(t<e?-1:t>e?1:0)}const cCe=Math.sqrt(50),uCe=Math.sqrt(10),dCe=Math.sqrt(2);function Zx(t,e,n){const r=(e-t)/Math.max(0,n),o=Math.floor(Math.log10(r)),s=r/Math.pow(10,o),i=s>=cCe?10:s>=uCe?5:s>=dCe?2:1;let a,l,c;return o<0?(c=Math.pow(10,-o)/i,a=Math.round(t*c),l=Math.round(e*c),a/c<t&&++a,l/c>e&&--l,c=-c):(c=Math.pow(10,o)*i,a=Math.round(t/c),l=Math.round(e/c),a*c<t&&++a,l*c>e&&--l),l<a&&.5<=n&&n<2?Zx(t,e,n*2):[a,l,c]}function sT(t,e,n){if(e=+e,t=+t,n=+n,!(n>0))return[];if(t===e)return[t];const r=e<t,[o,s,i]=r?Zx(e,t,n):Zx(t,e,n);if(!(s>=o))return[];const a=s-o+1,l=new Array(a);if(r)if(i<0)for(let c=0;c<a;++c)l[c]=(s-c)/-i;else for(let c=0;c<a;++c)l[c]=(s-c)*i;else if(i<0)for(let c=0;c<a;++c)l[c]=(o+c)/-i;else for(let c=0;c<a;++c)l[c]=(o+c)*i;return l}function iT(t,e,n){return e=+e,t=+t,n=+n,Zx(t,e,n)[2]}function aT(t,e,n){e=+e,t=+t,n=+n;const r=e<t,o=r?iT(e,t,n):iT(t,e,n);return(r?-1:1)*(o<0?1/-o:o)}function pM(t,e){let n;for(const r of t)r!=null&&(n<r||n===void 0&&r>=r)&&(n=r);return n}function mM(t,e){let n;for(const r of t)r!=null&&(n>r||n===void 0&&r>=r)&&(n=r);return n}function dH(t,e,n=0,r=1/0,o){if(e=Math.floor(e),n=Math.floor(Math.max(0,n)),r=Math.floor(Math.min(t.length-1,r)),!(n<=e&&e<=r))return t;for(o=o===void 0?uH:lCe(o);r>n;){if(r-n>600){const l=r-n+1,c=e-n+1,u=Math.log(l),d=.5*Math.exp(2*u/3),f=.5*Math.sqrt(u*d*(l-d)/l)*(c-l/2<0?-1:1),h=Math.max(n,Math.floor(e-c*d/l+f)),p=Math.min(r,Math.floor(e+(l-c)*d/l+f));dH(t,e,h,p,o)}const s=t[e];let i=n,a=r;for(Ch(t,n,e),o(t[r],s)>0&&Ch(t,n,r);i<a;){for(Ch(t,i,a),++i,--a;o(t[i],s)<0;)++i;for(;o(t[a],s)>0;)--a}o(t[n],s)===0?Ch(t,n,a):(++a,Ch(t,a,r)),a<=e&&(n=a+1),e<=a&&(r=a-1)}return t}function Ch(t,e,n){const r=t[e];t[e]=t[n],t[n]=r}function fCe(t,e,n){if(t=Float64Array.from(rCe(t)),!(!(r=t.length)||isNaN(e=+e))){if(e<=0||r<2)return mM(t);if(e>=1)return pM(t);var r,o=(r-1)*e,s=Math.floor(o),i=pM(dH(t,s).subarray(0,s+1)),a=mM(t.subarray(s+1));return i+(a-i)*(o-s)}}function hCe(t,e,n=cH){if(!(!(r=t.length)||isNaN(e=+e))){if(e<=0||r<2)return+n(t[0],0,t);if(e>=1)return+n(t[r-1],r-1,t);var r,o=(r-1)*e,s=Math.floor(o),i=+n(t[s],s,t),a=+n(t[s+1],s+1,t);return i+(a-i)*(o-s)}}function pCe(t,e,n){t=+t,e=+e,n=(o=arguments.length)<2?(e=t,t=0,1):o<3?1:+n;for(var r=-1,o=Math.max(0,Math.ceil((e-t)/n))|0,s=new Array(o);++r<o;)s[r]=t+r*n;return s}function Zo(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t);break}return this}function la(t,e){switch(arguments.length){case 0:break;case 1:{typeof t=="function"?this.interpolator(t):this.range(t);break}default:{this.domain(t),typeof e=="function"?this.interpolator(e):this.range(e);break}}return this}const lT=Symbol("implicit");function QN(){var t=new fM,e=[],n=[],r=lT;function o(s){let i=t.get(s);if(i===void 0){if(r!==lT)return r;t.set(s,i=e.push(s)-1)}return n[i%n.length]}return o.domain=function(s){if(!arguments.length)return e.slice();e=[],t=new fM;for(const i of s)t.has(i)||t.set(i,e.push(i)-1);return o},o.range=function(s){return arguments.length?(n=Array.from(s),o):n.slice()},o.unknown=function(s){return arguments.length?(r=s,o):r},o.copy=function(){return QN(e,n).unknown(r)},Zo.apply(o,arguments),o}function Hp(){var t=QN().unknown(void 0),e=t.domain,n=t.range,r=0,o=1,s,i,a=!1,l=0,c=0,u=.5;delete t.unknown;function d(){var f=e().length,h=o<r,p=h?o:r,m=h?r:o;s=(m-p)/Math.max(1,f-l+c*2),a&&(s=Math.floor(s)),p+=(m-p-s*(f-l))*u,i=s*(1-l),a&&(p=Math.round(p),i=Math.round(i));var g=pCe(f).map(function(y){return p+s*y});return n(h?g.reverse():g)}return t.domain=function(f){return arguments.length?(e(f),d()):e()},t.range=function(f){return arguments.length?([r,o]=f,r=+r,o=+o,d()):[r,o]},t.rangeRound=function(f){return[r,o]=f,r=+r,o=+o,a=!0,d()},t.bandwidth=function(){return i},t.step=function(){return s},t.round=function(f){return arguments.length?(a=!!f,d()):a},t.padding=function(f){return arguments.length?(l=Math.min(1,c=+f),d()):l},t.paddingInner=function(f){return arguments.length?(l=Math.min(1,f),d()):l},t.paddingOuter=function(f){return arguments.length?(c=+f,d()):c},t.align=function(f){return arguments.length?(u=Math.max(0,Math.min(1,f)),d()):u},t.copy=function(){return Hp(e(),[r,o]).round(a).paddingInner(l).paddingOuter(c).align(u)},Zo.apply(d(),arguments)}function fH(t){var e=t.copy;return t.padding=t.paddingOuter,delete t.paddingInner,delete t.paddingOuter,t.copy=function(){return fH(e())},t}function cp(){return fH(Hp.apply(null,arguments).paddingInner(1))}function ZN(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function hH(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function ag(){}var Kp=.7,Jx=1/Kp,ud="\\s*([+-]?\\d+)\\s*",qp="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",si="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",mCe=/^#([0-9a-f]{3,8})$/,gCe=new RegExp(`^rgb\\(${ud},${ud},${ud}\\)$`),yCe=new RegExp(`^rgb\\(${si},${si},${si}\\)$`),vCe=new RegExp(`^rgba\\(${ud},${ud},${ud},${qp}\\)$`),xCe=new RegExp(`^rgba\\(${si},${si},${si},${qp}\\)$`),bCe=new RegExp(`^hsl\\(${qp},${si},${si}\\)$`),wCe=new RegExp(`^hsla\\(${qp},${si},${si},${qp}\\)$`),gM={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};ZN(ag,Xp,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:yM,formatHex:yM,formatHex8:SCe,formatHsl:CCe,formatRgb:vM,toString:vM});function yM(){return this.rgb().formatHex()}function SCe(){return this.rgb().formatHex8()}function CCe(){return pH(this).formatHsl()}function vM(){return this.rgb().formatRgb()}function Xp(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=mCe.exec(t))?(n=e[1].length,e=parseInt(e[1],16),n===6?xM(e):n===3?new Ur(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):n===8?cv(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):n===4?cv(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=gCe.exec(t))?new Ur(e[1],e[2],e[3],1):(e=yCe.exec(t))?new Ur(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=vCe.exec(t))?cv(e[1],e[2],e[3],e[4]):(e=xCe.exec(t))?cv(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=bCe.exec(t))?SM(e[1],e[2]/100,e[3]/100,1):(e=wCe.exec(t))?SM(e[1],e[2]/100,e[3]/100,e[4]):gM.hasOwnProperty(t)?xM(gM[t]):t==="transparent"?new Ur(NaN,NaN,NaN,0):null}function xM(t){return new Ur(t>>16&255,t>>8&255,t&255,1)}function cv(t,e,n,r){return r<=0&&(t=e=n=NaN),new Ur(t,e,n,r)}function $Ce(t){return t instanceof ag||(t=Xp(t)),t?(t=t.rgb(),new Ur(t.r,t.g,t.b,t.opacity)):new Ur}function cT(t,e,n,r){return arguments.length===1?$Ce(t):new Ur(t,e,n,r??1)}function Ur(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}ZN(Ur,cT,hH(ag,{brighter(t){return t=t==null?Jx:Math.pow(Jx,t),new Ur(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?Kp:Math.pow(Kp,t),new Ur(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new Ur(xc(this.r),xc(this.g),xc(this.b),eb(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:bM,formatHex:bM,formatHex8:kCe,formatRgb:wM,toString:wM}));function bM(){return`#${nc(this.r)}${nc(this.g)}${nc(this.b)}`}function kCe(){return`#${nc(this.r)}${nc(this.g)}${nc(this.b)}${nc((isNaN(this.opacity)?1:this.opacity)*255)}`}function wM(){const t=eb(this.opacity);return`${t===1?"rgb(":"rgba("}${xc(this.r)}, ${xc(this.g)}, ${xc(this.b)}${t===1?")":`, ${t})`}`}function eb(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function xc(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function nc(t){return t=xc(t),(t<16?"0":"")+t.toString(16)}function SM(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new vs(t,e,n,r)}function pH(t){if(t instanceof vs)return new vs(t.h,t.s,t.l,t.opacity);if(t instanceof ag||(t=Xp(t)),!t)return new vs;if(t instanceof vs)return t;t=t.rgb();var e=t.r/255,n=t.g/255,r=t.b/255,o=Math.min(e,n,r),s=Math.max(e,n,r),i=NaN,a=s-o,l=(s+o)/2;return a?(e===s?i=(n-r)/a+(n<r)*6:n===s?i=(r-e)/a+2:i=(e-n)/a+4,a/=l<.5?s+o:2-s-o,i*=60):a=l>0&&l<1?0:i,new vs(i,a,l,t.opacity)}function TCe(t,e,n,r){return arguments.length===1?pH(t):new vs(t,e,n,r??1)}function vs(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}ZN(vs,TCe,hH(ag,{brighter(t){return t=t==null?Jx:Math.pow(Jx,t),new vs(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?Kp:Math.pow(Kp,t),new vs(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,o=2*n-r;return new Ur(bC(t>=240?t-240:t+120,o,r),bC(t,o,r),bC(t<120?t+240:t-120,o,r),this.opacity)},clamp(){return new vs(CM(this.h),uv(this.s),uv(this.l),eb(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=eb(this.opacity);return`${t===1?"hsl(":"hsla("}${CM(this.h)}, ${uv(this.s)*100}%, ${uv(this.l)*100}%${t===1?")":`, ${t})`}`}}));function CM(t){return t=(t||0)%360,t<0?t+360:t}function uv(t){return Math.max(0,Math.min(1,t||0))}function bC(t,e,n){return(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)*255}const JN=t=>()=>t;function ICe(t,e){return function(n){return t+n*e}}function ECe(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}function NCe(t){return(t=+t)==1?mH:function(e,n){return n-e?ECe(e,n,t):JN(isNaN(e)?n:e)}}function mH(t,e){var n=e-t;return n?ICe(t,n):JN(isNaN(t)?e:t)}const $M=function t(e){var n=NCe(e);function r(o,s){var i=n((o=cT(o)).r,(s=cT(s)).r),a=n(o.g,s.g),l=n(o.b,s.b),c=mH(o.opacity,s.opacity);return function(u){return o.r=i(u),o.g=a(u),o.b=l(u),o.opacity=c(u),o+""}}return r.gamma=t,r}(1);function ACe(t,e){e||(e=[]);var n=t?Math.min(e.length,t.length):0,r=e.slice(),o;return function(s){for(o=0;o<n;++o)r[o]=t[o]*(1-s)+e[o]*s;return r}}function OCe(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function PCe(t,e){var n=e?e.length:0,r=t?Math.min(n,t.length):0,o=new Array(r),s=new Array(n),i;for(i=0;i<r;++i)o[i]=zf(t[i],e[i]);for(;i<n;++i)s[i]=e[i];return function(a){for(i=0;i<r;++i)s[i]=o[i](a);return s}}function RCe(t,e){var n=new Date;return t=+t,e=+e,function(r){return n.setTime(t*(1-r)+e*r),n}}function tb(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}function _Ce(t,e){var n={},r={},o;(t===null||typeof t!="object")&&(t={}),(e===null||typeof e!="object")&&(e={});for(o in e)o in t?n[o]=zf(t[o],e[o]):r[o]=e[o];return function(s){for(o in n)r[o]=n[o](s);return r}}var uT=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,wC=new RegExp(uT.source,"g");function DCe(t){return function(){return t}}function MCe(t){return function(e){return t(e)+""}}function FCe(t,e){var n=uT.lastIndex=wC.lastIndex=0,r,o,s,i=-1,a=[],l=[];for(t=t+"",e=e+"";(r=uT.exec(t))&&(o=wC.exec(e));)(s=o.index)>n&&(s=e.slice(n,s),a[i]?a[i]+=s:a[++i]=s),(r=r[0])===(o=o[0])?a[i]?a[i]+=o:a[++i]=o:(a[++i]=null,l.push({i,x:tb(r,o)})),n=wC.lastIndex;return n<e.length&&(s=e.slice(n),a[i]?a[i]+=s:a[++i]=s),a.length<2?l[0]?MCe(l[0].x):DCe(e):(e=l.length,function(c){for(var u=0,d;u<e;++u)a[(d=l[u]).i]=d.x(c);return a.join("")})}function zf(t,e){var n=typeof e,r;return e==null||n==="boolean"?JN(e):(n==="number"?tb:n==="string"?(r=Xp(e))?(e=r,$M):FCe:e instanceof Xp?$M:e instanceof Date?RCe:OCe(e)?ACe:Array.isArray(e)?PCe:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?_Ce:tb)(t,e)}function e2(t,e){return t=+t,e=+e,function(n){return Math.round(t*(1-n)+e*n)}}function LCe(t,e){e===void 0&&(e=t,t=zf);for(var n=0,r=e.length-1,o=e[0],s=new Array(r<0?0:r);n<r;)s[n]=t(o,o=e[++n]);return function(i){var a=Math.max(0,Math.min(r-1,Math.floor(i*=r)));return s[a](i-a)}}function jCe(t){return function(){return t}}function nb(t){return+t}var kM=[0,1];function Ir(t){return t}function dT(t,e){return(e-=t=+t)?function(n){return(n-t)/e}:jCe(isNaN(e)?NaN:.5)}function BCe(t,e){var n;return t>e&&(n=t,t=e,e=n),function(r){return Math.max(t,Math.min(e,r))}}function zCe(t,e,n){var r=t[0],o=t[1],s=e[0],i=e[1];return o<r?(r=dT(o,r),s=n(i,s)):(r=dT(r,o),s=n(s,i)),function(a){return s(r(a))}}function WCe(t,e,n){var r=Math.min(t.length,e.length)-1,o=new Array(r),s=new Array(r),i=-1;for(t[r]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++i<r;)o[i]=dT(t[i],t[i+1]),s[i]=n(e[i],e[i+1]);return function(a){var l=ig(t,a,1,r)-1;return s[l](o[l](a))}}function lg(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function xw(){var t=kM,e=kM,n=zf,r,o,s,i=Ir,a,l,c;function u(){var f=Math.min(t.length,e.length);return i!==Ir&&(i=BCe(t[0],t[f-1])),a=f>2?WCe:zCe,l=c=null,d}function d(f){return f==null||isNaN(f=+f)?s:(l||(l=a(t.map(r),e,n)))(r(i(f)))}return d.invert=function(f){return i(o((c||(c=a(e,t.map(r),tb)))(f)))},d.domain=function(f){return arguments.length?(t=Array.from(f,nb),u()):t.slice()},d.range=function(f){return arguments.length?(e=Array.from(f),u()):e.slice()},d.rangeRound=function(f){return e=Array.from(f),n=e2,u()},d.clamp=function(f){return arguments.length?(i=f?!0:Ir,u()):i!==Ir},d.interpolate=function(f){return arguments.length?(n=f,u()):n},d.unknown=function(f){return arguments.length?(s=f,d):s},function(f,h){return r=f,o=h,u()}}function t2(){return xw()(Ir,Ir)}function VCe(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function rb(t,e){if((n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var n,r=t.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+t.slice(n+1)]}function Hd(t){return t=rb(Math.abs(t)),t?t[1]:NaN}function UCe(t,e){return function(n,r){for(var o=n.length,s=[],i=0,a=t[0],l=0;o>0&&a>0&&(l+a+1>r&&(a=Math.max(1,r-l)),s.push(n.substring(o-=a,o+a)),!((l+=a+1)>r));)a=t[i=(i+1)%t.length];return s.reverse().join(e)}}function GCe(t){return function(e){return e.replace(/[0-9]/g,function(n){return t[+n]})}}var HCe=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Yp(t){if(!(e=HCe.exec(t)))throw new Error("invalid format: "+t);var e;return new n2({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}Yp.prototype=n2.prototype;function n2(t){this.fill=t.fill===void 0?" ":t.fill+"",this.align=t.align===void 0?">":t.align+"",this.sign=t.sign===void 0?"-":t.sign+"",this.symbol=t.symbol===void 0?"":t.symbol+"",this.zero=!!t.zero,this.width=t.width===void 0?void 0:+t.width,this.comma=!!t.comma,this.precision=t.precision===void 0?void 0:+t.precision,this.trim=!!t.trim,this.type=t.type===void 0?"":t.type+""}n2.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function KCe(t){e:for(var e=t.length,n=1,r=-1,o;n<e;++n)switch(t[n]){case".":r=o=n;break;case"0":r===0&&(r=n),o=n;break;default:if(!+t[n])break e;r>0&&(r=0);break}return r>0?t.slice(0,r)+t.slice(o+1):t}var gH;function qCe(t,e){var n=rb(t,e);if(!n)return t+"";var r=n[0],o=n[1],s=o-(gH=Math.max(-8,Math.min(8,Math.floor(o/3)))*3)+1,i=r.length;return s===i?r:s>i?r+new Array(s-i+1).join("0"):s>0?r.slice(0,s)+"."+r.slice(s):"0."+new Array(1-s).join("0")+rb(t,Math.max(0,e+s-1))[0]}function TM(t,e){var n=rb(t,e);if(!n)return t+"";var r=n[0],o=n[1];return o<0?"0."+new Array(-o).join("0")+r:r.length>o+1?r.slice(0,o+1)+"."+r.slice(o+1):r+new Array(o-r.length+2).join("0")}const IM={"%":(t,e)=>(t*100).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:VCe,e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>TM(t*100,e),r:TM,s:qCe,X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function EM(t){return t}var NM=Array.prototype.map,AM=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function XCe(t){var e=t.grouping===void 0||t.thousands===void 0?EM:UCe(NM.call(t.grouping,Number),t.thousands+""),n=t.currency===void 0?"":t.currency[0]+"",r=t.currency===void 0?"":t.currency[1]+"",o=t.decimal===void 0?".":t.decimal+"",s=t.numerals===void 0?EM:GCe(NM.call(t.numerals,String)),i=t.percent===void 0?"%":t.percent+"",a=t.minus===void 0?"−":t.minus+"",l=t.nan===void 0?"NaN":t.nan+"";function c(d){d=Yp(d);var f=d.fill,h=d.align,p=d.sign,m=d.symbol,g=d.zero,y=d.width,v=d.comma,x=d.precision,b=d.trim,w=d.type;w==="n"?(v=!0,w="g"):IM[w]||(x===void 0&&(x=12),b=!0,w="g"),(g||f==="0"&&h==="=")&&(g=!0,f="0",h="=");var C=m==="$"?n:m==="#"&&/[boxX]/.test(w)?"0"+w.toLowerCase():"",$=m==="$"?r:/[%p]/.test(w)?i:"",T=IM[w],I=/[defgprs%]/.test(w);x=x===void 0?6:/[gprs]/.test(w)?Math.max(1,Math.min(21,x)):Math.max(0,Math.min(20,x));function E(N){var A=C,R=$,P,F,_;if(w==="c")R=T(N)+R,N="";else{N=+N;var L=N<0||1/N<0;if(N=isNaN(N)?l:T(Math.abs(N),x),b&&(N=KCe(N)),L&&+N==0&&p!=="+"&&(L=!1),A=(L?p==="("?p:a:p==="-"||p==="("?"":p)+A,R=(w==="s"?AM[8+gH/3]:"")+R+(L&&p==="("?")":""),I){for(P=-1,F=N.length;++P<F;)if(_=N.charCodeAt(P),48>_||_>57){R=(_===46?o+N.slice(P+1):N.slice(P))+R,N=N.slice(0,P);break}}}v&&!g&&(N=e(N,1/0));var O=A.length+N.length+R.length,D=O<y?new Array(y-O+1).join(f):"";switch(v&&g&&(N=e(D+N,D.length?y-R.length:1/0),D=""),h){case"<":N=A+N+R+D;break;case"=":N=A+D+N+R;break;case"^":N=D.slice(0,O=D.length>>1)+A+N+R+D.slice(O);break;default:N=D+A+N+R;break}return s(N)}return E.toString=function(){return d+""},E}function u(d,f){var h=c((d=Yp(d),d.type="f",d)),p=Math.max(-8,Math.min(8,Math.floor(Hd(f)/3)))*3,m=Math.pow(10,-p),g=AM[8+p/3];return function(y){return h(m*y)+g}}return{format:c,formatPrefix:u}}var dv,r2,yH;YCe({thousands:",",grouping:[3],currency:["$",""]});function YCe(t){return dv=XCe(t),r2=dv.format,yH=dv.formatPrefix,dv}function QCe(t){return Math.max(0,-Hd(Math.abs(t)))}function ZCe(t,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Hd(e)/3)))*3-Hd(Math.abs(t)))}function JCe(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,Hd(e)-Hd(t))+1}function vH(t,e,n,r){var o=aT(t,e,n),s;switch(r=Yp(r??",f"),r.type){case"s":{var i=Math.max(Math.abs(t),Math.abs(e));return r.precision==null&&!isNaN(s=ZCe(o,i))&&(r.precision=s),yH(r,i)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(s=JCe(o,Math.max(Math.abs(t),Math.abs(e))))&&(r.precision=s-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(s=QCe(o))&&(r.precision=s-(r.type==="%")*2);break}}return r2(r)}function kl(t){var e=t.domain;return t.ticks=function(n){var r=e();return sT(r[0],r[r.length-1],n??10)},t.tickFormat=function(n,r){var o=e();return vH(o[0],o[o.length-1],n??10,r)},t.nice=function(n){n==null&&(n=10);var r=e(),o=0,s=r.length-1,i=r[o],a=r[s],l,c,u=10;for(a<i&&(c=i,i=a,a=c,c=o,o=s,s=c);u-- >0;){if(c=iT(i,a,n),c===l)return r[o]=i,r[s]=a,e(r);if(c>0)i=Math.floor(i/c)*c,a=Math.ceil(a/c)*c;else if(c<0)i=Math.ceil(i*c)/c,a=Math.floor(a*c)/c;else break;l=c}return t},t}function ob(){var t=t2();return t.copy=function(){return lg(t,ob())},Zo.apply(t,arguments),kl(t)}function xH(t){var e;function n(r){return r==null||isNaN(r=+r)?e:r}return n.invert=n,n.domain=n.range=function(r){return arguments.length?(t=Array.from(r,nb),n):t.slice()},n.unknown=function(r){return arguments.length?(e=r,n):e},n.copy=function(){return xH(t).unknown(e)},t=arguments.length?Array.from(t,nb):[0,1],kl(n)}function bH(t,e){t=t.slice();var n=0,r=t.length-1,o=t[n],s=t[r],i;return s<o&&(i=n,n=r,r=i,i=o,o=s,s=i),t[n]=e.floor(o),t[r]=e.ceil(s),t}function OM(t){return Math.log(t)}function PM(t){return Math.exp(t)}function e$e(t){return-Math.log(-t)}function t$e(t){return-Math.exp(-t)}function n$e(t){return isFinite(t)?+("1e"+t):t<0?0:t}function r$e(t){return t===10?n$e:t===Math.E?Math.exp:e=>Math.pow(t,e)}function o$e(t){return t===Math.E?Math.log:t===10&&Math.log10||t===2&&Math.log2||(t=Math.log(t),e=>Math.log(e)/t)}function RM(t){return(e,n)=>-t(-e,n)}function o2(t){const e=t(OM,PM),n=e.domain;let r=10,o,s;function i(){return o=o$e(r),s=r$e(r),n()[0]<0?(o=RM(o),s=RM(s),t(e$e,t$e)):t(OM,PM),e}return e.base=function(a){return arguments.length?(r=+a,i()):r},e.domain=function(a){return arguments.length?(n(a),i()):n()},e.ticks=a=>{const l=n();let c=l[0],u=l[l.length-1];const d=u<c;d&&([c,u]=[u,c]);let f=o(c),h=o(u),p,m;const g=a==null?10:+a;let y=[];if(!(r%1)&&h-f<g){if(f=Math.floor(f),h=Math.ceil(h),c>0){for(;f<=h;++f)for(p=1;p<r;++p)if(m=f<0?p/s(-f):p*s(f),!(m<c)){if(m>u)break;y.push(m)}}else for(;f<=h;++f)for(p=r-1;p>=1;--p)if(m=f>0?p/s(-f):p*s(f),!(m<c)){if(m>u)break;y.push(m)}y.length*2<g&&(y=sT(c,u,g))}else y=sT(f,h,Math.min(h-f,g)).map(s);return d?y.reverse():y},e.tickFormat=(a,l)=>{if(a==null&&(a=10),l==null&&(l=r===10?"s":","),typeof l!="function"&&(!(r%1)&&(l=Yp(l)).precision==null&&(l.trim=!0),l=r2(l)),a===1/0)return l;const c=Math.max(1,r*a/e.ticks().length);return u=>{let d=u/s(Math.round(o(u)));return d*r<r-.5&&(d*=r),d<=c?l(u):""}},e.nice=()=>n(bH(n(),{floor:a=>s(Math.floor(o(a))),ceil:a=>s(Math.ceil(o(a)))})),e}function wH(){const t=o2(xw()).domain([1,10]);return t.copy=()=>lg(t,wH()).base(t.base()),Zo.apply(t,arguments),t}function _M(t){return function(e){return Math.sign(e)*Math.log1p(Math.abs(e/t))}}function DM(t){return function(e){return Math.sign(e)*Math.expm1(Math.abs(e))*t}}function s2(t){var e=1,n=t(_M(e),DM(e));return n.constant=function(r){return arguments.length?t(_M(e=+r),DM(e)):e},kl(n)}function SH(){var t=s2(xw());return t.copy=function(){return lg(t,SH()).constant(t.constant())},Zo.apply(t,arguments)}function MM(t){return function(e){return e<0?-Math.pow(-e,t):Math.pow(e,t)}}function s$e(t){return t<0?-Math.sqrt(-t):Math.sqrt(t)}function i$e(t){return t<0?-t*t:t*t}function i2(t){var e=t(Ir,Ir),n=1;function r(){return n===1?t(Ir,Ir):n===.5?t(s$e,i$e):t(MM(n),MM(1/n))}return e.exponent=function(o){return arguments.length?(n=+o,r()):n},kl(e)}function a2(){var t=i2(xw());return t.copy=function(){return lg(t,a2()).exponent(t.exponent())},Zo.apply(t,arguments),t}function a$e(){return a2.apply(null,arguments).exponent(.5)}function FM(t){return Math.sign(t)*t*t}function l$e(t){return Math.sign(t)*Math.sqrt(Math.abs(t))}function CH(){var t=t2(),e=[0,1],n=!1,r;function o(s){var i=l$e(t(s));return isNaN(i)?r:n?Math.round(i):i}return o.invert=function(s){return t.invert(FM(s))},o.domain=function(s){return arguments.length?(t.domain(s),o):t.domain()},o.range=function(s){return arguments.length?(t.range((e=Array.from(s,nb)).map(FM)),o):e.slice()},o.rangeRound=function(s){return o.range(s).round(!0)},o.round=function(s){return arguments.length?(n=!!s,o):n},o.clamp=function(s){return arguments.length?(t.clamp(s),o):t.clamp()},o.unknown=function(s){return arguments.length?(r=s,o):r},o.copy=function(){return CH(t.domain(),e).round(n).clamp(t.clamp()).unknown(r)},Zo.apply(o,arguments),kl(o)}function $H(){var t=[],e=[],n=[],r;function o(){var i=0,a=Math.max(1,e.length);for(n=new Array(a-1);++i<a;)n[i-1]=hCe(t,i/a);return s}function s(i){return i==null||isNaN(i=+i)?r:e[ig(n,i)]}return s.invertExtent=function(i){var a=e.indexOf(i);return a<0?[NaN,NaN]:[a>0?n[a-1]:t[0],a<n.length?n[a]:t[t.length-1]]},s.domain=function(i){if(!arguments.length)return t.slice();t=[];for(let a of i)a!=null&&!isNaN(a=+a)&&t.push(a);return t.sort(el),o()},s.range=function(i){return arguments.length?(e=Array.from(i),o()):e.slice()},s.unknown=function(i){return arguments.length?(r=i,s):r},s.quantiles=function(){return n.slice()},s.copy=function(){return $H().domain(t).range(e).unknown(r)},Zo.apply(s,arguments)}function kH(){var t=0,e=1,n=1,r=[.5],o=[0,1],s;function i(l){return l!=null&&l<=l?o[ig(r,l,0,n)]:s}function a(){var l=-1;for(r=new Array(n);++l<n;)r[l]=((l+1)*e-(l-n)*t)/(n+1);return i}return i.domain=function(l){return arguments.length?([t,e]=l,t=+t,e=+e,a()):[t,e]},i.range=function(l){return arguments.length?(n=(o=Array.from(l)).length-1,a()):o.slice()},i.invertExtent=function(l){var c=o.indexOf(l);return c<0?[NaN,NaN]:c<1?[t,r[0]]:c>=n?[r[n-1],e]:[r[c-1],r[c]]},i.unknown=function(l){return arguments.length&&(s=l),i},i.thresholds=function(){return r.slice()},i.copy=function(){return kH().domain([t,e]).range(o).unknown(s)},Zo.apply(kl(i),arguments)}function TH(){var t=[.5],e=[0,1],n,r=1;function o(s){return s!=null&&s<=s?e[ig(t,s,0,r)]:n}return o.domain=function(s){return arguments.length?(t=Array.from(s),r=Math.min(t.length,e.length-1),o):t.slice()},o.range=function(s){return arguments.length?(e=Array.from(s),r=Math.min(t.length,e.length-1),o):e.slice()},o.invertExtent=function(s){var i=e.indexOf(s);return[t[i-1],t[i]]},o.unknown=function(s){return arguments.length?(n=s,o):n},o.copy=function(){return TH().domain(t).range(e).unknown(n)},Zo.apply(o,arguments)}const SC=new Date,CC=new Date;function An(t,e,n,r){function o(s){return t(s=arguments.length===0?new Date:new Date(+s)),s}return o.floor=s=>(t(s=new Date(+s)),s),o.ceil=s=>(t(s=new Date(s-1)),e(s,1),t(s),s),o.round=s=>{const i=o(s),a=o.ceil(s);return s-i<a-s?i:a},o.offset=(s,i)=>(e(s=new Date(+s),i==null?1:Math.floor(i)),s),o.range=(s,i,a)=>{const l=[];if(s=o.ceil(s),a=a==null?1:Math.floor(a),!(s<i)||!(a>0))return l;let c;do l.push(c=new Date(+s)),e(s,a),t(s);while(c<s&&s<i);return l},o.filter=s=>An(i=>{if(i>=i)for(;t(i),!s(i);)i.setTime(i-1)},(i,a)=>{if(i>=i)if(a<0)for(;++a<=0;)for(;e(i,-1),!s(i););else for(;--a>=0;)for(;e(i,1),!s(i););}),n&&(o.count=(s,i)=>(SC.setTime(+s),CC.setTime(+i),t(SC),t(CC),Math.floor(n(SC,CC))),o.every=s=>(s=Math.floor(s),!isFinite(s)||!(s>0)?null:s>1?o.filter(r?i=>r(i)%s===0:i=>o.count(0,i)%s===0):o)),o}const sb=An(()=>{},(t,e)=>{t.setTime(+t+e)},(t,e)=>e-t);sb.every=t=>(t=Math.floor(t),!isFinite(t)||!(t>0)?null:t>1?An(e=>{e.setTime(Math.floor(e/t)*t)},(e,n)=>{e.setTime(+e+n*t)},(e,n)=>(n-e)/t):sb);sb.range;const Pi=1e3,Mo=Pi*60,Ri=Mo*60,Qi=Ri*24,l2=Qi*7,LM=Qi*30,$C=Qi*365,rc=An(t=>{t.setTime(t-t.getMilliseconds())},(t,e)=>{t.setTime(+t+e*Pi)},(t,e)=>(e-t)/Pi,t=>t.getUTCSeconds());rc.range;const c2=An(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*Pi)},(t,e)=>{t.setTime(+t+e*Mo)},(t,e)=>(e-t)/Mo,t=>t.getMinutes());c2.range;const u2=An(t=>{t.setUTCSeconds(0,0)},(t,e)=>{t.setTime(+t+e*Mo)},(t,e)=>(e-t)/Mo,t=>t.getUTCMinutes());u2.range;const d2=An(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*Pi-t.getMinutes()*Mo)},(t,e)=>{t.setTime(+t+e*Ri)},(t,e)=>(e-t)/Ri,t=>t.getHours());d2.range;const f2=An(t=>{t.setUTCMinutes(0,0,0)},(t,e)=>{t.setTime(+t+e*Ri)},(t,e)=>(e-t)/Ri,t=>t.getUTCHours());f2.range;const cg=An(t=>t.setHours(0,0,0,0),(t,e)=>t.setDate(t.getDate()+e),(t,e)=>(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*Mo)/Qi,t=>t.getDate()-1);cg.range;const bw=An(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/Qi,t=>t.getUTCDate()-1);bw.range;const IH=An(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/Qi,t=>Math.floor(t/Qi));IH.range;function ru(t){return An(e=>{e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)},(e,n)=>{e.setDate(e.getDate()+n*7)},(e,n)=>(n-e-(n.getTimezoneOffset()-e.getTimezoneOffset())*Mo)/l2)}const ww=ru(0),ib=ru(1),c$e=ru(2),u$e=ru(3),Kd=ru(4),d$e=ru(5),f$e=ru(6);ww.range;ib.range;c$e.range;u$e.range;Kd.range;d$e.range;f$e.range;function ou(t){return An(e=>{e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)},(e,n)=>{e.setUTCDate(e.getUTCDate()+n*7)},(e,n)=>(n-e)/l2)}const Sw=ou(0),ab=ou(1),h$e=ou(2),p$e=ou(3),qd=ou(4),m$e=ou(5),g$e=ou(6);Sw.range;ab.range;h$e.range;p$e.range;qd.range;m$e.range;g$e.range;const h2=An(t=>{t.setDate(1),t.setHours(0,0,0,0)},(t,e)=>{t.setMonth(t.getMonth()+e)},(t,e)=>e.getMonth()-t.getMonth()+(e.getFullYear()-t.getFullYear())*12,t=>t.getMonth());h2.range;const p2=An(t=>{t.setUTCDate(1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCMonth(t.getUTCMonth()+e)},(t,e)=>e.getUTCMonth()-t.getUTCMonth()+(e.getUTCFullYear()-t.getUTCFullYear())*12,t=>t.getUTCMonth());p2.range;const Zi=An(t=>{t.setMonth(0,1),t.setHours(0,0,0,0)},(t,e)=>{t.setFullYear(t.getFullYear()+e)},(t,e)=>e.getFullYear()-t.getFullYear(),t=>t.getFullYear());Zi.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:An(e=>{e.setFullYear(Math.floor(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)},(e,n)=>{e.setFullYear(e.getFullYear()+n*t)});Zi.range;const Ji=An(t=>{t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCFullYear(t.getUTCFullYear()+e)},(t,e)=>e.getUTCFullYear()-t.getUTCFullYear(),t=>t.getUTCFullYear());Ji.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:An(e=>{e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,n)=>{e.setUTCFullYear(e.getUTCFullYear()+n*t)});Ji.range;function EH(t,e,n,r,o,s){const i=[[rc,1,Pi],[rc,5,5*Pi],[rc,15,15*Pi],[rc,30,30*Pi],[s,1,Mo],[s,5,5*Mo],[s,15,15*Mo],[s,30,30*Mo],[o,1,Ri],[o,3,3*Ri],[o,6,6*Ri],[o,12,12*Ri],[r,1,Qi],[r,2,2*Qi],[n,1,l2],[e,1,LM],[e,3,3*LM],[t,1,$C]];function a(c,u,d){const f=u<c;f&&([c,u]=[u,c]);const h=d&&typeof d.range=="function"?d:l(c,u,d),p=h?h.range(c,+u+1):[];return f?p.reverse():p}function l(c,u,d){const f=Math.abs(u-c)/d,h=YN(([,,g])=>g).right(i,f);if(h===i.length)return t.every(aT(c/$C,u/$C,d));if(h===0)return sb.every(Math.max(aT(c,u,d),1));const[p,m]=i[f/i[h-1][2]<i[h][2]/f?h-1:h];return p.every(m)}return[a,l]}const[y$e,v$e]=EH(Ji,p2,Sw,IH,f2,u2),[x$e,b$e]=EH(Zi,h2,ww,cg,d2,c2);function kC(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function TC(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function $h(t,e,n){return{y:t,m:e,d:n,H:0,M:0,S:0,L:0}}function w$e(t){var e=t.dateTime,n=t.date,r=t.time,o=t.periods,s=t.days,i=t.shortDays,a=t.months,l=t.shortMonths,c=kh(o),u=Th(o),d=kh(s),f=Th(s),h=kh(i),p=Th(i),m=kh(a),g=Th(a),y=kh(l),v=Th(l),x={a:L,A:O,b:D,B,c:null,d:UM,e:UM,f:U$e,g:eke,G:nke,H:z$e,I:W$e,j:V$e,L:NH,m:G$e,M:H$e,p:V,q:G,Q:KM,s:qM,S:K$e,u:q$e,U:X$e,V:Y$e,w:Q$e,W:Z$e,x:null,X:null,y:J$e,Y:tke,Z:rke,"%":HM},b={a:Q,A:re,b:ie,B:ce,c:null,d:GM,e:GM,f:ake,g:yke,G:xke,H:oke,I:ske,j:ike,L:OH,m:lke,M:cke,p:se,q:fe,Q:KM,s:qM,S:uke,u:dke,U:fke,V:hke,w:pke,W:mke,x:null,X:null,y:gke,Y:vke,Z:bke,"%":HM},w={a:E,A:N,b:A,B:R,c:P,d:WM,e:WM,f:F$e,g:zM,G:BM,H:VM,I:VM,j:R$e,L:M$e,m:P$e,M:_$e,p:I,q:O$e,Q:j$e,s:B$e,S:D$e,u:T$e,U:I$e,V:E$e,w:k$e,W:N$e,x:F,X:_,y:zM,Y:BM,Z:A$e,"%":L$e};x.x=C(n,x),x.X=C(r,x),x.c=C(e,x),b.x=C(n,b),b.X=C(r,b),b.c=C(e,b);function C(J,ae){return function(le){var Z=[],$e=-1,be=0,Pe=J.length,Ne,je,Ze;for(le instanceof Date||(le=new Date(+le));++$e<Pe;)J.charCodeAt($e)===37&&(Z.push(J.slice(be,$e)),(je=jM[Ne=J.charAt(++$e)])!=null?Ne=J.charAt(++$e):je=Ne==="e"?" ":"0",(Ze=ae[Ne])&&(Ne=Ze(le,je)),Z.push(Ne),be=$e+1);return Z.push(J.slice(be,$e)),Z.join("")}}function $(J,ae){return function(le){var Z=$h(1900,void 0,1),$e=T(Z,J,le+="",0),be,Pe;if($e!=le.length)return null;if("Q"in Z)return new Date(Z.Q);if("s"in Z)return new Date(Z.s*1e3+("L"in Z?Z.L:0));if(ae&&!("Z"in Z)&&(Z.Z=0),"p"in Z&&(Z.H=Z.H%12+Z.p*12),Z.m===void 0&&(Z.m="q"in Z?Z.q:0),"V"in Z){if(Z.V<1||Z.V>53)return null;"w"in Z||(Z.w=1),"Z"in Z?(be=TC($h(Z.y,0,1)),Pe=be.getUTCDay(),be=Pe>4||Pe===0?ab.ceil(be):ab(be),be=bw.offset(be,(Z.V-1)*7),Z.y=be.getUTCFullYear(),Z.m=be.getUTCMonth(),Z.d=be.getUTCDate()+(Z.w+6)%7):(be=kC($h(Z.y,0,1)),Pe=be.getDay(),be=Pe>4||Pe===0?ib.ceil(be):ib(be),be=cg.offset(be,(Z.V-1)*7),Z.y=be.getFullYear(),Z.m=be.getMonth(),Z.d=be.getDate()+(Z.w+6)%7)}else("W"in Z||"U"in Z)&&("w"in Z||(Z.w="u"in Z?Z.u%7:"W"in Z?1:0),Pe="Z"in Z?TC($h(Z.y,0,1)).getUTCDay():kC($h(Z.y,0,1)).getDay(),Z.m=0,Z.d="W"in Z?(Z.w+6)%7+Z.W*7-(Pe+5)%7:Z.w+Z.U*7-(Pe+6)%7);return"Z"in Z?(Z.H+=Z.Z/100|0,Z.M+=Z.Z%100,TC(Z)):kC(Z)}}function T(J,ae,le,Z){for(var $e=0,be=ae.length,Pe=le.length,Ne,je;$e<be;){if(Z>=Pe)return-1;if(Ne=ae.charCodeAt($e++),Ne===37){if(Ne=ae.charAt($e++),je=w[Ne in jM?ae.charAt($e++):Ne],!je||(Z=je(J,le,Z))<0)return-1}else if(Ne!=le.charCodeAt(Z++))return-1}return Z}function I(J,ae,le){var Z=c.exec(ae.slice(le));return Z?(J.p=u.get(Z[0].toLowerCase()),le+Z[0].length):-1}function E(J,ae,le){var Z=h.exec(ae.slice(le));return Z?(J.w=p.get(Z[0].toLowerCase()),le+Z[0].length):-1}function N(J,ae,le){var Z=d.exec(ae.slice(le));return Z?(J.w=f.get(Z[0].toLowerCase()),le+Z[0].length):-1}function A(J,ae,le){var Z=y.exec(ae.slice(le));return Z?(J.m=v.get(Z[0].toLowerCase()),le+Z[0].length):-1}function R(J,ae,le){var Z=m.exec(ae.slice(le));return Z?(J.m=g.get(Z[0].toLowerCase()),le+Z[0].length):-1}function P(J,ae,le){return T(J,e,ae,le)}function F(J,ae,le){return T(J,n,ae,le)}function _(J,ae,le){return T(J,r,ae,le)}function L(J){return i[J.getDay()]}function O(J){return s[J.getDay()]}function D(J){return l[J.getMonth()]}function B(J){return a[J.getMonth()]}function V(J){return o[+(J.getHours()>=12)]}function G(J){return 1+~~(J.getMonth()/3)}function Q(J){return i[J.getUTCDay()]}function re(J){return s[J.getUTCDay()]}function ie(J){return l[J.getUTCMonth()]}function ce(J){return a[J.getUTCMonth()]}function se(J){return o[+(J.getUTCHours()>=12)]}function fe(J){return 1+~~(J.getUTCMonth()/3)}return{format:function(J){var ae=C(J+="",x);return ae.toString=function(){return J},ae},parse:function(J){var ae=$(J+="",!1);return ae.toString=function(){return J},ae},utcFormat:function(J){var ae=C(J+="",b);return ae.toString=function(){return J},ae},utcParse:function(J){var ae=$(J+="",!0);return ae.toString=function(){return J},ae}}}var jM={"-":"",_:" ",0:"0"},Fn=/^\s*\d+/,S$e=/^%/,C$e=/[\\^$*+?|[\]().{}]/g;function ut(t,e,n){var r=t<0?"-":"",o=(r?-t:t)+"",s=o.length;return r+(s<n?new Array(n-s+1).join(e)+o:o)}function $$e(t){return t.replace(C$e,"\\$&")}function kh(t){return new RegExp("^(?:"+t.map($$e).join("|")+")","i")}function Th(t){return new Map(t.map((e,n)=>[e.toLowerCase(),n]))}function k$e(t,e,n){var r=Fn.exec(e.slice(n,n+1));return r?(t.w=+r[0],n+r[0].length):-1}function T$e(t,e,n){var r=Fn.exec(e.slice(n,n+1));return r?(t.u=+r[0],n+r[0].length):-1}function I$e(t,e,n){var r=Fn.exec(e.slice(n,n+2));return r?(t.U=+r[0],n+r[0].length):-1}function E$e(t,e,n){var r=Fn.exec(e.slice(n,n+2));return r?(t.V=+r[0],n+r[0].length):-1}function N$e(t,e,n){var r=Fn.exec(e.slice(n,n+2));return r?(t.W=+r[0],n+r[0].length):-1}function BM(t,e,n){var r=Fn.exec(e.slice(n,n+4));return r?(t.y=+r[0],n+r[0].length):-1}function zM(t,e,n){var r=Fn.exec(e.slice(n,n+2));return r?(t.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function A$e(t,e,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(n,n+6));return r?(t.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function O$e(t,e,n){var r=Fn.exec(e.slice(n,n+1));return r?(t.q=r[0]*3-3,n+r[0].length):-1}function P$e(t,e,n){var r=Fn.exec(e.slice(n,n+2));return r?(t.m=r[0]-1,n+r[0].length):-1}function WM(t,e,n){var r=Fn.exec(e.slice(n,n+2));return r?(t.d=+r[0],n+r[0].length):-1}function R$e(t,e,n){var r=Fn.exec(e.slice(n,n+3));return r?(t.m=0,t.d=+r[0],n+r[0].length):-1}function VM(t,e,n){var r=Fn.exec(e.slice(n,n+2));return r?(t.H=+r[0],n+r[0].length):-1}function _$e(t,e,n){var r=Fn.exec(e.slice(n,n+2));return r?(t.M=+r[0],n+r[0].length):-1}function D$e(t,e,n){var r=Fn.exec(e.slice(n,n+2));return r?(t.S=+r[0],n+r[0].length):-1}function M$e(t,e,n){var r=Fn.exec(e.slice(n,n+3));return r?(t.L=+r[0],n+r[0].length):-1}function F$e(t,e,n){var r=Fn.exec(e.slice(n,n+6));return r?(t.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function L$e(t,e,n){var r=S$e.exec(e.slice(n,n+1));return r?n+r[0].length:-1}function j$e(t,e,n){var r=Fn.exec(e.slice(n));return r?(t.Q=+r[0],n+r[0].length):-1}function B$e(t,e,n){var r=Fn.exec(e.slice(n));return r?(t.s=+r[0],n+r[0].length):-1}function UM(t,e){return ut(t.getDate(),e,2)}function z$e(t,e){return ut(t.getHours(),e,2)}function W$e(t,e){return ut(t.getHours()%12||12,e,2)}function V$e(t,e){return ut(1+cg.count(Zi(t),t),e,3)}function NH(t,e){return ut(t.getMilliseconds(),e,3)}function U$e(t,e){return NH(t,e)+"000"}function G$e(t,e){return ut(t.getMonth()+1,e,2)}function H$e(t,e){return ut(t.getMinutes(),e,2)}function K$e(t,e){return ut(t.getSeconds(),e,2)}function q$e(t){var e=t.getDay();return e===0?7:e}function X$e(t,e){return ut(ww.count(Zi(t)-1,t),e,2)}function AH(t){var e=t.getDay();return e>=4||e===0?Kd(t):Kd.ceil(t)}function Y$e(t,e){return t=AH(t),ut(Kd.count(Zi(t),t)+(Zi(t).getDay()===4),e,2)}function Q$e(t){return t.getDay()}function Z$e(t,e){return ut(ib.count(Zi(t)-1,t),e,2)}function J$e(t,e){return ut(t.getFullYear()%100,e,2)}function eke(t,e){return t=AH(t),ut(t.getFullYear()%100,e,2)}function tke(t,e){return ut(t.getFullYear()%1e4,e,4)}function nke(t,e){var n=t.getDay();return t=n>=4||n===0?Kd(t):Kd.ceil(t),ut(t.getFullYear()%1e4,e,4)}function rke(t){var e=t.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+ut(e/60|0,"0",2)+ut(e%60,"0",2)}function GM(t,e){return ut(t.getUTCDate(),e,2)}function oke(t,e){return ut(t.getUTCHours(),e,2)}function ske(t,e){return ut(t.getUTCHours()%12||12,e,2)}function ike(t,e){return ut(1+bw.count(Ji(t),t),e,3)}function OH(t,e){return ut(t.getUTCMilliseconds(),e,3)}function ake(t,e){return OH(t,e)+"000"}function lke(t,e){return ut(t.getUTCMonth()+1,e,2)}function cke(t,e){return ut(t.getUTCMinutes(),e,2)}function uke(t,e){return ut(t.getUTCSeconds(),e,2)}function dke(t){var e=t.getUTCDay();return e===0?7:e}function fke(t,e){return ut(Sw.count(Ji(t)-1,t),e,2)}function PH(t){var e=t.getUTCDay();return e>=4||e===0?qd(t):qd.ceil(t)}function hke(t,e){return t=PH(t),ut(qd.count(Ji(t),t)+(Ji(t).getUTCDay()===4),e,2)}function pke(t){return t.getUTCDay()}function mke(t,e){return ut(ab.count(Ji(t)-1,t),e,2)}function gke(t,e){return ut(t.getUTCFullYear()%100,e,2)}function yke(t,e){return t=PH(t),ut(t.getUTCFullYear()%100,e,2)}function vke(t,e){return ut(t.getUTCFullYear()%1e4,e,4)}function xke(t,e){var n=t.getUTCDay();return t=n>=4||n===0?qd(t):qd.ceil(t),ut(t.getUTCFullYear()%1e4,e,4)}function bke(){return"+0000"}function HM(){return"%"}function KM(t){return+t}function qM(t){return Math.floor(+t/1e3)}var Iu,RH,_H;wke({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function wke(t){return Iu=w$e(t),RH=Iu.format,Iu.parse,_H=Iu.utcFormat,Iu.utcParse,Iu}function Ske(t){return new Date(t)}function Cke(t){return t instanceof Date?+t:+new Date(+t)}function m2(t,e,n,r,o,s,i,a,l,c){var u=t2(),d=u.invert,f=u.domain,h=c(".%L"),p=c(":%S"),m=c("%I:%M"),g=c("%I %p"),y=c("%a %d"),v=c("%b %d"),x=c("%B"),b=c("%Y");function w(C){return(l(C)<C?h:a(C)<C?p:i(C)<C?m:s(C)<C?g:r(C)<C?o(C)<C?y:v:n(C)<C?x:b)(C)}return u.invert=function(C){return new Date(d(C))},u.domain=function(C){return arguments.length?f(Array.from(C,Cke)):f().map(Ske)},u.ticks=function(C){var $=f();return t($[0],$[$.length-1],C??10)},u.tickFormat=function(C,$){return $==null?w:c($)},u.nice=function(C){var $=f();return(!C||typeof C.range!="function")&&(C=e($[0],$[$.length-1],C??10)),C?f(bH($,C)):u},u.copy=function(){return lg(u,m2(t,e,n,r,o,s,i,a,l,c))},u}function $ke(){return Zo.apply(m2(x$e,b$e,Zi,h2,ww,cg,d2,c2,rc,RH).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function kke(){return Zo.apply(m2(y$e,v$e,Ji,p2,Sw,bw,f2,u2,rc,_H).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function Cw(){var t=0,e=1,n,r,o,s,i=Ir,a=!1,l;function c(d){return d==null||isNaN(d=+d)?l:i(o===0?.5:(d=(s(d)-n)*o,a?Math.max(0,Math.min(1,d)):d))}c.domain=function(d){return arguments.length?([t,e]=d,n=s(t=+t),r=s(e=+e),o=n===r?0:1/(r-n),c):[t,e]},c.clamp=function(d){return arguments.length?(a=!!d,c):a},c.interpolator=function(d){return arguments.length?(i=d,c):i};function u(d){return function(f){var h,p;return arguments.length?([h,p]=f,i=d(h,p),c):[i(0),i(1)]}}return c.range=u(zf),c.rangeRound=u(e2),c.unknown=function(d){return arguments.length?(l=d,c):l},function(d){return s=d,n=d(t),r=d(e),o=n===r?0:1/(r-n),c}}function Tl(t,e){return e.domain(t.domain()).interpolator(t.interpolator()).clamp(t.clamp()).unknown(t.unknown())}function DH(){var t=kl(Cw()(Ir));return t.copy=function(){return Tl(t,DH())},la.apply(t,arguments)}function MH(){var t=o2(Cw()).domain([1,10]);return t.copy=function(){return Tl(t,MH()).base(t.base())},la.apply(t,arguments)}function FH(){var t=s2(Cw());return t.copy=function(){return Tl(t,FH()).constant(t.constant())},la.apply(t,arguments)}function g2(){var t=i2(Cw());return t.copy=function(){return Tl(t,g2()).exponent(t.exponent())},la.apply(t,arguments)}function Tke(){return g2.apply(null,arguments).exponent(.5)}function LH(){var t=[],e=Ir;function n(r){if(r!=null&&!isNaN(r=+r))return e((ig(t,r,1)-1)/(t.length-1))}return n.domain=function(r){if(!arguments.length)return t.slice();t=[];for(let o of r)o!=null&&!isNaN(o=+o)&&t.push(o);return t.sort(el),n},n.interpolator=function(r){return arguments.length?(e=r,n):e},n.range=function(){return t.map((r,o)=>e(o/(t.length-1)))},n.quantiles=function(r){return Array.from({length:r+1},(o,s)=>fCe(t,s/r))},n.copy=function(){return LH(e).domain(t)},la.apply(n,arguments)}function $w(){var t=0,e=.5,n=1,r=1,o,s,i,a,l,c=Ir,u,d=!1,f;function h(m){return isNaN(m=+m)?f:(m=.5+((m=+u(m))-s)*(r*m<r*s?a:l),c(d?Math.max(0,Math.min(1,m)):m))}h.domain=function(m){return arguments.length?([t,e,n]=m,o=u(t=+t),s=u(e=+e),i=u(n=+n),a=o===s?0:.5/(s-o),l=s===i?0:.5/(i-s),r=s<o?-1:1,h):[t,e,n]},h.clamp=function(m){return arguments.length?(d=!!m,h):d},h.interpolator=function(m){return arguments.length?(c=m,h):c};function p(m){return function(g){var y,v,x;return arguments.length?([y,v,x]=g,c=LCe(m,[y,v,x]),h):[c(0),c(.5),c(1)]}}return h.range=p(zf),h.rangeRound=p(e2),h.unknown=function(m){return arguments.length?(f=m,h):f},function(m){return u=m,o=m(t),s=m(e),i=m(n),a=o===s?0:.5/(s-o),l=s===i?0:.5/(i-s),r=s<o?-1:1,h}}function jH(){var t=kl($w()(Ir));return t.copy=function(){return Tl(t,jH())},la.apply(t,arguments)}function BH(){var t=o2($w()).domain([.1,1,10]);return t.copy=function(){return Tl(t,BH()).base(t.base())},la.apply(t,arguments)}function zH(){var t=s2($w());return t.copy=function(){return Tl(t,zH()).constant(t.constant())},la.apply(t,arguments)}function y2(){var t=i2($w());return t.copy=function(){return Tl(t,y2()).exponent(t.exponent())},la.apply(t,arguments)}function Ike(){return y2.apply(null,arguments).exponent(.5)}const XM=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:Hp,scaleDiverging:jH,scaleDivergingLog:BH,scaleDivergingPow:y2,scaleDivergingSqrt:Ike,scaleDivergingSymlog:zH,scaleIdentity:xH,scaleImplicit:lT,scaleLinear:ob,scaleLog:wH,scaleOrdinal:QN,scalePoint:cp,scalePow:a2,scaleQuantile:$H,scaleQuantize:kH,scaleRadial:CH,scaleSequential:DH,scaleSequentialLog:MH,scaleSequentialPow:g2,scaleSequentialQuantile:LH,scaleSequentialSqrt:Tke,scaleSequentialSymlog:FH,scaleSqrt:a$e,scaleSymlog:SH,scaleThreshold:TH,scaleTime:$ke,scaleUtc:kke,tickFormat:vH},Symbol.toStringTag,{value:"Module"}));var Eke=Pf;function Nke(t,e,n){for(var r=-1,o=t.length;++r<o;){var s=t[r],i=e(s);if(i!=null&&(a===void 0?i===i&&!Eke(i):n(i,a)))var a=i,l=s}return l}var WH=Nke;function Ake(t,e){return t>e}var Oke=Ake,Pke=WH,Rke=Oke,_ke=Bf;function Dke(t){return t&&t.length?Pke(t,_ke,Rke):void 0}var Mke=Dke;const Ba=ft(Mke);function Fke(t,e){return t<e}var Lke=Fke,jke=WH,Bke=Lke,zke=Bf;function Wke(t){return t&&t.length?jke(t,zke,Bke):void 0}var Vke=Wke;const kw=ft(Vke);var Uke=ON,Gke=$l,Hke=YG,Kke=eo;function qke(t,e){var n=Kke(t)?Uke:Hke;return n(t,Gke(e))}var Xke=qke,Yke=qG,Qke=Xke;function Zke(t,e){return Yke(Qke(t,e),1)}var Jke=Zke;const eTe=ft(Jke);var tTe=HN;function nTe(t,e){return tTe(t,e)}var rTe=nTe;const Qp=ft(rTe);var Wf=1e9,oTe={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},x2,Bt=!0,Ko="[DecimalError] ",bc=Ko+"Invalid argument: ",v2=Ko+"Exponent out of range: ",Vf=Math.floor,Kl=Math.pow,sTe=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,ao,Pn=1e7,_t=7,VH=9007199254740991,lb=Vf(VH/_t),Se={};Se.absoluteValue=Se.abs=function(){var t=new this.constructor(this);return t.s&&(t.s=1),t};Se.comparedTo=Se.cmp=function(t){var e,n,r,o,s=this;if(t=new s.constructor(t),s.s!==t.s)return s.s||-t.s;if(s.e!==t.e)return s.e>t.e^s.s<0?1:-1;for(r=s.d.length,o=t.d.length,e=0,n=r<o?r:o;e<n;++e)if(s.d[e]!==t.d[e])return s.d[e]>t.d[e]^s.s<0?1:-1;return r===o?0:r>o^s.s<0?1:-1};Se.decimalPlaces=Se.dp=function(){var t=this,e=t.d.length-1,n=(e-t.e)*_t;if(e=t.d[e],e)for(;e%10==0;e/=10)n--;return n<0?0:n};Se.dividedBy=Se.div=function(t){return Wi(this,new this.constructor(t))};Se.dividedToIntegerBy=Se.idiv=function(t){var e=this,n=e.constructor;return $t(Wi(e,new n(t),0,1),n.precision)};Se.equals=Se.eq=function(t){return!this.cmp(t)};Se.exponent=function(){return gn(this)};Se.greaterThan=Se.gt=function(t){return this.cmp(t)>0};Se.greaterThanOrEqualTo=Se.gte=function(t){return this.cmp(t)>=0};Se.isInteger=Se.isint=function(){return this.e>this.d.length-2};Se.isNegative=Se.isneg=function(){return this.s<0};Se.isPositive=Se.ispos=function(){return this.s>0};Se.isZero=function(){return this.s===0};Se.lessThan=Se.lt=function(t){return this.cmp(t)<0};Se.lessThanOrEqualTo=Se.lte=function(t){return this.cmp(t)<1};Se.logarithm=Se.log=function(t){var e,n=this,r=n.constructor,o=r.precision,s=o+5;if(t===void 0)t=new r(10);else if(t=new r(t),t.s<1||t.eq(ao))throw Error(Ko+"NaN");if(n.s<1)throw Error(Ko+(n.s?"NaN":"-Infinity"));return n.eq(ao)?new r(0):(Bt=!1,e=Wi(Zp(n,s),Zp(t,s),s),Bt=!0,$t(e,o))};Se.minus=Se.sub=function(t){var e=this;return t=new e.constructor(t),e.s==t.s?HH(e,t):UH(e,(t.s=-t.s,t))};Se.modulo=Se.mod=function(t){var e,n=this,r=n.constructor,o=r.precision;if(t=new r(t),!t.s)throw Error(Ko+"NaN");return n.s?(Bt=!1,e=Wi(n,t,0,1).times(t),Bt=!0,n.minus(e)):$t(new r(n),o)};Se.naturalExponential=Se.exp=function(){return GH(this)};Se.naturalLogarithm=Se.ln=function(){return Zp(this)};Se.negated=Se.neg=function(){var t=new this.constructor(this);return t.s=-t.s||0,t};Se.plus=Se.add=function(t){var e=this;return t=new e.constructor(t),e.s==t.s?UH(e,t):HH(e,(t.s=-t.s,t))};Se.precision=Se.sd=function(t){var e,n,r,o=this;if(t!==void 0&&t!==!!t&&t!==1&&t!==0)throw Error(bc+t);if(e=gn(o)+1,r=o.d.length-1,n=r*_t+1,r=o.d[r],r){for(;r%10==0;r/=10)n--;for(r=o.d[0];r>=10;r/=10)n++}return t&&e>n?e:n};Se.squareRoot=Se.sqrt=function(){var t,e,n,r,o,s,i,a=this,l=a.constructor;if(a.s<1){if(!a.s)return new l(0);throw Error(Ko+"NaN")}for(t=gn(a),Bt=!1,o=Math.sqrt(+a),o==0||o==1/0?(e=Js(a.d),(e.length+t)%2==0&&(e+="0"),o=Math.sqrt(e),t=Vf((t+1)/2)-(t<0||t%2),o==1/0?e="5e"+t:(e=o.toExponential(),e=e.slice(0,e.indexOf("e")+1)+t),r=new l(e)):r=new l(o.toString()),n=l.precision,o=i=n+3;;)if(s=r,r=s.plus(Wi(a,s,i+2)).times(.5),Js(s.d).slice(0,i)===(e=Js(r.d)).slice(0,i)){if(e=e.slice(i-3,i+1),o==i&&e=="4999"){if($t(s,n+1,0),s.times(s).eq(a)){r=s;break}}else if(e!="9999")break;i+=4}return Bt=!0,$t(r,n)};Se.times=Se.mul=function(t){var e,n,r,o,s,i,a,l,c,u=this,d=u.constructor,f=u.d,h=(t=new d(t)).d;if(!u.s||!t.s)return new d(0);for(t.s*=u.s,n=u.e+t.e,l=f.length,c=h.length,l<c&&(s=f,f=h,h=s,i=l,l=c,c=i),s=[],i=l+c,r=i;r--;)s.push(0);for(r=c;--r>=0;){for(e=0,o=l+r;o>r;)a=s[o]+h[r]*f[o-r-1]+e,s[o--]=a%Pn|0,e=a/Pn|0;s[o]=(s[o]+e)%Pn|0}for(;!s[--i];)s.pop();return e?++n:s.shift(),t.d=s,t.e=n,Bt?$t(t,d.precision):t};Se.toDecimalPlaces=Se.todp=function(t,e){var n=this,r=n.constructor;return n=new r(n),t===void 0?n:(hi(t,0,Wf),e===void 0?e=r.rounding:hi(e,0,8),$t(n,t+gn(n)+1,e))};Se.toExponential=function(t,e){var n,r=this,o=r.constructor;return t===void 0?n=Mc(r,!0):(hi(t,0,Wf),e===void 0?e=o.rounding:hi(e,0,8),r=$t(new o(r),t+1,e),n=Mc(r,!0,t+1)),n};Se.toFixed=function(t,e){var n,r,o=this,s=o.constructor;return t===void 0?Mc(o):(hi(t,0,Wf),e===void 0?e=s.rounding:hi(e,0,8),r=$t(new s(o),t+gn(o)+1,e),n=Mc(r.abs(),!1,t+gn(r)+1),o.isneg()&&!o.isZero()?"-"+n:n)};Se.toInteger=Se.toint=function(){var t=this,e=t.constructor;return $t(new e(t),gn(t)+1,e.rounding)};Se.toNumber=function(){return+this};Se.toPower=Se.pow=function(t){var e,n,r,o,s,i,a=this,l=a.constructor,c=12,u=+(t=new l(t));if(!t.s)return new l(ao);if(a=new l(a),!a.s){if(t.s<1)throw Error(Ko+"Infinity");return a}if(a.eq(ao))return a;if(r=l.precision,t.eq(ao))return $t(a,r);if(e=t.e,n=t.d.length-1,i=e>=n,s=a.s,i){if((n=u<0?-u:u)<=VH){for(o=new l(ao),e=Math.ceil(r/_t+4),Bt=!1;n%2&&(o=o.times(a),QM(o.d,e)),n=Vf(n/2),n!==0;)a=a.times(a),QM(a.d,e);return Bt=!0,t.s<0?new l(ao).div(o):$t(o,r)}}else if(s<0)throw Error(Ko+"NaN");return s=s<0&&t.d[Math.max(e,n)]&1?-1:1,a.s=1,Bt=!1,o=t.times(Zp(a,r+c)),Bt=!0,o=GH(o),o.s=s,o};Se.toPrecision=function(t,e){var n,r,o=this,s=o.constructor;return t===void 0?(n=gn(o),r=Mc(o,n<=s.toExpNeg||n>=s.toExpPos)):(hi(t,1,Wf),e===void 0?e=s.rounding:hi(e,0,8),o=$t(new s(o),t,e),n=gn(o),r=Mc(o,t<=n||n<=s.toExpNeg,t)),r};Se.toSignificantDigits=Se.tosd=function(t,e){var n=this,r=n.constructor;return t===void 0?(t=r.precision,e=r.rounding):(hi(t,1,Wf),e===void 0?e=r.rounding:hi(e,0,8)),$t(new r(n),t,e)};Se.toString=Se.valueOf=Se.val=Se.toJSON=Se[Symbol.for("nodejs.util.inspect.custom")]=function(){var t=this,e=gn(t),n=t.constructor;return Mc(t,e<=n.toExpNeg||e>=n.toExpPos)};function UH(t,e){var n,r,o,s,i,a,l,c,u=t.constructor,d=u.precision;if(!t.s||!e.s)return e.s||(e=new u(t)),Bt?$t(e,d):e;if(l=t.d,c=e.d,i=t.e,o=e.e,l=l.slice(),s=i-o,s){for(s<0?(r=l,s=-s,a=c.length):(r=c,o=i,a=l.length),i=Math.ceil(d/_t),a=i>a?i+1:a+1,s>a&&(s=a,r.length=1),r.reverse();s--;)r.push(0);r.reverse()}for(a=l.length,s=c.length,a-s<0&&(s=a,r=c,c=l,l=r),n=0;s;)n=(l[--s]=l[s]+c[s]+n)/Pn|0,l[s]%=Pn;for(n&&(l.unshift(n),++o),a=l.length;l[--a]==0;)l.pop();return e.d=l,e.e=o,Bt?$t(e,d):e}function hi(t,e,n){if(t!==~~t||t<e||t>n)throw Error(bc+t)}function Js(t){var e,n,r,o=t.length-1,s="",i=t[0];if(o>0){for(s+=i,e=1;e<o;e++)r=t[e]+"",n=_t-r.length,n&&(s+=ka(n)),s+=r;i=t[e],r=i+"",n=_t-r.length,n&&(s+=ka(n))}else if(i===0)return"0";for(;i%10===0;)i/=10;return s+i}var Wi=function(){function t(r,o){var s,i=0,a=r.length;for(r=r.slice();a--;)s=r[a]*o+i,r[a]=s%Pn|0,i=s/Pn|0;return i&&r.unshift(i),r}function e(r,o,s,i){var a,l;if(s!=i)l=s>i?1:-1;else for(a=l=0;a<s;a++)if(r[a]!=o[a]){l=r[a]>o[a]?1:-1;break}return l}function n(r,o,s){for(var i=0;s--;)r[s]-=i,i=r[s]<o[s]?1:0,r[s]=i*Pn+r[s]-o[s];for(;!r[0]&&r.length>1;)r.shift()}return function(r,o,s,i){var a,l,c,u,d,f,h,p,m,g,y,v,x,b,w,C,$,T,I=r.constructor,E=r.s==o.s?1:-1,N=r.d,A=o.d;if(!r.s)return new I(r);if(!o.s)throw Error(Ko+"Division by zero");for(l=r.e-o.e,$=A.length,w=N.length,h=new I(E),p=h.d=[],c=0;A[c]==(N[c]||0);)++c;if(A[c]>(N[c]||0)&&--l,s==null?v=s=I.precision:i?v=s+(gn(r)-gn(o))+1:v=s,v<0)return new I(0);if(v=v/_t+2|0,c=0,$==1)for(u=0,A=A[0],v++;(c<w||u)&&v--;c++)x=u*Pn+(N[c]||0),p[c]=x/A|0,u=x%A|0;else{for(u=Pn/(A[0]+1)|0,u>1&&(A=t(A,u),N=t(N,u),$=A.length,w=N.length),b=$,m=N.slice(0,$),g=m.length;g<$;)m[g++]=0;T=A.slice(),T.unshift(0),C=A[0],A[1]>=Pn/2&&++C;do u=0,a=e(A,m,$,g),a<0?(y=m[0],$!=g&&(y=y*Pn+(m[1]||0)),u=y/C|0,u>1?(u>=Pn&&(u=Pn-1),d=t(A,u),f=d.length,g=m.length,a=e(d,m,f,g),a==1&&(u--,n(d,$<f?T:A,f))):(u==0&&(a=u=1),d=A.slice()),f=d.length,f<g&&d.unshift(0),n(m,d,g),a==-1&&(g=m.length,a=e(A,m,$,g),a<1&&(u++,n(m,$<g?T:A,g))),g=m.length):a===0&&(u++,m=[0]),p[c++]=u,a&&m[0]?m[g++]=N[b]||0:(m=[N[b]],g=1);while((b++<w||m[0]!==void 0)&&v--)}return p[0]||p.shift(),h.e=l,$t(h,i?s+gn(h)+1:s)}}();function GH(t,e){var n,r,o,s,i,a,l=0,c=0,u=t.constructor,d=u.precision;if(gn(t)>16)throw Error(v2+gn(t));if(!t.s)return new u(ao);for(e==null?(Bt=!1,a=d):a=e,i=new u(.03125);t.abs().gte(.1);)t=t.times(i),c+=5;for(r=Math.log(Kl(2,c))/Math.LN10*2+5|0,a+=r,n=o=s=new u(ao),u.precision=a;;){if(o=$t(o.times(t),a),n=n.times(++l),i=s.plus(Wi(o,n,a)),Js(i.d).slice(0,a)===Js(s.d).slice(0,a)){for(;c--;)s=$t(s.times(s),a);return u.precision=d,e==null?(Bt=!0,$t(s,d)):s}s=i}}function gn(t){for(var e=t.e*_t,n=t.d[0];n>=10;n/=10)e++;return e}function IC(t,e,n){if(e>t.LN10.sd())throw Bt=!0,n&&(t.precision=n),Error(Ko+"LN10 precision limit exceeded");return $t(new t(t.LN10),e)}function ka(t){for(var e="";t--;)e+="0";return e}function Zp(t,e){var n,r,o,s,i,a,l,c,u,d=1,f=10,h=t,p=h.d,m=h.constructor,g=m.precision;if(h.s<1)throw Error(Ko+(h.s?"NaN":"-Infinity"));if(h.eq(ao))return new m(0);if(e==null?(Bt=!1,c=g):c=e,h.eq(10))return e==null&&(Bt=!0),IC(m,c);if(c+=f,m.precision=c,n=Js(p),r=n.charAt(0),s=gn(h),Math.abs(s)<15e14){for(;r<7&&r!=1||r==1&&n.charAt(1)>3;)h=h.times(t),n=Js(h.d),r=n.charAt(0),d++;s=gn(h),r>1?(h=new m("0."+n),s++):h=new m(r+"."+n.slice(1))}else return l=IC(m,c+2,g).times(s+""),h=Zp(new m(r+"."+n.slice(1)),c-f).plus(l),m.precision=g,e==null?(Bt=!0,$t(h,g)):h;for(a=i=h=Wi(h.minus(ao),h.plus(ao),c),u=$t(h.times(h),c),o=3;;){if(i=$t(i.times(u),c),l=a.plus(Wi(i,new m(o),c)),Js(l.d).slice(0,c)===Js(a.d).slice(0,c))return a=a.times(2),s!==0&&(a=a.plus(IC(m,c+2,g).times(s+""))),a=Wi(a,new m(d),c),m.precision=g,e==null?(Bt=!0,$t(a,g)):a;a=l,o+=2}}function YM(t,e){var n,r,o;for((n=e.indexOf("."))>-1&&(e=e.replace(".","")),(r=e.search(/e/i))>0?(n<0&&(n=r),n+=+e.slice(r+1),e=e.substring(0,r)):n<0&&(n=e.length),r=0;e.charCodeAt(r)===48;)++r;for(o=e.length;e.charCodeAt(o-1)===48;)--o;if(e=e.slice(r,o),e){if(o-=r,n=n-r-1,t.e=Vf(n/_t),t.d=[],r=(n+1)%_t,n<0&&(r+=_t),r<o){for(r&&t.d.push(+e.slice(0,r)),o-=_t;r<o;)t.d.push(+e.slice(r,r+=_t));e=e.slice(r),r=_t-e.length}else r-=o;for(;r--;)e+="0";if(t.d.push(+e),Bt&&(t.e>lb||t.e<-lb))throw Error(v2+n)}else t.s=0,t.e=0,t.d=[0];return t}function $t(t,e,n){var r,o,s,i,a,l,c,u,d=t.d;for(i=1,s=d[0];s>=10;s/=10)i++;if(r=e-i,r<0)r+=_t,o=e,c=d[u=0];else{if(u=Math.ceil((r+1)/_t),s=d.length,u>=s)return t;for(c=s=d[u],i=1;s>=10;s/=10)i++;r%=_t,o=r-_t+i}if(n!==void 0&&(s=Kl(10,i-o-1),a=c/s%10|0,l=e<0||d[u+1]!==void 0||c%s,l=n<4?(a||l)&&(n==0||n==(t.s<0?3:2)):a>5||a==5&&(n==4||l||n==6&&(r>0?o>0?c/Kl(10,i-o):0:d[u-1])%10&1||n==(t.s<0?8:7))),e<1||!d[0])return l?(s=gn(t),d.length=1,e=e-s-1,d[0]=Kl(10,(_t-e%_t)%_t),t.e=Vf(-e/_t)||0):(d.length=1,d[0]=t.e=t.s=0),t;if(r==0?(d.length=u,s=1,u--):(d.length=u+1,s=Kl(10,_t-r),d[u]=o>0?(c/Kl(10,i-o)%Kl(10,o)|0)*s:0),l)for(;;)if(u==0){(d[0]+=s)==Pn&&(d[0]=1,++t.e);break}else{if(d[u]+=s,d[u]!=Pn)break;d[u--]=0,s=1}for(r=d.length;d[--r]===0;)d.pop();if(Bt&&(t.e>lb||t.e<-lb))throw Error(v2+gn(t));return t}function HH(t,e){var n,r,o,s,i,a,l,c,u,d,f=t.constructor,h=f.precision;if(!t.s||!e.s)return e.s?e.s=-e.s:e=new f(t),Bt?$t(e,h):e;if(l=t.d,d=e.d,r=e.e,c=t.e,l=l.slice(),i=c-r,i){for(u=i<0,u?(n=l,i=-i,a=d.length):(n=d,r=c,a=l.length),o=Math.max(Math.ceil(h/_t),a)+2,i>o&&(i=o,n.length=1),n.reverse(),o=i;o--;)n.push(0);n.reverse()}else{for(o=l.length,a=d.length,u=o<a,u&&(a=o),o=0;o<a;o++)if(l[o]!=d[o]){u=l[o]<d[o];break}i=0}for(u&&(n=l,l=d,d=n,e.s=-e.s),a=l.length,o=d.length-a;o>0;--o)l[a++]=0;for(o=d.length;o>i;){if(l[--o]<d[o]){for(s=o;s&&l[--s]===0;)l[s]=Pn-1;--l[s],l[o]+=Pn}l[o]-=d[o]}for(;l[--a]===0;)l.pop();for(;l[0]===0;l.shift())--r;return l[0]?(e.d=l,e.e=r,Bt?$t(e,h):e):new f(0)}function Mc(t,e,n){var r,o=gn(t),s=Js(t.d),i=s.length;return e?(n&&(r=n-i)>0?s=s.charAt(0)+"."+s.slice(1)+ka(r):i>1&&(s=s.charAt(0)+"."+s.slice(1)),s=s+(o<0?"e":"e+")+o):o<0?(s="0."+ka(-o-1)+s,n&&(r=n-i)>0&&(s+=ka(r))):o>=i?(s+=ka(o+1-i),n&&(r=n-o-1)>0&&(s=s+"."+ka(r))):((r=o+1)<i&&(s=s.slice(0,r)+"."+s.slice(r)),n&&(r=n-i)>0&&(o+1===i&&(s+="."),s+=ka(r))),t.s<0?"-"+s:s}function QM(t,e){if(t.length>e)return t.length=e,!0}function KH(t){var e,n,r;function o(s){var i=this;if(!(i instanceof o))return new o(s);if(i.constructor=o,s instanceof o){i.s=s.s,i.e=s.e,i.d=(s=s.d)?s.slice():s;return}if(typeof s=="number"){if(s*0!==0)throw Error(bc+s);if(s>0)i.s=1;else if(s<0)s=-s,i.s=-1;else{i.s=0,i.e=0,i.d=[0];return}if(s===~~s&&s<1e7){i.e=0,i.d=[s];return}return YM(i,s.toString())}else if(typeof s!="string")throw Error(bc+s);if(s.charCodeAt(0)===45?(s=s.slice(1),i.s=-1):i.s=1,sTe.test(s))YM(i,s);else throw Error(bc+s)}if(o.prototype=Se,o.ROUND_UP=0,o.ROUND_DOWN=1,o.ROUND_CEIL=2,o.ROUND_FLOOR=3,o.ROUND_HALF_UP=4,o.ROUND_HALF_DOWN=5,o.ROUND_HALF_EVEN=6,o.ROUND_HALF_CEIL=7,o.ROUND_HALF_FLOOR=8,o.clone=KH,o.config=o.set=iTe,t===void 0&&(t={}),t)for(r=["precision","rounding","toExpNeg","toExpPos","LN10"],e=0;e<r.length;)t.hasOwnProperty(n=r[e++])||(t[n]=this[n]);return o.config(t),o}function iTe(t){if(!t||typeof t!="object")throw Error(Ko+"Object expected");var e,n,r,o=["precision",1,Wf,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(e=0;e<o.length;e+=3)if((r=t[n=o[e]])!==void 0)if(Vf(r)===r&&r>=o[e+1]&&r<=o[e+2])this[n]=r;else throw Error(bc+n+": "+r);if((r=t[n="LN10"])!==void 0)if(r==Math.LN10)this[n]=new this(r);else throw Error(bc+n+": "+r);return this}var x2=KH(oTe);ao=new x2(1);const bt=x2;function aTe(t){return dTe(t)||uTe(t)||cTe(t)||lTe()}function lTe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function cTe(t,e){if(t){if(typeof t=="string")return fT(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return fT(t,e)}}function uTe(t){if(typeof Symbol<"u"&&Symbol.iterator in Object(t))return Array.from(t)}function dTe(t){if(Array.isArray(t))return fT(t)}function fT(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var fTe=function(e){return e},qH={"@@functional/placeholder":!0},XH=function(e){return e===qH},ZM=function(e){return function n(){return arguments.length===0||arguments.length===1&&XH(arguments.length<=0?void 0:arguments[0])?n:e.apply(void 0,arguments)}},hTe=function t(e,n){return e===1?n:ZM(function(){for(var r=arguments.length,o=new Array(r),s=0;s<r;s++)o[s]=arguments[s];var i=o.filter(function(a){return a!==qH}).length;return i>=e?n.apply(void 0,o):t(e-i,ZM(function(){for(var a=arguments.length,l=new Array(a),c=0;c<a;c++)l[c]=arguments[c];var u=o.map(function(d){return XH(d)?l.shift():d});return n.apply(void 0,aTe(u).concat(l))}))})},Tw=function(e){return hTe(e.length,e)},hT=function(e,n){for(var r=[],o=e;o<n;++o)r[o-e]=o;return r},pTe=Tw(function(t,e){return Array.isArray(e)?e.map(t):Object.keys(e).map(function(n){return e[n]}).map(t)}),mTe=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];if(!n.length)return fTe;var o=n.reverse(),s=o[0],i=o.slice(1);return function(){return i.reduce(function(a,l){return l(a)},s.apply(void 0,arguments))}},pT=function(e){return Array.isArray(e)?e.reverse():e.split("").reverse.join("")},YH=function(e){var n=null,r=null;return function(){for(var o=arguments.length,s=new Array(o),i=0;i<o;i++)s[i]=arguments[i];return n&&s.every(function(a,l){return a===n[l]})||(n=s,r=e.apply(void 0,s)),r}};function gTe(t){var e;return t===0?e=1:e=Math.floor(new bt(t).abs().log(10).toNumber())+1,e}function yTe(t,e,n){for(var r=new bt(t),o=0,s=[];r.lt(e)&&o<1e5;)s.push(r.toNumber()),r=r.add(n),o++;return s}var vTe=Tw(function(t,e,n){var r=+t,o=+e;return r+n*(o-r)}),xTe=Tw(function(t,e,n){var r=e-+t;return r=r||1/0,(n-t)/r}),bTe=Tw(function(t,e,n){var r=e-+t;return r=r||1/0,Math.max(0,Math.min(1,(n-t)/r))});const Iw={rangeStep:yTe,getDigitCount:gTe,interpolateNumber:vTe,uninterpolateNumber:xTe,uninterpolateTruncation:bTe};function mT(t){return CTe(t)||STe(t)||QH(t)||wTe()}function wTe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function STe(t){if(typeof Symbol<"u"&&Symbol.iterator in Object(t))return Array.from(t)}function CTe(t){if(Array.isArray(t))return gT(t)}function Jp(t,e){return TTe(t)||kTe(t,e)||QH(t,e)||$Te()}function $Te(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function QH(t,e){if(t){if(typeof t=="string")return gT(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return gT(t,e)}}function gT(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function kTe(t,e){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(t)))){var n=[],r=!0,o=!1,s=void 0;try{for(var i=t[Symbol.iterator](),a;!(r=(a=i.next()).done)&&(n.push(a.value),!(e&&n.length===e));r=!0);}catch(l){o=!0,s=l}finally{try{!r&&i.return!=null&&i.return()}finally{if(o)throw s}}return n}}function TTe(t){if(Array.isArray(t))return t}function ZH(t){var e=Jp(t,2),n=e[0],r=e[1],o=n,s=r;return n>r&&(o=r,s=n),[o,s]}function JH(t,e,n){if(t.lte(0))return new bt(0);var r=Iw.getDigitCount(t.toNumber()),o=new bt(10).pow(r),s=t.div(o),i=r!==1?.05:.1,a=new bt(Math.ceil(s.div(i).toNumber())).add(n).mul(i),l=a.mul(o);return e?l:new bt(Math.ceil(l))}function ITe(t,e,n){var r=1,o=new bt(t);if(!o.isint()&&n){var s=Math.abs(t);s<1?(r=new bt(10).pow(Iw.getDigitCount(t)-1),o=new bt(Math.floor(o.div(r).toNumber())).mul(r)):s>1&&(o=new bt(Math.floor(t)))}else t===0?o=new bt(Math.floor((e-1)/2)):n||(o=new bt(Math.floor(t)));var i=Math.floor((e-1)/2),a=mTe(pTe(function(l){return o.add(new bt(l-i).mul(r)).toNumber()}),hT);return a(0,e)}function e5(t,e,n,r){var o=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((e-t)/(n-1)))return{step:new bt(0),tickMin:new bt(0),tickMax:new bt(0)};var s=JH(new bt(e).sub(t).div(n-1),r,o),i;t<=0&&e>=0?i=new bt(0):(i=new bt(t).add(e).div(2),i=i.sub(new bt(i).mod(s)));var a=Math.ceil(i.sub(t).div(s).toNumber()),l=Math.ceil(new bt(e).sub(i).div(s).toNumber()),c=a+l+1;return c>n?e5(t,e,n,r,o+1):(c<n&&(l=e>0?l+(n-c):l,a=e>0?a:a+(n-c)),{step:s,tickMin:i.sub(new bt(a).mul(s)),tickMax:i.add(new bt(l).mul(s))})}function ETe(t){var e=Jp(t,2),n=e[0],r=e[1],o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,i=Math.max(o,2),a=ZH([n,r]),l=Jp(a,2),c=l[0],u=l[1];if(c===-1/0||u===1/0){var d=u===1/0?[c].concat(mT(hT(0,o-1).map(function(){return 1/0}))):[].concat(mT(hT(0,o-1).map(function(){return-1/0})),[u]);return n>r?pT(d):d}if(c===u)return ITe(c,o,s);var f=e5(c,u,i,s),h=f.step,p=f.tickMin,m=f.tickMax,g=Iw.rangeStep(p,m.add(new bt(.1).mul(h)),h);return n>r?pT(g):g}function NTe(t,e){var n=Jp(t,2),r=n[0],o=n[1],s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,i=ZH([r,o]),a=Jp(i,2),l=a[0],c=a[1];if(l===-1/0||c===1/0)return[r,o];if(l===c)return[l];var u=Math.max(e,2),d=JH(new bt(c).sub(l).div(u-1),s,0),f=[].concat(mT(Iw.rangeStep(new bt(l),new bt(c).sub(new bt(.99).mul(d)),d)),[c]);return r>o?pT(f):f}var ATe=YH(ETe),OTe=YH(NTe),PTe="Invariant failed";function Fc(t,e){throw new Error(PTe)}var RTe=["offset","layout","width","dataKey","data","dataPointFormatter","xAxis","yAxis"];function Xd(t){"@babel/helpers - typeof";return Xd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Xd(t)}function cb(){return cb=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},cb.apply(this,arguments)}function _Te(t,e){return LTe(t)||FTe(t,e)||MTe(t,e)||DTe()}function DTe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function MTe(t,e){if(t){if(typeof t=="string")return JM(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return JM(t,e)}}function JM(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function FTe(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,o,s,i,a=[],l=!0,c=!1;try{if(s=(n=n.call(t)).next,e!==0)for(;!(l=(r=s.call(n)).done)&&(a.push(r.value),a.length!==e);l=!0);}catch(u){c=!0,o=u}finally{try{if(!l&&n.return!=null&&(i=n.return(),Object(i)!==i))return}finally{if(c)throw o}}return a}}function LTe(t){if(Array.isArray(t))return t}function jTe(t,e){if(t==null)return{};var n=BTe(t,e),r,o;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(o=0;o<s.length;o++)r=s[o],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function BTe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function zTe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function WTe(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r5(r.key),r)}}function VTe(t,e,n){return e&&WTe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function UTe(t,e,n){return e=ub(e),GTe(t,t5()?Reflect.construct(e,n||[],ub(t).constructor):e.apply(t,n))}function GTe(t,e){if(e&&(Xd(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return HTe(t)}function HTe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function t5(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(t5=function(){return!!t})()}function ub(t){return ub=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},ub(t)}function KTe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&yT(t,e)}function yT(t,e){return yT=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,o){return r.__proto__=o,r},yT(t,e)}function n5(t,e,n){return e=r5(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function r5(t){var e=qTe(t,"string");return Xd(e)=="symbol"?e:e+""}function qTe(t,e){if(Xd(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Xd(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Ew=function(t){function e(){return zTe(this,e),UTe(this,e,arguments)}return KTe(e,t),VTe(e,[{key:"render",value:function(){var r=this.props,o=r.offset,s=r.layout,i=r.width,a=r.dataKey,l=r.data,c=r.dataPointFormatter,u=r.xAxis,d=r.yAxis,f=jTe(r,RTe),h=Ye(f,!1);this.props.direction==="x"&&u.type!=="number"&&Fc();var p=l.map(function(m){var g=c(m,a),y=g.x,v=g.y,x=g.value,b=g.errorVal;if(!b)return null;var w=[],C,$;if(Array.isArray(b)){var T=_Te(b,2);C=T[0],$=T[1]}else C=$=b;if(s==="vertical"){var I=u.scale,E=v+o,N=E+i,A=E-i,R=I(x-C),P=I(x+$);w.push({x1:P,y1:N,x2:P,y2:A}),w.push({x1:R,y1:E,x2:P,y2:E}),w.push({x1:R,y1:N,x2:R,y2:A})}else if(s==="horizontal"){var F=d.scale,_=y+o,L=_-i,O=_+i,D=F(x-C),B=F(x+$);w.push({x1:L,y1:B,x2:O,y2:B}),w.push({x1:_,y1:D,x2:_,y2:B}),w.push({x1:L,y1:D,x2:O,y2:D})}return z.createElement(Gt,cb({className:"recharts-errorBar",key:"bar-".concat(w.map(function(V){return"".concat(V.x1,"-").concat(V.x2,"-").concat(V.y1,"-").concat(V.y2)}))},h),w.map(function(V){return z.createElement("line",cb({},V,{key:"line-".concat(V.x1,"-").concat(V.x2,"-").concat(V.y1,"-").concat(V.y2)}))}))});return z.createElement(Gt,{className:"recharts-errorBars"},p)}}])}(z.Component);n5(Ew,"defaultProps",{stroke:"black",strokeWidth:1.5,width:5,offset:0,layout:"horizontal"});n5(Ew,"displayName","ErrorBar");function em(t){"@babel/helpers - typeof";return em=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},em(t)}function eF(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),n.push.apply(n,r)}return n}function jl(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?eF(Object(n),!0).forEach(function(r){XTe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):eF(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function XTe(t,e,n){return e=YTe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function YTe(t){var e=QTe(t,"string");return em(e)=="symbol"?e:e+""}function QTe(t,e){if(em(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(em(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var o5=function(e){var n=e.children,r=e.formattedGraphicalItems,o=e.legendWidth,s=e.legendContent,i=so(n,cd);if(!i)return null;var a=cd.defaultProps,l=a!==void 0?jl(jl({},a),i.props):{},c;return i.props&&i.props.payload?c=i.props&&i.props.payload:s==="children"?c=(r||[]).reduce(function(u,d){var f=d.item,h=d.props,p=h.sectors||h.data||[];return u.concat(p.map(function(m){return{type:i.props.iconType||f.props.legendType,value:m.name,color:m.fill,payload:m}}))},[]):c=(r||[]).map(function(u){var d=u.item,f=d.type.defaultProps,h=f!==void 0?jl(jl({},f),d.props):{},p=h.dataKey,m=h.name,g=h.legendType,y=h.hide;return{inactive:y,dataKey:p,type:l.iconType||g||"square",color:b2(d),value:m||p,payload:h}}),jl(jl(jl({},l),cd.getWithHeight(i,o)),{},{payload:c,item:i})};function tm(t){"@babel/helpers - typeof";return tm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},tm(t)}function tF(t){return tIe(t)||eIe(t)||JTe(t)||ZTe()}function ZTe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function JTe(t,e){if(t){if(typeof t=="string")return vT(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return vT(t,e)}}function eIe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function tIe(t){if(Array.isArray(t))return vT(t)}function vT(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function nF(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),n.push.apply(n,r)}return n}function Yt(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?nF(Object(n),!0).forEach(function(r){dd(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):nF(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function dd(t,e,n){return e=nIe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function nIe(t){var e=rIe(t,"string");return tm(e)=="symbol"?e:e+""}function rIe(t,e){if(tm(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(tm(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function go(t,e,n){return tt(t)||tt(e)?n:In(e)?Vo(t,e,n):Ue(e)?e(t):n}function up(t,e,n,r){var o=eTe(t,function(a){return go(a,e)});if(n==="number"){var s=o.filter(function(a){return pe(a)||parseFloat(a)});return s.length?[kw(s),Ba(s)]:[1/0,-1/0]}var i=r?o.filter(function(a){return!tt(a)}):o;return i.map(function(a){return In(a)||a instanceof Date?a:""})}var oIe=function(e){var n,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],o=arguments.length>2?arguments[2]:void 0,s=arguments.length>3?arguments[3]:void 0,i=-1,a=(n=r==null?void 0:r.length)!==null&&n!==void 0?n:0;if(a<=1)return 0;if(s&&s.axisType==="angleAxis"&&Math.abs(Math.abs(s.range[1]-s.range[0])-360)<=1e-6)for(var l=s.range,c=0;c<a;c++){var u=c>0?o[c-1].coordinate:o[a-1].coordinate,d=o[c].coordinate,f=c>=a-1?o[0].coordinate:o[c+1].coordinate,h=void 0;if(ws(d-u)!==ws(f-d)){var p=[];if(ws(f-d)===ws(l[1]-l[0])){h=f;var m=d+l[1]-l[0];p[0]=Math.min(m,(m+u)/2),p[1]=Math.max(m,(m+u)/2)}else{h=u;var g=f+l[1]-l[0];p[0]=Math.min(d,(g+d)/2),p[1]=Math.max(d,(g+d)/2)}var y=[Math.min(d,(h+d)/2),Math.max(d,(h+d)/2)];if(e>y[0]&&e<=y[1]||e>=p[0]&&e<=p[1]){i=o[c].index;break}}else{var v=Math.min(u,f),x=Math.max(u,f);if(e>(v+d)/2&&e<=(x+d)/2){i=o[c].index;break}}}else for(var b=0;b<a;b++)if(b===0&&e<=(r[b].coordinate+r[b+1].coordinate)/2||b>0&&b<a-1&&e>(r[b].coordinate+r[b-1].coordinate)/2&&e<=(r[b].coordinate+r[b+1].coordinate)/2||b===a-1&&e>(r[b].coordinate+r[b-1].coordinate)/2){i=r[b].index;break}return i},b2=function(e){var n,r=e,o=r.type.displayName,s=(n=e.type)!==null&&n!==void 0&&n.defaultProps?Yt(Yt({},e.type.defaultProps),e.props):e.props,i=s.stroke,a=s.fill,l;switch(o){case"Line":l=i;break;case"Area":case"Radar":l=i&&i!=="none"?i:a;break;default:l=a;break}return l},sIe=function(e){var n=e.barSize,r=e.totalSize,o=e.stackGroups,s=o===void 0?{}:o;if(!s)return{};for(var i={},a=Object.keys(s),l=0,c=a.length;l<c;l++)for(var u=s[a[l]].stackGroups,d=Object.keys(u),f=0,h=d.length;f<h;f++){var p=u[d[f]],m=p.items,g=p.cateAxisId,y=m.filter(function($){return ji($.type).indexOf("Bar")>=0});if(y&&y.length){var v=y[0].type.defaultProps,x=v!==void 0?Yt(Yt({},v),y[0].props):y[0].props,b=x.barSize,w=x[g];i[w]||(i[w]=[]);var C=tt(b)?n:b;i[w].push({item:y[0],stackList:y.slice(1),barSize:tt(C)?void 0:Dc(C,r,0)})}}return i},iIe=function(e){var n=e.barGap,r=e.barCategoryGap,o=e.bandSize,s=e.sizeList,i=s===void 0?[]:s,a=e.maxBarSize,l=i.length;if(l<1)return null;var c=Dc(n,o,0,!0),u,d=[];if(i[0].barSize===+i[0].barSize){var f=!1,h=o/l,p=i.reduce(function(b,w){return b+w.barSize||0},0);p+=(l-1)*c,p>=o&&(p-=(l-1)*c,c=0),p>=o&&h>0&&(f=!0,h*=.9,p=l*h);var m=(o-p)/2>>0,g={offset:m-c,size:0};u=i.reduce(function(b,w){var C={item:w.item,position:{offset:g.offset+g.size+c,size:f?h:w.barSize}},$=[].concat(tF(b),[C]);return g=$[$.length-1].position,w.stackList&&w.stackList.length&&w.stackList.forEach(function(T){$.push({item:T,position:g})}),$},d)}else{var y=Dc(r,o,0,!0);o-2*y-(l-1)*c<=0&&(c=0);var v=(o-2*y-(l-1)*c)/l;v>1&&(v>>=0);var x=a===+a?Math.min(v,a):v;u=i.reduce(function(b,w,C){var $=[].concat(tF(b),[{item:w.item,position:{offset:y+(v+c)*C+(v-x)/2,size:x}}]);return w.stackList&&w.stackList.length&&w.stackList.forEach(function(T){$.push({item:T,position:$[$.length-1].position})}),$},d)}return u},aIe=function(e,n,r,o){var s=r.children,i=r.width,a=r.margin,l=i-(a.left||0)-(a.right||0),c=o5({children:s,legendWidth:l});if(c){var u=o||{},d=u.width,f=u.height,h=c.align,p=c.verticalAlign,m=c.layout;if((m==="vertical"||m==="horizontal"&&p==="middle")&&h!=="center"&&pe(e[h]))return Yt(Yt({},e),{},dd({},h,e[h]+(d||0)));if((m==="horizontal"||m==="vertical"&&h==="center")&&p!=="middle"&&pe(e[p]))return Yt(Yt({},e),{},dd({},p,e[p]+(f||0)))}return e},lIe=function(e,n,r){return tt(n)?!0:e==="horizontal"?n==="yAxis":e==="vertical"||r==="x"?n==="xAxis":r==="y"?n==="yAxis":!0},s5=function(e,n,r,o,s){var i=n.props.children,a=ks(i,Ew).filter(function(c){return lIe(o,s,c.props.direction)});if(a&&a.length){var l=a.map(function(c){return c.props.dataKey});return e.reduce(function(c,u){var d=go(u,r);if(tt(d))return c;var f=Array.isArray(d)?[kw(d),Ba(d)]:[d,d],h=l.reduce(function(p,m){var g=go(u,m,0),y=f[0]-Math.abs(Array.isArray(g)?g[0]:g),v=f[1]+Math.abs(Array.isArray(g)?g[1]:g);return[Math.min(y,p[0]),Math.max(v,p[1])]},[1/0,-1/0]);return[Math.min(h[0],c[0]),Math.max(h[1],c[1])]},[1/0,-1/0])}return null},cIe=function(e,n,r,o,s){var i=n.map(function(a){return s5(e,a,r,s,o)}).filter(function(a){return!tt(a)});return i&&i.length?i.reduce(function(a,l){return[Math.min(a[0],l[0]),Math.max(a[1],l[1])]},[1/0,-1/0]):null},i5=function(e,n,r,o,s){var i=n.map(function(l){var c=l.props.dataKey;return r==="number"&&c&&s5(e,l,c,o)||up(e,c,r,s)});if(r==="number")return i.reduce(function(l,c){return[Math.min(l[0],c[0]),Math.max(l[1],c[1])]},[1/0,-1/0]);var a={};return i.reduce(function(l,c){for(var u=0,d=c.length;u<d;u++)a[c[u]]||(a[c[u]]=!0,l.push(c[u]));return l},[])},a5=function(e,n){return e==="horizontal"&&n==="xAxis"||e==="vertical"&&n==="yAxis"||e==="centric"&&n==="angleAxis"||e==="radial"&&n==="radiusAxis"},l5=function(e,n,r,o){if(o)return e.map(function(l){return l.coordinate});var s,i,a=e.map(function(l){return l.coordinate===n&&(s=!0),l.coordinate===r&&(i=!0),l.coordinate});return s||a.push(n),i||a.push(r),a},_i=function(e,n,r){if(!e)return null;var o=e.scale,s=e.duplicateDomain,i=e.type,a=e.range,l=e.realScaleType==="scaleBand"?o.bandwidth()/2:2,c=(n||r)&&i==="category"&&o.bandwidth?o.bandwidth()/l:0;if(c=e.axisType==="angleAxis"&&(a==null?void 0:a.length)>=2?ws(a[0]-a[1])*2*c:c,n&&(e.ticks||e.niceTicks)){var u=(e.ticks||e.niceTicks).map(function(d){var f=s?s.indexOf(d):d;return{coordinate:o(f)+c,value:d,offset:c}});return u.filter(function(d){return!Ff(d.coordinate)})}return e.isCategorical&&e.categoricalDomain?e.categoricalDomain.map(function(d,f){return{coordinate:o(d)+c,value:d,index:f,offset:c}}):o.ticks&&!r?o.ticks(e.tickCount).map(function(d){return{coordinate:o(d)+c,value:d,offset:c}}):o.domain().map(function(d,f){return{coordinate:o(d)+c,value:s?s[d]:d,index:f,offset:c}})},EC=new WeakMap,fv=function(e,n){if(typeof n!="function")return e;EC.has(e)||EC.set(e,new WeakMap);var r=EC.get(e);if(r.has(n))return r.get(n);var o=function(){e.apply(void 0,arguments),n.apply(void 0,arguments)};return r.set(n,o),o},uIe=function(e,n,r){var o=e.scale,s=e.type,i=e.layout,a=e.axisType;if(o==="auto")return i==="radial"&&a==="radiusAxis"?{scale:Hp(),realScaleType:"band"}:i==="radial"&&a==="angleAxis"?{scale:ob(),realScaleType:"linear"}:s==="category"&&n&&(n.indexOf("LineChart")>=0||n.indexOf("AreaChart")>=0||n.indexOf("ComposedChart")>=0&&!r)?{scale:cp(),realScaleType:"point"}:s==="category"?{scale:Hp(),realScaleType:"band"}:{scale:ob(),realScaleType:"linear"};if(rg(o)){var l="scale".concat(fw(o));return{scale:(XM[l]||cp)(),realScaleType:XM[l]?l:"point"}}return Ue(o)?{scale:o}:{scale:cp(),realScaleType:"point"}},rF=1e-4,dIe=function(e){var n=e.domain();if(!(!n||n.length<=2)){var r=n.length,o=e.range(),s=Math.min(o[0],o[1])-rF,i=Math.max(o[0],o[1])+rF,a=e(n[0]),l=e(n[r-1]);(a<s||a>i||l<s||l>i)&&e.domain([n[0],n[r-1]])}},fIe=function(e,n){if(!e)return null;for(var r=0,o=e.length;r<o;r++)if(e[r].item===n)return e[r].position;return null},hIe=function(e,n){if(!n||n.length!==2||!pe(n[0])||!pe(n[1]))return e;var r=Math.min(n[0],n[1]),o=Math.max(n[0],n[1]),s=[e[0],e[1]];return(!pe(e[0])||e[0]<r)&&(s[0]=r),(!pe(e[1])||e[1]>o)&&(s[1]=o),s[0]>o&&(s[0]=o),s[1]<r&&(s[1]=r),s},pIe=function(e){var n=e.length;if(!(n<=0))for(var r=0,o=e[0].length;r<o;++r)for(var s=0,i=0,a=0;a<n;++a){var l=Ff(e[a][r][1])?e[a][r][0]:e[a][r][1];l>=0?(e[a][r][0]=s,e[a][r][1]=s+l,s=e[a][r][1]):(e[a][r][0]=i,e[a][r][1]=i+l,i=e[a][r][1])}},mIe=function(e){var n=e.length;if(!(n<=0))for(var r=0,o=e[0].length;r<o;++r)for(var s=0,i=0;i<n;++i){var a=Ff(e[i][r][1])?e[i][r][0]:e[i][r][1];a>=0?(e[i][r][0]=s,e[i][r][1]=s+a,s=e[i][r][1]):(e[i][r][0]=0,e[i][r][1]=0)}},gIe={sign:pIe,expand:Ome,none:zd,silhouette:Pme,wiggle:Rme,positive:mIe},yIe=function(e,n,r){var o=n.map(function(a){return a.props.dataKey}),s=gIe[r],i=Ame().keys(o).value(function(a,l){return+go(a,l,0)}).order(Vk).offset(s);return i(e)},vIe=function(e,n,r,o,s,i){if(!e)return null;var a=i?n.reverse():n,l={},c=a.reduce(function(d,f){var h,p=(h=f.type)!==null&&h!==void 0&&h.defaultProps?Yt(Yt({},f.type.defaultProps),f.props):f.props,m=p.stackId,g=p.hide;if(g)return d;var y=p[r],v=d[y]||{hasStack:!1,stackGroups:{}};if(In(m)){var x=v.stackGroups[m]||{numericAxisId:r,cateAxisId:o,items:[]};x.items.push(f),v.hasStack=!0,v.stackGroups[m]=x}else v.stackGroups[og("_stackId_")]={numericAxisId:r,cateAxisId:o,items:[f]};return Yt(Yt({},d),{},dd({},y,v))},l),u={};return Object.keys(c).reduce(function(d,f){var h=c[f];if(h.hasStack){var p={};h.stackGroups=Object.keys(h.stackGroups).reduce(function(m,g){var y=h.stackGroups[g];return Yt(Yt({},m),{},dd({},g,{numericAxisId:r,cateAxisId:o,items:y.items,stackedData:yIe(e,y.items,s)}))},p)}return Yt(Yt({},d),{},dd({},f,h))},u)},xIe=function(e,n){var r=n.realScaleType,o=n.type,s=n.tickCount,i=n.originalDomain,a=n.allowDecimals,l=r||n.scale;if(l!=="auto"&&l!=="linear")return null;if(s&&o==="number"&&i&&(i[0]==="auto"||i[1]==="auto")){var c=e.domain();if(!c.length)return null;var u=ATe(c,s,a);return e.domain([kw(u),Ba(u)]),{niceTicks:u}}if(s&&o==="number"){var d=e.domain(),f=OTe(d,s,a);return{niceTicks:f}}return null};function oF(t){var e=t.axis,n=t.ticks,r=t.bandSize,o=t.entry,s=t.index,i=t.dataKey;if(e.type==="category"){if(!e.allowDuplicatedCategory&&e.dataKey&&!tt(o[e.dataKey])){var a=Dx(n,"value",o[e.dataKey]);if(a)return a.coordinate+r/2}return n[s]?n[s].coordinate+r/2:null}var l=go(o,tt(i)?e.dataKey:i);return tt(l)?null:e.scale(l)}var sF=function(e){var n=e.axis,r=e.ticks,o=e.offset,s=e.bandSize,i=e.entry,a=e.index;if(n.type==="category")return r[a]?r[a].coordinate+o:null;var l=go(i,n.dataKey,n.domain[a]);return tt(l)?null:n.scale(l)-s/2+o},bIe=function(e){var n=e.numericAxis,r=n.scale.domain();if(n.type==="number"){var o=Math.min(r[0],r[1]),s=Math.max(r[0],r[1]);return o<=0&&s>=0?0:s<0?s:o}return r[0]},wIe=function(e,n){var r,o=(r=e.type)!==null&&r!==void 0&&r.defaultProps?Yt(Yt({},e.type.defaultProps),e.props):e.props,s=o.stackId;if(In(s)){var i=n[s];if(i){var a=i.items.indexOf(e);return a>=0?i.stackedData[a]:null}}return null},SIe=function(e){return e.reduce(function(n,r){return[kw(r.concat([n[0]]).filter(pe)),Ba(r.concat([n[1]]).filter(pe))]},[1/0,-1/0])},c5=function(e,n,r){return Object.keys(e).reduce(function(o,s){var i=e[s],a=i.stackedData,l=a.reduce(function(c,u){var d=SIe(u.slice(n,r+1));return[Math.min(c[0],d[0]),Math.max(c[1],d[1])]},[1/0,-1/0]);return[Math.min(l[0],o[0]),Math.max(l[1],o[1])]},[1/0,-1/0]).map(function(o){return o===1/0||o===-1/0?0:o})},iF=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,aF=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,xT=function(e,n,r){if(Ue(e))return e(n,r);if(!Array.isArray(e))return n;var o=[];if(pe(e[0]))o[0]=r?e[0]:Math.min(e[0],n[0]);else if(iF.test(e[0])){var s=+iF.exec(e[0])[1];o[0]=n[0]-s}else Ue(e[0])?o[0]=e[0](n[0]):o[0]=n[0];if(pe(e[1]))o[1]=r?e[1]:Math.max(e[1],n[1]);else if(aF.test(e[1])){var i=+aF.exec(e[1])[1];o[1]=n[1]+i}else Ue(e[1])?o[1]=e[1](n[1]):o[1]=n[1];return o},db=function(e,n,r){if(e&&e.scale&&e.scale.bandwidth){var o=e.scale.bandwidth();if(!r||o>0)return o}if(e&&n&&n.length>=2){for(var s=qN(n,function(d){return d.coordinate}),i=1/0,a=1,l=s.length;a<l;a++){var c=s[a],u=s[a-1];i=Math.min((c.coordinate||0)-(u.coordinate||0),i)}return i===1/0?0:i}return r?void 0:0},lF=function(e,n,r){return!e||!e.length||Qp(e,Vo(r,"type.defaultProps.domain"))?n:e},u5=function(e,n){var r=e.type.defaultProps?Yt(Yt({},e.type.defaultProps),e.props):e.props,o=r.dataKey,s=r.name,i=r.unit,a=r.formatter,l=r.tooltipType,c=r.chartType,u=r.hide;return Yt(Yt({},Ye(e,!1)),{},{dataKey:o,unit:i,formatter:a,name:s||o,color:b2(e),value:go(n,o),type:l,payload:n,chartType:c,hide:u})};function nm(t){"@babel/helpers - typeof";return nm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},nm(t)}function cF(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),n.push.apply(n,r)}return n}function uF(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?cF(Object(n),!0).forEach(function(r){CIe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):cF(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function CIe(t,e,n){return e=$Ie(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function $Ie(t){var e=kIe(t,"string");return nm(e)=="symbol"?e:e+""}function kIe(t,e){if(nm(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(nm(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var fb=Math.PI/180,TIe=function(e){return e*180/Math.PI},Un=function(e,n,r,o){return{x:e+Math.cos(-fb*o)*r,y:n+Math.sin(-fb*o)*r}},IIe=function(e,n){var r=e.x,o=e.y,s=n.x,i=n.y;return Math.sqrt(Math.pow(r-s,2)+Math.pow(o-i,2))},EIe=function(e,n){var r=e.x,o=e.y,s=n.cx,i=n.cy,a=IIe({x:r,y:o},{x:s,y:i});if(a<=0)return{radius:a};var l=(r-s)/a,c=Math.acos(l);return o>i&&(c=2*Math.PI-c),{radius:a,angle:TIe(c),angleInRadian:c}},NIe=function(e){var n=e.startAngle,r=e.endAngle,o=Math.floor(n/360),s=Math.floor(r/360),i=Math.min(o,s);return{startAngle:n-i*360,endAngle:r-i*360}},AIe=function(e,n){var r=n.startAngle,o=n.endAngle,s=Math.floor(r/360),i=Math.floor(o/360),a=Math.min(s,i);return e+a*360},dF=function(e,n){var r=e.x,o=e.y,s=EIe({x:r,y:o},n),i=s.radius,a=s.angle,l=n.innerRadius,c=n.outerRadius;if(i<l||i>c)return!1;if(i===0)return!0;var u=NIe(n),d=u.startAngle,f=u.endAngle,h=a,p;if(d<=f){for(;h>f;)h-=360;for(;h<d;)h+=360;p=h>=d&&h<=f}else{for(;h>d;)h-=360;for(;h<f;)h+=360;p=h>=f&&h<=d}return p?uF(uF({},n),{},{radius:i,angle:AIe(h,n)}):null};function rm(t){"@babel/helpers - typeof";return rm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},rm(t)}var OIe=["offset"];function PIe(t){return MIe(t)||DIe(t)||_Ie(t)||RIe()}function RIe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _Ie(t,e){if(t){if(typeof t=="string")return bT(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return bT(t,e)}}function DIe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function MIe(t){if(Array.isArray(t))return bT(t)}function bT(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function FIe(t,e){if(t==null)return{};var n=LIe(t,e),r,o;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(o=0;o<s.length;o++)r=s[o],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function LIe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function fF(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),n.push.apply(n,r)}return n}function Sn(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?fF(Object(n),!0).forEach(function(r){jIe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):fF(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function jIe(t,e,n){return e=BIe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function BIe(t){var e=zIe(t,"string");return rm(e)=="symbol"?e:e+""}function zIe(t,e){if(rm(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(rm(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function om(){return om=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},om.apply(this,arguments)}var WIe=function(e){var n=e.value,r=e.formatter,o=tt(e.children)?n:e.children;return Ue(r)?r(o):o},VIe=function(e,n){var r=ws(n-e),o=Math.min(Math.abs(n-e),360);return r*o},UIe=function(e,n,r){var o=e.position,s=e.viewBox,i=e.offset,a=e.className,l=s,c=l.cx,u=l.cy,d=l.innerRadius,f=l.outerRadius,h=l.startAngle,p=l.endAngle,m=l.clockWise,g=(d+f)/2,y=VIe(h,p),v=y>=0?1:-1,x,b;o==="insideStart"?(x=h+v*i,b=m):o==="insideEnd"?(x=p-v*i,b=!m):o==="end"&&(x=p+v*i,b=m),b=y<=0?b:!b;var w=Un(c,u,g,x),C=Un(c,u,g,x+(b?1:-1)*359),$="M".concat(w.x,",").concat(w.y,`
    A`).concat(g,",").concat(g,",0,1,").concat(b?0:1,`,
    `).concat(C.x,",").concat(C.y),T=tt(e.id)?og("recharts-radial-line-"):e.id;return z.createElement("text",om({},r,{dominantBaseline:"central",className:st("recharts-radial-bar-label",a)}),z.createElement("defs",null,z.createElement("path",{id:T,d:$})),z.createElement("textPath",{xlinkHref:"#".concat(T)},n))},GIe=function(e){var n=e.viewBox,r=e.offset,o=e.position,s=n,i=s.cx,a=s.cy,l=s.innerRadius,c=s.outerRadius,u=s.startAngle,d=s.endAngle,f=(u+d)/2;if(o==="outside"){var h=Un(i,a,c+r,f),p=h.x,m=h.y;return{x:p,y:m,textAnchor:p>=i?"start":"end",verticalAnchor:"middle"}}if(o==="center")return{x:i,y:a,textAnchor:"middle",verticalAnchor:"middle"};if(o==="centerTop")return{x:i,y:a,textAnchor:"middle",verticalAnchor:"start"};if(o==="centerBottom")return{x:i,y:a,textAnchor:"middle",verticalAnchor:"end"};var g=(l+c)/2,y=Un(i,a,g,f),v=y.x,x=y.y;return{x:v,y:x,textAnchor:"middle",verticalAnchor:"middle"}},HIe=function(e){var n=e.viewBox,r=e.parentViewBox,o=e.offset,s=e.position,i=n,a=i.x,l=i.y,c=i.width,u=i.height,d=u>=0?1:-1,f=d*o,h=d>0?"end":"start",p=d>0?"start":"end",m=c>=0?1:-1,g=m*o,y=m>0?"end":"start",v=m>0?"start":"end";if(s==="top"){var x={x:a+c/2,y:l-d*o,textAnchor:"middle",verticalAnchor:h};return Sn(Sn({},x),r?{height:Math.max(l-r.y,0),width:c}:{})}if(s==="bottom"){var b={x:a+c/2,y:l+u+f,textAnchor:"middle",verticalAnchor:p};return Sn(Sn({},b),r?{height:Math.max(r.y+r.height-(l+u),0),width:c}:{})}if(s==="left"){var w={x:a-g,y:l+u/2,textAnchor:y,verticalAnchor:"middle"};return Sn(Sn({},w),r?{width:Math.max(w.x-r.x,0),height:u}:{})}if(s==="right"){var C={x:a+c+g,y:l+u/2,textAnchor:v,verticalAnchor:"middle"};return Sn(Sn({},C),r?{width:Math.max(r.x+r.width-C.x,0),height:u}:{})}var $=r?{width:c,height:u}:{};return s==="insideLeft"?Sn({x:a+g,y:l+u/2,textAnchor:v,verticalAnchor:"middle"},$):s==="insideRight"?Sn({x:a+c-g,y:l+u/2,textAnchor:y,verticalAnchor:"middle"},$):s==="insideTop"?Sn({x:a+c/2,y:l+f,textAnchor:"middle",verticalAnchor:p},$):s==="insideBottom"?Sn({x:a+c/2,y:l+u-f,textAnchor:"middle",verticalAnchor:h},$):s==="insideTopLeft"?Sn({x:a+g,y:l+f,textAnchor:v,verticalAnchor:p},$):s==="insideTopRight"?Sn({x:a+c-g,y:l+f,textAnchor:y,verticalAnchor:p},$):s==="insideBottomLeft"?Sn({x:a+g,y:l+u-f,textAnchor:v,verticalAnchor:h},$):s==="insideBottomRight"?Sn({x:a+c-g,y:l+u-f,textAnchor:y,verticalAnchor:h},$):Rf(s)&&(pe(s.x)||tc(s.x))&&(pe(s.y)||tc(s.y))?Sn({x:a+Dc(s.x,c),y:l+Dc(s.y,u),textAnchor:"end",verticalAnchor:"end"},$):Sn({x:a+c/2,y:l+u/2,textAnchor:"middle",verticalAnchor:"middle"},$)},KIe=function(e){return"cx"in e&&pe(e.cx)};function lr(t){var e=t.offset,n=e===void 0?5:e,r=FIe(t,OIe),o=Sn({offset:n},r),s=o.viewBox,i=o.position,a=o.value,l=o.children,c=o.content,u=o.className,d=u===void 0?"":u,f=o.textBreakAll;if(!s||tt(a)&&tt(l)&&!k.isValidElement(c)&&!Ue(c))return null;if(k.isValidElement(c))return k.cloneElement(c,o);var h;if(Ue(c)){if(h=k.createElement(c,o),k.isValidElement(h))return h}else h=WIe(o);var p=KIe(s),m=Ye(o,!0);if(p&&(i==="insideStart"||i==="insideEnd"||i==="end"))return UIe(o,h,m);var g=p?GIe(o):HIe(o);return z.createElement(Qx,om({className:st("recharts-label",d)},m,g,{breakAll:f}),h)}lr.displayName="Label";var d5=function(e){var n=e.cx,r=e.cy,o=e.angle,s=e.startAngle,i=e.endAngle,a=e.r,l=e.radius,c=e.innerRadius,u=e.outerRadius,d=e.x,f=e.y,h=e.top,p=e.left,m=e.width,g=e.height,y=e.clockWise,v=e.labelViewBox;if(v)return v;if(pe(m)&&pe(g)){if(pe(d)&&pe(f))return{x:d,y:f,width:m,height:g};if(pe(h)&&pe(p))return{x:h,y:p,width:m,height:g}}return pe(d)&&pe(f)?{x:d,y:f,width:0,height:0}:pe(n)&&pe(r)?{cx:n,cy:r,startAngle:s||o||0,endAngle:i||o||0,innerRadius:c||0,outerRadius:u||l||a||0,clockWise:y}:e.viewBox?e.viewBox:{}},qIe=function(e,n){return e?e===!0?z.createElement(lr,{key:"label-implicit",viewBox:n}):In(e)?z.createElement(lr,{key:"label-implicit",viewBox:n,value:e}):k.isValidElement(e)?e.type===lr?k.cloneElement(e,{key:"label-implicit",viewBox:n}):z.createElement(lr,{key:"label-implicit",content:e,viewBox:n}):Ue(e)?z.createElement(lr,{key:"label-implicit",content:e,viewBox:n}):Rf(e)?z.createElement(lr,om({viewBox:n},e,{key:"label-implicit"})):null:null},XIe=function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!e||!e.children&&r&&!e.label)return null;var o=e.children,s=d5(e),i=ks(o,lr).map(function(l,c){return k.cloneElement(l,{viewBox:n||s,key:"label-".concat(c)})});if(!r)return i;var a=qIe(e.label,n||s);return[a].concat(PIe(i))};lr.parseViewBox=d5;lr.renderCallByParent=XIe;function YIe(t){var e=t==null?0:t.length;return e?t[e-1]:void 0}var QIe=YIe;const ZIe=ft(QIe);function sm(t){"@babel/helpers - typeof";return sm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},sm(t)}var JIe=["valueAccessor"],eEe=["data","dataKey","clockWise","id","textBreakAll"];function tEe(t){return sEe(t)||oEe(t)||rEe(t)||nEe()}function nEe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function rEe(t,e){if(t){if(typeof t=="string")return wT(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return wT(t,e)}}function oEe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function sEe(t){if(Array.isArray(t))return wT(t)}function wT(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function hb(){return hb=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},hb.apply(this,arguments)}function hF(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),n.push.apply(n,r)}return n}function pF(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?hF(Object(n),!0).forEach(function(r){iEe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):hF(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function iEe(t,e,n){return e=aEe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function aEe(t){var e=lEe(t,"string");return sm(e)=="symbol"?e:e+""}function lEe(t,e){if(sm(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(sm(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function mF(t,e){if(t==null)return{};var n=cEe(t,e),r,o;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(o=0;o<s.length;o++)r=s[o],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function cEe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}var uEe=function(e){return Array.isArray(e.value)?ZIe(e.value):e.value};function tl(t){var e=t.valueAccessor,n=e===void 0?uEe:e,r=mF(t,JIe),o=r.data,s=r.dataKey,i=r.clockWise,a=r.id,l=r.textBreakAll,c=mF(r,eEe);return!o||!o.length?null:z.createElement(Gt,{className:"recharts-label-list"},o.map(function(u,d){var f=tt(s)?n(u,d):go(u&&u.payload,s),h=tt(a)?{}:{id:"".concat(a,"-").concat(d)};return z.createElement(lr,hb({},Ye(u,!0),c,h,{parentViewBox:u.parentViewBox,value:f,textBreakAll:l,viewBox:lr.parseViewBox(tt(i)?u:pF(pF({},u),{},{clockWise:i})),key:"label-".concat(d),index:d}))}))}tl.displayName="LabelList";function dEe(t,e){return t?t===!0?z.createElement(tl,{key:"labelList-implicit",data:e}):z.isValidElement(t)||Ue(t)?z.createElement(tl,{key:"labelList-implicit",data:e,content:t}):Rf(t)?z.createElement(tl,hb({data:e},t,{key:"labelList-implicit"})):null:null}function fEe(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!t||!t.children&&n&&!t.label)return null;var r=t.children,o=ks(r,tl).map(function(i,a){return k.cloneElement(i,{data:e,key:"labelList-".concat(a)})});if(!n)return o;var s=dEe(t.label,e);return[s].concat(tEe(o))}tl.renderCallByParent=fEe;function im(t){"@babel/helpers - typeof";return im=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},im(t)}function ST(){return ST=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},ST.apply(this,arguments)}function gF(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),n.push.apply(n,r)}return n}function yF(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?gF(Object(n),!0).forEach(function(r){hEe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):gF(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function hEe(t,e,n){return e=pEe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function pEe(t){var e=mEe(t,"string");return im(e)=="symbol"?e:e+""}function mEe(t,e){if(im(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(im(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var gEe=function(e,n){var r=ws(n-e),o=Math.min(Math.abs(n-e),359.999);return r*o},hv=function(e){var n=e.cx,r=e.cy,o=e.radius,s=e.angle,i=e.sign,a=e.isExternal,l=e.cornerRadius,c=e.cornerIsExternal,u=l*(a?1:-1)+o,d=Math.asin(l/u)/fb,f=c?s:s+i*d,h=Un(n,r,u,f),p=Un(n,r,o,f),m=c?s-i*d:s,g=Un(n,r,u*Math.cos(d*fb),m);return{center:h,circleTangency:p,lineTangency:g,theta:d}},f5=function(e){var n=e.cx,r=e.cy,o=e.innerRadius,s=e.outerRadius,i=e.startAngle,a=e.endAngle,l=gEe(i,a),c=i+l,u=Un(n,r,s,i),d=Un(n,r,s,c),f="M ".concat(u.x,",").concat(u.y,`
    A `).concat(s,",").concat(s,`,0,
    `).concat(+(Math.abs(l)>180),",").concat(+(i>c),`,
    `).concat(d.x,",").concat(d.y,`
  `);if(o>0){var h=Un(n,r,o,i),p=Un(n,r,o,c);f+="L ".concat(p.x,",").concat(p.y,`
            A `).concat(o,",").concat(o,`,0,
            `).concat(+(Math.abs(l)>180),",").concat(+(i<=c),`,
            `).concat(h.x,",").concat(h.y," Z")}else f+="L ".concat(n,",").concat(r," Z");return f},yEe=function(e){var n=e.cx,r=e.cy,o=e.innerRadius,s=e.outerRadius,i=e.cornerRadius,a=e.forceCornerRadius,l=e.cornerIsExternal,c=e.startAngle,u=e.endAngle,d=ws(u-c),f=hv({cx:n,cy:r,radius:s,angle:c,sign:d,cornerRadius:i,cornerIsExternal:l}),h=f.circleTangency,p=f.lineTangency,m=f.theta,g=hv({cx:n,cy:r,radius:s,angle:u,sign:-d,cornerRadius:i,cornerIsExternal:l}),y=g.circleTangency,v=g.lineTangency,x=g.theta,b=l?Math.abs(c-u):Math.abs(c-u)-m-x;if(b<0)return a?"M ".concat(p.x,",").concat(p.y,`
        a`).concat(i,",").concat(i,",0,0,1,").concat(i*2,`,0
        a`).concat(i,",").concat(i,",0,0,1,").concat(-i*2,`,0
      `):f5({cx:n,cy:r,innerRadius:o,outerRadius:s,startAngle:c,endAngle:u});var w="M ".concat(p.x,",").concat(p.y,`
    A`).concat(i,",").concat(i,",0,0,").concat(+(d<0),",").concat(h.x,",").concat(h.y,`
    A`).concat(s,",").concat(s,",0,").concat(+(b>180),",").concat(+(d<0),",").concat(y.x,",").concat(y.y,`
    A`).concat(i,",").concat(i,",0,0,").concat(+(d<0),",").concat(v.x,",").concat(v.y,`
  `);if(o>0){var C=hv({cx:n,cy:r,radius:o,angle:c,sign:d,isExternal:!0,cornerRadius:i,cornerIsExternal:l}),$=C.circleTangency,T=C.lineTangency,I=C.theta,E=hv({cx:n,cy:r,radius:o,angle:u,sign:-d,isExternal:!0,cornerRadius:i,cornerIsExternal:l}),N=E.circleTangency,A=E.lineTangency,R=E.theta,P=l?Math.abs(c-u):Math.abs(c-u)-I-R;if(P<0&&i===0)return"".concat(w,"L").concat(n,",").concat(r,"Z");w+="L".concat(A.x,",").concat(A.y,`
      A`).concat(i,",").concat(i,",0,0,").concat(+(d<0),",").concat(N.x,",").concat(N.y,`
      A`).concat(o,",").concat(o,",0,").concat(+(P>180),",").concat(+(d>0),",").concat($.x,",").concat($.y,`
      A`).concat(i,",").concat(i,",0,0,").concat(+(d<0),",").concat(T.x,",").concat(T.y,"Z")}else w+="L".concat(n,",").concat(r,"Z");return w},vEe={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},h5=function(e){var n=yF(yF({},vEe),e),r=n.cx,o=n.cy,s=n.innerRadius,i=n.outerRadius,a=n.cornerRadius,l=n.forceCornerRadius,c=n.cornerIsExternal,u=n.startAngle,d=n.endAngle,f=n.className;if(i<s||u===d)return null;var h=st("recharts-sector",f),p=i-s,m=Dc(a,p,0,!0),g;return m>0&&Math.abs(u-d)<360?g=yEe({cx:r,cy:o,innerRadius:s,outerRadius:i,cornerRadius:Math.min(m,p/2),forceCornerRadius:l,cornerIsExternal:c,startAngle:u,endAngle:d}):g=f5({cx:r,cy:o,innerRadius:s,outerRadius:i,startAngle:u,endAngle:d}),z.createElement("path",ST({},Ye(n,!0),{className:h,d:g,role:"img"}))};function am(t){"@babel/helpers - typeof";return am=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},am(t)}function CT(){return CT=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},CT.apply(this,arguments)}function vF(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),n.push.apply(n,r)}return n}function xF(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?vF(Object(n),!0).forEach(function(r){xEe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):vF(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function xEe(t,e,n){return e=bEe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function bEe(t){var e=wEe(t,"string");return am(e)=="symbol"?e:e+""}function wEe(t,e){if(am(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(am(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var bF={curveBasisClosed:xme,curveBasisOpen:bme,curveBasis:vme,curveBumpX:ome,curveBumpY:sme,curveLinearClosed:wme,curveLinear:pw,curveMonotoneX:Sme,curveMonotoneY:Cme,curveNatural:$me,curveStep:kme,curveStepAfter:Ime,curveStepBefore:Tme},pv=function(e){return e.x===+e.x&&e.y===+e.y},Ih=function(e){return e.x},Eh=function(e){return e.y},SEe=function(e,n){if(Ue(e))return e;var r="curve".concat(fw(e));return(r==="curveMonotone"||r==="curveBump")&&n?bF["".concat(r).concat(n==="vertical"?"Y":"X")]:bF[r]||pw},CEe=function(e){var n=e.type,r=n===void 0?"linear":n,o=e.points,s=o===void 0?[]:o,i=e.baseLine,a=e.layout,l=e.connectNulls,c=l===void 0?!1:l,u=SEe(r,a),d=c?s.filter(function(m){return pv(m)}):s,f;if(Array.isArray(i)){var h=c?i.filter(function(m){return pv(m)}):i,p=d.map(function(m,g){return xF(xF({},m),{},{base:h[g]})});return a==="vertical"?f=ov().y(Eh).x1(Ih).x0(function(m){return m.base.x}):f=ov().x(Ih).y1(Eh).y0(function(m){return m.base.y}),f.defined(pv).curve(u),f(p)}return a==="vertical"&&pe(i)?f=ov().y(Eh).x1(Ih).x0(i):pe(i)?f=ov().x(Ih).y1(Eh).y0(i):f=hG().x(Ih).y(Eh),f.defined(pv).curve(u),f(d)},dp=function(e){var n=e.className,r=e.points,o=e.path,s=e.pathRef;if((!r||!r.length)&&!o)return null;var i=r&&r.length?CEe(e):o;return z.createElement("path",CT({},Ye(e,!1),Mx(e),{className:st("recharts-curve",n),d:i,ref:s}))},$Ee=Object.getOwnPropertyNames,kEe=Object.getOwnPropertySymbols,TEe=Object.prototype.hasOwnProperty;function wF(t,e){return function(r,o,s){return t(r,o,s)&&e(r,o,s)}}function mv(t){return function(n,r,o){if(!n||!r||typeof n!="object"||typeof r!="object")return t(n,r,o);var s=o.cache,i=s.get(n),a=s.get(r);if(i&&a)return i===r&&a===n;s.set(n,r),s.set(r,n);var l=t(n,r,o);return s.delete(n),s.delete(r),l}}function SF(t){return $Ee(t).concat(kEe(t))}var IEe=Object.hasOwn||function(t,e){return TEe.call(t,e)};function su(t,e){return t===e||!t&&!e&&t!==t&&e!==e}var EEe="__v",NEe="__o",AEe="_owner",CF=Object.getOwnPropertyDescriptor,$F=Object.keys;function OEe(t,e,n){var r=t.length;if(e.length!==r)return!1;for(;r-- >0;)if(!n.equals(t[r],e[r],r,r,t,e,n))return!1;return!0}function PEe(t,e){return su(t.getTime(),e.getTime())}function REe(t,e){return t.name===e.name&&t.message===e.message&&t.cause===e.cause&&t.stack===e.stack}function _Ee(t,e){return t===e}function kF(t,e,n){var r=t.size;if(r!==e.size)return!1;if(!r)return!0;for(var o=new Array(r),s=t.entries(),i,a,l=0;(i=s.next())&&!i.done;){for(var c=e.entries(),u=!1,d=0;(a=c.next())&&!a.done;){if(o[d]){d++;continue}var f=i.value,h=a.value;if(n.equals(f[0],h[0],l,d,t,e,n)&&n.equals(f[1],h[1],f[0],h[0],t,e,n)){u=o[d]=!0;break}d++}if(!u)return!1;l++}return!0}var DEe=su;function MEe(t,e,n){var r=$F(t),o=r.length;if($F(e).length!==o)return!1;for(;o-- >0;)if(!p5(t,e,n,r[o]))return!1;return!0}function Nh(t,e,n){var r=SF(t),o=r.length;if(SF(e).length!==o)return!1;for(var s,i,a;o-- >0;)if(s=r[o],!p5(t,e,n,s)||(i=CF(t,s),a=CF(e,s),(i||a)&&(!i||!a||i.configurable!==a.configurable||i.enumerable!==a.enumerable||i.writable!==a.writable)))return!1;return!0}function FEe(t,e){return su(t.valueOf(),e.valueOf())}function LEe(t,e){return t.source===e.source&&t.flags===e.flags}function TF(t,e,n){var r=t.size;if(r!==e.size)return!1;if(!r)return!0;for(var o=new Array(r),s=t.values(),i,a;(i=s.next())&&!i.done;){for(var l=e.values(),c=!1,u=0;(a=l.next())&&!a.done;){if(!o[u]&&n.equals(i.value,a.value,i.value,a.value,t,e,n)){c=o[u]=!0;break}u++}if(!c)return!1}return!0}function jEe(t,e){var n=t.length;if(e.length!==n)return!1;for(;n-- >0;)if(t[n]!==e[n])return!1;return!0}function BEe(t,e){return t.hostname===e.hostname&&t.pathname===e.pathname&&t.protocol===e.protocol&&t.port===e.port&&t.hash===e.hash&&t.username===e.username&&t.password===e.password}function p5(t,e,n,r){return(r===AEe||r===NEe||r===EEe)&&(t.$$typeof||e.$$typeof)?!0:IEe(e,r)&&n.equals(t[r],e[r],r,r,t,e,n)}var zEe="[object Arguments]",WEe="[object Boolean]",VEe="[object Date]",UEe="[object Error]",GEe="[object Map]",HEe="[object Number]",KEe="[object Object]",qEe="[object RegExp]",XEe="[object Set]",YEe="[object String]",QEe="[object URL]",ZEe=Array.isArray,IF=typeof ArrayBuffer=="function"&&ArrayBuffer.isView?ArrayBuffer.isView:null,EF=Object.assign,JEe=Object.prototype.toString.call.bind(Object.prototype.toString);function eNe(t){var e=t.areArraysEqual,n=t.areDatesEqual,r=t.areErrorsEqual,o=t.areFunctionsEqual,s=t.areMapsEqual,i=t.areNumbersEqual,a=t.areObjectsEqual,l=t.arePrimitiveWrappersEqual,c=t.areRegExpsEqual,u=t.areSetsEqual,d=t.areTypedArraysEqual,f=t.areUrlsEqual;return function(p,m,g){if(p===m)return!0;if(p==null||m==null)return!1;var y=typeof p;if(y!==typeof m)return!1;if(y!=="object")return y==="number"?i(p,m,g):y==="function"?o(p,m,g):!1;var v=p.constructor;if(v!==m.constructor)return!1;if(v===Object)return a(p,m,g);if(ZEe(p))return e(p,m,g);if(IF!=null&&IF(p))return d(p,m,g);if(v===Date)return n(p,m,g);if(v===RegExp)return c(p,m,g);if(v===Map)return s(p,m,g);if(v===Set)return u(p,m,g);var x=JEe(p);return x===VEe?n(p,m,g):x===qEe?c(p,m,g):x===GEe?s(p,m,g):x===XEe?u(p,m,g):x===KEe?typeof p.then!="function"&&typeof m.then!="function"&&a(p,m,g):x===QEe?f(p,m,g):x===UEe?r(p,m,g):x===zEe?a(p,m,g):x===WEe||x===HEe||x===YEe?l(p,m,g):!1}}function tNe(t){var e=t.circular,n=t.createCustomConfig,r=t.strict,o={areArraysEqual:r?Nh:OEe,areDatesEqual:PEe,areErrorsEqual:REe,areFunctionsEqual:_Ee,areMapsEqual:r?wF(kF,Nh):kF,areNumbersEqual:DEe,areObjectsEqual:r?Nh:MEe,arePrimitiveWrappersEqual:FEe,areRegExpsEqual:LEe,areSetsEqual:r?wF(TF,Nh):TF,areTypedArraysEqual:r?Nh:jEe,areUrlsEqual:BEe};if(n&&(o=EF({},o,n(o))),e){var s=mv(o.areArraysEqual),i=mv(o.areMapsEqual),a=mv(o.areObjectsEqual),l=mv(o.areSetsEqual);o=EF({},o,{areArraysEqual:s,areMapsEqual:i,areObjectsEqual:a,areSetsEqual:l})}return o}function nNe(t){return function(e,n,r,o,s,i,a){return t(e,n,a)}}function rNe(t){var e=t.circular,n=t.comparator,r=t.createState,o=t.equals,s=t.strict;if(r)return function(l,c){var u=r(),d=u.cache,f=d===void 0?e?new WeakMap:void 0:d,h=u.meta;return n(l,c,{cache:f,equals:o,meta:h,strict:s})};if(e)return function(l,c){return n(l,c,{cache:new WeakMap,equals:o,meta:void 0,strict:s})};var i={cache:void 0,equals:o,meta:void 0,strict:s};return function(l,c){return n(l,c,i)}}var oNe=Il();Il({strict:!0});Il({circular:!0});Il({circular:!0,strict:!0});Il({createInternalComparator:function(){return su}});Il({strict:!0,createInternalComparator:function(){return su}});Il({circular:!0,createInternalComparator:function(){return su}});Il({circular:!0,createInternalComparator:function(){return su},strict:!0});function Il(t){t===void 0&&(t={});var e=t.circular,n=e===void 0?!1:e,r=t.createInternalComparator,o=t.createState,s=t.strict,i=s===void 0?!1:s,a=tNe(t),l=eNe(a),c=r?r(l):nNe(l);return rNe({circular:n,comparator:l,createState:o,equals:c,strict:i})}function sNe(t){typeof requestAnimationFrame<"u"&&requestAnimationFrame(t)}function NF(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=-1,r=function o(s){n<0&&(n=s),s-n>e?(t(s),n=-1):sNe(o)};requestAnimationFrame(r)}function $T(t){"@babel/helpers - typeof";return $T=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},$T(t)}function iNe(t){return uNe(t)||cNe(t)||lNe(t)||aNe()}function aNe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function lNe(t,e){if(t){if(typeof t=="string")return AF(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return AF(t,e)}}function AF(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function cNe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function uNe(t){if(Array.isArray(t))return t}function dNe(){var t={},e=function(){return null},n=!1,r=function o(s){if(!n){if(Array.isArray(s)){if(!s.length)return;var i=s,a=iNe(i),l=a[0],c=a.slice(1);if(typeof l=="number"){NF(o.bind(null,c),l);return}o(l),NF(o.bind(null,c));return}$T(s)==="object"&&(t=s,e(t)),typeof s=="function"&&s()}};return{stop:function(){n=!0},start:function(s){n=!1,r(s)},subscribe:function(s){return e=s,function(){e=function(){return null}}}}}function lm(t){"@babel/helpers - typeof";return lm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},lm(t)}function OF(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),n.push.apply(n,r)}return n}function PF(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?OF(Object(n),!0).forEach(function(r){m5(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):OF(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function m5(t,e,n){return e=fNe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function fNe(t){var e=hNe(t,"string");return lm(e)==="symbol"?e:String(e)}function hNe(t,e){if(lm(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(lm(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var pNe=function(e,n){return[Object.keys(e),Object.keys(n)].reduce(function(r,o){return r.filter(function(s){return o.includes(s)})})},mNe=function(e){return e},gNe=function(e){return e.replace(/([A-Z])/g,function(n){return"-".concat(n.toLowerCase())})},fp=function(e,n){return Object.keys(n).reduce(function(r,o){return PF(PF({},r),{},m5({},o,e(o,n[o])))},{})},RF=function(e,n,r){return e.map(function(o){return"".concat(gNe(o)," ").concat(n,"ms ").concat(r)}).join(",")};function yNe(t,e){return bNe(t)||xNe(t,e)||g5(t,e)||vNe()}function vNe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function xNe(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,o,s,i,a=[],l=!0,c=!1;try{if(s=(n=n.call(t)).next,e!==0)for(;!(l=(r=s.call(n)).done)&&(a.push(r.value),a.length!==e);l=!0);}catch(u){c=!0,o=u}finally{try{if(!l&&n.return!=null&&(i=n.return(),Object(i)!==i))return}finally{if(c)throw o}}return a}}function bNe(t){if(Array.isArray(t))return t}function wNe(t){return $Ne(t)||CNe(t)||g5(t)||SNe()}function SNe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function g5(t,e){if(t){if(typeof t=="string")return kT(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return kT(t,e)}}function CNe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function $Ne(t){if(Array.isArray(t))return kT(t)}function kT(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var pb=1e-4,y5=function(e,n){return[0,3*e,3*n-6*e,3*e-3*n+1]},v5=function(e,n){return e.map(function(r,o){return r*Math.pow(n,o)}).reduce(function(r,o){return r+o})},_F=function(e,n){return function(r){var o=y5(e,n);return v5(o,r)}},kNe=function(e,n){return function(r){var o=y5(e,n),s=[].concat(wNe(o.map(function(i,a){return i*a}).slice(1)),[0]);return v5(s,r)}},DF=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];var o=n[0],s=n[1],i=n[2],a=n[3];if(n.length===1)switch(n[0]){case"linear":o=0,s=0,i=1,a=1;break;case"ease":o=.25,s=.1,i=.25,a=1;break;case"ease-in":o=.42,s=0,i=1,a=1;break;case"ease-out":o=.42,s=0,i=.58,a=1;break;case"ease-in-out":o=0,s=0,i=.58,a=1;break;default:{var l=n[0].split("(");if(l[0]==="cubic-bezier"&&l[1].split(")")[0].split(",").length===4){var c=l[1].split(")")[0].split(",").map(function(g){return parseFloat(g)}),u=yNe(c,4);o=u[0],s=u[1],i=u[2],a=u[3]}}}var d=_F(o,i),f=_F(s,a),h=kNe(o,i),p=function(y){return y>1?1:y<0?0:y},m=function(y){for(var v=y>1?1:y,x=v,b=0;b<8;++b){var w=d(x)-v,C=h(x);if(Math.abs(w-v)<pb||C<pb)return f(x);x=p(x-w/C)}return f(x)};return m.isStepper=!1,m},TNe=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=e.stiff,r=n===void 0?100:n,o=e.damping,s=o===void 0?8:o,i=e.dt,a=i===void 0?17:i,l=function(u,d,f){var h=-(u-d)*r,p=f*s,m=f+(h-p)*a/1e3,g=f*a/1e3+u;return Math.abs(g-d)<pb&&Math.abs(m)<pb?[d,0]:[g,m]};return l.isStepper=!0,l.dt=a,l},INe=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];var o=n[0];if(typeof o=="string")switch(o){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return DF(o);case"spring":return TNe();default:if(o.split("(")[0]==="cubic-bezier")return DF(o)}return typeof o=="function"?o:null};function cm(t){"@babel/helpers - typeof";return cm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},cm(t)}function MF(t){return ANe(t)||NNe(t)||x5(t)||ENe()}function ENe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function NNe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function ANe(t){if(Array.isArray(t))return IT(t)}function FF(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),n.push.apply(n,r)}return n}function zn(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?FF(Object(n),!0).forEach(function(r){TT(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):FF(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function TT(t,e,n){return e=ONe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function ONe(t){var e=PNe(t,"string");return cm(e)==="symbol"?e:String(e)}function PNe(t,e){if(cm(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(cm(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function RNe(t,e){return MNe(t)||DNe(t,e)||x5(t,e)||_Ne()}function _Ne(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function x5(t,e){if(t){if(typeof t=="string")return IT(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return IT(t,e)}}function IT(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function DNe(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,o,s,i,a=[],l=!0,c=!1;try{if(s=(n=n.call(t)).next,e!==0)for(;!(l=(r=s.call(n)).done)&&(a.push(r.value),a.length!==e);l=!0);}catch(u){c=!0,o=u}finally{try{if(!l&&n.return!=null&&(i=n.return(),Object(i)!==i))return}finally{if(c)throw o}}return a}}function MNe(t){if(Array.isArray(t))return t}var mb=function(e,n,r){return e+(n-e)*r},ET=function(e){var n=e.from,r=e.to;return n!==r},FNe=function t(e,n,r){var o=fp(function(s,i){if(ET(i)){var a=e(i.from,i.to,i.velocity),l=RNe(a,2),c=l[0],u=l[1];return zn(zn({},i),{},{from:c,velocity:u})}return i},n);return r<1?fp(function(s,i){return ET(i)?zn(zn({},i),{},{velocity:mb(i.velocity,o[s].velocity,r),from:mb(i.from,o[s].from,r)}):i},n):t(e,o,r-1)};const LNe=function(t,e,n,r,o){var s=pNe(t,e),i=s.reduce(function(g,y){return zn(zn({},g),{},TT({},y,[t[y],e[y]]))},{}),a=s.reduce(function(g,y){return zn(zn({},g),{},TT({},y,{from:t[y],velocity:0,to:e[y]}))},{}),l=-1,c,u,d=function(){return null},f=function(){return fp(function(y,v){return v.from},a)},h=function(){return!Object.values(a).filter(ET).length},p=function(y){c||(c=y);var v=y-c,x=v/n.dt;a=FNe(n,a,x),o(zn(zn(zn({},t),e),f())),c=y,h()||(l=requestAnimationFrame(d))},m=function(y){u||(u=y);var v=(y-u)/r,x=fp(function(w,C){return mb.apply(void 0,MF(C).concat([n(v)]))},i);if(o(zn(zn(zn({},t),e),x)),v<1)l=requestAnimationFrame(d);else{var b=fp(function(w,C){return mb.apply(void 0,MF(C).concat([n(1)]))},i);o(zn(zn(zn({},t),e),b))}};return d=n.isStepper?p:m,function(){return requestAnimationFrame(d),function(){cancelAnimationFrame(l)}}};function Yd(t){"@babel/helpers - typeof";return Yd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Yd(t)}var jNe=["children","begin","duration","attributeName","easing","isActive","steps","from","to","canBegin","onAnimationEnd","shouldReAnimate","onAnimationReStart"];function BNe(t,e){if(t==null)return{};var n=zNe(t,e),r,o;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(o=0;o<s.length;o++)r=s[o],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function zNe(t,e){if(t==null)return{};var n={},r=Object.keys(t),o,s;for(s=0;s<r.length;s++)o=r[s],!(e.indexOf(o)>=0)&&(n[o]=t[o]);return n}function NC(t){return GNe(t)||UNe(t)||VNe(t)||WNe()}function WNe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function VNe(t,e){if(t){if(typeof t=="string")return NT(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return NT(t,e)}}function UNe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function GNe(t){if(Array.isArray(t))return NT(t)}function NT(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function LF(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),n.push.apply(n,r)}return n}function os(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?LF(Object(n),!0).forEach(function(r){Uh(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):LF(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Uh(t,e,n){return e=b5(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function HNe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function KNe(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,b5(r.key),r)}}function qNe(t,e,n){return e&&KNe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function b5(t){var e=XNe(t,"string");return Yd(e)==="symbol"?e:String(e)}function XNe(t,e){if(Yd(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Yd(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function YNe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&AT(t,e)}function AT(t,e){return AT=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,o){return r.__proto__=o,r},AT(t,e)}function QNe(t){var e=ZNe();return function(){var r=gb(t),o;if(e){var s=gb(this).constructor;o=Reflect.construct(r,arguments,s)}else o=r.apply(this,arguments);return OT(this,o)}}function OT(t,e){if(e&&(Yd(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return PT(t)}function PT(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function ZNe(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function gb(t){return gb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},gb(t)}var ea=function(t){YNe(n,t);var e=QNe(n);function n(r,o){var s;HNe(this,n),s=e.call(this,r,o);var i=s.props,a=i.isActive,l=i.attributeName,c=i.from,u=i.to,d=i.steps,f=i.children,h=i.duration;if(s.handleStyleChange=s.handleStyleChange.bind(PT(s)),s.changeStyle=s.changeStyle.bind(PT(s)),!a||h<=0)return s.state={style:{}},typeof f=="function"&&(s.state={style:u}),OT(s);if(d&&d.length)s.state={style:d[0].style};else if(c){if(typeof f=="function")return s.state={style:c},OT(s);s.state={style:l?Uh({},l,c):c}}else s.state={style:{}};return s}return qNe(n,[{key:"componentDidMount",value:function(){var o=this.props,s=o.isActive,i=o.canBegin;this.mounted=!0,!(!s||!i)&&this.runAnimation(this.props)}},{key:"componentDidUpdate",value:function(o){var s=this.props,i=s.isActive,a=s.canBegin,l=s.attributeName,c=s.shouldReAnimate,u=s.to,d=s.from,f=this.state.style;if(a){if(!i){var h={style:l?Uh({},l,u):u};this.state&&f&&(l&&f[l]!==u||!l&&f!==u)&&this.setState(h);return}if(!(oNe(o.to,u)&&o.canBegin&&o.isActive)){var p=!o.canBegin||!o.isActive;this.manager&&this.manager.stop(),this.stopJSAnimation&&this.stopJSAnimation();var m=p||c?d:o.to;if(this.state&&f){var g={style:l?Uh({},l,m):m};(l&&f[l]!==m||!l&&f!==m)&&this.setState(g)}this.runAnimation(os(os({},this.props),{},{from:m,begin:0}))}}}},{key:"componentWillUnmount",value:function(){this.mounted=!1;var o=this.props.onAnimationEnd;this.unSubscribe&&this.unSubscribe(),this.manager&&(this.manager.stop(),this.manager=null),this.stopJSAnimation&&this.stopJSAnimation(),o&&o()}},{key:"handleStyleChange",value:function(o){this.changeStyle(o)}},{key:"changeStyle",value:function(o){this.mounted&&this.setState({style:o})}},{key:"runJSAnimation",value:function(o){var s=this,i=o.from,a=o.to,l=o.duration,c=o.easing,u=o.begin,d=o.onAnimationEnd,f=o.onAnimationStart,h=LNe(i,a,INe(c),l,this.changeStyle),p=function(){s.stopJSAnimation=h()};this.manager.start([f,u,p,l,d])}},{key:"runStepAnimation",value:function(o){var s=this,i=o.steps,a=o.begin,l=o.onAnimationStart,c=i[0],u=c.style,d=c.duration,f=d===void 0?0:d,h=function(m,g,y){if(y===0)return m;var v=g.duration,x=g.easing,b=x===void 0?"ease":x,w=g.style,C=g.properties,$=g.onAnimationEnd,T=y>0?i[y-1]:g,I=C||Object.keys(w);if(typeof b=="function"||b==="spring")return[].concat(NC(m),[s.runJSAnimation.bind(s,{from:T.style,to:w,duration:v,easing:b}),v]);var E=RF(I,v,b),N=os(os(os({},T.style),w),{},{transition:E});return[].concat(NC(m),[N,v,$]).filter(mNe)};return this.manager.start([l].concat(NC(i.reduce(h,[u,Math.max(f,a)])),[o.onAnimationEnd]))}},{key:"runAnimation",value:function(o){this.manager||(this.manager=dNe());var s=o.begin,i=o.duration,a=o.attributeName,l=o.to,c=o.easing,u=o.onAnimationStart,d=o.onAnimationEnd,f=o.steps,h=o.children,p=this.manager;if(this.unSubscribe=p.subscribe(this.handleStyleChange),typeof c=="function"||typeof h=="function"||c==="spring"){this.runJSAnimation(o);return}if(f.length>1){this.runStepAnimation(o);return}var m=a?Uh({},a,l):l,g=RF(Object.keys(m),i,c);p.start([u,s,os(os({},m),{},{transition:g}),i,d])}},{key:"render",value:function(){var o=this.props,s=o.children;o.begin;var i=o.duration;o.attributeName,o.easing;var a=o.isActive;o.steps,o.from,o.to,o.canBegin,o.onAnimationEnd,o.shouldReAnimate,o.onAnimationReStart;var l=BNe(o,jNe),c=k.Children.count(s),u=this.state.style;if(typeof s=="function")return s(u);if(!a||c===0||i<=0)return s;var d=function(h){var p=h.props,m=p.style,g=m===void 0?{}:m,y=p.className,v=k.cloneElement(h,os(os({},l),{},{style:os(os({},g),u),className:y}));return v};return c===1?d(k.Children.only(s)):z.createElement("div",null,k.Children.map(s,function(f){return d(f)}))}}]),n}(k.PureComponent);ea.displayName="Animate";ea.defaultProps={begin:0,duration:1e3,from:"",to:"",attributeName:"",easing:"ease",isActive:!0,canBegin:!0,steps:[],onAnimationEnd:function(){},onAnimationStart:function(){}};ea.propTypes={from:Oe.oneOfType([Oe.object,Oe.string]),to:Oe.oneOfType([Oe.object,Oe.string]),attributeName:Oe.string,duration:Oe.number,begin:Oe.number,easing:Oe.oneOfType([Oe.string,Oe.func]),steps:Oe.arrayOf(Oe.shape({duration:Oe.number.isRequired,style:Oe.object.isRequired,easing:Oe.oneOfType([Oe.oneOf(["ease","ease-in","ease-out","ease-in-out","linear"]),Oe.func]),properties:Oe.arrayOf("string"),onAnimationEnd:Oe.func})),children:Oe.oneOfType([Oe.node,Oe.func]),isActive:Oe.bool,canBegin:Oe.bool,onAnimationEnd:Oe.func,shouldReAnimate:Oe.bool,onAnimationStart:Oe.func,onAnimationReStart:Oe.func};function um(t){"@babel/helpers - typeof";return um=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},um(t)}function yb(){return yb=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},yb.apply(this,arguments)}function JNe(t,e){return r2e(t)||n2e(t,e)||t2e(t,e)||e2e()}function e2e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function t2e(t,e){if(t){if(typeof t=="string")return jF(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return jF(t,e)}}function jF(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function n2e(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,o,s,i,a=[],l=!0,c=!1;try{if(s=(n=n.call(t)).next,e!==0)for(;!(l=(r=s.call(n)).done)&&(a.push(r.value),a.length!==e);l=!0);}catch(u){c=!0,o=u}finally{try{if(!l&&n.return!=null&&(i=n.return(),Object(i)!==i))return}finally{if(c)throw o}}return a}}function r2e(t){if(Array.isArray(t))return t}function BF(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),n.push.apply(n,r)}return n}function zF(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?BF(Object(n),!0).forEach(function(r){o2e(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):BF(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function o2e(t,e,n){return e=s2e(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function s2e(t){var e=i2e(t,"string");return um(e)=="symbol"?e:e+""}function i2e(t,e){if(um(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(um(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var WF=function(e,n,r,o,s){var i=Math.min(Math.abs(r)/2,Math.abs(o)/2),a=o>=0?1:-1,l=r>=0?1:-1,c=o>=0&&r>=0||o<0&&r<0?1:0,u;if(i>0&&s instanceof Array){for(var d=[0,0,0,0],f=0,h=4;f<h;f++)d[f]=s[f]>i?i:s[f];u="M".concat(e,",").concat(n+a*d[0]),d[0]>0&&(u+="A ".concat(d[0],",").concat(d[0],",0,0,").concat(c,",").concat(e+l*d[0],",").concat(n)),u+="L ".concat(e+r-l*d[1],",").concat(n),d[1]>0&&(u+="A ".concat(d[1],",").concat(d[1],",0,0,").concat(c,`,
        `).concat(e+r,",").concat(n+a*d[1])),u+="L ".concat(e+r,",").concat(n+o-a*d[2]),d[2]>0&&(u+="A ".concat(d[2],",").concat(d[2],",0,0,").concat(c,`,
        `).concat(e+r-l*d[2],",").concat(n+o)),u+="L ".concat(e+l*d[3],",").concat(n+o),d[3]>0&&(u+="A ".concat(d[3],",").concat(d[3],",0,0,").concat(c,`,
        `).concat(e,",").concat(n+o-a*d[3])),u+="Z"}else if(i>0&&s===+s&&s>0){var p=Math.min(i,s);u="M ".concat(e,",").concat(n+a*p,`
            A `).concat(p,",").concat(p,",0,0,").concat(c,",").concat(e+l*p,",").concat(n,`
            L `).concat(e+r-l*p,",").concat(n,`
            A `).concat(p,",").concat(p,",0,0,").concat(c,",").concat(e+r,",").concat(n+a*p,`
            L `).concat(e+r,",").concat(n+o-a*p,`
            A `).concat(p,",").concat(p,",0,0,").concat(c,",").concat(e+r-l*p,",").concat(n+o,`
            L `).concat(e+l*p,",").concat(n+o,`
            A `).concat(p,",").concat(p,",0,0,").concat(c,",").concat(e,",").concat(n+o-a*p," Z")}else u="M ".concat(e,",").concat(n," h ").concat(r," v ").concat(o," h ").concat(-r," Z");return u},a2e=function(e,n){if(!e||!n)return!1;var r=e.x,o=e.y,s=n.x,i=n.y,a=n.width,l=n.height;if(Math.abs(a)>0&&Math.abs(l)>0){var c=Math.min(s,s+a),u=Math.max(s,s+a),d=Math.min(i,i+l),f=Math.max(i,i+l);return r>=c&&r<=u&&o>=d&&o<=f}return!1},l2e={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},w2=function(e){var n=zF(zF({},l2e),e),r=k.useRef(),o=k.useState(-1),s=JNe(o,2),i=s[0],a=s[1];k.useEffect(function(){if(r.current&&r.current.getTotalLength)try{var b=r.current.getTotalLength();b&&a(b)}catch{}},[]);var l=n.x,c=n.y,u=n.width,d=n.height,f=n.radius,h=n.className,p=n.animationEasing,m=n.animationDuration,g=n.animationBegin,y=n.isAnimationActive,v=n.isUpdateAnimationActive;if(l!==+l||c!==+c||u!==+u||d!==+d||u===0||d===0)return null;var x=st("recharts-rectangle",h);return v?z.createElement(ea,{canBegin:i>0,from:{width:u,height:d,x:l,y:c},to:{width:u,height:d,x:l,y:c},duration:m,animationEasing:p,isActive:v},function(b){var w=b.width,C=b.height,$=b.x,T=b.y;return z.createElement(ea,{canBegin:i>0,from:"0px ".concat(i===-1?1:i,"px"),to:"".concat(i,"px 0px"),attributeName:"strokeDasharray",begin:g,duration:m,isActive:y,easing:p},z.createElement("path",yb({},Ye(n,!0),{className:x,d:WF($,T,w,C,f),ref:r})))}):z.createElement("path",yb({},Ye(n,!0),{className:x,d:WF(l,c,u,d,f)}))};function RT(){return RT=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},RT.apply(this,arguments)}var S2=function(e){var n=e.cx,r=e.cy,o=e.r,s=e.className,i=st("recharts-dot",s);return n===+n&&r===+r&&o===+o?z.createElement("circle",RT({},Ye(e,!1),Mx(e),{className:i,cx:n,cy:r,r:o})):null};function dm(t){"@babel/helpers - typeof";return dm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},dm(t)}var c2e=["x","y","top","left","width","height","className"];function _T(){return _T=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},_T.apply(this,arguments)}function VF(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),n.push.apply(n,r)}return n}function u2e(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?VF(Object(n),!0).forEach(function(r){d2e(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):VF(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function d2e(t,e,n){return e=f2e(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function f2e(t){var e=h2e(t,"string");return dm(e)=="symbol"?e:e+""}function h2e(t,e){if(dm(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(dm(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function p2e(t,e){if(t==null)return{};var n=m2e(t,e),r,o;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(o=0;o<s.length;o++)r=s[o],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function m2e(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}var g2e=function(e,n,r,o,s,i){return"M".concat(e,",").concat(s,"v").concat(o,"M").concat(i,",").concat(n,"h").concat(r)},y2e=function(e){var n=e.x,r=n===void 0?0:n,o=e.y,s=o===void 0?0:o,i=e.top,a=i===void 0?0:i,l=e.left,c=l===void 0?0:l,u=e.width,d=u===void 0?0:u,f=e.height,h=f===void 0?0:f,p=e.className,m=p2e(e,c2e),g=u2e({x:r,y:s,top:a,left:c,width:d,height:h},m);return!pe(r)||!pe(s)||!pe(d)||!pe(h)||!pe(a)||!pe(c)?null:z.createElement("path",_T({},Ye(g,!0),{className:st("recharts-cross",p),d:g2e(r,s,d,h,a,c)}))},v2e=FG,x2e=v2e(Object.getPrototypeOf,Object),b2e=x2e,w2e=ia,S2e=b2e,C2e=aa,$2e="[object Object]",k2e=Function.prototype,T2e=Object.prototype,w5=k2e.toString,I2e=T2e.hasOwnProperty,E2e=w5.call(Object);function N2e(t){if(!C2e(t)||w2e(t)!=$2e)return!1;var e=S2e(t);if(e===null)return!0;var n=I2e.call(e,"constructor")&&e.constructor;return typeof n=="function"&&n instanceof n&&w5.call(n)==E2e}var A2e=N2e;const O2e=ft(A2e);var P2e=ia,R2e=aa,_2e="[object Boolean]";function D2e(t){return t===!0||t===!1||R2e(t)&&P2e(t)==_2e}var M2e=D2e;const F2e=ft(M2e);function fm(t){"@babel/helpers - typeof";return fm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},fm(t)}function vb(){return vb=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},vb.apply(this,arguments)}function L2e(t,e){return W2e(t)||z2e(t,e)||B2e(t,e)||j2e()}function j2e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function B2e(t,e){if(t){if(typeof t=="string")return UF(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return UF(t,e)}}function UF(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function z2e(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,o,s,i,a=[],l=!0,c=!1;try{if(s=(n=n.call(t)).next,e!==0)for(;!(l=(r=s.call(n)).done)&&(a.push(r.value),a.length!==e);l=!0);}catch(u){c=!0,o=u}finally{try{if(!l&&n.return!=null&&(i=n.return(),Object(i)!==i))return}finally{if(c)throw o}}return a}}function W2e(t){if(Array.isArray(t))return t}function GF(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),n.push.apply(n,r)}return n}function HF(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?GF(Object(n),!0).forEach(function(r){V2e(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):GF(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function V2e(t,e,n){return e=U2e(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function U2e(t){var e=G2e(t,"string");return fm(e)=="symbol"?e:e+""}function G2e(t,e){if(fm(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(fm(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var KF=function(e,n,r,o,s){var i=r-o,a;return a="M ".concat(e,",").concat(n),a+="L ".concat(e+r,",").concat(n),a+="L ".concat(e+r-i/2,",").concat(n+s),a+="L ".concat(e+r-i/2-o,",").concat(n+s),a+="L ".concat(e,",").concat(n," Z"),a},H2e={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},K2e=function(e){var n=HF(HF({},H2e),e),r=k.useRef(),o=k.useState(-1),s=L2e(o,2),i=s[0],a=s[1];k.useEffect(function(){if(r.current&&r.current.getTotalLength)try{var x=r.current.getTotalLength();x&&a(x)}catch{}},[]);var l=n.x,c=n.y,u=n.upperWidth,d=n.lowerWidth,f=n.height,h=n.className,p=n.animationEasing,m=n.animationDuration,g=n.animationBegin,y=n.isUpdateAnimationActive;if(l!==+l||c!==+c||u!==+u||d!==+d||f!==+f||u===0&&d===0||f===0)return null;var v=st("recharts-trapezoid",h);return y?z.createElement(ea,{canBegin:i>0,from:{upperWidth:0,lowerWidth:0,height:f,x:l,y:c},to:{upperWidth:u,lowerWidth:d,height:f,x:l,y:c},duration:m,animationEasing:p,isActive:y},function(x){var b=x.upperWidth,w=x.lowerWidth,C=x.height,$=x.x,T=x.y;return z.createElement(ea,{canBegin:i>0,from:"0px ".concat(i===-1?1:i,"px"),to:"".concat(i,"px 0px"),attributeName:"strokeDasharray",begin:g,duration:m,easing:p},z.createElement("path",vb({},Ye(n,!0),{className:v,d:KF($,T,b,w,C),ref:r})))}):z.createElement("g",null,z.createElement("path",vb({},Ye(n,!0),{className:v,d:KF(l,c,u,d,f)})))},q2e=["option","shapeType","propTransformer","activeClassName","isActive"];function hm(t){"@babel/helpers - typeof";return hm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},hm(t)}function X2e(t,e){if(t==null)return{};var n=Y2e(t,e),r,o;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(o=0;o<s.length;o++)r=s[o],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function Y2e(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function qF(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),n.push.apply(n,r)}return n}function xb(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?qF(Object(n),!0).forEach(function(r){Q2e(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):qF(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Q2e(t,e,n){return e=Z2e(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Z2e(t){var e=J2e(t,"string");return hm(e)=="symbol"?e:e+""}function J2e(t,e){if(hm(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(hm(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function eAe(t,e){return xb(xb({},e),t)}function tAe(t,e){return t==="symbols"}function XF(t){var e=t.shapeType,n=t.elementProps;switch(e){case"rectangle":return z.createElement(w2,n);case"trapezoid":return z.createElement(K2e,n);case"sector":return z.createElement(h5,n);case"symbols":if(tAe(e))return z.createElement(BN,n);break;default:return null}}function nAe(t){return k.isValidElement(t)?t.props:t}function rAe(t){var e=t.option,n=t.shapeType,r=t.propTransformer,o=r===void 0?eAe:r,s=t.activeClassName,i=s===void 0?"recharts-active-shape":s,a=t.isActive,l=X2e(t,q2e),c;if(k.isValidElement(e))c=k.cloneElement(e,xb(xb({},l),nAe(e)));else if(Ue(e))c=e(l);else if(O2e(e)&&!F2e(e)){var u=o(e,l);c=z.createElement(XF,{shapeType:n,elementProps:u})}else{var d=l;c=z.createElement(XF,{shapeType:n,elementProps:d})}return a?z.createElement(Gt,{className:i},c):c}function Nw(t,e){return e!=null&&"trapezoids"in t.props}function Aw(t,e){return e!=null&&"sectors"in t.props}function pm(t,e){return e!=null&&"points"in t.props}function oAe(t,e){var n,r,o=t.x===(e==null||(n=e.labelViewBox)===null||n===void 0?void 0:n.x)||t.x===e.x,s=t.y===(e==null||(r=e.labelViewBox)===null||r===void 0?void 0:r.y)||t.y===e.y;return o&&s}function sAe(t,e){var n=t.endAngle===e.endAngle,r=t.startAngle===e.startAngle;return n&&r}function iAe(t,e){var n=t.x===e.x,r=t.y===e.y,o=t.z===e.z;return n&&r&&o}function aAe(t,e){var n;return Nw(t,e)?n=oAe:Aw(t,e)?n=sAe:pm(t,e)&&(n=iAe),n}function lAe(t,e){var n;return Nw(t,e)?n="trapezoids":Aw(t,e)?n="sectors":pm(t,e)&&(n="points"),n}function cAe(t,e){if(Nw(t,e)){var n;return(n=e.tooltipPayload)===null||n===void 0||(n=n[0])===null||n===void 0||(n=n.payload)===null||n===void 0?void 0:n.payload}if(Aw(t,e)){var r;return(r=e.tooltipPayload)===null||r===void 0||(r=r[0])===null||r===void 0||(r=r.payload)===null||r===void 0?void 0:r.payload}return pm(t,e)?e.payload:{}}function uAe(t){var e=t.activeTooltipItem,n=t.graphicalItem,r=t.itemData,o=lAe(n,e),s=cAe(n,e),i=r.filter(function(l,c){var u=Qp(s,l),d=n.props[o].filter(function(p){var m=aAe(n,e);return m(p,e)}),f=n.props[o].indexOf(d[d.length-1]),h=c===f;return u&&h}),a=r.indexOf(i[i.length-1]);return a}var dAe=Math.ceil,fAe=Math.max;function hAe(t,e,n,r){for(var o=-1,s=fAe(dAe((e-t)/(n||1)),0),i=Array(s);s--;)i[r?s:++o]=t,t+=n;return i}var pAe=hAe,mAe=nH,YF=1/0,gAe=17976931348623157e292;function yAe(t){if(!t)return t===0?t:0;if(t=mAe(t),t===YF||t===-YF){var e=t<0?-1:1;return e*gAe}return t===t?t:0}var S5=yAe,vAe=pAe,xAe=vw,AC=S5;function bAe(t){return function(e,n,r){return r&&typeof r!="number"&&xAe(e,n,r)&&(n=r=void 0),e=AC(e),n===void 0?(n=e,e=0):n=AC(n),r=r===void 0?e<n?1:-1:AC(r),vAe(e,n,r,t)}}var wAe=bAe,SAe=wAe,CAe=SAe(),$Ae=CAe;const bb=ft($Ae);function mm(t){"@babel/helpers - typeof";return mm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},mm(t)}function QF(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),n.push.apply(n,r)}return n}function ZF(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?QF(Object(n),!0).forEach(function(r){C5(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):QF(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function C5(t,e,n){return e=kAe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function kAe(t){var e=TAe(t,"string");return mm(e)=="symbol"?e:e+""}function TAe(t,e){if(mm(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(mm(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var IAe=["Webkit","Moz","O","ms"],EAe=function(e,n){var r=e.replace(/(\w)/,function(s){return s.toUpperCase()}),o=IAe.reduce(function(s,i){return ZF(ZF({},s),{},C5({},i+r,n))},{});return o[e]=n,o};function Qd(t){"@babel/helpers - typeof";return Qd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Qd(t)}function wb(){return wb=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},wb.apply(this,arguments)}function JF(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),n.push.apply(n,r)}return n}function OC(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?JF(Object(n),!0).forEach(function(r){no(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):JF(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function NAe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function eL(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,k5(r.key),r)}}function AAe(t,e,n){return e&&eL(t.prototype,e),n&&eL(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function OAe(t,e,n){return e=Sb(e),PAe(t,$5()?Reflect.construct(e,n||[],Sb(t).constructor):e.apply(t,n))}function PAe(t,e){if(e&&(Qd(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return RAe(t)}function RAe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function $5(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return($5=function(){return!!t})()}function Sb(t){return Sb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Sb(t)}function _Ae(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&DT(t,e)}function DT(t,e){return DT=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,o){return r.__proto__=o,r},DT(t,e)}function no(t,e,n){return e=k5(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function k5(t){var e=DAe(t,"string");return Qd(e)=="symbol"?e:e+""}function DAe(t,e){if(Qd(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Qd(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var MAe=function(e){var n=e.data,r=e.startIndex,o=e.endIndex,s=e.x,i=e.width,a=e.travellerWidth;if(!n||!n.length)return{};var l=n.length,c=cp().domain(bb(0,l)).range([s,s+i-a]),u=c.domain().map(function(d){return c(d)});return{isTextActive:!1,isSlideMoving:!1,isTravellerMoving:!1,isTravellerFocused:!1,startX:c(r),endX:c(o),scale:c,scaleValues:u}},tL=function(e){return e.changedTouches&&!!e.changedTouches.length},Zd=function(t){function e(n){var r;return NAe(this,e),r=OAe(this,e,[n]),no(r,"handleDrag",function(o){r.leaveTimer&&(clearTimeout(r.leaveTimer),r.leaveTimer=null),r.state.isTravellerMoving?r.handleTravellerMove(o):r.state.isSlideMoving&&r.handleSlideDrag(o)}),no(r,"handleTouchMove",function(o){o.changedTouches!=null&&o.changedTouches.length>0&&r.handleDrag(o.changedTouches[0])}),no(r,"handleDragEnd",function(){r.setState({isTravellerMoving:!1,isSlideMoving:!1},function(){var o=r.props,s=o.endIndex,i=o.onDragEnd,a=o.startIndex;i==null||i({endIndex:s,startIndex:a})}),r.detachDragEndListener()}),no(r,"handleLeaveWrapper",function(){(r.state.isTravellerMoving||r.state.isSlideMoving)&&(r.leaveTimer=window.setTimeout(r.handleDragEnd,r.props.leaveTimeOut))}),no(r,"handleEnterSlideOrTraveller",function(){r.setState({isTextActive:!0})}),no(r,"handleLeaveSlideOrTraveller",function(){r.setState({isTextActive:!1})}),no(r,"handleSlideDragStart",function(o){var s=tL(o)?o.changedTouches[0]:o;r.setState({isTravellerMoving:!1,isSlideMoving:!0,slideMoveStartX:s.pageX}),r.attachDragEndListener()}),r.travellerDragStartHandlers={startX:r.handleTravellerDragStart.bind(r,"startX"),endX:r.handleTravellerDragStart.bind(r,"endX")},r.state={},r}return _Ae(e,t),AAe(e,[{key:"componentWillUnmount",value:function(){this.leaveTimer&&(clearTimeout(this.leaveTimer),this.leaveTimer=null),this.detachDragEndListener()}},{key:"getIndex",value:function(r){var o=r.startX,s=r.endX,i=this.state.scaleValues,a=this.props,l=a.gap,c=a.data,u=c.length-1,d=Math.min(o,s),f=Math.max(o,s),h=e.getIndexInRange(i,d),p=e.getIndexInRange(i,f);return{startIndex:h-h%l,endIndex:p===u?u:p-p%l}}},{key:"getTextOfTick",value:function(r){var o=this.props,s=o.data,i=o.tickFormatter,a=o.dataKey,l=go(s[r],a,r);return Ue(i)?i(l,r):l}},{key:"attachDragEndListener",value:function(){window.addEventListener("mouseup",this.handleDragEnd,!0),window.addEventListener("touchend",this.handleDragEnd,!0),window.addEventListener("mousemove",this.handleDrag,!0)}},{key:"detachDragEndListener",value:function(){window.removeEventListener("mouseup",this.handleDragEnd,!0),window.removeEventListener("touchend",this.handleDragEnd,!0),window.removeEventListener("mousemove",this.handleDrag,!0)}},{key:"handleSlideDrag",value:function(r){var o=this.state,s=o.slideMoveStartX,i=o.startX,a=o.endX,l=this.props,c=l.x,u=l.width,d=l.travellerWidth,f=l.startIndex,h=l.endIndex,p=l.onChange,m=r.pageX-s;m>0?m=Math.min(m,c+u-d-a,c+u-d-i):m<0&&(m=Math.max(m,c-i,c-a));var g=this.getIndex({startX:i+m,endX:a+m});(g.startIndex!==f||g.endIndex!==h)&&p&&p(g),this.setState({startX:i+m,endX:a+m,slideMoveStartX:r.pageX})}},{key:"handleTravellerDragStart",value:function(r,o){var s=tL(o)?o.changedTouches[0]:o;this.setState({isSlideMoving:!1,isTravellerMoving:!0,movingTravellerId:r,brushMoveStartX:s.pageX}),this.attachDragEndListener()}},{key:"handleTravellerMove",value:function(r){var o=this.state,s=o.brushMoveStartX,i=o.movingTravellerId,a=o.endX,l=o.startX,c=this.state[i],u=this.props,d=u.x,f=u.width,h=u.travellerWidth,p=u.onChange,m=u.gap,g=u.data,y={startX:this.state.startX,endX:this.state.endX},v=r.pageX-s;v>0?v=Math.min(v,d+f-h-c):v<0&&(v=Math.max(v,d-c)),y[i]=c+v;var x=this.getIndex(y),b=x.startIndex,w=x.endIndex,C=function(){var T=g.length-1;return i==="startX"&&(a>l?b%m===0:w%m===0)||a<l&&w===T||i==="endX"&&(a>l?w%m===0:b%m===0)||a>l&&w===T};this.setState(no(no({},i,c+v),"brushMoveStartX",r.pageX),function(){p&&C()&&p(x)})}},{key:"handleTravellerMoveKeyboard",value:function(r,o){var s=this,i=this.state,a=i.scaleValues,l=i.startX,c=i.endX,u=this.state[o],d=a.indexOf(u);if(d!==-1){var f=d+r;if(!(f===-1||f>=a.length)){var h=a[f];o==="startX"&&h>=c||o==="endX"&&h<=l||this.setState(no({},o,h),function(){s.props.onChange(s.getIndex({startX:s.state.startX,endX:s.state.endX}))})}}}},{key:"renderBackground",value:function(){var r=this.props,o=r.x,s=r.y,i=r.width,a=r.height,l=r.fill,c=r.stroke;return z.createElement("rect",{stroke:c,fill:l,x:o,y:s,width:i,height:a})}},{key:"renderPanorama",value:function(){var r=this.props,o=r.x,s=r.y,i=r.width,a=r.height,l=r.data,c=r.children,u=r.padding,d=k.Children.only(c);return d?z.cloneElement(d,{x:o,y:s,width:i,height:a,margin:u,compact:!0,data:l}):null}},{key:"renderTravellerLayer",value:function(r,o){var s,i,a=this,l=this.props,c=l.y,u=l.travellerWidth,d=l.height,f=l.traveller,h=l.ariaLabel,p=l.data,m=l.startIndex,g=l.endIndex,y=Math.max(r,this.props.x),v=OC(OC({},Ye(this.props,!1)),{},{x:y,y:c,width:u,height:d}),x=h||"Min value: ".concat((s=p[m])===null||s===void 0?void 0:s.name,", Max value: ").concat((i=p[g])===null||i===void 0?void 0:i.name);return z.createElement(Gt,{tabIndex:0,role:"slider","aria-label":x,"aria-valuenow":r,className:"recharts-brush-traveller",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.travellerDragStartHandlers[o],onTouchStart:this.travellerDragStartHandlers[o],onKeyDown:function(w){["ArrowLeft","ArrowRight"].includes(w.key)&&(w.preventDefault(),w.stopPropagation(),a.handleTravellerMoveKeyboard(w.key==="ArrowRight"?1:-1,o))},onFocus:function(){a.setState({isTravellerFocused:!0})},onBlur:function(){a.setState({isTravellerFocused:!1})},style:{cursor:"col-resize"}},e.renderTraveller(f,v))}},{key:"renderSlide",value:function(r,o){var s=this.props,i=s.y,a=s.height,l=s.stroke,c=s.travellerWidth,u=Math.min(r,o)+c,d=Math.max(Math.abs(o-r)-c,0);return z.createElement("rect",{className:"recharts-brush-slide",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.handleSlideDragStart,onTouchStart:this.handleSlideDragStart,style:{cursor:"move"},stroke:"none",fill:l,fillOpacity:.2,x:u,y:i,width:d,height:a})}},{key:"renderText",value:function(){var r=this.props,o=r.startIndex,s=r.endIndex,i=r.y,a=r.height,l=r.travellerWidth,c=r.stroke,u=this.state,d=u.startX,f=u.endX,h=5,p={pointerEvents:"none",fill:c};return z.createElement(Gt,{className:"recharts-brush-texts"},z.createElement(Qx,wb({textAnchor:"end",verticalAnchor:"middle",x:Math.min(d,f)-h,y:i+a/2},p),this.getTextOfTick(o)),z.createElement(Qx,wb({textAnchor:"start",verticalAnchor:"middle",x:Math.max(d,f)+l+h,y:i+a/2},p),this.getTextOfTick(s)))}},{key:"render",value:function(){var r=this.props,o=r.data,s=r.className,i=r.children,a=r.x,l=r.y,c=r.width,u=r.height,d=r.alwaysShowText,f=this.state,h=f.startX,p=f.endX,m=f.isTextActive,g=f.isSlideMoving,y=f.isTravellerMoving,v=f.isTravellerFocused;if(!o||!o.length||!pe(a)||!pe(l)||!pe(c)||!pe(u)||c<=0||u<=0)return null;var x=st("recharts-brush",s),b=z.Children.count(i)===1,w=EAe("userSelect","none");return z.createElement(Gt,{className:x,onMouseLeave:this.handleLeaveWrapper,onTouchMove:this.handleTouchMove,style:w},this.renderBackground(),b&&this.renderPanorama(),this.renderSlide(h,p),this.renderTravellerLayer(h,"startX"),this.renderTravellerLayer(p,"endX"),(m||g||y||v||d)&&this.renderText())}}],[{key:"renderDefaultTraveller",value:function(r){var o=r.x,s=r.y,i=r.width,a=r.height,l=r.stroke,c=Math.floor(s+a/2)-1;return z.createElement(z.Fragment,null,z.createElement("rect",{x:o,y:s,width:i,height:a,fill:l,stroke:"none"}),z.createElement("line",{x1:o+1,y1:c,x2:o+i-1,y2:c,fill:"none",stroke:"#fff"}),z.createElement("line",{x1:o+1,y1:c+2,x2:o+i-1,y2:c+2,fill:"none",stroke:"#fff"}))}},{key:"renderTraveller",value:function(r,o){var s;return z.isValidElement(r)?s=z.cloneElement(r,o):Ue(r)?s=r(o):s=e.renderDefaultTraveller(o),s}},{key:"getDerivedStateFromProps",value:function(r,o){var s=r.data,i=r.width,a=r.x,l=r.travellerWidth,c=r.updateId,u=r.startIndex,d=r.endIndex;if(s!==o.prevData||c!==o.prevUpdateId)return OC({prevData:s,prevTravellerWidth:l,prevUpdateId:c,prevX:a,prevWidth:i},s&&s.length?MAe({data:s,width:i,x:a,travellerWidth:l,startIndex:u,endIndex:d}):{scale:null,scaleValues:null});if(o.scale&&(i!==o.prevWidth||a!==o.prevX||l!==o.prevTravellerWidth)){o.scale.range([a,a+i-l]);var f=o.scale.domain().map(function(h){return o.scale(h)});return{prevData:s,prevTravellerWidth:l,prevUpdateId:c,prevX:a,prevWidth:i,startX:o.scale(r.startIndex),endX:o.scale(r.endIndex),scaleValues:f}}return null}},{key:"getIndexInRange",value:function(r,o){for(var s=r.length,i=0,a=s-1;a-i>1;){var l=Math.floor((i+a)/2);r[l]>o?a=l:i=l}return o>=r[a]?a:i}}])}(k.PureComponent);no(Zd,"displayName","Brush");no(Zd,"defaultProps",{height:40,travellerWidth:5,gap:1,fill:"#fff",stroke:"#666",padding:{top:1,right:1,bottom:1,left:1},leaveTimeOut:1e3,alwaysShowText:!1});var FAe=KN;function LAe(t,e){var n;return FAe(t,function(r,o,s){return n=e(r,o,s),!n}),!!n}var jAe=LAe,BAe=NG,zAe=$l,WAe=jAe,VAe=eo,UAe=vw;function GAe(t,e,n){var r=VAe(t)?BAe:WAe;return n&&UAe(t,e,n)&&(e=void 0),r(t,zAe(e))}var HAe=GAe;const KAe=ft(HAe);var ii=function(e,n){var r=e.alwaysShow,o=e.ifOverflow;return r&&(o="extendDomain"),o===n},nL=QG;function qAe(t,e,n){e=="__proto__"&&nL?nL(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n}var XAe=qAe,YAe=XAe,QAe=XG,ZAe=$l;function JAe(t,e){var n={};return e=ZAe(e),QAe(t,function(r,o,s){YAe(n,o,e(r,o,s))}),n}var eOe=JAe;const tOe=ft(eOe);function nOe(t,e){for(var n=-1,r=t==null?0:t.length;++n<r;)if(!e(t[n],n,t))return!1;return!0}var rOe=nOe,oOe=KN;function sOe(t,e){var n=!0;return oOe(t,function(r,o,s){return n=!!e(r,o,s),n}),n}var iOe=sOe,aOe=rOe,lOe=iOe,cOe=$l,uOe=eo,dOe=vw;function fOe(t,e,n){var r=uOe(t)?aOe:lOe;return n&&dOe(t,e,n)&&(e=void 0),r(t,cOe(e))}var hOe=fOe;const T5=ft(hOe);var pOe=["x","y"];function gm(t){"@babel/helpers - typeof";return gm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},gm(t)}function MT(){return MT=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},MT.apply(this,arguments)}function rL(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),n.push.apply(n,r)}return n}function Ah(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?rL(Object(n),!0).forEach(function(r){mOe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):rL(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function mOe(t,e,n){return e=gOe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function gOe(t){var e=yOe(t,"string");return gm(e)=="symbol"?e:e+""}function yOe(t,e){if(gm(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(gm(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function vOe(t,e){if(t==null)return{};var n=xOe(t,e),r,o;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(o=0;o<s.length;o++)r=s[o],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function xOe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function bOe(t,e){var n=t.x,r=t.y,o=vOe(t,pOe),s="".concat(n),i=parseInt(s,10),a="".concat(r),l=parseInt(a,10),c="".concat(e.height||o.height),u=parseInt(c,10),d="".concat(e.width||o.width),f=parseInt(d,10);return Ah(Ah(Ah(Ah(Ah({},e),o),i?{x:i}:{}),l?{y:l}:{}),{},{height:u,width:f,name:e.name,radius:e.radius})}function oL(t){return z.createElement(rAe,MT({shapeType:"rectangle",propTransformer:bOe,activeClassName:"recharts-active-bar"},t))}var wOe=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return function(r,o){if(typeof e=="number")return e;var s=typeof r=="number";return s?e(r,o):(s||Fc(),n)}},SOe=["value","background"],I5;function Jd(t){"@babel/helpers - typeof";return Jd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Jd(t)}function COe(t,e){if(t==null)return{};var n=$Oe(t,e),r,o;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(o=0;o<s.length;o++)r=s[o],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function $Oe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function Cb(){return Cb=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Cb.apply(this,arguments)}function sL(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),n.push.apply(n,r)}return n}function dn(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?sL(Object(n),!0).forEach(function(r){za(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):sL(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function kOe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function iL(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,N5(r.key),r)}}function TOe(t,e,n){return e&&iL(t.prototype,e),n&&iL(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function IOe(t,e,n){return e=$b(e),EOe(t,E5()?Reflect.construct(e,n||[],$b(t).constructor):e.apply(t,n))}function EOe(t,e){if(e&&(Jd(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return NOe(t)}function NOe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function E5(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(E5=function(){return!!t})()}function $b(t){return $b=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},$b(t)}function AOe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&FT(t,e)}function FT(t,e){return FT=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,o){return r.__proto__=o,r},FT(t,e)}function za(t,e,n){return e=N5(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function N5(t){var e=OOe(t,"string");return Jd(e)=="symbol"?e:e+""}function OOe(t,e){if(Jd(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Jd(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var ug=function(t){function e(){var n;kOe(this,e);for(var r=arguments.length,o=new Array(r),s=0;s<r;s++)o[s]=arguments[s];return n=IOe(this,e,[].concat(o)),za(n,"state",{isAnimationFinished:!1}),za(n,"id",og("recharts-bar-")),za(n,"handleAnimationEnd",function(){var i=n.props.onAnimationEnd;n.setState({isAnimationFinished:!0}),i&&i()}),za(n,"handleAnimationStart",function(){var i=n.props.onAnimationStart;n.setState({isAnimationFinished:!1}),i&&i()}),n}return AOe(e,t),TOe(e,[{key:"renderRectanglesStatically",value:function(r){var o=this,s=this.props,i=s.shape,a=s.dataKey,l=s.activeIndex,c=s.activeBar,u=Ye(this.props,!1);return r&&r.map(function(d,f){var h=f===l,p=h?c:i,m=dn(dn(dn({},u),d),{},{isActive:h,option:p,index:f,dataKey:a,onAnimationStart:o.handleAnimationStart,onAnimationEnd:o.handleAnimationEnd});return z.createElement(Gt,Cb({className:"recharts-bar-rectangle"},Fx(o.props,d,f),{key:"rectangle-".concat(d==null?void 0:d.x,"-").concat(d==null?void 0:d.y,"-").concat(d==null?void 0:d.value,"-").concat(f)}),z.createElement(oL,m))})}},{key:"renderRectanglesWithAnimation",value:function(){var r=this,o=this.props,s=o.data,i=o.layout,a=o.isAnimationActive,l=o.animationBegin,c=o.animationDuration,u=o.animationEasing,d=o.animationId,f=this.state.prevData;return z.createElement(ea,{begin:l,duration:c,isActive:a,easing:u,from:{t:0},to:{t:1},key:"bar-".concat(d),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(h){var p=h.t,m=s.map(function(g,y){var v=f&&f[y];if(v){var x=Ro(v.x,g.x),b=Ro(v.y,g.y),w=Ro(v.width,g.width),C=Ro(v.height,g.height);return dn(dn({},g),{},{x:x(p),y:b(p),width:w(p),height:C(p)})}if(i==="horizontal"){var $=Ro(0,g.height),T=$(p);return dn(dn({},g),{},{y:g.y+g.height-T,height:T})}var I=Ro(0,g.width),E=I(p);return dn(dn({},g),{},{width:E})});return z.createElement(Gt,null,r.renderRectanglesStatically(m))})}},{key:"renderRectangles",value:function(){var r=this.props,o=r.data,s=r.isAnimationActive,i=this.state.prevData;return s&&o&&o.length&&(!i||!Qp(i,o))?this.renderRectanglesWithAnimation():this.renderRectanglesStatically(o)}},{key:"renderBackground",value:function(){var r=this,o=this.props,s=o.data,i=o.dataKey,a=o.activeIndex,l=Ye(this.props.background,!1);return s.map(function(c,u){c.value;var d=c.background,f=COe(c,SOe);if(!d)return null;var h=dn(dn(dn(dn(dn({},f),{},{fill:"#eee"},d),l),Fx(r.props,c,u)),{},{onAnimationStart:r.handleAnimationStart,onAnimationEnd:r.handleAnimationEnd,dataKey:i,index:u,className:"recharts-bar-background-rectangle"});return z.createElement(oL,Cb({key:"background-bar-".concat(u),option:r.props.background,isActive:u===a},h))})}},{key:"renderErrorBar",value:function(r,o){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var s=this.props,i=s.data,a=s.xAxis,l=s.yAxis,c=s.layout,u=s.children,d=ks(u,Ew);if(!d)return null;var f=c==="vertical"?i[0].height/2:i[0].width/2,h=function(g,y){var v=Array.isArray(g.value)?g.value[1]:g.value;return{x:g.x,y:g.y,value:v,errorVal:go(g,y)}},p={clipPath:r?"url(#clipPath-".concat(o,")"):null};return z.createElement(Gt,p,d.map(function(m){return z.cloneElement(m,{key:"error-bar-".concat(o,"-").concat(m.props.dataKey),data:i,xAxis:a,yAxis:l,layout:c,offset:f,dataPointFormatter:h})}))}},{key:"render",value:function(){var r=this.props,o=r.hide,s=r.data,i=r.className,a=r.xAxis,l=r.yAxis,c=r.left,u=r.top,d=r.width,f=r.height,h=r.isAnimationActive,p=r.background,m=r.id;if(o||!s||!s.length)return null;var g=this.state.isAnimationFinished,y=st("recharts-bar",i),v=a&&a.allowDataOverflow,x=l&&l.allowDataOverflow,b=v||x,w=tt(m)?this.id:m;return z.createElement(Gt,{className:y},v||x?z.createElement("defs",null,z.createElement("clipPath",{id:"clipPath-".concat(w)},z.createElement("rect",{x:v?c:c-d/2,y:x?u:u-f/2,width:v?d:d*2,height:x?f:f*2}))):null,z.createElement(Gt,{className:"recharts-bar-rectangles",clipPath:b?"url(#clipPath-".concat(w,")"):null},p?this.renderBackground():null,this.renderRectangles()),this.renderErrorBar(b,w),(!h||g)&&tl.renderCallByParent(this.props,s))}}],[{key:"getDerivedStateFromProps",value:function(r,o){return r.animationId!==o.prevAnimationId?{prevAnimationId:r.animationId,curData:r.data,prevData:o.curData}:r.data!==o.curData?{curData:r.data}:null}}])}(k.PureComponent);I5=ug;za(ug,"displayName","Bar");za(ug,"defaultProps",{xAxisId:0,yAxisId:0,legendType:"rect",minPointSize:0,hide:!1,data:[],layout:"vertical",activeBar:!1,isAnimationActive:!zi.isSsr,animationBegin:0,animationDuration:400,animationEasing:"ease"});za(ug,"getComposedData",function(t){var e=t.props,n=t.item,r=t.barPosition,o=t.bandSize,s=t.xAxis,i=t.yAxis,a=t.xAxisTicks,l=t.yAxisTicks,c=t.stackedData,u=t.dataStartIndex,d=t.displayedData,f=t.offset,h=fIe(r,n);if(!h)return null;var p=e.layout,m=n.type.defaultProps,g=m!==void 0?dn(dn({},m),n.props):n.props,y=g.dataKey,v=g.children,x=g.minPointSize,b=p==="horizontal"?i:s,w=c?b.scale.domain():null,C=bIe({numericAxis:b}),$=ks(v,oH),T=d.map(function(I,E){var N,A,R,P,F,_;c?N=hIe(c[u+E],w):(N=go(I,y),Array.isArray(N)||(N=[C,N]));var L=wOe(x,I5.defaultProps.minPointSize)(N[1],E);if(p==="horizontal"){var O,D=[i.scale(N[0]),i.scale(N[1])],B=D[0],V=D[1];A=sF({axis:s,ticks:a,bandSize:o,offset:h.offset,entry:I,index:E}),R=(O=V??B)!==null&&O!==void 0?O:void 0,P=h.size;var G=B-V;if(F=Number.isNaN(G)?0:G,_={x:A,y:i.y,width:P,height:i.height},Math.abs(L)>0&&Math.abs(F)<Math.abs(L)){var Q=ws(F||L)*(Math.abs(L)-Math.abs(F));R-=Q,F+=Q}}else{var re=[s.scale(N[0]),s.scale(N[1])],ie=re[0],ce=re[1];if(A=ie,R=sF({axis:i,ticks:l,bandSize:o,offset:h.offset,entry:I,index:E}),P=ce-ie,F=h.size,_={x:s.x,y:R,width:s.width,height:F},Math.abs(L)>0&&Math.abs(P)<Math.abs(L)){var se=ws(P||L)*(Math.abs(L)-Math.abs(P));P+=se}}return dn(dn(dn({},I),{},{x:A,y:R,width:P,height:F,value:c?N:N[1],payload:I,background:_},$&&$[E]&&$[E].props),{},{tooltipPayload:[u5(n,I)],tooltipPosition:{x:A+P/2,y:R+F/2}})});return dn({data:T,layout:p},f)});function ym(t){"@babel/helpers - typeof";return ym=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ym(t)}function POe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function aL(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,A5(r.key),r)}}function ROe(t,e,n){return e&&aL(t.prototype,e),n&&aL(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function lL(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),n.push.apply(n,r)}return n}function fs(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?lL(Object(n),!0).forEach(function(r){Ow(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):lL(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Ow(t,e,n){return e=A5(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function A5(t){var e=_Oe(t,"string");return ym(e)=="symbol"?e:e+""}function _Oe(t,e){if(ym(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(ym(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var DOe=function(e,n,r,o,s){var i=e.width,a=e.height,l=e.layout,c=e.children,u=Object.keys(n),d={left:r.left,leftMirror:r.left,right:i-r.right,rightMirror:i-r.right,top:r.top,topMirror:r.top,bottom:a-r.bottom,bottomMirror:a-r.bottom},f=!!so(c,ug);return u.reduce(function(h,p){var m=n[p],g=m.orientation,y=m.domain,v=m.padding,x=v===void 0?{}:v,b=m.mirror,w=m.reversed,C="".concat(g).concat(b?"Mirror":""),$,T,I,E,N;if(m.type==="number"&&(m.padding==="gap"||m.padding==="no-gap")){var A=y[1]-y[0],R=1/0,P=m.categoricalDomain.sort();if(P.forEach(function(re,ie){ie>0&&(R=Math.min((re||0)-(P[ie-1]||0),R))}),Number.isFinite(R)){var F=R/A,_=m.layout==="vertical"?r.height:r.width;if(m.padding==="gap"&&($=F*_/2),m.padding==="no-gap"){var L=Dc(e.barCategoryGap,F*_),O=F*_/2;$=O-L-(O-L)/_*L}}}o==="xAxis"?T=[r.left+(x.left||0)+($||0),r.left+r.width-(x.right||0)-($||0)]:o==="yAxis"?T=l==="horizontal"?[r.top+r.height-(x.bottom||0),r.top+(x.top||0)]:[r.top+(x.top||0)+($||0),r.top+r.height-(x.bottom||0)-($||0)]:T=m.range,w&&(T=[T[1],T[0]]);var D=uIe(m,s,f),B=D.scale,V=D.realScaleType;B.domain(y).range(T),dIe(B);var G=xIe(B,fs(fs({},m),{},{realScaleType:V}));o==="xAxis"?(N=g==="top"&&!b||g==="bottom"&&b,I=r.left,E=d[C]-N*m.height):o==="yAxis"&&(N=g==="left"&&!b||g==="right"&&b,I=d[C]-N*m.width,E=r.top);var Q=fs(fs(fs({},m),G),{},{realScaleType:V,x:I,y:E,scale:B,width:o==="xAxis"?r.width:m.width,height:o==="yAxis"?r.height:m.height});return Q.bandSize=db(Q,G),!m.hide&&o==="xAxis"?d[C]+=(N?-1:1)*Q.height:m.hide||(d[C]+=(N?-1:1)*Q.width),fs(fs({},h),{},Ow({},p,Q))},{})},O5=function(e,n){var r=e.x,o=e.y,s=n.x,i=n.y;return{x:Math.min(r,s),y:Math.min(o,i),width:Math.abs(s-r),height:Math.abs(i-o)}},MOe=function(e){var n=e.x1,r=e.y1,o=e.x2,s=e.y2;return O5({x:n,y:r},{x:o,y:s})},P5=function(){function t(e){POe(this,t),this.scale=e}return ROe(t,[{key:"domain",get:function(){return this.scale.domain}},{key:"range",get:function(){return this.scale.range}},{key:"rangeMin",get:function(){return this.range()[0]}},{key:"rangeMax",get:function(){return this.range()[1]}},{key:"bandwidth",get:function(){return this.scale.bandwidth}},{key:"apply",value:function(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},o=r.bandAware,s=r.position;if(n!==void 0){if(s)switch(s){case"start":return this.scale(n);case"middle":{var i=this.bandwidth?this.bandwidth()/2:0;return this.scale(n)+i}case"end":{var a=this.bandwidth?this.bandwidth():0;return this.scale(n)+a}default:return this.scale(n)}if(o){var l=this.bandwidth?this.bandwidth()/2:0;return this.scale(n)+l}return this.scale(n)}}},{key:"isInRange",value:function(n){var r=this.range(),o=r[0],s=r[r.length-1];return o<=s?n>=o&&n<=s:n>=s&&n<=o}}],[{key:"create",value:function(n){return new t(n)}}])}();Ow(P5,"EPS",1e-4);var C2=function(e){var n=Object.keys(e).reduce(function(r,o){return fs(fs({},r),{},Ow({},o,P5.create(e[o])))},{});return fs(fs({},n),{},{apply:function(o){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=s.bandAware,a=s.position;return tOe(o,function(l,c){return n[c].apply(l,{bandAware:i,position:a})})},isInRange:function(o){return T5(o,function(s,i){return n[i].isInRange(s)})}})};function FOe(t){return(t%180+180)%180}var LOe=function(e){var n=e.width,r=e.height,o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,s=FOe(o),i=s*Math.PI/180,a=Math.atan(r/n),l=i>a&&i<Math.PI-a?r/Math.sin(i):n/Math.cos(i);return Math.abs(l)},jOe=$l,BOe=sg,zOe=gw;function WOe(t){return function(e,n,r){var o=Object(e);if(!BOe(e)){var s=jOe(n);e=zOe(e),n=function(a){return s(o[a],a,o)}}var i=t(e,n,r);return i>-1?o[s?e[i]:i]:void 0}}var VOe=WOe,UOe=S5;function GOe(t){var e=UOe(t),n=e%1;return e===e?n?e-n:e:0}var HOe=GOe,KOe=VG,qOe=$l,XOe=HOe,YOe=Math.max;function QOe(t,e,n){var r=t==null?0:t.length;if(!r)return-1;var o=n==null?0:XOe(n);return o<0&&(o=YOe(r+o,0)),KOe(t,qOe(e),o)}var ZOe=QOe,JOe=VOe,ePe=ZOe,tPe=JOe(ePe),nPe=tPe;const rPe=ft(nPe);var oPe=Xfe(function(t){return{x:t.left,y:t.top,width:t.width,height:t.height}},function(t){return["l",t.left,"t",t.top,"w",t.width,"h",t.height].join("")}),$2=k.createContext(void 0),k2=k.createContext(void 0),R5=k.createContext(void 0),_5=k.createContext({}),D5=k.createContext(void 0),M5=k.createContext(0),F5=k.createContext(0),cL=function(e){var n=e.state,r=n.xAxisMap,o=n.yAxisMap,s=n.offset,i=e.clipPathId,a=e.children,l=e.width,c=e.height,u=oPe(s);return z.createElement($2.Provider,{value:r},z.createElement(k2.Provider,{value:o},z.createElement(_5.Provider,{value:s},z.createElement(R5.Provider,{value:u},z.createElement(D5.Provider,{value:i},z.createElement(M5.Provider,{value:c},z.createElement(F5.Provider,{value:l},a)))))))},sPe=function(){return k.useContext(D5)},L5=function(e){var n=k.useContext($2);n==null&&Fc();var r=n[e];return r==null&&Fc(),r},iPe=function(){var e=k.useContext($2);return Aa(e)},aPe=function(){var e=k.useContext(k2),n=rPe(e,function(r){return T5(r.domain,Number.isFinite)});return n||Aa(e)},j5=function(e){var n=k.useContext(k2);n==null&&Fc();var r=n[e];return r==null&&Fc(),r},lPe=function(){var e=k.useContext(R5);return e},cPe=function(){return k.useContext(_5)},T2=function(){return k.useContext(F5)},I2=function(){return k.useContext(M5)};function ef(t){"@babel/helpers - typeof";return ef=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ef(t)}function uPe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function dPe(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,z5(r.key),r)}}function fPe(t,e,n){return e&&dPe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function hPe(t,e,n){return e=kb(e),pPe(t,B5()?Reflect.construct(e,n||[],kb(t).constructor):e.apply(t,n))}function pPe(t,e){if(e&&(ef(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return mPe(t)}function mPe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function B5(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(B5=function(){return!!t})()}function kb(t){return kb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},kb(t)}function gPe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&LT(t,e)}function LT(t,e){return LT=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,o){return r.__proto__=o,r},LT(t,e)}function uL(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),n.push.apply(n,r)}return n}function dL(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?uL(Object(n),!0).forEach(function(r){E2(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):uL(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function E2(t,e,n){return e=z5(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function z5(t){var e=yPe(t,"string");return ef(e)=="symbol"?e:e+""}function yPe(t,e){if(ef(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(ef(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function vPe(t,e){return SPe(t)||wPe(t,e)||bPe(t,e)||xPe()}function xPe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function bPe(t,e){if(t){if(typeof t=="string")return fL(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return fL(t,e)}}function fL(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function wPe(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,o,s,i,a=[],l=!0,c=!1;try{if(s=(n=n.call(t)).next,e!==0)for(;!(l=(r=s.call(n)).done)&&(a.push(r.value),a.length!==e);l=!0);}catch(u){c=!0,o=u}finally{try{if(!l&&n.return!=null&&(i=n.return(),Object(i)!==i))return}finally{if(c)throw o}}return a}}function SPe(t){if(Array.isArray(t))return t}function jT(){return jT=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},jT.apply(this,arguments)}var CPe=function(e,n){var r;return z.isValidElement(e)?r=z.cloneElement(e,n):Ue(e)?r=e(n):r=z.createElement("line",jT({},n,{className:"recharts-reference-line-line"})),r},$Pe=function(e,n,r,o,s,i,a,l,c){var u=s.x,d=s.y,f=s.width,h=s.height;if(r){var p=c.y,m=e.y.apply(p,{position:i});if(ii(c,"discard")&&!e.y.isInRange(m))return null;var g=[{x:u+f,y:m},{x:u,y:m}];return l==="left"?g.reverse():g}if(n){var y=c.x,v=e.x.apply(y,{position:i});if(ii(c,"discard")&&!e.x.isInRange(v))return null;var x=[{x:v,y:d+h},{x:v,y:d}];return a==="top"?x.reverse():x}if(o){var b=c.segment,w=b.map(function(C){return e.apply(C,{position:i})});return ii(c,"discard")&&KAe(w,function(C){return!e.isInRange(C)})?null:w}return null};function kPe(t){var e=t.x,n=t.y,r=t.segment,o=t.xAxisId,s=t.yAxisId,i=t.shape,a=t.className,l=t.alwaysShow,c=sPe(),u=L5(o),d=j5(s),f=lPe();if(!c||!f)return null;Bi(l===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var h=C2({x:u.scale,y:d.scale}),p=In(e),m=In(n),g=r&&r.length===2,y=$Pe(h,p,m,g,f,t.position,u.orientation,d.orientation,t);if(!y)return null;var v=vPe(y,2),x=v[0],b=x.x,w=x.y,C=v[1],$=C.x,T=C.y,I=ii(t,"hidden")?"url(#".concat(c,")"):void 0,E=dL(dL({clipPath:I},Ye(t,!0)),{},{x1:b,y1:w,x2:$,y2:T});return z.createElement(Gt,{className:st("recharts-reference-line",a)},CPe(i,E),lr.renderCallByParent(t,MOe({x1:b,y1:w,x2:$,y2:T})))}var N2=function(t){function e(){return uPe(this,e),hPe(this,e,arguments)}return gPe(e,t),fPe(e,[{key:"render",value:function(){return z.createElement(kPe,this.props)}}])}(z.Component);E2(N2,"displayName","ReferenceLine");E2(N2,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,fill:"none",stroke:"#ccc",fillOpacity:1,strokeWidth:1,position:"middle"});function BT(){return BT=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},BT.apply(this,arguments)}function tf(t){"@babel/helpers - typeof";return tf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},tf(t)}function hL(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),n.push.apply(n,r)}return n}function pL(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?hL(Object(n),!0).forEach(function(r){Pw(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):hL(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function TPe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function IPe(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,V5(r.key),r)}}function EPe(t,e,n){return e&&IPe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function NPe(t,e,n){return e=Tb(e),APe(t,W5()?Reflect.construct(e,n||[],Tb(t).constructor):e.apply(t,n))}function APe(t,e){if(e&&(tf(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return OPe(t)}function OPe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function W5(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(W5=function(){return!!t})()}function Tb(t){return Tb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Tb(t)}function PPe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&zT(t,e)}function zT(t,e){return zT=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,o){return r.__proto__=o,r},zT(t,e)}function Pw(t,e,n){return e=V5(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function V5(t){var e=RPe(t,"string");return tf(e)=="symbol"?e:e+""}function RPe(t,e){if(tf(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(tf(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var _Pe=function(e){var n=e.x,r=e.y,o=e.xAxis,s=e.yAxis,i=C2({x:o.scale,y:s.scale}),a=i.apply({x:n,y:r},{bandAware:!0});return ii(e,"discard")&&!i.isInRange(a)?null:a},Rw=function(t){function e(){return TPe(this,e),NPe(this,e,arguments)}return PPe(e,t),EPe(e,[{key:"render",value:function(){var r=this.props,o=r.x,s=r.y,i=r.r,a=r.alwaysShow,l=r.clipPathId,c=In(o),u=In(s);if(Bi(a===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.'),!c||!u)return null;var d=_Pe(this.props);if(!d)return null;var f=d.x,h=d.y,p=this.props,m=p.shape,g=p.className,y=ii(this.props,"hidden")?"url(#".concat(l,")"):void 0,v=pL(pL({clipPath:y},Ye(this.props,!0)),{},{cx:f,cy:h});return z.createElement(Gt,{className:st("recharts-reference-dot",g)},e.renderDot(m,v),lr.renderCallByParent(this.props,{x:f-i,y:h-i,width:2*i,height:2*i}))}}])}(z.Component);Pw(Rw,"displayName","ReferenceDot");Pw(Rw,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#fff",stroke:"#ccc",fillOpacity:1,strokeWidth:1});Pw(Rw,"renderDot",function(t,e){var n;return z.isValidElement(t)?n=z.cloneElement(t,e):Ue(t)?n=t(e):n=z.createElement(S2,BT({},e,{cx:e.cx,cy:e.cy,className:"recharts-reference-dot-dot"})),n});function WT(){return WT=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},WT.apply(this,arguments)}function nf(t){"@babel/helpers - typeof";return nf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},nf(t)}function mL(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),n.push.apply(n,r)}return n}function gL(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?mL(Object(n),!0).forEach(function(r){_w(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):mL(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function DPe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function MPe(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,G5(r.key),r)}}function FPe(t,e,n){return e&&MPe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function LPe(t,e,n){return e=Ib(e),jPe(t,U5()?Reflect.construct(e,n||[],Ib(t).constructor):e.apply(t,n))}function jPe(t,e){if(e&&(nf(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return BPe(t)}function BPe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function U5(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(U5=function(){return!!t})()}function Ib(t){return Ib=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Ib(t)}function zPe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&VT(t,e)}function VT(t,e){return VT=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,o){return r.__proto__=o,r},VT(t,e)}function _w(t,e,n){return e=G5(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function G5(t){var e=WPe(t,"string");return nf(e)=="symbol"?e:e+""}function WPe(t,e){if(nf(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(nf(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var VPe=function(e,n,r,o,s){var i=s.x1,a=s.x2,l=s.y1,c=s.y2,u=s.xAxis,d=s.yAxis;if(!u||!d)return null;var f=C2({x:u.scale,y:d.scale}),h={x:e?f.x.apply(i,{position:"start"}):f.x.rangeMin,y:r?f.y.apply(l,{position:"start"}):f.y.rangeMin},p={x:n?f.x.apply(a,{position:"end"}):f.x.rangeMax,y:o?f.y.apply(c,{position:"end"}):f.y.rangeMax};return ii(s,"discard")&&(!f.isInRange(h)||!f.isInRange(p))?null:O5(h,p)},Dw=function(t){function e(){return DPe(this,e),LPe(this,e,arguments)}return zPe(e,t),FPe(e,[{key:"render",value:function(){var r=this.props,o=r.x1,s=r.x2,i=r.y1,a=r.y2,l=r.className,c=r.alwaysShow,u=r.clipPathId;Bi(c===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var d=In(o),f=In(s),h=In(i),p=In(a),m=this.props.shape;if(!d&&!f&&!h&&!p&&!m)return null;var g=VPe(d,f,h,p,this.props);if(!g&&!m)return null;var y=ii(this.props,"hidden")?"url(#".concat(u,")"):void 0;return z.createElement(Gt,{className:st("recharts-reference-area",l)},e.renderRect(m,gL(gL({clipPath:y},Ye(this.props,!0)),g)),lr.renderCallByParent(this.props,g))}}])}(z.Component);_w(Dw,"displayName","ReferenceArea");_w(Dw,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#ccc",fillOpacity:.5,stroke:"none",strokeWidth:1});_w(Dw,"renderRect",function(t,e){var n;return z.isValidElement(t)?n=z.cloneElement(t,e):Ue(t)?n=t(e):n=z.createElement(w2,WT({},e,{className:"recharts-reference-area-rect"})),n});function H5(t,e,n){if(e<1)return[];if(e===1&&n===void 0)return t;for(var r=[],o=0;o<t.length;o+=e)r.push(t[o]);return r}function UPe(t,e,n){var r={width:t.width+e.width,height:t.height+e.height};return LOe(r,n)}function GPe(t,e,n){var r=n==="width",o=t.x,s=t.y,i=t.width,a=t.height;return e===1?{start:r?o:s,end:r?o+i:s+a}:{start:r?o+i:s+a,end:r?o:s}}function Eb(t,e,n,r,o){if(t*e<t*r||t*e>t*o)return!1;var s=n();return t*(e-t*s/2-r)>=0&&t*(e+t*s/2-o)<=0}function HPe(t,e){return H5(t,e+1)}function KPe(t,e,n,r,o){for(var s=(r||[]).slice(),i=e.start,a=e.end,l=0,c=1,u=i,d=function(){var p=r==null?void 0:r[l];if(p===void 0)return{v:H5(r,c)};var m=l,g,y=function(){return g===void 0&&(g=n(p,m)),g},v=p.coordinate,x=l===0||Eb(t,v,y,u,a);x||(l=0,u=i,c+=1),x&&(u=v+t*(y()/2+o),l+=c)},f;c<=s.length;)if(f=d(),f)return f.v;return[]}function vm(t){"@babel/helpers - typeof";return vm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},vm(t)}function yL(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),n.push.apply(n,r)}return n}function or(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?yL(Object(n),!0).forEach(function(r){qPe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):yL(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function qPe(t,e,n){return e=XPe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function XPe(t){var e=YPe(t,"string");return vm(e)=="symbol"?e:e+""}function YPe(t,e){if(vm(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(vm(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function QPe(t,e,n,r,o){for(var s=(r||[]).slice(),i=s.length,a=e.start,l=e.end,c=function(f){var h=s[f],p,m=function(){return p===void 0&&(p=n(h,f)),p};if(f===i-1){var g=t*(h.coordinate+t*m()/2-l);s[f]=h=or(or({},h),{},{tickCoord:g>0?h.coordinate-g*t:h.coordinate})}else s[f]=h=or(or({},h),{},{tickCoord:h.coordinate});var y=Eb(t,h.tickCoord,m,a,l);y&&(l=h.tickCoord-t*(m()/2+o),s[f]=or(or({},h),{},{isShow:!0}))},u=i-1;u>=0;u--)c(u);return s}function ZPe(t,e,n,r,o,s){var i=(r||[]).slice(),a=i.length,l=e.start,c=e.end;if(s){var u=r[a-1],d=n(u,a-1),f=t*(u.coordinate+t*d/2-c);i[a-1]=u=or(or({},u),{},{tickCoord:f>0?u.coordinate-f*t:u.coordinate});var h=Eb(t,u.tickCoord,function(){return d},l,c);h&&(c=u.tickCoord-t*(d/2+o),i[a-1]=or(or({},u),{},{isShow:!0}))}for(var p=s?a-1:a,m=function(v){var x=i[v],b,w=function(){return b===void 0&&(b=n(x,v)),b};if(v===0){var C=t*(x.coordinate-t*w()/2-l);i[v]=x=or(or({},x),{},{tickCoord:C<0?x.coordinate-C*t:x.coordinate})}else i[v]=x=or(or({},x),{},{tickCoord:x.coordinate});var $=Eb(t,x.tickCoord,w,l,c);$&&(l=x.tickCoord+t*(w()/2+o),i[v]=or(or({},x),{},{isShow:!0}))},g=0;g<p;g++)m(g);return i}function A2(t,e,n){var r=t.tick,o=t.ticks,s=t.viewBox,i=t.minTickGap,a=t.orientation,l=t.interval,c=t.tickFormatter,u=t.unit,d=t.angle;if(!o||!o.length||!r)return[];if(pe(l)||zi.isSsr)return HPe(o,typeof l=="number"&&pe(l)?l:0);var f=[],h=a==="top"||a==="bottom"?"width":"height",p=u&&h==="width"?lp(u,{fontSize:e,letterSpacing:n}):{width:0,height:0},m=function(x,b){var w=Ue(c)?c(x.value,b):x.value;return h==="width"?UPe(lp(w,{fontSize:e,letterSpacing:n}),p,d):lp(w,{fontSize:e,letterSpacing:n})[h]},g=o.length>=2?ws(o[1].coordinate-o[0].coordinate):1,y=GPe(s,g,h);return l==="equidistantPreserveStart"?KPe(g,y,m,o,i):(l==="preserveStart"||l==="preserveStartEnd"?f=ZPe(g,y,m,o,i,l==="preserveStartEnd"):f=QPe(g,y,m,o,i),f.filter(function(v){return v.isShow}))}var JPe=["viewBox"],eRe=["viewBox"],tRe=["ticks"];function rf(t){"@babel/helpers - typeof";return rf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},rf(t)}function qu(){return qu=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},qu.apply(this,arguments)}function vL(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),n.push.apply(n,r)}return n}function gr(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?vL(Object(n),!0).forEach(function(r){O2(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):vL(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function PC(t,e){if(t==null)return{};var n=nRe(t,e),r,o;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(o=0;o<s.length;o++)r=s[o],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function nRe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function rRe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function xL(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,q5(r.key),r)}}function oRe(t,e,n){return e&&xL(t.prototype,e),n&&xL(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function sRe(t,e,n){return e=Nb(e),iRe(t,K5()?Reflect.construct(e,n||[],Nb(t).constructor):e.apply(t,n))}function iRe(t,e){if(e&&(rf(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return aRe(t)}function aRe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function K5(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(K5=function(){return!!t})()}function Nb(t){return Nb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Nb(t)}function lRe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&UT(t,e)}function UT(t,e){return UT=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,o){return r.__proto__=o,r},UT(t,e)}function O2(t,e,n){return e=q5(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function q5(t){var e=cRe(t,"string");return rf(e)=="symbol"?e:e+""}function cRe(t,e){if(rf(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(rf(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Uf=function(t){function e(n){var r;return rRe(this,e),r=sRe(this,e,[n]),r.state={fontSize:"",letterSpacing:""},r}return lRe(e,t),oRe(e,[{key:"shouldComponentUpdate",value:function(r,o){var s=r.viewBox,i=PC(r,JPe),a=this.props,l=a.viewBox,c=PC(a,eRe);return!ld(s,l)||!ld(i,c)||!ld(o,this.state)}},{key:"componentDidMount",value:function(){var r=this.layerReference;if(r){var o=r.getElementsByClassName("recharts-cartesian-axis-tick-value")[0];o&&this.setState({fontSize:window.getComputedStyle(o).fontSize,letterSpacing:window.getComputedStyle(o).letterSpacing})}}},{key:"getTickLineCoord",value:function(r){var o=this.props,s=o.x,i=o.y,a=o.width,l=o.height,c=o.orientation,u=o.tickSize,d=o.mirror,f=o.tickMargin,h,p,m,g,y,v,x=d?-1:1,b=r.tickSize||u,w=pe(r.tickCoord)?r.tickCoord:r.coordinate;switch(c){case"top":h=p=r.coordinate,g=i+ +!d*l,m=g-x*b,v=m-x*f,y=w;break;case"left":m=g=r.coordinate,p=s+ +!d*a,h=p-x*b,y=h-x*f,v=w;break;case"right":m=g=r.coordinate,p=s+ +d*a,h=p+x*b,y=h+x*f,v=w;break;default:h=p=r.coordinate,g=i+ +d*l,m=g+x*b,v=m+x*f,y=w;break}return{line:{x1:h,y1:m,x2:p,y2:g},tick:{x:y,y:v}}}},{key:"getTickTextAnchor",value:function(){var r=this.props,o=r.orientation,s=r.mirror,i;switch(o){case"left":i=s?"start":"end";break;case"right":i=s?"end":"start";break;default:i="middle";break}return i}},{key:"getTickVerticalAnchor",value:function(){var r=this.props,o=r.orientation,s=r.mirror,i="end";switch(o){case"left":case"right":i="middle";break;case"top":i=s?"start":"end";break;default:i=s?"end":"start";break}return i}},{key:"renderAxisLine",value:function(){var r=this.props,o=r.x,s=r.y,i=r.width,a=r.height,l=r.orientation,c=r.mirror,u=r.axisLine,d=gr(gr(gr({},Ye(this.props,!1)),Ye(u,!1)),{},{fill:"none"});if(l==="top"||l==="bottom"){var f=+(l==="top"&&!c||l==="bottom"&&c);d=gr(gr({},d),{},{x1:o,y1:s+f*a,x2:o+i,y2:s+f*a})}else{var h=+(l==="left"&&!c||l==="right"&&c);d=gr(gr({},d),{},{x1:o+h*i,y1:s,x2:o+h*i,y2:s+a})}return z.createElement("line",qu({},d,{className:st("recharts-cartesian-axis-line",Vo(u,"className"))}))}},{key:"renderTicks",value:function(r,o,s){var i=this,a=this.props,l=a.tickLine,c=a.stroke,u=a.tick,d=a.tickFormatter,f=a.unit,h=A2(gr(gr({},this.props),{},{ticks:r}),o,s),p=this.getTickTextAnchor(),m=this.getTickVerticalAnchor(),g=Ye(this.props,!1),y=Ye(u,!1),v=gr(gr({},g),{},{fill:"none"},Ye(l,!1)),x=h.map(function(b,w){var C=i.getTickLineCoord(b),$=C.line,T=C.tick,I=gr(gr(gr(gr({textAnchor:p,verticalAnchor:m},g),{},{stroke:"none",fill:c},y),T),{},{index:w,payload:b,visibleTicksCount:h.length,tickFormatter:d});return z.createElement(Gt,qu({className:"recharts-cartesian-axis-tick",key:"tick-".concat(b.value,"-").concat(b.coordinate,"-").concat(b.tickCoord)},Fx(i.props,b,w)),l&&z.createElement("line",qu({},v,$,{className:st("recharts-cartesian-axis-tick-line",Vo(l,"className"))})),u&&e.renderTickItem(u,I,"".concat(Ue(d)?d(b.value,w):b.value).concat(f||"")))});return z.createElement("g",{className:"recharts-cartesian-axis-ticks"},x)}},{key:"render",value:function(){var r=this,o=this.props,s=o.axisLine,i=o.width,a=o.height,l=o.ticksGenerator,c=o.className,u=o.hide;if(u)return null;var d=this.props,f=d.ticks,h=PC(d,tRe),p=f;return Ue(l)&&(p=f&&f.length>0?l(this.props):l(h)),i<=0||a<=0||!p||!p.length?null:z.createElement(Gt,{className:st("recharts-cartesian-axis",c),ref:function(g){r.layerReference=g}},s&&this.renderAxisLine(),this.renderTicks(p,this.state.fontSize,this.state.letterSpacing),lr.renderCallByParent(this.props))}}],[{key:"renderTickItem",value:function(r,o,s){var i;return z.isValidElement(r)?i=z.cloneElement(r,o):Ue(r)?i=r(o):i=z.createElement(Qx,qu({},o,{className:"recharts-cartesian-axis-tick-value"}),s),i}}])}(k.Component);O2(Uf,"displayName","CartesianAxis");O2(Uf,"defaultProps",{x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd"});var uRe=["x1","y1","x2","y2","key"],dRe=["offset"];function Lc(t){"@babel/helpers - typeof";return Lc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Lc(t)}function bL(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),n.push.apply(n,r)}return n}function cr(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?bL(Object(n),!0).forEach(function(r){fRe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):bL(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function fRe(t,e,n){return e=hRe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function hRe(t){var e=pRe(t,"string");return Lc(e)=="symbol"?e:e+""}function pRe(t,e){if(Lc(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Lc(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function oc(){return oc=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},oc.apply(this,arguments)}function wL(t,e){if(t==null)return{};var n=mRe(t,e),r,o;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(o=0;o<s.length;o++)r=s[o],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function mRe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}var gRe=function(e){var n=e.fill;if(!n||n==="none")return null;var r=e.fillOpacity,o=e.x,s=e.y,i=e.width,a=e.height,l=e.ry;return z.createElement("rect",{x:o,y:s,ry:l,width:i,height:a,stroke:"none",fill:n,fillOpacity:r,className:"recharts-cartesian-grid-bg"})};function X5(t,e){var n;if(z.isValidElement(t))n=z.cloneElement(t,e);else if(Ue(t))n=t(e);else{var r=e.x1,o=e.y1,s=e.x2,i=e.y2,a=e.key,l=wL(e,uRe),c=Ye(l,!1);c.offset;var u=wL(c,dRe);n=z.createElement("line",oc({},u,{x1:r,y1:o,x2:s,y2:i,fill:"none",key:a}))}return n}function yRe(t){var e=t.x,n=t.width,r=t.horizontal,o=r===void 0?!0:r,s=t.horizontalPoints;if(!o||!s||!s.length)return null;var i=s.map(function(a,l){var c=cr(cr({},t),{},{x1:e,y1:a,x2:e+n,y2:a,key:"line-".concat(l),index:l});return X5(o,c)});return z.createElement("g",{className:"recharts-cartesian-grid-horizontal"},i)}function vRe(t){var e=t.y,n=t.height,r=t.vertical,o=r===void 0?!0:r,s=t.verticalPoints;if(!o||!s||!s.length)return null;var i=s.map(function(a,l){var c=cr(cr({},t),{},{x1:a,y1:e,x2:a,y2:e+n,key:"line-".concat(l),index:l});return X5(o,c)});return z.createElement("g",{className:"recharts-cartesian-grid-vertical"},i)}function xRe(t){var e=t.horizontalFill,n=t.fillOpacity,r=t.x,o=t.y,s=t.width,i=t.height,a=t.horizontalPoints,l=t.horizontal,c=l===void 0?!0:l;if(!c||!e||!e.length)return null;var u=a.map(function(f){return Math.round(f+o-o)}).sort(function(f,h){return f-h});o!==u[0]&&u.unshift(0);var d=u.map(function(f,h){var p=!u[h+1],m=p?o+i-f:u[h+1]-f;if(m<=0)return null;var g=h%e.length;return z.createElement("rect",{key:"react-".concat(h),y:f,x:r,height:m,width:s,stroke:"none",fill:e[g],fillOpacity:n,className:"recharts-cartesian-grid-bg"})});return z.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},d)}function bRe(t){var e=t.vertical,n=e===void 0?!0:e,r=t.verticalFill,o=t.fillOpacity,s=t.x,i=t.y,a=t.width,l=t.height,c=t.verticalPoints;if(!n||!r||!r.length)return null;var u=c.map(function(f){return Math.round(f+s-s)}).sort(function(f,h){return f-h});s!==u[0]&&u.unshift(0);var d=u.map(function(f,h){var p=!u[h+1],m=p?s+a-f:u[h+1]-f;if(m<=0)return null;var g=h%r.length;return z.createElement("rect",{key:"react-".concat(h),x:f,y:i,width:m,height:l,stroke:"none",fill:r[g],fillOpacity:o,className:"recharts-cartesian-grid-bg"})});return z.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},d)}var wRe=function(e,n){var r=e.xAxis,o=e.width,s=e.height,i=e.offset;return l5(A2(cr(cr(cr({},Uf.defaultProps),r),{},{ticks:_i(r,!0),viewBox:{x:0,y:0,width:o,height:s}})),i.left,i.left+i.width,n)},SRe=function(e,n){var r=e.yAxis,o=e.width,s=e.height,i=e.offset;return l5(A2(cr(cr(cr({},Uf.defaultProps),r),{},{ticks:_i(r,!0),viewBox:{x:0,y:0,width:o,height:s}})),i.top,i.top+i.height,n)},Eu={horizontal:!0,vertical:!0,horizontalPoints:[],verticalPoints:[],stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[]};function GT(t){var e,n,r,o,s,i,a=T2(),l=I2(),c=cPe(),u=cr(cr({},t),{},{stroke:(e=t.stroke)!==null&&e!==void 0?e:Eu.stroke,fill:(n=t.fill)!==null&&n!==void 0?n:Eu.fill,horizontal:(r=t.horizontal)!==null&&r!==void 0?r:Eu.horizontal,horizontalFill:(o=t.horizontalFill)!==null&&o!==void 0?o:Eu.horizontalFill,vertical:(s=t.vertical)!==null&&s!==void 0?s:Eu.vertical,verticalFill:(i=t.verticalFill)!==null&&i!==void 0?i:Eu.verticalFill,x:pe(t.x)?t.x:c.left,y:pe(t.y)?t.y:c.top,width:pe(t.width)?t.width:c.width,height:pe(t.height)?t.height:c.height}),d=u.x,f=u.y,h=u.width,p=u.height,m=u.syncWithTicks,g=u.horizontalValues,y=u.verticalValues,v=iPe(),x=aPe();if(!pe(h)||h<=0||!pe(p)||p<=0||!pe(d)||d!==+d||!pe(f)||f!==+f)return null;var b=u.verticalCoordinatesGenerator||wRe,w=u.horizontalCoordinatesGenerator||SRe,C=u.horizontalPoints,$=u.verticalPoints;if((!C||!C.length)&&Ue(w)){var T=g&&g.length,I=w({yAxis:x?cr(cr({},x),{},{ticks:T?g:x.ticks}):void 0,width:a,height:l,offset:c},T?!0:m);Bi(Array.isArray(I),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(Lc(I),"]")),Array.isArray(I)&&(C=I)}if((!$||!$.length)&&Ue(b)){var E=y&&y.length,N=b({xAxis:v?cr(cr({},v),{},{ticks:E?y:v.ticks}):void 0,width:a,height:l,offset:c},E?!0:m);Bi(Array.isArray(N),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(Lc(N),"]")),Array.isArray(N)&&($=N)}return z.createElement("g",{className:"recharts-cartesian-grid"},z.createElement(gRe,{fill:u.fill,fillOpacity:u.fillOpacity,x:u.x,y:u.y,width:u.width,height:u.height,ry:u.ry}),z.createElement(yRe,oc({},u,{offset:c,horizontalPoints:C,xAxis:v,yAxis:x})),z.createElement(vRe,oc({},u,{offset:c,verticalPoints:$,xAxis:v,yAxis:x})),z.createElement(xRe,oc({},u,{horizontalPoints:C})),z.createElement(bRe,oc({},u,{verticalPoints:$})))}GT.displayName="CartesianGrid";var CRe=["layout","type","stroke","connectNulls","isRange","ref"],$Re=["key"],Y5;function of(t){"@babel/helpers - typeof";return of=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},of(t)}function Q5(t,e){if(t==null)return{};var n=kRe(t,e),r,o;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(o=0;o<s.length;o++)r=s[o],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function kRe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function sc(){return sc=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},sc.apply(this,arguments)}function SL(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),n.push.apply(n,r)}return n}function Sa(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?SL(Object(n),!0).forEach(function(r){ei(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):SL(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function TRe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function CL(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,J5(r.key),r)}}function IRe(t,e,n){return e&&CL(t.prototype,e),n&&CL(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function ERe(t,e,n){return e=Ab(e),NRe(t,Z5()?Reflect.construct(e,n||[],Ab(t).constructor):e.apply(t,n))}function NRe(t,e){if(e&&(of(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return ARe(t)}function ARe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Z5(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Z5=function(){return!!t})()}function Ab(t){return Ab=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Ab(t)}function ORe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&HT(t,e)}function HT(t,e){return HT=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,o){return r.__proto__=o,r},HT(t,e)}function ei(t,e,n){return e=J5(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function J5(t){var e=PRe(t,"string");return of(e)=="symbol"?e:e+""}function PRe(t,e){if(of(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(of(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var wr=function(t){function e(){var n;TRe(this,e);for(var r=arguments.length,o=new Array(r),s=0;s<r;s++)o[s]=arguments[s];return n=ERe(this,e,[].concat(o)),ei(n,"state",{isAnimationFinished:!0}),ei(n,"id",og("recharts-area-")),ei(n,"handleAnimationEnd",function(){var i=n.props.onAnimationEnd;n.setState({isAnimationFinished:!0}),Ue(i)&&i()}),ei(n,"handleAnimationStart",function(){var i=n.props.onAnimationStart;n.setState({isAnimationFinished:!1}),Ue(i)&&i()}),n}return ORe(e,t),IRe(e,[{key:"renderDots",value:function(r,o,s){var i=this.props.isAnimationActive,a=this.state.isAnimationFinished;if(i&&!a)return null;var l=this.props,c=l.dot,u=l.points,d=l.dataKey,f=Ye(this.props,!1),h=Ye(c,!0),p=u.map(function(g,y){var v=Sa(Sa(Sa({key:"dot-".concat(y),r:3},f),h),{},{index:y,cx:g.x,cy:g.y,dataKey:d,value:g.value,payload:g.payload,points:u});return e.renderDotItem(c,v)}),m={clipPath:r?"url(#clipPath-".concat(o?"":"dots-").concat(s,")"):null};return z.createElement(Gt,sc({className:"recharts-area-dots"},m),p)}},{key:"renderHorizontalRect",value:function(r){var o=this.props,s=o.baseLine,i=o.points,a=o.strokeWidth,l=i[0].x,c=i[i.length-1].x,u=r*Math.abs(l-c),d=Ba(i.map(function(f){return f.y||0}));return pe(s)&&typeof s=="number"?d=Math.max(s,d):s&&Array.isArray(s)&&s.length&&(d=Math.max(Ba(s.map(function(f){return f.y||0})),d)),pe(d)?z.createElement("rect",{x:l<c?l:l-u,y:0,width:u,height:Math.floor(d+(a?parseInt("".concat(a),10):1))}):null}},{key:"renderVerticalRect",value:function(r){var o=this.props,s=o.baseLine,i=o.points,a=o.strokeWidth,l=i[0].y,c=i[i.length-1].y,u=r*Math.abs(l-c),d=Ba(i.map(function(f){return f.x||0}));return pe(s)&&typeof s=="number"?d=Math.max(s,d):s&&Array.isArray(s)&&s.length&&(d=Math.max(Ba(s.map(function(f){return f.x||0})),d)),pe(d)?z.createElement("rect",{x:0,y:l<c?l:l-u,width:d+(a?parseInt("".concat(a),10):1),height:Math.floor(u)}):null}},{key:"renderClipRect",value:function(r){var o=this.props.layout;return o==="vertical"?this.renderVerticalRect(r):this.renderHorizontalRect(r)}},{key:"renderAreaStatically",value:function(r,o,s,i){var a=this.props,l=a.layout,c=a.type,u=a.stroke,d=a.connectNulls,f=a.isRange;a.ref;var h=Q5(a,CRe);return z.createElement(Gt,{clipPath:s?"url(#clipPath-".concat(i,")"):null},z.createElement(dp,sc({},Ye(h,!0),{points:r,connectNulls:d,type:c,baseLine:o,layout:l,stroke:"none",className:"recharts-area-area"})),u!=="none"&&z.createElement(dp,sc({},Ye(this.props,!1),{className:"recharts-area-curve",layout:l,type:c,connectNulls:d,fill:"none",points:r})),u!=="none"&&f&&z.createElement(dp,sc({},Ye(this.props,!1),{className:"recharts-area-curve",layout:l,type:c,connectNulls:d,fill:"none",points:o})))}},{key:"renderAreaWithAnimation",value:function(r,o){var s=this,i=this.props,a=i.points,l=i.baseLine,c=i.isAnimationActive,u=i.animationBegin,d=i.animationDuration,f=i.animationEasing,h=i.animationId,p=this.state,m=p.prevPoints,g=p.prevBaseLine;return z.createElement(ea,{begin:u,duration:d,isActive:c,easing:f,from:{t:0},to:{t:1},key:"area-".concat(h),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(y){var v=y.t;if(m){var x=m.length/a.length,b=a.map(function(T,I){var E=Math.floor(I*x);if(m[E]){var N=m[E],A=Ro(N.x,T.x),R=Ro(N.y,T.y);return Sa(Sa({},T),{},{x:A(v),y:R(v)})}return T}),w;if(pe(l)&&typeof l=="number"){var C=Ro(g,l);w=C(v)}else if(tt(l)||Ff(l)){var $=Ro(g,0);w=$(v)}else w=l.map(function(T,I){var E=Math.floor(I*x);if(g[E]){var N=g[E],A=Ro(N.x,T.x),R=Ro(N.y,T.y);return Sa(Sa({},T),{},{x:A(v),y:R(v)})}return T});return s.renderAreaStatically(b,w,r,o)}return z.createElement(Gt,null,z.createElement("defs",null,z.createElement("clipPath",{id:"animationClipPath-".concat(o)},s.renderClipRect(v))),z.createElement(Gt,{clipPath:"url(#animationClipPath-".concat(o,")")},s.renderAreaStatically(a,l,r,o)))})}},{key:"renderArea",value:function(r,o){var s=this.props,i=s.points,a=s.baseLine,l=s.isAnimationActive,c=this.state,u=c.prevPoints,d=c.prevBaseLine,f=c.totalLength;return l&&i&&i.length&&(!u&&f>0||!Qp(u,i)||!Qp(d,a))?this.renderAreaWithAnimation(r,o):this.renderAreaStatically(i,a,r,o)}},{key:"render",value:function(){var r,o=this.props,s=o.hide,i=o.dot,a=o.points,l=o.className,c=o.top,u=o.left,d=o.xAxis,f=o.yAxis,h=o.width,p=o.height,m=o.isAnimationActive,g=o.id;if(s||!a||!a.length)return null;var y=this.state.isAnimationFinished,v=a.length===1,x=st("recharts-area",l),b=d&&d.allowDataOverflow,w=f&&f.allowDataOverflow,C=b||w,$=tt(g)?this.id:g,T=(r=Ye(i,!1))!==null&&r!==void 0?r:{r:3,strokeWidth:2},I=T.r,E=I===void 0?3:I,N=T.strokeWidth,A=N===void 0?2:N,R=tpe(i)?i:{},P=R.clipDot,F=P===void 0?!0:P,_=E*2+A;return z.createElement(Gt,{className:x},b||w?z.createElement("defs",null,z.createElement("clipPath",{id:"clipPath-".concat($)},z.createElement("rect",{x:b?u:u-h/2,y:w?c:c-p/2,width:b?h:h*2,height:w?p:p*2})),!F&&z.createElement("clipPath",{id:"clipPath-dots-".concat($)},z.createElement("rect",{x:u-_/2,y:c-_/2,width:h+_,height:p+_}))):null,v?null:this.renderArea(C,$),(i||v)&&this.renderDots(C,F,$),(!m||y)&&tl.renderCallByParent(this.props,a))}}],[{key:"getDerivedStateFromProps",value:function(r,o){return r.animationId!==o.prevAnimationId?{prevAnimationId:r.animationId,curPoints:r.points,curBaseLine:r.baseLine,prevPoints:o.curPoints,prevBaseLine:o.curBaseLine}:r.points!==o.curPoints||r.baseLine!==o.curBaseLine?{curPoints:r.points,curBaseLine:r.baseLine}:null}}])}(k.PureComponent);Y5=wr;ei(wr,"displayName","Area");ei(wr,"defaultProps",{stroke:"#3182bd",fill:"#3182bd",fillOpacity:.6,xAxisId:0,yAxisId:0,legendType:"line",connectNulls:!1,points:[],dot:!1,activeDot:!0,hide:!1,isAnimationActive:!zi.isSsr,animationBegin:0,animationDuration:1500,animationEasing:"ease"});ei(wr,"getBaseValue",function(t,e,n,r){var o=t.layout,s=t.baseValue,i=e.props.baseValue,a=i??s;if(pe(a)&&typeof a=="number")return a;var l=o==="horizontal"?r:n,c=l.scale.domain();if(l.type==="number"){var u=Math.max(c[0],c[1]),d=Math.min(c[0],c[1]);return a==="dataMin"?d:a==="dataMax"||u<0?u:Math.max(Math.min(c[0],c[1]),0)}return a==="dataMin"?c[0]:a==="dataMax"?c[1]:c[0]});ei(wr,"getComposedData",function(t){var e=t.props,n=t.item,r=t.xAxis,o=t.yAxis,s=t.xAxisTicks,i=t.yAxisTicks,a=t.bandSize,l=t.dataKey,c=t.stackedData,u=t.dataStartIndex,d=t.displayedData,f=t.offset,h=e.layout,p=c&&c.length,m=Y5.getBaseValue(e,n,r,o),g=h==="horizontal",y=!1,v=d.map(function(b,w){var C;p?C=c[u+w]:(C=go(b,l),Array.isArray(C)?y=!0:C=[m,C]);var $=C[1]==null||p&&go(b,l)==null;return g?{x:oF({axis:r,ticks:s,bandSize:a,entry:b,index:w}),y:$?null:o.scale(C[1]),value:C,payload:b}:{x:$?null:r.scale(C[1]),y:oF({axis:o,ticks:i,bandSize:a,entry:b,index:w}),value:C,payload:b}}),x;return p||y?x=v.map(function(b){var w=Array.isArray(b.value)?b.value[0]:null;return g?{x:b.x,y:w!=null&&b.y!=null?o.scale(w):null}:{x:w!=null?r.scale(w):null,y:b.y}}):x=g?o.scale(m):r.scale(m),Sa({points:v,baseLine:x,layout:h,isRange:y},f)});ei(wr,"renderDotItem",function(t,e){var n;if(z.isValidElement(t))n=z.cloneElement(t,e);else if(Ue(t))n=t(e);else{var r=st("recharts-area-dot",typeof t!="boolean"?t.className:""),o=e.key,s=Q5(e,$Re);n=z.createElement(S2,sc({},s,{key:o,className:r}))}return n});function sf(t){"@babel/helpers - typeof";return sf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},sf(t)}function RRe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _Re(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,n6(r.key),r)}}function DRe(t,e,n){return e&&_Re(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function MRe(t,e,n){return e=Ob(e),FRe(t,e6()?Reflect.construct(e,n||[],Ob(t).constructor):e.apply(t,n))}function FRe(t,e){if(e&&(sf(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return LRe(t)}function LRe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function e6(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(e6=function(){return!!t})()}function Ob(t){return Ob=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Ob(t)}function jRe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&KT(t,e)}function KT(t,e){return KT=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,o){return r.__proto__=o,r},KT(t,e)}function t6(t,e,n){return e=n6(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function n6(t){var e=BRe(t,"string");return sf(e)=="symbol"?e:e+""}function BRe(t,e){if(sf(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(sf(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function qT(){return qT=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},qT.apply(this,arguments)}function zRe(t){var e=t.xAxisId,n=T2(),r=I2(),o=L5(e);return o==null?null:z.createElement(Uf,qT({},o,{className:st("recharts-".concat(o.axisType," ").concat(o.axisType),o.className),viewBox:{x:0,y:0,width:n,height:r},ticksGenerator:function(i){return _i(i,!0)}}))}var xm=function(t){function e(){return RRe(this,e),MRe(this,e,arguments)}return jRe(e,t),DRe(e,[{key:"render",value:function(){return z.createElement(zRe,this.props)}}])}(z.Component);t6(xm,"displayName","XAxis");t6(xm,"defaultProps",{allowDecimals:!0,hide:!1,orientation:"bottom",width:0,height:30,mirror:!1,xAxisId:0,tickCount:5,type:"category",padding:{left:0,right:0},allowDataOverflow:!1,scale:"auto",reversed:!1,allowDuplicatedCategory:!0});function af(t){"@babel/helpers - typeof";return af=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},af(t)}function WRe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function VRe(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,s6(r.key),r)}}function URe(t,e,n){return e&&VRe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function GRe(t,e,n){return e=Pb(e),HRe(t,r6()?Reflect.construct(e,n||[],Pb(t).constructor):e.apply(t,n))}function HRe(t,e){if(e&&(af(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return KRe(t)}function KRe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function r6(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(r6=function(){return!!t})()}function Pb(t){return Pb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Pb(t)}function qRe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&XT(t,e)}function XT(t,e){return XT=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,o){return r.__proto__=o,r},XT(t,e)}function o6(t,e,n){return e=s6(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function s6(t){var e=XRe(t,"string");return af(e)=="symbol"?e:e+""}function XRe(t,e){if(af(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(af(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function YT(){return YT=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},YT.apply(this,arguments)}var YRe=function(e){var n=e.yAxisId,r=T2(),o=I2(),s=j5(n);return s==null?null:z.createElement(Uf,YT({},s,{className:st("recharts-".concat(s.axisType," ").concat(s.axisType),s.className),viewBox:{x:0,y:0,width:r,height:o},ticksGenerator:function(a){return _i(a,!0)}}))},bm=function(t){function e(){return WRe(this,e),GRe(this,e,arguments)}return qRe(e,t),URe(e,[{key:"render",value:function(){return z.createElement(YRe,this.props)}}])}(z.Component);o6(bm,"displayName","YAxis");o6(bm,"defaultProps",{allowDuplicatedCategory:!0,allowDecimals:!0,hide:!1,orientation:"left",width:60,height:0,mirror:!1,yAxisId:0,tickCount:5,type:"number",padding:{top:0,bottom:0},allowDataOverflow:!1,scale:"auto",reversed:!1});function $L(t){return e_e(t)||JRe(t)||ZRe(t)||QRe()}function QRe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ZRe(t,e){if(t){if(typeof t=="string")return QT(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return QT(t,e)}}function JRe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function e_e(t){if(Array.isArray(t))return QT(t)}function QT(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var ZT=function(e,n,r,o,s){var i=ks(e,N2),a=ks(e,Rw),l=[].concat($L(i),$L(a)),c=ks(e,Dw),u="".concat(o,"Id"),d=o[0],f=n;if(l.length&&(f=l.reduce(function(m,g){if(g.props[u]===r&&ii(g.props,"extendDomain")&&pe(g.props[d])){var y=g.props[d];return[Math.min(m[0],y),Math.max(m[1],y)]}return m},f)),c.length){var h="".concat(d,"1"),p="".concat(d,"2");f=c.reduce(function(m,g){if(g.props[u]===r&&ii(g.props,"extendDomain")&&pe(g.props[h])&&pe(g.props[p])){var y=g.props[h],v=g.props[p];return[Math.min(m[0],y,v),Math.max(m[1],y,v)]}return m},f)}return s&&s.length&&(f=s.reduce(function(m,g){return pe(g)?[Math.min(m[0],g),Math.max(m[1],g)]:m},f)),f},i6={exports:{}};(function(t){var e=Object.prototype.hasOwnProperty,n="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(n=!1));function o(l,c,u){this.fn=l,this.context=c,this.once=u||!1}function s(l,c,u,d,f){if(typeof u!="function")throw new TypeError("The listener must be a function");var h=new o(u,d||l,f),p=n?n+c:c;return l._events[p]?l._events[p].fn?l._events[p]=[l._events[p],h]:l._events[p].push(h):(l._events[p]=h,l._eventsCount++),l}function i(l,c){--l._eventsCount===0?l._events=new r:delete l._events[c]}function a(){this._events=new r,this._eventsCount=0}a.prototype.eventNames=function(){var c=[],u,d;if(this._eventsCount===0)return c;for(d in u=this._events)e.call(u,d)&&c.push(n?d.slice(1):d);return Object.getOwnPropertySymbols?c.concat(Object.getOwnPropertySymbols(u)):c},a.prototype.listeners=function(c){var u=n?n+c:c,d=this._events[u];if(!d)return[];if(d.fn)return[d.fn];for(var f=0,h=d.length,p=new Array(h);f<h;f++)p[f]=d[f].fn;return p},a.prototype.listenerCount=function(c){var u=n?n+c:c,d=this._events[u];return d?d.fn?1:d.length:0},a.prototype.emit=function(c,u,d,f,h,p){var m=n?n+c:c;if(!this._events[m])return!1;var g=this._events[m],y=arguments.length,v,x;if(g.fn){switch(g.once&&this.removeListener(c,g.fn,void 0,!0),y){case 1:return g.fn.call(g.context),!0;case 2:return g.fn.call(g.context,u),!0;case 3:return g.fn.call(g.context,u,d),!0;case 4:return g.fn.call(g.context,u,d,f),!0;case 5:return g.fn.call(g.context,u,d,f,h),!0;case 6:return g.fn.call(g.context,u,d,f,h,p),!0}for(x=1,v=new Array(y-1);x<y;x++)v[x-1]=arguments[x];g.fn.apply(g.context,v)}else{var b=g.length,w;for(x=0;x<b;x++)switch(g[x].once&&this.removeListener(c,g[x].fn,void 0,!0),y){case 1:g[x].fn.call(g[x].context);break;case 2:g[x].fn.call(g[x].context,u);break;case 3:g[x].fn.call(g[x].context,u,d);break;case 4:g[x].fn.call(g[x].context,u,d,f);break;default:if(!v)for(w=1,v=new Array(y-1);w<y;w++)v[w-1]=arguments[w];g[x].fn.apply(g[x].context,v)}}return!0},a.prototype.on=function(c,u,d){return s(this,c,u,d,!1)},a.prototype.once=function(c,u,d){return s(this,c,u,d,!0)},a.prototype.removeListener=function(c,u,d,f){var h=n?n+c:c;if(!this._events[h])return this;if(!u)return i(this,h),this;var p=this._events[h];if(p.fn)p.fn===u&&(!f||p.once)&&(!d||p.context===d)&&i(this,h);else{for(var m=0,g=[],y=p.length;m<y;m++)(p[m].fn!==u||f&&!p[m].once||d&&p[m].context!==d)&&g.push(p[m]);g.length?this._events[h]=g.length===1?g[0]:g:i(this,h)}return this},a.prototype.removeAllListeners=function(c){var u;return c?(u=n?n+c:c,this._events[u]&&i(this,u)):(this._events=new r,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=n,a.EventEmitter=a,t.exports=a})(i6);var t_e=i6.exports;const n_e=ft(t_e);var RC=new n_e,_C="recharts.syncMouseEvents";function wm(t){"@babel/helpers - typeof";return wm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},wm(t)}function r_e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o_e(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,a6(r.key),r)}}function s_e(t,e,n){return e&&o_e(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function DC(t,e,n){return e=a6(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function a6(t){var e=i_e(t,"string");return wm(e)=="symbol"?e:e+""}function i_e(t,e){if(wm(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(wm(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var a_e=function(){function t(){r_e(this,t),DC(this,"activeIndex",0),DC(this,"coordinateList",[]),DC(this,"layout","horizontal")}return s_e(t,[{key:"setDetails",value:function(n){var r,o=n.coordinateList,s=o===void 0?null:o,i=n.container,a=i===void 0?null:i,l=n.layout,c=l===void 0?null:l,u=n.offset,d=u===void 0?null:u,f=n.mouseHandlerCallback,h=f===void 0?null:f;this.coordinateList=(r=s??this.coordinateList)!==null&&r!==void 0?r:[],this.container=a??this.container,this.layout=c??this.layout,this.offset=d??this.offset,this.mouseHandlerCallback=h??this.mouseHandlerCallback,this.activeIndex=Math.min(Math.max(this.activeIndex,0),this.coordinateList.length-1)}},{key:"focus",value:function(){this.spoofMouse()}},{key:"keyboardEvent",value:function(n){if(this.coordinateList.length!==0)switch(n.key){case"ArrowRight":{if(this.layout!=="horizontal")return;this.activeIndex=Math.min(this.activeIndex+1,this.coordinateList.length-1),this.spoofMouse();break}case"ArrowLeft":{if(this.layout!=="horizontal")return;this.activeIndex=Math.max(this.activeIndex-1,0),this.spoofMouse();break}}}},{key:"setIndex",value:function(n){this.activeIndex=n}},{key:"spoofMouse",value:function(){var n,r;if(this.layout==="horizontal"&&this.coordinateList.length!==0){var o=this.container.getBoundingClientRect(),s=o.x,i=o.y,a=o.height,l=this.coordinateList[this.activeIndex].coordinate,c=((n=window)===null||n===void 0?void 0:n.scrollX)||0,u=((r=window)===null||r===void 0?void 0:r.scrollY)||0,d=s+l+c,f=i+this.offset.top+a/2+u;this.mouseHandlerCallback({pageX:d,pageY:f})}}}])}();function l_e(t,e,n){if(n==="number"&&e===!0&&Array.isArray(t)){var r=t==null?void 0:t[0],o=t==null?void 0:t[1];if(r&&o&&pe(r)&&pe(o))return!0}return!1}function c_e(t,e,n,r){var o=r/2;return{stroke:"none",fill:"#ccc",x:t==="horizontal"?e.x-o:n.left+.5,y:t==="horizontal"?n.top+.5:e.y-o,width:t==="horizontal"?r:n.width-1,height:t==="horizontal"?n.height-1:r}}function l6(t){var e=t.cx,n=t.cy,r=t.radius,o=t.startAngle,s=t.endAngle,i=Un(e,n,r,o),a=Un(e,n,r,s);return{points:[i,a],cx:e,cy:n,radius:r,startAngle:o,endAngle:s}}function u_e(t,e,n){var r,o,s,i;if(t==="horizontal")r=e.x,s=r,o=n.top,i=n.top+n.height;else if(t==="vertical")o=e.y,i=o,r=n.left,s=n.left+n.width;else if(e.cx!=null&&e.cy!=null)if(t==="centric"){var a=e.cx,l=e.cy,c=e.innerRadius,u=e.outerRadius,d=e.angle,f=Un(a,l,c,d),h=Un(a,l,u,d);r=f.x,o=f.y,s=h.x,i=h.y}else return l6(e);return[{x:r,y:o},{x:s,y:i}]}function Sm(t){"@babel/helpers - typeof";return Sm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Sm(t)}function kL(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),n.push.apply(n,r)}return n}function gv(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?kL(Object(n),!0).forEach(function(r){d_e(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):kL(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function d_e(t,e,n){return e=f_e(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function f_e(t){var e=h_e(t,"string");return Sm(e)=="symbol"?e:e+""}function h_e(t,e){if(Sm(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Sm(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function p_e(t){var e,n,r=t.element,o=t.tooltipEventType,s=t.isActive,i=t.activeCoordinate,a=t.activePayload,l=t.offset,c=t.activeTooltipIndex,u=t.tooltipAxisBandSize,d=t.layout,f=t.chartName,h=(e=r.props.cursor)!==null&&e!==void 0?e:(n=r.type.defaultProps)===null||n===void 0?void 0:n.cursor;if(!r||!h||!s||!i||f!=="ScatterChart"&&o!=="axis")return null;var p,m=dp;if(f==="ScatterChart")p=i,m=y2e;else if(f==="BarChart")p=c_e(d,i,l,u),m=w2;else if(d==="radial"){var g=l6(i),y=g.cx,v=g.cy,x=g.radius,b=g.startAngle,w=g.endAngle;p={cx:y,cy:v,startAngle:b,endAngle:w,innerRadius:x,outerRadius:x},m=h5}else p={points:u_e(d,i,l)},m=dp;var C=gv(gv(gv(gv({stroke:"#ccc",pointerEvents:"none"},l),p),Ye(h,!1)),{},{payload:a,payloadIndex:c,className:st("recharts-tooltip-cursor",h.className)});return k.isValidElement(h)?k.cloneElement(h,C):k.createElement(m,C)}var m_e=["item"],g_e=["children","className","width","height","style","compact","title","desc"];function lf(t){"@babel/helpers - typeof";return lf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},lf(t)}function Xu(){return Xu=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Xu.apply(this,arguments)}function TL(t,e){return x_e(t)||v_e(t,e)||u6(t,e)||y_e()}function y_e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function v_e(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,o,s,i,a=[],l=!0,c=!1;try{if(s=(n=n.call(t)).next,e!==0)for(;!(l=(r=s.call(n)).done)&&(a.push(r.value),a.length!==e);l=!0);}catch(u){c=!0,o=u}finally{try{if(!l&&n.return!=null&&(i=n.return(),Object(i)!==i))return}finally{if(c)throw o}}return a}}function x_e(t){if(Array.isArray(t))return t}function IL(t,e){if(t==null)return{};var n=b_e(t,e),r,o;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(o=0;o<s.length;o++)r=s[o],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function b_e(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function w_e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function S_e(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,d6(r.key),r)}}function C_e(t,e,n){return e&&S_e(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function $_e(t,e,n){return e=Rb(e),k_e(t,c6()?Reflect.construct(e,n||[],Rb(t).constructor):e.apply(t,n))}function k_e(t,e){if(e&&(lf(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return T_e(t)}function T_e(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function c6(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(c6=function(){return!!t})()}function Rb(t){return Rb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Rb(t)}function I_e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&JT(t,e)}function JT(t,e){return JT=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,o){return r.__proto__=o,r},JT(t,e)}function cf(t){return A_e(t)||N_e(t)||u6(t)||E_e()}function E_e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function u6(t,e){if(t){if(typeof t=="string")return eI(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return eI(t,e)}}function N_e(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function A_e(t){if(Array.isArray(t))return eI(t)}function eI(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function EL(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),n.push.apply(n,r)}return n}function oe(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?EL(Object(n),!0).forEach(function(r){De(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):EL(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function De(t,e,n){return e=d6(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function d6(t){var e=O_e(t,"string");return lf(e)=="symbol"?e:e+""}function O_e(t,e){if(lf(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(lf(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var P_e={xAxis:["bottom","top"],yAxis:["left","right"]},R_e={width:"100%",height:"100%"},f6={x:0,y:0};function yv(t){return t}var __e=function(e,n){return n==="horizontal"?e.x:n==="vertical"?e.y:n==="centric"?e.angle:e.radius},D_e=function(e,n,r,o){var s=n.find(function(u){return u&&u.index===r});if(s){if(e==="horizontal")return{x:s.coordinate,y:o.y};if(e==="vertical")return{x:o.x,y:s.coordinate};if(e==="centric"){var i=s.coordinate,a=o.radius;return oe(oe(oe({},o),Un(o.cx,o.cy,a,i)),{},{angle:i,radius:a})}var l=s.coordinate,c=o.angle;return oe(oe(oe({},o),Un(o.cx,o.cy,l,c)),{},{angle:c,radius:l})}return f6},Mw=function(e,n){var r=n.graphicalItems,o=n.dataStartIndex,s=n.dataEndIndex,i=(r??[]).reduce(function(a,l){var c=l.props.data;return c&&c.length?[].concat(cf(a),cf(c)):a},[]);return i.length>0?i:e&&e.length&&pe(o)&&pe(s)?e.slice(o,s+1):[]};function h6(t){return t==="number"?[0,"auto"]:void 0}var tI=function(e,n,r,o){var s=e.graphicalItems,i=e.tooltipAxis,a=Mw(n,e);return r<0||!s||!s.length||r>=a.length?null:s.reduce(function(l,c){var u,d=(u=c.props.data)!==null&&u!==void 0?u:n;d&&e.dataStartIndex+e.dataEndIndex!==0&&e.dataEndIndex-e.dataStartIndex>=r&&(d=d.slice(e.dataStartIndex,e.dataEndIndex+1));var f;if(i.dataKey&&!i.allowDuplicatedCategory){var h=d===void 0?a:d;f=Dx(h,i.dataKey,o)}else f=d&&d[r]||a[r];return f?[].concat(cf(l),[u5(c,f)]):l},[])},NL=function(e,n,r,o){var s=o||{x:e.chartX,y:e.chartY},i=__e(s,r),a=e.orderedTooltipTicks,l=e.tooltipAxis,c=e.tooltipTicks,u=oIe(i,a,c,l);if(u>=0&&c){var d=c[u]&&c[u].value,f=tI(e,n,u,d),h=D_e(r,a,u,s);return{activeTooltipIndex:u,activeLabel:d,activePayload:f,activeCoordinate:h}}return null},M_e=function(e,n){var r=n.axes,o=n.graphicalItems,s=n.axisType,i=n.axisIdKey,a=n.stackGroups,l=n.dataStartIndex,c=n.dataEndIndex,u=e.layout,d=e.children,f=e.stackOffset,h=a5(u,s);return r.reduce(function(p,m){var g,y=m.type.defaultProps!==void 0?oe(oe({},m.type.defaultProps),m.props):m.props,v=y.type,x=y.dataKey,b=y.allowDataOverflow,w=y.allowDuplicatedCategory,C=y.scale,$=y.ticks,T=y.includeHidden,I=y[i];if(p[I])return p;var E=Mw(e.data,{graphicalItems:o.filter(function(G){var Q,re=i in G.props?G.props[i]:(Q=G.type.defaultProps)===null||Q===void 0?void 0:Q[i];return re===I}),dataStartIndex:l,dataEndIndex:c}),N=E.length,A,R,P;l_e(y.domain,b,v)&&(A=xT(y.domain,null,b),h&&(v==="number"||C!=="auto")&&(P=up(E,x,"category")));var F=h6(v);if(!A||A.length===0){var _,L=(_=y.domain)!==null&&_!==void 0?_:F;if(x){if(A=up(E,x,v),v==="category"&&h){var O=Hhe(A);w&&O?(R=A,A=bb(0,N)):w||(A=lF(L,A,m).reduce(function(G,Q){return G.indexOf(Q)>=0?G:[].concat(cf(G),[Q])},[]))}else if(v==="category")w?A=A.filter(function(G){return G!==""&&!tt(G)}):A=lF(L,A,m).reduce(function(G,Q){return G.indexOf(Q)>=0||Q===""||tt(Q)?G:[].concat(cf(G),[Q])},[]);else if(v==="number"){var D=cIe(E,o.filter(function(G){var Q,re,ie=i in G.props?G.props[i]:(Q=G.type.defaultProps)===null||Q===void 0?void 0:Q[i],ce="hide"in G.props?G.props.hide:(re=G.type.defaultProps)===null||re===void 0?void 0:re.hide;return ie===I&&(T||!ce)}),x,s,u);D&&(A=D)}h&&(v==="number"||C!=="auto")&&(P=up(E,x,"category"))}else h?A=bb(0,N):a&&a[I]&&a[I].hasStack&&v==="number"?A=f==="expand"?[0,1]:c5(a[I].stackGroups,l,c):A=i5(E,o.filter(function(G){var Q=i in G.props?G.props[i]:G.type.defaultProps[i],re="hide"in G.props?G.props.hide:G.type.defaultProps.hide;return Q===I&&(T||!re)}),v,u,!0);if(v==="number")A=ZT(d,A,I,s,$),L&&(A=xT(L,A,b));else if(v==="category"&&L){var B=L,V=A.every(function(G){return B.indexOf(G)>=0});V&&(A=B)}}return oe(oe({},p),{},De({},I,oe(oe({},y),{},{axisType:s,domain:A,categoricalDomain:P,duplicateDomain:R,originalDomain:(g=y.domain)!==null&&g!==void 0?g:F,isCategorical:h,layout:u})))},{})},F_e=function(e,n){var r=n.graphicalItems,o=n.Axis,s=n.axisType,i=n.axisIdKey,a=n.stackGroups,l=n.dataStartIndex,c=n.dataEndIndex,u=e.layout,d=e.children,f=Mw(e.data,{graphicalItems:r,dataStartIndex:l,dataEndIndex:c}),h=f.length,p=a5(u,s),m=-1;return r.reduce(function(g,y){var v=y.type.defaultProps!==void 0?oe(oe({},y.type.defaultProps),y.props):y.props,x=v[i],b=h6("number");if(!g[x]){m++;var w;return p?w=bb(0,h):a&&a[x]&&a[x].hasStack?(w=c5(a[x].stackGroups,l,c),w=ZT(d,w,x,s)):(w=xT(b,i5(f,r.filter(function(C){var $,T,I=i in C.props?C.props[i]:($=C.type.defaultProps)===null||$===void 0?void 0:$[i],E="hide"in C.props?C.props.hide:(T=C.type.defaultProps)===null||T===void 0?void 0:T.hide;return I===x&&!E}),"number",u),o.defaultProps.allowDataOverflow),w=ZT(d,w,x,s)),oe(oe({},g),{},De({},x,oe(oe({axisType:s},o.defaultProps),{},{hide:!0,orientation:Vo(P_e,"".concat(s,".").concat(m%2),null),domain:w,originalDomain:b,isCategorical:p,layout:u})))}return g},{})},L_e=function(e,n){var r=n.axisType,o=r===void 0?"xAxis":r,s=n.AxisComp,i=n.graphicalItems,a=n.stackGroups,l=n.dataStartIndex,c=n.dataEndIndex,u=e.children,d="".concat(o,"Id"),f=ks(u,s),h={};return f&&f.length?h=M_e(e,{axes:f,graphicalItems:i,axisType:o,axisIdKey:d,stackGroups:a,dataStartIndex:l,dataEndIndex:c}):i&&i.length&&(h=F_e(e,{Axis:s,graphicalItems:i,axisType:o,axisIdKey:d,stackGroups:a,dataStartIndex:l,dataEndIndex:c})),h},j_e=function(e){var n=Aa(e),r=_i(n,!1,!0);return{tooltipTicks:r,orderedTooltipTicks:qN(r,function(o){return o.coordinate}),tooltipAxis:n,tooltipAxisBandSize:db(n,r)}},AL=function(e){var n=e.children,r=e.defaultShowTooltip,o=so(n,Zd),s=0,i=0;return e.data&&e.data.length!==0&&(i=e.data.length-1),o&&o.props&&(o.props.startIndex>=0&&(s=o.props.startIndex),o.props.endIndex>=0&&(i=o.props.endIndex)),{chartX:0,chartY:0,dataStartIndex:s,dataEndIndex:i,activeTooltipIndex:-1,isTooltipActive:!!r}},B_e=function(e){return!e||!e.length?!1:e.some(function(n){var r=ji(n&&n.type);return r&&r.indexOf("Bar")>=0})},OL=function(e){return e==="horizontal"?{numericAxisName:"yAxis",cateAxisName:"xAxis"}:e==="vertical"?{numericAxisName:"xAxis",cateAxisName:"yAxis"}:e==="centric"?{numericAxisName:"radiusAxis",cateAxisName:"angleAxis"}:{numericAxisName:"angleAxis",cateAxisName:"radiusAxis"}},z_e=function(e,n){var r=e.props,o=e.graphicalItems,s=e.xAxisMap,i=s===void 0?{}:s,a=e.yAxisMap,l=a===void 0?{}:a,c=r.width,u=r.height,d=r.children,f=r.margin||{},h=so(d,Zd),p=so(d,cd),m=Object.keys(l).reduce(function(w,C){var $=l[C],T=$.orientation;return!$.mirror&&!$.hide?oe(oe({},w),{},De({},T,w[T]+$.width)):w},{left:f.left||0,right:f.right||0}),g=Object.keys(i).reduce(function(w,C){var $=i[C],T=$.orientation;return!$.mirror&&!$.hide?oe(oe({},w),{},De({},T,Vo(w,"".concat(T))+$.height)):w},{top:f.top||0,bottom:f.bottom||0}),y=oe(oe({},g),m),v=y.bottom;h&&(y.bottom+=h.props.height||Zd.defaultProps.height),p&&n&&(y=aIe(y,o,r,n));var x=c-y.left-y.right,b=u-y.top-y.bottom;return oe(oe({brushBottom:v},y),{},{width:Math.max(x,0),height:Math.max(b,0)})},W_e=function(e,n){if(n==="xAxis")return e[n].width;if(n==="yAxis")return e[n].height},V_e=function(e){var n=e.chartName,r=e.GraphicalChild,o=e.defaultTooltipEventType,s=o===void 0?"axis":o,i=e.validateTooltipEventTypes,a=i===void 0?["axis"]:i,l=e.axisComponents,c=e.legendContent,u=e.formatAxisMap,d=e.defaultProps,f=function(y,v){var x=v.graphicalItems,b=v.stackGroups,w=v.offset,C=v.updateId,$=v.dataStartIndex,T=v.dataEndIndex,I=y.barSize,E=y.layout,N=y.barGap,A=y.barCategoryGap,R=y.maxBarSize,P=OL(E),F=P.numericAxisName,_=P.cateAxisName,L=B_e(x),O=[];return x.forEach(function(D,B){var V=Mw(y.data,{graphicalItems:[D],dataStartIndex:$,dataEndIndex:T}),G=D.type.defaultProps!==void 0?oe(oe({},D.type.defaultProps),D.props):D.props,Q=G.dataKey,re=G.maxBarSize,ie=G["".concat(F,"Id")],ce=G["".concat(_,"Id")],se={},fe=l.reduce(function(er,an){var ns=v["".concat(an.axisType,"Map")],Mr=G["".concat(an.axisType,"Id")];ns&&ns[Mr]||an.axisType==="zAxis"||Fc();var So=ns[Mr];return oe(oe({},er),{},De(De({},an.axisType,So),"".concat(an.axisType,"Ticks"),_i(So)))},se),J=fe[_],ae=fe["".concat(_,"Ticks")],le=b&&b[ie]&&b[ie].hasStack&&wIe(D,b[ie].stackGroups),Z=ji(D.type).indexOf("Bar")>=0,$e=db(J,ae),be=[],Pe=L&&sIe({barSize:I,stackGroups:b,totalSize:W_e(fe,_)});if(Z){var Ne,je,Ze=tt(re)?R:re,sn=(Ne=(je=db(J,ae,!0))!==null&&je!==void 0?je:Ze)!==null&&Ne!==void 0?Ne:0;be=iIe({barGap:N,barCategoryGap:A,bandSize:sn!==$e?sn:$e,sizeList:Pe[ce],maxBarSize:Ze}),sn!==$e&&(be=be.map(function(er){return oe(oe({},er),{},{position:oe(oe({},er.position),{},{offset:er.position.offset-sn/2})})}))}var Vt=D&&D.type&&D.type.getComposedData;Vt&&O.push({props:oe(oe({},Vt(oe(oe({},fe),{},{displayedData:V,props:y,dataKey:Q,item:D,bandSize:$e,barPosition:be,offset:w,stackedData:le,layout:E,dataStartIndex:$,dataEndIndex:T}))),{},De(De(De({key:D.key||"item-".concat(B)},F,fe[F]),_,fe[_]),"animationId",C)),childIndex:ope(D,y.children),item:D})}),O},h=function(y,v){var x=y.props,b=y.dataStartIndex,w=y.dataEndIndex,C=y.updateId;if(!eD({props:x}))return null;var $=x.children,T=x.layout,I=x.stackOffset,E=x.data,N=x.reverseStackOrder,A=OL(T),R=A.numericAxisName,P=A.cateAxisName,F=ks($,r),_=vIe(E,F,"".concat(R,"Id"),"".concat(P,"Id"),I,N),L=l.reduce(function(G,Q){var re="".concat(Q.axisType,"Map");return oe(oe({},G),{},De({},re,L_e(x,oe(oe({},Q),{},{graphicalItems:F,stackGroups:Q.axisType===R&&_,dataStartIndex:b,dataEndIndex:w}))))},{}),O=z_e(oe(oe({},L),{},{props:x,graphicalItems:F}),v==null?void 0:v.legendBBox);Object.keys(L).forEach(function(G){L[G]=u(x,L[G],O,G.replace("Map",""),n)});var D=L["".concat(P,"Map")],B=j_e(D),V=f(x,oe(oe({},L),{},{dataStartIndex:b,dataEndIndex:w,updateId:C,graphicalItems:F,stackGroups:_,offset:O}));return oe(oe({formattedGraphicalItems:V,graphicalItems:F,offset:O,stackGroups:_},B),L)},p=function(g){function y(v){var x,b,w;return w_e(this,y),w=$_e(this,y,[v]),De(w,"eventEmitterSymbol",Symbol("rechartsEventEmitter")),De(w,"accessibilityManager",new a_e),De(w,"handleLegendBBoxUpdate",function(C){if(C){var $=w.state,T=$.dataStartIndex,I=$.dataEndIndex,E=$.updateId;w.setState(oe({legendBBox:C},h({props:w.props,dataStartIndex:T,dataEndIndex:I,updateId:E},oe(oe({},w.state),{},{legendBBox:C}))))}}),De(w,"handleReceiveSyncEvent",function(C,$,T){if(w.props.syncId===C){if(T===w.eventEmitterSymbol&&typeof w.props.syncMethod!="function")return;w.applySyncEvent($)}}),De(w,"handleBrushChange",function(C){var $=C.startIndex,T=C.endIndex;if($!==w.state.dataStartIndex||T!==w.state.dataEndIndex){var I=w.state.updateId;w.setState(function(){return oe({dataStartIndex:$,dataEndIndex:T},h({props:w.props,dataStartIndex:$,dataEndIndex:T,updateId:I},w.state))}),w.triggerSyncEvent({dataStartIndex:$,dataEndIndex:T})}}),De(w,"handleMouseEnter",function(C){var $=w.getMouseInfo(C);if($){var T=oe(oe({},$),{},{isTooltipActive:!0});w.setState(T),w.triggerSyncEvent(T);var I=w.props.onMouseEnter;Ue(I)&&I(T,C)}}),De(w,"triggeredAfterMouseMove",function(C){var $=w.getMouseInfo(C),T=$?oe(oe({},$),{},{isTooltipActive:!0}):{isTooltipActive:!1};w.setState(T),w.triggerSyncEvent(T);var I=w.props.onMouseMove;Ue(I)&&I(T,C)}),De(w,"handleItemMouseEnter",function(C){w.setState(function(){return{isTooltipActive:!0,activeItem:C,activePayload:C.tooltipPayload,activeCoordinate:C.tooltipPosition||{x:C.cx,y:C.cy}}})}),De(w,"handleItemMouseLeave",function(){w.setState(function(){return{isTooltipActive:!1}})}),De(w,"handleMouseMove",function(C){C.persist(),w.throttleTriggeredAfterMouseMove(C)}),De(w,"handleMouseLeave",function(C){w.throttleTriggeredAfterMouseMove.cancel();var $={isTooltipActive:!1};w.setState($),w.triggerSyncEvent($);var T=w.props.onMouseLeave;Ue(T)&&T($,C)}),De(w,"handleOuterEvent",function(C){var $=rpe(C),T=Vo(w.props,"".concat($));if($&&Ue(T)){var I,E;/.*touch.*/i.test($)?E=w.getMouseInfo(C.changedTouches[0]):E=w.getMouseInfo(C),T((I=E)!==null&&I!==void 0?I:{},C)}}),De(w,"handleClick",function(C){var $=w.getMouseInfo(C);if($){var T=oe(oe({},$),{},{isTooltipActive:!0});w.setState(T),w.triggerSyncEvent(T);var I=w.props.onClick;Ue(I)&&I(T,C)}}),De(w,"handleMouseDown",function(C){var $=w.props.onMouseDown;if(Ue($)){var T=w.getMouseInfo(C);$(T,C)}}),De(w,"handleMouseUp",function(C){var $=w.props.onMouseUp;if(Ue($)){var T=w.getMouseInfo(C);$(T,C)}}),De(w,"handleTouchMove",function(C){C.changedTouches!=null&&C.changedTouches.length>0&&w.throttleTriggeredAfterMouseMove(C.changedTouches[0])}),De(w,"handleTouchStart",function(C){C.changedTouches!=null&&C.changedTouches.length>0&&w.handleMouseDown(C.changedTouches[0])}),De(w,"handleTouchEnd",function(C){C.changedTouches!=null&&C.changedTouches.length>0&&w.handleMouseUp(C.changedTouches[0])}),De(w,"handleDoubleClick",function(C){var $=w.props.onDoubleClick;if(Ue($)){var T=w.getMouseInfo(C);$(T,C)}}),De(w,"handleContextMenu",function(C){var $=w.props.onContextMenu;if(Ue($)){var T=w.getMouseInfo(C);$(T,C)}}),De(w,"triggerSyncEvent",function(C){w.props.syncId!==void 0&&RC.emit(_C,w.props.syncId,C,w.eventEmitterSymbol)}),De(w,"applySyncEvent",function(C){var $=w.props,T=$.layout,I=$.syncMethod,E=w.state.updateId,N=C.dataStartIndex,A=C.dataEndIndex;if(C.dataStartIndex!==void 0||C.dataEndIndex!==void 0)w.setState(oe({dataStartIndex:N,dataEndIndex:A},h({props:w.props,dataStartIndex:N,dataEndIndex:A,updateId:E},w.state)));else if(C.activeTooltipIndex!==void 0){var R=C.chartX,P=C.chartY,F=C.activeTooltipIndex,_=w.state,L=_.offset,O=_.tooltipTicks;if(!L)return;if(typeof I=="function")F=I(O,C);else if(I==="value"){F=-1;for(var D=0;D<O.length;D++)if(O[D].value===C.activeLabel){F=D;break}}var B=oe(oe({},L),{},{x:L.left,y:L.top}),V=Math.min(R,B.x+B.width),G=Math.min(P,B.y+B.height),Q=O[F]&&O[F].value,re=tI(w.state,w.props.data,F),ie=O[F]?{x:T==="horizontal"?O[F].coordinate:V,y:T==="horizontal"?G:O[F].coordinate}:f6;w.setState(oe(oe({},C),{},{activeLabel:Q,activeCoordinate:ie,activePayload:re,activeTooltipIndex:F}))}else w.setState(C)}),De(w,"renderCursor",function(C){var $,T=w.state,I=T.isTooltipActive,E=T.activeCoordinate,N=T.activePayload,A=T.offset,R=T.activeTooltipIndex,P=T.tooltipAxisBandSize,F=w.getTooltipEventType(),_=($=C.props.active)!==null&&$!==void 0?$:I,L=w.props.layout,O=C.key||"_recharts-cursor";return z.createElement(p_e,{key:O,activeCoordinate:E,activePayload:N,activeTooltipIndex:R,chartName:n,element:C,isActive:_,layout:L,offset:A,tooltipAxisBandSize:P,tooltipEventType:F})}),De(w,"renderPolarAxis",function(C,$,T){var I=Vo(C,"type.axisType"),E=Vo(w.state,"".concat(I,"Map")),N=C.type.defaultProps,A=N!==void 0?oe(oe({},N),C.props):C.props,R=E&&E[A["".concat(I,"Id")]];return k.cloneElement(C,oe(oe({},R),{},{className:st(I,R.className),key:C.key||"".concat($,"-").concat(T),ticks:_i(R,!0)}))}),De(w,"renderPolarGrid",function(C){var $=C.props,T=$.radialLines,I=$.polarAngles,E=$.polarRadius,N=w.state,A=N.radiusAxisMap,R=N.angleAxisMap,P=Aa(A),F=Aa(R),_=F.cx,L=F.cy,O=F.innerRadius,D=F.outerRadius;return k.cloneElement(C,{polarAngles:Array.isArray(I)?I:_i(F,!0).map(function(B){return B.coordinate}),polarRadius:Array.isArray(E)?E:_i(P,!0).map(function(B){return B.coordinate}),cx:_,cy:L,innerRadius:O,outerRadius:D,key:C.key||"polar-grid",radialLines:T})}),De(w,"renderLegend",function(){var C=w.state.formattedGraphicalItems,$=w.props,T=$.children,I=$.width,E=$.height,N=w.props.margin||{},A=I-(N.left||0)-(N.right||0),R=o5({children:T,formattedGraphicalItems:C,legendWidth:A,legendContent:c});if(!R)return null;var P=R.item,F=IL(R,m_e);return k.cloneElement(P,oe(oe({},F),{},{chartWidth:I,chartHeight:E,margin:N,onBBoxUpdate:w.handleLegendBBoxUpdate}))}),De(w,"renderTooltip",function(){var C,$=w.props,T=$.children,I=$.accessibilityLayer,E=so(T,ds);if(!E)return null;var N=w.state,A=N.isTooltipActive,R=N.activeCoordinate,P=N.activePayload,F=N.activeLabel,_=N.offset,L=(C=E.props.active)!==null&&C!==void 0?C:A;return k.cloneElement(E,{viewBox:oe(oe({},_),{},{x:_.left,y:_.top}),active:L,label:F,payload:L?P:[],coordinate:R,accessibilityLayer:I})}),De(w,"renderBrush",function(C){var $=w.props,T=$.margin,I=$.data,E=w.state,N=E.offset,A=E.dataStartIndex,R=E.dataEndIndex,P=E.updateId;return k.cloneElement(C,{key:C.key||"_recharts-brush",onChange:fv(w.handleBrushChange,C.props.onChange),data:I,x:pe(C.props.x)?C.props.x:N.left,y:pe(C.props.y)?C.props.y:N.top+N.height+N.brushBottom-(T.bottom||0),width:pe(C.props.width)?C.props.width:N.width,startIndex:A,endIndex:R,updateId:"brush-".concat(P)})}),De(w,"renderReferenceElement",function(C,$,T){if(!C)return null;var I=w,E=I.clipPathId,N=w.state,A=N.xAxisMap,R=N.yAxisMap,P=N.offset,F=C.type.defaultProps||{},_=C.props,L=_.xAxisId,O=L===void 0?F.xAxisId:L,D=_.yAxisId,B=D===void 0?F.yAxisId:D;return k.cloneElement(C,{key:C.key||"".concat($,"-").concat(T),xAxis:A[O],yAxis:R[B],viewBox:{x:P.left,y:P.top,width:P.width,height:P.height},clipPathId:E})}),De(w,"renderActivePoints",function(C){var $=C.item,T=C.activePoint,I=C.basePoint,E=C.childIndex,N=C.isRange,A=[],R=$.props.key,P=$.item.type.defaultProps!==void 0?oe(oe({},$.item.type.defaultProps),$.item.props):$.item.props,F=P.activeDot,_=P.dataKey,L=oe(oe({index:E,dataKey:_,cx:T.x,cy:T.y,r:4,fill:b2($.item),strokeWidth:2,stroke:"#fff",payload:T.payload,value:T.value},Ye(F,!1)),Mx(F));return A.push(y.renderActiveDot(F,L,"".concat(R,"-activePoint-").concat(E))),I?A.push(y.renderActiveDot(F,oe(oe({},L),{},{cx:I.x,cy:I.y}),"".concat(R,"-basePoint-").concat(E))):N&&A.push(null),A}),De(w,"renderGraphicChild",function(C,$,T){var I=w.filterFormatItem(C,$,T);if(!I)return null;var E=w.getTooltipEventType(),N=w.state,A=N.isTooltipActive,R=N.tooltipAxis,P=N.activeTooltipIndex,F=N.activeLabel,_=w.props.children,L=so(_,ds),O=I.props,D=O.points,B=O.isRange,V=O.baseLine,G=I.item.type.defaultProps!==void 0?oe(oe({},I.item.type.defaultProps),I.item.props):I.item.props,Q=G.activeDot,re=G.hide,ie=G.activeBar,ce=G.activeShape,se=!!(!re&&A&&L&&(Q||ie||ce)),fe={};E!=="axis"&&L&&L.props.trigger==="click"?fe={onClick:fv(w.handleItemMouseEnter,C.props.onClick)}:E!=="axis"&&(fe={onMouseLeave:fv(w.handleItemMouseLeave,C.props.onMouseLeave),onMouseEnter:fv(w.handleItemMouseEnter,C.props.onMouseEnter)});var J=k.cloneElement(C,oe(oe({},I.props),fe));function ae(an){return typeof R.dataKey=="function"?R.dataKey(an.payload):null}if(se)if(P>=0){var le,Z;if(R.dataKey&&!R.allowDuplicatedCategory){var $e=typeof R.dataKey=="function"?ae:"payload.".concat(R.dataKey.toString());le=Dx(D,$e,F),Z=B&&V&&Dx(V,$e,F)}else le=D==null?void 0:D[P],Z=B&&V&&V[P];if(ce||ie){var be=C.props.activeIndex!==void 0?C.props.activeIndex:P;return[k.cloneElement(C,oe(oe(oe({},I.props),fe),{},{activeIndex:be})),null,null]}if(!tt(le))return[J].concat(cf(w.renderActivePoints({item:I,activePoint:le,basePoint:Z,childIndex:P,isRange:B})))}else{var Pe,Ne=(Pe=w.getItemByXY(w.state.activeCoordinate))!==null&&Pe!==void 0?Pe:{graphicalItem:J},je=Ne.graphicalItem,Ze=je.item,sn=Ze===void 0?C:Ze,Vt=je.childIndex,er=oe(oe(oe({},I.props),fe),{},{activeIndex:Vt});return[k.cloneElement(sn,er),null,null]}return B?[J,null,null]:[J,null]}),De(w,"renderCustomized",function(C,$,T){return k.cloneElement(C,oe(oe({key:"recharts-customized-".concat(T)},w.props),w.state))}),De(w,"renderMap",{CartesianGrid:{handler:yv,once:!0},ReferenceArea:{handler:w.renderReferenceElement},ReferenceLine:{handler:yv},ReferenceDot:{handler:w.renderReferenceElement},XAxis:{handler:yv},YAxis:{handler:yv},Brush:{handler:w.renderBrush,once:!0},Bar:{handler:w.renderGraphicChild},Line:{handler:w.renderGraphicChild},Area:{handler:w.renderGraphicChild},Radar:{handler:w.renderGraphicChild},RadialBar:{handler:w.renderGraphicChild},Scatter:{handler:w.renderGraphicChild},Pie:{handler:w.renderGraphicChild},Funnel:{handler:w.renderGraphicChild},Tooltip:{handler:w.renderCursor,once:!0},PolarGrid:{handler:w.renderPolarGrid,once:!0},PolarAngleAxis:{handler:w.renderPolarAxis},PolarRadiusAxis:{handler:w.renderPolarAxis},Customized:{handler:w.renderCustomized}}),w.clipPathId="".concat((x=v.id)!==null&&x!==void 0?x:og("recharts"),"-clip"),w.throttleTriggeredAfterMouseMove=rH(w.triggeredAfterMouseMove,(b=v.throttleDelay)!==null&&b!==void 0?b:1e3/60),w.state={},w}return I_e(y,g),C_e(y,[{key:"componentDidMount",value:function(){var x,b;this.addListener(),this.accessibilityManager.setDetails({container:this.container,offset:{left:(x=this.props.margin.left)!==null&&x!==void 0?x:0,top:(b=this.props.margin.top)!==null&&b!==void 0?b:0},coordinateList:this.state.tooltipTicks,mouseHandlerCallback:this.triggeredAfterMouseMove,layout:this.props.layout}),this.displayDefaultTooltip()}},{key:"displayDefaultTooltip",value:function(){var x=this.props,b=x.children,w=x.data,C=x.height,$=x.layout,T=so(b,ds);if(T){var I=T.props.defaultIndex;if(!(typeof I!="number"||I<0||I>this.state.tooltipTicks.length-1)){var E=this.state.tooltipTicks[I]&&this.state.tooltipTicks[I].value,N=tI(this.state,w,I,E),A=this.state.tooltipTicks[I].coordinate,R=(this.state.offset.top+C)/2,P=$==="horizontal",F=P?{x:A,y:R}:{y:A,x:R},_=this.state.formattedGraphicalItems.find(function(O){var D=O.item;return D.type.name==="Scatter"});_&&(F=oe(oe({},F),_.props.points[I].tooltipPosition),N=_.props.points[I].tooltipPayload);var L={activeTooltipIndex:I,isTooltipActive:!0,activeLabel:E,activePayload:N,activeCoordinate:F};this.setState(L),this.renderCursor(T),this.accessibilityManager.setIndex(I)}}}},{key:"getSnapshotBeforeUpdate",value:function(x,b){if(!this.props.accessibilityLayer)return null;if(this.state.tooltipTicks!==b.tooltipTicks&&this.accessibilityManager.setDetails({coordinateList:this.state.tooltipTicks}),this.props.layout!==x.layout&&this.accessibilityManager.setDetails({layout:this.props.layout}),this.props.margin!==x.margin){var w,C;this.accessibilityManager.setDetails({offset:{left:(w=this.props.margin.left)!==null&&w!==void 0?w:0,top:(C=this.props.margin.top)!==null&&C!==void 0?C:0}})}return null}},{key:"componentDidUpdate",value:function(x){_k([so(x.children,ds)],[so(this.props.children,ds)])||this.displayDefaultTooltip()}},{key:"componentWillUnmount",value:function(){this.removeListener(),this.throttleTriggeredAfterMouseMove.cancel()}},{key:"getTooltipEventType",value:function(){var x=so(this.props.children,ds);if(x&&typeof x.props.shared=="boolean"){var b=x.props.shared?"axis":"item";return a.indexOf(b)>=0?b:s}return s}},{key:"getMouseInfo",value:function(x){if(!this.container)return null;var b=this.container,w=b.getBoundingClientRect(),C=ASe(w),$={chartX:Math.round(x.pageX-C.left),chartY:Math.round(x.pageY-C.top)},T=w.width/b.offsetWidth||1,I=this.inRange($.chartX,$.chartY,T);if(!I)return null;var E=this.state,N=E.xAxisMap,A=E.yAxisMap,R=this.getTooltipEventType(),P=NL(this.state,this.props.data,this.props.layout,I);if(R!=="axis"&&N&&A){var F=Aa(N).scale,_=Aa(A).scale,L=F&&F.invert?F.invert($.chartX):null,O=_&&_.invert?_.invert($.chartY):null;return oe(oe({},$),{},{xValue:L,yValue:O},P)}return P?oe(oe({},$),P):null}},{key:"inRange",value:function(x,b){var w=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,C=this.props.layout,$=x/w,T=b/w;if(C==="horizontal"||C==="vertical"){var I=this.state.offset,E=$>=I.left&&$<=I.left+I.width&&T>=I.top&&T<=I.top+I.height;return E?{x:$,y:T}:null}var N=this.state,A=N.angleAxisMap,R=N.radiusAxisMap;if(A&&R){var P=Aa(A);return dF({x:$,y:T},P)}return null}},{key:"parseEventsOfWrapper",value:function(){var x=this.props.children,b=this.getTooltipEventType(),w=so(x,ds),C={};w&&b==="axis"&&(w.props.trigger==="click"?C={onClick:this.handleClick}:C={onMouseEnter:this.handleMouseEnter,onDoubleClick:this.handleDoubleClick,onMouseMove:this.handleMouseMove,onMouseLeave:this.handleMouseLeave,onTouchMove:this.handleTouchMove,onTouchStart:this.handleTouchStart,onTouchEnd:this.handleTouchEnd,onContextMenu:this.handleContextMenu});var $=Mx(this.props,this.handleOuterEvent);return oe(oe({},$),C)}},{key:"addListener",value:function(){RC.on(_C,this.handleReceiveSyncEvent)}},{key:"removeListener",value:function(){RC.removeListener(_C,this.handleReceiveSyncEvent)}},{key:"filterFormatItem",value:function(x,b,w){for(var C=this.state.formattedGraphicalItems,$=0,T=C.length;$<T;$++){var I=C[$];if(I.item===x||I.props.key===x.key||b===ji(I.item.type)&&w===I.childIndex)return I}return null}},{key:"renderClipPath",value:function(){var x=this.clipPathId,b=this.state.offset,w=b.left,C=b.top,$=b.height,T=b.width;return z.createElement("defs",null,z.createElement("clipPath",{id:x},z.createElement("rect",{x:w,y:C,height:$,width:T})))}},{key:"getXScales",value:function(){var x=this.state.xAxisMap;return x?Object.entries(x).reduce(function(b,w){var C=TL(w,2),$=C[0],T=C[1];return oe(oe({},b),{},De({},$,T.scale))},{}):null}},{key:"getYScales",value:function(){var x=this.state.yAxisMap;return x?Object.entries(x).reduce(function(b,w){var C=TL(w,2),$=C[0],T=C[1];return oe(oe({},b),{},De({},$,T.scale))},{}):null}},{key:"getXScaleByAxisId",value:function(x){var b;return(b=this.state.xAxisMap)===null||b===void 0||(b=b[x])===null||b===void 0?void 0:b.scale}},{key:"getYScaleByAxisId",value:function(x){var b;return(b=this.state.yAxisMap)===null||b===void 0||(b=b[x])===null||b===void 0?void 0:b.scale}},{key:"getItemByXY",value:function(x){var b=this.state,w=b.formattedGraphicalItems,C=b.activeItem;if(w&&w.length)for(var $=0,T=w.length;$<T;$++){var I=w[$],E=I.props,N=I.item,A=N.type.defaultProps!==void 0?oe(oe({},N.type.defaultProps),N.props):N.props,R=ji(N.type);if(R==="Bar"){var P=(E.data||[]).find(function(O){return a2e(x,O)});if(P)return{graphicalItem:I,payload:P}}else if(R==="RadialBar"){var F=(E.data||[]).find(function(O){return dF(x,O)});if(F)return{graphicalItem:I,payload:F}}else if(Nw(I,C)||Aw(I,C)||pm(I,C)){var _=uAe({graphicalItem:I,activeTooltipItem:C,itemData:A.data}),L=A.activeIndex===void 0?_:A.activeIndex;return{graphicalItem:oe(oe({},I),{},{childIndex:L}),payload:pm(I,C)?A.data[_]:I.props.data[_]}}}return null}},{key:"render",value:function(){var x=this;if(!eD(this))return null;var b=this.props,w=b.children,C=b.className,$=b.width,T=b.height,I=b.style,E=b.compact,N=b.title,A=b.desc,R=IL(b,g_e),P=Ye(R,!1);if(E)return z.createElement(cL,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},z.createElement(Mk,Xu({},P,{width:$,height:T,title:N,desc:A}),this.renderClipPath(),nD(w,this.renderMap)));if(this.props.accessibilityLayer){var F,_;P.tabIndex=(F=this.props.tabIndex)!==null&&F!==void 0?F:0,P.role=(_=this.props.role)!==null&&_!==void 0?_:"application",P.onKeyDown=function(O){x.accessibilityManager.keyboardEvent(O)},P.onFocus=function(){x.accessibilityManager.focus()}}var L=this.parseEventsOfWrapper();return z.createElement(cL,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},z.createElement("div",Xu({className:st("recharts-wrapper",C),style:oe({position:"relative",cursor:"default",width:$,height:T},I)},L,{ref:function(D){x.container=D}}),z.createElement(Mk,Xu({},P,{width:$,height:T,title:N,desc:A,style:R_e}),this.renderClipPath(),nD(w,this.renderMap)),this.renderLegend(),this.renderTooltip()))}}])}(k.Component);De(p,"displayName",n),De(p,"defaultProps",oe({layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:{top:5,right:5,bottom:5,left:5},reverseStackOrder:!1,syncMethod:"index"},d)),De(p,"getDerivedStateFromProps",function(g,y){var v=g.dataKey,x=g.data,b=g.children,w=g.width,C=g.height,$=g.layout,T=g.stackOffset,I=g.margin,E=y.dataStartIndex,N=y.dataEndIndex;if(y.updateId===void 0){var A=AL(g);return oe(oe(oe({},A),{},{updateId:0},h(oe(oe({props:g},A),{},{updateId:0}),y)),{},{prevDataKey:v,prevData:x,prevWidth:w,prevHeight:C,prevLayout:$,prevStackOffset:T,prevMargin:I,prevChildren:b})}if(v!==y.prevDataKey||x!==y.prevData||w!==y.prevWidth||C!==y.prevHeight||$!==y.prevLayout||T!==y.prevStackOffset||!ld(I,y.prevMargin)){var R=AL(g),P={chartX:y.chartX,chartY:y.chartY,isTooltipActive:y.isTooltipActive},F=oe(oe({},NL(y,x,$)),{},{updateId:y.updateId+1}),_=oe(oe(oe({},R),P),F);return oe(oe(oe({},_),h(oe({props:g},_),y)),{},{prevDataKey:v,prevData:x,prevWidth:w,prevHeight:C,prevLayout:$,prevStackOffset:T,prevMargin:I,prevChildren:b})}if(!_k(b,y.prevChildren)){var L,O,D,B,V=so(b,Zd),G=V&&(L=(O=V.props)===null||O===void 0?void 0:O.startIndex)!==null&&L!==void 0?L:E,Q=V&&(D=(B=V.props)===null||B===void 0?void 0:B.endIndex)!==null&&D!==void 0?D:N,re=G!==E||Q!==N,ie=!tt(x),ce=ie&&!re?y.updateId:y.updateId+1;return oe(oe({updateId:ce},h(oe(oe({props:g},y),{},{updateId:ce,dataStartIndex:G,dataEndIndex:Q}),y)),{},{prevChildren:b,dataStartIndex:G,dataEndIndex:Q})}return null}),De(p,"renderActiveDot",function(g,y,v){var x;return k.isValidElement(g)?x=k.cloneElement(g,y):Ue(g)?x=g(y):x=z.createElement(S2,y),z.createElement(Gt,{className:"recharts-active-dot",key:v},x)});var m=k.forwardRef(function(y,v){return z.createElement(p,Xu({},y,{ref:v}))});return m.displayName=p.displayName,m},PL=V_e({chartName:"AreaChart",GraphicalChild:wr,axisComponents:[{axisType:"xAxis",AxisComp:xm},{axisType:"yAxis",AxisComp:bm}],formatAxisMap:DOe});function U_e({results:t,isSimulating:e}){const{t:n}=tn(),[r,o]=k.useState(!1),i=(()=>{if(!t)return[];const a=t.duration,l=[],c=t.results.vegetationCover.value,u=t.results.biodiversity.value,d=t.results.soilQuality.value,f=t.results.sustainability.value,h=t.results.vegetationCover.trend,p=t.results.biodiversity.trend,m=t.results.soilQuality.trend,g=t.results.sustainability.trend;for(let y=0;y<=a;y++){const v=()=>Math.random()*.4-.2,x=Math.min(100,Math.max(0,c+h*y/2+h*y*v())),b=Math.min(100,Math.max(0,u+p*y/2+p*y*v())),w=Math.min(100,Math.max(0,d+m*y/2+m*y*v())),C=Math.min(100,Math.max(0,f+g*y/2+g*y*v()));l.push({year:y,vegetation:Math.round(x),biodiversity:Math.round(b),soilQuality:Math.round(w),sustainability:Math.round(C)})}return l})();return S.jsxs("div",{className:"col-span-2 p-6",children:[S.jsxs("div",{className:"flex justify-between items-center mb-6",children:[S.jsx("h3",{className:"text-xl font-bold font-cairo",children:n("simulation.results.title")}),S.jsxs("div",{children:[S.jsxs(xU,{open:r,onOpenChange:o,children:[S.jsx(bU,{asChild:!0,children:S.jsx(Jt,{variant:"outline",size:"icon",className:"bg-white border border-gray-300 rounded-full p-1.5 text-gray-600 hover:bg-gray-100 mr-2",children:S.jsx(sne,{className:"h-4 w-4"})})}),S.jsxs(bN,{className:"max-w-screen-lg",children:[S.jsx(wN,{children:S.jsx(SN,{children:n("simulation.results.fullscreenTitle")})}),S.jsx("div",{className:"h-[500px] mt-4",children:!e&&t&&S.jsx(JD,{width:"100%",height:"100%",children:S.jsxs(PL,{data:i,margin:{top:10,right:30,left:0,bottom:0},children:[S.jsxs("defs",{children:[S.jsxs("linearGradient",{id:"colorVegetation",x1:"0",y1:"0",x2:"0",y2:"1",children:[S.jsx("stop",{offset:"5%",stopColor:"var(--chart-1)",stopOpacity:.8}),S.jsx("stop",{offset:"95%",stopColor:"var(--chart-1)",stopOpacity:0})]}),S.jsxs("linearGradient",{id:"colorBiodiversity",x1:"0",y1:"0",x2:"0",y2:"1",children:[S.jsx("stop",{offset:"5%",stopColor:"var(--chart-2)",stopOpacity:.8}),S.jsx("stop",{offset:"95%",stopColor:"var(--chart-2)",stopOpacity:0})]}),S.jsxs("linearGradient",{id:"colorSoilQuality",x1:"0",y1:"0",x2:"0",y2:"1",children:[S.jsx("stop",{offset:"5%",stopColor:"var(--chart-3)",stopOpacity:.8}),S.jsx("stop",{offset:"95%",stopColor:"var(--chart-3)",stopOpacity:0})]}),S.jsxs("linearGradient",{id:"colorSustainability",x1:"0",y1:"0",x2:"0",y2:"1",children:[S.jsx("stop",{offset:"5%",stopColor:"var(--chart-4)",stopOpacity:.8}),S.jsx("stop",{offset:"95%",stopColor:"var(--chart-4)",stopOpacity:0})]})]}),S.jsx(GT,{strokeDasharray:"3 3"}),S.jsx(xm,{dataKey:"year",label:{value:n("simulation.results.years"),position:"insideBottomRight",offset:-10}}),S.jsx(bm,{label:{value:n("simulation.results.percentage"),angle:-90,position:"insideLeft"}}),S.jsx(ds,{formatter:(a,l)=>{const c={vegetation:n("simulation.results.indicators.vegetation"),biodiversity:n("simulation.results.indicators.biodiversity"),soilQuality:n("simulation.results.indicators.soilQuality"),sustainability:n("simulation.results.indicators.sustainability")};return[`${a}%`,c[l]]},labelFormatter:a=>`${n("simulation.results.year")} ${a}`}),S.jsx(wr,{type:"monotone",dataKey:"vegetation",stroke:"var(--chart-1)",fillOpacity:1,fill:"url(#colorVegetation)"}),S.jsx(wr,{type:"monotone",dataKey:"biodiversity",stroke:"var(--chart-2)",fillOpacity:1,fill:"url(#colorBiodiversity)"}),S.jsx(wr,{type:"monotone",dataKey:"soilQuality",stroke:"var(--chart-3)",fillOpacity:1,fill:"url(#colorSoilQuality)"}),S.jsx(wr,{type:"monotone",dataKey:"sustainability",stroke:"var(--chart-4)",fillOpacity:1,fill:"url(#colorSustainability)"})]})})})]})]}),S.jsx(Jt,{variant:"outline",size:"icon",className:"bg-white border border-gray-300 rounded-full p-1.5 text-gray-600 hover:bg-gray-100",disabled:!t||e,children:S.jsx(ene,{className:"h-4 w-4"})})]})]}),S.jsx("div",{className:"bg-white border border-gray-200 rounded-xl p-4 h-96 flex items-center justify-center relative",children:e?S.jsxs("div",{className:"text-center",children:[S.jsx(Cx,{className:"h-12 w-12 animate-spin text-accent mx-auto mb-3"}),S.jsx("p",{className:"text-gray-600",children:n("simulation.results.simulating")})]}):t?S.jsx(JD,{width:"100%",height:"100%",children:S.jsxs(PL,{data:i,margin:{top:10,right:30,left:0,bottom:0},children:[S.jsxs("defs",{children:[S.jsxs("linearGradient",{id:"colorVegetation",x1:"0",y1:"0",x2:"0",y2:"1",children:[S.jsx("stop",{offset:"5%",stopColor:"var(--chart-1)",stopOpacity:.8}),S.jsx("stop",{offset:"95%",stopColor:"var(--chart-1)",stopOpacity:0})]}),S.jsxs("linearGradient",{id:"colorBiodiversity",x1:"0",y1:"0",x2:"0",y2:"1",children:[S.jsx("stop",{offset:"5%",stopColor:"var(--chart-2)",stopOpacity:.8}),S.jsx("stop",{offset:"95%",stopColor:"var(--chart-2)",stopOpacity:0})]}),S.jsxs("linearGradient",{id:"colorSoilQuality",x1:"0",y1:"0",x2:"0",y2:"1",children:[S.jsx("stop",{offset:"5%",stopColor:"var(--chart-3)",stopOpacity:.8}),S.jsx("stop",{offset:"95%",stopColor:"var(--chart-3)",stopOpacity:0})]}),S.jsxs("linearGradient",{id:"colorSustainability",x1:"0",y1:"0",x2:"0",y2:"1",children:[S.jsx("stop",{offset:"5%",stopColor:"var(--chart-4)",stopOpacity:.8}),S.jsx("stop",{offset:"95%",stopColor:"var(--chart-4)",stopOpacity:0})]})]}),S.jsx(GT,{strokeDasharray:"3 3"}),S.jsx(xm,{dataKey:"year"}),S.jsx(bm,{}),S.jsx(ds,{formatter:(a,l)=>{const c={vegetation:n("simulation.results.indicators.vegetation"),biodiversity:n("simulation.results.indicators.biodiversity"),soilQuality:n("simulation.results.indicators.soilQuality"),sustainability:n("simulation.results.indicators.sustainability")};return[`${a}%`,c[l]]},labelFormatter:a=>`${n("simulation.results.year")} ${a}`}),S.jsx(wr,{type:"monotone",dataKey:"vegetation",stroke:"var(--chart-1)",fillOpacity:1,fill:"url(#colorVegetation)"}),S.jsx(wr,{type:"monotone",dataKey:"biodiversity",stroke:"var(--chart-2)",fillOpacity:1,fill:"url(#colorBiodiversity)"}),S.jsx(wr,{type:"monotone",dataKey:"soilQuality",stroke:"var(--chart-3)",fillOpacity:1,fill:"url(#colorSoilQuality)"}),S.jsx(wr,{type:"monotone",dataKey:"sustainability",stroke:"var(--chart-4)",fillOpacity:1,fill:"url(#colorSustainability)"})]})}):S.jsxs("div",{className:"text-center",children:[S.jsx(Jte,{className:"h-12 w-12 text-accent mx-auto mb-2"}),S.jsx("p",{className:"text-gray-800 font-bold",children:n("simulation.results.pressToStart")}),S.jsx("p",{className:"text-gray-600 text-sm",children:n("simulation.results.selectSettings")})]})}),!e&&t&&S.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mt-6",children:[S.jsx(vv,{title:n("simulation.results.indicators.vegetation"),value:t.results.vegetationCover.value,trend:t.results.vegetationCover.trend}),S.jsx(vv,{title:n("simulation.results.indicators.biodiversity"),value:t.results.biodiversity.value,trend:t.results.biodiversity.trend}),S.jsx(vv,{title:n("simulation.results.indicators.soilQuality"),value:t.results.soilQuality.value,trend:t.results.soilQuality.trend}),S.jsx(vv,{title:n("simulation.results.indicators.sustainability"),value:t.results.sustainability.value,trend:t.results.sustainability.trend})]})]})}function vv({title:t,value:e,trend:n}){tn();const o=(s=>s>0?{icon:S.jsx("span",{className:"material-icons text-xs",children:"arrow_upward"}),class:"text-green-500",text:`+${Math.abs(s)}%`}:s<0?{icon:S.jsx("span",{className:"material-icons text-xs",children:"arrow_downward"}),class:"text-red-500",text:`-${Math.abs(s)}%`}:{icon:S.jsx("span",{className:"material-icons text-xs",children:"remove"}),class:"text-gray-500",text:"0%"})(n);return S.jsxs(Bd,{className:"bg-white border border-gray-200 rounded-lg p-3",children:[S.jsx("h4",{className:"text-sm text-gray-500 mb-1",children:t}),S.jsxs("div",{className:"flex items-end",children:[S.jsxs("span",{className:"text-xl font-bold text-accent",children:[e,"%"]}),S.jsxs("span",{className:`${o.class} text-sm mr-2 flex items-center`,children:[o.icon,o.text]})]})]})}function G_e(){const{t}=tn(),{isAuthenticated:e}=Jm(),{toast:n}=N0(),[r,o]=k.useState(null),[s,i]=k.useState(!1),{data:a=[]}=E0({queryKey:["/api/database/ecosystems"]}),l=async c=>{if(!e){n({title:t("auth.loginRequired"),description:t("auth.loginToSimulate"),variant:"destructive"});return}try{i(!0);const u=await fetch("/api/simulation",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(c),credentials:"include"});if(!u.ok)throw new Error("Simulation failed");const d=await u.json();o(d),n({title:t("simulation.success.title"),description:t("simulation.success.description")})}catch(u){console.error("Simulation error:",u),n({title:t("simulation.error.title"),description:t("simulation.error.description"),variant:"destructive"})}finally{i(!1)}};return S.jsxs(S.Fragment,{children:[S.jsxs(dl,{children:[S.jsx("title",{children:t("seo.simulation.title")}),S.jsx("meta",{name:"description",content:t("seo.simulation.description")})]}),S.jsx("section",{id:"simulation",className:"py-16 bg-white",children:S.jsxs("div",{className:"container mx-auto px-4",children:[S.jsx("h2",{className:"text-3xl font-bold text-center mb-8 font-cairo",children:t("simulation.title")}),S.jsx("p",{className:"text-center text-gray-600 max-w-2xl mx-auto mb-12",children:t("simulation.description")}),S.jsx("div",{className:"bg-gray-50 rounded-xl shadow-md overflow-hidden",children:S.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3",children:[S.jsx(fue,{ecosystems:a,onRunSimulation:l,isSimulating:s}),S.jsx(U_e,{results:r,isSimulating:s})]})}),!e&&S.jsxs("div",{className:"mt-12 text-center p-8 bg-white rounded-xl shadow-sm",children:[S.jsx("h3",{className:"text-xl font-bold mb-4",children:t("auth.loginToSaveSimulations")}),S.jsx("p",{className:"text-gray-600 mb-6",children:t("auth.loginToSaveDesc")}),S.jsx(Jt,{onClick:()=>window.location.href="/api/login",className:"bg-primary hover:bg-primary-dark text-white",children:t("auth.login")})]})]})})]})}function H_e(){const{t}=tn();return S.jsxs(S.Fragment,{children:[S.jsxs(dl,{children:[S.jsx("title",{children:t("seo.about.title")}),S.jsx("meta",{name:"description",content:t("seo.about.description")})]}),S.jsx("section",{id:"about",className:"py-16 bg-gray-50",children:S.jsx("div",{className:"container mx-auto px-4",children:S.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-12 items-center",children:[S.jsxs("div",{children:[S.jsx("h2",{className:"text-3xl font-bold mb-6 font-cairo",children:t("about.title")}),S.jsx("p",{className:"text-gray-600 mb-6",children:t("about.description")}),S.jsxs("div",{className:"bg-white rounded-lg p-6 shadow-md mb-6",children:[S.jsx("h3",{className:"font-bold mb-3",children:t("about.objectives.title")}),S.jsx("ul",{className:"space-y-2",children:[1,2,3,4].map(e=>S.jsxs("li",{className:"flex items-start",children:[S.jsx("span",{className:"material-icons text-primary mt-0.5 ml-2",children:"stars"}),S.jsx("span",{children:t(`about.objectives.item${e}`)})]},e))})]}),S.jsxs("div",{className:"flex gap-4",children:[S.jsx("button",{className:"px-6 py-3 bg-primary text-white rounded-lg hover:bg-primary-dark transition",children:t("about.contactUs")}),S.jsx("button",{className:"px-6 py-3 bg-white border border-primary text-primary rounded-lg hover:bg-gray-50 transition",children:t("about.readMore")})]})]}),S.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[S.jsx("img",{src:"https://pixabay.com/get/g3d76a155e68fd871625446a8c5a6b29abbfda979a5b38f46616dfbc5de052637c80cfd993f278af0012774205c5ca940e4847fe2005c121971a5800d54b0d8ba_1280.jpg",className:"rounded-lg h-44 w-full object-cover mb-4",alt:t("about.images.lab")}),S.jsx("img",{src:"https://images.unsplash.com/photo-1581578017093-cd30fce4eeb7?ixlib=rb-4.0.3&auto=format&fit=crop&w=400&h=300",className:"rounded-lg h-44 w-full object-cover",alt:t("about.images.field")}),S.jsx("img",{src:"https://images.unsplash.com/photo-1551288049-bebda4e38f71?ixlib=rb-4.0.3&auto=format&fit=crop&w=400&h=300",className:"rounded-lg h-44 w-full object-cover",alt:t("about.images.data")}),S.jsx("img",{src:"https://images.unsplash.com/photo-1498429089284-41f8cf3ffd39?ixlib=rb-4.0.3&auto=format&fit=crop&w=400&h=300",className:"rounded-lg h-44 w-full object-cover",alt:t("about.images.conservation")})]})]})})})]})}function K_e(){const{t}=tn();return S.jsxs(S.Fragment,{children:[S.jsxs(dl,{children:[S.jsx("title",{children:t("seo.sensor.title")}),S.jsx("meta",{name:"description",content:t("seo.sensor.description")})]}),S.jsx("section",{id:"sensor",className:"py-16 bg-white",children:S.jsx("div",{className:"container mx-auto px-4",children:S.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-12 items-center",children:[S.jsxs("div",{children:[S.jsx("h2",{className:"text-3xl font-bold mb-6 font-cairo",children:t("sensor.title")}),S.jsx("p",{className:"text-gray-600 mb-6",children:t("sensor.description")}),S.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 mb-6",children:[S.jsx("h3",{className:"font-bold mb-3",children:t("sensor.features.title")}),S.jsx("ul",{className:"space-y-2",children:[1,2,3,4].map(e=>S.jsxs("li",{className:"flex items-start",children:[S.jsx("span",{className:"material-icons text-success mt-0.5 ml-2",children:"check_circle"}),S.jsx("span",{children:t(`sensor.features.item${e}`)})]},e))})]}),S.jsxs("div",{className:"flex gap-4",children:[S.jsx(Jt,{className:"px-6 py-3 bg-secondary text-white rounded-lg hover:bg-secondary-dark transition",children:t("sensor.requestInfo")}),S.jsx(Jt,{variant:"outline",className:"px-6 py-3 bg-white border border-secondary text-secondary rounded-lg hover:bg-gray-50 transition",children:t("sensor.watchVideo")})]})]}),S.jsxs("div",{className:"relative",children:[S.jsx("img",{src:"https://pixabay.com/get/g8084b108d1a0e50d6fce15823d062fcad571ef07b39b8966961bb39e0bb2aa72d5467a3e5341fb1c329641bf9a9616217a80bc986c299c1461bbf13f8e9fca6a_1280.jpg",className:"rounded-xl shadow-lg w-full h-auto",alt:t("sensor.deviceImage")}),S.jsx("div",{className:"absolute top-4 right-4 bg-warning text-white text-xs px-2 py-1 rounded-full",children:t("sensor.comingSoon")}),S.jsx("div",{className:"absolute -bottom-5 -left-5 bg-white rounded-lg shadow-lg p-4 max-w-xs",children:S.jsxs("div",{className:"flex items-start gap-3",children:[S.jsx("span",{className:"material-icons text-primary bg-primary-light bg-opacity-20 p-2 rounded-full",children:"insights"}),S.jsxs("div",{children:[S.jsx("h4",{className:"font-bold text-sm",children:t("sensor.infoCard.title")}),S.jsx("p",{className:"text-xs text-gray-600",children:t("sensor.infoCard.description")})]})]})})]})]})})})]})}function q_e(){const{t,language:e}=tn(),{user:n,isAuthenticated:r}=Jm(),{toast:o}=N0(),[s,i]=k.useState(!1),a=async()=>{const l=e==="ar"?"fr":"ar";if(r)try{i(!0),await Yee("PATCH","/api/auth/user/preferences",{language:l}),await f4.invalidateQueries({queryKey:["/api/auth/user"]}),o({title:t("settings.languageChanged"),description:l==="ar"?"تم تغيير اللغة إلى العربية":"La langue a été changée en français"})}catch(c){console.error("Failed to change language:",c),o({title:t("settings.languageChangeFailed"),description:t("settings.tryAgain"),variant:"destructive"})}finally{i(!1)}else document.documentElement.lang=l,document.documentElement.dir=l==="ar"?"rtl":"ltr",window.location.reload()};return k.useEffect(()=>{e&&(document.documentElement.lang=e,document.documentElement.dir=e==="ar"?"rtl":"ltr")},[e]),S.jsxs("div",{className:"flex items-center space-x-1 space-x-reverse",children:[S.jsx(Jt,{variant:e==="fr"?"default":"outline",size:"sm",className:`text-sm ${e==="fr"?"bg-primary text-white":"bg-gray-100 text-gray-700"} px-2 py-1 rounded`,onClick:a,disabled:s,children:"FR"}),S.jsx(Jt,{variant:e==="ar"?"default":"outline",size:"sm",className:`text-sm ${e==="ar"?"bg-primary text-white":"bg-gray-100 text-gray-700"} px-2 py-1 rounded`,onClick:a,disabled:s,children:"AR"})]})}var P2="Avatar",[X_e,Uot]=Jr(P2),[Y_e,p6]=X_e(P2),m6=k.forwardRef((t,e)=>{const{__scopeAvatar:n,...r}=t,[o,s]=k.useState("idle");return S.jsx(Y_e,{scope:n,imageLoadingStatus:o,onImageLoadingStatusChange:s,children:S.jsx(Re.span,{...r,ref:e})})});m6.displayName=P2;var g6="AvatarImage",y6=k.forwardRef((t,e)=>{const{__scopeAvatar:n,src:r,onLoadingStatusChange:o=()=>{},...s}=t,i=p6(g6,n),a=Q_e(r,s),l=Kn(c=>{o(c),i.onImageLoadingStatusChange(c)});return Nn(()=>{a!=="idle"&&l(a)},[a,l]),a==="loaded"?S.jsx(Re.img,{...s,ref:e,src:r}):null});y6.displayName=g6;var v6="AvatarFallback",x6=k.forwardRef((t,e)=>{const{__scopeAvatar:n,delayMs:r,...o}=t,s=p6(v6,n),[i,a]=k.useState(r===void 0);return k.useEffect(()=>{if(r!==void 0){const l=window.setTimeout(()=>a(!0),r);return()=>window.clearTimeout(l)}},[r]),i&&s.imageLoadingStatus!=="loaded"?S.jsx(Re.span,{...o,ref:e}):null});x6.displayName=v6;function RL(t,e){return t?e?(t.src!==e&&(t.src=e),t.complete&&t.naturalWidth>0?"loaded":"loading"):"error":"idle"}function Q_e(t,{referrerPolicy:e,crossOrigin:n}){const r=J_e(),o=k.useRef(null),s=r?(o.current||(o.current=new window.Image),o.current):null,[i,a]=k.useState(()=>RL(s,t));return Nn(()=>{a(RL(s,t))},[s,t]),Nn(()=>{const l=d=>()=>{a(d)};if(!s)return;const c=l("loaded"),u=l("error");return s.addEventListener("load",c),s.addEventListener("error",u),e&&(s.referrerPolicy=e),typeof n=="string"&&(s.crossOrigin=n),()=>{s.removeEventListener("load",c),s.removeEventListener("error",u)}},[s,n,e]),i}function Z_e(){return()=>{}}function J_e(){return k.useSyncExternalStore(Z_e,()=>!0,()=>!1)}var b6=m6,w6=y6,S6=x6;const C6=k.forwardRef(({className:t,...e},n)=>S.jsx(b6,{ref:n,className:Le("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",t),...e}));C6.displayName=b6.displayName;const $6=k.forwardRef(({className:t,...e},n)=>S.jsx(w6,{ref:n,className:Le("aspect-square h-full w-full",t),...e}));$6.displayName=w6.displayName;const k6=k.forwardRef(({className:t,...e},n)=>S.jsx(S6,{ref:n,className:Le("flex h-full w-full items-center justify-center rounded-full bg-muted",t),...e}));k6.displayName=S6.displayName;var nI=["Enter"," "],eDe=["ArrowDown","PageUp","Home"],T6=["ArrowUp","PageDown","End"],tDe=[...eDe,...T6],nDe={ltr:[...nI,"ArrowRight"],rtl:[...nI,"ArrowLeft"]},rDe={ltr:["ArrowLeft"],rtl:["ArrowRight"]},dg="Menu",[Cm,oDe,sDe]=Xm(dg),[iu,I6]=Jr(dg,[sDe,Nf,B0]),Fw=Nf(),E6=B0(),[iDe,au]=iu(dg),[aDe,fg]=iu(dg),N6=t=>{const{__scopeMenu:e,open:n=!1,children:r,dir:o,onOpenChange:s,modal:i=!0}=t,a=Fw(e),[l,c]=k.useState(null),u=k.useRef(!1),d=Kn(s),f=eg(o);return k.useEffect(()=>{const h=()=>{u.current=!0,document.addEventListener("pointerdown",p,{capture:!0,once:!0}),document.addEventListener("pointermove",p,{capture:!0,once:!0})},p=()=>u.current=!1;return document.addEventListener("keydown",h,{capture:!0}),()=>{document.removeEventListener("keydown",h,{capture:!0}),document.removeEventListener("pointerdown",p,{capture:!0}),document.removeEventListener("pointermove",p,{capture:!0})}},[]),S.jsx(yW,{...a,children:S.jsx(iDe,{scope:e,open:n,onOpenChange:d,content:l,onContentChange:c,children:S.jsx(aDe,{scope:e,onClose:k.useCallback(()=>d(!1),[d]),isUsingKeyboardRef:u,dir:f,modal:i,children:r})})})};N6.displayName=dg;var lDe="MenuAnchor",R2=k.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t,o=Fw(n);return S.jsx(iN,{...o,...r,ref:e})});R2.displayName=lDe;var _2="MenuPortal",[cDe,A6]=iu(_2,{forceMount:void 0}),O6=t=>{const{__scopeMenu:e,forceMount:n,children:r,container:o}=t,s=au(_2,e);return S.jsx(cDe,{scope:e,forceMount:n,children:S.jsx(Yo,{present:n||s.open,children:S.jsx(Ym,{asChild:!0,container:o,children:r})})})};O6.displayName=_2;var Uo="MenuContent",[uDe,D2]=iu(Uo),P6=k.forwardRef((t,e)=>{const n=A6(Uo,t.__scopeMenu),{forceMount:r=n.forceMount,...o}=t,s=au(Uo,t.__scopeMenu),i=fg(Uo,t.__scopeMenu);return S.jsx(Cm.Provider,{scope:t.__scopeMenu,children:S.jsx(Yo,{present:r||s.open,children:S.jsx(Cm.Slot,{scope:t.__scopeMenu,children:i.modal?S.jsx(dDe,{...o,ref:e}):S.jsx(fDe,{...o,ref:e})})})})}),dDe=k.forwardRef((t,e)=>{const n=au(Uo,t.__scopeMenu),r=k.useRef(null),o=Xe(e,r);return k.useEffect(()=>{const s=r.current;if(s)return pN(s)},[]),S.jsx(M2,{...t,ref:o,trapFocus:n.open,disableOutsidePointerEvents:n.open,disableOutsideScroll:!0,onFocusOutside:me(t.onFocusOutside,s=>s.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>n.onOpenChange(!1)})}),fDe=k.forwardRef((t,e)=>{const n=au(Uo,t.__scopeMenu);return S.jsx(M2,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>n.onOpenChange(!1)})}),hDe=Ac("MenuContent.ScrollLock"),M2=k.forwardRef((t,e)=>{const{__scopeMenu:n,loop:r=!1,trapFocus:o,onOpenAutoFocus:s,onCloseAutoFocus:i,disableOutsidePointerEvents:a,onEntryFocus:l,onEscapeKeyDown:c,onPointerDownOutside:u,onFocusOutside:d,onInteractOutside:f,onDismiss:h,disableOutsideScroll:p,...m}=t,g=au(Uo,n),y=fg(Uo,n),v=Fw(n),x=E6(n),b=oDe(n),[w,C]=k.useState(null),$=k.useRef(null),T=Xe(e,$,g.onContentChange),I=k.useRef(0),E=k.useRef(""),N=k.useRef(0),A=k.useRef(null),R=k.useRef("right"),P=k.useRef(0),F=p?H0:k.Fragment,_=p?{as:hDe,allowPinchZoom:!0}:void 0,L=D=>{var se,fe;const B=E.current+D,V=b().filter(J=>!J.disabled),G=document.activeElement,Q=(se=V.find(J=>J.ref.current===G))==null?void 0:se.textValue,re=V.map(J=>J.textValue),ie=kDe(re,B,Q),ce=(fe=V.find(J=>J.textValue===ie))==null?void 0:fe.ref.current;(function J(ae){E.current=ae,window.clearTimeout(I.current),ae!==""&&(I.current=window.setTimeout(()=>J(""),1e3))})(B),ce&&setTimeout(()=>ce.focus())};k.useEffect(()=>()=>window.clearTimeout(I.current),[]),hN();const O=k.useCallback(D=>{var V,G;return R.current===((V=A.current)==null?void 0:V.side)&&IDe(D,(G=A.current)==null?void 0:G.area)},[]);return S.jsx(uDe,{scope:n,searchRef:E,onItemEnter:k.useCallback(D=>{O(D)&&D.preventDefault()},[O]),onItemLeave:k.useCallback(D=>{var B;O(D)||((B=$.current)==null||B.focus(),C(null))},[O]),onTriggerLeave:k.useCallback(D=>{O(D)&&D.preventDefault()},[O]),pointerGraceTimerRef:N,onPointerGraceIntentChange:k.useCallback(D=>{A.current=D},[]),children:S.jsx(F,{..._,children:S.jsx(U0,{asChild:!0,trapped:o,onMountAutoFocus:me(s,D=>{var B;D.preventDefault(),(B=$.current)==null||B.focus({preventScroll:!0})}),onUnmountAutoFocus:i,children:S.jsx(kf,{asChild:!0,disableOutsidePointerEvents:a,onEscapeKeyDown:c,onPointerDownOutside:u,onFocusOutside:d,onInteractOutside:f,onDismiss:h,children:S.jsx(jW,{asChild:!0,...x,dir:y.dir,orientation:"vertical",loop:r,currentTabStopId:w,onCurrentTabStopIdChange:C,onEntryFocus:me(l,D=>{y.isUsingKeyboardRef.current||D.preventDefault()}),preventScrollOnEntryFocus:!0,children:S.jsx(aN,{role:"menu","aria-orientation":"vertical","data-state":q6(g.open),"data-radix-menu-content":"",dir:y.dir,...v,...m,ref:T,style:{outline:"none",...m.style},onKeyDown:me(m.onKeyDown,D=>{const V=D.target.closest("[data-radix-menu-content]")===D.currentTarget,G=D.ctrlKey||D.altKey||D.metaKey,Q=D.key.length===1;V&&(D.key==="Tab"&&D.preventDefault(),!G&&Q&&L(D.key));const re=$.current;if(D.target!==re||!tDe.includes(D.key))return;D.preventDefault();const ce=b().filter(se=>!se.disabled).map(se=>se.ref.current);T6.includes(D.key)&&ce.reverse(),CDe(ce)}),onBlur:me(t.onBlur,D=>{D.currentTarget.contains(D.target)||(window.clearTimeout(I.current),E.current="")}),onPointerMove:me(t.onPointerMove,$m(D=>{const B=D.target,V=P.current!==D.clientX;if(D.currentTarget.contains(B)&&V){const G=D.clientX>P.current?"right":"left";R.current=G,P.current=D.clientX}}))})})})})})})});P6.displayName=Uo;var pDe="MenuGroup",F2=k.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t;return S.jsx(Re.div,{role:"group",...r,ref:e})});F2.displayName=pDe;var mDe="MenuLabel",R6=k.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t;return S.jsx(Re.div,{...r,ref:e})});R6.displayName=mDe;var _b="MenuItem",_L="menu.itemSelect",Lw=k.forwardRef((t,e)=>{const{disabled:n=!1,onSelect:r,...o}=t,s=k.useRef(null),i=fg(_b,t.__scopeMenu),a=D2(_b,t.__scopeMenu),l=Xe(e,s),c=k.useRef(!1),u=()=>{const d=s.current;if(!n&&d){const f=new CustomEvent(_L,{bubbles:!0,cancelable:!0});d.addEventListener(_L,h=>r==null?void 0:r(h),{once:!0}),VE(d,f),f.defaultPrevented?c.current=!1:i.onClose()}};return S.jsx(_6,{...o,ref:l,disabled:n,onClick:me(t.onClick,u),onPointerDown:d=>{var f;(f=t.onPointerDown)==null||f.call(t,d),c.current=!0},onPointerUp:me(t.onPointerUp,d=>{var f;c.current||(f=d.currentTarget)==null||f.click()}),onKeyDown:me(t.onKeyDown,d=>{const f=a.searchRef.current!=="";n||f&&d.key===" "||nI.includes(d.key)&&(d.currentTarget.click(),d.preventDefault())})})});Lw.displayName=_b;var _6=k.forwardRef((t,e)=>{const{__scopeMenu:n,disabled:r=!1,textValue:o,...s}=t,i=D2(_b,n),a=E6(n),l=k.useRef(null),c=Xe(e,l),[u,d]=k.useState(!1),[f,h]=k.useState("");return k.useEffect(()=>{const p=l.current;p&&h((p.textContent??"").trim())},[s.children]),S.jsx(Cm.ItemSlot,{scope:n,disabled:r,textValue:o??f,children:S.jsx(BW,{asChild:!0,...a,focusable:!r,children:S.jsx(Re.div,{role:"menuitem","data-highlighted":u?"":void 0,"aria-disabled":r||void 0,"data-disabled":r?"":void 0,...s,ref:c,onPointerMove:me(t.onPointerMove,$m(p=>{r?i.onItemLeave(p):(i.onItemEnter(p),p.defaultPrevented||p.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:me(t.onPointerLeave,$m(p=>i.onItemLeave(p))),onFocus:me(t.onFocus,()=>d(!0)),onBlur:me(t.onBlur,()=>d(!1))})})})}),gDe="MenuCheckboxItem",D6=k.forwardRef((t,e)=>{const{checked:n=!1,onCheckedChange:r,...o}=t;return S.jsx(B6,{scope:t.__scopeMenu,checked:n,children:S.jsx(Lw,{role:"menuitemcheckbox","aria-checked":Db(n)?"mixed":n,...o,ref:e,"data-state":j2(n),onSelect:me(o.onSelect,()=>r==null?void 0:r(Db(n)?!0:!n),{checkForDefaultPrevented:!1})})})});D6.displayName=gDe;var M6="MenuRadioGroup",[yDe,vDe]=iu(M6,{value:void 0,onValueChange:()=>{}}),F6=k.forwardRef((t,e)=>{const{value:n,onValueChange:r,...o}=t,s=Kn(r);return S.jsx(yDe,{scope:t.__scopeMenu,value:n,onValueChange:s,children:S.jsx(F2,{...o,ref:e})})});F6.displayName=M6;var L6="MenuRadioItem",j6=k.forwardRef((t,e)=>{const{value:n,...r}=t,o=vDe(L6,t.__scopeMenu),s=n===o.value;return S.jsx(B6,{scope:t.__scopeMenu,checked:s,children:S.jsx(Lw,{role:"menuitemradio","aria-checked":s,...r,ref:e,"data-state":j2(s),onSelect:me(r.onSelect,()=>{var i;return(i=o.onValueChange)==null?void 0:i.call(o,n)},{checkForDefaultPrevented:!1})})})});j6.displayName=L6;var L2="MenuItemIndicator",[B6,xDe]=iu(L2,{checked:!1}),z6=k.forwardRef((t,e)=>{const{__scopeMenu:n,forceMount:r,...o}=t,s=xDe(L2,n);return S.jsx(Yo,{present:r||Db(s.checked)||s.checked===!0,children:S.jsx(Re.span,{...o,ref:e,"data-state":j2(s.checked)})})});z6.displayName=L2;var bDe="MenuSeparator",W6=k.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t;return S.jsx(Re.div,{role:"separator","aria-orientation":"horizontal",...r,ref:e})});W6.displayName=bDe;var wDe="MenuArrow",V6=k.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t,o=Fw(n);return S.jsx(lN,{...o,...r,ref:e})});V6.displayName=wDe;var SDe="MenuSub",[Got,U6]=iu(SDe),Gh="MenuSubTrigger",G6=k.forwardRef((t,e)=>{const n=au(Gh,t.__scopeMenu),r=fg(Gh,t.__scopeMenu),o=U6(Gh,t.__scopeMenu),s=D2(Gh,t.__scopeMenu),i=k.useRef(null),{pointerGraceTimerRef:a,onPointerGraceIntentChange:l}=s,c={__scopeMenu:t.__scopeMenu},u=k.useCallback(()=>{i.current&&window.clearTimeout(i.current),i.current=null},[]);return k.useEffect(()=>u,[u]),k.useEffect(()=>{const d=a.current;return()=>{window.clearTimeout(d),l(null)}},[a,l]),S.jsx(R2,{asChild:!0,...c,children:S.jsx(_6,{id:o.triggerId,"aria-haspopup":"menu","aria-expanded":n.open,"aria-controls":o.contentId,"data-state":q6(n.open),...t,ref:A0(e,o.onTriggerChange),onClick:d=>{var f;(f=t.onClick)==null||f.call(t,d),!(t.disabled||d.defaultPrevented)&&(d.currentTarget.focus(),n.open||n.onOpenChange(!0))},onPointerMove:me(t.onPointerMove,$m(d=>{s.onItemEnter(d),!d.defaultPrevented&&!t.disabled&&!n.open&&!i.current&&(s.onPointerGraceIntentChange(null),i.current=window.setTimeout(()=>{n.onOpenChange(!0),u()},100))})),onPointerLeave:me(t.onPointerLeave,$m(d=>{var h,p;u();const f=(h=n.content)==null?void 0:h.getBoundingClientRect();if(f){const m=(p=n.content)==null?void 0:p.dataset.side,g=m==="right",y=g?-5:5,v=f[g?"left":"right"],x=f[g?"right":"left"];s.onPointerGraceIntentChange({area:[{x:d.clientX+y,y:d.clientY},{x:v,y:f.top},{x,y:f.top},{x,y:f.bottom},{x:v,y:f.bottom}],side:m}),window.clearTimeout(a.current),a.current=window.setTimeout(()=>s.onPointerGraceIntentChange(null),300)}else{if(s.onTriggerLeave(d),d.defaultPrevented)return;s.onPointerGraceIntentChange(null)}})),onKeyDown:me(t.onKeyDown,d=>{var h;const f=s.searchRef.current!=="";t.disabled||f&&d.key===" "||nDe[r.dir].includes(d.key)&&(n.onOpenChange(!0),(h=n.content)==null||h.focus(),d.preventDefault())})})})});G6.displayName=Gh;var H6="MenuSubContent",K6=k.forwardRef((t,e)=>{const n=A6(Uo,t.__scopeMenu),{forceMount:r=n.forceMount,...o}=t,s=au(Uo,t.__scopeMenu),i=fg(Uo,t.__scopeMenu),a=U6(H6,t.__scopeMenu),l=k.useRef(null),c=Xe(e,l);return S.jsx(Cm.Provider,{scope:t.__scopeMenu,children:S.jsx(Yo,{present:r||s.open,children:S.jsx(Cm.Slot,{scope:t.__scopeMenu,children:S.jsx(M2,{id:a.contentId,"aria-labelledby":a.triggerId,...o,ref:c,align:"start",side:i.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:u=>{var d;i.isUsingKeyboardRef.current&&((d=l.current)==null||d.focus()),u.preventDefault()},onCloseAutoFocus:u=>u.preventDefault(),onFocusOutside:me(t.onFocusOutside,u=>{u.target!==a.trigger&&s.onOpenChange(!1)}),onEscapeKeyDown:me(t.onEscapeKeyDown,u=>{i.onClose(),u.preventDefault()}),onKeyDown:me(t.onKeyDown,u=>{var h;const d=u.currentTarget.contains(u.target),f=rDe[i.dir].includes(u.key);d&&f&&(s.onOpenChange(!1),(h=a.trigger)==null||h.focus(),u.preventDefault())})})})})})});K6.displayName=H6;function q6(t){return t?"open":"closed"}function Db(t){return t==="indeterminate"}function j2(t){return Db(t)?"indeterminate":t?"checked":"unchecked"}function CDe(t){const e=document.activeElement;for(const n of t)if(n===e||(n.focus(),document.activeElement!==e))return}function $De(t,e){return t.map((n,r)=>t[(e+r)%t.length])}function kDe(t,e,n){const o=e.length>1&&Array.from(e).every(c=>c===e[0])?e[0]:e,s=n?t.indexOf(n):-1;let i=$De(t,Math.max(s,0));o.length===1&&(i=i.filter(c=>c!==n));const l=i.find(c=>c.toLowerCase().startsWith(o.toLowerCase()));return l!==n?l:void 0}function TDe(t,e){const{x:n,y:r}=t;let o=!1;for(let s=0,i=e.length-1;s<e.length;i=s++){const a=e[s].x,l=e[s].y,c=e[i].x,u=e[i].y;l>r!=u>r&&n<(c-a)*(r-l)/(u-l)+a&&(o=!o)}return o}function IDe(t,e){if(!e)return!1;const n={x:t.clientX,y:t.clientY};return TDe(n,e)}function $m(t){return e=>e.pointerType==="mouse"?t(e):void 0}var EDe=N6,NDe=R2,ADe=O6,ODe=P6,PDe=F2,RDe=R6,_De=Lw,DDe=D6,MDe=F6,FDe=j6,LDe=z6,jDe=W6,BDe=V6,zDe=G6,WDe=K6,B2="DropdownMenu",[VDe,Hot]=Jr(B2,[I6]),_r=I6(),[UDe,X6]=VDe(B2),Y6=t=>{const{__scopeDropdownMenu:e,children:n,dir:r,open:o,defaultOpen:s,onOpenChange:i,modal:a=!0}=t,l=_r(e),c=k.useRef(null),[u=!1,d]=qi({prop:o,defaultProp:s,onChange:i});return S.jsx(UDe,{scope:e,triggerId:Fi(),triggerRef:c,contentId:Fi(),open:u,onOpenChange:d,onOpenToggle:k.useCallback(()=>d(f=>!f),[d]),modal:a,children:S.jsx(EDe,{...l,open:u,onOpenChange:d,dir:r,modal:a,children:n})})};Y6.displayName=B2;var Q6="DropdownMenuTrigger",Z6=k.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,disabled:r=!1,...o}=t,s=X6(Q6,n),i=_r(n);return S.jsx(NDe,{asChild:!0,...i,children:S.jsx(Re.button,{type:"button",id:s.triggerId,"aria-haspopup":"menu","aria-expanded":s.open,"aria-controls":s.open?s.contentId:void 0,"data-state":s.open?"open":"closed","data-disabled":r?"":void 0,disabled:r,...o,ref:A0(e,s.triggerRef),onPointerDown:me(t.onPointerDown,a=>{!r&&a.button===0&&a.ctrlKey===!1&&(s.onOpenToggle(),s.open||a.preventDefault())}),onKeyDown:me(t.onKeyDown,a=>{r||(["Enter"," "].includes(a.key)&&s.onOpenToggle(),a.key==="ArrowDown"&&s.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(a.key)&&a.preventDefault())})})})});Z6.displayName=Q6;var GDe="DropdownMenuPortal",J6=t=>{const{__scopeDropdownMenu:e,...n}=t,r=_r(e);return S.jsx(ADe,{...r,...n})};J6.displayName=GDe;var eK="DropdownMenuContent",tK=k.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,o=X6(eK,n),s=_r(n),i=k.useRef(!1);return S.jsx(ODe,{id:o.contentId,"aria-labelledby":o.triggerId,...s,...r,ref:e,onCloseAutoFocus:me(t.onCloseAutoFocus,a=>{var l;i.current||(l=o.triggerRef.current)==null||l.focus(),i.current=!1,a.preventDefault()}),onInteractOutside:me(t.onInteractOutside,a=>{const l=a.detail.originalEvent,c=l.button===0&&l.ctrlKey===!0,u=l.button===2||c;(!o.modal||u)&&(i.current=!0)}),style:{...t.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});tK.displayName=eK;var HDe="DropdownMenuGroup",KDe=k.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,o=_r(n);return S.jsx(PDe,{...o,...r,ref:e})});KDe.displayName=HDe;var qDe="DropdownMenuLabel",nK=k.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,o=_r(n);return S.jsx(RDe,{...o,...r,ref:e})});nK.displayName=qDe;var XDe="DropdownMenuItem",rK=k.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,o=_r(n);return S.jsx(_De,{...o,...r,ref:e})});rK.displayName=XDe;var YDe="DropdownMenuCheckboxItem",oK=k.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,o=_r(n);return S.jsx(DDe,{...o,...r,ref:e})});oK.displayName=YDe;var QDe="DropdownMenuRadioGroup",ZDe=k.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,o=_r(n);return S.jsx(MDe,{...o,...r,ref:e})});ZDe.displayName=QDe;var JDe="DropdownMenuRadioItem",sK=k.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,o=_r(n);return S.jsx(FDe,{...o,...r,ref:e})});sK.displayName=JDe;var eMe="DropdownMenuItemIndicator",iK=k.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,o=_r(n);return S.jsx(LDe,{...o,...r,ref:e})});iK.displayName=eMe;var tMe="DropdownMenuSeparator",aK=k.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,o=_r(n);return S.jsx(jDe,{...o,...r,ref:e})});aK.displayName=tMe;var nMe="DropdownMenuArrow",rMe=k.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,o=_r(n);return S.jsx(BDe,{...o,...r,ref:e})});rMe.displayName=nMe;var oMe="DropdownMenuSubTrigger",lK=k.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,o=_r(n);return S.jsx(zDe,{...o,...r,ref:e})});lK.displayName=oMe;var sMe="DropdownMenuSubContent",cK=k.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,o=_r(n);return S.jsx(WDe,{...o,...r,ref:e,style:{...t.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});cK.displayName=sMe;var iMe=Y6,aMe=Z6,lMe=J6,uK=tK,dK=nK,fK=rK,hK=oK,pK=sK,mK=iK,gK=aK,yK=lK,vK=cK;const cMe=iMe,uMe=aMe,dMe=k.forwardRef(({className:t,inset:e,children:n,...r},o)=>S.jsxs(yK,{ref:o,className:Le("flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",e&&"pl-8",t),...r,children:[n,S.jsx(Yte,{className:"ml-auto"})]}));dMe.displayName=yK.displayName;const fMe=k.forwardRef(({className:t,...e},n)=>S.jsx(vK,{ref:n,className:Le("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-dropdown-menu-content-transform-origin]",t),...e}));fMe.displayName=vK.displayName;const xK=k.forwardRef(({className:t,sideOffset:e=4,...n},r)=>S.jsx(lMe,{children:S.jsx(uK,{ref:r,sideOffset:e,className:Le("z-50 max-h-[var(--radix-dropdown-menu-content-available-height)] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-dropdown-menu-content-transform-origin]",t),...n})}));xK.displayName=uK.displayName;const rI=k.forwardRef(({className:t,inset:e,...n},r)=>S.jsx(fK,{ref:r,className:Le("relative flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",e&&"pl-8",t),...n}));rI.displayName=fK.displayName;const hMe=k.forwardRef(({className:t,children:e,checked:n,...r},o)=>S.jsxs(hK,{ref:o,className:Le("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),checked:n,...r,children:[S.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:S.jsx(mK,{children:S.jsx(qE,{className:"h-4 w-4"})})}),e]}));hMe.displayName=hK.displayName;const pMe=k.forwardRef(({className:t,children:e,...n},r)=>S.jsxs(pK,{ref:r,className:Le("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...n,children:[S.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:S.jsx(mK,{children:S.jsx(j4,{className:"h-2 w-2 fill-current"})})}),e]}));pMe.displayName=pK.displayName;const bK=k.forwardRef(({className:t,inset:e,...n},r)=>S.jsx(dK,{ref:r,className:Le("px-2 py-1.5 text-sm font-semibold",e&&"pl-8",t),...n}));bK.displayName=dK.displayName;const oI=k.forwardRef(({className:t,...e},n)=>S.jsx(gK,{ref:n,className:Le("-mx-1 my-1 h-px bg-muted",t),...e}));oI.displayName=gK.displayName;function mMe(){const[t]=hee(),{user:e,isAuthenticated:n,isLoading:r}=Jm(),{t:o}=tn(),[s,i]=k.useState(!1),a=()=>{i(!s)};return S.jsx("header",{className:"bg-white shadow-md",children:S.jsxs("div",{className:"container mx-auto px-4 py-3",children:[S.jsxs("div",{className:"flex justify-between items-center",children:[S.jsxs("div",{className:"flex items-center space-x-2 space-x-reverse",children:[S.jsx("img",{src:"/images/logo.svg",alt:"Eco DZ Logo",className:"w-8 h-8"}),S.jsx(ys,{href:"/",children:S.jsx("h1",{className:"text-xl font-bold font-cairo text-primary cursor-pointer",children:o("header.title")})})]}),S.jsxs("div",{className:"hidden md:flex space-x-4 space-x-reverse",children:[S.jsx(Oh,{href:"/analysis",current:t,children:o("header.analysis")}),S.jsx(Oh,{href:"/database",current:t,children:o("header.database")}),S.jsx(Oh,{href:"/simulation",current:t,children:o("header.simulation")}),S.jsx(Oh,{href:"/sensor",current:t,children:o("header.sensor")}),S.jsx(Oh,{href:"/about",current:t,children:o("header.about")})]}),S.jsxs("div",{className:"flex items-center space-x-4 space-x-reverse",children:[S.jsx(q_e,{}),r?S.jsx("div",{className:"w-8 h-8 rounded-full bg-gray-200 animate-pulse"}):n?S.jsx(gMe,{user:e}):S.jsxs(Jt,{onClick:()=>window.location.href="/api/login",className:"flex items-center space-x-1 space-x-reverse bg-primary text-white px-3 py-1.5 rounded-full text-sm",children:[S.jsx("span",{children:o("header.login")}),S.jsx(B4,{className:"h-4 w-4"})]}),S.jsx("button",{className:"block md:hidden",onClick:a,children:s?S.jsx(XE,{className:"h-6 w-6"}):S.jsx(ine,{className:"h-6 w-6"})})]})]}),s&&S.jsx("div",{className:"md:hidden mt-4 py-3 bg-white",children:S.jsxs("div",{className:"flex flex-col space-y-3",children:[S.jsx(Ph,{href:"/analysis",current:t,onClick:()=>i(!1),children:o("header.analysis")}),S.jsx(Ph,{href:"/database",current:t,onClick:()=>i(!1),children:o("header.database")}),S.jsx(Ph,{href:"/simulation",current:t,onClick:()=>i(!1),children:o("header.simulation")}),S.jsx(Ph,{href:"/sensor",current:t,onClick:()=>i(!1),children:o("header.sensor")}),S.jsx(Ph,{href:"/about",current:t,onClick:()=>i(!1),children:o("header.about")})]})})]})})}function Oh({href:t,current:e,children:n}){const r=e===t;return S.jsx(ys,{href:t,children:S.jsx("a",{className:`px-3 py-2 transition ${r?"text-primary font-semibold":"text-gray-700 hover:text-primary"}`,children:n})})}function Ph({href:t,current:e,children:n,onClick:r}){const o=e===t;return S.jsx(ys,{href:t,children:S.jsx("a",{className:`px-4 py-2 rounded-md ${o?"bg-gray-100 text-primary font-semibold":"text-gray-700"}`,onClick:r,children:n})})}function gMe({user:t}){var n,r;const{t:e}=tn();return S.jsxs(cMe,{children:[S.jsx(uMe,{asChild:!0,children:S.jsx(Jt,{variant:"ghost",className:"relative rounded-full",children:S.jsxs(C6,{className:"h-8 w-8",children:[S.jsx($6,{src:t==null?void 0:t.profileImageUrl,alt:(t==null?void 0:t.firstName)||""}),S.jsx(k6,{className:"bg-primary text-white",children:((n=t==null?void 0:t.firstName)==null?void 0:n[0])||((r=t==null?void 0:t.email)==null?void 0:r[0])||"U"})]})})}),S.jsxs(xK,{align:"end",className:"w-56",children:[S.jsxs(bK,{children:[e("auth.greeting"),", ",(t==null?void 0:t.firstName)||e("auth.user")]}),S.jsx(oI,{}),S.jsxs(rI,{children:[S.jsx(B4,{className:"mr-2 h-4 w-4"}),S.jsx("span",{children:e("auth.profile")})]}),S.jsx(oI,{}),S.jsx(rI,{onClick:()=>window.location.href="/api/logout",children:e("auth.logout")})]})]})}function yMe(){const{t}=tn();return S.jsx("footer",{className:"bg-gray-900 text-white py-12",children:S.jsxs("div",{className:"container mx-auto px-4",children:[S.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-8",children:[S.jsxs("div",{children:[S.jsxs("div",{className:"flex items-center space-x-2 space-x-reverse mb-4",children:[S.jsx("span",{className:"material-icons text-green-400 text-2xl",children:"eco"}),S.jsx("h3",{className:"text-xl font-bold font-cairo",children:t("footer.title")})]}),S.jsx("p",{className:"text-gray-400 mb-4",children:t("footer.description")}),S.jsxs("div",{className:"flex space-x-4 space-x-reverse",children:[S.jsx("a",{href:"#",className:"text-gray-400 hover:text-white transition",children:S.jsx(nne,{className:"h-5 w-5"})}),S.jsx("a",{href:"#",className:"text-gray-400 hover:text-white transition",children:S.jsx(one,{className:"h-5 w-5"})}),S.jsx("a",{href:"#",className:"text-gray-400 hover:text-white transition",children:S.jsx(rne,{className:"h-5 w-5"})})]})]}),S.jsxs("div",{children:[S.jsx("h4",{className:"text-lg font-bold mb-4 font-cairo",children:t("footer.quickLinks.title")}),S.jsxs("ul",{className:"space-y-2",children:[S.jsx("li",{children:S.jsx(ys,{href:"/analysis",children:S.jsx("a",{className:"text-gray-400 hover:text-white transition",children:t("footer.quickLinks.analysis")})})}),S.jsx("li",{children:S.jsx(ys,{href:"/database",children:S.jsx("a",{className:"text-gray-400 hover:text-white transition",children:t("footer.quickLinks.database")})})}),S.jsx("li",{children:S.jsx(ys,{href:"/simulation",children:S.jsx("a",{className:"text-gray-400 hover:text-white transition",children:t("footer.quickLinks.simulation")})})}),S.jsx("li",{children:S.jsx(ys,{href:"/sensor",children:S.jsx("a",{className:"text-gray-400 hover:text-white transition",children:t("footer.quickLinks.sensor")})})}),S.jsx("li",{children:S.jsx(ys,{href:"/about",children:S.jsx("a",{className:"text-gray-400 hover:text-white transition",children:t("footer.quickLinks.about")})})})]})]}),S.jsxs("div",{children:[S.jsx("h4",{className:"text-lg font-bold mb-4 font-cairo",children:t("footer.support.title")}),S.jsxs("ul",{className:"space-y-2",children:[S.jsx("li",{children:S.jsx("a",{href:"#",className:"text-gray-400 hover:text-white transition",children:t("footer.support.faq")})}),S.jsx("li",{children:S.jsx("a",{href:"#",className:"text-gray-400 hover:text-white transition",children:t("footer.support.guide")})}),S.jsx("li",{children:S.jsx("a",{href:"#",className:"text-gray-400 hover:text-white transition",children:t("footer.support.terms")})}),S.jsx("li",{children:S.jsx("a",{href:"#",className:"text-gray-400 hover:text-white transition",children:t("footer.support.help")})}),S.jsx("li",{children:S.jsx("a",{href:"#",className:"text-gray-400 hover:text-white transition",children:t("footer.support.contact")})})]})]}),S.jsxs("div",{children:[S.jsx("h4",{className:"text-lg font-bold mb-4 font-cairo",children:t("footer.newsletter.title")}),S.jsx("p",{className:"text-gray-400 mb-4",children:t("footer.newsletter.description")}),S.jsxs("div",{className:"flex",children:[S.jsx(V0,{type:"email",placeholder:t("footer.newsletter.emailPlaceholder"),className:"px-4 py-2 rounded-r-lg focus:outline-none focus:ring-2 focus:ring-primary w-full text-gray-800"}),S.jsx(Jt,{className:"bg-primary hover:bg-primary-dark px-4 py-2 rounded-l-lg transition",children:S.jsx("span",{className:"material-icons",children:"send"})})]})]})]}),S.jsxs("div",{className:"mt-12 pt-8 border-t border-gray-800 flex flex-col md:flex-row justify-between items-center",children:[S.jsx("p",{className:"text-gray-500 mb-4 md:mb-0",children:t("footer.copyright")}),S.jsxs("div",{className:"flex space-x-6 space-x-reverse",children:[S.jsx("a",{href:"#",className:"text-gray-500 hover:text-white transition",children:t("footer.privacy")}),S.jsx("a",{href:"#",className:"text-gray-500 hover:text-white transition",children:t("footer.terms")}),S.jsx("a",{href:"#",className:"text-gray-500 hover:text-white transition",children:t("footer.cookies")})]})]})]})})}var vMe=(t,e,n,r,o,s,i,a)=>{let l=document.documentElement,c=["light","dark"];function u(h){(Array.isArray(t)?t:[t]).forEach(p=>{let m=p==="class",g=m&&s?o.map(y=>s[y]||y):o;m?(l.classList.remove(...g),l.classList.add(s&&s[h]?s[h]:h)):l.setAttribute(p,h)}),d(h)}function d(h){a&&c.includes(h)&&(l.style.colorScheme=h)}function f(){return window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"}if(r)u(r);else try{let h=localStorage.getItem(e)||n,p=i&&h==="system"?f():h;u(p)}catch{}},DL=["light","dark"],wK="(prefers-color-scheme: dark)",xMe=typeof window>"u",SK=k.createContext(void 0),bMe=t=>k.useContext(SK)?k.createElement(k.Fragment,null,t.children):k.createElement(SMe,{...t}),wMe=["light","dark"],SMe=({forcedTheme:t,disableTransitionOnChange:e=!1,enableSystem:n=!0,enableColorScheme:r=!0,storageKey:o="theme",themes:s=wMe,defaultTheme:i=n?"system":"light",attribute:a="data-theme",value:l,children:c,nonce:u,scriptProps:d})=>{let[f,h]=k.useState(()=>$Me(o,i)),[p,m]=k.useState(()=>f==="system"?MC():f),g=l?Object.values(l):s,y=k.useCallback(w=>{let C=w;if(!C)return;w==="system"&&n&&(C=MC());let $=l?l[C]:C,T=e?kMe(u):null,I=document.documentElement,E=N=>{N==="class"?(I.classList.remove(...g),$&&I.classList.add($)):N.startsWith("data-")&&($?I.setAttribute(N,$):I.removeAttribute(N))};if(Array.isArray(a)?a.forEach(E):E(a),r){let N=DL.includes(i)?i:null,A=DL.includes(C)?C:N;I.style.colorScheme=A}T==null||T()},[u]),v=k.useCallback(w=>{let C=typeof w=="function"?w(f):w;h(C);try{localStorage.setItem(o,C)}catch{}},[f]),x=k.useCallback(w=>{let C=MC(w);m(C),f==="system"&&n&&!t&&y("system")},[f,t]);k.useEffect(()=>{let w=window.matchMedia(wK);return w.addListener(x),x(w),()=>w.removeListener(x)},[x]),k.useEffect(()=>{let w=C=>{C.key===o&&(C.newValue?h(C.newValue):v(i))};return window.addEventListener("storage",w),()=>window.removeEventListener("storage",w)},[v]),k.useEffect(()=>{y(t??f)},[t,f]);let b=k.useMemo(()=>({theme:f,setTheme:v,forcedTheme:t,resolvedTheme:f==="system"?p:f,themes:n?[...s,"system"]:s,systemTheme:n?p:void 0}),[f,v,t,p,n,s]);return k.createElement(SK.Provider,{value:b},k.createElement(CMe,{forcedTheme:t,storageKey:o,attribute:a,enableSystem:n,enableColorScheme:r,defaultTheme:i,value:l,themes:s,nonce:u,scriptProps:d}),c)},CMe=k.memo(({forcedTheme:t,storageKey:e,attribute:n,enableSystem:r,enableColorScheme:o,defaultTheme:s,value:i,themes:a,nonce:l,scriptProps:c})=>{let u=JSON.stringify([n,e,s,t,a,i,r,o]).slice(1,-1);return k.createElement("script",{...c,suppressHydrationWarning:!0,nonce:typeof window>"u"?l:"",dangerouslySetInnerHTML:{__html:`(${vMe.toString()})(${u})`}})}),$Me=(t,e)=>{if(xMe)return;let n;try{n=localStorage.getItem(t)||void 0}catch{}return n||e},kMe=t=>{let e=document.createElement("style");return t&&e.setAttribute("nonce",t),e.appendChild(document.createTextNode("*,*::before,*::after{-webkit-transition:none!important;-moz-transition:none!important;-o-transition:none!important;-ms-transition:none!important;transition:none!important}")),document.head.appendChild(e),()=>{window.getComputedStyle(document.body),setTimeout(()=>{document.head.removeChild(e)},1)}},MC=t=>(t||(t=window.matchMedia(wK)),t.matches?"dark":"light");function TMe({children:t,...e}){return S.jsx(bMe,{...e,children:t})}function IMe(){return S.jsxs(gee,{children:[S.jsx(Ll,{path:"/",component:vse}),S.jsx(Ll,{path:"/analysis",component:ole}),S.jsx(Ll,{path:"/database",component:Wce}),S.jsx(Ll,{path:"/simulation",component:G_e}),S.jsx(Ll,{path:"/about",component:H_e}),S.jsx(Ll,{path:"/sensor",component:K_e}),S.jsx(Ll,{component:boe})]})}function EMe(){return k.useEffect(()=>{document.documentElement.dir="rtl",document.documentElement.lang="ar"},[]),S.jsx(Fee,{client:f4,children:S.jsx(TMe,{defaultTheme:"light",attribute:"class",children:S.jsxs(poe,{children:[S.jsxs("div",{className:"flex flex-col min-h-screen",children:[S.jsx(mMe,{}),S.jsx("main",{className:"flex-grow",children:S.jsx(IMe,{})}),S.jsx(yMe,{})]}),S.jsx(Vne,{})]})})})}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const NMe=1e-7,AMe=1e-4;class CK{constructor(e,n){this.backend=e,this.dataMover=n,this.data=new WeakMap,this.dataIdsCount=0}get(e){return this.data.has(e)||this.dataMover.moveData(this.backend,e),this.data.get(e)}set(e,n){this.dataIdsCount++,this.data.set(e,n)}has(e){return this.data.has(e)}delete(e){return this.dataIdsCount--,this.data.delete(e)}numDataIds(){return this.dataIdsCount}}class z2{refCount(e){return Fr("refCount")}incRef(e){return Fr("incRef")}timerAvailable(){return!0}time(e){return Fr("time")}read(e){return Fr("read")}readSync(e){return Fr("readSync")}readToGPU(e,n){return Fr("readToGPU")}numDataIds(){return Fr("numDataIds")}disposeData(e,n){return Fr("disposeData")}write(e,n,r){return Fr("write")}move(e,n,r,o,s){return Fr("move")}createTensorFromGPUData(e,n,r){return Fr("createTensorFromGPUData")}memory(){return Fr("memory")}floatPrecision(){return Fr("floatPrecision")}epsilon(){return this.floatPrecision()===32?NMe:AMe}dispose(){return Fr("dispose")}}function Fr(t){throw new Error(`'${t}' not yet implemented or not found in the registry. This kernel may not be supported by the tfjs backend you have chosen`)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function OMe(t){let e=t.length,n=0;for(;e>0;)n=Math.random()*e|0,e--,Pu(t,e,n)}function jc(t,e,n){return Math.max(t,Math.min(e,n))}function W2(t){return t%2===0?t:t+1}function Pu(t,e,n){const r=t[e];t[e]=t[n],t[n]=r}function PMe(t){let e=0;for(let n=0;n<t.length;n++)e+=t[n];return e}function M(t,e){if(!t)throw new Error(typeof e=="string"?e:e())}function V2(t,e,n=""){M(dt(t,e),()=>n+` Shapes ${t} and ${e} must match`)}function $K(t){M(t!=null,()=>"The input to the tensor constructor must be a non-null value.")}function ne(t){if(t.length===0)return 1;let e=t[0];for(let n=1;n<t.length;n++)e*=t[n];return e}function dt(t,e){if(t===e)return!0;if(t==null||e==null||t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}function uf(t){return t%1===0}function sI(t){const e=Math.ceil(Math.sqrt(t));return[e,Math.ceil(t/e)]}function fd(t,e){return e<=t.length?t:t+" ".repeat(e-t.length)}function ML(t,e=o=>0,n,r){return new Promise((o,s)=>{let i=0;const a=()=>{if(t()){o();return}i++;const l=e(i);if(n!=null&&i>=n){s();return}r!=null?r(a,l):setTimeout(a,l)};a()})}function kK(t,e){let n=1,r=-1;for(let s=0;s<t.length;++s)if(t[s]>=0)n*=t[s];else if(t[s]===-1){if(r!==-1)throw Error(`Shapes can only have 1 implicit size. Found -1 at dim ${r} and dim ${s}`);r=s}else if(t[s]<0)throw Error(`Shapes can not be < 0. Found ${t[s]} at dim ${s}`);if(r===-1){if(e>0&&e!==n)throw Error(`Size(${e}) must match the product of shape ${t}`);return t}if(n===0)throw Error(`Cannot infer the missing size in [${t}] when there are 0 elements`);if(e%n!==0)throw Error(`The implicit shape can't be a fractional number. Got ${e} / ${n}`);const o=t.slice();return o[r]=e/n,o}function He(t,e){const n=e.length;return t=t==null?e.map((r,o)=>o):[].concat(t),M(t.every(r=>r>=-n&&r<n),()=>`All values in axis param must be in range [-${n}, ${n}) but got axis ${t}`),M(t.every(r=>uf(r)),()=>`All values in axis param must be integers but got axis ${t}`),t.map(r=>r<0?n+r:r)}function El(t,e){const n=[],r=[],o=e!=null&&Array.isArray(e)&&e.length===0,s=e==null||o?null:He(e,t).sort();let i=0;for(let a=0;a<t.length;++a){if(s!=null){if(s[i]===a&&t[a]!==1)throw new Error(`Can't squeeze axis ${a} since its dim '${t[a]}' is not 1`);(s[i]==null||s[i]>a)&&t[a]===1&&(n.push(t[a]),r.push(a)),s[i]<=a&&i++}t[a]!==1&&(n.push(t[a]),r.push(a))}return{newShape:n,keptDims:r}}function qn(t,e){return Qt(t,e)}function Qt(t,e){let n=null;if(t==null||t==="float32")n=new Float32Array(e);else if(t==="int32")n=new Int32Array(e);else if(t==="bool")n=new Uint8Array(e);else if(t==="string")n=new Array(e);else throw new Error(`Unknown data type ${t}`);return n}function RMe(t,e){for(let n=0;n<t.length;n++){const r=t[n];if(isNaN(r)||!isFinite(r))throw Error(`A tensor of type ${e} being uploaded contains ${r}.`)}}function _Me(t){return t==="bool"||t==="complex64"||t==="float32"||t==="int32"||t==="string"}function TK(t,e){return!(e==="complex64"||e==="float32"&&t!=="complex64"||e==="int32"&&t!=="float32"&&t!=="complex64"||e==="bool"&&t==="bool")}function Mb(t){if(t==="float32"||t==="int32")return 4;if(t==="complex64")return 8;if(t==="bool")return 1;throw new Error(`Unknown dtype ${t}`)}function DMe(t){if(t==null)return 0;let e=0;return t.forEach(n=>e+=n.length),e}function hg(t){return typeof t=="string"||t instanceof String}function MMe(t){return typeof t=="boolean"}function iI(t){return typeof t=="number"}function Gf(t){return Array.isArray(t)?Gf(t[0]):t instanceof Float32Array?"float32":t instanceof Int32Array||t instanceof Uint8Array||t instanceof Uint8ClampedArray?"int32":iI(t)?"float32":hg(t)?"string":MMe(t)?"bool":"float32"}function aI(t){return!!(t&&t.constructor&&t.call&&t.apply)}function lI(t,e){for(let n=e;n<t;++n)if(t%n===0)return n;return t}function Ie(t){const e=t.length;if(e<2)return[];const n=new Array(e-1);n[e-2]=t[e-1];for(let r=e-3;r>=0;--r)n[r]=n[r+1]*t[r+1];return n}function IK(t,e,n,r=!1){const o=new Array;if(e.length===1){const s=e[0]*(r?2:1);for(let i=0;i<s;i++)o[i]=n[t+i]}else{const s=e[0],i=e.slice(1),a=i.reduce((l,c)=>l*c)*(r?2:1);for(let l=0;l<s;l++)o[l]=IK(t+l*a,i,n,r)}return o}function Ts(t,e,n=!1){if(t.length===0)return e[0];const r=t.reduce((o,s)=>o*s)*(n?2:1);if(r===0)return[];if(r!==e.length)throw new Error(`[${t}] does not match the input size ${e.length}${n?" for a complex tensor":""}.`);return IK(0,t,e,n)}function FMe(t,e){if(Array.isArray(t))return t;if(e==="float32")return t instanceof Float32Array?t:new Float32Array(t);if(e==="int32")return t instanceof Int32Array?t:new Int32Array(t);if(e==="bool"||e==="string")return Uint8Array.from(new Int32Array(t));throw new Error(`Unknown dtype ${e}`)}function U2(t,e){const n=Xn(t,e);for(let r=0;r<n.length;r++)n[r]=1;return n}function Xn(t,e){if(e==null||e==="float32"||e==="complex64")return new Float32Array(t);if(e==="int32")return new Int32Array(t);if(e==="bool")return new Uint8Array(t);throw new Error(`Unknown data type ${e}`)}function EK(t,e){const n=t.reduce((r,o)=>r*o,1);if(e==null||e==="float32")return Ts(t,new Float32Array(n));if(e==="int32")return Ts(t,new Int32Array(n));if(e==="bool")return Ts(t,new Uint8Array(n));throw new Error(`Unknown data type ${e}`)}function ca(t){t.forEach(e=>{M(Number.isInteger(e)&&e>=0,()=>`Tensor must have a shape comprised of positive integers but got shape [${t}].`)})}function ai(t,e,n){if(e===0)return 0;if(e===1)return t[0];let r=t[t.length-1];for(let o=0;o<t.length-1;++o)r+=n[o]*t[o];return r}function Hf(t,e,n){if(e===0)return[];if(e===1)return[t];const r=new Array(e);for(let o=0;o<r.length-1;++o)r[o]=Math.floor(t/n[o]),t-=r[o]*n[o];return r[r.length-1]=t,r}function G2(t){return t&&t.then&&typeof t.then=="function"}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const FL="tfjsflags";class LMe{constructor(e){this.global=e,this.flags={},this.flagRegistry={},this.urlFlags={},this.getQueryParams=jMe,this.populateURLFlags()}setPlatform(e,n){this.platform!=null&&(ee().getBool("IS_TEST")||ee().getBool("PROD")||console.warn(`Platform ${this.platformName} has already been set. Overwriting the platform with ${e}.`)),this.platformName=e,this.platform=n}registerFlag(e,n,r){if(this.flagRegistry[e]={evaluationFn:n,setHook:r},this.urlFlags[e]!=null){const o=this.urlFlags[e];ee().getBool("IS_TEST")||ee().getBool("PROD")||console.warn(`Setting feature override from URL ${e}: ${o}.`),this.set(e,o)}}async getAsync(e){return e in this.flags?this.flags[e]:(this.flags[e]=await this.evaluateFlag(e),this.flags[e])}get(e){if(e in this.flags)return this.flags[e];const n=this.evaluateFlag(e);if(G2(n))throw new Error(`Flag ${e} cannot be synchronously evaluated. Please use getAsync() instead.`);return this.flags[e]=n,this.flags[e]}getNumber(e){return this.get(e)}getBool(e){return this.get(e)}getString(e){return this.get(e)}getFlags(){return this.flags}get features(){return this.flags}set(e,n){if(this.flagRegistry[e]==null)throw new Error(`Cannot set flag ${e} as it has not been registered.`);this.flags[e]=n,this.flagRegistry[e].setHook!=null&&this.flagRegistry[e].setHook(n)}evaluateFlag(e){if(this.flagRegistry[e]==null)throw new Error(`Cannot evaluate flag '${e}': no evaluation function found.`);return this.flagRegistry[e].evaluationFn()}setFlags(e){this.flags=Object.assign({},e)}reset(){this.flags={},this.urlFlags={},this.populateURLFlags()}populateURLFlags(){if(typeof this.global>"u"||typeof this.global.location>"u"||typeof this.global.location.search>"u")return;const e=this.getQueryParams(this.global.location.search);FL in e&&e[FL].split(",").forEach(r=>{const[o,s]=r.split(":");this.urlFlags[o]=zMe(o,s)})}}function jMe(t){const e={};return t.replace(/[?&]([^=?&]+)(?:=([^&]*))?/g,(n,...r)=>(BMe(e,r[0],r[1]),r.join("="))),e}function BMe(t,e,n){t[decodeURIComponent(e)]=decodeURIComponent(n||"")}function zMe(t,e){const n=e.toLowerCase();return n==="true"||n==="false"?n==="true":`${+n}`===n?+n:e}function ee(){return NK}let NK=null;function WMe(t){NK=t}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let FC;function AK(){if(FC==null){let t;if(typeof window<"u")t=window;else if(typeof global<"u")t=global;else if(typeof process<"u")t=process;else if(typeof self<"u")t=self;else throw new Error("Could not find a global object");FC=t}return FC}function VMe(){const t=AK();return t._tfGlobals==null&&(t._tfGlobals=new Map),t._tfGlobals}function H2(t,e){const n=VMe();if(n.has(t))return n.get(t);{const r=e();return n.set(t,r),n.get(t)}}const jw="Abs",pg="Acos",mg="Acosh",Kf="Add",K2="AddN",q2="All",X2="Any",Bw="ArgMax",zw="ArgMin",gg="Asin",yg="Asinh",vg="Atan",xg="Atanh",bg="Atan2",Ww="AvgPool",Y2="AvgPoolGrad",Vw="AvgPool3D",Q2="AvgPool3DGrad",Uw="BatchMatMul",Gw="BatchToSpaceND",Z2="Bincount",J2="BitwiseAnd",UMe="BroadcastTo",OK="BroadcastArgs",wg="Cast",Sg="Ceil",Cg="ClipByValue",eA="Complex",Hw="ComplexAbs",Kw="Concat",qw="Conv2D",tA="Conv2DBackpropFilter",Xw="Conv2DBackpropInput",Yw="Conv3D",nA="Conv3DBackpropFilterV2",rA="Conv3DBackpropInputV2",$g="Cos",kg="Cosh",oA="Cumprod",Qw="Cumsum",sA="CropAndResize",iA="DenseBincount",aA="DepthToSpace",Zw="DepthwiseConv2dNative",lA="DepthwiseConv2dNativeBackpropFilter",cA="DepthwiseConv2dNativeBackpropInput",PK="Diag",Jw="Dilation2D",cI="Dilation2DBackpropInput",uI="Dilation2DBackpropFilter",GMe="Draw",Tg="RealDiv",uA="Einsum",Ig="Elu",dA="EluGrad",Eg="Erf",e1="Equal",Ng="Exp",t1="ExpandDims",Ag="Expm1",fA="FFT",hA="Fill",pA="FlipLeftRight",Og="Floor",Pg="FloorDiv",n1="FusedBatchNorm",r1="GatherV2",RK="GatherNd",o1="Greater",Rg="GreaterEqual",_g="Identity",mA="IFFT",gA="Imag",Dg="IsFinite",Mg="IsInf",Fg="IsNan",s1="LeakyRelu",i1="Less",a1="LessEqual",_K="LinSpace",Lg="Log",jg="Log1p",l1="LogicalAnd",c1="LogicalNot",u1="LogicalOr",HMe="LogSoftmax",d1="LRN",yA="LRNGrad",f1="Max",Bg="Maximum",h1="MaxPool",vA="MaxPoolGrad",p1="MaxPool3D",xA="MaxPool3DGrad",DK="MaxPoolWithArgmax",m1="Mean",g1="Min",zg="Minimum",y1="MirrorPad",Wg="Mod",MK="Multinomial",Vg="Multiply",v1="Neg",x1="NotEqual",bA="NonMaxSuppressionV3",wA="NonMaxSuppressionV4",SA="NonMaxSuppressionV5",b1="OnesLike",w1="OneHot",S1="Pack",C1="PadV2",Ug="Pow",$1="Prelu",k1="Prod",FK="RaggedGather",LK="RaggedRange",jK="RaggedTensorToTensor",CA="Range",$A="Real",Gg="Reciprocal",Hg="Relu",T1="Reshape",I1="ResizeNearestNeighbor",kA="ResizeNearestNeighborGrad",E1="ResizeBilinear",TA="ResizeBilinearGrad",Kg="Relu6",N1="Reverse",qg="Round",Xg="Rsqrt",BK="ScatterNd",zK="TensorScatterUpdate",WK="SearchSorted",A1="Select",Yg="Selu",O1="Slice",Qg="Sin",Zg="Sinh",Jg="Sign",ey="Sigmoid",ty="Softplus",ny="Sqrt",P1="Sum",R1="SpaceToBatchND",_1="SplitV",D1="Softmax",VK="SparseFillEmptyRows",UK="SparseReshape",GK="SparseSegmentMean",HK="SparseSegmentSum",KK="SparseToDense",ry="SquaredDifference",IA="Square",EA="StaticRegexReplace",NA="StridedSlice",qK="StringNGrams",XK="StringSplit",YK="StringToHashBucketFast",oy="Sub",sy="Tan",iy="Tanh",ay="Tile",AA="TopK",OA="Transform",hd="Transpose",PA="Unique",M1="Unpack",F1="UnsortedSegmentSum",L1="ZerosLike",ly="Step",KMe="FromPixels",RA="RotateWithOffset",Fb="_FusedMatMul",Lb="FusedConv2D",QK="FusedDepthwiseConv2D";/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lo(...t){ee().getBool("IS_TEST")||ee().getBool("PROD")||console.warn(...t)}function qMe(...t){ee().getBool("IS_TEST")||ee().getBool("PROD")||console.log(...t)}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const jb=H2("kernelRegistry",()=>new Map),dI=H2("gradRegistry",()=>new Map);function LL(t,e){const n=JK(t,e);return jb.get(n)}function jL(t){return dI.get(t)}function BL(t){const e=jb.entries(),n=[];for(;;){const{done:r,value:o}=e.next();if(r)break;const[s,i]=o,[a]=s.split("_");a===t&&n.push(i)}return n}function ZK(t){const{kernelName:e,backendName:n}=t,r=JK(e,n);jb.has(r)&&lo(`The kernel '${e}' for backend '${n}' is already registered`),jb.set(r,t)}function XMe(t){const{kernelName:e}=t;dI.has(e)&&ee().getBool("DEBUG")&&lo(`Overriding the gradient for '${e}'`),dI.set(e,t)}function JK(t,e){return`${e}_${t}`}/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function eq(t){return t instanceof Float32Array||t instanceof Int32Array||t instanceof Uint8Array||t instanceof Uint8ClampedArray}var tq=Nt,Fo=null;try{Fo=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch{}function Nt(t,e,n){this.low=t|0,this.high=e|0,this.unsigned=!!n}Nt.prototype.__isLong__;Object.defineProperty(Nt.prototype,"__isLong__",{value:!0});function to(t){return(t&&t.__isLong__)===!0}Nt.isLong=to;var zL={},WL={};function lu(t,e){var n,r,o;return e?(t>>>=0,(o=0<=t&&t<256)&&(r=WL[t],r)?r:(n=At(t,(t|0)<0?-1:0,!0),o&&(WL[t]=n),n)):(t|=0,(o=-128<=t&&t<128)&&(r=zL[t],r)?r:(n=At(t,t<0?-1:0,!1),o&&(zL[t]=n),n))}Nt.fromInt=lu;function Lo(t,e){if(isNaN(t))return e?ic:jo;if(e){if(t<0)return ic;if(t>=nq)return sq}else{if(t<=-UL)return Gr;if(t+1>=UL)return oq}return t<0?Lo(-t,e).neg():At(t%df|0,t/df|0,e)}Nt.fromNumber=Lo;function At(t,e,n){return new Nt(t,e,n)}Nt.fromBits=At;var Bb=Math.pow;function _A(t,e,n){if(t.length===0)throw Error("empty string");if(t==="NaN"||t==="Infinity"||t==="+Infinity"||t==="-Infinity")return jo;if(typeof e=="number"?(n=e,e=!1):e=!!e,n=n||10,n<2||36<n)throw RangeError("radix");var r;if((r=t.indexOf("-"))>0)throw Error("interior hyphen");if(r===0)return _A(t.substring(1),e,n).neg();for(var o=Lo(Bb(n,8)),s=jo,i=0;i<t.length;i+=8){var a=Math.min(8,t.length-i),l=parseInt(t.substring(i,i+a),n);if(a<8){var c=Lo(Bb(n,a));s=s.mul(c).add(Lo(l))}else s=s.mul(o),s=s.add(Lo(l))}return s.unsigned=e,s}Nt.fromString=_A;function Ls(t,e){return typeof t=="number"?Lo(t,e):typeof t=="string"?_A(t,e):At(t.low,t.high,typeof e=="boolean"?e:t.unsigned)}Nt.fromValue=Ls;var VL=65536,YMe=1<<24,df=VL*VL,nq=df*df,UL=nq/2,GL=lu(YMe),jo=lu(0);Nt.ZERO=jo;var ic=lu(0,!0);Nt.UZERO=ic;var Yu=lu(1);Nt.ONE=Yu;var rq=lu(1,!0);Nt.UONE=rq;var fI=lu(-1);Nt.NEG_ONE=fI;var oq=At(-1,2147483647,!1);Nt.MAX_VALUE=oq;var sq=At(-1,-1,!0);Nt.MAX_UNSIGNED_VALUE=sq;var Gr=At(0,-2147483648,!1);Nt.MIN_VALUE=Gr;var ye=Nt.prototype;ye.toInt=function(){return this.unsigned?this.low>>>0:this.low};ye.toNumber=function(){return this.unsigned?(this.high>>>0)*df+(this.low>>>0):this.high*df+(this.low>>>0)};ye.toString=function(e){if(e=e||10,e<2||36<e)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative())if(this.eq(Gr)){var n=Lo(e),r=this.div(n),o=r.mul(n).sub(this);return r.toString(e)+o.toInt().toString(e)}else return"-"+this.neg().toString(e);for(var s=Lo(Bb(e,6),this.unsigned),i=this,a="";;){var l=i.div(s),c=i.sub(l.mul(s)).toInt()>>>0,u=c.toString(e);if(i=l,i.isZero())return u+a;for(;u.length<6;)u="0"+u;a=""+u+a}};ye.getHighBits=function(){return this.high};ye.getHighBitsUnsigned=function(){return this.high>>>0};ye.getLowBits=function(){return this.low};ye.getLowBitsUnsigned=function(){return this.low>>>0};ye.getNumBitsAbs=function(){if(this.isNegative())return this.eq(Gr)?64:this.neg().getNumBitsAbs();for(var e=this.high!=0?this.high:this.low,n=31;n>0&&!(e&1<<n);n--);return this.high!=0?n+33:n+1};ye.isZero=function(){return this.high===0&&this.low===0};ye.eqz=ye.isZero;ye.isNegative=function(){return!this.unsigned&&this.high<0};ye.isPositive=function(){return this.unsigned||this.high>=0};ye.isOdd=function(){return(this.low&1)===1};ye.isEven=function(){return(this.low&1)===0};ye.equals=function(e){return to(e)||(e=Ls(e)),this.unsigned!==e.unsigned&&this.high>>>31===1&&e.high>>>31===1?!1:this.high===e.high&&this.low===e.low};ye.eq=ye.equals;ye.notEquals=function(e){return!this.eq(e)};ye.neq=ye.notEquals;ye.ne=ye.notEquals;ye.lessThan=function(e){return this.comp(e)<0};ye.lt=ye.lessThan;ye.lessThanOrEqual=function(e){return this.comp(e)<=0};ye.lte=ye.lessThanOrEqual;ye.le=ye.lessThanOrEqual;ye.greaterThan=function(e){return this.comp(e)>0};ye.gt=ye.greaterThan;ye.greaterThanOrEqual=function(e){return this.comp(e)>=0};ye.gte=ye.greaterThanOrEqual;ye.ge=ye.greaterThanOrEqual;ye.compare=function(e){if(to(e)||(e=Ls(e)),this.eq(e))return 0;var n=this.isNegative(),r=e.isNegative();return n&&!r?-1:!n&&r?1:this.unsigned?e.high>>>0>this.high>>>0||e.high===this.high&&e.low>>>0>this.low>>>0?-1:1:this.sub(e).isNegative()?-1:1};ye.comp=ye.compare;ye.negate=function(){return!this.unsigned&&this.eq(Gr)?Gr:this.not().add(Yu)};ye.neg=ye.negate;ye.add=function(e){to(e)||(e=Ls(e));var n=this.high>>>16,r=this.high&65535,o=this.low>>>16,s=this.low&65535,i=e.high>>>16,a=e.high&65535,l=e.low>>>16,c=e.low&65535,u=0,d=0,f=0,h=0;return h+=s+c,f+=h>>>16,h&=65535,f+=o+l,d+=f>>>16,f&=65535,d+=r+a,u+=d>>>16,d&=65535,u+=n+i,u&=65535,At(f<<16|h,u<<16|d,this.unsigned)};ye.subtract=function(e){return to(e)||(e=Ls(e)),this.add(e.neg())};ye.sub=ye.subtract;ye.multiply=function(e){if(this.isZero())return jo;if(to(e)||(e=Ls(e)),Fo){var n=Fo.mul(this.low,this.high,e.low,e.high);return At(n,Fo.get_high(),this.unsigned)}if(e.isZero())return jo;if(this.eq(Gr))return e.isOdd()?Gr:jo;if(e.eq(Gr))return this.isOdd()?Gr:jo;if(this.isNegative())return e.isNegative()?this.neg().mul(e.neg()):this.neg().mul(e).neg();if(e.isNegative())return this.mul(e.neg()).neg();if(this.lt(GL)&&e.lt(GL))return Lo(this.toNumber()*e.toNumber(),this.unsigned);var r=this.high>>>16,o=this.high&65535,s=this.low>>>16,i=this.low&65535,a=e.high>>>16,l=e.high&65535,c=e.low>>>16,u=e.low&65535,d=0,f=0,h=0,p=0;return p+=i*u,h+=p>>>16,p&=65535,h+=s*u,f+=h>>>16,h&=65535,h+=i*c,f+=h>>>16,h&=65535,f+=o*u,d+=f>>>16,f&=65535,f+=s*c,d+=f>>>16,f&=65535,f+=i*l,d+=f>>>16,f&=65535,d+=r*u+o*c+s*l+i*a,d&=65535,At(h<<16|p,d<<16|f,this.unsigned)};ye.mul=ye.multiply;ye.divide=function(e){if(to(e)||(e=Ls(e)),e.isZero())throw Error("division by zero");if(Fo){if(!this.unsigned&&this.high===-2147483648&&e.low===-1&&e.high===-1)return this;var n=(this.unsigned?Fo.div_u:Fo.div_s)(this.low,this.high,e.low,e.high);return At(n,Fo.get_high(),this.unsigned)}if(this.isZero())return this.unsigned?ic:jo;var r,o,s;if(this.unsigned){if(e.unsigned||(e=e.toUnsigned()),e.gt(this))return ic;if(e.gt(this.shru(1)))return rq;s=ic}else{if(this.eq(Gr)){if(e.eq(Yu)||e.eq(fI))return Gr;if(e.eq(Gr))return Yu;var i=this.shr(1);return r=i.div(e).shl(1),r.eq(jo)?e.isNegative()?Yu:fI:(o=this.sub(e.mul(r)),s=r.add(o.div(e)),s)}else if(e.eq(Gr))return this.unsigned?ic:jo;if(this.isNegative())return e.isNegative()?this.neg().div(e.neg()):this.neg().div(e).neg();if(e.isNegative())return this.div(e.neg()).neg();s=jo}for(o=this;o.gte(e);){r=Math.max(1,Math.floor(o.toNumber()/e.toNumber()));for(var a=Math.ceil(Math.log(r)/Math.LN2),l=a<=48?1:Bb(2,a-48),c=Lo(r),u=c.mul(e);u.isNegative()||u.gt(o);)r-=l,c=Lo(r,this.unsigned),u=c.mul(e);c.isZero()&&(c=Yu),s=s.add(c),o=o.sub(u)}return s};ye.div=ye.divide;ye.modulo=function(e){if(to(e)||(e=Ls(e)),Fo){var n=(this.unsigned?Fo.rem_u:Fo.rem_s)(this.low,this.high,e.low,e.high);return At(n,Fo.get_high(),this.unsigned)}return this.sub(this.div(e).mul(e))};ye.mod=ye.modulo;ye.rem=ye.modulo;ye.not=function(){return At(~this.low,~this.high,this.unsigned)};ye.and=function(e){return to(e)||(e=Ls(e)),At(this.low&e.low,this.high&e.high,this.unsigned)};ye.or=function(e){return to(e)||(e=Ls(e)),At(this.low|e.low,this.high|e.high,this.unsigned)};ye.xor=function(e){return to(e)||(e=Ls(e)),At(this.low^e.low,this.high^e.high,this.unsigned)};ye.shiftLeft=function(e){return to(e)&&(e=e.toInt()),(e&=63)===0?this:e<32?At(this.low<<e,this.high<<e|this.low>>>32-e,this.unsigned):At(0,this.low<<e-32,this.unsigned)};ye.shl=ye.shiftLeft;ye.shiftRight=function(e){return to(e)&&(e=e.toInt()),(e&=63)===0?this:e<32?At(this.low>>>e|this.high<<32-e,this.high>>e,this.unsigned):At(this.high>>e-32,this.high>=0?0:-1,this.unsigned)};ye.shr=ye.shiftRight;ye.shiftRightUnsigned=function(e){if(to(e)&&(e=e.toInt()),e&=63,e===0)return this;var n=this.high;if(e<32){var r=this.low;return At(r>>>e|n<<32-e,n>>>e,this.unsigned)}else return e===32?At(n,0,this.unsigned):At(n>>>e-32,0,this.unsigned)};ye.shru=ye.shiftRightUnsigned;ye.shr_u=ye.shiftRightUnsigned;ye.toSigned=function(){return this.unsigned?At(this.low,this.high,!1):this};ye.toUnsigned=function(){return this.unsigned?this:At(this.low,this.high,!0)};ye.toBytes=function(e){return e?this.toBytesLE():this.toBytesBE()};ye.toBytesLE=function(){var e=this.high,n=this.low;return[n&255,n>>>8&255,n>>>16&255,n>>>24,e&255,e>>>8&255,e>>>16&255,e>>>24]};ye.toBytesBE=function(){var e=this.high,n=this.low;return[e>>>24,e>>>16&255,e>>>8&255,e&255,n>>>24,n>>>16&255,n>>>8&255,n&255]};Nt.fromBytes=function(e,n,r){return r?Nt.fromBytesLE(e,n):Nt.fromBytesBE(e,n)};Nt.fromBytesLE=function(e,n){return new Nt(e[0]|e[1]<<8|e[2]<<16|e[3]<<24,e[4]|e[5]<<8|e[6]<<16|e[7]<<24,n)};Nt.fromBytesBE=function(e,n){return new Nt(e[4]<<24|e[5]<<16|e[6]<<8|e[7],e[0]<<24|e[1]<<16|e[2]<<8|e[3],n)};const iq=ft(tq),QMe=E3({__proto__:null,default:iq},[tq]);/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Xl=iq||QMe;function j1(t){return Xl.fromString(t,!0,16)}const aq=j1("c3a5c85c97cb3127"),ql=j1("b492b66fbe98f273"),ur=j1("9ae16a3b2f90404f");function hI(t){return t.xor(t.shru(47))}function lq(t,e,n){const r=t.slice(e,e+n);return Xl.fromBytes(Array.from(r),!0,!0)}function St(t,e){return lq(t,e,8)}function HL(t,e){return lq(t,e,4)}function $n(t,e){return e===0?t:t.shru(e).or(t.shl(64-e))}function nl(t,e,n=j1("9ddfea08eb382d69")){let r=t.xor(e).mul(n);r=r.xor(r.shru(47));let o=e.xor(r).mul(n);return o=o.xor(o.shru(47)),o=o.mul(n),o}function ZMe(t,e,n,r,o,s){o=o.add(t),s=$n(s.add(o).add(r),21);const i=o;return o=o.add(e),o=o.add(n),s=s.add($n(o,44)),[o.add(r),s.add(i)]}function xv(t,e,n,r){return ZMe(St(t,e),St(t,e+8),St(t,e+16),St(t,e+24),n,r)}function JMe(t,e=t.length){if(e>=8){const n=ur.add(e*2),r=St(t,0).add(ur),o=St(t,e-8),s=$n(o,37).mul(n).add(r),i=$n(r,25).add(o).mul(n);return nl(s,i,n)}if(e>=4){const n=ur.add(e*2),r=HL(t,0);return nl(r.shl(3).add(e),HL(t,e-4),n)}if(e>0){const n=t[0],r=t[e>>1],o=t[e-1],s=n+(r<<8),i=e+(o<<2);return hI(ur.mul(s).xor(aq.mul(i))).mul(ur)}return ur}function eFe(t,e=t.length){const n=ur.add(e*2),r=St(t,0).mul(ql),o=St(t,8),s=St(t,e-8).mul(n),i=St(t,e-16).mul(ur);return nl($n(r.add(o),43).add($n(s,30)).add(i),r.add($n(o.add(ur),18)).add(s),n)}function tFe(t,e=t.length){const n=ur.add(e*2),r=St(t,0).mul(ur),o=St(t,8),s=St(t,e-8).mul(n),i=St(t,e-16).mul(ur),a=$n(r.add(o),43).add($n(s,30)).add(i),l=nl(a,r.add($n(o.add(ur),18)).add(s),n),c=St(t,16).mul(n),u=St(t,24),d=a.add(St(t,e-32)).mul(n),f=l.add(St(t,e-24)).mul(n);return nl($n(c.add(u),43).add($n(d,30)).add(f),c.add($n(u.add(r),18)).add(d),n)}function nFe(t,e=t.length){const n=Xl.fromNumber(81,!0);if(e<=32)return e<=16?JMe(t,e):eFe(t,e);if(e<=64)return tFe(t,e);let r=n,o=n.mul(ql).add(113),s=hI(o.mul(ur).add(113)).mul(ur),i=[Xl.UZERO,Xl.UZERO],a=[Xl.UZERO,Xl.UZERO];r=r.mul(ur).add(St(t,0));let l=0;const c=(e-1>>6)*64,u=c+(e-1&63)-63;do r=$n(r.add(o).add(i[0]).add(St(t,l+8)),37).mul(ql),o=$n(o.add(i[1]).add(St(t,l+48)),42).mul(ql),r=r.xor(a[1]),o=o.add(i[0]).add(St(t,l+40)),s=$n(s.add(a[0]),33).mul(ql),i=xv(t,l,i[1].mul(ql),r.add(a[0])),a=xv(t,l+32,s.add(a[1]),o.add(St(t,l+16))),[s,r]=[r,s],l+=64;while(l!==c);const d=ql.add(s.and(255).shl(1));return l=u,a[0]=a[0].add(e-1&63),i[0]=i[0].add(a[0]),a[0]=a[0].add(i[0]),r=$n(r.add(o).add(i[0]).add(St(t,l+8)),37).mul(d),o=$n(o.add(i[1]).add(St(t,l+48)),42).mul(d),r=r.xor(a[1].mul(9)),o=o.add(i[0].mul(9).add(St(t,l+40))),s=$n(s.add(a[0]),33).mul(d),i=xv(t,l,i[1].mul(d),r.add(a[0])),a=xv(t,l+32,s.add(a[1]),o.add(St(t,l+16))),[s,r]=[r,s],nl(nl(i[0],a[0],d).add(hI(o).mul(aq)).add(s),nl(i[1],a[1],d).add(r),d)}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Nl(t,e){return e==="string"?rl(t):cu([t],e)}function rFe(t,e){return t instanceof Float32Array&&e==="float32"||t instanceof Int32Array&&e==="int32"||t instanceof Uint8Array&&e==="bool"}function cu(t,e){if(e==="string")throw new Error("Cannot convert a string[] to a TypedArray");if(Array.isArray(t)&&(t=Bc(t)),ee().getBool("DEBUG")&&RMe(t,e),rFe(t,e))return t;if(e==null||e==="float32"||e==="complex64")return new Float32Array(t);if(e==="int32")return new Int32Array(t);if(e==="bool"){const n=new Uint8Array(t.length);for(let r=0;r<n.length;++r)Math.round(t[r])!==0&&(n[r]=1);return n}else throw new Error(`Unknown data type ${e}`)}function Sr(){return ee().platform.now()}function rl(t,e="utf-8"){return e=e||"utf-8",ee().platform.encode(t,e)}function fl(t,e="utf-8"){return e=e||"utf-8",ee().platform.decode(t,e)}function qo(t){return ee().platform.isTypedArray!=null?ee().platform.isTypedArray(t):eq(t)}function Bc(t,e=[],n=!1){if(e==null&&(e=[]),typeof t=="boolean"||typeof t=="number"||typeof t=="string"||G2(t)||t==null||qo(t)&&n)e.push(t);else if(Array.isArray(t)||qo(t))for(let r=0;r<t.length;++r)Bc(t[r],e,n);else{let r=-1;for(const o of Object.keys(t))/^([1-9]+[0-9]*|0)$/.test(o)&&(r=Math.max(r,Number(o)));for(let o=0;o<=r;o++)Bc(t[o],e,n)}return e}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class oFe{constructor(e,n){this.backendTimer=e,this.logger=n,n==null&&(this.logger=new iFe)}profileKernel(e,n,r){let o;const s=()=>{o=r()};let i;const a=Sr();if(this.backendTimer.timerAvailable())i=this.backendTimer.time(s);else{s();for(const c of o)c.dataSync();i=Promise.resolve({kernelMs:Sr()-a})}if(ee().getBool("CHECK_COMPUTATION_FOR_ERRORS"))for(let c=0;c<o.length;c++){const u=o[c];u.data().then(d=>{sFe(d,u.dtype,e)})}return{kernelName:e,outputs:o,inputs:n,timeMs:i.then(c=>c.kernelMs),extraInfo:i.then(c=>c.getExtraProfileInfo!=null?c.getExtraProfileInfo():"")}}logKernelProfile(e){const{kernelName:n,outputs:r,timeMs:o,inputs:s,extraInfo:i}=e;r.forEach(a=>{Promise.all([a.data(),o,i]).then(l=>{this.logger.logKernelProfile(n,a,l[0],l[1],s,l[2])})})}}function sFe(t,e,n){if(e!=="float32")return!1;for(let r=0;r<t.length;r++){const o=t[r];if(isNaN(o)||!isFinite(o))return console.warn(`Found ${o} in the result of '${n}'`),!0}return!1}class iFe{logKernelProfile(e,n,r,o,s,i){const a=typeof o=="number"?fd(`${o}ms`,9):o.error,l=fd(e,25),c=n.rank,u=n.size,d=fd(n.shape.toString(),14);let f="";for(const h in s){const p=s[h];if(p!=null){const m=p.shape||n.shape,g=m.length;f+=`${h}: ${g}D ${g>0?m:""} `}}console.log(`%c${l}	%c${a}	%c${c}D ${d}	%c${u}	%c${f}	%c${i}`,"font-weight:bold","color:red","color:blue","color: orange","color: green","color: steelblue")}}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function aFe(t,e,n){const r={},o={};for(let l=0;l<e.length;l++)r[e[l].id]=!0;for(let l=0;l<t.length;l++){const c=t[l],u=c.inputs;for(const d in u){const f=u[d];let h=!1;for(let p=0;p<e.length;p++)if(r[f.id]){c.outputs.forEach(m=>r[m.id]=!0),h=!0,o[c.id]=!0;break}if(h)break}}const s={};s[n.id]=!0;const i={};for(let l=t.length-1;l>=0;l--){const c=t[l],u=c.inputs;for(let d=0;d<c.outputs.length;d++)if(s[c.outputs[d].id]){for(const f in u)s[u[f].id]=!0,i[c.id]=!0;break}}const a=[];for(let l=0;l<t.length;l++){const c=t[l];if(o[c.id]&&i[c.id]){const u={};for(const f in c.inputs){const h=c.inputs[f];r[h.id]&&(u[f]=h)}const d=Object.assign({},c);d.inputs=u,d.outputs=c.outputs,a.push(d)}}return a}function lFe(t,e,n,r){for(let o=e.length-1;o>=0;o--){const s=e[o],i=[];if(s.outputs.forEach(l=>{const c=t[l.id];c!=null?i.push(c):i.push(null)}),s.gradient==null)throw new Error(`Cannot compute gradient: gradient function not found for ${s.kernelName}.`);const a=s.gradient(i);for(const l in s.inputs){if(!(l in a))throw new Error(`Cannot backprop through input ${l}. Available gradients found: ${Object.keys(a)}.`);const c=n(()=>a[l]());if(c.dtype!=="float32")throw new Error(`Error in gradient for op ${s.kernelName}. The gradient of input ${l} must have 'float32' dtype, but has '${c.dtype}'`);const u=s.inputs[l];if(!dt(c.shape,u.shape))throw new Error(`Error in gradient for op ${s.kernelName}. The gradient of input '${l}' has shape '${c.shape}', which does not match the shape of the input '${u.shape}'`);if(t[u.id]==null)t[u.id]=c;else{const d=t[u.id];t[u.id]=r(d,c),d.dispose()}}}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const KL=20,Rh=3,LC=7;function cFe(t,e,n,r){const o=Ie(e),s=uFe(t,e,n,o),i=e.length,a=Yv(t,e,n,o,s),l=["Tensor"];return r&&(l.push(`  dtype: ${n}`),l.push(`  rank: ${i}`),l.push(`  shape: [${e}]`),l.push("  values:")),l.push(a.map(c=>"    "+c).join(`
`)),l.join(`
`)}function uFe(t,e,n,r){const o=ne(e),s=r[r.length-1],i=new Array(s).fill(0),a=e.length,l=n==="complex64"?Kh(t):t;if(a>1)for(let c=0;c<o/s;c++){const u=c*s;for(let d=0;d<s;d++)i[d]=Math.max(i[d],Hh(l[u+d],0,n).length)}return i}function Hh(t,e,n){let r;return Array.isArray(t)?r=`${parseFloat(t[0].toFixed(LC))} + ${parseFloat(t[1].toFixed(LC))}j`:hg(t)?r=`'${t}'`:n==="bool"?r=cq(t):r=parseFloat(t.toFixed(LC)).toString(),fd(r,e)}function cq(t){return t===0?"false":"true"}function Yv(t,e,n,r,o,s=!0){const i=n==="complex64"?2:1,a=e[0],l=e.length;if(l===0){if(n==="complex64"){const m=Kh(t);return[Hh(m[0],0,n)]}return n==="bool"?[cq(t[0])]:[t[0].toString()]}if(l===1){if(a>KL){const g=Rh*i;let y=Array.from(t.slice(0,g)),v=Array.from(t.slice((a-Rh)*i,a*i));return n==="complex64"&&(y=Kh(y),v=Kh(v)),["["+y.map((x,b)=>Hh(x,o[b],n)).join(", ")+", ..., "+v.map((x,b)=>Hh(x,o[a-Rh+b],n)).join(", ")+"]"]}return["["+(n==="complex64"?Kh(t):Array.from(t)).map((g,y)=>Hh(g,o[y],n)).join(", ")+"]"]}const c=e.slice(1),u=r.slice(1),d=r[0]*i,f=[];if(a>KL){for(let m=0;m<Rh;m++){const g=m*d,y=g+d;f.push(...Yv(t.slice(g,y),c,n,u,o,!1))}f.push("...");for(let m=a-Rh;m<a;m++){const g=m*d,y=g+d;f.push(...Yv(t.slice(g,y),c,n,u,o,m===a-1))}}else for(let m=0;m<a;m++){const g=m*d,y=g+d;f.push(...Yv(t.slice(g,y),c,n,u,o,m===a-1))}const h=l===2?",":"";f[0]="["+(a>0?f[0]+h:"");for(let m=1;m<f.length-1;m++)f[m]=" "+f[m]+h;let p=`,
`;for(let m=2;m<l;m++)p+=`
`;return f[f.length-1]=" "+f[f.length-1]+"]"+(s?"":p),f}function Kh(t){const e=[];for(let n=0;n<t.length;n+=2)e.push([t[n],t[n+1]]);return e}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Mn{constructor(e,n,r){if(this.dtype=n,this.shape=e.slice(),this.size=ne(e),r!=null){const o=r.length;M(o===this.size,()=>`Length of values '${o}' does not match the size inferred by the shape '${this.size}'.`)}if(n==="complex64")throw new Error("complex64 dtype TensorBuffers are not supported. Please create a TensorBuffer for the real and imaginary parts separately and call tf.complex(real, imag).");this.values=r||Qt(n,this.size),this.strides=Ie(e)}set(e,...n){n.length===0&&(n=[0]),M(n.length===this.rank,()=>`The number of provided coordinates (${n.length}) must match the rank (${this.rank})`);const r=this.locToIndex(n);this.values[r]=e}get(...e){e.length===0&&(e=[0]);let n=0;for(const o of e){if(o<0||o>=this.shape[n]){const s=`Requested out of range element at ${e}.   Buffer shape=${this.shape}`;throw new Error(s)}n++}let r=e[e.length-1];for(let o=0;o<e.length-1;++o)r+=this.strides[o]*e[o];return this.values[r]}locToIndex(e){if(this.rank===0)return 0;if(this.rank===1)return e[0];let n=e[e.length-1];for(let r=0;r<e.length-1;++r)n+=this.strides[r]*e[r];return n}indexToLoc(e){if(this.rank===0)return[];if(this.rank===1)return[e];const n=new Array(this.shape.length);for(let r=0;r<n.length-1;++r)n[r]=Math.floor(e/this.strides[r]),e-=n[r]*this.strides[r];return n[n.length-1]=e,n}get rank(){return this.shape.length}toTensor(){return ms().makeTensor(this.values,this.shape,this.dtype)}}let ms=null,Ru=null;function dFe(t){ms=t}function fFe(t){Ru=t}class fn{constructor(e,n,r,o){this.kept=!1,this.isDisposedInternal=!1,this.shape=e.slice(),this.dtype=n||"float32",this.size=ne(e),this.strides=Ie(e),this.dataId=r,this.id=o,this.rankType=this.rank<5?this.rank.toString():"higher"}get rank(){return this.shape.length}async buffer(){const e=await this.data();return Ru.buffer(this.shape,this.dtype,e)}bufferSync(){return Ru.buffer(this.shape,this.dtype,this.dataSync())}async array(){const e=await this.data();return Ts(this.shape,e,this.dtype==="complex64")}arraySync(){return Ts(this.shape,this.dataSync(),this.dtype==="complex64")}async data(){this.throwIfDisposed();const e=ms().read(this.dataId);if(this.dtype==="string"){const n=await e;try{return n.map(r=>fl(r))}catch{throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}}return e}dataToGPU(e){return this.throwIfDisposed(),ms().readToGPU(this.dataId,e)}dataSync(){this.throwIfDisposed();const e=ms().readSync(this.dataId);if(this.dtype==="string")try{return e.map(n=>fl(n))}catch{throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}return e}async bytes(){this.throwIfDisposed();const e=await ms().read(this.dataId);return this.dtype==="string"?e:new Uint8Array(e.buffer)}dispose(){this.isDisposed||(this.kerasMask&&this.kerasMask.dispose(),ms().disposeTensor(this),this.isDisposedInternal=!0)}get isDisposed(){return this.isDisposedInternal}throwIfDisposed(){if(this.isDisposed)throw new Error("Tensor is disposed.")}print(e=!1){return Ru.print(this,e)}clone(){return this.throwIfDisposed(),Ru.clone(this)}toString(e=!1){const n=this.dataSync();return cFe(n,this.shape,this.dtype,e)}cast(e){return this.throwIfDisposed(),Ru.cast(this,e)}variable(e=!0,n,r){return this.throwIfDisposed(),ms().makeVariable(this,e,n,r)}}Object.defineProperty(fn,Symbol.hasInstance,{value:t=>!!t&&t.data!=null&&t.dataSync!=null&&t.throwIfDisposed!=null});function te(){return H2("Tensor",()=>fn)}te();class zb extends fn{constructor(e,n,r,o){super(e.shape,e.dtype,e.dataId,o),this.trainable=n,this.name=r}assign(e){if(e.dtype!==this.dtype)throw new Error(`dtype of the new value (${e.dtype}) and previous value (${this.dtype}) must match`);if(!dt(e.shape,this.shape))throw new Error(`shape of the new value (${e.shape}) and previous value (${this.shape}) must match`);ms().disposeTensor(this),this.dataId=e.dataId,ms().incRef(this,null)}dispose(){ms().disposeVariable(this),this.isDisposedInternal=!0}}Object.defineProperty(zb,Symbol.hasInstance,{value:t=>t instanceof fn&&t.assign!=null&&t.assign instanceof Function});/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var qL;(function(t){t.R0="R0",t.R1="R1",t.R2="R2",t.R3="R3",t.R4="R4",t.R5="R5",t.R6="R6"})(qL||(qL={}));var pI;(function(t){t.float32="float32",t.int32="int32",t.bool="int32",t.complex64="complex64"})(pI||(pI={}));var mI;(function(t){t.float32="float32",t.int32="int32",t.bool="bool",t.complex64="complex64"})(mI||(mI={}));var gI;(function(t){t.float32="float32",t.int32="float32",t.bool="float32",t.complex64="complex64"})(gI||(gI={}));var yI;(function(t){t.float32="complex64",t.int32="complex64",t.bool="complex64",t.complex64="complex64"})(yI||(yI={}));const hFe={float32:gI,int32:pI,bool:mI,complex64:yI};function Yr(t,e){if(t==="string"||e==="string"){if(t==="string"&&e==="string")return"string";throw new Error(`Can not upcast ${t} with ${e}`)}return hFe[t][e]}function DA(t){return Yr(t,"int32")}function uq(t){return t!=null&&typeof t=="object"&&"texture"in t&&t.texture instanceof WebGLTexture}function dq(t){return typeof GPUBuffer<"u"&&t!=null&&typeof t=="object"&&"buffer"in t&&t.buffer instanceof GPUBuffer}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function en(t,e){if(t.dtype===e.dtype)return[t,e];const n=Yr(t.dtype,e.dtype);return[t.cast(n),e.cast(n)]}function fq(t){const e=[];return hq(t,e,new Set),e}function hq(t,e,n){if(t==null)return;if(t instanceof fn){e.push(t);return}if(!pFe(t))return;const r=t;for(const o in r){const s=r[o];n.has(s)||(n.add(s),hq(s,e,n))}}function pFe(t){return Array.isArray(t)||typeof t=="object"}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function jC(t){return t.kernelName!=null}class XL{constructor(){this.registeredVariables={},this.nextTapeNodeId=0,this.numBytes=0,this.numTensors=0,this.numStringTensors=0,this.numDataBuffers=0,this.gradientDepth=0,this.kernelDepth=0,this.scopeStack=[],this.numDataMovesStack=[],this.nextScopeId=0,this.tensorInfo=new WeakMap,this.profiling=!1,this.activeProfile={newBytes:0,newTensors:0,peakBytes:0,kernels:[],result:null,get kernelNames(){return Array.from(new Set(this.kernels.map(e=>e.name)))}}}dispose(){for(const e in this.registeredVariables)this.registeredVariables[e].dispose()}}class ff{constructor(e){this.ENV=e,this.registry={},this.registryFactory={},this.pendingBackendInitId=0,this.state=new XL}async ready(){if(this.pendingBackendInit!=null)return this.pendingBackendInit.then(()=>{});if(this.backendInstance!=null)return;const e=this.getSortedBackends();for(let n=0;n<e.length;n++){const r=e[n];if(await this.initializeBackend(r).success){await this.setBackend(r);return}}throw new Error("Could not initialize any backends, all backend initializations failed.")}get backend(){if(this.pendingBackendInit!=null)throw new Error(`Backend '${this.backendName}' has not yet been initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods`);if(this.backendInstance==null){const{name:e,asyncInit:n}=this.initializeBackendsAndReturnBest();if(n)throw new Error(`The highest priority backend '${e}' has not yet been initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods`);this.setBackend(e)}return this.backendInstance}backendNames(){return Object.keys(this.registryFactory)}findBackend(e){if(!(e in this.registry))if(e in this.registryFactory){const{asyncInit:n}=this.initializeBackend(e);if(n)return null}else return null;return this.registry[e]}findBackendFactory(e){return e in this.registryFactory?this.registryFactory[e].factory:null}registerBackend(e,n,r=1){return e in this.registryFactory?(lo(`${e} backend was already registered. Reusing existing backend factory.`),!1):(this.registryFactory[e]={factory:n,priority:r},!0)}async setBackend(e){if(this.registryFactory[e]==null)throw new Error(`Backend name '${e}' not found in registry`);if(this.backendName=e,this.registry[e]==null){this.backendInstance=null;const{success:n,asyncInit:r}=this.initializeBackend(e);if(!(r?await n:n))return!1}return this.backendInstance=this.registry[e],this.setupRegisteredKernels(),this.profiler=new oFe(this.backendInstance),!0}setupRegisteredKernels(){BL(this.backendName).forEach(n=>{n.setupFunc!=null&&n.setupFunc(this.backendInstance)})}disposeRegisteredKernels(e){BL(e).forEach(r=>{r.disposeFunc!=null&&r.disposeFunc(this.registry[e])})}initializeBackend(e){const n=this.registryFactory[e];if(n==null)throw new Error(`Cannot initialize backend ${e}, no registration found.`);try{const r=n.factory();if(r&&!(r instanceof z2)&&typeof r.then=="function"){const o=++this.pendingBackendInitId,s=r.then(i=>o<this.pendingBackendInitId?!1:(this.registry[e]=i,this.pendingBackendInit=null,!0)).catch(i=>(o<this.pendingBackendInitId||(this.pendingBackendInit=null,lo(`Initialization of backend ${e} failed`),lo(i.stack||i.message)),!1));return this.pendingBackendInit=s,{success:s,asyncInit:!0}}else return this.registry[e]=r,{success:!0,asyncInit:!1}}catch(r){return lo(`Initialization of backend ${e} failed`),lo(r.stack||r.message),{success:!1,asyncInit:!1}}}removeBackend(e){if(!(e in this.registryFactory))throw new Error(`${e} backend not found in registry`);this.backendName===e&&this.pendingBackendInit!=null&&this.pendingBackendInitId++,e in this.registry&&(this.disposeRegisteredKernels(e),this.registry[e].dispose(),delete this.registry[e]),delete this.registryFactory[e],this.backendName===e&&(this.pendingBackendInit=null,this.backendName=null,this.backendInstance=null)}getSortedBackends(){if(Object.keys(this.registryFactory).length===0)throw new Error("No backend found in registry.");return Object.keys(this.registryFactory).sort((e,n)=>this.registryFactory[n].priority-this.registryFactory[e].priority)}initializeBackendsAndReturnBest(){const e=this.getSortedBackends();for(let n=0;n<e.length;n++){const r=e[n],{success:o,asyncInit:s}=this.initializeBackend(r);if(s||o)return{name:r,asyncInit:s}}throw new Error("Could not initialize any backends, all backend initializations failed.")}moveData(e,n){const r=this.state.tensorInfo.get(n),o=r.backend,s=this.readSync(n),i=o.refCount(n);o.disposeData(n,!0),r.backend=e,e.move(n,s,r.shape,r.dtype,i),this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack[this.state.numDataMovesStack.length-1]++}tidy(e,n){let r=null;if(n==null){if(typeof e!="function")throw new Error("Please provide a function to tidy()");n=e}else{if(typeof e!="string"&&!(e instanceof String))throw new Error("When calling with two arguments, the first argument to tidy() must be a string");if(typeof n!="function")throw new Error("When calling with two arguments, the 2nd argument to tidy() must be a function");r=e}let o;return this.scopedRun(()=>this.startScope(r),()=>this.endScope(o),()=>(o=n(),o instanceof Promise&&console.error("Cannot return a Promise inside of tidy."),o))}scopedRun(e,n,r){e();try{const o=r();return n(),o}catch(o){throw n(),o}}nextTensorId(){return ff.nextTensorId++}nextVariableId(){return ff.nextVariableId++}clone(e){const n=H.runKernel(_g,{x:e}),r={x:e},o=i=>({x:()=>{const a="float32",l={x:i},c={dtype:a};return H.runKernel(wg,l,c)}}),s=[];return this.addTapeNode(this.state.activeScope.name,r,[n],o,s,{}),n}runKernel(e,n,r){if(this.backendName==null&&this.backend,!(LL(e,this.backendName)!=null))throw new Error(`Kernel '${e}' not registered for backend '${this.backendName}'`);return this.runKernelFunc({kernelName:e,inputs:n,attrs:r})}shouldCheckForMemLeaks(){return this.ENV.getBool("IS_TEST")}checkKernelForMemLeak(e,n,r){const o=this.backend.numDataIds();let s=0;r.forEach(l=>{s+=l.dtype==="complex64"?3:1});const i=this.state.numDataMovesStack[this.state.numDataMovesStack.length-1],a=o-n-s-i;if(a>0)throw new Error(`Backend '${this.backendName}' has an internal memory leak (${a} data ids) after running '${e}'`)}runKernelFunc(e){let n,r=[];const o=this.isTapeOn(),s=this.state.numBytes,i=this.state.numTensors;this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack.push(0);let a;this.backendName==null&&this.backend;let l;const c=jC(e)?e.kernelName:this.state.activeScope!=null?this.state.activeScope.name:"";if(jC(e)){const{kernelName:p,inputs:m,attrs:g}=e;this.backendName==null&&this.backend;const y=LL(p,this.backendName);M(y!=null,()=>`Cannot find registered kernel '${p}' for backend '${this.backendName}'`),a=()=>{const v=this.backend.numDataIds();l=y.kernelFunc({inputs:m,attrs:g,backend:this.backend});const x=Array.isArray(l)?l:[l];this.shouldCheckForMemLeaks()&&this.checkKernelForMemLeak(p,v,x);const b=x.map(w=>w.rank!=null?w:this.makeTensorFromTensorInfo(w));if(o){const w=this.getTensorsForGradient(p,m,b);r=this.saveTensorsForBackwardMode(w)}return b}}else{const{forwardFunc:p}=e,m=g=>{o&&(r=g.map(y=>this.keep(this.clone(y))))};a=()=>{const g=this.backend.numDataIds();l=this.tidy(()=>p(this.backend,m));const y=Array.isArray(l)?l:[l];return this.shouldCheckForMemLeaks()&&this.checkKernelForMemLeak(c,g,y),y}}const{inputs:u,attrs:d}=e,f=jC(e)?null:e.backwardsFunc;let h;return this.scopedRun(()=>this.state.kernelDepth++,()=>this.state.kernelDepth--,()=>{!this.ENV.getBool("DEBUG")&&!this.state.profiling?n=a():(h=this.profiler.profileKernel(c,u,()=>a()),this.ENV.getBool("DEBUG")&&this.profiler.logKernelProfile(h),n=h.outputs)}),o&&this.addTapeNode(c,u,n,f,r,d),this.state.profiling&&this.state.activeProfile.kernels.push({name:c,bytesAdded:this.state.numBytes-s,totalBytesSnapshot:this.state.numBytes,tensorsAdded:this.state.numTensors-i,totalTensorsSnapshot:this.state.numTensors,inputShapes:Object.keys(u).map(p=>u[p]!=null?u[p].shape:null),outputShapes:n.map(p=>p.shape),kernelTimeMs:h.timeMs,extraInfo:h.extraInfo}),Array.isArray(l)?n:n[0]}saveTensorsForBackwardMode(e){return e.map(r=>this.keep(this.clone(r)))}getTensorsForGradient(e,n,r){const o=jL(e);if(o!=null){const s=o.inputsToSave||[],i=o.outputsToSave||[];let a;o.saveAllInputs?(M(Array.isArray(n),()=>"saveAllInputs is true, expected inputs to be an array."),a=Object.keys(n).map(c=>n[c])):a=s.map(c=>n[c]);const l=r.filter((c,u)=>i[u]);return a.concat(l)}return[]}makeTensor(e,n,r,o){if(e==null)throw new Error("Values passed to engine.makeTensor() are null");r=r||"float32",o=o||this.backend;let s=e;r==="string"&&hg(e[0])&&(s=e.map(l=>rl(l)));const i=o.write(s,n,r),a=new fn(n,r,i,this.nextTensorId());if(this.trackTensor(a,o),r==="string"){const l=this.state.tensorInfo.get(i),c=DMe(s);this.state.numBytes+=c-l.bytes,l.bytes=c}return a}makeTensorFromDataId(e,n,r,o){r=r||"float32";const s={dataId:e,shape:n,dtype:r};return this.makeTensorFromTensorInfo(s,o)}makeTensorFromTensorInfo(e,n){const{dataId:r,shape:o,dtype:s}=e,i=new fn(o,s,r,this.nextTensorId());return this.trackTensor(i,n),i}makeVariable(e,n=!0,r,o){r=r||this.nextVariableId().toString(),o!=null&&o!==e.dtype&&(e=e.cast(o));const s=new zb(e,n,r,this.nextTensorId());if(this.state.registeredVariables[s.name]!=null)throw new Error(`Variable with name ${s.name} was already registered`);return this.state.registeredVariables[s.name]=s,this.incRef(s,this.backend),s}trackTensor(e,n){this.state.numTensors++,e.dtype==="string"&&this.state.numStringTensors++;let r=0;e.dtype!=="complex64"&&e.dtype!=="string"&&(r=e.size*Mb(e.dtype)),this.state.numBytes+=r,this.state.tensorInfo.has(e.dataId)||(this.state.numDataBuffers++,this.state.tensorInfo.set(e.dataId,{backend:n||this.backend,dtype:e.dtype,shape:e.shape,bytes:r})),e instanceof zb||this.track(e)}incRef(e,n){this.trackTensor(e,n),this.backend.incRef(e.dataId)}removeDataId(e,n){this.state.tensorInfo.has(e)&&this.state.tensorInfo.get(e).backend===n&&(this.state.tensorInfo.delete(e),this.state.numDataBuffers--)}disposeTensor(e){if(!this.state.tensorInfo.has(e.dataId))return;const n=this.state.tensorInfo.get(e.dataId);if(this.state.numTensors--,e.dtype==="string"&&(this.state.numStringTensors--,this.state.numBytes-=n.bytes),e.dtype!=="complex64"&&e.dtype!=="string"){const r=e.size*Mb(e.dtype);this.state.numBytes-=r}n.backend.disposeData(e.dataId)&&this.removeDataId(e.dataId,n.backend)}disposeVariables(){for(const e in this.state.registeredVariables){const n=this.state.registeredVariables[e];this.disposeVariable(n)}}disposeVariable(e){this.disposeTensor(e),this.state.registeredVariables[e.name]!=null&&delete this.state.registeredVariables[e.name]}memory(){const e=this.backend.memory();return e.numTensors=this.state.numTensors,e.numDataBuffers=this.state.numDataBuffers,e.numBytes=this.state.numBytes,this.state.numStringTensors>0&&(e.unreliable=!0,e.reasons==null&&(e.reasons=[]),e.reasons.push("Memory usage by string tensors is approximate (2 bytes per character)")),e}async profile(e){this.state.profiling=!0;const n=this.state.numBytes,r=this.state.numTensors;this.state.activeProfile.kernels=[],this.state.activeProfile.result=await e(),this.state.profiling=!1,this.state.activeProfile.peakBytes=Math.max(...this.state.activeProfile.kernels.map(o=>o.totalBytesSnapshot)),this.state.activeProfile.newBytes=this.state.numBytes-n,this.state.activeProfile.newTensors=this.state.numTensors-r;for(const o of this.state.activeProfile.kernels)o.kernelTimeMs=await o.kernelTimeMs,o.extraInfo=await o.extraInfo;return this.state.activeProfile}isTapeOn(){return this.state.gradientDepth>0&&this.state.kernelDepth===0}addTapeNode(e,n,r,o,s,i){const a={id:this.state.nextTapeNodeId++,kernelName:e,inputs:n,outputs:r,saved:s},l=jL(e);l!=null&&(o=l.gradFunc),o!=null&&(a.gradient=c=>(c=c.map((u,d)=>{if(u==null){const f=r[d],h=Xn(f.size,f.dtype);return this.makeTensor(h,f.shape,f.dtype)}return u}),o(c.length>1?c:c[0],s,i))),this.state.activeTape.push(a)}keep(e){return e.kept=!0,e}startTape(){this.state.gradientDepth===0&&(this.state.activeTape=[]),this.state.gradientDepth++}endTape(){this.state.gradientDepth--}startScope(e){const n={track:[],name:"unnamed scope",id:this.state.nextScopeId++};e&&(n.name=e),this.state.scopeStack.push(n),this.state.activeScope=n}endScope(e){const n=fq(e),r=new Set(n.map(s=>s.id));for(let s=0;s<this.state.activeScope.track.length;s++){const i=this.state.activeScope.track[s];!i.kept&&!r.has(i.id)&&i.dispose()}const o=this.state.scopeStack.pop();this.state.activeScope=this.state.scopeStack.length===0?null:this.state.scopeStack[this.state.scopeStack.length-1],n.forEach(s=>{!s.kept&&s.scopeId===o.id&&this.track(s)})}gradients(e,n,r,o=!1){if(M(n.length>0,()=>"gradients() received an empty list of xs."),r!=null&&r.dtype!=="float32")throw new Error(`dy must have 'float32' dtype, but has '${r.dtype}'`);const s=this.scopedRun(()=>this.startTape(),()=>this.endTape(),()=>this.tidy("forward",e));M(s instanceof fn,()=>"The result y returned by f() must be a tensor.");const i=aFe(this.state.activeTape,n,s);if(!o&&i.length===0&&n.length>0)throw new Error("Cannot compute gradient of y=f(x) with respect to x. Make sure that the f you passed encloses all operations that lead from x to y.");return this.tidy("backward",()=>{const a={};a[s.id]=r??mFe(s.shape),lFe(a,i,c=>this.tidy(c),gFe);const l=n.map(c=>a[c.id]);return this.state.gradientDepth===0&&(this.state.activeTape.forEach(c=>{for(const u of c.saved)u.dispose()}),this.state.activeTape=null),{value:s,grads:l}})}customGrad(e){return M(aI(e),()=>"The f passed in customGrad(f) must be a function."),(...n)=>{M(n.every(a=>a instanceof fn),()=>"The args passed in customGrad(f)(x1, x2,...) must all be tensors");let r;const o={};n.forEach((a,l)=>{o[l]=a});const s=(a,l)=>(r=e(...n,l),M(r.value instanceof fn,()=>"The function f passed in customGrad(f) must return an object where `obj.value` is a tensor"),M(aI(r.gradFunc),()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function."),r.value),i=(a,l)=>{const c=r.gradFunc(a,l),u=Array.isArray(c)?c:[c];M(u.length===n.length,()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns the same number of tensors as inputs passed to f(...)."),M(u.every(f=>f instanceof fn),()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns a list of only tensors.");const d={};return u.forEach((f,h)=>{d[h]=()=>f}),d};return this.runKernelFunc({forwardFunc:s,backwardsFunc:i,inputs:o})}}readSync(e){return this.state.tensorInfo.get(e).backend.readSync(e)}read(e){return this.state.tensorInfo.get(e).backend.read(e)}readToGPU(e,n){return this.state.tensorInfo.get(e).backend.readToGPU(e,n)}async time(e){const n=Sr(),r=await this.backend.time(e);return r.wallMs=Sr()-n,r}track(e){return this.state.activeScope!=null&&(e.scopeId=this.state.activeScope.id,this.state.activeScope.track.push(e)),e}get registeredVariables(){return this.state.registeredVariables}reset(){this.pendingBackendInitId++,this.state.dispose(),this.ENV.reset(),this.state=new XL;for(const e in this.registry)this.disposeRegisteredKernels(e),this.registry[e].dispose(),delete this.registry[e];this.backendName=null,this.backendInstance=null,this.pendingBackendInit=null}}ff.nextTensorId=0;ff.nextVariableId=0;function mFe(t){const e=U2(ne(t),"float32");return H.makeTensor(e,t,"float32")}function pq(){const t=AK();if(t._tfengine==null){const e=new LMe(t);t._tfengine=new ff(e)}return WMe(t._tfengine.ENV),dFe(()=>t._tfengine),t._tfengine}const H=pq();function gFe(t,e){const n={a:t,b:e};return H.runKernel(Kf,n)}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function yFe(){return typeof navigator<"u"&&navigator!=null}function mq(t){if(t||yFe()){if(t||(t=navigator),t.product==="ReactNative")return!0;const e=t.userAgent||t.vendor||(typeof window<"u"?window.opera:"");if(!e){const n=t;return n.userAgentData&&n.userAgentData.mobile}return/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(e.substr(0,4))}return!1}function gq(){return typeof window<"u"&&window.document!=null||typeof WorkerGlobalScope<"u"}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Ar=ee();Ar.registerFlag("DEBUG",()=>!1,t=>{t&&console.warn("Debugging mode is ON. The output of every math call will be downloaded to CPU and checked for NaNs. This significantly impacts performance.")});Ar.registerFlag("IS_BROWSER",()=>gq());Ar.registerFlag("IS_NODE",()=>typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u");Ar.registerFlag("IS_CHROME",()=>typeof navigator<"u"&&navigator!=null&&navigator.userAgent!=null&&/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor));Ar.registerFlag("IS_SAFARI",()=>typeof navigator<"u"&&navigator!=null&&navigator.userAgent!=null&&/Safari/.test(navigator.userAgent)&&/Apple/.test(navigator.vendor));Ar.registerFlag("PROD",()=>!1);Ar.registerFlag("TENSORLIKE_CHECK_SHAPE_CONSISTENCY",()=>Ar.getBool("DEBUG"));Ar.registerFlag("DEPRECATION_WARNINGS_ENABLED",()=>!0);Ar.registerFlag("IS_TEST",()=>!1);Ar.registerFlag("CHECK_COMPUTATION_FOR_ERRORS",()=>Ar.getBool("DEBUG"));Ar.registerFlag("WRAP_TO_IMAGEBITMAP",()=>!1);Ar.registerFlag("CANVAS2D_WILL_READ_FREQUENTLY_FOR_GPU",()=>!1);Ar.registerFlag("USE_SETTIMEOUTCUSTOM",()=>!1);/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function B1(t,e){let n=t;if(qo(t))return e==="string"?[]:[t.length];if(uq(t)){const o=t.channels||"RGBA";return[t.height,t.width*o.length]}else if(dq(t))return[t.buffer.size/(e==null?4:Mb(e))];if(!Array.isArray(t))return[];const r=[];for(;Array.isArray(n)||qo(n)&&e!=="string";)r.push(n.length),n=n[0];return Array.isArray(t)&&ee().getBool("TENSORLIKE_CHECK_SHAPE_CONSISTENCY")&&yq(t,r,[]),r}function yq(t,e,n){if(n=n||[],!Array.isArray(t)&&!qo(t)){M(e.length===0,()=>`Element arr[${n.join("][")}] is a primitive, but should be an array/TypedArray of ${e[0]} elements`);return}M(e.length>0,()=>`Element arr[${n.join("][")}] should be a primitive, but is an array of ${t.length} elements`),M(t.length===e[0],()=>`Element arr[${n.join("][")}] should have ${e[0]} elements, but has ${t.length} elements`);const r=e.slice(1);for(let o=0;o<t.length;++o)yq(t[o],r,n.concat(o))}function YL(t,e,n,r){if(t!=="string_or_numeric"){if(t==null)throw new Error("Expected dtype cannot be null.");if(t!=="numeric"&&t!==e||t==="numeric"&&e==="string")throw new Error(`Argument '${n}' passed to '${r}' must be ${t} tensor, but got ${e} tensor`)}}function j(t,e,n,r="numeric"){if(t instanceof te())return YL(r,t.dtype,e,n),t;let o=Gf(t);if(o!=="string"&&["bool","int32","float32"].indexOf(r)>=0&&(o=r),YL(r,o,e,n),t==null||!qo(t)&&!Array.isArray(t)&&typeof t!="number"&&typeof t!="boolean"&&typeof t!="string"){const l=t==null?"null":t.constructor.name;throw new Error(`Argument '${e}' passed to '${n}' must be a Tensor or TensorLike, but got '${l}'`)}const s=B1(t,o);!qo(t)&&!Array.isArray(t)&&(t=[t]);const a=o!=="string"?cu(t,o):Bc(t,[],!0);return H.makeTensor(a,s,o)}function vq(t,e,n,r="numeric"){if(!Array.isArray(t))throw new Error(`Argument ${e} passed to ${n} must be a \`Tensor[]\` or \`TensorLike[]\``);return t.map((s,i)=>j(s,`${e}[${i}]`,n,r))}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const vFe="__op";function X(t){const e=Object.keys(t);if(e.length!==1)throw new Error(`Please provide an object with a single key (operation name) mapping to a function. Got an object with ${e.length} keys.`);let n=e[0];const r=t[n];n.endsWith("_")&&(n=n.substring(0,n.length-1)),n=n+vFe;const o=(...s)=>{H.startScope(n);try{const i=r(...s);return G2(i)&&console.error("Cannot return a Promise inside of tidy."),H.endScope(i),i}catch(i){throw H.endScope(null),i}};return Object.defineProperty(o,"name",{value:n,configurable:!0}),o}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xFe(t,e){const n=j(t,"real","complex"),r=j(e,"imag","complex");V2(n.shape,r.shape,`real and imag shapes, ${n.shape} and ${r.shape}, must match in call to tf.complex().`);const o={real:n,imag:r};return H.runKernel(eA,o)}const hf=X({complex_:xFe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function z1(t,e,n,r){if(r==null)r=Gf(t);else if(r==="complex64")throw new Error("Cannot construct a complex64 tensor directly. Please use tf.complex(real, imag).");if(dq(t)||uq(t)){if(r!=="float32"&&r!=="int32")throw new Error(`Creating tensor from GPU data only supports 'float32'|'int32' dtype, while the dtype is ${r}.`);return H.backend.createTensorFromGPUData(t,e||n,r)}if(!qo(t)&&!Array.isArray(t)&&typeof t!="number"&&typeof t!="boolean"&&typeof t!="string")throw new Error("values passed to tensor(values) must be a number/boolean/string or an array of numbers/booleans/strings, or a TypedArray");if(e!=null){ca(e);const o=ne(e),s=ne(n);M(o===s,()=>`Based on the provided shape, [${e}], the tensor should have ${o} values but has ${s}`);for(let i=0;i<n.length;++i){const a=n[i],l=i===n.length-1?a!==ne(e.slice(i)):!0;M(n[i]===e[i]||!l,()=>`Error creating a new Tensor. Inferred shape (${n}) does not match the provided shape (${e}). `)}}return!qo(t)&&!Array.isArray(t)&&(t=[t]),e=e||n,t=r!=="string"?cu(t,r):Bc(t,[],!0),H.makeTensor(t,e,r)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xq(t,e,n){const r=B1(t,n);return z1(t,e,r,n)}class qf{static join(e){return new qf(e).slice()}constructor(e){if(this.shards=[],this.previousShardIndex=0,e==null||(e instanceof Array||(e=[e]),e=e.map(r=>qo(r)?r.buffer:r),e.length===0))return;this.bufferUniformSize=e[0].byteLength;let n=0;for(let r=0;r<e.length;r++){const o=e[r];r!==e.length-1&&o.byteLength!==this.bufferUniformSize&&(this.bufferUniformSize=void 0);const s=n+o.byteLength;this.shards.push({buffer:o,start:n,end:s}),n=s}this.shards.length===0&&(this.byteLength=0),this.byteLength=this.shards[this.shards.length-1].end}slice(e=0,n=this.byteLength){if(this.shards.length===0)return new ArrayBuffer(0);if(e=isNaN(Number(e))?0:e,n=isNaN(Number(n))?0:n,e=Math.max(0,e),n=Math.min(this.byteLength,n),n<=e)return new ArrayBuffer(0);const r=this.findShardForByte(e);if(r===-1)throw new Error(`Could not find start shard for byte ${e}`);const o=n-e,s=new ArrayBuffer(o),i=new Uint8Array(s);let a=0;for(let l=r;l<this.shards.length;l++){const c=this.shards[l],d=e+a-c.start,f=a,p=Math.min(n,c.end)-c.start,m=new Uint8Array(c.buffer,d,p-d);if(i.set(m,f),a+=m.length,n<c.end)break}return s}findShardForByte(e){if(this.shards.length===0||e<0||e>=this.byteLength)return-1;if(this.bufferUniformSize!=null)return this.previousShardIndex=Math.floor(e/this.bufferUniformSize),this.previousShardIndex;function n(o){return e<o.start?-1:e>=o.end?1:0}if(n(this.shards[this.previousShardIndex])===0)return this.previousShardIndex;const r=bFe(this.shards,n);return r===-1?-1:(this.previousShardIndex=r,this.previousShardIndex)}}function bFe(t,e){let n=0,r=t.length;for(;n<=r;){const o=Math.floor((r-n)/2)+n,s=e(t[o]);if(s===0)return o;s<0?r=o:n=o+1}return-1}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ws(){return H}function QL(){return H.memory()}function Y(t,e){return H.tidy(t,e)}function qe(t){fq(t).forEach(n=>n.dispose())}function li(t){return H.keep(t)}function wFe(){return H.ready()}function bq(t,e,n=1){return H.registerBackend(t,e,n)}function SFe(){return H.backend}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ZL=4;async function JL(t,e){const n=[],r=[],o=Array.isArray(t)?t.map(i=>i.name):Object.keys(t);for(let i=0;i<o.length;++i){const a=o[i],l=Array.isArray(t)?t[i].tensor:t[a];if(l.dtype!=="float32"&&l.dtype!=="int32"&&l.dtype!=="bool"&&l.dtype!=="string"&&l.dtype!=="complex64")throw new Error(`Unsupported dtype in weight '${a}': ${l.dtype}`);const c={name:a,shape:l.shape,dtype:l.dtype};if(l.dtype==="string"){const u=new Promise(async d=>{const f=await l.bytes(),h=f.reduce((g,y)=>g+y.length,0)+ZL*f.length,p=new Uint8Array(h);let m=0;for(let g=0;g<f.length;g++){const y=f[g],v=new Uint8Array(new Uint32Array([y.length]).buffer);p.set(v,m),m+=ZL,p.set(y,m),m+=y.length}d(p)});r.push(u)}else r.push(l.data());e!=null&&(c.group=e),n.push(c)}const s=await Promise.all(r);return{data:CFe(s),specs:n}}function CFe(t){if(t===null)throw new Error(`Invalid input value: ${JSON.stringify(t)}`);let e=0;const n=[];t.forEach(s=>{if(e+=s.byteLength,n.push(s.byteLength===s.buffer.byteLength?s:new s.constructor(s)),!(s instanceof Float32Array||s instanceof Int32Array||s instanceof Uint8Array))throw new Error(`Unsupported TypedArray subtype: ${s.constructor.name}`)});const r=new Uint8Array(e);let o=0;return n.forEach(s=>{r.set(new Uint8Array(s.buffer),o),o+=s.byteLength}),r.buffer}const MA=typeof Buffer<"u"&&(typeof Blob>"u"||typeof atob>"u"||typeof btoa>"u");function ej(t){return MA?Buffer.byteLength(t,"utf8"):new Blob([t]).size}function $Fe(t){if(MA)return Buffer.from(t).toString("base64");const e=new Uint8Array(t);let n="";for(let r=0,o=e.length;r<o;r++)n+=String.fromCharCode(e[r]);return btoa(n)}function kFe(t){if(MA){const r=Buffer.from(t,"base64");return r.buffer.slice(r.byteOffset,r.byteOffset+r.byteLength)}const e=atob(t),n=new Uint8Array(e.length);for(let r=0;r<e.length;++r)n.set([e.charCodeAt(r)],r);return n.buffer}function TFe(t){return qf.join(t)}function wq(t){if(t.modelTopology instanceof ArrayBuffer)throw new Error("Expected JSON model topology, received ArrayBuffer.");return{dateSaved:new Date,modelTopologyType:"JSON",modelTopologyBytes:t.modelTopology==null?0:ej(JSON.stringify(t.modelTopology)),weightSpecsBytes:t.weightSpecs==null?0:ej(JSON.stringify(t.weightSpecs)),weightDataBytes:t.weightData==null?0:new qf(t.weightData).byteLength}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class sr{constructor(){this.saveRouters=[],this.loadRouters=[]}static getInstance(){return sr.instance==null&&(sr.instance=new sr),sr.instance}static registerSaveRouter(e){sr.getInstance().saveRouters.push(e)}static registerLoadRouter(e){sr.getInstance().loadRouters.push(e)}static getSaveHandlers(e){return sr.getHandlers(e,"save")}static getLoadHandlers(e,n){return sr.getHandlers(e,"load",n)}static getHandlers(e,n,r){const o=[];return(n==="load"?sr.getInstance().loadRouters:sr.getInstance().saveRouters).forEach(i=>{const a=i(e,r);a!==null&&o.push(a)}),o}}const IFe=t=>sr.getSaveHandlers(t);/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const vI="tensorflowjs",xI=1,ac="models_store",Wa="model_info_store";function Sq(){if(!ee().getBool("IS_BROWSER"))throw new Error("Failed to obtain IndexedDB factory because the current environmentis not a web browser.");const t=typeof window>"u"?self:window,e=t.indexedDB||t.mozIndexedDB||t.webkitIndexedDB||t.msIndexedDB||t.shimIndexedDB;if(e==null)throw new Error("The current browser does not appear to support IndexedDB.");return e}function bI(t){const e=t.result;e.createObjectStore(ac,{keyPath:"modelPath"}),e.createObjectStore(Wa,{keyPath:"modelPath"})}class zc{constructor(e){if(this.indexedDB=Sq(),e==null||!e)throw new Error("For IndexedDB, modelPath must not be null, undefined or empty.");this.modelPath=e}async save(e){if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");return this.databaseAction(this.modelPath,e)}async load(){return this.databaseAction(this.modelPath)}databaseAction(e,n){return new Promise((r,o)=>{const s=this.indexedDB.open(vI,xI);s.onupgradeneeded=()=>bI(s),s.onsuccess=()=>{const i=s.result;if(n==null){const a=i.transaction(ac,"readonly"),c=a.objectStore(ac).get(this.modelPath);c.onsuccess=()=>{if(c.result==null)return i.close(),o(new Error(`Cannot find model with path '${this.modelPath}' in IndexedDB.`));r(c.result.modelArtifacts)},c.onerror=u=>(i.close(),o(c.error)),a.oncomplete=()=>i.close()}else{n.weightData=qf.join(n.weightData);const a=wq(n),l=i.transaction(Wa,"readwrite");let c=l.objectStore(Wa),u;try{u=c.put({modelPath:this.modelPath,modelArtifactsInfo:a})}catch(f){return o(f)}let d;u.onsuccess=()=>{d=i.transaction(ac,"readwrite");const f=d.objectStore(ac);let h;try{h=f.put({modelPath:this.modelPath,modelArtifacts:n,modelArtifactsInfo:a})}catch(p){return o(p)}h.onsuccess=()=>r({modelArtifactsInfo:a}),h.onerror=p=>{c=l.objectStore(Wa);const m=c.delete(this.modelPath);m.onsuccess=()=>(i.close(),o(h.error)),m.onerror=g=>(i.close(),o(h.error))}},u.onerror=f=>(i.close(),o(u.error)),l.oncomplete=()=>{d==null?i.close():d.oncomplete=()=>i.close()}}},s.onerror=i=>o(s.error)})}}zc.URL_SCHEME="indexeddb://";const Cq=t=>ee().getBool("IS_BROWSER")&&!Array.isArray(t)&&t.startsWith(zc.URL_SCHEME)?EFe(t.slice(zc.URL_SCHEME.length)):null;sr.registerSaveRouter(Cq);sr.registerLoadRouter(Cq);function EFe(t){return new zc(t)}function NFe(t){return t.startsWith(zc.URL_SCHEME)?t.slice(zc.URL_SCHEME.length):t}class AFe{constructor(){this.indexedDB=Sq()}async listModels(){return new Promise((e,n)=>{const r=this.indexedDB.open(vI,xI);r.onupgradeneeded=()=>bI(r),r.onsuccess=()=>{const o=r.result,s=o.transaction(Wa,"readonly"),a=s.objectStore(Wa).getAll();a.onsuccess=()=>{const l={};for(const c of a.result)l[c.modelPath]=c.modelArtifactsInfo;e(l)},a.onerror=l=>(o.close(),n(a.error)),s.oncomplete=()=>o.close()},r.onerror=o=>n(r.error)})}async removeModel(e){return e=NFe(e),new Promise((n,r)=>{const o=this.indexedDB.open(vI,xI);o.onupgradeneeded=()=>bI(o),o.onsuccess=()=>{const s=o.result,i=s.transaction(Wa,"readwrite"),a=i.objectStore(Wa),l=a.get(e);let c;l.onsuccess=()=>{if(l.result==null)return s.close(),r(new Error(`Cannot find model with path '${e}' in IndexedDB.`));{const u=a.delete(e),d=()=>{c=s.transaction(ac,"readwrite");const h=c.objectStore(ac).delete(e);h.onsuccess=()=>n(l.result.modelArtifactsInfo),h.onerror=p=>r(l.error)};u.onsuccess=d,u.onerror=f=>(d(),s.close(),r(l.error))}},l.onerror=u=>(s.close(),r(l.error)),i.oncomplete=()=>{c==null?s.close():c.oncomplete=()=>s.close()}},o.onerror=s=>r(o.error)})}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Ni="/",_u="tensorflowjs_models",$q="info",OFe="model_topology",PFe="weight_specs",RFe="weight_data",_Fe="model_metadata";function kq(t){return{info:[_u,t,$q].join(Ni),topology:[_u,t,OFe].join(Ni),weightSpecs:[_u,t,PFe].join(Ni),weightData:[_u,t,RFe].join(Ni),modelMetadata:[_u,t,_Fe].join(Ni)}}function Tq(t){for(const e of Object.values(t))window.localStorage.removeItem(e)}function DFe(t){const e=t.split(Ni);if(e.length<3)throw new Error(`Invalid key format: ${t}`);return e.slice(1,e.length-1).join(Ni)}function MFe(t){return t.startsWith(Wc.URL_SCHEME)?t.slice(Wc.URL_SCHEME.length):t}class Wc{constructor(e){if(!ee().getBool("IS_BROWSER")||typeof window>"u"||typeof window.localStorage>"u")throw new Error("The current environment does not support local storage.");if(this.LS=window.localStorage,e==null||!e)throw new Error("For local storage, modelPath must not be null, undefined or empty.");this.modelPath=e,this.keys=kq(this.modelPath)}async save(e){if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");{const n=JSON.stringify(e.modelTopology),r=JSON.stringify(e.weightSpecs),o=wq(e),s=qf.join(e.weightData);try{this.LS.setItem(this.keys.info,JSON.stringify(o)),this.LS.setItem(this.keys.topology,n),this.LS.setItem(this.keys.weightSpecs,r),this.LS.setItem(this.keys.weightData,$Fe(s));const i={format:e.format,generatedBy:e.generatedBy,convertedBy:e.convertedBy,signature:e.signature!=null?e.signature:void 0,userDefinedMetadata:e.userDefinedMetadata!=null?e.userDefinedMetadata:void 0,modelInitializer:e.modelInitializer!=null?e.modelInitializer:void 0,initializerSignature:e.initializerSignature!=null?e.initializerSignature:void 0,trainingConfig:e.trainingConfig!=null?e.trainingConfig:void 0};return this.LS.setItem(this.keys.modelMetadata,JSON.stringify(i)),{modelArtifactsInfo:o}}catch{throw Tq(this.keys),new Error(`Failed to save model '${this.modelPath}' to local storage: size quota being exceeded is a possible cause of this failure: modelTopologyBytes=${o.modelTopologyBytes}, weightSpecsBytes=${o.weightSpecsBytes}, weightDataBytes=${o.weightDataBytes}.`)}}}async load(){const e=JSON.parse(this.LS.getItem(this.keys.info));if(e==null)throw new Error(`In local storage, there is no model with name '${this.modelPath}'`);if(e.modelTopologyType!=="JSON")throw new Error("BrowserLocalStorage does not support loading non-JSON model topology yet.");const n={},r=JSON.parse(this.LS.getItem(this.keys.topology));if(r==null)throw new Error(`In local storage, the topology of model '${this.modelPath}' is missing.`);n.modelTopology=r;const o=JSON.parse(this.LS.getItem(this.keys.weightSpecs));if(o==null)throw new Error(`In local storage, the weight specs of model '${this.modelPath}' are missing.`);n.weightSpecs=o;const s=this.LS.getItem(this.keys.modelMetadata);if(s!=null){const a=JSON.parse(s);n.format=a.format,n.generatedBy=a.generatedBy,n.convertedBy=a.convertedBy,a.signature!=null&&(n.signature=a.signature),a.userDefinedMetadata!=null&&(n.userDefinedMetadata=a.userDefinedMetadata),a.modelInitializer!=null&&(n.modelInitializer=a.modelInitializer),a.initializerSignature!=null&&(n.initializerSignature=a.initializerSignature),a.trainingConfig!=null&&(n.trainingConfig=a.trainingConfig)}const i=this.LS.getItem(this.keys.weightData);if(i==null)throw new Error(`In local storage, the binary weight values of model '${this.modelPath}' are missing.`);return n.weightData=kFe(i),n}}Wc.URL_SCHEME="localstorage://";const Iq=t=>ee().getBool("IS_BROWSER")&&!Array.isArray(t)&&t.startsWith(Wc.URL_SCHEME)?FFe(t.slice(Wc.URL_SCHEME.length)):null;sr.registerSaveRouter(Iq);sr.registerLoadRouter(Iq);function FFe(t){return new Wc(t)}class LFe{constructor(){M(ee().getBool("IS_BROWSER"),()=>"Current environment is not a web browser"),M(typeof window>"u"||typeof window.localStorage<"u",()=>"Current browser does not appear to support localStorage"),this.LS=window.localStorage}async listModels(){const e={},n=_u+Ni,r=Ni+$q;for(let o=0;o<this.LS.length;++o){const s=this.LS.key(o);if(s.startsWith(n)&&s.endsWith(r)){const i=DFe(s);e[i]=JSON.parse(this.LS.getItem(s))}}return e}async removeModel(e){e=MFe(e);const n=kq(e);if(this.LS.getItem(n.info)==null)throw new Error(`Cannot find model at path '${e}'`);const r=JSON.parse(this.LS.getItem(n.info));return Tq(n),r}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const tj="://";class Vs{constructor(){this.managers={}}static getInstance(){return Vs.instance==null&&(Vs.instance=new Vs),Vs.instance}static registerManager(e,n){M(e!=null,()=>"scheme must not be undefined or null."),e.endsWith(tj)&&(e=e.slice(0,e.indexOf(tj))),M(e.length>0,()=>"scheme must not be an empty string.");const r=Vs.getInstance();M(r.managers[e]==null,()=>`A model store manager is already registered for scheme '${e}'.`),r.managers[e]=n}static getManager(e){const n=Vs.getInstance().managers[e];if(n==null)throw new Error(`Cannot find model manager for scheme '${e}'`);return n}static getSchemes(){return Object.keys(Vs.getInstance().managers)}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class jFe{constructor(){this.messageName="setTimeoutCustom",this.functionRefs=[],this.handledMessageCount=0,this.hasEventListener=!1}fetch(e,n){return fetch(e,n)}now(){return performance.now()}encode(e,n){if(n!=="utf-8"&&n!=="utf8")throw new Error(`Browser's encoder only supports utf-8, but got ${n}`);return this.textEncoder==null&&(this.textEncoder=new TextEncoder),this.textEncoder.encode(e)}decode(e,n){return new TextDecoder(n).decode(e)}setTimeoutCustom(e,n){if(typeof window>"u"||!ee().getBool("USE_SETTIMEOUTCUSTOM")){setTimeout(e,n);return}this.functionRefs.push(e),setTimeout(()=>{window.postMessage({name:this.messageName,index:this.functionRefs.length-1},"*")},n),this.hasEventListener||(this.hasEventListener=!0,window.addEventListener("message",r=>{if(r.source===window&&r.data.name===this.messageName){r.stopPropagation();const o=this.functionRefs[r.data.index];o(),this.handledMessageCount++,this.handledMessageCount===this.functionRefs.length&&(this.functionRefs=[],this.handledMessageCount=0)}},!0))}isTypedArray(e){return eq(e)}}if(ee().get("IS_BROWSER")){ee().setPlatform("browser",new jFe);try{Vs.registerManager(Wc.URL_SCHEME,new LFe)}catch{}try{Vs.registerManager(zc.URL_SCHEME,new AFe)}catch{}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const BFe={importFetch:()=>require("node-fetch")};let BC;class zFe{constructor(){this.util=require("util"),this.textEncoder=new this.util.TextEncoder}fetch(e,n){return ee().global.fetch!=null?ee().global.fetch(e,n):(BC==null&&(BC=BFe.importFetch()),BC(e,n))}now(){const e=process.hrtime();return e[0]*1e3+e[1]/1e6}encode(e,n){if(n!=="utf-8"&&n!=="utf8")throw new Error(`Node built-in encoder only supports utf-8, but got ${n}`);return this.textEncoder.encode(e)}decode(e,n){return e.length===0?"":new this.util.TextDecoder(n).decode(e)}isTypedArray(e){return this.util.types.isFloat32Array(e)||this.util.types.isInt32Array(e)||this.util.types.isUint8Array(e)||this.util.types.isUint8ClampedArray(e)}}ee().get("IS_NODE")&&!ee().get("IS_BROWSER")&&ee().setPlatform("node",new zFe);/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ge(t,e="float32",n){return e=e||"float32",ca(t),new Mn(t,e,n)}/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function WFe(t,e){const n=j(t,"x","cast");if(!_Me(e))throw new Error(`Failed to cast to unknown dtype ${e}`);if(e==="string"&&n.dtype!=="string"||e!=="string"&&n.dtype==="string")throw new Error("Only strings can be casted to strings");const r={x:n},o={dtype:e};return H.runKernel(wg,r,o)}const xe=X({cast_:WFe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function VFe(t){const n={x:j(t,"x","clone","string_or_numeric")};return H.runKernel(_g,n)}const wc=X({clone_:VFe});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function UFe(t,e=!1){console.log(t.toString(e))}/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */pq();const GFe={buffer:Ge,cast:xe,clone:wc,print:UFe};fFe(GFe);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function HFe(t,e){let n=j(t,"a","add"),r=j(e,"b","add");[n,r]=en(n,r);const o={a:n,b:r};return H.runKernel(Kf,o)}const de=X({add_:HFe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function KFe(t,e){let n=j(t,"a","floorDiv"),r=j(e,"b","floorDiv");[n,r]=en(n,r);const o={a:n,b:r};return H.runKernel(Pg,o)}const Eq=X({floorDiv_:KFe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qFe(t,e){let n=j(t,"a","div"),r=j(e,"b","div");if([n,r]=en(n,r),n.dtype==="int32"&&r.dtype==="int32")return Eq(n,r);const o={a:n,b:r},s={};return H.runKernel(Tg,o,s)}const Ae=X({div_:qFe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function XFe(t,e){let n=j(t,"a","mul"),r=j(e,"b","mul");[n,r]=en(n,r);const o={a:n,b:r};return H.runKernel(Vg,o)}const U=X({mul_:XFe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function YFe(t){const e=j(t,"x","abs");if(e.dtype==="complex64"){const n={x:e};return H.runKernel(Hw,n)}else{const n={x:e};return H.runKernel(jw,n)}}const ir=X({abs_:YFe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function QFe(t){const n={x:j(t,"x","acos")};return H.runKernel(pg,n)}const ZFe=X({acos_:QFe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function JFe(t){const n={x:j(t,"x","acosh")};return H.runKernel(mg,n)}const eLe=X({acosh_:JFe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tLe(t,e=null,n=!1){const o={x:j(t,"x","all","bool")},s={axis:e,keepDims:n};return H.runKernel(q2,o,s)}const Nq=X({all_:tLe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nLe(t,e=null,n=!1){const o={x:j(t,"x","any","bool")},s={axis:e,keepDims:n};return H.runKernel(X2,o,s)}const wI=X({any_:nLe});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function rLe(t,e=0){const r={x:j(t,"x","argMax")},o={axis:e};return H.runKernel(Bw,r,o)}const km=X({argMax_:rLe});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function oLe(t,e=0){const r={x:j(t,"x","argMin")},o={axis:e};return H.runKernel(zw,r,o)}const sLe=X({argMin_:oLe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function iLe(t){const n={x:j(t,"x","asin")};return H.runKernel(gg,n)}const aLe=X({asin_:iLe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lLe(t){const n={x:j(t,"x","asinh")};return H.runKernel(yg,n)}const cLe=X({asinh_:lLe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function uLe(t){const n={x:j(t,"x","atan")};return H.runKernel(vg,n)}const dLe=X({atan_:uLe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fLe(t,e){let n=j(t,"a","atan2"),r=j(e,"b","atan2");[n,r]=en(n,r);const o={a:n,b:r};return H.runKernel(bg,o)}const hLe=X({atan2_:fLe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pLe(t){const n={x:j(t,"x","atanh")};return H.runKernel(xg,n)}const mLe=X({atanh_:pLe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cy(t,e,n,r,o="NHWC",s){const i=t[3],a=[...e,i],l=da(o);return Ln(t,a,n,s,r,null,null,l)}function Jo(t,e,n,r,o,s,i="channelsLast"){const[a,l]=Tm(e);let c;if(i==="channelsLast")c=[a,l,t[3],t[3]];else if(i==="channelsFirst")c=[a,l,t[1],t[1]];else throw new Error(`Unknown dataFormat ${i}`);return Ln(t,c,n,r,o,s,!1,i)}function ua(t,e,n,r,o,s,i="NDHWC"){const[a,l,c]=SI(e);let u,d;if(i==="NDHWC")d="channelsLast",u=[a,l,c,t[4],t[4]];else if(i==="NCDHW")d="channelsFirst",u=[a,l,c,t[1],t[1]];else throw new Error(`Unknown dataFormat ${i}`);return Al(t,u,n,r,o,!1,d,s)}function Ln(t,e,n,r,o,s,i=!1,a="channelsLast"){let[l,c,u,d]=[-1,-1,-1,-1];if(a==="channelsLast")[l,c,u,d]=t;else if(a==="channelsFirst")[l,d,c,u]=t;else throw new Error(`Unknown dataFormat ${a}`);const[f,h,,p]=e,[m,g]=Tm(n),[y,v]=Tm(r),x=pd(f,y),b=pd(h,v),{padInfo:w,outHeight:C,outWidth:$}=vLe(o,c,u,m,g,x,b,s,a),T=i?p*d:p;let I;return a==="channelsFirst"?I=[l,T,C,$]:a==="channelsLast"&&(I=[l,C,$,T]),{batchSize:l,dataFormat:a,inHeight:c,inWidth:u,inChannels:d,outHeight:C,outWidth:$,outChannels:T,padInfo:w,strideHeight:m,strideWidth:g,filterHeight:f,filterWidth:h,effectiveFilterHeight:x,effectiveFilterWidth:b,dilationHeight:y,dilationWidth:v,inShape:t,outShape:I,filterShape:e}}function Al(t,e,n,r,o,s=!1,i="channelsLast",a){let[l,c,u,d,f]=[-1,-1,-1,-1,-1];if(i==="channelsLast")[l,c,u,d,f]=t;else if(i==="channelsFirst")[l,f,c,u,d]=t;else throw new Error(`Unknown dataFormat ${i}`);const[h,p,m,,g]=e,[y,v,x]=SI(n),[b,w,C]=SI(r),$=pd(h,b),T=pd(p,w),I=pd(m,C),{padInfo:E,outDepth:N,outHeight:A,outWidth:R}=xLe(o,c,u,d,y,v,x,$,T,I,a),P=s?g*f:g;let F;return i==="channelsFirst"?F=[l,P,N,A,R]:i==="channelsLast"&&(F=[l,N,A,R,P]),{batchSize:l,dataFormat:i,inDepth:c,inHeight:u,inWidth:d,inChannels:f,outDepth:N,outHeight:A,outWidth:R,outChannels:P,padInfo:E,strideDepth:y,strideHeight:v,strideWidth:x,filterDepth:h,filterHeight:p,filterWidth:m,effectiveFilterDepth:$,effectiveFilterHeight:T,effectiveFilterWidth:I,dilationDepth:b,dilationHeight:w,dilationWidth:C,inShape:t,outShape:F,filterShape:e}}function gLe(t,e,n,r,o){r==null&&(r=FA(t,e,n));const s=t[0],i=t[1],a=Im((s-e+2*r)/n+1,o),l=Im((i-e+2*r)/n+1,o);return[a,l]}function yLe(t,e,n,r,o,s){o==null&&(o=FA(t,e[0],r[0]));const i=[0,0,0,n];for(let a=0;a<3;a++)t[a]+2*o>=e[a]&&(i[a]=Im((t[a]-e[a]+2*o)/r[a]+1,s));return i}function FA(t,e,n,r=1){const o=pd(e,r);return Math.floor((t[0]*(n-1)-n+o)/2)}function Tm(t){return typeof t=="number"?[t,t,t]:t.length===2?[t[0],t[1],1]:t}function SI(t){return typeof t=="number"?[t,t,t]:t}function pd(t,e){return e<=1?t:t+(t-1)*(e-1)}function vLe(t,e,n,r,o,s,i,a,l){let c,u,d;if(typeof t=="number"){c={top:t,bottom:t,left:t,right:t,type:t===0?"VALID":"NUMBER"};const h=gLe([e,n],s,r,t,a);u=h[0],d=h[1]}else if(t==="same"){u=Math.ceil(e/r),d=Math.ceil(n/o);const f=Math.max(0,(u-1)*r+s-e),h=Math.max(0,(d-1)*o+i-n),p=Math.floor(f/2),m=f-p,g=Math.floor(h/2),y=h-g;c={top:p,bottom:m,left:g,right:y,type:"SAME"}}else if(t==="valid")c={top:0,bottom:0,left:0,right:0,type:"VALID"},u=Math.ceil((e-s+1)/r),d=Math.ceil((n-i+1)/o);else if(typeof t=="object"){const f=l==="channelsLast"?t[1][0]:t[2][0],h=l==="channelsLast"?t[1][1]:t[2][1],p=l==="channelsLast"?t[2][0]:t[3][0],m=l==="channelsLast"?t[2][1]:t[3][1];c={top:f,bottom:h,left:p,right:m,type:f===0&&h===0&&p===0&&m===0?"VALID":"EXPLICIT"},u=Im((e-s+f+h)/r+1,a),d=Im((n-i+p+m)/o+1,a)}else throw Error(`Unknown padding parameter: ${t}`);return{padInfo:c,outHeight:u,outWidth:d}}function xLe(t,e,n,r,o,s,i,a,l,c,u){let d,f,h,p;if(t==="valid"&&(t=0),typeof t=="number"){d={top:t,bottom:t,left:t,right:t,front:t,back:t,type:t===0?"VALID":"NUMBER"};const g=yLe([e,n,r,1],[a,l,c],1,[o,s,i],t,u);f=g[0],h=g[1],p=g[2]}else if(t==="same"){f=Math.ceil(e/o),h=Math.ceil(n/s),p=Math.ceil(r/i);const m=(f-1)*o+a-e,g=(h-1)*s+l-n,y=(p-1)*i+c-r,v=Math.floor(m/2),x=m-v,b=Math.floor(g/2),w=g-b,C=Math.floor(y/2),$=y-C;d={top:b,bottom:w,left:C,right:$,front:v,back:x,type:"SAME"}}else throw Error(`Unknown padding parameter: ${t}`);return{padInfo:d,outDepth:f,outHeight:h,outWidth:p}}function Im(t,e){if(!e)return Math.trunc(t);switch(e){case"round":return Math.round(t);case"ceil":return Math.ceil(t);case"floor":return Math.floor(t);default:throw new Error(`Unknown roundingMode ${e}`)}}function Vc(t){const[e,n,r]=Tm(t);return e===1&&n===1&&r===1}function Qn(t,e){return Vc(t)||Vc(e)}function Uc(t){return Tm(t).every(e=>e>0)}function da(t){if(t==="NHWC")return"channelsLast";if(t==="NCHW")return"channelsFirst";throw new Error(`Unknown dataFormat ${t}`)}function Dr(t,e,n){if(n!=null){if(typeof e=="string")throw Error(`Error in ${t}: pad must be an integer when using dimRoundingMode ${n} but got pad ${e}.`);if(typeof e=="number")M(uf(e),()=>`Error in ${t}: pad must be an integer when using dimRoundingMode ${n} but got pad ${e}.`);else if(typeof e=="object")e.forEach(r=>{r.forEach(o=>{M(uf(o),()=>`Error in ${t}: pad must be an integer when using dimRoundingMode ${n} but got pad ${o}.`)})});else throw Error(`Error in ${t}: Unknown padding parameter: ${e}`)}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bLe(t,e){const r={x:j(t,"x","reshape","string_or_numeric")},o={shape:e};return H.runKernel(T1,r,o)}const q=X({reshape_:bLe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function wLe(t,e,n,r,o){const s=j(t,"x","avgPool","float32"),i=1;M(Qn(n,i),()=>`Error in avgPool: Either strides or dilations must be 1. Got strides ${n} and dilations '${i}'`);let a=s,l=!1;s.rank===3&&(l=!0,a=q(s,[1,s.shape[0],s.shape[1],s.shape[2]])),M(a.rank===4,()=>`Error in avgPool: x must be rank 4 but got rank ${a.rank}.`),Dr("avgPool",r,o);const c={x:a},u={filterSize:e,strides:n,pad:r,dimRoundingMode:o};let d=H.runKernel(Ww,c,u);return d=xe(d,s.dtype),l?q(d,[d.shape[1],d.shape[2],d.shape[3]]):d}const LA=X({avgPool_:wLe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function SLe(t,e,n,r,o,s="NDHWC"){const i=j(t,"x","avgPool3d","float32");let a=i,l=!1;i.rank===4&&(l=!0,a=q(i,[1,i.shape[0],i.shape[1],i.shape[2],i.shape[3]])),M(a.rank===5,()=>`Error in avgPool3d: x must be rank 5 but got rank ${a.rank}.`),M(s==="NDHWC",()=>`Error in avgPool3d: Only NDHWC is currently supported, but got dataFormat of ${s}`),M(typeof n=="number"&&n>0||Array.isArray(n)&&n[0]>0&&n[1]>0&&n[2]>0,()=>`Error in avgPool3d: Stride must be > 0, but got '${n}'`),Dr("avgPool3d",r,o);const c={x:a},u={filterSize:e,strides:n,pad:r,dimRoundingMode:o,dataFormat:s};let d=H.runKernel(Vw,c,u);return d=xe(d,a.dtype),l?q(d,[d.shape[1],d.shape[2],d.shape[3],d.shape[4]]):d}const CLe=X({avgPool3d_:SLe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $Le(t,e=0){M(t.length>=1,()=>"Pass at least one tensor to concat");const n=vq(t,"tensors","concat","string_or_numeric");if(n[0].dtype==="complex64"&&n.forEach(s=>{if(s.dtype!=="complex64")throw new Error(`Cannot concatenate complex64 tensors with a tensor
          with dtype ${s.dtype}. `)}),n.length===1)return wc(n[0]);const r=n,o={axis:e};return H.runKernel(Kw,r,o)}const Nr=X({concat_:$Le});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kLe(t,e,n=!1,r=!1){let o=j(t,"a","matMul"),s=j(e,"b","matMul");[o,s]=en(o,s);const i={a:o,b:s},a={transposeA:n,transposeB:r};return H.runKernel(Uw,i,a)}const lt=X({matMul_:kLe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function TLe(t){const n={x:j(t,"x","sigmoid","float32")};return H.runKernel(ey,n)}const Xf=X({sigmoid_:TLe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ILe(t,e,n){const r=j(t,"x","slice","string_or_numeric");if(r.rank===0)throw new Error("Slicing scalar is not possible");const o={x:r},s={begin:e,size:n};return H.runKernel(O1,o,s)}const Ct=X({slice_:ILe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ELe(t){const n={x:j(t,"x","tanh","float32")};return H.runKernel(iy,n)}const W1=X({tanh_:ELe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function NLe(t,e,n){const r=j(t,"x","batchToSpaceND"),o=e.reduce((a,l)=>a*l);M(r.rank>=1+e.length,()=>`input rank is ${r.rank} but should be > than blockShape.length ${e.length}`),M(n.length===e.length,()=>`crops.length is ${n.length} but should be equal to blockShape.length  ${e.length}`),M(r.shape[0]%o===0,()=>`input tensor batch is ${r.shape[0]} but is not divisible by the product of the elements of blockShape ${e.join(" * ")} === ${o}`);const s={x:r},i={blockShape:e,crops:n};return H.runKernel(Gw,s,i)}const jA=X({batchToSpaceND_:NLe});function ALe(t){let e;return t.rank===0||t.rank===1?e=q(t,[1,1,1,t.size]):t.rank===2?e=q(t,[1,1,t.shape[0],t.shape[1]]):t.rank===3?e=q(t,[1,t.shape[0],t.shape[1],t.shape[2]]):e=t,e}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function OLe(t,e,n,r,o,s){s==null&&(s=.001);const i=j(t,"x","batchNorm"),a=j(e,"mean","batchNorm"),l=j(n,"variance","batchNorm");let c;o!=null&&(c=j(o,"scale","batchNorm"));let u;r!=null&&(u=j(r,"offset","batchNorm")),M(a.rank===l.rank,()=>"Batch normalization gradient requires mean and variance to have equal ranks."),M(u==null||a.rank===u.rank,()=>"Batch normalization gradient requires mean and offset to have equal ranks."),M(c==null||a.rank===c.rank,()=>"Batch normalization gradient requires mean and scale to have equal ranks.");const f={x:ALe(i),scale:c,offset:u,mean:a,variance:l},h={varianceEpsilon:s},p=H.runKernel(n1,f,h);return q(p,i.shape)}const V1=X({batchNorm_:OLe});function PLe(t,e,n,r,o,s){const i=j(t,"x","batchNorm"),a=j(e,"mean","batchNorm"),l=j(n,"variance","batchNorm");let c;o!=null&&(c=j(o,"scale","batchNorm"));let u;return r!=null&&(u=j(r,"offset","batchNorm")),M(i.rank===2,()=>`Error in batchNorm2D: x must be rank 2 but got rank ${i.rank}.`),M(a.rank===2||a.rank===1,()=>`Error in batchNorm2D: mean must be rank 2 or rank 1 but got rank ${a.rank}.`),M(l.rank===2||l.rank===1,()=>`Error in batchNorm2D: variance must be rank 2 or rank 1 but got rank ${l.rank}.`),c!=null&&M(c.rank===2||c.rank===1,()=>`Error in batchNorm2D: scale must be rank 2 or rank 1 but got rank ${c.rank}.`),u!=null&&M(u.rank===2||u.rank===1,()=>`Error in batchNorm2D: offset must be rank 2 or rank 1 but got rank ${u.rank}.`),V1(i,a,l,u,c,s)}const RLe=X({batchNorm2d_:PLe});function _Le(t,e,n,r,o,s){const i=j(t,"x","batchNorm"),a=j(e,"mean","batchNorm"),l=j(n,"variance","batchNorm");let c;o!=null&&(c=j(o,"scale","batchNorm"));let u;return r!=null&&(u=j(r,"offset","batchNorm")),M(i.rank===3,()=>`Error in batchNorm3D: x must be rank 3 but got rank ${i.rank}.`),M(a.rank===3||a.rank===1,()=>`Error in batchNorm3D: mean must be rank 3 or rank 1 but got rank ${a.rank}.`),M(l.rank===3||l.rank===1,()=>`Error in batchNorm3D: variance must be rank 3 or rank 1 but got rank ${l.rank}.`),c!=null&&M(c.rank===3||c.rank===1,()=>`Error in batchNorm3D: scale must be rank 3 or rank 1 but got rank ${c.rank}.`),u!=null&&M(u.rank===3||u.rank===1,()=>`Error in batchNorm3D: offset must be rank 3 or rank 1 but got rank ${u.rank}.`),V1(i,a,l,u,c,s)}const DLe=X({batchNorm3d_:_Le});function MLe(t,e,n,r,o,s){const i=j(t,"x","batchNorm"),a=j(e,"mean","batchNorm"),l=j(n,"variance","batchNorm");let c;o!=null&&(c=j(o,"scale","batchNorm"));let u;return r!=null&&(u=j(r,"offset","batchNorm")),M(i.rank===4,()=>`Error in batchNorm4D: x must be rank 4 but got rank ${i.rank}.`),M(a.rank===4||a.rank===1,()=>`Error in batchNorm4D: mean must be rank 4 or rank 1 but got rank ${a.rank}.`),M(l.rank===4||l.rank===1,()=>`Error in batchNorm4D: variance must be rank 4 or rank 1 but got rank ${l.rank}.`),c!=null&&M(c.rank===4||c.rank===1,()=>`Error in batchNorm4D: scale must be rank 4 or rank 1 but got rank ${c.rank}.`),u!=null&&M(u.rank===4||u.rank===1,()=>`Error in batchNorm4D: offset must be rank 4 or rank 1 but got rank ${u.rank}.`),V1(i,a,l,u,c,s)}const FLe=X({batchNorm4d_:MLe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function LLe(t,e,n){const r=j(t,"x","bincount"),o=j(e,"weights","bincount");M(r.dtype==="int32",()=>`Error in bincount: input dtype must be int32, but got ${r.dtype}`),M(n>=0,()=>`size must be non-negative, but got ${n}.`),M(o.size===r.size||o.size===0,()=>`Error in bincount: weights must have the same size as input or0-length, but got input shape: ${r.shape}, weights shape: ${o.shape}.`);const s={x:r,weights:o},i={size:n};return H.runKernel(Z2,s,i)}const jLe=X({bincount_:LLe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function BLe(t,e){let n=j(t,"broadcastTo","x");const r=n.shape;if(ca(e),e.length<n.rank)throw new Error(`broadcastTo(): shape.length=${e.length} < input.rank=${n.rank}.`);if(e.length>n.rank){const c=n.shape.slice();for(;c.length<e.length;)c.unshift(1);n=q(n,c)}const o=n.shape,s=Array.from(e);for(let c=e.length-1;c>=0;c--)if(o[c]===e[c])s[c]=1;else if(n.shape[c]!==1)throw new Error(`broadcastTo(): [${r}] cannot be broadcast to [${e}].`);if(s.map((c,u)=>c>1?u:-1).filter(c=>c>=0).length===0)return wc(n);const a={x:n},l={reps:s};return H.runKernel(ay,a,l)}const hp=X({broadcastTo_:BLe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zLe(t){const n={x:j(t,"x","ceil","float32")};return H.runKernel(Sg,n)}const WLe=X({ceil_:zLe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function U1(t,e,n){ca(t),n=n||Gf(e);const r={shape:t,value:e,dtype:n};return H.runKernel(hA,{},r)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function VLe(t,e,n){const r=j(t,"x","clipByValue");if(M(e<=n,()=>`Error in clip: min (${e}) must be less than or equal to max (${n}).`),e===n)return U1(r.shape,e,r.dtype);const o={x:r},s={clipValueMin:e,clipValueMax:n};return H.runKernel(Cg,o,s)}const yo=X({clipByValue_:VLe});function ULe(t){return Nr(t,0)}const GLe=X({concat1d_:ULe});function HLe(t,e){return Nr(t,e)}const KLe=X({concat2d_:HLe});function qLe(t,e){return Nr(t,e)}const XLe=X({concat3d_:qLe});function YLe(t,e){return Nr(t,e)}const QLe=X({concat4d_:YLe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ZLe(t,e,n,r,o="NHWC",s=[1,1],i){const a=j(t,"x","conv2d","float32"),l=j(e,"filter","conv2d","float32");let c=a,u=!1;a.rank===3&&(u=!0,c=q(a,[1,a.shape[0],a.shape[1],a.shape[2]])),M(c.rank===4,()=>`Error in conv2d: input must be rank 4, but got rank ${c.rank}.`),M(l.rank===4,()=>`Error in conv2d: filter must be rank 4, but got rank ${l.rank}.`),Dr("conv2d",r,i);const d=o==="NHWC"?c.shape[3]:c.shape[1];M(d===l.shape[2],()=>`Error in conv2d: depth of input (${d}) must match input depth for filter ${l.shape[2]}.`),M(Qn(n,s),()=>`Error in conv2D: Either strides or dilations must be 1. Got strides ${n} and dilations '${s}'`),M(Uc(s),()=>"Error in conv2D: Dilated rates should be larger than 0."),M(Uc(n),()=>"Error in conv2D: Strides should be larger than 0.");const f={x:c,filter:l},h={strides:n,pad:r,dataFormat:o,dilations:s,dimRoundingMode:i},p=H.runKernel(qw,f,h);return u?q(p,[p.shape[1],p.shape[2],p.shape[3]]):p}const Gc=X({conv2d_:ZLe});function JLe(t,e,n,r,o="NWC",s=1,i){const a=j(t,"x","conv1d"),l=j(e,"filter","conv1d");let c=a,u=!1;a.rank===2&&(u=!0,c=q(a,[1,a.shape[0],a.shape[1]])),M(c.rank===3,()=>`Error in conv1d: input must be rank 3, but got rank ${c.rank}.`),M(l.rank===3,()=>`Error in conv1d: filter must be rank 3, but got rank ${l.rank}.`),Dr("conv1d",r,i),M(c.shape[2]===l.shape[1],()=>`Error in conv1d: depth of input (${c.shape[2]}) must match input depth for filter ${l.shape[1]}.`),M(Qn(n,s),()=>`Error in conv1D: Either stride or dilation must be 1. Got stride ${n} and dilation '${s}'`),M(Uc(s),()=>"Error in conv1D: Dilated rates should be larger than 0."),M(Uc(n),()=>"Error in conv1D: Stride should be larger than 0."),M(o==="NWC",()=>`Error in conv1d: got dataFormat of ${o} but only NWC is currently supported.`);const d=q(l,[1,l.shape[0],l.shape[1],l.shape[2]]),f=q(c,[c.shape[0],1,c.shape[1],c.shape[2]]),g=Gc(f,d,[1,n],r,"NHWC",[1,s],i);return u?q(g,[g.shape[2],g.shape[3]]):q(g,[g.shape[0],g.shape[2],g.shape[3]])}const Aq=X({conv1d_:JLe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function eje(t,e,n,r,o,s="NHWC",i){M(t.length===e.rank,()=>`Length of inShape (${t.length}) and rank of dy (${e.rank}) must match`);let a=t,l=e,c=!1;e.rank===3&&(c=!0,l=q(e,[1,e.shape[0],e.shape[1],e.shape[2]]),a=[1,t[0],t[1],t[2]]),M(a.length===4,()=>`Error in conv2dDerInput: inShape must be length 4, but got length ${a.length}.`),M(l.rank===4,()=>`Error in conv2dDerInput: dy must be rank 4, but got rank ${l.rank}`),M(n.rank===4,()=>`Error in conv2dDerInput: filter must be rank 4, but got rank ${n.rank}`);const u=s==="NHWC"?a[3]:a[1],d=s==="NHWC"?l.shape[3]:l.shape[1];M(u===n.shape[2],()=>`Error in conv2dDerInput: depth of input (${u}) must match input depth for filter ${n.shape[2]}.`),M(d===n.shape[3],()=>`Error in conv2dDerInput: depth of output (${d}) must match output depth for filter ${n.shape[3]}.`),Dr("conv2dDerInput",o,i);const f={dy:l,filter:n},h={strides:r,pad:o,dataFormat:s,dimRoundingMode:i,inputShape:a},p=H.runKernel(Xw,f,h);return c?q(p,[p.shape[1],p.shape[2],p.shape[3]]):p}const BA=X({conv2DBackpropInput_:eje});function tje(t,e,n,r,o,s){const i=j(t,"x","conv2dTranspose"),a=j(e,"filter","conv2dTranspose");return BA(n,i,a,r,o,"NHWC",s)}const Oq=X({conv2dTranspose_:tje});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nje(t,e,n,r,o="NDHWC",s=[1,1,1]){const i=j(t,"x","conv3d"),a=j(e,"filter","conv3d");let l=i,c=!1;i.rank===4&&(c=!0,l=q(i,[1,i.shape[0],i.shape[1],i.shape[2],i.shape[3]])),M(l.rank===5,()=>`Error in conv3d: input must be rank 5, but got rank ${l.rank}.`),M(a.rank===5,()=>`Error in conv3d: filter must be rank 5, but got rank ${a.rank}.`),M(l.shape[4]===a.shape[3],()=>`Error in conv3d: depth of input (${l.shape[4]}) must match input depth for filter ${a.shape[3]}.`),M(Qn(n,s),()=>`Error in conv3D: Either strides or dilations must be 1. Got strides ${n} and dilations '${s}'`),M(o==="NDHWC",()=>`Error in conv3d: got dataFormat of ${o} but only NDHWC is currently supported.`),M(Uc(s),()=>"Error in conv3D: Dilated rates should be larger than 0."),M(Uc(n),()=>"Error in conv3D: Strides should be larger than 0.");const u={x:l,filter:a},d={strides:n,pad:r,dataFormat:o,dilations:s},f=H.runKernel(Yw,u,d);return c?q(f,[f.shape[1],f.shape[2],f.shape[3],f.shape[4]]):f}const rje=X({conv3d_:nje});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function oje(t,e,n,r,o){M(t.length===e.rank,()=>`Length of inShape (${t.length}) and rank of dy (${e.rank}) must match`);let s=t,i=e,a=!1;e.rank===4&&(a=!0,i=q(e,[1,e.shape[0],e.shape[1],e.shape[2],e.shape[3]]),s=[1,t[0],t[1],t[2],t[3]]);const l=s[4],c=i.shape[4];M(s.length===5,()=>`Error in conv3dDerInput: inShape must be length 5, but got length ${s.length}.`),M(i.rank===5,()=>`Error in conv3dDerInput: dy must be rank 5, but got rank ${i.rank}`),M(n.rank===5,()=>`Error in conv3dDerInput: filter must be rank 5, but got rank ${n.rank}`),M(l===n.shape[3],()=>`Error in conv3dDerInput: depth of input (${l}) must match input depth for filter ${n.shape[3]}.`),M(c===n.shape[4],()=>`Error in conv3dDerInput: depth of output (${c}) must match output depth for filter ${n.shape[4]}.`);const u={dy:i,filter:n},d={pad:o,strides:r,inputShape:s},f=H.runKernel(rA,u,d);return a?q(f,[f.shape[1],f.shape[2],f.shape[3],f.shape[4]]):f}const Pq=X({conv3DBackpropInput_:oje});function sje(t,e,n,r,o){const s=j(t,"x","conv3dTranspose"),i=j(e,"filter","conv3dTranspose");return Pq(n,s,i,r,o)}const ije=X({conv3dTranspose_:sje});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function aje(t){const n={x:j(t,"x","cos","float32")};return H.runKernel($g,n)}const zA=X({cos_:aje});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lje(t){const n={x:j(t,"x","cosh","float32")};return H.runKernel(kg,n)}const Rq=X({cosh_:lje});/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cje(t,e=0,n=!1,r=!1){const s={x:j(t,"x","cumprod")},i={axis:e,exclusive:n,reverse:r};return H.runKernel(oA,s,i)}const CI=X({cumprod_:cje});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function uje(t,e=0,n=!1,r=!1){const s={x:j(t,"x","cumsum")},i={axis:e,exclusive:n,reverse:r};return H.runKernel(Qw,s,i)}const _q=X({cumsum_:uje});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dje(t,e,n,r=!1){const o=j(t,"x","denseBincount"),s=j(e,"weights","denseBincount");M(o.dtype==="int32",()=>`Error in denseBincount: input dtype must be int32, but got ${o.dtype}`),M(o.rank<=2,()=>`Error in denseBincount: input must be at most rank 2, but got rank ${o.rank}.`),M(n>=0,()=>`size must be non-negative, but got ${n}.`),M(s.size===o.size||s.size===0,()=>`Error in denseBincount: weights must have the same shape as x or 0-length, but got x shape: ${o.shape}, weights shape: ${s.shape}.`);const i={x:o,weights:s},a={size:n,binaryOutput:r};return H.runKernel(iA,i,a)}const nj=X({denseBincount_:dje});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fje(t,e,n="NHWC"){const r=j(t,"x","depthToSpace","float32"),o=n==="NHWC"?r.shape[1]:r.shape[2],s=n==="NHWC"?r.shape[2]:r.shape[3],i=n==="NHWC"?r.shape[3]:r.shape[1];M(e>1,()=>`blockSize should be > 1 for depthToSpace, but was: ${e}`),M(o*e>=0,()=>`Negative dimension size caused by overflow when multiplying
    ${o} and ${e}  for depthToSpace with input shape
    ${r.shape}`),M(s*e>=0,()=>`Negative dimension size caused by overflow when multiplying
    ${s} and ${e} for depthToSpace with input shape
        ${r.shape}`),M(i%(e*e)===0,()=>`Dimension size must be evenly divisible by ${e*e} but is ${i} for depthToSpace with input shape ${r.shape}`);const a={x:r},l={blockSize:e,dataFormat:n};return H.runKernel(aA,a,l)}const hje=X({depthToSpace_:fje});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pje(t,e,n,r,o="NHWC",s=[1,1],i){const a=j(t,"x","depthwiseConv2d","float32"),l=j(e,"filter","depthwiseConv2d","float32");let c=a,u=!1;a.rank===3&&(u=!0,c=q(a,[1,a.shape[0],a.shape[1],a.shape[2]])),M(c.rank===4,()=>`Error in depthwiseConv2d: input must be rank 4, but got rank ${c.rank}.`),M(l.rank===4,()=>`Error in depthwiseConv2d: filter must be rank 4, but got rank ${l.rank}.`);const d=o==="NHWC"?c.shape[3]:c.shape[1];M(d===l.shape[2],()=>`Error in depthwiseConv2d: number of input channels (${d}) must match the inChannels dimension in filter ${l.shape[2]}.`),Dr("depthwiseConv2d",r,i);const f={x:c,filter:l},h={strides:n,pad:r,dataFormat:o,dilations:s,dimRoundingMode:i},p=H.runKernel(Zw,f,h);return u?q(p,[p.shape[1],p.shape[2],p.shape[3]]):p}const WA=X({depthwiseConv2d_:pje});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mje(t,e,n,r,o=[1,1],s="NHWC"){const i=j(t,"x","dilation2d"),a=j(e,"filter","dilation2d");M(i.rank===3||i.rank===4,()=>`Error in dilation2d: input must be rank 3 or 4, but got rank ${i.rank}.`),M(a.rank===3,()=>`Error in dilation2d: filter must be rank 3, but got rank ${a.rank}.`),M(s==="NHWC",()=>`Error in dilation2d: Only NHWC is currently supported, but got dataFormat of ${s}`);let l=i,c=!1;i.rank===3&&(l=q(i,[1,i.shape[0],i.shape[1],i.shape[2]]),c=!0),M(l.shape[3]===a.shape[2],()=>`Error in dilation2d:  input and filter must have the same depth: ${l.shape[3]} vs ${a.shape[2]}`);const u={x:l,filter:a},d={strides:n,pad:r,dilations:o},f=H.runKernel(Jw,u,d);return c?q(f,[f.shape[1],f.shape[2],f.shape[3]]):f}const gje=X({dilation2d_:mje});/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pf(t,e){const n=t.length,r=[];for(let o=0;o<n;o++){const s=n-1-o,i=t[s]||1;(e[e.length-1-o]||1)>1&&i===1&&r.unshift(s)}return r}function xn(t,e){const n=[];for(let r=0;r<e.length;r++){const o=t[t.length-r-1],s=e.length-r-1,i=e[s];(o==null||o===1&&i>1)&&n.unshift(s)}return n}function Be(t,e){const n=Math.max(t.length,e.length),r=new Array(n);for(let o=0;o<n;o++){let s=t[t.length-o-1];s==null&&(s=1);let i=e[e.length-o-1];if(i==null&&(i=1),s===1)r[n-o-1]=i;else if(i===1)r[n-o-1]=s;else if(s!==i){const a=`Operands could not be broadcast together with shapes ${t} and ${e}.`;throw Error(a)}else r[n-o-1]=s}return r}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function yje(t,e){let n=j(t,"a","equal","string_or_numeric"),r=j(e,"b","equal","string_or_numeric");[n,r]=en(n,r),Be(n.shape,r.shape);const o={a:n,b:r};return H.runKernel(e1,o)}const pi=X({equal_:yje});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vje(t,e,n){const r=j(e,"a","where"),o=j(n,"b","where"),s=j(t,"condition","where","bool"),i=Be(Be(s.shape,r.shape),o.shape),a=hp(s,i),l=hp(r,i),c=hp(o,i),u={condition:a,t:l,e:c};return H.runKernel(A1,u)}const fr=X({where_:vje});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xje(t){const n={x:j(t,"x","zerosLike")};return H.runKernel(L1,n)}const rt=X({zerosLike_:xje});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bje(t,e){let n=j(t,"a","div"),r=j(e,"b","div");[n,r]=en(n,r);const o=Ae(n,r),s=rt(o),i=pi(r,s);return fr(i,s,o)}const wje=X({divNoNan_:bje});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Sje(t,e){const n=j(t,"t1","dot"),r=j(e,"t2","dot");M((n.rank===1||n.rank===2)&&(r.rank===1||r.rank===2),()=>`Error in dot: inputs must all be rank 1 or 2, but got ranks ${n.rank} and ${r.rank}.`);const o=n.rank===1?n.size:n.shape[1],s=r.rank===1?r.size:r.shape[0];if(M(o===s,()=>`Error in dot: inner dimensions of inputs must match, but got ${o} and ${s}.`),n.rank===1&&r.rank===1){const i=q(n,[1,-1]),a=q(r,[-1,1]),l=lt(i,a);return q(l,[])}else if(n.rank===1&&r.rank===2){const i=q(n,[1,-1]),a=q(r,[r.shape[0],r.shape[1]]),l=lt(i,a);return q(l,[l.size])}else if(n.rank===2&&r.rank===1){const i=q(r,[-1,1]),a=lt(n,i);return q(a,[a.size])}else{const i=q(r,[r.shape[0],r.shape[1]]);return lt(n,i)}}const Cje=X({dot_:Sje});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $je(t,...e){const n=e.map((o,s)=>j(o,`tensors${s}`,"einsum")),r={equation:t};return H.runKernel(uA,n,r)}const _h=X({einsum_:$je});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kje(t){const n={x:j(t,"x","elu","float32")};return H.runKernel(Ig,n)}const G1=X({elu_:kje});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Tje(t){let e=j(t,"x","erf");M(e.dtype==="int32"||e.dtype==="float32",()=>"Input dtype must be `int32` or `float32`."),e.dtype==="int32"&&(e=xe(e,"float32"));const n={x:e};return H.runKernel(Eg,n)}const Dq=X({erf_:Tje});/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function VA(t,e){for(let n=0;n<t.length;++n)if(t[t.length-n-1]!==e-1-n)return!1;return!0}function Mq(t,e,n){const r=t.length+e.length,o=[];let s=0,i=0;for(let a=0;a<r;a++)n.indexOf(a)===-1?o.push(t[s++]):o.push(e[i++]);return o}function On(t,e){const n=[],r=t.length;for(let s=0;s<r;s++)e.indexOf(s)===-1&&n.push(t[s]);const o=e.map(s=>t[s]);return[n,o]}function un(t,e){const n=e.map(r=>1);return Mq(t,n,e)}function jn(t,e,n){M(VA(e,n),()=>`${t} supports only inner-most axes for now. Got axes ${e} and rank-${n} input.`)}function Wt(t,e){if(VA(t,e))return null;const n=[];for(let r=0;r<e;++r)t.indexOf(r)===-1&&n.push(r);return t.forEach(r=>n.push(r)),n}function Ol(t){return t.map((e,n)=>[n,e]).sort((e,n)=>e[1]-n[1]).map(e=>e[0])}function nn(t,e){const n=[];for(let r=e-t;r<e;++r)n.push(r);return n}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ije(t,e=null,n=!1){const o={x:j(t,"x","max")},s={reductionIndices:e,keepDims:n};return H.runKernel(f1,o,s)}const Is=X({max_:Ije});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Eje(t,e=null,n=!1){const o={x:j(t,"x","min")},s={axis:e,keepDims:n};return H.runKernel(g1,o,s)}const Wb=X({min_:Eje});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Nje(t,e){let n=j(t,"base","pow"),r=j(e,"exp","pow");[n,r]=en(n,r);const o={a:n,b:r};return H.runKernel(Ug,o)}const Hc=X({pow_:Nje});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ct(t,e){if((qo(t)&&e!=="string"||Array.isArray(t))&&e!=="complex64")throw new Error("Error creating a new Scalar: value must be a primitive (number|boolean|string)");if(e==="string"&&qo(t)&&!(t instanceof Uint8Array))throw new Error("When making a scalar from encoded string, the value must be `Uint8Array`.");return z1(t,[],[],e)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Aje(t){const n={x:j(t,"x","sqrt","float32")};return H.runKernel(ny,n)}const Yn=X({sqrt_:Aje});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Oje(t){const e=j(t,"x","square"),n={};return H.runKernel("Square",{x:e},n)}const Et=X({square_:Oje});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Pje(t,e=null,n=!1){let r=j(t,"x","sum");r.dtype==="bool"&&(r=xe(r,"int32"));const o={x:r},s={axis:e,keepDims:n};return H.runKernel(P1,o,s)}const Ee=X({sum_:Pje});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Rje(t,e="euclidean",n=null,r=!1){t=j(t,"x","norm");const o=Fq(t,e,n);let s=o.shape;if(r){const i=He(n,t.shape);s=un(o.shape,i)}return q(o,s)}function Fq(t,e,n=null){if(t.rank===0)return ir(t);if(t.rank!==1&&n===null)return Fq(q(t,[-1]),e,n);if(t.rank===1||typeof n=="number"||Array.isArray(n)&&n.length===1){if(e===1)return Ee(ir(t),n);if(e===1/0)return Is(ir(t),n);if(e===-1/0)return Wb(ir(t),n);if(e==="euclidean"||e===2)return Yn(Ee(Hc(ir(t),ct(2,"int32")),n));throw new Error(`Error in norm: invalid ord value: ${e}`)}if(Array.isArray(n)&&n.length===2){if(e===1)return Is(Ee(ir(t),n[0]),n[1]-1);if(e===1/0)return Is(Ee(ir(t),n[1]),n[0]);if(e===-1/0)return Wb(Ee(ir(t),n[1]),n[0]);if(e==="fro"||e==="euclidean")return Yn(Ee(Et(t),n));throw new Error(`Error in norm: invalid ord value: ${e}`)}throw new Error(`Error in norm: invalid axis: ${n}`)}const H1=X({norm_:Rje});/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _je(t,e=null,n=!1){return H1(t,"euclidean",e,n)}const Dje=X({euclideanNorm_:_je});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Mje(t){const n={x:j(t,"x","exp")};return H.runKernel(Ng,n)}const mi=X({exp_:Mje});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Fje(t,e=0){const n=j(t,"x","expandDims","string_or_numeric");M(e<=n.rank,()=>"Axis must be <= rank of the tensor");const r={input:n},o={dim:e};return H.runKernel(t1,r,o)}const Cr=X({expandDims_:Fje});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Lje(t){const n={x:j(t,"x","expm1")};return H.runKernel(Ag,n)}const jje=X({expm1_:Lje});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Bje(t,e){const n=j(t,"x","tile","string_or_numeric");M(n.rank===e.length,()=>`Error in transpose: rank of input ${n.rank} must match length of reps ${e}.`);const r={x:n},o={reps:e};return H.runKernel(ay,r,o)}const Ss=X({tile_:Bje});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zje(t,e,n,r="float32"){e==null&&(e=t);const o=Ge([t,e],r),s=t<=e?t:e;for(let a=0;a<s;++a)o.set(1,a,a);const i=q(o.toTensor(),[t,e]);if(n==null)return i;if(n.length===1)return Ss(Cr(i,0),[n[0],1,1]);if(n.length===2)return Ss(Cr(Cr(i,0),0),[n[0],n[1],1,1]);if(n.length===3)return Ss(Cr(Cr(Cr(i,0),0),0),[n[0],n[1],n[2],1,1]);throw new Error(`eye() currently supports only 1D and 2D batchShapes, but received ${n.length}D.`)}const Lq=X({eye_:zje});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Wje(t){const n={x:j(t,"x","floor","float32")};return H.runKernel(Og,n)}const K1=X({floor_:Wje});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Vje(t,e,n=0,r=0){const o=j(t,"x","gather"),s=j(e,"indices","gather","int32"),i={x:o,indices:s},a={axis:n,batchDims:r};return H.runKernel(r1,i,a)}const UA=X({gather_:Vje});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Uje(t,e){let n=j(t,"a","greater","string_or_numeric"),r=j(e,"b","greater","string_or_numeric");[n,r]=en(n,r),Be(n.shape,r.shape);const o={a:n,b:r};return H.runKernel(o1,o)}const bo=X({greater_:Uje});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Gje(t,e){let n=j(t,"a","greaterEqual","string_or_numeric"),r=j(e,"b","greaterEqual","string_or_numeric");[n,r]=en(n,r),Be(n.shape,r.shape);const o={a:n,b:r};return H.runKernel(Rg,o)}const uu=X({greaterEqual_:Gje});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Hje(t){const n={input:j(t,"input","imag")};return H.runKernel(gA,n)}const GA=X({imag_:Hje});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Kje(t){const n={x:j(t,"x","isFinite")};return H.runKernel(Dg,n)}const qje=X({isFinite_:Kje});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Xje(t){const n={x:j(t,"x","isInf")};return H.runKernel(Mg,n)}const Yje=X({isInf_:Xje});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Qje(t){const n={x:j(t,"x","isNaN")};return H.runKernel(Fg,n)}const Zje=X({isNaN_:Qje});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Jje(t,e=.2){const r={x:j(t,"x","leakyRelu")},o={alpha:e};return H.runKernel(s1,r,o)}const HA=X({leakyRelu_:Jje});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function e3e(t,e){let n=j(t,"a","less","string_or_numeric"),r=j(e,"b","less","string_or_numeric");[n,r]=en(n,r),Be(n.shape,r.shape);const o={a:n,b:r};return H.runKernel(i1,o)}const Vb=X({less_:e3e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function t3e(t,e){let n=j(t,"a","lessEqual","string_or_numeric"),r=j(e,"b","lessEqual","string_or_numeric");[n,r]=en(n,r),Be(n.shape,r.shape);const o={a:n,b:r};return H.runKernel(a1,o)}const Yf=X({lessEqual_:t3e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function n3e(t,e=5,n=1,r=1,o=.5){const s=j(t,"x","localResponseNormalization");M(s.rank===4||s.rank===3,()=>`Error in localResponseNormalization: x must be rank 3 or 4 but got
               rank ${s.rank}.`),M(uf(e),()=>`Error in localResponseNormalization: depthRadius must be an integer but got depthRadius ${e}.`);let i=s,a=!1;s.rank===3&&(a=!0,i=q(s,[1,s.shape[0],s.shape[1],s.shape[2]]));const l={x:i},c={depthRadius:e,bias:n,alpha:r,beta:o},u=H.runKernel(d1,l,c);return a?q(u,[u.shape[1],u.shape[2],u.shape[3]]):u}const r3e=X({localResponseNormalization_:n3e});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function o3e(t){const n={x:j(t,"x","log","float32")};return H.runKernel(Lg,n)}const gi=X({log_:o3e});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function s3e(t){const n={x:j(t,"x","log1p")};return H.runKernel(jg,n)}const jq=X({log1p_:s3e});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function i3e(t,e){M(aI(t),()=>"The f passed in variableGrads(f) must be a function"),M(e==null||Array.isArray(e)&&e.every(c=>c instanceof zb),()=>"The varList passed in variableGrads(f, varList) must be an array of variables");const n=e!=null;if(!n){e=[];for(const c in H.registeredVariables)e.push(H.registeredVariables[c])}const r=n?e.filter(c=>!c.trainable):null,o=e.length;e=e.filter(c=>c.trainable),M(e.length>0,()=>`variableGrads() expects at least one of the input variables to be trainable, but none of the ${o} variables is trainable.`);const s=!0,{value:i,grads:a}=H.gradients(t,e,null,s);M(a.some(c=>c!=null),()=>"Cannot find a connection between any variable and the result of the loss function y=f(x). Please make sure the operations that use variables are inside the function f passed to minimize()."),M(i.rank===0,()=>`The f passed in variableGrads(f) must return a scalar, but it returned a rank-${i.rank} tensor`);const l={};return e.forEach((c,u)=>{a[u]!=null&&(l[c.name]=a[u])}),r!=null&&r.forEach(c=>l[c.name]=null),{value:i,grads:l}}function mf(t){return H.customGrad(t)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function a3e(t){const n={x:j(t,"x","neg")};return H.runKernel(v1,n)}const Zt=X({neg_:a3e});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function l3e(t){const n={x:j(t,"x","softplus")};return H.runKernel(ty,n)}const uy=X({softplus_:l3e});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function c3e(t){const e=j(t,"x","logSigmoid");return mf(r=>({value:Zt(uy(Zt(r))),gradFunc:i=>U(i,Xf(Zt(r)))}))(e)}const u3e=X({logSigmoid_:c3e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function d3e(t,e){let n=j(t,"a","sub"),r=j(e,"b","sub");[n,r]=en(n,r);const o={a:n,b:r};return H.runKernel(oy,o)}const _e=X({sub_:d3e});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function f3e(t,e=-1){const n=j(t,"logits","logSoftmax");if(e===-1&&(e=n.rank-1),e!==n.rank-1)throw Error(`Log Softmax along a non-last dimension is not yet supported. Logits was rank ${n.rank} and axis was ${e}`);return mf((o,s)=>{const a=Is(o,e,!0),l=_e(o,a),c=_e(xe(l,"float32"),gi(Ee(mi(l),e,!0)));return s([c]),{value:c,gradFunc:(d,f)=>{const[h]=f,p=!0,m=mi(h);return _e(d,U(Ee(d,e,p),m))}}})(n)}const Bq=X({logSoftmax_:f3e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function h3e(t,e=null,n=!1){const r=j(t,"x","logSumExp"),o=He(e,r.shape),s=Is(r,o,!0),i=_e(r,s),a=mi(i),l=Ee(a,o),c=gi(l),u=de(q(s,c.shape),c);if(n){const d=un(u.shape,o);return q(u,d)}return u}const zq=X({logSumExp_:h3e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function p3e(t,e){const n=j(t,"a","logicalAnd","bool"),r=j(e,"b","logicalAnd","bool");Be(n.shape,r.shape);const o={a:n,b:r};return H.runKernel(l1,o)}const ta=X({logicalAnd_:p3e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function m3e(t){const n={x:j(t,"x","logicalNot","bool")};return H.runKernel(c1,n)}const KA=X({logicalNot_:m3e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function g3e(t,e){const n=j(t,"a","logicalOr","bool"),r=j(e,"b","logicalOr","bool");Be(n.shape,r.shape);const o={a:n,b:r};return H.runKernel(u1,o)}const Wq=X({logicalOr_:g3e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function y3e(t,e){const n=j(t,"a","logicalXor","bool"),r=j(e,"b","logicalXor","bool");return Be(n.shape,r.shape),ta(Wq(t,e),KA(ta(t,e)))}const v3e=X({logicalXor_:y3e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function x3e(t,e,n,r,o){const s=j(t,"x","maxPool"),i=1;let a=s,l=!1;s.rank===3&&(l=!0,a=q(s,[1,s.shape[0],s.shape[1],s.shape[2]])),M(a.rank===4,()=>`Error in maxPool: input must be rank 4 but got rank ${a.rank}.`),M(Qn(n,i),()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${n} and dilations '${i}'`),Dr("maxPool",r,o);const c={x:a},u={filterSize:e,strides:n,pad:r,dimRoundingMode:o},d=H.runKernel(h1,c,u);return l?q(d,[d.shape[1],d.shape[2],d.shape[3]]):d}const qA=X({maxPool_:x3e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function b3e(t,e=[1,1,1],n,r,o,s="NDHWC"){const i=j(t,"x","maxPool3d");let a=i,l=!1;i.rank===4&&(l=!0,a=q(i,[1,i.shape[0],i.shape[1],i.shape[2],i.shape[3]])),M(a.rank===5,()=>`Error in maxPool3d: x must be rank 5 but got rank ${a.rank}.`),M(s==="NDHWC",()=>`Error in maxPool3d: Only NDHWC is currently supported, but got dataFormat of ${s}`),Dr("maxPool3d",r,o);const c={x:a},u={filterSize:e,strides:n,pad:r,dimRoundingMode:o,dataFormat:s},d=H.runKernel(p1,c,u);return l?q(d,[d.shape[1],d.shape[2],d.shape[3],d.shape[4]]):d}const w3e=X({maxPool3d_:b3e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function S3e(t,e){let n=j(t,"a","maximum"),r=j(e,"b","maximum");[n,r]=en(n,r),n.dtype==="bool"&&(n=xe(n,"int32"),r=xe(r,"int32")),Be(n.shape,r.shape);const o={a:n,b:r};return H.runKernel(Bg,o)}const Pl=X({maximum_:S3e});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function C3e(t,e=null,n=!1){const o={x:j(t,"x","mean")},s={axis:e,keepDims:n};return H.runKernel(m1,o,s)}const cn=X({mean_:C3e});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kn(t,e="float32"){if(ca(t),e==="complex64"){const r=kn(t,"float32"),o=kn(t,"float32");return hf(r,o)}const n=Xn(ne(t),e);return H.makeTensor(n,t,e)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Rl(t,e="float32"){if(ca(t),e==="complex64"){const r=Rl(t,"float32"),o=kn(t,"float32");return hf(r,o)}const n=U2(ne(t),e);return H.makeTensor(n,t,e)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $3e(t,e){let n=j(t,"a","minimum"),r=j(e,"b","minimum");[n,r]=en(n,r),n.dtype==="bool"&&(n=xe(n,"int32"),r=xe(r,"int32")),Be(n.shape,r.shape);const o={a:n,b:r};return H.runKernel(zg,o)}const Em=X({minimum_:$3e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function k3e(t,e,n){M(n==="reflect"||n==="symmetric",()=>`Invalid mode. Mode must be either reflect or symmetric. Got ${n}.`);const r=j(t,"x","mirrorPad");if(r.rank===0)throw new Error("mirrorPad(scalar) is not defined. Pass non-scalar to mirrorPad");M(e.length===r.rank,()=>`Padding doesn't match input. Must be ${r.rank}. Got ${e.length}.`);const o=n==="reflect"?1:0;for(let a=0;a<r.rank;a++)M(e[a].length===2,()=>"Invalid number of paddings. Must be length of 2 each."),M(e[a][0]>=0&&e[a][0]<=r.shape[a]-o&&e[a][1]>=0&&e[a][1]<=r.shape[a]-o,()=>`Padding in dimension ${a} cannot be greater than or equal to ${r.shape[a]-o} or less than 0 for input of shape ${r.shape}`);const s={paddings:e,mode:n},i={x:r};return H.runKernel(y1,i,s)}const T3e=X({mirrorPad_:k3e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function I3e(t,e){let n=j(t,"a","mod"),r=j(e,"b","mod");[n,r]=en(n,r);const o={a:n,b:r};return H.runKernel(Wg,o)}const E3e=X({mod_:I3e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function N3e(t,e=null,n=!1){t=j(t,"x","moments");const r=He(e,t.shape),o=cn(t,r,n);let s=o.shape;n||(s=un(o.shape,r));const i=Et(_e(xe(t,"float32"),q(o,s))),a=cn(i,r,n);return{mean:o,variance:a}}const XA=X({moments_:N3e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function A3e(t,e){let n=j(t,"a","notEqual","string_or_numeric"),r=j(e,"b","notEqual","string_or_numeric");[n,r]=en(n,r),Be(n.shape,r.shape);const o={a:n,b:r};return H.runKernel(x1,o)}const Ub=X({notEqual_:A3e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function O3e(t,e,n=1,r=0,o="int32"){if(e<2)throw new Error(`Error in oneHot: depth must be >=2, but it is ${e}`);const i={indices:j(t,"indices","oneHot","int32")},a={dtype:o,depth:e,onValue:n,offValue:r};return H.runKernel(w1,i,a)}const Vq=X({oneHot_:O3e});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function P3e(t){const n={x:j(t,"x","onesLike")};return H.runKernel(b1,n)}const Xo=X({onesLike_:P3e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function R3e(t,e,n=0){const r=j(t,"x","pad");if(r.rank===0)throw new Error("pad(scalar) is not defined. Pass non-scalar to pad");const o={paddings:e,constantValue:n},s={x:r};return H.runKernel(C1,s,o)}const YA=X({pad_:R3e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _3e(t,e,n){const r=j(t,"x","spaceToBatchND");M(r.rank>=1+e.length,()=>`input rank ${r.rank} should be > than [blockShape] ${e.length}`),M(n.length===e.length,()=>`paddings.shape[0] ${n.length} must be equal to [blockShape] ${e.length}`),M(r.shape.reduce((i,a,l)=>l>0&&l<=e.length?i&&(a+n[l-1][0]+n[l-1][1])%e[l-1]===0:i,!0),()=>`input spatial dimensions ${r.shape.slice(1)} with paddings ${n.toString()} must be divisible by blockShapes ${e.toString()}`);const o={x:r},s={blockShape:e,paddings:n};return H.runKernel(R1,o,s)}const QA=X({spaceToBatchND_:_3e});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function D3e(t,e,n,r,o,s,i){o==null&&(o=[1,1]),s==null&&(s=1),r===0&&(r="valid");const a=j(t,"x","maxPool");let l=a,c=!1;a.rank===3&&(c=!0,l=q(a,[1,a.shape[0],a.shape[1],a.shape[2]])),M(Qn(s,o),()=>`Error in pool: Either strides or dilations must be 1. Got strides ${s} and dilations '${o}'`);const u=Jo(l.shape,e,s,o,r),d=[u.dilationHeight,u.dilationWidth];let f;r==="same"?f=F3e([u.filterHeight,u.filterWidth],d):f=[[0,0],[0,0]];const h=d[0]===1&&d[1]===1,[p,m]=M3e([u.inHeight,u.inWidth],d,f),g=h?r:"valid",y=h?l:QA(l,d,p),x=(n==="avg"?()=>LA(y,e,s,g,i):()=>qA(y,e,s,g,i))(),b=h?x:jA(x,d,m);return c?q(b,[b.shape[1],b.shape[2],b.shape[3]]):b}function M3e(t,e,n){const r=n.map(u=>u[0]),o=n.map(u=>u[1]),s=t.concat(r,o),i=e.map((u,d)=>(u-s[d]%u)%u),a=o.map((u,d)=>u+i[d]),l=e.map((u,d)=>[r[d],a[d]]),c=e.map((u,d)=>[0,i[d]]);return[l,c]}function F3e(t,e){const r=t.map((i,a)=>i+(i-1)*(e[a]-1)).map(i=>i-1),o=r.map(i=>Math.floor(i/2)),s=r.map((i,a)=>i-o[a]);return r.map((i,a)=>[o[a],s[a]])}const L3e=X({pool_:D3e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function j3e(t,e){const n=j(t,"x","prelu"),r=j(e,"alpha","prelu"),o={x:n,alpha:r};return H.runKernel($1,o)}const ZA=X({prelu_:j3e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function B3e(t,e=null,n=!1){let r=j(t,"x","prod");r.dtype==="bool"&&(r=xe(r,"int32"));const o={x:r},s={axis:e,keepDims:n};return H.runKernel(k1,o,s)}const z3e=X({prod_:B3e});var JA={exports:{}};JA.exports;(function(t){(function(e,n,r){function o(l){var c=this,u=a();c.next=function(){var d=2091639*c.s0+c.c*23283064365386963e-26;return c.s0=c.s1,c.s1=c.s2,c.s2=d-(c.c=d|0)},c.c=1,c.s0=u(" "),c.s1=u(" "),c.s2=u(" "),c.s0-=u(l),c.s0<0&&(c.s0+=1),c.s1-=u(l),c.s1<0&&(c.s1+=1),c.s2-=u(l),c.s2<0&&(c.s2+=1),u=null}function s(l,c){return c.c=l.c,c.s0=l.s0,c.s1=l.s1,c.s2=l.s2,c}function i(l,c){var u=new o(l),d=c&&c.state,f=u.next;return f.int32=function(){return u.next()*4294967296|0},f.double=function(){return f()+(f()*2097152|0)*11102230246251565e-32},f.quick=f,d&&(typeof d=="object"&&s(d,u),f.state=function(){return s(u,{})}),f}function a(){var l=4022871197,c=function(u){u=String(u);for(var d=0;d<u.length;d++){l+=u.charCodeAt(d);var f=.02519603282416938*l;l=f>>>0,f-=l,f*=l,l=f>>>0,f-=l,l+=f*4294967296}return(l>>>0)*23283064365386963e-26};return c}n&&n.exports?n.exports=i:this.alea=i})(xs,t)})(JA);var W3e=JA.exports,eO={exports:{}};eO.exports;(function(t){(function(e,n,r){function o(a){var l=this,c="";l.x=0,l.y=0,l.z=0,l.w=0,l.next=function(){var d=l.x^l.x<<11;return l.x=l.y,l.y=l.z,l.z=l.w,l.w^=l.w>>>19^d^d>>>8},a===(a|0)?l.x=a:c+=a;for(var u=0;u<c.length+64;u++)l.x^=c.charCodeAt(u)|0,l.next()}function s(a,l){return l.x=a.x,l.y=a.y,l.z=a.z,l.w=a.w,l}function i(a,l){var c=new o(a),u=l&&l.state,d=function(){return(c.next()>>>0)/4294967296};return d.double=function(){do var f=c.next()>>>11,h=(c.next()>>>0)/4294967296,p=(f+h)/(1<<21);while(p===0);return p},d.int32=c.next,d.quick=d,u&&(typeof u=="object"&&s(u,c),d.state=function(){return s(c,{})}),d}n&&n.exports?n.exports=i:this.xor128=i})(xs,t)})(eO);var V3e=eO.exports,tO={exports:{}};tO.exports;(function(t){(function(e,n,r){function o(a){var l=this,c="";l.next=function(){var d=l.x^l.x>>>2;return l.x=l.y,l.y=l.z,l.z=l.w,l.w=l.v,(l.d=l.d+362437|0)+(l.v=l.v^l.v<<4^(d^d<<1))|0},l.x=0,l.y=0,l.z=0,l.w=0,l.v=0,a===(a|0)?l.x=a:c+=a;for(var u=0;u<c.length+64;u++)l.x^=c.charCodeAt(u)|0,u==c.length&&(l.d=l.x<<10^l.x>>>4),l.next()}function s(a,l){return l.x=a.x,l.y=a.y,l.z=a.z,l.w=a.w,l.v=a.v,l.d=a.d,l}function i(a,l){var c=new o(a),u=l&&l.state,d=function(){return(c.next()>>>0)/4294967296};return d.double=function(){do var f=c.next()>>>11,h=(c.next()>>>0)/4294967296,p=(f+h)/(1<<21);while(p===0);return p},d.int32=c.next,d.quick=d,u&&(typeof u=="object"&&s(u,c),d.state=function(){return s(c,{})}),d}n&&n.exports?n.exports=i:this.xorwow=i})(xs,t)})(tO);var U3e=tO.exports,nO={exports:{}};nO.exports;(function(t){(function(e,n,r){function o(a){var l=this;l.next=function(){var u=l.x,d=l.i,f,h;return f=u[d],f^=f>>>7,h=f^f<<24,f=u[d+1&7],h^=f^f>>>10,f=u[d+3&7],h^=f^f>>>3,f=u[d+4&7],h^=f^f<<7,f=u[d+7&7],f=f^f<<13,h^=f^f<<9,u[d]=h,l.i=d+1&7,h};function c(u,d){var f,h=[];if(d===(d|0))h[0]=d;else for(d=""+d,f=0;f<d.length;++f)h[f&7]=h[f&7]<<15^d.charCodeAt(f)+h[f+1&7]<<13;for(;h.length<8;)h.push(0);for(f=0;f<8&&h[f]===0;++f);for(f==8?h[7]=-1:h[f],u.x=h,u.i=0,f=256;f>0;--f)u.next()}c(l,a)}function s(a,l){return l.x=a.x.slice(),l.i=a.i,l}function i(a,l){a==null&&(a=+new Date);var c=new o(a),u=l&&l.state,d=function(){return(c.next()>>>0)/4294967296};return d.double=function(){do var f=c.next()>>>11,h=(c.next()>>>0)/4294967296,p=(f+h)/(1<<21);while(p===0);return p},d.int32=c.next,d.quick=d,u&&(u.x&&s(u,c),d.state=function(){return s(c,{})}),d}n&&n.exports?n.exports=i:this.xorshift7=i})(xs,t)})(nO);var G3e=nO.exports,rO={exports:{}};rO.exports;(function(t){(function(e,n,r){function o(a){var l=this;l.next=function(){var u=l.w,d=l.X,f=l.i,h,p;return l.w=u=u+1640531527|0,p=d[f+34&127],h=d[f=f+1&127],p^=p<<13,h^=h<<17,p^=p>>>15,h^=h>>>12,p=d[f]=p^h,l.i=f,p+(u^u>>>16)|0};function c(u,d){var f,h,p,m,g,y=[],v=128;for(d===(d|0)?(h=d,d=null):(d=d+"\0",h=0,v=Math.max(v,d.length)),p=0,m=-32;m<v;++m)d&&(h^=d.charCodeAt((m+32)%d.length)),m===0&&(g=h),h^=h<<10,h^=h>>>15,h^=h<<4,h^=h>>>13,m>=0&&(g=g+1640531527|0,f=y[m&127]^=h+g,p=f==0?p+1:0);for(p>=128&&(y[(d&&d.length||0)&127]=-1),p=127,m=4*128;m>0;--m)h=y[p+34&127],f=y[p=p+1&127],h^=h<<13,f^=f<<17,h^=h>>>15,f^=f>>>12,y[p]=h^f;u.w=g,u.X=y,u.i=p}c(l,a)}function s(a,l){return l.i=a.i,l.w=a.w,l.X=a.X.slice(),l}function i(a,l){a==null&&(a=+new Date);var c=new o(a),u=l&&l.state,d=function(){return(c.next()>>>0)/4294967296};return d.double=function(){do var f=c.next()>>>11,h=(c.next()>>>0)/4294967296,p=(f+h)/(1<<21);while(p===0);return p},d.int32=c.next,d.quick=d,u&&(u.X&&s(u,c),d.state=function(){return s(c,{})}),d}n&&n.exports?n.exports=i:this.xor4096=i})(xs,t)})(rO);var H3e=rO.exports,oO={exports:{}};oO.exports;(function(t){(function(e,n,r){function o(a){var l=this,c="";l.next=function(){var d=l.b,f=l.c,h=l.d,p=l.a;return d=d<<25^d>>>7^f,f=f-h|0,h=h<<24^h>>>8^p,p=p-d|0,l.b=d=d<<20^d>>>12^f,l.c=f=f-h|0,l.d=h<<16^f>>>16^p,l.a=p-d|0},l.a=0,l.b=0,l.c=-1640531527,l.d=1367130551,a===Math.floor(a)?(l.a=a/4294967296|0,l.b=a|0):c+=a;for(var u=0;u<c.length+20;u++)l.b^=c.charCodeAt(u)|0,l.next()}function s(a,l){return l.a=a.a,l.b=a.b,l.c=a.c,l.d=a.d,l}function i(a,l){var c=new o(a),u=l&&l.state,d=function(){return(c.next()>>>0)/4294967296};return d.double=function(){do var f=c.next()>>>11,h=(c.next()>>>0)/4294967296,p=(f+h)/(1<<21);while(p===0);return p},d.int32=c.next,d.quick=d,u&&(typeof u=="object"&&s(u,c),d.state=function(){return s(c,{})}),d}n&&n.exports?n.exports=i:this.tychei=i})(xs,t)})(oO);var K3e=oO.exports,Uq={exports:{}};const q3e={},X3e=Object.freeze(Object.defineProperty({__proto__:null,default:q3e},Symbol.toStringTag,{value:"Module"})),Y3e=hQ(X3e);(function(t){(function(e,n,r){var o=256,s=6,i=52,a="random",l=r.pow(o,s),c=r.pow(2,i),u=c*2,d=o-1,f;function h(b,w,C){var $=[];w=w==!0?{entropy:!0}:w||{};var T=y(g(w.entropy?[b,x(n)]:b??v(),3),$),I=new p($),E=function(){for(var N=I.g(s),A=l,R=0;N<c;)N=(N+R)*o,A*=o,R=I.g(1);for(;N>=u;)N/=2,A/=2,R>>>=1;return(N+R)/A};return E.int32=function(){return I.g(4)|0},E.quick=function(){return I.g(4)/4294967296},E.double=E,y(x(I.S),n),(w.pass||C||function(N,A,R,P){return P&&(P.S&&m(P,I),N.state=function(){return m(I,{})}),R?(r[a]=N,A):N})(E,T,"global"in w?w.global:this==r,w.state)}function p(b){var w,C=b.length,$=this,T=0,I=$.i=$.j=0,E=$.S=[];for(C||(b=[C++]);T<o;)E[T]=T++;for(T=0;T<o;T++)E[T]=E[I=d&I+b[T%C]+(w=E[T])],E[I]=w;($.g=function(N){for(var A,R=0,P=$.i,F=$.j,_=$.S;N--;)A=_[P=d&P+1],R=R*o+_[d&(_[P]=_[F=d&F+A])+(_[F]=A)];return $.i=P,$.j=F,R})(o)}function m(b,w){return w.i=b.i,w.j=b.j,w.S=b.S.slice(),w}function g(b,w){var C=[],$=typeof b,T;if(w&&$=="object")for(T in b)try{C.push(g(b[T],w-1))}catch{}return C.length?C:$=="string"?b:b+"\0"}function y(b,w){for(var C=b+"",$,T=0;T<C.length;)w[d&T]=d&($^=w[d&T]*19)+C.charCodeAt(T++);return x(w)}function v(){try{var b;return f&&(b=f.randomBytes)?b=b(o):(b=new Uint8Array(o),(e.crypto||e.msCrypto).getRandomValues(b)),x(b)}catch{var w=e.navigator,C=w&&w.plugins;return[+new Date,e,C,e.screen,x(n)]}}function x(b){return String.fromCharCode.apply(0,b)}if(y(r.random(),n),t.exports){t.exports=h;try{f=Y3e}catch{}}else r["seed"+a]=h})(typeof self<"u"?self:xs,[],Math)})(Uq);var Q3e=Uq.exports,Z3e=W3e,J3e=V3e,eBe=U3e,tBe=G3e,nBe=H3e,rBe=K3e,du=Q3e;du.alea=Z3e;du.xor128=J3e;du.xorwow=eBe;du.xorshift7=tBe;du.xor4096=nBe;du.tychei=rBe;var sO=du;/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Gq{constructor(e,n,r,o,s){this.mean=e,this.stdDev=n,this.dtype=r,this.nextVal=NaN,this.truncated=o,this.truncated&&(this.upper=this.mean+this.stdDev*2,this.lower=this.mean-this.stdDev*2);const i=s||Math.random();this.random=sO.alea(i.toString())}nextValue(){if(!isNaN(this.nextVal)){const o=this.nextVal;return this.nextVal=NaN,o}let e,n,r=!1;for(;!r;){let o,s,i;do o=2*this.random()-1,s=2*this.random()-1,i=o*o+s*s;while(i>=1||i===0);const a=Math.sqrt(-2*Math.log(i)/i);e=this.mean+this.stdDev*o*a,n=this.mean+this.stdDev*s*a,(!this.truncated||this.isValidTruncated(e))&&(r=!0)}return(!this.truncated||this.isValidTruncated(n))&&(this.nextVal=this.convertValue(n)),this.convertValue(e)}convertValue(e){return this.dtype==null||this.dtype==="float32"?e:Math.round(e)}isValidTruncated(e){return e<=this.upper&&e>=this.lower}}class oBe{constructor(e=0,n=1,r,o){if(this.canReturnFloat=()=>this.dtype==null||this.dtype==="float32",this.min=e,this.range=n-e,this.dtype=r,o==null&&(o=Math.random()),typeof o=="number"&&(o=o.toString()),!this.canReturnFloat()&&this.range<=1)throw new Error(`The difference between ${e} - ${n} <= 1 and dtype is not float`);this.random=sO.alea(o)}convertValue(e){return this.canReturnFloat()?e:Math.round(e)}nextValue(){return this.convertValue(this.min+this.range*this.random())}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sBe(t,e=0,n=1,r,o){if(ca(t),r!=null&&r==="bool")throw new Error(`Unsupported data type ${r}`);const s=new Gq(e,n,r,!1,o),i=Ge(t,r);for(let a=0;a<i.values.length;a++)i.values[a]=s.nextValue();return i.toTensor()}const iBe=X({randomNormal_:sBe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function aBe(t,e=0,n=1,r="float32",o){ca(t);const s=Ge(t,r),i=new oBe(e,n,null,o);for(let a=0;a<s.values.length;a++)s.values[a]=i.nextValue();return s.toTensor()}const dy=X({randomUniform_:aBe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Nm(t,e,n=1,r="float32"){if(n===0)throw new Error("Cannot have a step of zero");const o={start:t,stop:e,step:n,dtype:r};return H.runKernel(CA,{},o)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lBe(t){const n={input:j(t,"input","real")};return H.runKernel($A,n)}const Gb=X({real_:lBe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cBe(t){const n={x:j(t,"x","reciprocal")};return H.runKernel(Gg,n)}const uBe=X({reciprocal_:cBe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dBe(t){const n={x:j(t,"x","relu")};return H.runKernel(Hg,n)}const fu=X({relu_:dBe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fBe(t){const n={x:j(t,"x","relu6")};return H.runKernel(Kg,n)}const Hq=X({relu6_:fBe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hBe(t,e){const r={x:j(t,"x","reverse")},o={dims:e};return H.runKernel(N1,r,o)}const Kc=X({reverse_:hBe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pBe(t){const n={x:j(t,"x","round")};return H.runKernel(qg,n)}const Kq=X({round_:pBe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mBe(t){const n={x:j(t,"x","rsqrt","float32")};return H.runKernel(Xg,n)}const qq=X({rsqrt_:mBe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gBe(t){const n={x:j(t,"x","selu")};return H.runKernel(Yg,n)}const Xq=X({selu_:gBe});function yBe(t,e,n,r,o,s=[1,1],i="NHWC"){const a=j(t,"x","separableConv2d"),l=j(e,"depthwiseFilter","separableConv2d"),c=j(n,"pointwiseFilter","separableConv2d");let u=a,d=!1;if(a.rank===3&&(d=!0,u=q(a,[1,a.shape[0],a.shape[1],a.shape[2]])),i==="NCHW")throw new Error("separableConv2d currently does not support dataFormat NCHW; only NHWC is supported");M(u.rank===4,()=>`Error in separableConv2d: input must be rank 4, but got rank ${u.rank}.`),M(l.rank===4,()=>`Error in separableConv2d: depthwise filter must be rank 4, but got rank ${l.rank}.`),M(c.rank===4,()=>`Error in separableConv2d: pointwise filter must be rank 4, but got rank ${l.rank}.`),M(c.shape[0]===1,()=>`Error in separableConv2d: the first dimension of pointwise filter  must be 1, but got ${c.shape[0]}.`),M(c.shape[1]===1,()=>`Error in separableConv2d: the second dimension of pointwise filter must be 1, but got ${c.shape[1]}.`);const f=l.shape[2],h=l.shape[3];M(c.shape[2]===f*h,()=>`Error in separableConv2d: the third dimension of pointwise filter must be ${f*h}, but got ${c.shape[2]}.`);const p=WA(u,l,r,o,i,s),g=Gc(p,c,1,"valid",i);return d?q(g,[g.shape[1],g.shape[2],g.shape[3]]):g}const Yq=X({separableConv2d_:yBe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vBe(t){const n={x:j(t,"x","sign")};return H.runKernel(Jg,n)}const xBe=X({sign_:vBe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bBe(t){const n={x:j(t,"x","sin","float32")};return H.runKernel(Qg,n)}const Qq=X({sin_:bBe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function wBe(t){const n={x:j(t,"x","sinh")};return H.runKernel(Zg,n)}const Zq=X({sinh_:wBe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function SBe(t,e,n){const r=j(t,"x","slice1d");return M(r.rank===1,()=>`slice1d expects a rank-1 tensor, but got a rank-${r.rank} tensor`),Ct(r,[e],[n])}const iO=X({slice1d_:SBe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function CBe(t,e,n){const r=j(t,"x","slice2d");return M(r.rank===2,()=>`slice2d expects a rank-2 tensor, but got a rank-${r.rank} tensor`),Ct(r,e,n)}const Jq=X({slice2d_:CBe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $Be(t,e,n){const r=j(t,"x","slice3d");return M(r.rank===3,()=>`slice3d expects a rank-3 tensor, but got a rank-${r.rank} tensor`),Ct(r,e,n)}const aO=X({slice3d_:$Be});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kBe(t,e,n){const r=j(t,"x","slice4d");return M(r.rank===4,()=>`slice4d expects a rank-4 tensor, but got a rank-${r.rank} tensor`),Ct(r,e,n)}const Hb=X({slice4d_:kBe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function TBe(t,e=-1){const n=j(t,"logits","softmax","float32");if(e===-1&&(e=n.rank-1),e!==n.rank-1)throw Error(`Softmax along a non-last dimension is not yet supported. Logits was rank ${n.rank} and dim was ${e}`);const r={logits:n},o={dim:e};return H.runKernel(D1,r,o)}const lO=X({softmax_:TBe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function IBe(t){M(t.dtype==="complex64",()=>`The dtype for tf.spectral.fft() must be complex64 but got ${t.dtype}.`);const e={input:t};return H.runKernel(fA,e)}const e8=X({fft_:IBe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function EBe(t){M(t.dtype==="complex64",()=>`The dtype for tf.spectral.ifft() must be complex64 but got ${t.dtype}.`);const e={input:t};return H.runKernel(mA,e)}const $I=X({ifft_:EBe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function NBe(t){const e=t.shape[t.shape.length-1],n=t.size/e;let r;if(e<=2){const o=q(t,[n,e]);r=$I(o)}else{const o=[n,2*(e-1)],s=q(Gb(t),[n,e]),i=q(GA(t),[n,e]),a=Kc(Ct(s,[0,1],[n,e-2]),1),l=U(Kc(Ct(i,[0,1],[n,e-2]),1),ct(-1)),c=Nr([s,a],1),u=Nr([i,l],1),d=q(hf(c,u),[o[0],o[1]]);r=$I(d)}if(r=Gb(r),t.rank===3&&t.shape[0]!==0){const o=r,s=t.shape[0];r=q(r,[s,r.shape[0]/s,r.shape[1]]),o.dispose()}return r}const ABe=X({irfft_:NBe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function OBe(t,e,n=0){const o={x:j(t,"x","split")},s={numOrSizeSplits:e,axis:n};return H.runKernel(_1,o,s)}const po=X({split_:OBe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function PBe(t,e){M(t.dtype==="float32",()=>`The dtype for rfft() must be real value but got ${t.dtype}`);let n=t.shape[t.shape.length-1];const r=t.size/n;let o;if(e!=null&&e<n){const p=t.shape.map(g=>0),m=t.shape.map(g=>g);m[t.shape.length-1]=e,o=Ct(t,p,m),n=e}else if(e!=null&&e>n){const p=t.shape.map(m=>m);p[t.shape.length-1]=e-n,o=Nr([t,kn(p)],t.shape.length-1),n=e}else o=t;const s=rt(o),i=q(hf(o,s),[r,n]),a=e8(i),l=Math.floor(n/2)+1,c=Gb(a),u=GA(a),d=po(c,[l,n-l],c.shape.length-1),f=po(u,[l,n-l],u.shape.length-1),h=o.shape.slice();return h[o.shape.length-1]=l,q(hf(d[0],f[0]),h)}const RBe=X({rfft_:PBe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _Be(t,e){let n=j(t,"a","squaredDifference"),r=j(e,"b","squaredDifference");[n,r]=en(n,r),Be(n.shape,r.shape);const o={a:n,b:r},s={};return H.runKernel(ry,o,s)}const DBe=X({squaredDifference_:_Be});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function MBe(t,e){const n=j(t,"x","squeeze","string_or_numeric");return q(n,El(n.shape,e).newShape)}const fy=X({squeeze_:MBe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function FBe(t,e=0){const n=vq(t,"tensors","stack","string_or_numeric");M(n.length>=1,()=>"Pass at least one tensor to tf.stack"),n.length>0&&M(e<=n[0].rank,()=>"Axis must be <= rank of the tensor");const r=n,o={axis:e};return H.runKernel(S1,r,o)}const na=X({stack_:FBe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function LBe(t,e=0){const r={x:j(t,"x","step")},o={alpha:e};return H.runKernel(ly,r,o)}const hy=X({step_:LBe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function jBe(t,e,n,r,o=0,s=0,i=0,a=0,l=0){const u={x:j(t,"x","stridedSlice","string_or_numeric")},d={begin:e,end:n,strides:r,beginMask:o,endMask:s,ellipsisMask:i,newAxisMask:a,shrinkAxisMask:l};return H.runKernel(NA,u,d)}const BBe=X({stridedSlice_:jBe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zBe(t){const n={x:j(t,"x","tan","float32")};return H.runKernel(sy,n)}const WBe=X({tan_:zBe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Hr(t,e){$K(t);const n=B1(t,e);if(n.length!==1)throw new Error("tensor1d() requires values to be a flat/TypedArray");return z1(t,null,n,e)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zC(t,e,n){if($K(t),e!=null&&e.length!==2)throw new Error("tensor2d() requires shape to have two numbers");const r=B1(t,n);if(r.length!==2&&r.length!==1)throw new Error("tensor2d() requires values to be number[][] or flat/TypedArray");if(r.length===1&&e==null)throw new Error("tensor2d() requires shape to be provided when `values` are a flat/TypedArray");return z1(t,e,r,n)}function t8(t,e,n){const r=e.rank>1?e.shape[e.rank-1]:1,o=e.rank>1?e.rank-1:1,s=`Must have updates.shape = indices.shape[:batchDim] + shape[sliceDim:], got updates.shape: ${n.shape}, indices.shape: ${e.shape}, shape: ${t}, sliceDim: ${r}, and batchDim: ${o}.`;if(n.rank<o)throw new Error(s+` update.rank < ${o}. `);if(t.length<r+(n.rank-o))throw new Error(s+` Output shape length < ${r+(n.rank-o)}`);if(n.rank!==o+t.length-r)throw new Error(s+` update.rank != ${o+t.length-r}`);for(let i=0;i<o;++i)if(n.shape[i]!==e.shape[i])throw new Error(s+` updates.shape[${i}] (${n.shape[i]}) != indices.shape[${i}] (${e.shape[i]}).`);for(let i=0;i<n.rank-o;++i)if(n.shape[i+o]!==t[i+r])throw new Error(s+` updates.shape[${i+o}] (${n.shape[i+o]}) != shape[${i+o}] (${t[i+o]})`)}function VBe(t,e,n){if(e.rank<1)throw new Error(`tf.scatterND() expects the indices to be rank 1 or higher, but the rank was ${e.rank}.`);if(t.rank<1)throw new Error(`tf.scatterND() expects the updates to be rank 1 or higher, but the rank was ${t.rank}.`);if(e.dtype!=="int32")throw new Error(`The dtype of 'indices' should be int32, but got dtype: ${e.dtype}`);if(n.length<1)throw new Error(`Output rank must be greater or equal to 1, but got shape: ${n}`);if(n.length===0){if(e.size===0)throw new Error(`Indices specified for empty output. indices shape: ${e.shape}`);if(t.size===0)throw new Error(`Updates specified for empty output. updates shape: ${t.shape}`)}t8(n,e,t)}function hu(t,e,n){const r=e.shape.length,o=r>1?e.shape[r-1]:1,s=n.length;let i=1;for(let d=o;d<s;++d)i*=n[d];const a=o<1?1:o,l=ne(e.shape)/a,c=[...Ie(n.slice(0,o)),1],u=ne(n);return{sliceRank:o,numUpdates:l,sliceSize:i,strides:c,outputSize:u}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function UBe(t,e=1,n=!0){const r=j(t,"x","topk");if(r.rank===0)throw new Error("topk() expects the input to be of rank 1 or higher");const o=r.shape[r.shape.length-1];if(e<0)throw new Error(`'k' passed to topk() must be >= 0 but got ${e}`);if(e>o)throw new Error(`'k' passed to topk() must be <= the last dimension (${o}) but got ${e}`);const s={x:r},i={k:e,sorted:n},[a,l]=H.runKernel(AA,s,i);return{values:a,indices:l}}const GBe=X({topk_:UBe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function HBe(t,e=0,n=1,r,o){if(ca(t),r!=null&&r==="bool")throw new Error("Unsupported data type $ { dtype }");const s=new Gq(e,n,r,!0,o),i=Ge(t,r);for(let a=0;a<i.values.length;a++)i.values[a]=s.nextValue();return i.toTensor()}const n8=X({truncatedNormal_:HBe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function KBe(t,e=0){const n=j(t,"x","unique","string_or_numeric");M(n.rank>0,()=>"The input tensor must be at least 1D");const r={x:n},o={axis:e},[s,i]=H.runKernel(PA,r,o);return{values:s,indices:i}}const qBe=X({unique_:KBe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function XBe(t,e,n){const r=j(t,"x","unsortedSegmentSum"),o=j(e,"segmentIds","unsortedSegmentSum","int32");M(uf(n),()=>"numSegments must be of dtype int");const s={x:r,segmentIds:o},i={numSegments:n};return H.runKernel(F1,s,i)}const r8=X({unsortedSegmentSum_:XBe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function YBe(t,e=0){const n=j(t,"x","unstack","string_or_numeric");M(e>=-n.shape.length&&e<n.shape.length,()=>`Axis = ${e} is not in [-${n.shape.length}, ${n.shape.length})`);const r={value:n},o={axis:e};return H.runKernel(M1,r,o)}const qc=X({unstack_:YBe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function QBe(t,e=!0,n,r){return H.makeVariable(t,e,n,r)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function o8(t,e){const n=[];for(let s=0;s<e.length;s++)e[s]&&n.push(s);const r=Ge(t,"int32"),o=Ge([n.length,t.length],"int32");for(let s=0;s<n.length;s++){const i=r.indexToLoc(n[s]),a=s*t.length;o.values.set(i,a)}return o.toTensor()}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ZBe(t,e,n){const r=j(t,"x","transpose");if(e==null&&(e=r.shape.map((i,a)=>a).reverse()),M(r.rank===e.length,()=>`Error in transpose: rank of input ${r.rank} must match length of perm ${e}.`),e.forEach(i=>{M(i>=0&&i<r.rank,()=>`All entries in 'perm' must be between 0 and ${r.rank-1} but got ${e}`)}),r.rank<=1)return r.clone();const o={x:r},s={perm:e};return r.dtype==="complex64"?Y(()=>{let i=Gb(r),a=GA(r);return i=H.runKernel(hd,{x:i},s),a=H.runKernel(hd,{x:a},s),n&&(a=Zt(a)),hf(i,a)}):H.runKernel(hd,o,s)}const nt=X({transpose_:ZBe});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function JBe(t,e){if(e==null)return t.shape.slice();if(dt(t.shape,e))return e;if(t.shape.length===e.length){const n=[];for(let r=0;r<t.shape.length;r++)e[r]==null&&t.shape[r]!=null?n.push(t.shape[r]):n.push(e[r]);return n}return e}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function eze(t,e,n,r){const o=j(t,"x","dropout");if(M(o.dtype==="float32",()=>`x has to be a floating point tensor since it's going to be scaled, but got a ${o.dtype} tensor instead.`),M(e>=0&&e<1,()=>`rate must be a float in the range [0, 1), but got ${e}.`),e===0)return t instanceof fn?o.clone():o;const s=JBe(o,n),i=1-e,a=Ae(K1(de(dy(s,0,1,"float32",r),i)),i);return U(o,a)}const tze=X({dropout_:eze});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nze(t,e,n,r,o,s="NHWC",i){let a=t;t.rank===3&&(a=q(t,[1,t.shape[0],t.shape[1],t.shape[2]]));let l=e;l.rank===3&&(l=q(e,[1,e.shape[0],e.shape[1],e.shape[2]])),M(a.rank===4,()=>`Error in conv2dDerFilter: input must be rank 4, but got shape ${a.shape}.`),M(l.rank===4,()=>`Error in conv2dDerFilter: dy must be rank 4, but got shape ${l.shape}.`),M(n.length===4,()=>`Error in conv2dDerFilter: filterShape must be length 4, but got ${n}.`);const c=s==="NHWC"?a.shape[3]:a.shape[1],u=s==="NHWC"?l.shape[3]:l.shape[1];M(c===n[2],()=>`Error in conv2dDerFilter: depth of input ${c}) must match input depth in filter (${n[2]}.`),M(u===n[3],()=>`Error in conv2dDerFilter: depth of dy (${u}) must match output depth for filter (${n[3]}).`),Dr("conv2dDerFilter",o,i);const d={x:a,dy:l},f={strides:r,pad:o,dataFormat:s,dimRoundingMode:i,filterShape:n};return H.runKernel(tA,d,f)}const cO=X({conv2DBackpropFilter_:nze});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function uO(t,e,n){if(n==null||n==="linear")return t;if(n==="relu")return U(t,hy(e));throw new Error(`Cannot compute gradient for fused activation ${n}.`)}function dO(t,e){let n=e;const r=xn(t.shape,e.shape);return r.length>0&&(n=Ee(n,r)),q(n,t.shape)}function fO(t,e,n,r){if(e==="linear")return t;if(e==="relu")return fu(t);if(e==="elu")return G1(t);if(e==="relu6")return Hq(t);if(e==="prelu")return ZA(t,n);if(e==="leakyrelu")return HA(t,r);if(e==="sigmoid")return Xf(t);throw new Error(`Unknown fused activation ${e}.`)}const hO=(t,e)=>!(t>0)||e==="linear";/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function rze({x:t,filter:e,strides:n,pad:r,dataFormat:o="NHWC",dilations:s=[1,1],dimRoundingMode:i,bias:a,activation:l="linear",preluActivationWeights:c,leakyreluAlpha:u}){if(l=l||"linear",hO(H.state.gradientDepth,l)===!1){M(o==="NHWC",()=>`Error in fused conv2d: got dataFormat of ${o} but only NHWC is currently supported for the case of gradient depth is 0 and the activation is not linear.`);let C=Gc(t,e,n,r,o,s,i);return a!=null&&(C=de(C,a)),fO(C,l,c,u)}const d=j(t,"x","conv2d","float32"),f=j(e,"filter","conv2d","float32");let h=d,p=!1;d.rank===3&&(p=!0,h=q(d,[1,d.shape[0],d.shape[1],d.shape[2]])),M(h.rank===4,()=>`Error in fused conv2d: input must be rank 4, but got rank ${h.rank}.`),M(f.rank===4,()=>`Error in fused conv2d: filter must be rank 4, but got rank ${f.rank}.`),Dr("fused conv2d",r,i);const m=o==="NHWC"?h.shape[3]:h.shape[1];M(f.shape[2]===m,()=>`Error in conv2d: depth of input (${m}) must match input depth for filter ${f.shape[2]}.`),M(Qn(n,s),()=>`Error in conv2D: Either strides or dilations must be 1. Got strides ${n} and dilations '${s}'`);const g=Ln(h.shape,f.shape,n,s,r,i);let y;a!=null&&(y=j(a,"bias","fused conv2d"),[y]=en(y,d),o==="NHWC"?Be(g.outShape,y.shape):(M(y.shape.length<=1,()=>`Error in fused conv2d: only supports scalar or 1-D Tensor bias for NCHW format but got the bias of rank-${y.shape.length}.`),M(y.shape.length===0||y.shape[0]===g.outChannels||y.shape[0]===1,()=>`Error in fused conv2d: bias shape (${y.shape}) is not compatible with the number of output channels (${g.outChannels})`)));let v;if(c!=null){const C=c.shape;if(M(C.length<=1||C.length===3,()=>`Error in fused conv2d: only supports scalar, 1-D Tensor or 3-D Tensor PReLU activation weights but got a tensor of rank-${C.length}.`),C.length===1)M(C[0]===1||C[0]===g.outChannels,()=>`Error in fused conv2d: PReLU activation weights (${C}) is not compatible with the number of output channels (${g.outChannels}).`);else if(C.length===3)try{Be(C,g.outShape)}catch{const T=`Error in fused conv2d: PReLU activation weights (${C}) is not compatible with the output shape of the conv2d (${g.outShape}).`;throw Error(T)}v=j(c,"prelu weights","fused conv2d")}const x=(C,$)=>{M(o==="NHWC",()=>`Error in gradient of fused conv2D: got dataFormat of ${o} but only NHWC is currently supported.`);const[T,I,E,N]=$,A=uO(C,E,l);M(Vc(s),()=>`Error in gradient of fused conv2D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '${s}'`);const R=BA(I.shape,A,T,n,r),P=cO(I,A,T.shape,n,r),F=[R,P];if(N!=null){const _=dO(N,A);F.push(_)}return F},b={x:h,filter:f,bias:y,preluActivationWeights:v},w={strides:n,pad:r,dataFormat:o,dilations:s,dimRoundingMode:i,activation:l,leakyreluAlpha:u};return a==null?mf(($,T,I)=>{let E=H.runKernel(Lb,b,w);return I([T,$,E]),p&&(E=q(E,[E.shape[1],E.shape[2],E.shape[3]])),{value:E,gradFunc:x}})(h,f):mf(($,T,I,E)=>{let N=H.runKernel(Lb,b,w);return E([T,$,N,I]),p&&(N=q(N,[N.shape[1],N.shape[2],N.shape[3]])),{value:N,gradFunc:x}})(h,f,y)}const oze=X({fusedConv2d_:rze});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sze(t,e,n,r,o,s=[1,1],i){let a=t;t.rank===3&&(a=q(t,[1,t.shape[0],t.shape[1],t.shape[2]]));let l=e;l.rank===3&&(l=q(e,[1,e.shape[0],e.shape[1],e.shape[2]]));const c={x:a,dy:l},u={strides:r,pad:o,dimRoundingMode:i,dilations:s,filterShape:n};return H.runKernel(lA,c,u)}const ize=X({depthwiseConv2dNativeBackpropFilter_:sze});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function aze(t,e,n,r,o,s=[1,1],i){let a=e,l=!1;e.rank===3&&(l=!0,a=q(e,[1,e.shape[0],e.shape[1],e.shape[2]]));const c={dy:a,filter:n},u={strides:r,pad:o,dimRoundingMode:i,dilations:s,inputShape:t},d=H.runKernel(cA,c,u);return l?q(d,[d.shape[1],d.shape[2],d.shape[3]]):d}const lze=X({depthwiseConv2dNativeBackpropInput_:aze});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cze({a:t,b:e,transposeA:n=!1,transposeB:r=!1,bias:o,activation:s="linear",preluActivationWeights:i,leakyreluAlpha:a=.2}){if(hO(H.state.gradientDepth,s)===!1){let N=lt(t,e,n,r);return o!=null&&(N=de(N,o)),fO(N,s,i,a)}let l=j(t,"a","fused matMul"),c=j(e,"b","fused matMul");[l,c]=en(l,c);const u=n?l.shape[l.rank-2]:l.shape[l.rank-1],d=r?c.shape[c.rank-1]:c.shape[c.rank-2],f=n?l.shape[l.rank-1]:l.shape[l.rank-2],h=r?c.shape[c.rank-2]:c.shape[c.rank-1],p=l.shape.slice(0,-2),m=c.shape.slice(0,-2),g=ne(p),y=ne(m);M(u===d,()=>`Error in fused matMul: inner shapes (${u}) and (${d}) of Tensors with shapes ${l.shape} and ${c.shape} and transposeA=${n} and transposeB=${r} must match.`);const x=Be(l.shape.slice(0,-2),c.shape.slice(0,-2)).concat([f,h]),b=n?q(l,[g,u,f]):q(l,[g,f,u]),w=r?q(c,[y,h,d]):q(c,[y,d,h]);let C;o!=null&&(C=j(o,"bias","fused matMul"),[C]=en(C,l),Be(x,C.shape));let $;i!=null&&($=j(i,"prelu weights","fused matMul"));const T=(N,A)=>{const[R,P,F,_]=A,L=uO(q(N,F.shape),F,s);let O,D;if(!n&&!r?(O=lt(L,P,!1,!0),D=lt(R,L,!0,!1)):!n&&r?(O=lt(L,P,!1,!1),D=lt(L,R,!0,!1)):n&&!r?(O=lt(P,L,!1,!0),D=lt(R,L,!1,!1)):(O=lt(P,L,!0,!0),D=lt(L,R,!0,!0)),o!=null){const B=dO(_,L);return[O,D,B]}else return[O,D]},I={a:b,b:w,bias:C,preluActivationWeights:$},E={transposeA:n,transposeB:r,activation:s,leakyreluAlpha:a};return o==null?mf((A,R,P)=>{const F=H.runKernel(Fb,I,E);return P([A,R,F]),{value:q(F,x),gradFunc:T}})(b,w):mf((A,R,P,F)=>{const _=H.runKernel(Fb,I,E);return F([A,R,_,P]),{value:q(_,x),gradFunc:T}})(b,w,C)}const rj=X({fusedMatMul_:cze});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function uze(t,e,n,r,o="bilinear",s=0){const i=j(t,"image","cropAndResize"),a=j(e,"boxes","cropAndResize","float32"),l=j(n,"boxInd","cropAndResize","int32"),c=a.shape[0];M(i.rank===4,()=>`Error in cropAndResize: image must be rank 4,but got rank ${i.rank}.`),M(a.rank===2&&a.shape[1]===4,()=>`Error in cropAndResize: boxes must be have size [${c},4] but had shape ${a.shape}.`),M(l.rank===1&&l.shape[0]===c,()=>`Error in cropAndResize: boxInd must be have size [${c}] but had shape ${a.shape}.`),M(r.length===2,()=>`Error in cropAndResize: cropSize must be of length 2, but got length ${r.length}.`),M(r[0]>=1&&r[1]>=1,()=>`cropSize must be atleast [1,1], but was ${r}`),M(o==="bilinear"||o==="nearest",()=>`method must be bilinear or nearest, but was ${o}`);const u={image:i,boxes:a,boxInd:l},d={method:o,extrapolationValue:s,cropSize:r};return H.runKernel(sA,u,d)}const dze=X({cropAndResize_:uze});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fze(t){const e=j(t,"image","flipLeftRight","float32");M(e.rank===4,()=>`Error in flipLeftRight: image must be rank 4,but got rank ${e.rank}.`);const n={image:e};return H.runKernel(pA,n,{})}const hze=X({flipLeftRight_:fze});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pze(t){const e=j(t,"image","grayscaleToRGB"),n=e.rank-1,r=e.shape[n];M(e.rank>=2,()=>`Error in grayscaleToRGB: images must be at least rank 2, but got rank ${e.rank}.`),M(r===1,()=>`Error in grayscaleToRGB: last dimension of a grayscale image should be size 1, but got size ${r}.`);const o=new Array(e.rank);return o.fill(1,0,n),o[n]=3,Ss(e,o)}const mze=X({grayscaleToRGB_:pze});/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gze(t){const e=j(t,"image","RGBToGrayscale"),n=e.rank-1,r=e.shape[n];M(e.rank>=2,()=>`Error in RGBToGrayscale: images must be at least rank 2, but got rank ${e.rank}.`),M(r===3,()=>`Error in RGBToGrayscale: last dimension of an RGB image should be size 3, but got size ${r}.`);const o=e.dtype,s=xe(e,"float32"),i=Hr([.2989,.587,.114]);let a;switch(e.rank){case 2:a=_h("ij,j->i",s,i);break;case 3:a=_h("ijk,k->ij",s,i);break;case 4:a=_h("ijkl,l->ijk",s,i);break;case 5:a=_h("ijklm,m->ijkl",s,i);break;case 6:a=_h("ijklmn,n->ijklm",s,i);break;default:throw new Error("Not a valid tensor rank.")}return a=Cr(a,-1),xe(a,o)}const yze=X({rgbToGrayscale_:gze});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vze(t,e,n=0,r=.5){const o=j(t,"image","rotateWithOffset","float32");M(o.rank===4,()=>`Error in rotateWithOffset: image must be rank 4,but got rank ${o.rank}.`);const s={image:o},i={radians:e,fillValue:n,center:r};return H.runKernel(RA,s,i)}const xze=X({rotateWithOffset_:vze});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Qf(t,e,n,r,o,s){r==null&&(r=.5),o==null&&(o=Number.NEGATIVE_INFINITY),s==null&&(s=0);const i=t.shape[0];return n=Math.min(n,i),M(0<=r&&r<=1,()=>`iouThreshold must be in [0, 1], but was '${r}'`),M(t.rank===2,()=>`boxes must be a 2D tensor, but was of rank '${t.rank}'`),M(t.shape[1]===4,()=>`boxes must have 4 columns, but 2nd dimension was ${t.shape[1]}`),M(e.rank===1,()=>"scores must be a 1D tensor"),M(e.shape[0]===i,()=>`scores has incompatible shape with boxes. Expected ${i}, but was ${e.shape[0]}`),M(0<=s&&s<=1,()=>`softNmsSigma must be in [0, 1], but was '${s}'`),{maxOutputSize:n,iouThreshold:r,scoreThreshold:o,softNmsSigma:s}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bze(t,e,n,r=.5,o=Number.NEGATIVE_INFINITY){const s=j(t,"boxes","nonMaxSuppression","float32"),i=j(e,"scores","nonMaxSuppression","float32"),a=Qf(s,i,n,r,o);n=a.maxOutputSize,r=a.iouThreshold,o=a.scoreThreshold;const l={maxOutputSize:n,iouThreshold:r,scoreThreshold:o};return H.runKernel(bA,{boxes:s,scores:i},l)}const wze=X({nonMaxSuppression_:bze});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Sze(t,e,n){const r=Cze(t,e,n),o=r<0?-(r+1):r;t.splice(o,0,e)}function Cze(t,e,n){return kze(t,e,n||$ze)}function $ze(t,e){return t>e?1:t<e?-1:0}function kze(t,e,n){let r=0,o=t.length,s=0,i=!1;for(;r<o;){s=r+(o-r>>>1);const a=n(e,t[s]);a>0?r=s+1:(o=s,i=!a)}return i?r:-r-1}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pO(t,e,n,r,o){return yO(t,e,n,r,o,0)}function mO(t,e,n,r,o,s){return yO(t,e,n,r,o,0,!1,s,!0)}function gO(t,e,n,r,o,s){return yO(t,e,n,r,o,s,!0)}function yO(t,e,n,r,o,s,i=!1,a=!1,l=!1){const c=[];for(let g=0;g<e.length;g++)e[g]>o&&c.push({score:e[g],boxIndex:g,suppressBeginIndex:0});c.sort(oj);const u=s>0?-.5/s:0,d=[],f=[];for(;d.length<n&&c.length>0;){const g=c.pop(),{score:y,boxIndex:v,suppressBeginIndex:x}=g;if(y<o)break;let b=!1;for(let w=d.length-1;w>=x;--w){const C=Tze(t,v,d[w]);if(C>=r){b=!0;break}if(g.score=g.score*Ize(r,u,C),g.score<=o)break}g.suppressBeginIndex=d.length,b||(g.score===y?(d.push(v),f.push(g.score)):g.score>o&&Sze(c,g,oj))}const h=d.length,p=n-h;a&&p>0&&(d.push(...new Array(p).fill(0)),f.push(...new Array(p).fill(0)));const m={selectedIndices:d};return i&&(m.selectedScores=f),l&&(m.validOutputs=h),m}function Tze(t,e,n){const r=t.subarray(e*4,e*4+4),o=t.subarray(n*4,n*4+4),s=Math.min(r[0],r[2]),i=Math.min(r[1],r[3]),a=Math.max(r[0],r[2]),l=Math.max(r[1],r[3]),c=Math.min(o[0],o[2]),u=Math.min(o[1],o[3]),d=Math.max(o[0],o[2]),f=Math.max(o[1],o[3]),h=(a-s)*(l-i),p=(d-c)*(f-u);if(h<=0||p<=0)return 0;const m=Math.max(s,c),g=Math.max(i,u),y=Math.min(a,d),v=Math.min(l,f),x=Math.max(y-m,0)*Math.max(v-g,0);return x/(h+p-x)}function Ize(t,e,n){const r=Math.exp(e*n*n);return n<=t?r:0}function oj(t,e){return t.score-e.score||t.score===e.score&&e.boxIndex-t.boxIndex}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */async function Eze(t,e,n,r=.5,o=Number.NEGATIVE_INFINITY){const s=j(t,"boxes","nonMaxSuppressionAsync"),i=j(e,"scores","nonMaxSuppressionAsync"),a=Qf(s,i,n,r,o);n=a.maxOutputSize,r=a.iouThreshold,o=a.scoreThreshold;const l=await Promise.all([s.data(),i.data()]),c=l[0],u=l[1],{selectedIndices:d}=pO(c,u,n,r,o);return s!==t&&s.dispose(),i!==e&&i.dispose(),Hr(d,"int32")}const Nze=Eze;/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Aze(t,e,n,r=.5,o=Number.NEGATIVE_INFINITY,s=0){const i=j(t,"boxes","nonMaxSuppression"),a=j(e,"scores","nonMaxSuppression"),l=Qf(i,a,n,r,o,s);n=l.maxOutputSize,r=l.iouThreshold,o=l.scoreThreshold,s=l.softNmsSigma;const c={boxes:i,scores:a},u={maxOutputSize:n,iouThreshold:r,scoreThreshold:o,softNmsSigma:s},d=H.runKernel(SA,c,u);return{selectedIndices:d[0],selectedScores:d[1]}}const Oze=X({nonMaxSuppressionWithScore_:Aze});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */async function Pze(t,e,n,r=.5,o=Number.NEGATIVE_INFINITY,s=0){const i=j(t,"boxes","nonMaxSuppressionAsync"),a=j(e,"scores","nonMaxSuppressionAsync"),l=Qf(i,a,n,r,o,s);n=l.maxOutputSize,r=l.iouThreshold,o=l.scoreThreshold,s=l.softNmsSigma;const c=await Promise.all([i.data(),a.data()]),u=c[0],d=c[1],{selectedIndices:f,selectedScores:h}=gO(u,d,n,r,o,s);return i!==t&&i.dispose(),a!==e&&a.dispose(),{selectedIndices:Hr(f,"int32"),selectedScores:Hr(h)}}const Rze=Pze;/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _ze(t,e,n,r=.5,o=Number.NEGATIVE_INFINITY,s=!1){const i=j(t,"boxes","nonMaxSuppression"),a=j(e,"scores","nonMaxSuppression"),l=Qf(i,a,n,r,o,null),c=l.maxOutputSize,u=l.iouThreshold,d=l.scoreThreshold,f={boxes:i,scores:a},h={maxOutputSize:c,iouThreshold:u,scoreThreshold:d,padToMaxOutputSize:s},p=H.runKernel(wA,f,h);return{selectedIndices:p[0],validOutputs:p[1]}}const Dze=X({nonMaxSuppressionPadded_:_ze});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */async function Mze(t,e,n,r=.5,o=Number.NEGATIVE_INFINITY,s=!1){const i=j(t,"boxes","nonMaxSuppressionAsync"),a=j(e,"scores","nonMaxSuppressionAsync"),l=Qf(i,a,n,r,o,null),c=l.maxOutputSize,u=l.iouThreshold,d=l.scoreThreshold,[f,h]=await Promise.all([i.data(),a.data()]),{selectedIndices:p,validOutputs:m}=mO(f,h,c,u,d,s);return i!==t&&i.dispose(),a!==e&&a.dispose(),{selectedIndices:Hr(p,"int32"),validOutputs:ct(m,"int32")}}const Fze=Mze;/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Lze(t,e,n=!1,r=!1){const o=j(t,"images","resizeBilinear");M(o.rank===3||o.rank===4,()=>`Error in resizeBilinear: x must be rank 3 or 4, but got rank ${o.rank}.`),M(e.length===2,()=>`Error in resizeBilinear: new shape must 2D, but got shape ${e}.`),M(r===!1||n===!1,()=>"Error in resizeBilinear: If halfPixelCenters is true, alignCorners must be false.");let s=o,i=!1;o.rank===3&&(i=!0,s=q(o,[1,o.shape[0],o.shape[1],o.shape[2]]));const a={images:s},l={alignCorners:n,halfPixelCenters:r,size:e},c=H.runKernel(E1,a,l);return i?q(c,[c.shape[1],c.shape[2],c.shape[3]]):c}const s8=X({resizeBilinear_:Lze});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function jze(t,e,n=!1,r=!1){const o=j(t,"images","resizeNearestNeighbor");M(o.rank===3||o.rank===4,()=>`Error in resizeNearestNeighbor: x must be rank 3 or 4, but got rank ${o.rank}.`),M(e.length===2,()=>`Error in resizeNearestNeighbor: new shape must 2D, but got shape ${e}.`),M(o.dtype==="float32"||o.dtype==="int32",()=>"`images` must have `int32` or `float32` as dtype"),M(r===!1||n===!1,()=>"Error in resizeNearestNeighbor: If halfPixelCenters is true, alignCorners must be false.");let s=o,i=!1;o.rank===3&&(i=!0,s=q(o,[1,o.shape[0],o.shape[1],o.shape[2]]));const a={images:s},l={alignCorners:n,halfPixelCenters:r,size:e},c=H.runKernel(I1,a,l);return i?q(c,[c.shape[1],c.shape[2],c.shape[3]]):c}const i8=X({resizeNearestNeighbor_:jze});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * https://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Bze(t,e="binary",n=!1,r=.5){const o=j(t,"image","threshold"),s=.2989,i=.587,a=.114,l=o.shape[0]*o.shape[1];let c=U(Hr([r]),255),u,d,f,h;if(M(o.rank===3,()=>`Error in threshold: image must be rank 3,but got rank ${o.rank}.`),M(o.shape[2]===3||o.shape[2]===1,()=>`Error in threshold: image color channel must be equal to 3 or 1but got ${o.shape[2]}.`),M(o.dtype==="int32"||o.dtype==="float32",()=>`Error in dtype: image dtype must be int32 or float32,but got dtype ${o.dtype}.`),M(e==="otsu"||e==="binary",()=>`Method must be binary or otsu, but was ${e}`),o.shape[2]===3){[u,d,f]=po(o,[1,1,1],-1);const g=U(u,s),y=U(d,i),v=U(f,a);h=de(de(g,y),v)}else h=t;if(e==="otsu"){const g=jLe(xe(Kq(h),"int32"),xq([]),256);c=zze(g,l)}const p=n?Yf(h,c):bo(h,c);return xe(U(p,255),"int32")}function zze(t,e){let n=Hr([-1]),r=Hr([0]),o=Hr([0]),s,i,a,l,c,u;for(let d=0;d<t.size-1;d++){s=Ct(t,0,d+1),i=Ct(t,d+1),c=Ae(Ee(s),e),u=Ae(Ee(i),e);const f=Ee(U(s,Nm(0,s.size)));a=Ae(f,Ee(s));const h=U1(i.shape,s.size),p=de(Nm(0,i.size),h),m=U(i,p);l=Ae(Ee(m),Ee(i));const g=_e(a,l),y=_e(a,l),v=U(c,u);o=U(U(v,g),y);const x=bo(o,r);r=fr(x,o,r),n=fr(x,Hr([d]),n)}return n}const Wze=X({threshold_:Bze});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Vze(t,e,n="nearest",r="constant",o=0,s){const i=j(t,"image","transform","float32"),a=j(e,"transforms","transform","float32");M(i.rank===4,()=>`Error in transform: image must be rank 4,but got rank ${i.rank}.`),M(a.rank===2&&(a.shape[0]===i.shape[0]||a.shape[0]===1)&&a.shape[1]===8,()=>"Error in transform: Input transform should be batch x 8 or 1 x 8"),M(s==null||s.length===2,()=>`Error in transform: outputShape must be [height, width] or null, but got ${s}.`);const l={image:i,transforms:a},c={interpolation:n,fillMode:r,fillValue:o,outputShape:s};return H.runKernel(OA,l,c)}const Uze=X({transform_:Vze});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Gze(t,e,n){const r=j(t,"a","bandPart");M(r.rank>=2,()=>`bandPart(): Rank must be at least 2, got ${r.rank}.`);const o=r.shape,[s,i]=r.shape.slice(-2);let a,l;typeof e=="number"?(M(e%1===0,()=>`bandPart(): numLower must be an integer, got ${e}.`),M(e<=s,()=>`bandPart(): numLower (${e}) must not be greater than the number of rows (${s}).`),a=j(e<0?s:e,"numLower","bandPart")):(M(e.dtype==="int32",()=>"bandPart(): numLower's dtype must be an int32."),a=fr(Vb(e,0),s,Em(e,s))),typeof n=="number"?(M(n%1===0,()=>`bandPart(): numUpper must be an integer, got ${n}.`),M(n<=i,()=>`bandPart(): numUpper (${n}) must not be greater than the number of columns (${i}).`),l=j(n<0?i:n,"numUpper","bandPart")):(M(n.dtype==="int32",()=>"bandPart(): numUpper's dtype must be an int32."),l=fr(Vb(n,0),i,Em(n,i)));const c=q(Nm(0,s,1,"int32"),[-1,1]),u=Nm(0,i,1,"int32"),d=_e(c,u),f=ta(Yf(d,a),uu(d,Zt(l))),h=kn([s,i],r.dtype);return q(na(qc(q(r,[-1,s,i])).map(p=>fr(f,p,h))),o)}const Hze=X({bandPart_:Gze});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Kze(t){let e;if(Array.isArray(t)){e=!1,M(t!=null&&t.length>0,()=>"Gram-Schmidt process: input must not be null, undefined, or empty");const o=t[0].shape[0];for(let s=1;s<t.length;++s)M(t[s].shape[0]===o,()=>`Gram-Schmidt: Non-unique lengths found in the input vectors: (${t[s].shape[0]} vs. ${o})`)}else e=!0,t=po(t,t.shape[0],0).map(o=>fy(o,[0]));M(t.length<=t[0].shape[0],()=>`Gram-Schmidt: Number of vectors (${t.length}) exceeds number of dimensions (${t[0].shape[0]}).`);const n=[],r=t;for(let o=0;o<t.length;++o)n.push(H.tidy(()=>{let s=r[o];if(o>0)for(let i=0;i<o;++i){const a=U(Ee(U(n[i],s)),n[i]);s=_e(s,a)}return Ae(s,H1(s,"euclidean"))}));return e?na(n,0):n}const qze=X({gramSchmidt_:Kze});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Xze(t,e=!1){if(M(t.rank>=2,()=>`qr() requires input tensor to have a rank >= 2, but got rank ${t.rank}`),t.rank===2)return sj(t,e);{const n=t.shape.slice(0,t.shape.length-2).reduce((l,c)=>l*c),r=qc(q(t,[n,t.shape[t.shape.length-2],t.shape[t.shape.length-1]]),0),o=[],s=[];r.forEach(l=>{const[c,u]=sj(l,e);o.push(c),s.push(u)});const i=q(na(o,0),t.shape),a=q(na(s,0),t.shape);return[i,a]}}function sj(t,e=!1){return H.tidy(()=>{M(t.shape.length===2,()=>`qr2d() requires a 2D Tensor, but got a ${t.shape.length}D Tensor.`);const n=t.shape[0],r=t.shape[1];let o=Lq(n),s=wc(t);const i=zC([[1]],[1,1]);let a=wc(i);const l=n>=r?r:n;for(let c=0;c<l;++c){const u=s,d=a,f=o;[a,s,o]=H.tidy(()=>{const h=Ct(s,[c,c],[n-c,1]),p=H1(h),m=Ct(s,[c,c],[1,1]),g=fr(bo(m,0),zC([[-1]]),zC([[1]])),y=_e(m,U(g,p)),v=Ae(h,y);v.shape[0]===1?a=wc(i):a=Nr([i,Ct(v,[1,0],[v.shape[0]-1,v.shape[1]])],0);const x=Zt(Ae(lt(g,y),p)),b=Ct(s,[c,0],[n-c,r]),w=U(x,a),C=nt(a);if(c===0)s=_e(b,lt(w,lt(C,b)));else{const I=_e(b,lt(w,lt(C,b)));s=Nr([Ct(s,[0,0],[c,r]),I],0)}const $=nt(w),T=Ct(o,[0,c],[n,o.shape[1]-c]);if(c===0)o=_e(T,lt(lt(T,a),$));else{const I=_e(T,lt(lt(T,a),$));o=Nr([Ct(o,[0,0],[n,c]),I],1)}return[a,s,o]}),qe([u,d,f])}return!e&&n>r&&(o=Ct(o,[0,0],[n,r]),s=Ct(s,[0,0],[r,r])),[o,s]})}const Yze=X({qr_:Xze});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Di={flipLeftRight:hze,grayscaleToRGB:mze,resizeNearestNeighbor:i8,resizeBilinear:s8,rgbToGrayscale:yze,rotateWithOffset:xze,cropAndResize:dze,nonMaxSuppression:wze,nonMaxSuppressionAsync:Nze,nonMaxSuppressionWithScore:Oze,nonMaxSuppressionWithScoreAsync:Rze,nonMaxSuppressionPadded:Dze,nonMaxSuppressionPaddedAsync:Fze,threshold:Wze,transform:Uze},Qze={bandPart:Hze,gramSchmidt:qze,qr:Yze};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Zze=new Map,Jze=new Map;class Zf{getClassName(){return this.constructor.className}static fromConfig(e,n){return new e(n)}}class _o{constructor(){this.classNameMap={}}static getMap(){return _o.instance==null&&(_o.instance=new _o),_o.instance}static register(e){_o.getMap().classNameMap[e.className]=[e,e.fromConfig]}}function ue(t,e,n){M(t.className!=null,()=>"Class being registered does not have the static className property defined."),M(typeof t.className=="string",()=>"className is required to be a string, but got type "+typeof t.className),M(t.className.length>0,()=>"Class being registered has an empty-string as its className, which is disallowed."),typeof e>"u"&&(e="Custom"),typeof n>"u"&&(n=t.className);const r=n,o=e+">"+r;return _o.register(t),Zze.set(o,t),Jze.set(t,o),t}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class _l extends Zf{minimize(e,n=!1,r){const{value:o,grads:s}=this.computeGradients(e,r);if(r!=null){const i=r.map(a=>({name:a.name,tensor:s[a.name]}));this.applyGradients(i)}else this.applyGradients(s);return qe(s),n?o:(o.dispose(),null)}get iterations(){return this.iterations_==null&&(this.iterations_=0),this.iterations_}incrementIterations(){this.iterations_=this.iterations+1}computeGradients(e,n){return i3e(e,n)}dispose(){this.iterations_!=null&&qe(this.iterations_)}async saveIterations(){return this.iterations_==null&&(this.iterations_=0),{name:"iter",tensor:ct(this.iterations_,"int32")}}async getWeights(){throw new Error("getWeights() is not implemented for this optimizer yet.")}async setWeights(e){throw new Error(`setWeights() is not implemented for this optimizer class ${this.getClassName()}`)}async extractIterations(e){return this.iterations_=(await e[0].tensor.data())[0],e.slice(1)}}Object.defineProperty(_l,Symbol.hasInstance,{value:t=>t.minimize!=null&&t.computeGradients!=null&&t.applyGradients!=null});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class a8 extends _l{static get className(){return"Adadelta"}constructor(e,n,r=null){super(),this.learningRate=e,this.rho=n,this.epsilon=r,this.accumulatedGrads=[],this.accumulatedUpdates=[],r==null&&(this.epsilon=H.backend.epsilon())}applyGradients(e){(Array.isArray(e)?e.map(r=>r.name):Object.keys(e)).forEach((r,o)=>{const s=H.registeredVariables[r],i=!1;this.accumulatedGrads[o]==null&&(this.accumulatedGrads[o]={originalName:`${r}/accum_grad`,variable:Y(()=>rt(s).variable(i))}),this.accumulatedUpdates[o]==null&&(this.accumulatedUpdates[o]={originalName:`${r}/accum_var`,variable:Y(()=>rt(s).variable(i))});const a=Array.isArray(e)?e[o].tensor:e[r];if(a==null)return;const l=this.accumulatedGrads[o].variable,c=this.accumulatedUpdates[o].variable;Y(()=>{const u=de(U(l,this.rho),U(Et(a),1-this.rho)),d=U(Ae(Yn(de(c,this.epsilon)),Yn(de(l,this.epsilon))),a),f=de(U(c,this.rho),U(Et(d),1-this.rho));l.assign(u),c.assign(f);const h=de(U(d,-this.learningRate),s);s.assign(h)})}),this.incrementIterations()}dispose(){this.accumulatedUpdates!=null&&(qe(this.accumulatedGrads.map(e=>e.variable)),qe(this.accumulatedUpdates.map(e=>e.variable)))}async getWeights(){const e=[...this.accumulatedGrads,...this.accumulatedUpdates];return[await this.saveIterations()].concat(e.map(n=>({name:n.originalName,tensor:n.variable})))}async setWeights(e){e=await this.extractIterations(e);const n=e.length/2,r=!1;this.accumulatedGrads=e.slice(0,n).map(o=>({originalName:o.name,variable:o.tensor.variable(r)})),this.accumulatedUpdates=e.slice(n,n*2).map(o=>({originalName:o.name,variable:o.tensor.variable(r)}))}getConfig(){return{learningRate:this.learningRate,rho:this.rho,epsilon:this.epsilon}}static fromConfig(e,n){return new e(n.learningRate,n.rho,n.epsilon)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class l8 extends _l{static get className(){return"Adagrad"}constructor(e,n=.1){super(),this.learningRate=e,this.initialAccumulatorValue=n,this.accumulatedGrads=[]}applyGradients(e){(Array.isArray(e)?e.map(r=>r.name):Object.keys(e)).forEach((r,o)=>{const s=H.registeredVariables[r];this.accumulatedGrads[o]==null&&(this.accumulatedGrads[o]={originalName:`${r}/accumulator`,variable:Y(()=>U1(s.shape,this.initialAccumulatorValue).variable(!1))});const i=Array.isArray(e)?e[o].tensor:e[r];if(i==null)return;const a=this.accumulatedGrads[o].variable;Y(()=>{const l=de(a,Et(i));a.assign(l);const c=de(U(Ae(i,Yn(de(l,H.backend.epsilon()))),-this.learningRate),s);s.assign(c)})}),this.incrementIterations()}dispose(){this.accumulatedGrads!=null&&qe(this.accumulatedGrads.map(e=>e.variable))}async getWeights(){return[await this.saveIterations()].concat(this.accumulatedGrads.map(e=>({name:e.originalName,tensor:e.variable})))}async setWeights(e){e=await this.extractIterations(e);const n=!1;this.accumulatedGrads=e.map(r=>({originalName:r.name,variable:r.tensor.variable(n)}))}getConfig(){return{learningRate:this.learningRate,initialAccumulatorValue:this.initialAccumulatorValue}}static fromConfig(e,n){return new e(n.learningRate,n.initialAccumulatorValue)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class c8 extends _l{static get className(){return"Adam"}constructor(e,n,r,o=null){super(),this.learningRate=e,this.beta1=n,this.beta2=r,this.epsilon=o,this.accumulatedFirstMoment=[],this.accumulatedSecondMoment=[],Y(()=>{this.accBeta1=ct(n).variable(),this.accBeta2=ct(r).variable()}),o==null&&(this.epsilon=H.backend.epsilon())}applyGradients(e){const n=Array.isArray(e)?e.map(r=>r.name):Object.keys(e);Y(()=>{const r=_e(1,this.accBeta1),o=_e(1,this.accBeta2);n.forEach((s,i)=>{const a=H.registeredVariables[s],l=!1;this.accumulatedFirstMoment[i]==null&&(this.accumulatedFirstMoment[i]={originalName:`${s}/m`,variable:Y(()=>rt(a).variable(l))}),this.accumulatedSecondMoment[i]==null&&(this.accumulatedSecondMoment[i]={originalName:`${s}/v`,variable:Y(()=>rt(a).variable(l))});const c=Array.isArray(e)?e[i].tensor:e[s];if(c==null)return;const u=this.accumulatedFirstMoment[i].variable,d=this.accumulatedSecondMoment[i].variable,f=de(U(u,this.beta1),U(c,1-this.beta1)),h=de(U(d,this.beta2),U(Et(c),1-this.beta2)),p=Ae(f,r),m=Ae(h,o);u.assign(f),d.assign(h);const g=de(U(Ae(p,de(Yn(m),this.epsilon)),-this.learningRate),a);a.assign(g)}),this.accBeta1.assign(U(this.accBeta1,this.beta1)),this.accBeta2.assign(U(this.accBeta2,this.beta2))}),this.incrementIterations()}dispose(){this.accBeta1.dispose(),this.accBeta2.dispose(),this.accumulatedFirstMoment!=null&&qe(this.accumulatedFirstMoment.map(e=>e.variable)),this.accumulatedSecondMoment!=null&&qe(this.accumulatedSecondMoment.map(e=>e.variable))}async getWeights(){const e=[...this.accumulatedFirstMoment,...this.accumulatedSecondMoment];return[await this.saveIterations()].concat(e.map(n=>({name:n.originalName,tensor:n.variable})))}async setWeights(e){e=await this.extractIterations(e),Y(()=>{this.accBeta1.assign(Hc(this.beta1,this.iterations_+1)),this.accBeta2.assign(Hc(this.beta2,this.iterations_+1))});const n=e.length/2,r=!1;this.accumulatedFirstMoment=e.slice(0,n).map(o=>({originalName:o.name,variable:o.tensor.variable(r)})),this.accumulatedSecondMoment=e.slice(n,n*2).map(o=>({originalName:o.name,variable:o.tensor.variable(r)}))}getConfig(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon}}static fromConfig(e,n){return new e(n.learningRate,n.beta1,n.beta2,n.epsilon)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class u8 extends _l{static get className(){return"Adamax"}constructor(e,n,r,o=null,s=0){super(),this.learningRate=e,this.beta1=n,this.beta2=r,this.epsilon=o,this.decay=s,this.accumulatedFirstMoment=[],this.accumulatedWeightedInfNorm=[],Y(()=>{this.iteration=ct(0).variable(),this.accBeta1=ct(n).variable()}),o==null&&(this.epsilon=H.backend.epsilon())}applyGradients(e){const n=Array.isArray(e)?e.map(r=>r.name):Object.keys(e);Y(()=>{const r=_e(1,this.accBeta1),o=Ae(-this.learningRate,de(U(this.iteration,this.decay),1));n.forEach((s,i)=>{const a=H.registeredVariables[s],l=!1;this.accumulatedFirstMoment[i]==null&&(this.accumulatedFirstMoment[i]={originalName:`${s}/m`,variable:rt(a).variable(l)}),this.accumulatedWeightedInfNorm[i]==null&&(this.accumulatedWeightedInfNorm[i]={originalName:`${s}/v`,variable:rt(a).variable(l)});const c=Array.isArray(e)?e[i].tensor:e[s];if(c==null)return;const u=this.accumulatedFirstMoment[i].variable,d=this.accumulatedWeightedInfNorm[i].variable,f=de(U(u,this.beta1),U(c,1-this.beta1)),h=U(d,this.beta2),p=ir(c),m=Pl(h,p);u.assign(f),d.assign(m);const g=de(U(Ae(o,r),Ae(f,de(m,this.epsilon))),a);a.assign(g)}),this.iteration.assign(de(this.iteration,1)),this.accBeta1.assign(U(this.accBeta1,this.beta1))}),this.incrementIterations()}dispose(){this.accBeta1.dispose(),this.iteration.dispose(),this.accumulatedFirstMoment!=null&&qe(this.accumulatedFirstMoment.map(e=>e.variable)),this.accumulatedWeightedInfNorm!=null&&qe(this.accumulatedWeightedInfNorm.map(e=>e.variable))}async getWeights(){throw new Error("getWeights() is not implemented for Adamax yet.")}async setWeights(e){throw new Error("setWeights() is not implemented for Adamax yet.")}getConfig(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon,decay:this.decay}}static fromConfig(e,n){return new e(n.learningRate,n.beta1,n.beta2,n.epsilon,n.decay)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class vO extends _l{static get className(){return"SGD"}constructor(e){super(),this.learningRate=e,this.setLearningRate(e)}applyGradients(e){(Array.isArray(e)?e.map(r=>r.name):Object.keys(e)).forEach((r,o)=>{const s=Array.isArray(e)?e[o].tensor:e[r];if(s==null)return;const i=H.registeredVariables[r];Y(()=>{const a=de(U(this.c,s),i);i.assign(a)})}),this.incrementIterations()}setLearningRate(e){this.learningRate=e,this.c!=null&&this.c.dispose(),this.c=li(ct(-e))}dispose(){this.c.dispose()}async getWeights(){return[await this.saveIterations()]}async setWeights(e){if(e=await this.extractIterations(e),e.length!==0)throw new Error("SGD optimizer does not have settable weights.")}getConfig(){return{learningRate:this.learningRate}}static fromConfig(e,n){return new e(n.learningRate)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class d8 extends vO{static get className(){return"Momentum"}constructor(e,n,r=!1){super(e),this.learningRate=e,this.momentum=n,this.useNesterov=r,this.accumulations=[],this.m=ct(this.momentum)}applyGradients(e){(Array.isArray(e)?e.map(r=>r.name):Object.keys(e)).forEach((r,o)=>{const s=H.registeredVariables[r];this.accumulations[o]==null&&(this.accumulations[o]={originalName:`${r}/momentum`,variable:Y(()=>rt(s).variable(!1))});const i=this.accumulations[o].variable,a=Array.isArray(e)?e[o].tensor:e[r];a!=null&&Y(()=>{let l;const c=de(U(this.m,i),a);this.useNesterov?l=de(U(this.c,de(a,U(c,this.m))),s):l=de(U(this.c,c),s),i.assign(c),s.assign(l)})}),this.incrementIterations()}dispose(){this.m.dispose(),this.accumulations!=null&&qe(this.accumulations.map(e=>e.variable))}setMomentum(e){this.momentum=e}async getWeights(){return[await this.saveIterations()].concat(this.accumulations.map(e=>({name:e.originalName,tensor:e.variable})))}async setWeights(e){e=await this.extractIterations(e);const n=!1;this.accumulations=e.map(r=>({originalName:r.name,variable:r.tensor.variable(n)}))}getConfig(){return{learningRate:this.learningRate,momentum:this.momentum,useNesterov:this.useNesterov}}static fromConfig(e,n){return new e(n.learningRate,n.momentum,n.useNesterov)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class f8 extends _l{static get className(){return"RMSProp"}constructor(e,n=.9,r=0,o=null,s=!1){if(super(),this.learningRate=e,this.decay=n,this.momentum=r,this.epsilon=o,this.accumulatedMeanSquares=[],this.accumulatedMoments=[],this.accumulatedMeanGrads=[],this.centered=s,o==null&&(this.epsilon=H.backend.epsilon()),e==null)throw new Error("learningRate for RMSPropOptimizer must be defined.")}applyGradients(e){(Array.isArray(e)?e.map(r=>r.name):Object.keys(e)).forEach((r,o)=>{const s=H.registeredVariables[r],i=!1;this.accumulatedMeanSquares[o]==null&&(this.accumulatedMeanSquares[o]={originalName:`${r}/rms`,variable:Y(()=>rt(s).variable(i))}),this.accumulatedMoments[o]==null&&(this.accumulatedMoments[o]={originalName:`${r}/momentum`,variable:Y(()=>rt(s).variable(i))}),this.accumulatedMeanGrads[o]==null&&this.centered&&(this.accumulatedMeanGrads[o]={originalName:`${r}/mg`,variable:Y(()=>rt(s).variable(i))});const a=Array.isArray(e)?e[o].tensor:e[r];if(a==null)return;const l=this.accumulatedMeanSquares[o].variable,c=this.accumulatedMoments[o].variable;Y(()=>{const u=de(U(l,this.decay),U(Et(a),1-this.decay));if(this.centered){const d=this.accumulatedMeanGrads[o].variable,f=de(U(d,this.decay),U(a,1-this.decay)),h=Ae(U(a,this.learningRate),Yn(_e(u,de(Et(f),this.epsilon)))),p=de(U(c,this.momentum),h);l.assign(u),d.assign(f),c.assign(p);const m=_e(s,p);s.assign(m)}else{const d=de(U(l,this.decay),U(Et(a),1-this.decay)),f=de(U(c,this.momentum),Ae(U(a,this.learningRate),Yn(de(d,this.epsilon))));l.assign(d),c.assign(f);const h=_e(s,f);s.assign(h)}})}),this.incrementIterations()}dispose(){this.accumulatedMeanSquares!=null&&qe(this.accumulatedMeanSquares.map(e=>e.variable)),this.accumulatedMeanGrads!=null&&this.centered&&qe(this.accumulatedMeanGrads.map(e=>e.variable)),this.accumulatedMoments!=null&&qe(this.accumulatedMoments.map(e=>e.variable))}async getWeights(){const e=[...this.accumulatedMeanSquares,...this.accumulatedMoments];return this.centered&&e.push(...this.accumulatedMeanGrads),[await this.saveIterations()].concat(e.map(n=>({name:n.originalName,tensor:n.variable})))}async setWeights(e){e=await this.extractIterations(e);const n=this.centered?e.length/3:e.length/2,r=!1;this.accumulatedMeanSquares=e.slice(0,n).map(o=>({originalName:o.name,variable:o.tensor.variable(r)})),this.accumulatedMoments=e.slice(n,n*2).map(o=>({originalName:o.name,variable:o.tensor.variable(r)})),this.centered&&(this.accumulatedMeanGrads=e.slice(n*2,n*3).map(o=>({originalName:o.name,variable:o.tensor.variable(r)})))}getConfig(){return{learningRate:this.learningRate,decay:this.decay,momentum:this.momentum,epsilon:this.epsilon,centered:this.centered}}static fromConfig(e,n){return new e(n.learningRate,n.decay,n.momentum,n.epsilon,n.centered)}}/**
 * @license
 * Copyright 2022 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const e4e=[a8,l8,c8,u8,d8,f8,vO];function t4e(){for(const t of e4e)ue(t)}function xO(t,e){const n=t.shape.length,r=e.shape.length;if(n<1)throw new Error(`tf.gatherND() expects the input to be rank 1 or higher, but the rank was ${n}.`);if(r<1)throw new Error(`tf.gatherND() expects the indices to be rank 1 or higher, but the rank was ${r}.`);if(e.dtype!=="int32")throw new Error(`tf.gatherND() expects the indices to be int32 type, but the dtype was ${e.dtype}.`);if(e.shape[r-1]>n)throw new Error(`index innermost dimension length must be <= tensor rank; saw: ${e.shape[r-1]} vs. ${n}`);if(ne(t.shape)===0)throw new Error(`Requested more than 0 entries, but input is empty. Input shape: ${t.shape}.`);const o=e.shape,s=o[o.length-1];let i=1;for(let d=0;d<o.length-1;++d)i*=o[d];const a=t.shape,l=o.slice();l.pop();let c=1;for(let d=s;d<n;++d)c*=a[d],l.push(a[d]);const u=[...Ie(t.shape).map(d=>d/c),1].slice(0,s);return[l,i,c,u]}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const kI=-2,n4e=-1;function bO(t,e,n){const r=t.shape.length;M(r===e.length,()=>`Error in slice${r}D: Length of begin ${e} must match the rank of the array (${r}).`),M(r===n.length,()=>`Error in slice${r}D: Length of size ${n} must match the rank of the array (${r}).`);for(let o=0;o<r;++o)M(e[o]+n[o]<=t.shape[o],()=>`Error in slice${r}D: begin[${o}] + size[${o}] (${e[o]+n[o]}) would overflow input.shape[${o}] (${t.shape[o]})`)}function r4e(t){const e=[];let n=0;for(;t>0;)t&1&&e.push(n),t/=2,n++;return e}function wO(t,e,n){const r=[];for(let o=0;o<t.length;o++)r[o]=Math.ceil((e[o]-t[o])/n[o]);return r}function h8(t,e,n,r){const o=[...t];for(let s=o.length;s<r.length;s++)o.push(1);for(let s=0;s<n;s++)s===0?o[e]=1:(o.splice(e,0,1),o.pop());return o}function p8(t,e,n){return n<=t?n:n-(e-1)}function m8(t,e){const n=[];for(let r=0;r<t;r++)n.push(e+r);return n}function o4e(t,e,n,r,o,s,i,a,l){const c=t.length;let u=new Array(c),d=new Array(c),f=new Array(c);if(e.length&&n>0){const h=e[0],p=n+1;u=g8(i,h,p,r,t),d=y8(a,h,p,o,t),f=h8(s,h,p,t)}else for(let h=0;h<c;h++)u[h]=x8(i,r,s,t,h,l),d[h]=b8(a,o,s,t,h,l),f[h]=v8(s,h,l);return{begin:u,end:d,strides:f}}function g8(t,e,n,r,o){const s=[...o],i=m8(n,e);for(let a=0;a<s.length;a++)if(i.indexOf(a)>-1)s[a]=0;else{const l=p8(e,n,a);let c=r[l];t&1<<l&&(c=0),s[a]=c}return s}function y8(t,e,n,r,o){const s=[...o],i=m8(n,e);for(let a=0;a<s.length;a++)if(i.indexOf(a)>-1)s[a]=Number.MAX_SAFE_INTEGER;else{const l=p8(e,n,a);let c=r[l];t&1<<l&&(c=Number.MAX_SAFE_INTEGER),s[a]=c}for(let a=0;a<s.length;a++){const l=o[a];s[a]<0&&(s[a]+=l),s[a]=jc(0,s[a],o[a])}return s}function v8(t,e,n){let r=t[e];return(n&1<<e||r==null)&&(r=1),r}function x8(t,e,n,r,o,s){let i=e[o];const a=n[o]||1;(t&1<<o||s&1<<o||i==null)&&(a>0?i=Number.MIN_SAFE_INTEGER:i=Number.MAX_SAFE_INTEGER);const l=r[o];return i<0&&(i+=l),i=jc(0,i,l-1),i}function b8(t,e,n,r,o,s){let i=e[o];const a=n[o]||1;(t&1<<o||s&1<<o||i==null)&&(a>0?i=Number.MAX_SAFE_INTEGER:i=Number.MIN_SAFE_INTEGER);const l=r[o];return i<0&&(i+=l),a>0?i=jc(0,i,l):i=jc(-1,i,l-1),i}function SO(t,e,n){let r=n.length;for(let o=0;o<n.length;o++)if(n[o]>1){r=o;break}for(let o=r+1;o<n.length;o++)if(e[o]>0||n[o]!==t[o])return!1;return!0}function CO(t,e){let n=t.length>0?t[t.length-1]:1;for(let r=0;r<t.length-1;r++)n+=t[r]*e[r];return n}function q1(t,e,n){let r;const o=t.shape.length;typeof e=="number"?r=[e,...new Array(o-1).fill(0)]:e.length<o?r=e.concat(new Array(o-e.length).fill(0)):r=e.slice(),r.forEach(i=>{M(i!==-1,()=>"slice() does not support negative begin indexing.")});let s;return n==null?s=new Array(o).fill(-1):typeof n=="number"?s=[n,...new Array(o-1).fill(-1)]:n.length<o?s=n.concat(new Array(o-n.length).fill(-1)):s=n,s=s.map((i,a)=>i>=0?i:(M(i===-1,()=>`Negative size values should be exactly -1 but got ${i} for the slice() size at index ${a}.`),t.shape[a]-r[a])),[r,s]}function $O(t,e,n,r,o,s,i,a,l){let c;if(r==null?(c=new Array(e.length),c.fill(1)):c=r,i!=null&&i&i-1)throw new Error("Multiple ellipses in slice is not allowed.");let u=!1;const d={dims:c.length,numAddAxisAfterEllipsis:0,begin:e.slice(),end:n.slice(),strides:c.slice(),beginMask:o,endMask:s,ellipsisMask:i,newAxisMask:a,shrinkAxisMask:l};for(let x=0;x<d.dims;x++)u&&1<<x&a&&d.numAddAxisAfterEllipsis++,1<<x&i&&(u=!0);u||(d.ellipsisMask|=1<<d.dims,d.dims++);const f={dims:t.length,beginMask:0,endMask:0,beginValid:!1,endValid:!1};s4e(d,f);let h=!0,p=!0,m=!0;const g=[],y=[];for(let x=0;x<t.length;++x){if(f.strides[x]===0)throw Error(`strides[${x}] must be non-zero`);const b=!!(f.shrinkAxisMask&1<<x),w=t[x];if(w===-1){g.push(b?1:-1);continue}const C=[f.beginMask&1<<x,f.endMask&1<<x],$=[f.strides[x]>0?0:-1,f.strides[x]>0?w:w-1];if(b&&f.strides[x]<=0)throw Error("only stride 1 allowed on non-range indexing.");m=m&&f.strides[x]===1;const T=!!(f.beginMask&1<<x&&f.endMask&1<<x);if(f.beginValid&&f.endValid){if(b){const A=f.begin[x]<0?w+f.begin[x]:f.begin[x];if(f.begin[x]=A,f.end[x]=f.begin[x]+1,A<0||A>=w)throw Error(`slice index ${f.begin[x]} of dimension ${x} out of bounds.`)}else f.begin[x]=ij(f.begin[x],0,f.strides[x],w,C,$),f.end[x]=ij(f.end[x],1,f.strides[x],w,C,$);const N=f.strides[x]===1&&f.begin[x]===0&&f.end[x]===w;h=h&&N,p=p&&(x===0&&f.strides[x]===1||N)}else h=h&&f.strides[x]===1&&T,p=p&&(x===0&&f.strides[x]===1||T);let I,E=!1;if(f.beginValid&&f.endValid?(I=f.end[x]-f.begin[x],E=!0):b?(I=1,E=!0):T&&w>=0&&(f.strides[x]<0?I=-w:I=w,E=!0),E){let N;I===0||I<0!=f.strides[x]<0?N=0:N=Math.trunc(I/f.strides[x])+(I%f.strides[x]!==0?1:0),g.push(N)}else g.push(-1)}for(let x=0;x<f.finalShapeGatherIndices.length;++x){const b=f.finalShapeGatherIndices[x];b>=0?y.push(g[b]):b===kI&&y.push(1)}return{finalShapeSparse:y.filter((x,b)=>f.finalShapeGatherIndices[b]!==kI),finalShape:y,isIdentity:h,sliceDim0:p,isSimpleSlice:m,begin:f.begin,end:f.end,strides:f.strides}}function s4e(t,e){e.beginMask=0,e.endMask=0,e.shrinkAxisMask=0;let n=0;e.beginValid=t.begin!=null,e.endValid=t.end!=null,e.begin=new Array(e.dims),e.end=new Array(e.dims),e.strides=new Array(e.dims),e.finalShapeGatherIndices=[],e.finalShapeGatherIndicesSparse=[],e.inputShapeGatherIndicesSparse=new Array(e.dims);for(let r=0;r<t.dims;r++)if(1<<r&t.ellipsisMask){const o=Math.min(e.dims-(t.dims-r)+1+t.numAddAxisAfterEllipsis,e.dims);for(;n<o;n++)e.begin[n]=0,e.end[n]=0,e.strides[n]=1,e.beginMask|=1<<n,e.endMask|=1<<n,e.finalShapeGatherIndices.push(n),e.finalShapeGatherIndicesSparse.push(-1),e.inputShapeGatherIndicesSparse[n]=r}else if(1<<r&t.newAxisMask)e.finalShapeGatherIndices.push(kI),e.finalShapeGatherIndicesSparse.push(-1);else{if(n===e.begin.length)throw Error(`Index out of range using input dim ${n}; input has only ${e.dims} dims, ${e.begin.length}.`);t.begin!=null&&(e.begin[n]=t.begin[r]),t.end!=null&&(e.end[n]=t.end[r]),e.strides[n]=t.strides[r],t.beginMask&1<<r&&(e.beginMask|=1<<n),t.endMask&1<<r&&(e.endMask|=1<<n),t.shrinkAxisMask&1<<r?(e.finalShapeGatherIndices.push(n4e),e.finalShapeGatherIndicesSparse.push(-1),e.shrinkAxisMask|=1<<n):(e.finalShapeGatherIndices.push(n),e.finalShapeGatherIndicesSparse.push(r)),e.inputShapeGatherIndicesSparse[n]=r,n++}}function ij(t,e,n,r,o,s){if(o[e])return n>0?s[e]:s[e+1&1];{const i=t<0?r+t:t;return i<s[0]?s[0]:i>s[1]?s[1]:i}}const i4e=Object.freeze(Object.defineProperty({__proto__:null,assertParamsValid:bO,computeFlatOffset:CO,computeOutShape:wO,getNormalizedAxes:o4e,isSliceContinous:SO,maskToAxes:r4e,parseSliceParams:q1,sliceInfo:$O,startForAxis:x8,startIndicesWithElidedDims:g8,stopForAxis:b8,stopIndicesWithElidedDims:y8,stridesForAxis:v8,stridesWithElidedDims:h8},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class a4e{static sgd(e){return new vO(e)}static momentum(e,n,r=!1){return new d8(e,n,r)}static rmsprop(e,n=.9,r=0,o=null,s=!1){return new f8(e,n,r,o,s)}static adam(e=.001,n=.9,r=.999,o=null){return new c8(e,n,r,o)}static adadelta(e=.001,n=.95,r=null){return new a8(e,n,r)}static adamax(e=.002,n=.9,r=.999,o=null,s=0){return new u8(e,n,r,o,s)}static adagrad(e,n=.1){return new l8(e,n)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Nu=a4e;/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const l4e=typeof requestAnimationFrame<"u"?requestAnimationFrame:typeof setImmediate<"u"?setImmediate:t=>t();function w8(){return new Promise(t=>l4e(()=>t()))}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kO(t,e){const n=t[0].length;t.forEach((o,s)=>{M(o.length===n,()=>`Error in concat${n}D: rank of tensors[${s}] must be the same as the rank of the rest (${n})`)}),M(e>=0&&e<n,()=>`Error in concat${n}D: axis must be between 0 and ${n-1}.`);const r=t[0];t.forEach((o,s)=>{for(let i=0;i<n;i++)M(i===e||o[i]===r[i],()=>`Error in concat${n}D: Shape of tensors[${s}] (${o}) does not match the shape of the rest (${r}) along the non-concatenated axis ${s}.`)})}function ci(t,e){const n=t[0].slice();for(let r=1;r<t.length;r++)n[e]+=t[r][e];return n}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var gs;(function(t){t[t.FIRST_DIM_SIZE=0]="FIRST_DIM_SIZE",t[t.VALUE_ROWIDS=1]="VALUE_ROWIDS",t[t.ROW_LENGTHS=2]="ROW_LENGTHS",t[t.ROW_SPLITS=3]="ROW_SPLITS",t[t.ROW_LIMITS=4]="ROW_LIMITS",t[t.ROW_STARTS=5]="ROW_STARTS"})(gs||(gs={}));function S8(t,e,n){let r=new Array;if(n==null&&e==null)return r;if(e==null)for(;r.length<t+n.length;)r.push(-1);else r=e.slice();if(n==null)return r;if(t+n.length!==r.length)throw new Error(`rt input.shape and shape=${e} are incompatible: rt input.rank = ${t+n.length}, but shape.rank = ${r.length}`);for(let o=1;o<n.length;++o){const s=n[o],i=r[r.length-n.length+o],a=r[i];if(s>=0)if(a>=0){if(a!==s)throw new Error(`rt input.shape and shape=${e} are incompatible: rt input.shape[${o+t}] = ${s} but shape[${o+t}] = ${a}`)}else r[i]=s}return r}function C8(t){const e={FIRST_DIM_SIZE:gs.FIRST_DIM_SIZE,VALUE_ROWIDS:gs.VALUE_ROWIDS,ROW_LENGTHS:gs.ROW_LENGTHS,ROW_SPLITS:gs.ROW_SPLITS,ROW_LIMITS:gs.ROW_LIMITS,ROW_STARTS:gs.ROW_STARTS},n=[];for(const r of t)if(r in e)n.push(e[r]);else break;return n}function $8(t){return t.length===0?0:t[0]===gs.FIRST_DIM_SIZE?t.length-1:t.length}function k8(t,e){if(t==null||e==null)return;const n=t.length,r=e.length;if(n>=r)throw new Error(`defaultValue.shape=${t} and ragged tensor flatValues.shape=${e}, are incompatible: defaultValue.rank = ${n} must be less than ragged tensor input flatValues.rank = ${r})`);for(let o=0;o<Math.min(n,r-1);++o){const s=t[o],i=e[o+1];if(s>=0&&i>=0&&s!==1&&s!==i)throw new Error(`defaultValue.shape=${t}, and ragged tensor input flatValues.shape=${e} are incompatible: defaultValue.shape[${o-t.length}] = ${s} but ragged tensor input.flatValues.shape[${o-t.length}] = ${i}`)}}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const TO=30;function X1(t){return t<=TO?t:lI(t,Math.floor(Math.sqrt(t)))}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function IO(t,e,n){const r=n*(typeof t=="number"?t:t[0]),o=e*(typeof t=="number"?t:t[1]);return[r,o]}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function py(t,e,n,r=!0){let o=[];if(r)o=o.concat(e.slice(0)),o.push(t[0]/n),o=o.concat(t.slice(1));else{o=o.concat(t[0]);const s=e.length;for(let i=0;i<s;++i)o=o.concat([t[i+1]/e[i],e[i]]);o=o.concat(t.slice(s+1))}return o}function my(t,e,n=!0){const r=[];if(n){r.push(e);for(let o=e+1;o<t;++o)o<=2*e?(r.push(o),r.push(o-(e+1))):r.push(o)}else{const o=[],s=[];for(let i=1;i<t;++i)i>=e*2+1||i%2===1?s.push(i):o.push(i);r.push(...o),r.push(0),r.push(...s)}return r}function gy(t,e,n,r=!0){const o=[];r?o.push(t[0]/n):o.push(t[0]*n);for(let s=1;s<t.length;++s)s<=e.length?r?o.push(e[s-1]*t[s]):o.push(t[s]/e[s-1]):o.push(t[s]);return o}function EO(t,e){const n=[0];for(let r=0;r<e;++r)n.push(t[r][0]);return n}function NO(t,e,n){const r=t.slice(0,1);for(let o=0;o<n;++o)r.push(t[o+1]-e[o][0]-e[o][1]);return r}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Y1=1.7580993408473768,Q1=1.0507009873554805;/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const AO=.3275911,OO=.254829592,PO=-.284496736,RO=1.421413741,_O=-1.453152027,DO=1.061405429;/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ra(t,e){if(t.length!==e.length)throw new Error(`Cannot merge real and imag arrays of different lengths. real:${t.length}, imag: ${e.length}.`);const n=new Float32Array(t.length*2);for(let r=0;r<n.length;r+=2)n[r]=t[r/2],n[r+1]=e[r/2];return n}function T8(t){const e=new Float32Array(t.length/2),n=new Float32Array(t.length/2);for(let r=0;r<t.length;r+=2)e[r/2]=t[r],n[r/2]=t[r+1];return{real:e,imag:n}}function I8(t){const e=Math.ceil(t.length/4),n=new Float32Array(e),r=new Float32Array(e);for(let o=0;o<t.length;o+=4)n[Math.floor(o/4)]=t[o],r[Math.floor(o/4)]=t[o+1];return{real:n,imag:r}}function E8(t){const e=Math.floor(t.length/4),n=new Float32Array(e),r=new Float32Array(e);for(let o=2;o<t.length;o+=4)n[Math.floor(o/4)]=t[o],r[Math.floor(o/4)]=t[o+1];return{real:n,imag:r}}function MO(t,e){const n=t[e*2],r=t[e*2+1];return{real:n,imag:r}}function N8(t,e,n,r){t[r*2]=e,t[r*2+1]=n}function A8(t,e){const n=new Float32Array(t/2),r=new Float32Array(t/2);for(let o=0;o<Math.ceil(t/2);o++){const s=(e?2:-2)*Math.PI*(o/t);n[o]=Math.cos(s),r[o]=Math.sin(s)}return{real:n,imag:r}}function O8(t,e,n){const r=(n?2:-2)*Math.PI*(t/e),o=Math.cos(r),s=Math.sin(r);return{real:o,imag:s}}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const WC="->",c4e=/->/g,aj=",",lj="...";function FO(t,e){t=t.replace(/\s/g,"");const n=(t.length-t.replace(c4e,"").length)/WC.length;if(n<1)throw new Error("Equations without an arrow are not supported.");if(n>1)throw new Error(`Equation must contain exactly one arrow ("${WC}").`);const[r,o]=t.split(WC);M(r.indexOf(lj)===-1,()=>`The ellipsis notation ("${lj}") is not supported yet.`);const s=r.split(aj),i=s.length;if(e!==i)throw new Error(`Expected ${i} input tensors, received ${e}`);if(i>2)throw new Error("Support for more than 2 input tensors is not implemented yet.");const a=[];for(let f=0;f<o.length;++f){const h=o[f];if(!s.some(p=>p.indexOf(h)!==-1))throw new Error(`Output subscripts contain the label ${h} not present in the input subscripts.`);a.indexOf(h)===-1&&a.push(h)}for(let f=0;f<r.length;++f){const h=r[f];a.indexOf(h)===-1&&h!==aj&&a.push(h)}const l=new Array(s.length);for(let f=0;f<i;++f){if(new Set(s[f].split("")).size!==s[f].length)throw new Error(`Found duplicate axes in input component ${s[f]}. Support for duplicate axes in input is not implemented yet.`);l[f]=[];for(let h=0;h<s[f].length;++h)l[f].push(a.indexOf(s[f][h]))}const c=a.length,u=o.length,d=[];for(let f=u;f<c;++f)d.push(f);return{allDims:a,summedDims:d,idDims:l}}function LO(t,e){let n=new Array(t);n.fill(-1);for(let o=0;o<e.length;++o)n[e[o]]=o;const r=[];for(let o=0;o<t;++o)n[o]===-1&&r.push(o);return n=n.filter(o=>o!==-1),{permutationIndices:n,expandDims:r}}function jO(t,e,n){const r=new Array(t);for(let o=0;o<n.length;++o){const s=n[o].shape;for(let i=0;i<e[o].length;++i)r[e[o][i]]===void 0?r[e[o][i]]=s[i]:M(r[e[o][i]]===s[i],()=>`Expected dimension ${r[e[o][i]]} at axis ${i} of input shaped ${JSON.stringify(s)}, but got dimension ${s[i]}`)}}function BO(t,e){const n=t,r=[];let o=0;t.length===0&&n.push(-1),o=t.length+1;for(let i=0;i<o;++i)r.push([]);const s=[];for(let i=0;i<n.length;++i){const a=n[i],l=u4e(e,a);for(const c of l)s.indexOf(c)===-1&&(r[i].push(c),s.push(c))}return{path:n,steps:r}}function zO(t){return t.every((e,n)=>e===n)}function u4e(t,e){const n=[];for(let r=0;r<t.length;++r)(t[r].length===0||t[r].indexOf(e)!==-1||e===-1)&&n.push(r);return n}function WO(t,e,n=0){let r=[];if(typeof e=="number")M(t.shape[n]%e===0,()=>"Number of splits must evenly divide the axis."),r=new Array(e).fill(t.shape[n]/e);else{const o=e.reduce((i,a)=>(a===-1&&(i+=1),i),0);M(o<=1,()=>"There should be only one negative value in split array.");const s=e.indexOf(-1);if(s!==-1){const i=e.reduce((a,l)=>l>0?a+l:a);e[s]=t.shape[n]-i}M(t.shape[n]===e.reduce((i,a)=>i+a),()=>"The sum of sizes must match the size of the axis dimension."),r=e}return r}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function P8(t){return`Received SparseTensor with denseShape[0] = 0 but
  indices.shape[0] = ${t}`}function R8(t,e){return`indices(${t}, 0) is invalid: ${e} < 0`}function _8(t,e,n){return`indices(${t}, 0) is invalid: ${e} >= ${n}`}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function D8(t,e){return`only one output dimension may be -1, not both ${t} and ${e}`}function M8(t,e){return`size ${t} must be non-negative, not ${e}`}function F8(){return"reshape cannot infer the missing input size for an empty tensor unless all specified input sizes are non-zero"}function L8(t,e){const n=ne(t),r=ne(e);return`Input to reshape is a SparseTensor with ${n}
  dense values, but the requested shape requires a multiple of ${r}. inputShape=${t} outputShape= ${e}`}function j8(t,e){const n=ne(t),r=ne(e);return`Input to reshape is a tensor with ${n} dense values, but the requested shape has ${r}. inputShape=${t} outputShape=${e}`}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function TI(){return"segment ids must be >= 0"}function B8(){return"segment ids are not increasing"}function z8(t,e){return`Segment id ${t} out of range [0, ${e}), possibly because segmentIds input is not sorted.`}function W8(t,e,n){return`Bad: indices[${t}] == ${e} out of range [0, ${n})`}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function V8(t,e){let n=!1,r;for(t<=TO?(r=t,n=!0):r=lI(t,Math.floor(Math.sqrt(t)));!n;)r>e||r===t?n=!0:r=lI(t,r+1);return r}function U8(t,e,n){const r=[],o=t.length;for(let s=0;s<o;s++)s!==e?r.push(t[s]):r.push(n);return r}function VO(t,e,n,r){const o=e.shape.length,s=t.shape.length;if(r!==0&&(r<-o||r>o))throw new Error(`Expect batchDims in the range of [-${o}, ${o}], but got ${r}`);if(r<0&&(r+=o),r>s)throw new Error(`batchDims (${r}) must be less than rank(x) (
    ${s}).`);if(n<r)throw new Error(`batchDims (${r}) must be less than or equal to axis (${n}).`);for(let d=0;d<r;++d)if(t.shape[d]!==e.shape[d])throw new Error(`x.shape[${d}]: ${t.shape[d]} should be equal to indices.shape[${d}]: ${e.shape[d]}.`);const i=t.shape[n],a=[];let l=1,c=1,u=1;for(let d=0;d<r;++d)a.push(t.shape[d]),l*=t.shape[d];for(let d=r;d<n;d++)a.push(t.shape[d]),c*=t.shape[d];for(let d=r;d<o;d++)a.push(e.shape[d]);for(let d=n+1;d<s;d++)a.push(t.shape[d]),u*=t.shape[d];return{batchSize:l,sliceSize:u,outerSize:c,dimSize:i,outputShape:a}}const d4e=Object.freeze(Object.defineProperty({__proto__:null,collectGatherOpShapeInfo:VO,computeOutShape:U8,segOpComputeOptimalWindowSize:V8},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function oa(t){try{return t.map(e=>fl(e))}catch(e){throw new Error(`Failed to decode encoded string bytes into utf-8, error: ${e}`)}}function G8(t){return t.map(e=>rl(e))}const f4e=Object.freeze(Object.defineProperty({__proto__:null,ERF_A1:OO,ERF_A2:PO,ERF_A3:RO,ERF_A4:_O,ERF_A5:DO,ERF_P:AO,PARALLELIZE_THRESHOLD:TO,get RowPartitionType(){return gs},SELU_SCALE:Q1,SELU_SCALEALPHA:Y1,applyActivation:fO,assertAndGetBroadcastShape:Be,assertAxesAreInnerMostDims:jn,assertParamsConsistent:kO,assignToTypedArray:N8,axesAreInnerMostDims:VA,calculateShapes:hu,checkEinsumDimSizes:jO,checkPadOnDimRoundingMode:Dr,combineLocations:Mq,combineRaggedTensorToTensorShapes:S8,complexWithEvenIndex:I8,complexWithOddIndex:E8,computeConv2DInfo:Ln,computeConv3DInfo:Al,computeDefaultPad:FA,computeDilation2DInfo:cy,computeOptimalWindowSize:X1,computeOutAndReduceShapes:On,computeOutShape:ci,computePool2DInfo:Jo,computePool3DInfo:ua,convertConv2DDataFormat:da,decodeEinsumEquation:FO,eitherStridesOrDilationsAreOne:Qn,expandShapeToKeepDim:un,exponent:O8,exponents:A8,fromStringArrayToUint8:G8,fromUint8ToStringArray:oa,getAxesPermutation:Wt,getBroadcastDims:pf,getComplexWithIndex:MO,getEinsumComputePath:BO,getEinsumPermutation:LO,getFusedBiasGradient:dO,getFusedDyActivation:uO,getImageCenter:IO,getInnerMostAxes:nn,getPermuted:my,getRaggedRank:$8,getReductionAxes:xn,getReshaped:py,getReshapedPermuted:gy,getRowPartitionTypesHelper:C8,getSliceBeginCoords:EO,getSliceSize:NO,getSparseFillEmptyRowsIndicesDenseShapeMismatch:P8,getSparseFillEmptyRowsNegativeIndexErrorMessage:R8,getSparseFillEmptyRowsOutOfRangeIndexErrorMessage:_8,getSparseReshapeEmptyTensorZeroOutputDimErrorMessage:F8,getSparseReshapeInputOutputMismatchErrorMessage:j8,getSparseReshapeInputOutputMultipleErrorMessage:L8,getSparseReshapeMultipleNegativeOneOutputDimErrorMessage:D8,getSparseReshapeNegativeOutputDimErrorMessage:M8,getSparseSegmentReductionIndicesOutOfRangeErrorMessage:W8,getSparseSegmentReductionNegativeSegmentIdsErrorMessage:TI,getSparseSegmentReductionNonIncreasingSegmentIdsErrorMessage:B8,getSparseSegmentReductionSegmentIdOutOfRangeErrorMessage:z8,getUndoAxesPermutation:Ol,isIdentityPermutation:zO,log:qMe,mergeRealAndImagArrays:ra,prepareAndValidate:xO,prepareSplitSize:WO,segment_util:d4e,shouldFuse:hO,slice_util:i4e,splitRealAndImagArrays:T8,stridesOrDilationsArePositive:Uc,tupleValuesAreOne:Vc,upcastType:Yr,validateDefaultValueShape:k8,validateInput:VBe,validateUpdateShape:t8,warn:lo},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */t4e();/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const H8={kernelName:jw,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>U(t,hy(xe(n,"float32"),-1))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const h4e={kernelName:pg,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>{const r=Et(xe(n,"float32")),o=Yn(_e(ct(1),r));return Zt(Ae(t,o))}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const p4e={kernelName:mg,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>{const r=Yn(_e(Et(xe(n,"float32")),1));return Ae(t,r)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const m4e={kernelName:Kf,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e,o=Be(n.shape,r.shape);return{a:()=>{let a=t;const l=xn(n.shape,o);return l.length>0&&(a=Ee(a,l)),q(a,n.shape)},b:()=>{let a=t;const l=xn(r.shape,o);return l.length>0&&(a=Ee(a,l)),q(a,r.shape)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const g4e={kernelName:K2,saveAllInputs:!0,gradFunc:(t,e)=>{const n={};return e.forEach((r,o)=>{n[o]=()=>t.clone()}),n}};/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const y4e={kernelName:Bw,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>rt(n)}}};/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const v4e={kernelName:zw,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>rt(n)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const x4e={kernelName:gg,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>Ae(t,Yn(_e(ct(1),Et(xe(n,"float32")))))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const b4e={kernelName:yg,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>{const r=Yn(de(ct(1),Et(xe(n,"float32"))));return Ae(t,r)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const w4e={kernelName:bg,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e,o=Be(n.shape,r.shape);return{a:()=>{const a=de(Et(n),Et(r));let l=U(t,Ae(r,a));const c=xn(n.shape,o);return c.length>0&&(l=Ee(l,c)),q(l,n.shape)},b:()=>{const a=de(Et(n),Et(r));let l=Zt(U(t,Ae(n,a)));const c=xn(r.shape,o);return c.length>0&&(l=Ee(l,c)),q(l,r.shape)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const S4e={kernelName:vg,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>Ae(t,de(Et(xe(n,"float32")),1))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const C4e={kernelName:xg,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>Ae(t,_e(ct(1),Et(xe(n,"float32"))))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $4e(t,e,n,r,o,s){const i=j(t,"dy","avgPool3dGrad"),a=j(e,"input","avgPool3dGrad");let l=i,c=a,u=!1;a.rank===4&&(u=!0,l=q(i,[1,i.shape[0],i.shape[1],i.shape[2],i.shape[3]]),c=q(a,[1,a.shape[0],a.shape[1],a.shape[2],a.shape[3]])),M(l.rank===5,()=>`Error in avgPool3dGrad: dy must be rank 5 but got rank ${l.rank}.`),M(c.rank===5,()=>`Error in avgPool3dGrad: input must be rank 5 but got rank ${c.rank}.`),Dr("avgPool3dGrad",o,s);const d={dy:l,input:c},f={filterSize:n,strides:r,pad:o,dimRoundingMode:s},h=H.runKernel(Q2,d,f);return u?q(h,[h.shape[1],h.shape[2],h.shape[3],h.shape[4]]):h}const k4e=X({avgPool3dGrad_:$4e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const T4e={kernelName:Vw,inputsToSave:["x"],gradFunc:(t,e,n)=>{const[r]=e,{filterSize:o,strides:s,pad:i,dimRoundingMode:a}=n;return{x:()=>k4e(t,r,o,s,i,a)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function I4e(t,e,n,r,o){const s=j(t,"dy","avgPoolGrad"),i=j(e,"input","avgPoolGrad");M(i.rank===s.rank,()=>`Rank of input (${i.rank}) does not match rank of dy (${s.rank})`);let a=i,l=s,c=!1;i.rank===3&&(c=!0,a=q(i,[1,i.shape[0],i.shape[1],i.shape[2]]),l=q(s,[1,s.shape[0],s.shape[1],s.shape[2]])),M(l.rank===4,()=>`Error in avgPoolGrad: dy must be rank 4 but got rank ${l.rank}.`),M(a.rank===4,()=>`Error in avgPoolGrad: input must be rank 4 but got rank ${a.rank}.`);const u={dy:l,input:a},d={filterSize:n,strides:r,pad:o},f=H.runKernel(Y2,u,d);return c?q(f,[f.shape[1],f.shape[2],f.shape[3]]):f}const E4e=X({avgPoolGrad_:I4e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const N4e={kernelName:Ww,inputsToSave:["x"],gradFunc:(t,e,n)=>{const[r]=e,{filterSize:o,strides:s,pad:i}=n;return{x:()=>E4e(t,r,o,s,i)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const A4e={kernelName:Uw,inputsToSave:["a","b"],gradFunc:(t,e,n)=>{const[r,o]=e,{transposeA:s,transposeB:i}=n;return!s&&!i?{a:()=>lt(t,o,!1,!0),b:()=>lt(r,t,!0,!1)}:!s&&i?{a:()=>lt(t,o,!1,!1),b:()=>lt(t,r,!0,!1)}:s&&!i?{a:()=>lt(o,t,!1,!0),b:()=>lt(r,t,!1,!1)}:{a:()=>lt(o,t,!0,!0),b:()=>lt(t,r,!0,!0)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const O4e={kernelName:Gw,gradFunc:(t,e,n)=>{const{blockShape:r,crops:o}=n;return{x:()=>QA(t,r,o)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const P4e={kernelName:UMe,gradFunc:(t,e,n)=>{const r=n,o=r.inputShape,s=r.shape,i=Array.from(s);for(let l=o.length-1;l>=0;l--)if(o[l]===s[l])i[l]=1;else if(o[l]!==1)throw new Error(`broadcastTo(): [${o}] cannot be broadcast to [${s}].`);const a=[];for(let l=0;l<i.length;l++)i[l]>1&&a.push(l);return{x:()=>Ee(t,a,!0)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const R4e={kernelName:wg,gradFunc:t=>({x:()=>t.clone()})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const _4e={kernelName:Sg,gradFunc:t=>({x:()=>rt(t)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const D4e={kernelName:Cg,inputsToSave:["x"],gradFunc:(t,e,n)=>{const[r]=e,{clipValueMin:o,clipValueMax:s}=n;return{x:()=>fr(ta(uu(r,o),Yf(r,s)),t,rt(t))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const M4e={kernelName:Hw,inputsToSave:["x"],gradFunc:H8.gradFunc};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const F4e={kernelName:Kw,saveAllInputs:!0,gradFunc:(t,e,n)=>{const r=e.map(l=>l.shape),{axis:o}=n,s=He(o,e[0].shape)[0],i=r.map(l=>l[s]);return po(t,i,s).map(l=>()=>l)}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const L4e={kernelName:qw,inputsToSave:["x","filter"],gradFunc:(t,e,n)=>{const[r,o]=e,{dilations:s,strides:i,pad:a,dataFormat:l}=n;return M(Vc(s),()=>`Error in gradient of conv2D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '${s}'`),{x:()=>BA(r.shape,t,o,i,a,l),filter:()=>cO(r,t,o.shape,i,a,l)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const j4e={kernelName:Xw,inputsToSave:["dy","filter"],gradFunc:(t,e,n)=>{const[r,o]=e,{strides:s,pad:i,dataFormat:a,dimRoundingMode:l}=n;return{dy:()=>Gc(t,o,s,i,a,1,l),filter:()=>cO(t,r,o.shape,s,i,a,l)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function B4e(t,e,n,r,o){let s=t;t.rank===4&&(s=q(t,[1,t.shape[0],t.shape[1],t.shape[2],t.shape[3]]));let i=e;i.rank===4&&(i=q(e,[1,e.shape[0],e.shape[1],e.shape[2],e.shape[3]])),M(s.rank===5,()=>`Error in conv3dDerFilter: input must be rank 5, but got shape ${s.shape}.`),M(i.rank===5,()=>`Error in conv3dDerFilter: dy must be rank 5, but got shape ${i.shape}.`),M(n.length===5,()=>`Error in conv3dDerFilter: filterShape must be length 5, but got ${n}.`),M(s.shape[4]===n[3],()=>`Error in conv3dDerFilter: depth of input ${s.shape[4]}) must match input depth in filter (${n[3]}.`),M(i.shape[4]===n[4],()=>`Error in conv3dDerFilter: depth of dy (${i.shape[4]}) must match output depth for filter (${n[4]}).`);const a={x:s,dy:i},l={strides:r,pad:o,filterShape:n};return H.runKernel(nA,a,l)}const z4e=X({conv3DBackpropFilter_:B4e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const W4e={kernelName:Yw,inputsToSave:["x","filter"],gradFunc:(t,e,n)=>{const{dilations:r,strides:o,pad:s}=n;M(Vc(r),()=>`Error in gradient of conv3D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '${r}'`);const[i,a]=e;return{x:()=>Pq(i.shape,t,a,o,s),filter:()=>z4e(i,t,a.shape,o,s)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const V4e={kernelName:$g,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>U(Zt(Qq(xe(n,"float32"))),t)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const U4e={kernelName:kg,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>U(Zq(xe(n,"float32")),t)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const G4e={kernelName:Qw,inputsToSave:["x"],gradFunc:(t,e,n)=>{const[r]=e,{axis:o,exclusive:s,reverse:i}=n;return{x:()=>{const a=Wt([o],r.rank);let l=_q(t,o,s,!i);return a!=null&&(l=nt(l,a)),l}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const H4e={kernelName:Zw,inputsToSave:["x","filter"],gradFunc:(t,e,n)=>{const{dilations:r,strides:o,pad:s,dimRoundingMode:i}=n,a=r??[1,1];M(Vc(a),()=>`Error in gradient of depthwiseConv2dNative: dilation rates greater than 1 are not yet supported. Got dilations '${a}'`);const[l,c]=e;return M(l.rank===4,()=>`Error in gradient of depthwiseConv2dNative: input must be rank 4, but got rank ${l.rank}.`),M(c.rank===4,()=>`Error in gradient of depthwiseConv2dNative: filter must be rank 4, but got rank ${c.rank}.`),M(l.shape[3]===c.shape[2],()=>`Error in gradient of depthwiseConv2d: number of input channels (${l.shape[3]}) must match the inChannels dimension in filter ${c.shape[2]}.`),M(Qn(o,a),()=>`Error in gradient of depthwiseConv2d: Either strides or dilations must be  1. Got strides ${o} and dilations '${a}'.`),Dr("depthwiseConv2d",s,i),{x:()=>lze(l.shape,t,c,o,s,a,i),filter:()=>ize(l,t,c.shape,o,s,a,i)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const K4e={kernelName:Jw,inputsToSave:["x","filter"],gradFunc:(t,e,n)=>{const[r,o]=e,s={x:r,filter:o,dy:t},i={x:r,filter:o,dy:t};return{x:()=>H.runKernel(cI,s,n),filter:()=>H.runKernel(uI,i,n)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const q4e={kernelName:Ig,outputsToSave:[!0],gradFunc:(t,e)=>{const[n]=e,r={dy:t,y:n};return{x:()=>H.runKernel(dA,r)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const X4e={kernelName:Eg,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e,r=U(mi(Zt(Et(n))),2/Math.sqrt(Math.PI));return{x:()=>U(t,r)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Y4e={kernelName:Ng,outputsToSave:[!0],gradFunc:(t,e)=>{const[n]=e;return{x:()=>U(t,n)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Q4e={kernelName:t1,inputsToSave:["input"],gradFunc:(t,e)=>{const[n]=e;return{input:()=>q(t,n.shape)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Z4e={kernelName:Ag,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>U(t,mi(n))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const J4e={kernelName:Og,gradFunc:t=>({x:()=>rt(t)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const eWe={kernelName:Pg,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e,o=Be(n.shape,r.shape);return{a:()=>{const a=Ae(t,xe(r,"float32")),l=xn(n.shape,o);return l.length>0?q(Ee(a,l),n.shape):a},b:()=>{let a=U(t,xe(n,"float32"));const l=xn(r.shape,o);l.length>0&&(a=q(Ee(a,l),r.shape));const c=Et(r);return Zt(Ae(a,xe(c,"float32")))}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const tWe={kernelName:n1,inputsToSave:["x","mean","variance","scale"],gradFunc:(t,e,n)=>{const{varianceEpsilon:r}=n,[o,s,i,a]=e,l=a??ct(1),c=xn(s.shape,o.shape),u=[];if(s.rank===1){for(let b=0;b<o.shape.length-1;++b)u.push(o.shape[b]);u.push(1)}const d=_e(o,s),f=U(t,l),h=qq(de(i,ct(r))),p=U(U(U(h,h),h),ct(-.5));return{x:()=>s.rank===1?q(U(U(t,Ss(q(h,[1,1,1,s.shape[0]]),u)),l),o.shape):q(U(U(t,h),l),o.shape),mean:()=>{let b=U(U(h,ct(-1)),f);return s.rank===1&&(b=Ee(b,c)),q(b,s.shape)},variance:()=>{let b=U(U(p,d),f);return s.rank===1&&(b=Ee(b,c)),q(b,s.shape)},scale:()=>{const b=U(d,h);let w=U(t,b);return s.rank===1&&(w=Ee(w,c)),q(w,s.shape)},offset:()=>{let b=t;return s.rank===1&&(b=Ee(b,c)),q(b,s.shape)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const nWe={kernelName:r1,inputsToSave:["x","indices"],gradFunc:(t,e,n)=>{const[r,o]=e,{axis:s,batchDims:i}=n,a=He(s,r.shape)[0],l=(c,u,d)=>()=>{const f=c.shape,h=u.size,p=f.slice(0,a),m=p.length,g=f.slice(s,f.length).slice(1),y=g.length,v=cj(0,m),x=cj(m+1,m+1+y),b=uj([p,[h],g]),w=q(d,b),C=q(u,[h]),$=uj([[m],v,x]),T=nt(w,$);let I=r8(T,C,c.shape[a]);const E=Ol($);return I=nt(I,E),I};if(i===1){const c=r.shape[0],u=r.split(c,0);return{x:()=>na(u.map((h,p)=>l(h,o.slice(p,1),t.slice(p,1))())).reshape(r.shape),indices:()=>o}}else return{x:l(r,o,t),indices:()=>o}}};function cj(t,e){const n=[];for(let r=t;r<e;++r)n.push(r);return n}function uj(t){const e=[];for(let n=0;n<t.length;++n)for(let r=0;r<t[n].length;++r)e.push(t[n][r]);return e}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const rWe={kernelName:Rg,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e;return{a:()=>rt(n),b:()=>rt(r)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const oWe={kernelName:_g,gradFunc:t=>({x:()=>xe(t,"float32")})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const sWe={kernelName:Dg,gradFunc:t=>({x:()=>rt(t)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const iWe={kernelName:Mg,gradFunc:t=>({x:()=>rt(t)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const aWe={kernelName:Fg,gradFunc:t=>({x:()=>rt(t)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const lWe={kernelName:s1,inputsToSave:["x"],gradFunc:(t,e,n)=>{const[r]=e,{alpha:o}=n,s=bo(r,0);return{x:()=>fr(s,t,U(t,o))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const cWe={kernelName:jg,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>Ae(t,de(n,1))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const uWe={kernelName:Lg,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>Ae(t,xe(n,"float32"))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const dWe={kernelName:HMe,inputsToSave:[],outputsToSave:[!0],gradFunc:(t,e,n)=>{const[r]=e,{axis:o}=n;return{logits:()=>{const i=mi(r);return _e(t,U(Ee(t,o,!0),i))}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fWe(t,e,n,r=5,o=1,s=1,i=.5){const a={x:t,y:e,dy:n},l={depthRadius:r,bias:o,alpha:s,beta:i};return H.runKernel(yA,a,l)}const hWe=X({localResponseNormalizationBackprop_:fWe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const pWe={kernelName:d1,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(t,e,n)=>{const[r,o]=e,{depthRadius:s,bias:i,alpha:a,beta:l}=n;return{x:()=>hWe(r,o,t,s,i,a,l)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function K8(t,e,n,r){return e.rank<n.rank&&(e=q(e,un(e.shape,r))),t.rank<n.rank&&(t=q(t,un(t.shape,r))),{x:()=>U(t,xe(pi(n,e),t.dtype))}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const dj={kernelName:f1,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(t,e,n)=>{const r=n,{reductionIndices:o}=r,s=e[0],i=e[1],a=He(o,s.shape),l=K8(t,i,s,a);return{x:()=>l.x()}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const mWe={kernelName:Bg,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e;return{a:()=>U(t,xe(uu(n,r),"float32")),b:()=>U(t,xe(Vb(n,r),"float32"))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gWe(t,e,n,r,o,s,i){const a=j(t,"dy","maxPool3dGrad"),l=j(e,"input","maxPool3dGrad"),c=j(n,"output","maxPool3dGrad");let u=a,d=l,f=c,h=!1;l.rank===4&&(h=!0,u=q(a,[1,a.shape[0],a.shape[1],a.shape[2],a.shape[3]]),d=q(l,[1,l.shape[0],l.shape[1],l.shape[2],l.shape[3]]),f=q(c,[1,c.shape[0],c.shape[1],c.shape[2],c.shape[3]])),M(u.rank===5,()=>`Error in maxPool3dGrad: dy must be rank 5 but got rank ${u.rank}.`),M(d.rank===5,()=>`Error in maxPool3dGrad: input must be rank 5 but got rank ${d.rank}.`),M(f.rank===5,()=>`Error in maxPool3dGrad: output must be rank 5 but got rank ${f.rank}.`),Dr("maxPool3dGrad",s,i);const p={dy:u,input:d,output:f},m={filterSize:r,strides:o,pad:s,dimRoundingMode:i},g=H.runKernel(xA,p,m);return h?q(g,[g.shape[1],g.shape[2],g.shape[3],g.shape[4]]):g}const yWe=X({maxPool3dGrad_:gWe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const vWe={kernelName:p1,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(t,e,n)=>{const[r,o]=e,{filterSize:s,strides:i,pad:a,dimRoundingMode:l}=n;return{x:()=>yWe(t,r,o,s,i,a,l)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xWe(t,e,n,r,o,s,i){const a=j(t,"dy","maxPoolGrad"),l=j(e,"input","maxPoolGrad"),c=j(n,"output","maxPoolGrad");M(l.rank===a.rank,()=>`Rank of input (${l.rank}) does not match rank of dy (${a.rank})`),M(a.rank===4,()=>`Error in maxPoolGrad: dy must be rank 4 but got rank ${a.rank}.`),M(l.rank===4,()=>`Error in maxPoolGrad: input must be rank 4 but got rank ${l.rank}.`),Dr("maxPoolGrad",s,i);const u={dy:a,input:l,output:c},d={filterSize:r,strides:o,pad:s,dimRoundingMode:i};return H.runKernel(vA,u,d)}const bWe=X({maxPoolGrad_:xWe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const wWe={kernelName:h1,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(t,e,n)=>{const[r,o]=e,{filterSize:s,strides:i,pad:a}=n;return{x:()=>bWe(t,r,o,s,i,a)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const SWe={kernelName:m1,inputsToSave:["x"],gradFunc:(t,e,n)=>{const[r]=e,{axis:o}=n,s=He(o,r.shape),a=On(r.shape,s)[1],l=ne(a);return{x:()=>{const u=r.shape.slice();s.forEach(h=>{u[h]=1});const d=q(t,u);return Ae(U(d,Rl(r.shape,"float32")),l)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const CWe={kernelName:g1,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(t,e,n)=>{const r=n,{axis:o}=r,[s,i]=e,a=He(o,s.shape),l=K8(t,i,s,a);return{x:()=>l.x()}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const $We={kernelName:zg,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e;return{a:()=>U(t,xe(Yf(n,r),"float32")),b:()=>U(t,xe(bo(n,r),"float32"))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const kWe={kernelName:y1,inputsToSave:["x"],gradFunc:(t,e,n)=>{const r=e[0],{paddings:o}=n,s=o.map(i=>i[0]);return{x:()=>Ct(t,s,r.shape)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const TWe={kernelName:Wg,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e,o=Be(n.shape,r.shape);return{a:()=>{const a=xn(n.shape,o);return a.length>0?q(Ee(t,a),n.shape):t},b:()=>{const a=U(t,Zt(K1(Ae(n,r)))),l=xn(r.shape,o);return l.length>0?q(Ee(a,l),r.shape):a}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const IWe={kernelName:Vg,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e,o=Be(n.shape,r.shape);return{a:()=>{const a=U(t,xe(r,"float32")),l=xn(n.shape,o);return l.length>0?q(Ee(a,l),n.shape):a},b:()=>{const a=U(t,xe(n,"float32")),l=xn(r.shape,o);return l.length>0?q(Ee(a,l),r.shape):a}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const EWe={kernelName:v1,gradFunc:t=>({x:()=>Zt(t)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const NWe={kernelName:w1,inputsToSave:["indices"],gradFunc:(t,e)=>{const n=e[0];return{indices:()=>kn(n.shape,"float32")}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const AWe={kernelName:b1,gradFunc:t=>({x:()=>rt(t)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const OWe={kernelName:S1,saveAllInputs:!0,gradFunc:(t,e,n)=>{const{axis:r}=n;return qc(t,r).map(s=>()=>s)}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const fj={kernelName:C1,inputsToSave:["x"],gradFunc:(t,e,n)=>{const r=e[0],{paddings:o}=n,s=o.map(i=>i[0]);return{x:()=>Ct(t,s,r.shape)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const PWe={kernelName:Ug,inputsToSave:["a","b"],outputsToSave:[!0],gradFunc:(t,e)=>{const[n,r,o]=e,s=n,i=r,a=Be(s.shape,i.shape);return{a:()=>{const u=xe(i,"float32");let d=U(t,U(u,Hc(s,_e(u,ct(1)))));const f=xn(s.shape,a);return f.length>0&&(d=Ee(d,f)),q(d,s.shape)},b:()=>{const u=bo(s,0),d=fr(u,gi(s),rt(s));let f=U(t,U(o,d));const h=xn(i.shape,a);return h.length>0&&(f=Ee(f,h)),q(f,i.shape)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const RWe={kernelName:$1,inputsToSave:["x","alpha"],gradFunc:(t,e)=>{const[n,r]=e,o=bo(n,0);return{x:()=>fr(o,t,U(t,r)),alpha:()=>{let s=fr(o,rt(t),U(t,n));const i=xn(r.shape,t.shape);return i.length>0&&(s=Ee(s,i)),q(s,r.shape)}}}};/**
 * @license
 * Copyright 2022 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _We(t,e,n){const r=t.shape.slice();r[n]=1;const o=q(e,r),s=CI(t,n,!0,!1),i=CI(t,n,!0,!0),a=U(s,i);return U(o,a)}function DWe(t,e,n){const r=t.shape.length,o=r-n.length,s=Wt(n,r);let i=t;s!=null&&(i=nt(t,s));const a=i.shape.slice(),c=a.splice(r-n.length,n.length).reduce((f,h)=>f*h,1);a.push(c);const u=i.reshape(a);let d=_We(u,e,o);if(d=d.reshape(i.shape),s!=null){const f=Ol(s);d=nt(d,f)}return d}const MWe={kernelName:k1,inputsToSave:["x"],gradFunc:(t,e,n)=>{const[r]=e,{axis:o}=n;let s=[];return o==null?s=r.shape.map((i,a)=>a):typeof o=="number"?s=[o]:s=o,{x:()=>DWe(r,t,s)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const FWe={kernelName:Tg,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e,o=Be(n.shape,r.shape);return{a:()=>{const a=Ae(t,xe(r,"float32")),l=xn(n.shape,o);return l.length>0?q(Ee(a,l),n.shape):a},b:()=>{let a=U(t,xe(n,"float32"));const l=xn(r.shape,o);l.length>0&&(a=q(Ee(a,l),r.shape));const c=Et(r);return Zt(Ae(a,xe(c,"float32")))}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const LWe={kernelName:Gg,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>Ae(t,Zt(Et(n)))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const jWe={kernelName:Kg,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e,r=U(Yf(n,6),hy(n));return{x:()=>U(t,xe(r,"float32"))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const BWe={kernelName:Hg,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>U(t,xe(hy(n),"float32"))}}};/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const zWe={kernelName:T1,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>q(t,n.shape)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const WWe={kernelName:E1,inputsToSave:["images"],gradFunc:(t,e,n)=>{const[r]=e,o={dy:t,images:r};return{images:()=>H.runKernel(TA,o,n)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const VWe={kernelName:I1,inputsToSave:["images"],gradFunc:(t,e,n)=>{const[r]=e,o={dy:t,images:r};return{images:()=>H.runKernel(kA,o,n)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const UWe={kernelName:N1,gradFunc:(t,e,n)=>{const{dims:r}=n,o=He(r,t.shape);return{x:()=>Kc(t,o)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const GWe={kernelName:qg,gradFunc:t=>({x:()=>rt(t)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const HWe={kernelName:Xg,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>Zt(Ae(t,U(Hc(n,1.5),2)))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const KWe={kernelName:A1,inputsToSave:["condition"],gradFunc:(t,e)=>{const[n]=e;return{condition:()=>xe(rt(n),"float32"),t:()=>U(t,xe(n,t.dtype)),e:()=>U(t,xe(KA(n),t.dtype))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const qWe={kernelName:Yg,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>{const r=bo(n,ct(0)),o=ct(Y1),s=ct(Q1),i=U(t,s),a=U(U(t,o),mi(xe(n,"float32")));return fr(r,i,a)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const XWe={kernelName:ey,outputsToSave:[!0],gradFunc:(t,e)=>{const[n]=e;return{x:()=>U(t,U(n,_e(ct(1),n)))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const YWe={kernelName:Jg,gradFunc:t=>({x:()=>rt(t)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const QWe={kernelName:Qg,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>U(zA(xe(n,"float32")),t)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ZWe={kernelName:Zg,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>U(Rq(xe(n,"float32")),t)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const JWe={kernelName:O1,inputsToSave:["x"],gradFunc:(t,e,n)=>{const[r]=e,{begin:o,size:s}=n,i=r.shape,[a,l]=q1(r,o,s),c=[];for(let u=0;u<t.rank;u++)c.push([a[u],i[u]-a[u]-l[u]]);return{x:()=>YA(t,c)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const eVe={kernelName:D1,outputsToSave:[!0],gradFunc:(t,e,n)=>{const[r]=e,{dim:o}=n,s=!0,i=U(t,r);return{logits:()=>_e(i,U(Ee(i,[o],s),r))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const tVe={kernelName:ty,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>U(t,Xf(n))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const hj={kernelName:R1,gradFunc:(t,e,n)=>{const{blockShape:r,paddings:o}=n;return{x:()=>jA(t,r,o)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const pj={kernelName:_1,gradFunc:(t,e,n)=>{const{axis:r}=n;return{x:()=>Nr(t,r)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const nVe={kernelName:ny,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>Ae(t,U(Yn(xe(n,"float32")),2))}}};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const rVe={kernelName:IA,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>U(t,U(xe(n,"float32"),2))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const oVe={kernelName:ry,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e,o=ct(2);return{a:()=>U(t,U(o,_e(n,r))),b:()=>U(t,U(o,_e(r,n)))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const sVe={kernelName:ly,gradFunc:t=>({x:()=>rt(t)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const iVe={kernelName:oy,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e,o=Be(n.shape,r.shape);return{a:()=>{let a=t;const l=xn(n.shape,o);return l.length>0&&(a=Ee(a,l)),q(a,n.shape)},b:()=>{let a=t;const l=xn(r.shape,o);return l.length>0&&(a=Ee(a,l)),q(Zt(a),r.shape)}}}};/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const aVe={kernelName:P1,inputsToSave:["x"],gradFunc:(t,e,n)=>{const[r]=e,o=r.shape.slice(),{axis:s}=n;He(s,r.shape).forEach(c=>{o[c]=1});const a=q(t,o),l=U(a,Rl(r.shape,"float32"));return{x:()=>l}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const lVe={kernelName:sy,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>Ae(t,Et(zA(n)))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const cVe={kernelName:iy,outputsToSave:[!0],gradFunc:(t,e)=>{const[n]=e;return{x:()=>U(_e(ct(1),Et(n)),t)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const uVe={kernelName:ay,inputsToSave:["x"],gradFunc:(t,e,n)=>{const[r]=e,{reps:o}=n;return{x:()=>{let i=rt(r);if(r.rank===1)for(let a=0;a<o[0];++a)i=de(i,Ct(t,[a*r.shape[0]],[r.shape[0]]));else if(r.rank===2)for(let a=0;a<o[0];++a)for(let l=0;l<o[1];++l)i=de(i,Ct(t,[a*r.shape[0],l*r.shape[1]],[r.shape[0],r.shape[1]]));else if(r.rank===3)for(let a=0;a<o[0];++a)for(let l=0;l<o[1];++l)for(let c=0;c<o[2];++c)i=de(i,Ct(t,[a*r.shape[0],l*r.shape[1],c*r.shape[2]],[r.shape[0],r.shape[1],r.shape[2]]));else if(r.rank===4)for(let a=0;a<o[0];++a)for(let l=0;l<o[1];++l)for(let c=0;c<o[2];++c)for(let u=0;u<o[3];++u)i=de(i,Ct(t,[a*r.shape[0],l*r.shape[1],c*r.shape[2],u*r.shape[3]],[r.shape[0],r.shape[1],r.shape[2],r.shape[3]]));else throw new Error(`Gradient for tile operation is not implemented for rank-${r.rank} tensors yet.`);return i}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const dVe={kernelName:hd,gradFunc:(t,e,n)=>{const r=n,{perm:o}=r,s=Ol(o);return{x:()=>nt(t,s)}}};/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const fVe={kernelName:M1,gradFunc:(t,e,n)=>{const r=n,{axis:o}=r;return{value:()=>na(t,o)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const hVe={kernelName:F1,inputsToSave:["segmentIds"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>pVe(t,n)}}};function pVe(t,e){const n=Pl(e,rt(e)),r=UA(t,n);let o=uu(e,ct(0,"int32"));const s=r.rank-o.rank;for(let a=0;a<s;++a)o=Cr(o,a+1);o=ta(o,Rl(r.shape,"bool"));const i=rt(r);return fr(o,r,i)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const mVe={kernelName:L1,gradFunc:t=>({x:()=>rt(t)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const gVe=[H8,h4e,p4e,m4e,g4e,y4e,v4e,x4e,b4e,w4e,S4e,C4e,T4e,N4e,A4e,O4e,P4e,R4e,_4e,D4e,M4e,F4e,j4e,L4e,W4e,V4e,U4e,G4e,H4e,K4e,FWe,q4e,X4e,Y4e,Q4e,Z4e,eWe,J4e,tWe,nWe,rWe,oWe,sWe,iWe,aWe,lWe,cWe,uWe,dWe,pWe,dj,dj,mWe,vWe,wWe,SWe,CWe,$We,kWe,TWe,IWe,EWe,NWe,AWe,OWe,fj,fj,PWe,RWe,MWe,LWe,jWe,BWe,zWe,WWe,VWe,UWe,GWe,HWe,KWe,qWe,XWe,YWe,QWe,ZWe,JWe,eVe,tVe,hj,hj,pj,pj,nVe,oVe,rVe,sVe,iVe,aVe,lVe,cVe,uVe,dVe,fVe,hVe,mVe];for(const t of gVe)XMe(t);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */te().prototype.abs=function(){return this.throwIfDisposed(),ir(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */te().prototype.acos=function(){return this.throwIfDisposed(),ZFe(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */te().prototype.acosh=function(){return this.throwIfDisposed(),eLe(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */te().prototype.add=function(t){return this.throwIfDisposed(),de(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */te().prototype.all=function(t,e){return this.throwIfDisposed(),Nq(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */te().prototype.any=function(t,e){return this.throwIfDisposed(),wI(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */te().prototype.argMax=function(t){return this.throwIfDisposed(),km(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */te().prototype.argMin=function(t){return this.throwIfDisposed(),sLe(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */te().prototype.asScalar=function(){return this.throwIfDisposed(),M(this.size===1,()=>"The array must have only 1 element."),q(this,[])};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */te().prototype.asType=function(t){return this.throwIfDisposed(),xe(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */te().prototype.as1D=function(){return this.throwIfDisposed(),q(this,[this.size])};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */te().prototype.as2D=function(t,e){return this.throwIfDisposed(),q(this,[t,e])};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */te().prototype.as3D=function(t,e,n){return this.throwIfDisposed(),q(this,[t,e,n])};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */te().prototype.as4D=function(t,e,n,r){return this.throwIfDisposed(),q(this,[t,e,n,r])};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */te().prototype.as5D=function(t,e,n,r,o){return this.throwIfDisposed(),q(this,[t,e,n,r,o])};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */te().prototype.asin=function(){return this.throwIfDisposed(),aLe(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */te().prototype.asinh=function(){return this.throwIfDisposed(),cLe(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */te().prototype.atan=function(){return this.throwIfDisposed(),dLe(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */te().prototype.atan2=function(t){return this.throwIfDisposed(),hLe(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */te().prototype.atanh=function(){return this.throwIfDisposed(),mLe(this)};te().prototype.avgPool=function(t,e,n,r){return this.throwIfDisposed(),LA(this,t,e,n,r)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */te().prototype.batchToSpaceND=function(t,e){return this.throwIfDisposed(),jA(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */te().prototype.batchNorm=function(t,e,n,r,o){return this.throwIfDisposed(),V1(this,t,e,n,r,o)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */te().prototype.broadcastTo=function(t){return this.throwIfDisposed(),hp(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */te().prototype.cast=function(t){return this.throwIfDisposed(),xe(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */te().prototype.ceil=function(){return this.throwIfDisposed(),WLe(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */te().prototype.clipByValue=function(t,e){return this.throwIfDisposed(),yo(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */te().prototype.concat=function(t,e){return this.throwIfDisposed(),t instanceof fn&&(t=[t]),Nr([this,...t],e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */te().prototype.conv1d=function(t,e,n,r,o,s){return this.throwIfDisposed(),Aq(this,t,e,n,r,o,s)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */te().prototype.conv2dTranspose=function(t,e,n,r,o){return this.throwIfDisposed(),Oq(this,t,e,n,r,o)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */te().prototype.conv2d=function(t,e,n,r,o,s){return this.throwIfDisposed(),Gc(this,t,e,n,r,o,s)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */te().prototype.cos=function(){return this.throwIfDisposed(),zA(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */te().prototype.cosh=function(){return this.throwIfDisposed(),Rq(this)};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */te().prototype.cumprod=function(t,e,n){return this.throwIfDisposed(),CI(this,t,e,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */te().prototype.cumsum=function(t,e,n){return this.throwIfDisposed(),_q(this,t,e,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */te().prototype.depthToSpace=function(t,e){return this.throwIfDisposed(),hje(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */te().prototype.depthwiseConv2d=function(t,e,n,r,o,s){return this.throwIfDisposed(),WA(this,t,e,n,r,o,s)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */te().prototype.dilation2d=function(t,e,n,r,o){return this.throwIfDisposed(),gje(this,t,e,n,r,o)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */te().prototype.divNoNan=function(t){return this.throwIfDisposed(),wje(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */te().prototype.div=function(t){return this.throwIfDisposed(),Ae(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */te().prototype.dot=function(t){return this.throwIfDisposed(),Cje(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */te().prototype.elu=function(){return this.throwIfDisposed(),G1(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */te().prototype.equal=function(t){return this.throwIfDisposed(),pi(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */te().prototype.erf=function(){return this.throwIfDisposed(),Dq(this)};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */te().prototype.euclideanNorm=function(t,e){return this.throwIfDisposed(),Dje(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */te().prototype.exp=function(){return this.throwIfDisposed(),mi(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */te().prototype.expandDims=function(t){return this.throwIfDisposed(),Cr(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */te().prototype.expm1=function(){return this.throwIfDisposed(),jje(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */te().prototype.fft=function(){return this.throwIfDisposed(),e8(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */te().prototype.flatten=function(){return this.throwIfDisposed(),q(this,[this.size])};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */te().prototype.floor=function(){return this.throwIfDisposed(),K1(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */te().prototype.floorDiv=function(t){return this.throwIfDisposed(),Eq(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */te().prototype.gather=function(t,e,n){return this.throwIfDisposed(),UA(this,t,e,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */te().prototype.greaterEqual=function(t){return this.throwIfDisposed(),uu(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */te().prototype.greater=function(t){return this.throwIfDisposed(),bo(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */te().prototype.ifft=function(){return this.throwIfDisposed(),$I(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */te().prototype.irfft=function(){return this.throwIfDisposed(),ABe(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */te().prototype.isFinite=function(){return this.throwIfDisposed(),qje(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */te().prototype.isInf=function(){return this.throwIfDisposed(),Yje(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */te().prototype.isNaN=function(){return this.throwIfDisposed(),Zje(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */te().prototype.leakyRelu=function(t){return this.throwIfDisposed(),HA(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */te().prototype.lessEqual=function(t){return this.throwIfDisposed(),Yf(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */te().prototype.less=function(t){return this.throwIfDisposed(),Vb(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */te().prototype.localResponseNormalization=function(t,e,n,r){return this.throwIfDisposed(),r3e(this,t,e,n,r)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */te().prototype.logSigmoid=function(){return this.throwIfDisposed(),u3e(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */te().prototype.logSoftmax=function(t){return this.throwIfDisposed(),Bq(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */te().prototype.logSumExp=function(t,e){return this.throwIfDisposed(),zq(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */te().prototype.log=function(){return this.throwIfDisposed(),gi(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */te().prototype.log1p=function(){return this.throwIfDisposed(),jq(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */te().prototype.logicalAnd=function(t){return this.throwIfDisposed(),ta(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */te().prototype.logicalNot=function(){return this.throwIfDisposed(),KA(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */te().prototype.logicalOr=function(t){return this.throwIfDisposed(),Wq(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */te().prototype.logicalXor=function(t){return this.throwIfDisposed(),v3e(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */te().prototype.matMul=function(t,e,n){return this.throwIfDisposed(),lt(this,t,e,n)};te().prototype.maxPool=function(t,e,n,r){return this.throwIfDisposed(),qA(this,t,e,n,r)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */te().prototype.max=function(t,e){return this.throwIfDisposed(),Is(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */te().prototype.maximum=function(t){return this.throwIfDisposed(),Pl(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */te().prototype.mean=function(t,e){return this.throwIfDisposed(),cn(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */te().prototype.min=function(t,e){return this.throwIfDisposed(),Wb(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */te().prototype.minimum=function(t){return this.throwIfDisposed(),Em(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */te().prototype.mirrorPad=function(t,e){return this.throwIfDisposed(),T3e(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */te().prototype.mod=function(t){return this.throwIfDisposed(),E3e(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */te().prototype.mul=function(t){return this.throwIfDisposed(),U(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */te().prototype.neg=function(){return this.throwIfDisposed(),Zt(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */te().prototype.norm=function(t,e,n){return this.throwIfDisposed(),H1(this,t,e,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */te().prototype.notEqual=function(t){return this.throwIfDisposed(),Ub(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */te().prototype.oneHot=function(t,e=1,n=0){return this.throwIfDisposed(),Vq(this,t,e,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */te().prototype.onesLike=function(){return this.throwIfDisposed(),Xo(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */te().prototype.pad=function(t,e){return this.throwIfDisposed(),YA(this,t,e)};te().prototype.pool=function(t,e,n,r,o,s){return this.throwIfDisposed(),L3e(this,t,e,n,r,o,s)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */te().prototype.pow=function(t){return this.throwIfDisposed(),Hc(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */te().prototype.prelu=function(t){return this.throwIfDisposed(),ZA(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */te().prototype.prod=function(t,e){return this.throwIfDisposed(),z3e(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */te().prototype.reciprocal=function(){return this.throwIfDisposed(),uBe(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */te().prototype.relu=function(){return this.throwIfDisposed(),fu(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */te().prototype.relu6=function(){return this.throwIfDisposed(),Hq(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */te().prototype.reshapeAs=function(t){return this.throwIfDisposed(),q(this,t.shape)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */te().prototype.reshape=function(t){return this.throwIfDisposed(),q(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */te().prototype.resizeBilinear=function(t,e,n){return this.throwIfDisposed(),s8(this,t,e,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */te().prototype.resizeNearestNeighbor=function(t,e,n){return this.throwIfDisposed(),i8(this,t,e,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */te().prototype.reverse=function(t){return this.throwIfDisposed(),Kc(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */te().prototype.rfft=function(){return this.throwIfDisposed(),RBe(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */te().prototype.round=function(){return this.throwIfDisposed(),Kq(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */te().prototype.rsqrt=function(){return this.throwIfDisposed(),qq(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */te().prototype.selu=function(){return this.throwIfDisposed(),Xq(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */te().prototype.separableConv2d=function(t,e,n,r,o,s){return this.throwIfDisposed(),Yq(this,t,e,n,r,o,s)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */te().prototype.sigmoid=function(){return this.throwIfDisposed(),Xf(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */te().prototype.sign=function(){return this.throwIfDisposed(),xBe(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */te().prototype.sin=function(){return this.throwIfDisposed(),Qq(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */te().prototype.sinh=function(){return this.throwIfDisposed(),Zq(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */te().prototype.slice=function(t,e){return this.throwIfDisposed(),Ct(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */te().prototype.softmax=function(t){return this.throwIfDisposed(),lO(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */te().prototype.softplus=function(){return this.throwIfDisposed(),uy(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */te().prototype.spaceToBatchND=function(t,e){return this.throwIfDisposed(),QA(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */te().prototype.split=function(t,e){return this.throwIfDisposed(),po(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */te().prototype.sqrt=function(){return this.throwIfDisposed(),Yn(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */te().prototype.square=function(){return this.throwIfDisposed(),Et(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */te().prototype.squaredDifference=function(t){return this.throwIfDisposed(),DBe(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */te().prototype.squeeze=function(t){return this.throwIfDisposed(),fy(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */te().prototype.stack=function(t,e){this.throwIfDisposed();const n=t instanceof fn?[this,t]:[this,...t];return na(n,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */te().prototype.step=function(t){return this.throwIfDisposed(),hy(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */te().prototype.stridedSlice=function(t,e,n,r,o,s,i,a){return this.throwIfDisposed(),BBe(this,t,e,n,r,o,s,i,a)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */te().prototype.sub=function(t){return this.throwIfDisposed(),_e(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */te().prototype.sum=function(t,e){return this.throwIfDisposed(),Ee(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */te().prototype.tan=function(){return this.throwIfDisposed(),WBe(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */te().prototype.tanh=function(){return this.throwIfDisposed(),W1(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */te().prototype.tile=function(t){return this.throwIfDisposed(),Ss(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */te().prototype.toBool=function(){return this.throwIfDisposed(),xe(this,"bool")};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */te().prototype.toFloat=function(){return this.throwIfDisposed(),xe(this,"float32")};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */te().prototype.toInt=function(){return this.throwIfDisposed(),xe(this,"int32")};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */te().prototype.topk=function(t,e){return this.throwIfDisposed(),GBe(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */te().prototype.transpose=function(t){return this.throwIfDisposed(),nt(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */te().prototype.unique=function(t){return this.throwIfDisposed(),qBe(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */te().prototype.unsortedSegmentSum=function(t,e){return this.throwIfDisposed(),r8(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */te().prototype.unstack=function(t){return this.throwIfDisposed(),qc(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */te().prototype.where=function(t,e){return this.throwIfDisposed(),fr(t,this,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */te().prototype.zerosLike=function(){return this.throwIfDisposed(),rt(this)};/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class qs extends Error{constructor(e){super(e),Object.setPrototypeOf(this,qs.prototype)}}class Bo extends Error{constructor(e){super(e),Object.setPrototypeOf(this,Bo.prototype)}}class W extends Error{constructor(e){super(e),Object.setPrototypeOf(this,W.prototype)}}class We extends Error{constructor(e){super(e),Object.setPrototypeOf(this,We.prototype)}}class UO extends Error{constructor(e){super(e),Object.setPrototypeOf(this,UO.prototype)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class q8{constructor(e){this.maxEntries=e||100,this.cache=new Map}get(e){let n;return this.cache.has(e)&&(n=this.cache.get(e),this.cache.delete(e),this.cache.set(e,n)),n}put(e,n){if(this.cache.has(e))this.cache.delete(e);else if(this.cache.size>=this.maxEntries){const r=this.cache.keys().next().value;this.cache.delete(r)}this.cache.set(e,n)}getMaxEntries(){return this.maxEntries}setMaxEntries(e){if(e<0)throw new Error(`The maxEntries of LRU caches must be at least 0, but got ${e}.`);if(this.maxEntries>e)for(let n=0;n<this.maxEntries-e;n++){const r=this.cache.keys().next().value;this.cache.delete(r)}this.maxEntries=e}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function Xc(t,e){if(Array.isArray(t)){let n=[];for(let r=0;r<e;r++)n=n.concat(t);return n}else{const n=new Array(e);return n.fill(t),n}}function Xs(t,e){if(!t)throw new UO(e)}function mj(t,e){let n=0;for(const r of t)r===e&&n++;return n}function $r(t){return t.length===1?t[0]:t}function ht(t){return Array.isArray(t)?t:[t]}function Ei(t){const n=t.replace(/(.)([A-Z][a-z0-9]+)/g,"$1_$2").replace(/([a-z])([A-Z])/g,"$1_$2").toLowerCase();return n[0]!=="_"?n:"private"+n}function Yl(t){return t.length<=1||t.indexOf("_")===-1?t:t.replace(/[_]+(\w|$)/g,(e,n)=>n.toUpperCase())}let To={};function GO(t){if(t==null)return null;const e={};return e.className=t.getClassName(),e.config=t.getConfig(),e}function II(t){if(!(t==null||typeof t!="object"))if(Array.isArray(t))t.forEach(e=>II(e));else{const e=Object.keys(t);for(const n of e){const r=t[n];r!=null&&typeof r=="object"&&(!Array.isArray(r)&&r.type==="ndarray"&&typeof r.value=="number"?t[n]=r.value:II(r))}}}function yy(t,e={},n={},r="object",o=!1){if(typeof t=="string"){const s=t;let i;if(s in n)i=n[s];else if(s in To)i=To[s];else if(i=e[s],i==null)throw new W(`Unknown ${r}: ${t}. This may be due to one of the following reasons:
1. The ${r} is defined in Python, in which case it needs to be ported to TensorFlow.js or your JavaScript code.
2. The custom ${r} is defined in JavaScript, but is not registered properly with tf.serialization.registerClass().`);return i}else{const s=t;if(s.className==null||s.config==null)throw new W(`${r}: Improper config format: ${JSON.stringify(s)}.
'className' and 'config' must set.`);const i=s.className;let a,l;if(i in n?[a,l]=n[i]:i in To?[a,l]=To.className:i in e&&([a,l]=e[i]),a==null)throw new W(`Unknown ${r}: ${i}. This may be due to one of the following reasons:
1. The ${r} is defined in Python, in which case it needs to be ported to TensorFlow.js or your JavaScript code.
2. The custom ${r} is defined in JavaScript, but is not registered properly with tf.serialization.registerClass().`);if(l!=null){const c={};for(const h of Object.keys(To))c[h]=To[h];for(const h of Object.keys(n))c[h]=n[h];const u=s.config;u.customObjects=c;const d=Object.assign({},To);for(const h of Object.keys(n))To[h]=n[h];II(s.config);const f=l(a,s.config,n,o);return To=Object.assign({},d),f}else{const c=Object.assign({},To);for(const d of Object.keys(n))To[d]=n[d];const u=new a(s.config);return To=Object.assign({},c),u}}}function yVe(t,e){return t<e?-1:t>e?1:0}function bv(t,e){return-1*yVe(t,e)}function ol(t){if(t==null)return t;const e=[];for(const n of t)e.indexOf(n)===-1&&e.push(n);return e}function vVe(t){if(t==null)throw new W(`Invalid value in obj: ${JSON.stringify(t)}`);for(const e in t)if(t.hasOwnProperty(e))return!1;return!0}function pu(t,e,n){if(n!=null&&t.indexOf(n)<0)throw new W(`${n} is not a valid ${e}.  Valid values are ${t} or null/undefined.`)}function HO(t,e,n=0,r=1/0){return Xs(n>=0),Xs(r>=n),Array.isArray(t)&&t.length>=n&&t.length<=r&&t.every(o=>typeof o===e)}function En(t,e){Array.isArray(t)?(M(t.length>0,()=>`${e} is unexpectedly an empty array.`),t.forEach((n,r)=>En(n,`element ${r+1} of ${e}`))):M(Number.isInteger(t)&&t>0,()=>`Expected ${e} to be a positive integer, but got ${X8(t)}.`)}function X8(t){return t===null?"null":Array.isArray(t)?"["+t.map(e=>X8(e)).join(",")+"]":typeof t=="string"?`"${t}"`:`${t}`}function xVe(t,e,n){let r=n!=null?n():Sr(),o;return(...i)=>{const a=n!=null?n():Sr();return a-r<e||(r=a,o=t(...i)),o}}function Y8(t){return t==="relu"?"relu":t==="linear"?"linear":t==="elu"?"elu":null}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */let bVe=0;function Q8(){return bVe++}const wv={};function Z1(t=""){return t in wv||(wv[t]=0),wv[t]+=1,t+wv[t].toString()}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const wVe=["channelsFirst","channelsLast"],SVe=["nearest","bilinear"],CVe=["valid","same","causal"],$Ve=["max","avg"],kVe=["sum","mul","concat","ave"];/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const Au=new Map;function rn(t){pu(wVe,"DataFormat",t)}function TVe(t){pu(SVe,"InterpolationFormat",t)}function wo(t){pu(CVe,"PaddingMode",t)}function Z8(t){pu($Ve,"PoolMode",t)}const pp=[],gj="/";function Sc(t,e){pp.push(t);try{const n=e();return pp.pop(),n}catch(n){throw pp.pop(),n}}function IVe(){return pp.length===0?"":pp.join(gj)+gj}function J8(t){if(!tX(t))throw new Error("Not a valid tensor name: '"+t+"'");return IVe()+t}function eX(t){if(!tX(t))throw new Error("Not a valid tensor name: '"+t+"'");Au.has(t)||Au.set(t,0);const e=Au.get(t);if(Au.set(t,Au.get(t)+1),e>0){const n=`${t}_${e}`;return Au.set(n,1),n}else return t}const EVe=new RegExp(/^[A-Za-z0-9][-A-Za-z0-9\._\/]*$/);function tX(t){return!!t.match(EVe)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function NVe(t){return t===parseInt(t.toString(),10)}function sl(t,e,n){e==null&&(e=0),n==null&&(n=t.length);let r=1;for(let o=e;o<n;++o)r*=t[o];return r}function gf(t){if(t.length===0)return Number.NaN;let e=Number.POSITIVE_INFINITY;for(let n=0;n<t.length;n++){const r=t[n];r<e&&(e=r)}return e}function hl(t){if(t.length===0)return Number.NaN;let e=Number.NEGATIVE_INFINITY;for(let n=0;n<t.length;n++){const r=t[n];r>e&&(e=r)}return e}function Ps(t,e){if(e<t)throw new W(`end (${e}) < begin (${t}) is forbidden.`);const n=[];for(let r=t;r<e;++r)n.push(r);return n}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */let VC;function pn(){return VC==null&&(VC=SFe().epsilon()),VC}function Rs(){return"channelsLast"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function ui(t,e){return xe(t,e)}function vy(t,e=-1){const n=t.shape.slice();return e<0&&(e=n.length+e+1),n.splice(e,0,1),q(t,n)}function AVe(t,e){return Y(()=>{if(t.shape.length!==2)throw new W(`repeat() expects a rank-2 tensor, but received a rank-${t.shape.length} tensor.`);const n=vy(t,1);return EI(n,[1,e,1])})}function OVe(t){const e=[sl(t.shape)];return q(t,e)}function PVe(t){if(t.rank<=1)throw new W(`batchFlatten requires a minimum rank of 2. Got rank: ${t.rank}.`);const e=[t.shape[0],sl(t.shape,1)];return q(t,e)}function Cc(t,e,n){return Y(()=>{switch(t.rank){case 1:return iO(t,e,n);case 2:return Jq(t,[e,0],[n,t.shape[1]]);case 3:return aO(t,[e,0,0],[n,t.shape[1],t.shape[2]]);case 4:return Hb(t,[e,0,0,0],[n,t.shape[1],t.shape[2],t.shape[3]]);case 5:return Ct(t,[e,0,0,0,0],[n,t.shape[1],t.shape[2],t.shape[3],t.shape[4]]);case 6:return Ct(t,[e,0,0,0,0,0],[n,t.shape[1],t.shape[2],t.shape[3],t.shape[4],t.shape[5]]);default:throw new W(`sliceAlongFirstAxis() received an unsupported tensor rank: ${t.rank}`)}})}function UC(t,e,n){return Y(()=>{switch(t.rank){case 1:return iO(t,e,n);case 2:return Jq(t,[0,e],[t.shape[0],n]);case 3:return aO(t,[0,0,e],[t.shape[0],t.shape[1],n]);case 4:return Hb(t,[0,0,0,e],[t.shape[0],t.shape[1],t.shape[2],n]);default:throw new W(`sliceAlongLastAxis() received an unsupported tensor rank: ${t.rank}`)}})}function Sv(t,e,n,r){return Y(()=>{switch(t.rank){case 1:return iO(t,e,n);case 2:switch(r){case 1:return Cc(t,e,n);case 2:return UC(t,e,n);default:throw new W(`The axis is not within the rank of the tensor ${r}`)}case 3:switch(r){case 1:return Cc(t,e,n);case 2:return aO(t,[0,e,0],[t.shape[0],n,t.shape[2]]);case 3:return UC(t,e,n);default:throw new W(`The axis is not within the rank of the tensor ${r}`)}case 4:switch(r){case 1:return Cc(t,e,n);case 2:return Hb(t,[0,e,0,0],[t.shape[0],n,t.shape[2],t.shape[3]]);case 3:return Hb(t,[0,0,e,0],[t.shape[0],t.shape[1],n,t.shape[3]]);case 4:return UC(t,e,n);default:throw new W(`The axis is not within the rank of the tensor ${r}`)}default:throw new W(`sliceAlongLastAxis() received an unsupported tensor rank: ${t.rank}`)}})}function KO(t,e=-1){let n;return e<0&&(n=t[0].rank,n!==0?e=n:e=0),e===t[0].rank&&(e=-1),Nr(t,e)}function yj(t,e){switch(t.rank){case 1:return GLe([t,e]);case 2:return KLe([t,e],0);case 3:return XLe([t,e],0);case 4:return QLe([t,e],0);default:throw new W(`concatAlongFirstAxis() received an unsupported tensor rank: ${t.rank}`)}}function EI(t,e){if(Array.isArray(e)||(e=[e]),t.rank!==e.length)throw new W(`The length of input n (${e.length}) does not match the number of dimensions in input x (${t.rank})`);return Ss(t,e)}function J1(t,e=0,n=1,r,o){return iBe(t,e,n,r,o)}function di(t,e,n,r){if(t.rank<2||e.rank<2)throw new We(`dot requires both inputs to be rank >= 2 but got x shape = ${t.shape} and y shape = ${e.shape}`);if(e.rank>=3){const o=t.shape.slice(-1)[0],s=e.shape.slice(-2)[0];if(o!==s)throw new We(`If rank y >= 3, then the second last dim of y must equal the last dim of x but got x shape = ${t.shape} and  y shape = ${e.shape}`)}if(t.rank===2&&e.rank===2)return rj({a:t,b:e,transposeA:!1,transposeB:!1,bias:r?NI(t.rank,r,Rs()):null,activation:n});{const o=t.shape.slice(),s=o.pop();t=q(t,[-1,s]);const i=e.shape.slice(),a=i.pop(),l=i.pop(),c=[...i,a],u=Array.from({length:e.rank},(p,m)=>m===0?e.rank-2:m<=e.rank-2?m-1:m);e=q(nt(e,u),[l,-1]);const d=[...o,...c];return q(rj({a:t,b:e,transposeA:!1,transposeB:!1,bias:r?NI(t.rank,r,Rs()):null,activation:n}),d)}}function nX(t,e,n){return Y(()=>(Array.isArray(e)?e=Hr(e,"int32"):e=xe(e,"int32"),UA(t,e,n)))}function xy(t){return U(t,t)}function NI(t,e,n){const r=e.shape;if(e.rank!==1&&e.rank!==t)throw new W(`Unexpected bias dimensions: ${e.rank}; expected it to be 1 or ${t}`);if(t===5){if(n==="channelsFirst")return r.length===1?q(e,[1,r[0],1,1,1]):q(e,[1,r[3],r[0],r[1],r[2]]);if(n==="channelsLast")return r.length===1?q(e,[1,1,1,1,r[0]]):q(e,[1].concat(r))}else if(t===4){if(n==="channelsFirst")return r.length===1?q(e,[1,r[0],1,1]):q(e,[1,r[2],r[0],r[1]]);if(n==="channelsLast")return r.length===1?q(e,[1,1,1,r[0]]):q(e,[1].concat(r))}else if(t===3){if(n==="channelsFirst")return r.length===1?q(e,[1,r[0],1]):q(e,[1,r[1],r[0]]);if(n==="channelsLast")return r.length===1?q(e,[1,1,r[0]]):q(e,[1].concat(r))}else if(t<3)return e;throw new W(`Unsupported input rank by biasAdd: ${e.rank}`)}function js(t,e,n){return Y(()=>(n==null&&(n=Rs()),rn(n),de(t,NI(t.rank,e,n))))}function RVe(t,e=1){if(e!==1)throw new We(`Support for alpha values other than 1 (${e}) is not implemented yet.`);return G1(t)}function _Ve(t){return Y(()=>Ae(t,de(ir(t),1)))}function rX(t,e,n,r){return Y(()=>tze(t,e,n,r))}function DVe(t){return Y(()=>{const e=de(.5,U(.2,t));return yo(e,0,1)})}function by(t,e,n=!1){return n?t():e()}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const MVe=["fanIn","fanOut","fanAvg"],FVe=["normal","uniform","truncatedNormal"];/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function LVe(t){pu(MVe,"FanMode",t)}function jVe(t){pu(FVe,"Distribution",t)}class es extends Zf{fromConfigUsesCustomObjects(){return!1}getConfig(){return{}}}class oX extends es{apply(e,n){return kn(e,n)}}oX.className="Zeros";ue(oX);class qO extends es{apply(e,n){return Rl(e,n)}}qO.className="Ones";ue(qO);class sX extends es{constructor(e){if(super(),typeof e!="object")throw new W(`Expected argument of type ConstantConfig but got ${e}`);if(e.value===void 0)throw new W(`config must have value set but got ${e}`);this.value=e.value}apply(e,n){return Y(()=>U(ct(this.value),Rl(e,n)))}getConfig(){return{value:this.value}}}sX.className="Constant";ue(sX);class iX extends es{constructor(e){super(),this.DEFAULT_MINVAL=-.05,this.DEFAULT_MAXVAL=.05,this.minval=e.minval||this.DEFAULT_MINVAL,this.maxval=e.maxval||this.DEFAULT_MAXVAL,this.seed=e.seed}apply(e,n){return dy(e,this.minval,this.maxval,n,this.seed)}getConfig(){return{minval:this.minval,maxval:this.maxval,seed:this.seed}}}iX.className="RandomUniform";ue(iX);class aX extends es{constructor(e){super(),this.DEFAULT_MEAN=0,this.DEFAULT_STDDEV=.05,this.mean=e.mean||this.DEFAULT_MEAN,this.stddev=e.stddev||this.DEFAULT_STDDEV,this.seed=e.seed}apply(e,n){if(n=n||"float32",n!=="float32"&&n!=="int32")throw new We(`randomNormal does not support dType ${n}.`);return J1(e,this.mean,this.stddev,n,this.seed)}getConfig(){return{mean:this.mean,stddev:this.stddev,seed:this.seed}}}aX.className="RandomNormal";ue(aX);class lX extends es{constructor(e){super(),this.DEFAULT_MEAN=0,this.DEFAULT_STDDEV=.05,this.mean=e.mean||this.DEFAULT_MEAN,this.stddev=e.stddev||this.DEFAULT_STDDEV,this.seed=e.seed}apply(e,n){if(n=n||"float32",n!=="float32"&&n!=="int32")throw new We(`truncatedNormal does not support dType ${n}.`);return n8(e,this.mean,this.stddev,n,this.seed)}getConfig(){return{mean:this.mean,stddev:this.stddev,seed:this.seed}}}lX.className="TruncatedNormal";ue(lX);class cX extends es{constructor(e){super(),this.gain=e.gain!=null?e.gain:1}apply(e,n){return Y(()=>{if(e.length!==2||e[0]!==e[1])throw new W("Identity matrix initializer can only be used for 2D square matrices.");return U(this.gain,Lq(e[0]))})}getConfig(){return{gain:this.gain}}}cX.className="Identity";ue(cX);function BVe(t,e="channelsLast"){let n,r;if(rn(e),t.length===2)n=t[0],r=t[1];else if([3,4,5].indexOf(t.length)!==-1){if(e==="channelsFirst"){const o=sl(t,2);n=t[1]*o,r=t[0]*o}else if(e==="channelsLast"){const o=sl(t,0,t.length-2);n=t[t.length-2]*o,r=t[t.length-1]*o}}else{const o=sl(t);n=Math.sqrt(o),r=Math.sqrt(o)}return[n,r]}class Qr extends es{constructor(e){if(super(),e.scale<0)throw new W(`scale must be a positive float. Got: ${e.scale}`);this.scale=e.scale==null?1:e.scale,this.mode=e.mode==null?"fanIn":e.mode,LVe(this.mode),this.distribution=e.distribution==null?"normal":e.distribution,jVe(this.distribution),this.seed=e.seed}apply(e,n){const r=BVe(e),o=r[0],s=r[1];let i=this.scale;if(this.mode==="fanIn"?i/=Math.max(1,o):this.mode==="fanOut"?i/=Math.max(1,s):i/=Math.max(1,(o+s)/2),this.distribution==="normal"){const a=Math.sqrt(i);if(n=n||"float32",n!=="float32"&&n!=="int32")throw new We(`${this.getClassName()} does not support dType ${n}.`);return n8(e,0,a,n,this.seed)}else{const a=Math.sqrt(3*i);return dy(e,-a,a,n,this.seed)}}getConfig(){return{scale:this.scale,mode:this.mode,distribution:this.distribution,seed:this.seed}}}Qr.className="VarianceScaling";ue(Qr);class XO extends Qr{constructor(e){super({scale:1,mode:"fanAvg",distribution:"uniform",seed:e==null?null:e.seed})}getClassName(){return Qr.className}}XO.className="GlorotUniform";ue(XO);class YO extends Qr{constructor(e){super({scale:1,mode:"fanAvg",distribution:"normal",seed:e==null?null:e.seed})}getClassName(){return Qr.className}}YO.className="GlorotNormal";ue(YO);class QO extends Qr{constructor(e){super({scale:2,mode:"fanIn",distribution:"normal",seed:e==null?null:e.seed})}getClassName(){return Qr.className}}QO.className="HeNormal";ue(QO);class ZO extends Qr{constructor(e){super({scale:2,mode:"fanIn",distribution:"uniform",seed:e==null?null:e.seed})}getClassName(){return Qr.className}}ZO.className="HeUniform";ue(ZO);class JO extends Qr{constructor(e){super({scale:1,mode:"fanIn",distribution:"normal",seed:e==null?null:e.seed})}getClassName(){return Qr.className}}JO.className="LeCunNormal";ue(JO);class eP extends Qr{constructor(e){super({scale:1,mode:"fanIn",distribution:"uniform",seed:e==null?null:e.seed})}getClassName(){return Qr.className}}eP.className="LeCunUniform";ue(eP);class uX extends es{constructor(e){super(),this.DEFAULT_GAIN=1,this.ELEMENTS_WARN_SLOW=2e3,this.gain=e.gain==null?this.DEFAULT_GAIN:e.gain,this.seed=e.seed}apply(e,n){return Y(()=>{if(e.length<2)throw new We("Shape must be at least 2D.");if(n!=="int32"&&n!=="float32"&&n!==void 0)throw new TypeError(`Unsupported data type ${n}.`);n=n;const r=ne(e.slice(0,-1)),o=e[e.length-1],s=r*o;s>this.ELEMENTS_WARN_SLOW&&console.warn(`Orthogonal initializer is being called on a matrix with more than ${this.ELEMENTS_WARN_SLOW} (${s}) elements: Slowness may result.`);const i=[Math.max(o,r),Math.min(o,r)],a=J1(i,0,1,n,this.seed),l=Qze.qr(a,!1);let c=l[0];const d=l[1].flatten().stridedSlice([0],[Math.min(o,r)*Math.min(o,r)],[Math.min(o,r)+1]);return c=U(c,d.sign()),r<o&&(c=c.transpose()),U(ct(this.gain),c.reshape(e))})}getConfig(){return{gain:this.gain,seed:this.seed}}}uX.className="Orthogonal";ue(uX);const vj={constant:"Constant",glorotNormal:"GlorotNormal",glorotUniform:"GlorotUniform",heNormal:"HeNormal",heUniform:"HeUniform",identity:"Identity",leCunNormal:"LeCunNormal",leCunUniform:"LeCunUniform",ones:"Ones",orthogonal:"Orthogonal",randomNormal:"RandomNormal",randomUniform:"RandomUniform",truncatedNormal:"TruncatedNormal",varianceScaling:"VarianceScaling",zeros:"Zeros"};function xj(t,e={}){return yy(t,_o.getMap().classNameMap,e,"initializer")}function zt(t){return GO(t)}function Mt(t){if(typeof t=="string"){const e=t in vj?vj[t]:t;if(e==="GlorotNormal")return new YO;if(e==="GlorotUniform")return new XO;if(e==="HeNormal")return new QO;if(e==="HeUniform")return new ZO;if(e==="LeCunNormal")return new JO;if(e==="LeCunUniform")return new eP;{const n={};return n.className=e,n.config={},xj(n)}}else return t instanceof es?t:xj(t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function AI(t){return Array.isArray(t)&&Array.isArray(t[0])}function Kb(t){return t.length===0?[]:Array.isArray(t[0])?t:[t]}function Me(t){let e;if(Array.isArray(t)){if(t.length!==1)throw new W(`Expected Tensor length to be 1; got ${t.length}`);e=t[0]}else e=t;return e}function it(t){if(Array.isArray(t)&&Array.isArray(t[0])){if(t.length===1)return t=t,t[0];throw new W(`Expected exactly 1 Shape; got ${t.length}`)}else return t}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function qb(t){let e=0;for(const n of t)n.shape.length===0?e+=1:e+=n.shape.reduce((r,o)=>r*o);return e}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const bj="Variable";class zVe{constructor(e,n="float32",r=bj,o=!0,s=null){this.dtype=n??"float32",this.shape=e.shape,this.id=Q8(),r=r??bj,this.originalName=J8(r),this.name=eX(this.originalName),this.trainable_=o,this.constraint=s,this.val=QBe(e,this.trainable_,this.name,this.dtype)}read(){return this.assertNotDisposed(),this.val}write(e){return this.assertNotDisposed(),WVe(this.val,e),this.val.id!==e.id&&(this.val.assign(e),this.constraint!=null&&this.val.assign(this.constraint.apply(this.val))),this}dispose(){this.assertNotDisposed(),this.val.dispose()}assertNotDisposed(){if(this.val.isDisposed)throw new Error(`LayersVariable ${this.name} is already disposed.`)}get trainable(){return this.trainable_}set trainable(e){this.trainable_=e,this.val.trainable=e}}function WVe(t,e){if(t.shape.toString()!==e.shape.toString())throw new Error("Shape mismatch: "+JSON.stringify(t.shape)+" vs. "+JSON.stringify(e.shape))}function OI(t){return t.map(e=>e.read())}function tP(t){t.forEach(e=>{e[0].write(e[1])})}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class mn{constructor(e){this.dtype=e.dtype,this.shape=e.shape,e.shape!=null?this.ndim=e.shape.length:this.ndim=e.ndim,this.maxNDim=e.maxNDim,this.minNDim=e.minNDim,this.axes=e.axes||{}}}class yi{constructor(e,n,r,o,s,i,a){this.dtype=e,this.shape=n,this.sourceLayer=r,this.inputs=o,this.callArgs=s,this.outputTensorIndex=a,this.id=Q8(),i!=null&&(this.originalName=J8(i),this.name=eX(this.originalName)),this.rank=n.length}}let VVe=0,eS=class{constructor(e,n){this.callArgs=n,this.id=VVe++,this.outboundLayer=e.outboundLayer,this.inboundLayers=e.inboundLayers,this.nodeIndices=e.nodeIndices,this.tensorIndices=e.tensorIndices,this.inputTensors=e.inputTensors,this.outputTensors=e.outputTensors,this.inputMasks=e.inputMasks,this.outputMasks=e.outputMasks,this.inputShapes=e.inputShapes,this.outputShapes=e.outputShapes;for(const r of e.inboundLayers)r!=null&&r.outboundNodes.push(this);e.outboundLayer.inboundNodes.push(this)}getConfig(){const e=[];for(const n of this.inboundLayers)n!=null?e.push(n.name):e.push(null);return{outboundLayer:this.outboundLayer?this.outboundLayer.name:null,inboundLayers:e,nodeIndices:this.nodeIndices,tensorIndices:this.tensorIndices}}},UVe=0;class Ke extends Zf{constructor(e={}){super(),this._callHook=null,this._addedWeightNames=[],this._stateful=!1,this.id=UVe++,this.activityRegularizer=null,this.inputSpec=null,this.supportsMasking=!1,this._trainableWeights=[],this._nonTrainableWeights=[],this._losses=[],this._updates=[],this._built=!1,this.inboundNodes=[],this.outboundNodes=[];let n=e.name;if(!n){const r=this.getClassName();n=Ei(r)+"_"+Z1(r)}if(this.name=n,this.trainable_=e.trainable==null?!0:e.trainable,e.inputShape!=null||e.batchInputShape!=null){let r;if(e.batchInputShape!=null)r=e.batchInputShape;else if(e.inputShape!=null){let s=null;e.batchSize!=null&&(s=e.batchSize),r=[s].concat(e.inputShape)}this.batchInputShape=r;let o=e.dtype;o==null&&(o=e.inputDType),o==null&&(o="float32"),this.dtype=o}e.weights!=null?this.initialWeights=e.weights:this.initialWeights=null,this._refCount=null,this.fastWeightInitDuringBuild=!1}static nodeKey(e,n){return e.name+"_ib-"+n.toString()}getNodeAtIndex(e,n){if(this.inboundNodes.length===0)throw new Bo(`The layer has never been called and thus has no defined ${n}.`);if(this.inboundNodes.length<=e)throw new W(`Asked to get ${n} at node ${e}, but the layer has only ${this.inboundNodes.length} inbound nodes.`);return this.inboundNodes[e]}getInputAt(e){return $r(this.getNodeAtIndex(e,"input").inputTensors)}getOutputAt(e){return $r(this.getNodeAtIndex(e,"output").outputTensors)}get input(){if(this.inboundNodes.length>1)throw new qs(`Layer ${this.name} has multiple inbound nodes, hence the notion of "layer input" is ill-defined. Use \`getInputAt(nodeIndex)\` instead.`);if(this.inboundNodes.length===0)throw new qs(`Layer ${this.name} is not connected, no input to return.`);return $r(this.getNodeAtIndex(0,"input").inputTensors)}get output(){if(this.inboundNodes.length===0)throw new qs(`Layer ${this.name} has no inbound nodes.`);if(this.inboundNodes.length>1)throw new qs(`Layer ${this.name} has multiple inbound nodes, hence the notion of "layer output" is ill-defined. Use \`getOutputAt(nodeIndex)\` instead.`);return $r(this.getNodeAtIndex(0,"output").outputTensors)}get losses(){return this._losses}calculateLosses(){return this.losses.map(e=>e())}get updates(){return this._updates}get built(){return this._built}set built(e){this._built=e}get trainable(){return this.trainable_}set trainable(e){this._trainableWeights.forEach(n=>n.trainable=e),this.trainable_=e}get trainableWeights(){return this.trainable_?this._trainableWeights.filter(e=>e.trainable):[]}set trainableWeights(e){this._trainableWeights=e}get nonTrainableWeights(){return this.trainable?this._trainableWeights.filter(e=>!e.trainable).concat(this._nonTrainableWeights):this._trainableWeights.concat(this._nonTrainableWeights)}set nonTrainableWeights(e){this._nonTrainableWeights=e}get weights(){return this.trainableWeights.concat(this.nonTrainableWeights)}get stateful(){return this._stateful}resetStates(){if(!this.stateful)throw new Error("Cannot call the resetStates() method of a non-stateful Layer object.")}assertInputCompatibility(e){const n=ht(e);if(this.inputSpec==null||this.inputSpec.length===0)return;const r=ht(this.inputSpec);if(n.length!==r.length)throw new W(`Layer ${this.name} expects ${r.length} inputs, but it received ${n.length} input tensors. Input received: ${e}`);for(let o=0;o<n.length;o++){const s=n[o],i=r[o];if(i==null)continue;const a=s.rank;if(i.ndim!=null&&a!==i.ndim)throw new W(`Input ${o} is incompatible with layer ${this.name}: expected ndim=${i.ndim}, found ndim=${a}`);if(i.maxNDim!=null&&a>i.maxNDim)throw new W(`Input ${o} is incompatible with layer ${this.name}: expected max_ndim=${i.maxNDim}, found ndim=${a}`);if(i.minNDim!=null&&a<i.minNDim)throw new W(`Input ${o} is incompatible with layer ${this.name}: expected min_ndim=${i.minNDim}, found ndim=${a}.`);if(i.dtype!=null&&s.dtype!==i.dtype)throw new W(`Input ${o} is incompatible with layer ${this.name} : expected dtype=${i.dtype}, found dtype=${s.dtype}.`);if(i.axes){const l=s.shape;for(const c in i.axes){const u=Number(c),d=i.axes[c],f=u>=0?l[u]:l[l.length+u];if(d!=null&&[d,null].indexOf(f)===-1)throw new W(`Input ${o} is incompatible with layer ${this.name}: expected axis ${u} of input shape to have value ${d} but got shape ${l}.`)}}if(i.shape!=null)for(let l=0;l<i.shape.length;++l){const c=i.shape[l],u=s.shape[l];if(c!=null&&u!=null&&c!==u)throw new W(`Input ${o} is incompatible with layer ${this.name}: expected shape=${i.shape}, found shape=${s.shape}.`)}}}call(e,n){return e}invokeCallHook(e,n){this._callHook!=null&&this._callHook(e,n)}setCallHook(e){this._callHook=e}clearCallHook(){this._callHook=null}apply(e,n){n=n||{},this.assertNotDisposed();const r=ht(e),o=KVe(e),s=qVe(e);if(o===s)throw new W("Arguments to apply() must be all SymbolicTensors or all Tensors");return Sc(this.name,()=>{if(!this.built){this.assertInputCompatibility(e);const i=[];for(const a of ht(e))i.push(a.shape);this.build($r(i)),this.built=!0,this.initialWeights&&this.setWeights(this.initialWeights),this._refCount===null&&s&&(this._refCount=1)}if(this.assertInputCompatibility(e),s){let i=this.call(e,n);this.supportsMasking&&this.setMaskMetadata(e,i);const a=ht(i),l=[];for(let c of a)r.indexOf(c)!==-1&&(c=c.clone()),l.push(c);if(i=$r(l),this.activityRegularizer!=null)throw new We("Layer invocation in the presence of activity regularizer(s) is not supported yet.");return i}else{const i=GVe(e),a=this.computeOutputShape(i);let l;const c=HVe(e);if(this.warnOnIncompatibleInputShape(Array.isArray(e)?i[0]:i),a!=null&&a.length>0&&Array.isArray(a[0])?l=a.map((u,d)=>new yi(c,u,this,ht(e),n,this.name,d)):l=new yi(c,a,this,ht(e),n,this.name),this.addInboundNode(e,l,null,null,i,a,n),this._refCount++,this.activityRegularizer!=null)throw new We("Layer invocation in the presence of activity regularizer(s) is not supported yet.");return l}})}warnOnIncompatibleInputShape(e){if(this.batchInputShape!=null)if(e.length!==this.batchInputShape.length)console.warn(`The rank of the input tensor provided (shape: ${JSON.stringify(e)}) does not match that of the batchInputShape (${JSON.stringify(this.batchInputShape)}) of the layer ${this.name}`);else{let n=!1;this.batchInputShape.forEach((r,o)=>{r!=null&&e[o]!=null&&e[o]!==r&&(n=!0)}),n&&console.warn(`The shape of the input tensor (${JSON.stringify(e)}) does not match the expectation of layer ${this.name}: ${JSON.stringify(this.batchInputShape)}`)}}get outputShape(){if(this.inboundNodes==null||this.inboundNodes.length===0)throw new qs(`The layer ${this.name} has never been called and thus has no defined output shape.`);const e=[];for(const n of this.inboundNodes){const r=JSON.stringify(n.outputShapes);e.indexOf(r)===-1&&e.push(r)}if(e.length===1){const n=this.inboundNodes[0].outputShapes;return Array.isArray(n)&&Array.isArray(n[0])&&n.length===1?n[0]:n}else throw new qs(`The layer ${this.name} has multiple inbound nodes with different output shapes. Hence the notion of "output shape" is ill-defined for the layer.`)}countParams(){if(!this.built)throw new Bo(`You tried to call countParams() on ${this.name}, but the layer is not built yet. Build it first by calling build(batchInputShape).`);return qb(this.weights)}build(e){this.built=!0}getWeights(e=!1){return OI(e?this.trainableWeights:this.weights)}setWeights(e){Y(()=>{const n=this.weights;if(n.length!==e.length)throw new W(`You called setWeights(weights) on layer "${this.name}" with a weight list of length ${e.length}, but the layer was expecting ${n.length} weights. Provided weights: ${e}...`);if(n.length===0)return;const r=[],o=OI(n);for(let s=0;s<o.length;++s){const i=o[s],a=n[s],l=e[s];if(!dt(i.shape,l.shape))throw new W(`Layer weight shape ${i.shape} not compatible with provided weight shape ${l.shape}`);r.push([a,l])}tP(r)})}addWeight(e,n,r,o,s,i,a,l){if(this._addedWeightNames.indexOf(e)!==-1)throw new W(`Duplicate weight name ${e} for layer ${this.name}`);this._addedWeightNames.push(e),r==null&&(r="float32"),this.fastWeightInitDuringBuild&&(o=l!=null?l():Mt("zeros"));const c=o.apply(n,r),u=new zVe(c,r,e,i,a);return c.dispose(),s!=null&&this.addLoss(()=>s.apply(u.read())),i==null&&(i=!0),i?this._trainableWeights.push(u):this._nonTrainableWeights.push(u),u}setFastWeightInitDuringBuild(e){this.fastWeightInitDuringBuild=e}addLoss(e){e==null||Array.isArray(e)&&e.length===0||(e=ht(e),this._losses!==void 0&&this._losses!==null&&this.losses.push(...e))}computeOutputShape(e){return e}computeMask(e,n){if(!this.supportsMasking){if(n!=null)if(Array.isArray(n))n.forEach(r=>{if(r!=null)throw new TypeError(`Layer ${this.name} does not support masking, but was passed an inputMask.`)});else throw new TypeError(`Layer ${this.name} does not support masking, but was passed an inputMask.`);return null}return n}setMaskMetadata(e,n,r){if(!this.supportsMasking)return;const o=this.computeMask(e,r),s=ht(n),i=ht(o);if(s.length!==i.length)throw new Error(`${this.name} outputs ${s.length} tensors but ${s.length} masks for those tensors`);for(let a=0;a<s.length;a++)s[a].kerasMask=i[a]}addInboundNode(e,n,r,o,s,i,a=null){const l=ht(e);n=ht(n),r=ht(r),o=ht(o),s=Kb(s),i=Kb(i);const c=[],u=[],d=[];for(const f of l)c.push(f.sourceLayer),u.push(f.nodeIndex),d.push(f.tensorIndex);new eS({outboundLayer:this,inboundLayers:c,nodeIndices:u,tensorIndices:d,inputTensors:l,outputTensors:n,inputMasks:r,outputMasks:o,inputShapes:s,outputShapes:i},a);for(let f=0;f<n.length;f++)n[f].sourceLayer=this,n[f].nodeIndex=this.inboundNodes.length-1,n[f].tensorIndex=f}getConfig(){const e={name:this.name,trainable:this.trainable};return this.batchInputShape!=null&&(e.batchInputShape=this.batchInputShape),this.dtype!=null&&(e.dtype=this.dtype),e}disposeWeights(){return this.weights.forEach(e=>e.dispose()),this.weights.length}assertNotDisposed(){if(this._refCount===0)throw new Error(`Layer '${this.name}' is already disposed.`)}dispose(){if(!this.built)throw new Error(`Cannot dispose Layer ${this.name} because it has not been built yet.`);if(this._refCount===null)throw new Error(`Cannot dispose Layer ${this.name} because it has not been used yet.`);this.assertNotDisposed();let e=0;return--this._refCount===0&&(e=this.disposeWeights()),{refCountAfterDispose:this._refCount,numDisposedVariables:e}}}function GVe(t){t=ht(t);const e=[];for(const n of t)e.push(n.shape);return $r(e)}function HVe(t){return"float32"}function dX(t,e,n){if((e==null||n!=null&&n>0)&&(e=t.sourceLayer,n=t.nodeIndex),e.inboundNodes.length===0)return[t];{const r=e.inboundNodes[n];if(r.inboundLayers.length===0)return r.inputTensors;{const o=[];for(let s=0;s<r.inboundLayers.length;s++){const i=r.inputTensors[s],a=r.inboundLayers[s],l=r.nodeIndices[s],c=dX(i,a,l);for(const u of c)o.indexOf(u)===-1&&o.push(u)}return o}}}function KVe(t){let e=!0;for(const n of ht(t))if(!(n instanceof yi)){e=!1;break}return e}function qVe(t){let e=!0;for(const n of ht(t))if(n instanceof yi){e=!1;break}return e}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class wy extends Ke{constructor(e){if(super({dtype:e.dtype,name:e.name!=null?e.name:Z1("input").toString()}),e.batchSize==null&&(e.batchSize=null),e.sparse==null&&(e.sparse=!1),this.trainable=!1,this.built=!0,this.sparse=e.sparse,e.inputShape!=null&&e.batchInputShape!=null)throw new W("Only provide the inputShape OR batchInputShape argument to inputLayer, not both at the same time.");let n=e.batchInputShape;if(n==null){if(e.inputShape==null)throw new W("An InputLayer should be passed either a `batchInputShape` or an `inputShape`.");n=[e.batchSize].concat(e.inputShape)}else if(e.batchSize!=null)throw new W("Cannot specify batchSize if batchInputShape is specified when creating an InputLayer.");const r=e.dtype||"float32";this.batchInputShape=n,this.dtype=r,this.inputSpec=[{shape:n}];const o=new yi(this.dtype,this.batchInputShape,this,[],{},this.name);o.nodeIndex=0,o.tensorIndex=0,new eS({outboundLayer:this,inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:[o],outputTensors:[o],inputMasks:[null],outputMasks:[null],inputShapes:[n],outputShapes:[n]})}apply(e,n){throw new W(`Cannot pass any input to an InputLayer's apply() method. InputLayer name: ${this.name}`)}dispose(){return{refCountAfterDispose:this._refCount,numDisposedVariables:0}}getConfig(){return{batchInputShape:this.batchInputShape,dtype:this.dtype,sparse:this.sparse,name:this.name}}}wy.className="InputLayer";ue(wy);function XVe(t){if(t.batchShape==null&&t.shape==null)throw new Error("Please provide to Input either a `shape` or a `batchShape` argument. Note that `shape` does not include the batch dimension.");if(t.batchShape!=null&&t.shape!=null)throw new W("Please provide either a `shape` or `batchShape` argument to Input, but not both.");let e=t.batchShape;t.shape!=null&&e==null&&(e=[null].concat(t.shape));let n=t.dtype;return n==null&&(n="float32"),new wy({batchInputShape:e,name:t.name,dtype:n,sparse:t.sparse}).inboundNodes[0].outputTensors[0]}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function YVe(t,e){if(t.dtype==null||t.dtype===e.dtype)return e;try{return xe(e,t.dtype)}catch{throw new W(`The dtype of the feed (${e.dtype}) can not be cast to the dtype of the key '${t.name}' (${t.dtype}).`)}}class Va{constructor(e){if(this.id2Value={},this.id2Mask={},this.name2Id={},e instanceof Va)for(const n in e.id2Value)this.id2Value[n]=e.id2Value[n],n in e.id2Mask&&(this.id2Mask[n]=e.id2Mask[n]);else{if(e==null)return;for(const n of e)this.add(n.key,n.value)}}add(e,n,r){if(this.id2Value[e.id]==null)this.id2Value[e.id]=YVe(e,n),this.name2Id[e.name]=e.id,r!=null&&(this.id2Mask[e.id]=r);else throw new W(`Duplicate key: name=${e.name}, id=${e.id}`);return this}addFeed(e){this.add(e.key,e.value)}hasKey(e){return this.id2Value[e.id]!=null}names(){return Object.keys(this.name2Id)}getValue(e){if(e instanceof yi){if(this.id2Value[e.id]==null)throw new W(`Nonexistent key: ${e.name}`);return this.id2Value[e.id]}else{const n=this.name2Id[e];if(n==null)throw new W(`Feed dict has no SymbolicTensor name: ${e}`);return this.id2Value[n]}}getMask(e){if(e instanceof yi){if(this.id2Value[e.id]==null)throw new W(`Nonexistent key: ${e.name}`);return this.id2Mask[e.id]}else{const n=this.name2Id[e];if(n==null)throw new W(`Feed dict has no SymbolicTensor name: ${e}`);return this.id2Mask[n]}}disposeMasks(){this.id2Mask!=null&&qe(this.id2Mask)}}const Xb=new q8,Yb=new q8;function QVe(t){Xb!=null&&Xb.setMaxEntries(t),Yb!=null&&Yb.setMaxEntries(t)}function qh(t,e,n,r){const o=n==null?!1:n.training,s=Array.isArray(t),i=s?t:[t],a=i.map(p=>p.name),l=[],c=e.names();for(const p of a)c.indexOf(p)!==-1?l.push(e.getValue(p)):l.push(null);const u=a.join(",")+"|"+e.names().sort().join(",");let d=Xb.get(u),f;if(d==null){const p=ZVe(i,e);d=p.sorted,f=p.recipientCounts,Xb.put(u,d),Yb.put(u,f)}f={},o||Object.assign(f,Yb.get(u));const h=new Va(e);for(let p=0;p<d.length;++p){const m=d[p],g=m.sourceLayer;if(g instanceof wy)continue;const y=[],v=[],x=[];let b=!1;for(const I of m.inputs){const E=h.getValue(I),N=h.getMask(I);y.push(E),v.push(N),N!=null&&(b=!0),o||(f[I.name]--,f[I.name]===0&&!e.hasKey(I)&&a.indexOf(I.name)===-1&&!E.isDisposed&&I.sourceLayer.stateful!==!0&&x.push(E))}b&&(n=n||{},n.mask=v[0]);const w=ht(g.apply(y,n));let C=null;g.supportsMasking&&(C=g.computeMask(y,v));const $=eUe(m),T=Array.isArray($)?$:[$];for(let I=0;I<T.length;++I){h.hasKey(T[I])||h.add(T[I],w[I],Array.isArray(C)?C[0]:C);const E=a.indexOf(T[I].name);E!==-1&&(l[E]=w[I])}o||qe(x)}return h.disposeMasks(),s?l:l[0]}function ZVe(t,e){M(t!=null&&t.length>0,()=>"Expected at least one fetch, got none");let n=[],r={};if(t.length===1){const o=wj(t[0],e);n=o.sorted,r=o.recipientMap}else{const o=new Set;for(const s of t){const{sorted:i,recipientMap:a}=wj(s,e);for(const l of i)o.has(l.name)||(n.push(l),o.add(l.name));for(const l in a)r[l]==null&&(r[l]=new Set),a[l].forEach(c=>r[l].add(c))}}return{sorted:n,recipientCounts:JVe(r)}}function JVe(t){const e={};for(const n in t)e[n]=t[n].size;return e}function wj(t,e){const n=new Set,r=[],o={};for(const a of e.names())n.add(a);const s=[],i=[];for(s.push(t);s.length>0;){const a=s[s.length-1];if(n.has(a.name)){s.pop();continue}const l=i[i.length-1]===s.length-1;if(a.inputs.length===0||l)s.pop(),r.push(a),n.add(a.name),l&&i.pop();else{i.push(s.length-1);for(const c of a.inputs)o[c.name]==null&&(o[c.name]=new Set),o[c.name].add(a.name),!n.has(c.name)&&s.push(c)}}return{sorted:r,recipientMap:o}}function eUe(t){let e;if(t.sourceLayer.inboundNodes.length===1)e=t.sourceLayer.output;else{let n=null;for(let r=0;r<t.sourceLayer.inboundNodes.length;++r)for(const o of t.sourceLayer.inboundNodes[r].outputTensors)if(o.id===t.id){n=r;break}e=t.sourceLayer.getOutputAt(n)}return e}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const tUe=ee();tUe.registerFlag("TOPOLOGICAL_SORT_CACHE_MAX_ENTRIES",()=>100,QVe);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function nP(t,e){return Y(()=>Yn(Ee(U(t,t),e,!0)))}class Sy extends Zf{getConfig(){return{}}}class fX extends Sy{constructor(e){super(),this.defaultMaxValue=2,this.defaultAxis=0,this.maxValue=e.maxValue!=null?e.maxValue:this.defaultMaxValue,this.axis=e.axis!=null?e.axis:this.defaultAxis}apply(e){return Y(()=>{const n=nP(e,this.axis),r=yo(n,0,this.maxValue);return U(e,Ae(r,de(pn(),n)))})}getConfig(){return{maxValue:this.maxValue,axis:this.axis}}}fX.className="MaxNorm";ue(fX);class hX extends Sy{constructor(e){super(),this.defaultAxis=0,this.axis=e.axis!=null?e.axis:this.defaultAxis}apply(e){return Y(()=>Ae(e,de(pn(),nP(e,this.axis))))}getConfig(){return{axis:this.axis}}}hX.className="UnitNorm";ue(hX);class pX extends Sy{apply(e){return fu(e)}}pX.className="NonNeg";ue(pX);class mX extends Sy{constructor(e){super(),this.defaultMinValue=0,this.defaultMaxValue=1,this.defaultRate=1,this.defaultAxis=0,this.minValue=e.minValue!=null?e.minValue:this.defaultMinValue,this.maxValue=e.maxValue!=null?e.maxValue:this.defaultMaxValue,this.rate=e.rate!=null?e.rate:this.defaultRate,this.axis=e.axis!=null?e.axis:this.defaultAxis}apply(e){return Y(()=>{const n=nP(e,this.axis),r=de(U(this.rate,yo(n,this.minValue,this.maxValue)),U(1-this.rate,n));return U(e,Ae(r,de(pn(),n)))})}getConfig(){return{minValue:this.minValue,maxValue:this.maxValue,rate:this.rate,axis:this.axis}}}mX.className="MinMaxNorm";ue(mX);const Sj={maxNorm:"MaxNorm",minMaxNorm:"MinMaxNorm",nonNeg:"NonNeg",unitNorm:"UnitNorm"};function yn(t){return GO(t)}function Cj(t,e={}){return yy(t,_o.getMap().classNameMap,e,"constraint")}function vn(t){if(t==null)return null;if(typeof t=="string"){const n={className:t in Sj?Sj[t]:t,config:{}};return Cj(n)}else return t instanceof Sy?t:Cj(t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */async function Bl(t){if(t==null)return;const e=[],n=[],r=[];for(const o in t){const s=t[o];if(typeof s!="number"){const i=s;e.push(i.data()),n.push(o),r.push(i)}}if(e.length>0){const o=await Promise.all(e);for(let s=0;s<o.length;++s)t[n[s]]=o[s][0];qe(r)}}function gX(t){if(t!=null)for(const e in t){const n=t[e];typeof n!="number"&&n.dispose()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */var $j;(function(t){t[t.SILENT=0]="SILENT",t[t.VERBOSE=1]="VERBOSE"})($j||($j={}));const nUe=125;class Am{constructor(){this.validationData=null}setParams(e){this.params=e}async onEpochBegin(e,n){}async onEpochEnd(e,n){}async onBatchBegin(e,n){}async onBatchEnd(e,n){}async onTrainBegin(e){}async onTrainEnd(e){}setModel(e){}}class rUe{constructor(e,n=10){e==null&&(e=[]),this.callbacks=e,this.queueLength=n}append(e){this.callbacks.push(e)}setParams(e){for(const n of this.callbacks)n.setParams(e)}setModel(e){for(const n of this.callbacks)n.setModel(e)}async onEpochBegin(e,n){n==null&&(n={});for(const r of this.callbacks)await r.onEpochBegin(e,n)}async onEpochEnd(e,n){n==null&&(n={});for(const r of this.callbacks)await r.onEpochEnd(e,n)}async onBatchBegin(e,n){n==null&&(n={});for(const r of this.callbacks)await r.onBatchBegin(e,n)}async onBatchEnd(e,n){n==null&&(n={});for(const r of this.callbacks)await r.onBatchEnd(e,n)}async onTrainBegin(e){e==null&&(e={});for(const n of this.callbacks)await n.onTrainBegin(e)}async onTrainEnd(e){e==null&&(e={});for(const n of this.callbacks)await n.onTrainEnd(e)}}class oUe extends Am{constructor(){super()}async onEpochBegin(e){this.seen=0,this.totals={}}async onBatchEnd(e,n){n==null&&(n={});const r=n.size==null?0:n.size;this.seen+=r;for(const o in n){const s=n[o];if(typeof s=="number")this.totals.hasOwnProperty(o)||(this.totals[o]=0),this.totals[o]=this.totals[o]+s*r;else{let i;o in this.totals?i=this.totals[o]:this.totals[o]=0;const a=Y(()=>de(this.totals[o],U(s,r)));this.totals[o]=a,i!=null&&i.dispose()}}}async onEpochEnd(e,n){if(n!=null)for(const r of this.params.metrics)this.totals[r]!=null&&(typeof this.totals[r]=="number"?n[r]=this.totals[r]/this.seen:Y(()=>{const o=U(Ae(1,this.seen),this.totals[r]);n[r]=o,this.totals[r].dispose(),li(n[r])}))}}class sUe extends Am{async onTrainBegin(e){this.epoch=[],this.history={}}async onEpochEnd(e,n){n==null&&(n={}),this.epoch.push(e);for(const r in n)this.history[r]==null&&(this.history[r]=[]),this.history[r].push(n[r])}async syncData(){const e=[],n=[],r=[];for(const s in this.history){const i=this.history[s];for(let a=0;a<i.length;++a)if(typeof i[a]!="number"){const l=i[a];e.push(l.data()),n.push(s),r.push(a)}}const o=await Promise.all(e);for(let s=0;s<o.length;++s)this.history[n[s]][r[s]].dispose(),this.history[n[s]][r[s]]=o[s][0]}}class iUe extends Am{constructor(e,n){if(super(),this.currentEpoch=0,this.nowFunc=e.nowFunc,this.nextFrameFunc=e.nextFrameFunc||w8,this.yieldEvery=n||"auto",this.yieldEvery==="auto"&&(this.yieldEvery=nUe),this.yieldEvery==="never"&&e.onYield!=null)throw new Error("yieldEvery is `never` but you provided an `onYield` callback. Either change `yieldEvery` or remove the callback");iI(this.yieldEvery)&&(this.maybeWait=xVe(this.maybeWait.bind(this),this.yieldEvery,this.nowFunc)),this.trainBegin=e.onTrainBegin,this.trainEnd=e.onTrainEnd,this.epochBegin=e.onEpochBegin,this.epochEnd=e.onEpochEnd,this.batchBegin=e.onBatchBegin,this.batchEnd=e.onBatchEnd,this.yield=e.onYield}async maybeWait(e,n,r){const o=[];this.yield!=null&&(await Bl(r),o.push(this.yield(e,n,r))),o.push(this.nextFrameFunc()),await Promise.all(o)}async onEpochBegin(e,n){this.currentEpoch=e,this.epochBegin!=null&&(await Bl(n),await this.epochBegin(e,n))}async onEpochEnd(e,n){const r=[];this.epochEnd!=null&&(await Bl(n),r.push(this.epochEnd(e,n))),this.yieldEvery==="epoch"&&r.push(this.nextFrameFunc()),await Promise.all(r)}async onBatchBegin(e,n){this.batchBegin!=null&&(await Bl(n),await this.batchBegin(e,n))}async onBatchEnd(e,n){const r=[];this.batchEnd!=null&&(await Bl(n),r.push(this.batchEnd(e,n))),this.yieldEvery==="batch"?r.push(this.nextFrameFunc()):iI(this.yieldEvery)&&r.push(this.maybeWait(this.currentEpoch,e,n)),await Promise.all(r)}async onTrainBegin(e){this.trainBegin!=null&&(await Bl(e),await this.trainBegin(e))}async onTrainEnd(e){this.trainEnd!=null&&(await Bl(e),await this.trainEnd(e))}}function yX(t,e){return t==null&&(t={}),t instanceof Am?[t]:Array.isArray(t)&&t[0]instanceof Am?t:ht(t).map(r=>new iUe(r,e))}class Eo{constructor(){}static registerCallbackConstructor(e,n){M(e>=0&&Number.isInteger(e),()=>`Verbosity level is expected to be an integer >= 0, but got ${e}`),Eo.checkForDuplicate(n),Eo.constructors[e]==null&&(Eo.constructors[e]=[]),Eo.constructors[e].push(n)}static checkForDuplicate(e){for(const n in Eo.constructors)Eo.constructors[+n].forEach(o=>{if(o===e)throw new W("Duplicate callback constructor.")})}static clear(){Eo.constructors={}}static createCallbacks(e){const n=[];for(const r in Eo.constructors){const o=+r;e>=o&&n.push(...Eo.constructors[o])}return n.map(r=>new r)}}Eo.constructors={};function vX(t,e,n,r,o,s,i,a,l){const c=new sUe,u=[new oUe,...Eo.createCallbacks(e)];t!=null&&u.push(...t),u.push(c);const d=new rUe(u);return d.setParams({epochs:n,initialEpoch:r,samples:o,steps:s,batchSize:i,verbose:e,doValidation:a,metrics:l}),{callbackList:d,history:c}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function Vi(t,e={},n=!1){return yy(t,_o.getMap().classNameMap,e,"layer",n)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function Qb(t,e){return Y(()=>{t.dtype!=="float32"&&(t=xe(t,"float32"));const n=Ee(xy(t),e,!0),r=U1(n.shape,pn()),o=Yn(Pl(n,r));return Ae(t,o)})}function tS(t,e){return Y(()=>cn(xy(_e(e,t)),-1))}function rP(t,e){return Y(()=>cn(ir(_e(e,t)),-1))}function oP(t,e){return Y(()=>{const n=_e(t,e),r=yo(ir(t),pn(),Number.MAX_VALUE),o=ir(Ae(n,r));return U(100,cn(o,-1))})}function aUe(t,e){return Y(()=>{const n=yo(e,pn(),Number.MAX_VALUE),r=gi(de(1,n)),o=yo(t,pn(),Number.MAX_VALUE),s=gi(de(1,o));return cn(xy(_e(r,s)),-1)})}function lUe(t,e){return Y(()=>{const n=Pl(0,_e(1,U(t,e)));return cn(xy(n),-1)})}function cUe(t,e){return Y(()=>{const n=Pl(0,_e(1,U(t,e)));return cn(n,-1)})}function uUe(t,e){return Y(()=>{const n=Ee(U(t,e),-1),r=Is(U(_e(1,t),e),-1);return Pl(0,de(1,_e(r,n)))})}function dUe(t,e){return Y(()=>{const n=Math.log(2),r=_e(e,t),o=_e(de(r,uy(U(-2,r))),n);return cn(o,-1)})}function Om(t,e,n=!1){return Y(()=>{if(n)e=lO(e);else{const r=Ee(e,e.shape.length-1,!0);e=Ae(e,r)}return e=yo(e,pn(),1-pn()),Zt(Ee(U(xe(t,"float32"),gi(e)),e.shape.length-1))})}function Zb(t,e,n=!1){return Y(()=>{const r=xe(K1(OVe(t)),"int32");e=yo(e,pn(),1-pn());const o=e.shape,s=q(Vq(r,o[o.length-1]),o);return Om(s,e,n)})}function fUe(t,e){if(!dt(t.shape,e.shape))throw new W(`logits and labels must have the same shape, but got shapes ${JSON.stringify(t.shape)} and ${JSON.stringify(e.shape)}`);return Y(()=>{const n=fu(e),r=Zt(ir(e));return de(_e(n,U(e,t)),jq(mi(r)))})}function nS(t,e){return Y(()=>{let n;return n=yo(e,pn(),1-pn()),n=gi(Ae(n,_e(1,n))),cn(fUe(t,n),-1)})}function hUe(t,e){return Y(()=>{const n=yo(t,pn(),1),r=yo(e,pn(),1);return Ee(U(t,gi(Ae(n,r))),-1)})}function pUe(t,e){return Y(()=>{const n=gi(de(pn(),e));return cn(_e(e,U(t,n)),-1)})}function xX(t,e){return Y(()=>{const n=Qb(t,-1),r=Qb(e,-1),o=U(n,r);return Zt(Ee(o,-1))})}const Jb={meanSquaredError:tS,meanAbsoluteError:rP,meanAbsolutePercentageError:oP,meanSquaredLogarithmicError:aUe,squaredHinge:lUe,hinge:cUe,categoricalHinge:uUe,logcosh:dUe,categoricalCrossentropy:Om,sparseCategoricalCrossentropy:Zb,binaryCrossentropy:nS,kullbackLeiblerDivergence:hUe,poisson:pUe,cosineProximity:xX};function GC(t){if(typeof t=="string"){if(t in Jb)return Jb[t];let e=`Unknown loss ${t}`;throw t.toLowerCase().includes("softmaxcrossentropy")&&(e=`Unknown loss ${t}. Use "categoricalCrossentropy" as the string name for tf.losses.softmaxCrossEntropy`),new W(e)}else return t}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function bX(t,e){return Y(()=>{const n=U(.5,Xo(e)),r=ui(bo(e,n),t.dtype);return cn(pi(t,r),-1)})}function wX(t,e){return Y(()=>ui(pi(km(t,-1),km(e,-1)),"float32"))}function mUe(t,e){return Y(()=>xe(Ee(ta(pi(t,1),pi(e,1))),"float32"))}function gUe(t,e){return Y(()=>xe(Ee(ta(pi(t,0),pi(e,1))),"float32"))}function yUe(t,e){return Y(()=>{const n=mUe(t,e),r=gUe(t,e),o=de(n,r);return xe(fr(bo(o,0),Ae(n,o),0),"float32")})}function vUe(t,e){return nS(t,e)}function xUe(t,e){return t.rank===e.rank&&(t=fy(t,[t.rank-1])),e=km(e,-1),e.dtype!==t.dtype&&(e=xe(e,t.dtype)),xe(pi(t,e),"float32")}const bUe=tS,wUe=tS,SUe=rP,CUe=rP,$Ue=oP,kUe=oP,SX=Om,TUe=xX,CX=Zb,e0={binaryAccuracy:bX,categoricalAccuracy:wX,precision:yUe,categoricalCrossentropy:SX,sparseCategoricalCrossentropy:CX,mse:bUe,MSE:wUe,mae:SUe,MAE:CUe,mape:$Ue,MAPE:kUe,cosine:TUe};function IUe(t){if(typeof t=="string"&&t in e0)return e0[t];if(typeof t!="string"&&t!=null)return t;throw new W(`Unknown metric ${t}`)}function Cv(t){if(Xs(t!==null,`Unknown LossOrMetricFn ${t}`),typeof t=="string")return t;{let e;for(const n of Object.keys(Jb))if(Jb[n]===t){e=n;break}if(e!==void 0)return e;for(const n of Object.keys(e0))if(e0[n]===t){e=n;break}return e!==void 0?e:t.name}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function EUe(t){const e={Adagrad:()=>Nu.adagrad(.01),Adadelta:()=>Nu.adadelta(1,.95,pn()),Adam:()=>Nu.adam(.001,.9,.999,pn()),Adamax:()=>Nu.adamax(.002,.9,.999,pn(),0),RMSProp:()=>Nu.rmsprop(.001,.9,0,pn()),SGD:()=>Nu.sgd(.01)};if(e.adagrad=e.Adagrad,e.adadelta=e.Adadelta,e.adam=e.Adam,e.adamax=e.Adamax,e.rmsprop=e.RMSProp,e.sgd=e.SGD,t in e)return e[t]();throw new W(`Unknown Optimizer ${t}`)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const kj=1*1024*1024;function Tj(t,e,n=!1){if(t==null||typeof t!="object"||Object.getPrototypeOf(t)!==Object.prototype||!PI(t))throw new Error("User-defined metadata is expected to be a JSON object, but is not.");if(n){const r=JSON.stringify(t);r.length>kj&&console.warn(`User-defined metadata of model "${e}" is too large in size (length=${r.length} when serialized). It is not recommended to store such large objects in user-defined metadata. Please make sure its serialized length is <= ${kj}.`)}}function PI(t){if(t===null)return!0;if(typeof t=="object")if(Object.getPrototypeOf(t)===Object.prototype){const e=Object.keys(t);for(const n of e)if(typeof n!="string"||!PI(t[n]))return!1;return!0}else if(Array.isArray(t)){for(const e of t)if(!PI(e))return!1;return!0}else return!1;else{const e=typeof t;return e==="string"||e==="number"||e==="boolean"}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function NUe(t,e,n,r=console.log){const o=OUe(t),s=["Layer (type)","Input Shape","Output shape","Param #"];o?(e=e||90,n=n||[.32,.61,.89,1]):(e=e||115,n=n||[.24,.48,.7,.8,1]),n[n.length-1]<=1&&(n=n.map(u=>Math.floor(e*u)));let i;if(!o){s.push("Receives inputs"),i=[];for(const u in t.nodesByDepth)i.push(...t.nodesByDepth[u])}r("_".repeat(e)),t0(s,n,r),r("=".repeat(e));const a=t.layers;for(let u=0;u<a.length;++u)o?PUe(a[u],n,r):RUe(a[u],n,i,r),r((u===a.length-1?"=":"_").repeat(e));t.checkTrainableWeightsConsistency();const l=AUe(t),c=qb(t.nonTrainableWeights);r(`Total params: ${l+c}`),r(`Trainable params: ${l}`),r(`Non-trainable params: ${c}`),r("_".repeat(e))}function AUe(t){let e;return t.collectedTrainableWeights!=null?e=qb(t.collectedTrainableWeights):e=qb(t.trainableWeights),e}function OUe(t){let e=!0;const n=[],r=[];for(const o in t.nodesByDepth)n.push(t.nodesByDepth[o]);for(const o of n){if(o.length>1||o.length===1&&o[0].inboundLayers.length>1){e=!1;break}r.push(...o)}if(e)for(const o of t.layers){let s=!1;for(const i of o.inboundNodes)if(r.indexOf(i)!==-1)if(s){e=!1;break}else s=!0;if(!e)break}return e}function t0(t,e,n=console.log){let r="";for(let o=0;o<t.length;++o)o>0&&(r=r.slice(0,r.length-1)+" "),r+=t[o],r=r.slice(0,e[o]),r+=" ".repeat(e[o]-r.length);n(r)}function PUe(t,e,n){let r,o;try{o=t.inboundNodes.map(l=>JSON.stringify(l.inputShapes)).join(",")}catch{o="multiple"}try{r=JSON.stringify(t.outputShape)}catch{r="multiple"}const s=t.name,i=t.getClassName(),a=[`${s} (${i})`,o,r,t.countParams().toString()];t0(a,e,n)}function RUe(t,e,n,r){let o,s;try{s=t.inboundNodes.map(d=>JSON.stringify(d.inputShapes)).join(",")}catch{s="multiple"}try{o=JSON.stringify(t.outputShape)}catch{o="multiple"}const i=[];for(const d of t.inboundNodes)if(!(n!=null&&n.length>0&&n.indexOf(d)===-1))for(let f=0;f<d.inboundLayers.length;++f){const h=d.inboundLayers[f].name,p=d.nodeIndices[f],m=d.tensorIndices[f];i.push(`${h}[${p}][${m}]`)}const a=t.name,l=t.getClassName(),c=i.length===0?"":i[0],u=[`${a} (${l})`,s,o,t.countParams().toString(),c];t0(u,e,r);for(let d=1;d<i.length;++d)t0(["","","","",i[d]],e,r)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function $X(t,e,n){return(t==="inboundNodes"||t==="outputLayers"||t==="inputLayers")&&e===0&&typeof n=="string"}function RI(t,e){if(t===null)return null;if(typeof t=="string")return Yl(t);if(typeof t=="number"||typeof t=="boolean")return t;if(t instanceof Array){const n=[],r=t.length;for(let o=0;o<r;++o){const s=t[o];$X(e,o,s)?n.push(s):n.push(RI(s,e))}return n}else{const n={};for(const r of Object.keys(t)){const o=t[r];if(r==="name"&&typeof o=="string")n[r]=o;else{const s=Yl(r);n[s]=RI(o,s)}}return n}}function _I(t,e){if(t==null)return null;if(typeof t=="string")return Ei(t);if(typeof t=="number"||typeof t=="boolean")return t;if(t instanceof Array){const n=[],r=t.length;for(let o=0;o<r;++o){const s=t[o];$X(e,o,s)?n.push(s):n.push(_I(s,e))}return n}else{const n={};for(const r of Object.keys(t)){const o=t[r],s=Ei(r);(r==="name"||r==="className")&&typeof o=="string"?n[s]=o:n[s]=_I(o,r)}return n}}/** @license See the LICENSE file. */const kX="4.22.0";/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const _Ue=t=>{const e=Object.keys(t);if(e.length===0)return!1;const n=e[0].split("/");return!isNaN(parseInt(n[n.length-1],10))};class as extends Ke{constructor(e){if(super({}),this.containerNodes=new Set,this.name=e.name,this.name==null){const v=this.getClassName().toLowerCase();this.name=Z1(v)}if(this.supportsMasking=!1,this.trainable_=!0,Array.isArray(e.inputs)?this.inputs=e.inputs.slice():this.inputs=[e.inputs],Array.isArray(e.outputs)?this.outputs=e.outputs.slice():this.outputs=[e.outputs],ol(this.inputs).length!==this.inputs.length)throw new W(`The list of inputs passed to the model is redundant. All inputs should only appear once. Found: ${this.inputs.map(v=>v.name)}`);ol(this.outputs).length!==this.outputs.length&&console.warn(`The list of outputs passed to the model is redundant. All outputs should only appear once. Found: ${this.outputs.map(v=>v.name)}`),this.inputLayers=[],this.inputLayersNodeIndices=[],this.inputLayersTensorIndices=[],this.outputLayers=[],this.outputLayersNodeIndices=[],this.outputLayersTensorIndices=[],this.layers=[],this.internalContainerRefs=[];for(const v of this.outputs){const x=v.sourceLayer,b=v.nodeIndex,w=v.tensorIndex;this.outputLayers.push(x),this.outputLayersNodeIndices.push(b),this.outputLayersTensorIndices.push(w)}for(const v of this.inputs){const x=v.sourceLayer,b=v.nodeIndex,w=v.tensorIndex;Xs(b===0,"input layer has >1 nodes"),Xs(w===0,"input layer has >1 tensors"),this.inputLayers.push(x),this.inputLayersNodeIndices.push(b),this.inputLayersTensorIndices.push(w)}this.inputNames=[],this.outputNames=[],this.feedInputShapes=[],this.feedInputNames=[],this.feedOutputNames=[];for(let v=0;v<this.inputLayers.length;v++){const x=this.inputLayers[v];if(!(x instanceof wy))throw new TypeError(`Input layers to a LayersModel must be InputLayer objects. Received inputs: ${e.inputs}. Input ${v} (0-based) originates from layer type ${x.getClassName()}.`);this.inputNames.push(x.name),this.feedInputShapes.push(x.batchInputShape),this.feedInputNames.push(x.name)}for(const v of this.outputLayers)this.outputNames.push(v.name);this.internalInputShapes=this.inputs.map(v=>v.shape),this.internalOutputShapes=this.outputs.map(v=>v.shape);const n={},r={},o={},s={},i={},a=[],l=(v,x,b,w,C,$)=>{(w==null||C==null||$==null)&&(w=v.sourceLayer,C=v.nodeIndex,$=v.tensorIndex);const T=w.inboundNodes[C];if(b.indexOf(T)!==-1)throw new Bo(`The tensor ${v.name} at layer "${w.name}" is part of a cycle.`);if(x.indexOf(T)!==-1)return;this.containerNodes.add(as.nodeKey(w,C)),w.id in i||(i[w.id]=Object.keys(i).length),b.indexOf(T)===-1&&b.push(T);const I=T.inboundLayers.length;for(let E=0;E<I;E++){const N=T.inputTensors[E],A=T.inboundLayers[E],R=T.nodeIndices[E],P=T.tensorIndices[E];l(N,x,b,A,R,P)}for(x.push(T);b.indexOf(T)>=0;)b.splice(b.indexOf(T),1);a.push(T)},c=[],u=[];for(const v of this.outputs)l(v,c,u);const d=a.slice().reverse();for(const v of d){r[v.id]=v,v.id in n||(n[v.id]=0);let x=n[v.id];const b=o[v.outboundLayer.id]==null?0:o[v.outboundLayer.id];x=Math.max(x,b),o[v.outboundLayer.id]=x,s[v.outboundLayer.id]=v.outboundLayer,n[v.id]=x;for(let w=0;w<v.inboundLayers.length;w++){const C=v.inboundLayers[w],$=v.nodeIndices[w],T=C.inboundNodes[$],I=n[T.id]==null?0:n[T.id];n[T.id]=Math.max(x+1,I),r[T.id]=T}}const f={};for(const v in n){const x=n[v];x in f||(f[x]=[]),f[x].push(r[v])}const h={};for(const v in o){const x=o[v];x in h||(h[x]=[]),h[x].push(s[v])}let p=Object.keys(h).map(v=>parseInt(v,10)).sort(bv);this.layers=[];for(const v of p){const x=h[v];x.sort((b,w)=>{const C=i[b.id],$=i[w.id];return C<$?-1:C>$?1:0});for(const b of x)b instanceof as&&this.internalContainerRefs.push(b),this.layers.push(b)}this.layersByDepth=h,p=Object.keys(f).map(v=>parseInt(v,10)).sort(bv);const m=this.inputs.slice(),g=[];for(const v of p)for(const x of f[v]){const b=x.outboundLayer;if(b!=null){for(const w of x.inputTensors)if(m.indexOf(w)===-1)throw new Bo(`Graph disconnected: cannot obtain value for tensor ${w} at layer "${b.name}". The following previous layers were accessed without issue: ${g}`);for(const w of x.outputTensors)m.push(w);g.push(b.name)}}this.nodesByDepth=f;const y=this.layers.map(v=>v.name);for(const v of y){const x=y.filter(b=>b===v).length;if(x!==1)throw new Bo(`The name "${v}" is used ${x} times in the model. All layer names should be unique. Layer names: `+JSON.stringify(y))}this.outboundNodes=[],this.inboundNodes=[],new eS({outboundLayer:this,inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:this.inputs,outputTensors:this.outputs,inputMasks:this.inputs.map(v=>null),outputMasks:this.outputs.map(v=>null),inputShapes:this.inputs.map(v=>v.shape),outputShapes:this.outputs.map(v=>v.shape)}),this.built=!0,this._refCount=1}assertNotDisposed(){if(this._refCount===0)throw new Error(`Container '${this.name}' is already disposed.`)}dispose(){this.assertNotDisposed();const e={refCountAfterDispose:null,numDisposedVariables:0};if(--this._refCount===0){for(const n of this.layers)e.numDisposedVariables+=n.dispose().numDisposedVariables;for(const n of this.internalContainerRefs)e.numDisposedVariables+=n.dispose().numDisposedVariables}return e.refCountAfterDispose=this._refCount,e}get trainable(){return this.trainable_}set trainable(e){this.layers.forEach(n=>{n._trainableWeights.forEach(r=>r.trainable=e)}),this.trainable_=e}get trainableWeights(){if(this._trainableWeights.length>0)throw new W("Container instance unexpectedly contains _trainableWeights.The trainable weights of a Container are a union of the trainable weights of its consituent Layers. Its own _trainableWeights must remain an empty Array.");if(!this.trainable)return[];let e=[];for(const n of this.layers)e=e.concat(n.trainableWeights);return e}get nonTrainableWeights(){const e=[];for(const n of this.layers)e.push(...n.nonTrainableWeights);if(!this.trainable){const n=[];for(const r of this.layers)n.push(...r.trainableWeights);return n.concat(e)}return e}get weights(){return this.trainableWeights.concat(this.nonTrainableWeights)}loadWeights(e,n=!0){const r={};let o=0;const s=_Ue(e);s&&this.parseWeights(e);for(const a of this.layers)for(const[l,c]of a.weights.entries()){const u=s?`${c.name.split("/").slice(0,-1).join("/")+"/"}${l}`:c.originalName;if(r[u]!=null)throw new W(`Duplicate weight name: ${u}`);r[u]=c,o++}const i=[];for(const a in e){let l=a;if(r[a]==null){const c=a.split("/");l=c.slice(0,-2).concat([c[c.length-1]]).join("/")}if(r[l]!=null)i.push([r[l],e[a]]);else if(n)throw new W(`Provided weight data has no target variable: ${a}`);delete r[l]}if(n){const a=[];for(const l in r)a.push(l);if(a.length>0)throw new W(`${a.length} of ${o} weights are not set: ${a}`)}tP(i)}parseWeights(e){for(const n in Object.keys(e)){const r=n.split("/"),o=["vars","layer_checkpoint_dependencies"],s=r.map(i=>i.startsWith("_")?i.slice(1):i).filter(i=>!o.includes(i)).join("/");s!==n&&(e[s]=e[n],delete e[n])}}updatedConfig(){const e=this.getConfig(),n={};return n.className=this.getClassName(),n.config=e,n.kerasVersion=`tfjs-layers ${kX}`,n.backend="TensorFlow.js",n}toJSON(e,n=!0){const r=_I(this.updatedConfig());return n?JSON.stringify(r):r}call(e,n){return Y(()=>{e=ht(e);const r=new Va;for(let o=0;o<this.inputs.length;++o)r.add(this.inputs[o],e[o]);return qh(this.outputs,r,n)})}computeMask(e,n){return Y(()=>{e=ht(e);let r;return n==null?r=Xc(null,e.length):r=ht(n),this.runInternalGraph(e,r)[1]})}computeOutputShape(e){const n=Kb(e);if(n.length!==this.inputLayers.length)throw new W(`Invalid inputShape argument ${e}: model has ${this.inputLayers.length} tensor inputs.`);const r={};for(let a=0;a<n.length;a++){const l=this.inputLayers[a],c=n[a],u=l.name+"_0_0";r[u]=c}const o=Object.keys(this.nodesByDepth).map(a=>parseInt(a,10)).sort(bv);if(o.length>1)for(const a of o){const l=this.nodesByDepth[a];for(const c of l){const u=c.outboundLayer;if(this.inputLayers.map(m=>m.id).indexOf(u.id)!==-1)continue;const d=[];for(let m=0;m<c.inboundLayers.length;m++){const g=c.inboundLayers[m],y=c.nodeIndices[m],v=c.tensorIndices[m],x=`${g.name}_${y}_${v}`,b=r[x];d.push(b)}const f=u.computeOutputShape($r(d)),h=Kb(f),p=u.inboundNodes.indexOf(c);for(let m=0;m<h.length;m++){const g=`${u.name}_${p}_${m}`;r[g]=h[m]}}}const s=[],i=[];for(let a=0;a<this.outputLayers.length;a++){const l=this.outputLayers[a],c=this.outputLayersNodeIndices[a],u=this.outputLayersTensorIndices[a],d=`${l.name}_${c}_${u}`;i.push(d)}for(let a=0;a<i.length;a++){const l=i[a];Xs(l in r),s.push(r[l])}return $r(s)}runInternalGraph(e,n){n==null&&(n=Xc(null,e.length));const r={};for(let l=0;l<this.inputs.length;++l){const c=this.inputs[l],u=e[l],d=n[l];r[c.id]=[u,d]}const o=Object.keys(this.nodesByDepth).map(l=>parseInt(l,10)).sort(bv);for(const l of o){const c=this.nodesByDepth[l];for(const u of c){const d=u.outboundLayer,f=u.inputTensors,h=u.outputTensors,p=new Array;for(const m of f)m.id in r&&p.push(r[m.id]);if(p.length===f.length){let m={},g,y,v,x;if(u.callArgs!=null&&(m=u.callArgs),p.length===1){const[b,w]=p[0];m.mask==null&&(m.mask=w),v=ht(d.call(b,m)),x=ht(d.computeMask(b,w)),g=[b],y=[w]}else g=p.map(b=>b[0]),y=p.map(b=>b[1]),m.mask==null&&(m.mask=y),v=ht(d.call(g,m)),x=ht(d.computeMask(g,y));if(d.activityRegularizer)throw new We("LayersModel invocation with concrete Tensor value(s) in the presence of activity regularizer(s) is not supported yet.");for(let b=0;b<h.length;++b){const w=h[b],C=v[b],$=x[b];r[w.id]=[C,$]}}}}const s=[],i=[],a=[];for(const l of this.outputs){Xs(l.id in r,`Could not compute output ${l.name} : ${l.id}`);const[c,u]=r[l.id];a.push(c.shape),s.push(c),i.push(u)}return[s,i,a]}buildNodeConversionMap(e){const n={};let r;for(const o of this.layers){r=o instanceof as?1:0;for(let s=0;s<o.inboundNodes.length;s++){const i=as.nodeKey(o,s);this.containerNodes.has(i)&&(n[i]=r,r+=1)}}return n}getLayer(e,n){if(n!=null)return this.findLayer(n);if(e==null)throw new W("Provide either a layer name or layer index");if(typeof e=="number")return this.findLayer(e);for(const r of this.layers)if(r.name===e)return r;throw new W(`No such layer: ${e}`)}findLayer(e){if(this.layers.length<=e)throw new W(`Was asked to retrieve layer at index ${e}, but model only has ${this.layers.length} layer(s).`);return this.layers[e]}calculateLosses(){return Y(()=>{const e=[];for(const n of this.layers)for(let r=0;r<n.inboundNodes.length;++r){const o=as.nodeKey(n,r);this.containerNodes.has(o)&&e.push(...n.calculateLosses())}return e})}getConfig(){const e={name:this.name},n=this.buildNodeConversionMap(this.layers),r=[];for(const i of this.layers){const a=i.getClassName(),l=i.getConfig(),c=[];for(let d=0;d<i.inboundNodes.length;d++){const f=i.inboundNodes[d],h=as.nodeKey(i,d);let p={};if(this.containerNodes.has(h)){if(f.callArgs)try{JSON.stringify(f.callArgs),p=f.callArgs}catch{console.warn(`Layer ${i.name} was passed non-serializable keyword arguments: ${f.callArgs}. They will not be included in the serialized model (and thus will be missing at deserialization time).`),p={}}if(f.inboundLayers.length>0){const m=[];for(let g=0;g<f.inboundLayers.length;g++){const y=f.inboundLayers[g],v=f.nodeIndices[g],x=f.tensorIndices[g],b=as.nodeKey(y,v);let w=n[b];w==null&&(w=0),m.push([y.name,w,x,p])}c.push(m)}}}const u={};u.name=i.name,u.className=a,u.config=l,u.inboundNodes=c,r.push(u)}e.layers=r;const o=[];for(let i=0;i<this.inputLayers.length;i++){const a=this.inputLayers[i],l=this.inputLayersNodeIndices[i],c=as.nodeKey(a,l);if(!this.containerNodes.has(c))continue;let u=n[c];u==null&&(u=0);const d=this.inputLayersTensorIndices[i];o.push([a.name,u,d])}e.inputLayers=o;const s=[];for(let i=0;i<this.outputLayers.length;i++){const a=this.outputLayers[i],l=this.outputLayersNodeIndices[i],c=as.nodeKey(a,l);if(!this.containerNodes.has(c))continue;let u=n[c];u==null&&(u=0);const d=this.outputLayersTensorIndices[i];s.push([a.name,u,d])}return e.outputLayers=s,e}static fromConfig(e,n,r={},o=!1){const s={},i={};function a(g,y){g.name in i?i[g.name].push(y):i[g.name]=[y]}function l(g,y){const v=[];let x;for(const b of y){const w=b[0],C=b[1],$=b[2];if(x=b[3]==null?{}:b[3],!(w in s)){a(g,y);return}const T=s[w];if(T.inboundNodes.length<=C){a(g,y);return}const I=T.inboundNodes[C];v.push(I.outputTensors[$])}v.length>0&&g.apply($r(v),x)}function c(g){const y=g.name,v=Vi(g,n.customObjects!=null?n.customObjects:{});v.setFastWeightInitDuringBuild(o),s[y]=v,g.inboundNodes.forEach(b=>{if(!(b instanceof Array))throw new W(`Corrupted configuration, expected array for nodeData: ${b}`);a(v,b)})}const u=n.name,d=n.layers;for(const g of d)c(g);for(;!vVe(i);)for(const g of d){const y=s[g.name];if(y.name in i){const v=i[y.name];delete i[y.name];for(const x of v)l(y,x)}}const f=[],h=[],p=n.inputLayers;for(const g of p){const y=g[0],v=g[1],x=g[2];Xs(y in s);const w=s[y].inboundNodes[v].outputTensors;f.push(w[x])}const m=n.outputLayers;for(const g of m){const y=g[0],v=g[1],x=g[2];Xs(y in s);const w=s[y].inboundNodes[v].outputTensors;h.push(w[x])}return new e({inputs:f,outputs:h,name:u})}get stateful(){if(this._stateful)throw new W("Container instance unexpectedly has _stateful = true. The statefulness of a Container is determined by the Layers it contains. Its _stateful property must remain the default false.");for(const e of this.layers)if(e.stateful)return!0;return!1}resetStates(){Y(()=>{this.layers.forEach(e=>{e.stateful&&e.resetStates()})})}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function DUe(t,e,n){const r=e.length;if(t==null||Array.isArray(t)&&t.length===0)return e.map(o=>null);if(r===1)return Array.isArray(t)&&t.length===1?t:typeof t=="object"&&e[0]in t?[t[e[0]]]:[t];if(Array.isArray(t)){if(t.length!==r)throw new Error(`Provided ${n} is an array of ${t.length} element(s), but the model has ${r} outputs. Make sure a set of weights is provided for each model output.`);return t}else if(typeof t=="object"&&Object.keys(t).length>0&&typeof t[Object.keys(t)[0]]=="object"){const o=[];return e.forEach(s=>{s in t?o.push(t[s]):o.push(null)}),o}else throw new Error(`The model has multiple (${r}) outputs, so ${n} must be either an array with ${r} elements or an object with ${e} keys. Provided ${n} not understood: ${JSON.stringify(t)}`)}function TX(t,e){return DUe(t,e,"classWeight")}async function IX(t,e,n,r){if(n!=null){const o=Y(()=>{if(t.shape.length===1)return wc(t);if(t.shape.length===2){if(t.shape[1]>1)return km(t,1);if(t.shape[1]===1)return q(t,[t.shape[0]]);throw new Error(`Encountered unexpected last-dimension size (${t.shape[1]}) during handling of class weights. The size is expected to be >= 1.`)}else throw new Error(`Unexpected rank of target (y) tensor (${t.rank}) during handling of class weights. The rank is expected to be 1 or 2.`)}),s=Array.from(await o.data());qe(o);const i=[];return s.forEach(a=>{if(n[a]==null)throw new Error(`classWeight must contain all classes in the training data. The class ${a} exists in the data but not in classWeight`);i.push(n[a])}),Hr(i,"float32")}else return null}function MUe(t,e){return U(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const FUe=32;function EX(t,e){let n,r;const o=e;n=o.xs,r=o.ys,M(n!=null&&r!=null,()=>`A Dataset iterator for fitDataset() is expected to generate objects of the form \`{xs: xVal, ys: yVal}\`, where the two values may be \`tf.Tensor\`, an array of Tensors, or a map of string to Tensor.  The provided Dataset instead generates ${e}`);const s=Ij("input",t.inputNames,n),i=Ij("output",t.outputNames,r),a=s[0].shape[0];M(s.length===t.inputs.length,()=>`LayersModel has ${t.inputs.length} inputs, but the dataset provides ${s.length} inputs.  (Expected input keys: ${JSON.stringify(t.inputNames)})`),M(i.length===t.outputs.length,()=>`LayersModel has ${t.outputs.length} outputs, but the dataset provides ${i.length} outputs.  (Expected output keys: ${JSON.stringify(t.outputNames)})`);for(let l=0;l<s.length;l++)M(s[l].shape[0]===a,()=>`Batch size mismatch: input ${t.inputNames[l]} has ${s[l].shape[0]}; expected  ${a} based on input ${t.inputNames[0]}.`);for(let l=0;l<i.length;l++)M(i[l].shape[0]===a,()=>`Batch size mismatch: output ${t.outputNames[l]} has ${i[l].shape[0]}; expected  ${a} based on input ${t.inputNames[0]}.`);return{xs:s,ys:i}}function Ij(t,e,n){if(n instanceof fn)return[n];if(Array.isArray(n))return M(n.length===e.length,()=>`Received an array of ${n.length} Tensors, but expected ${e.length} to match the ${t} keys ${e}.`),n;{const r=[];for(const o of e){if(n[o]==null)throw new W(`The feature data generated by the dataset lacks the required ${t} key '${o}'.`);r.push(n[o])}return r}}function LUe(t){if(t.length===3)throw new We("Validation with sample weights is not implemented yet.");return{xs:t[0],ys:t[1]}}async function jUe(t,e,n){const r=n.batchesPerEpoch!=null;if(M(t.optimizer!=null,()=>"You must compile a model before training/testing. Use LayersModel.compile(modelCompileConfig)."),M(n!=null,()=>"For fitDataset(), the 2nd argument (config) is required, but it is not provided in this call."),M(n.epochs!=null&&n.epochs>0&&Number.isInteger(n.epochs),()=>`For fitDataset(), config.epochs is expected to be a positive integer, but got ${n.epochs}`),M(!r||n.batchesPerEpoch>0&&Number.isInteger(n.batchesPerEpoch),()=>`For fitDataset(), config.batchesPerEpoch is expected to be a positive integer if specified, but got ${n.batchesPerEpoch}`),M(n.validationSplit==null,()=>"`validationSplit` is not supported by `fitDataset()`. Use validationData instead."),t.isTraining)throw new Error("Cannot start training because another fit() call is ongoing.");t.isTraining=!0;try{const o=n.validationData!=null;let s,i;if(o)if(Ej(n.validationData))M(n.validationBatches==null||n.validationBatches>0&&Number.isInteger(n.validationBatches),()=>`For fitDataset() with dataset-based validation, config.validationBatches is expected not to be provided, or to be a positive integer, but got ${n.validationBatches}`);else{const g=LUe(n.validationData);s=g.xs,i=g.ys}const a=t.makeTrainFunction(),l=t.getDedupedMetricsNames();let c;o?c=l.slice().concat(l.map(g=>"val_"+g)):c=l.slice();const u=yX(n.callbacks,n.yieldEvery),d=n.verbose==null?1:n.verbose,{callbackList:f,history:h}=vX(u,d,n.epochs,null,null,BUe(e,n),null,o,c);f.setModel(t),t.history=h,await f.onTrainBegin(),t.stopTraining_=!1;let p=n.initialEpoch==null?0:n.initialEpoch,m=await e.iterator();for(;p<n.epochs;){const g={};await f.onEpochBegin(p);let y=0,v=0;for(r||(m=await e.iterator());!r||y<n.batchesPerEpoch;){const x=await m.next();if(r&&x.done){console.warn(`You provided \`batchesPerEpoch\` as ${n.batchesPerEpoch}, but your dataset iterator ran out of data after ${y} batches; interrupting training. Make sure that your dataset can generate at least \`batchesPerEpoch * epochs\` batches (in this case, ${n.batchesPerEpoch*n.epochs} batches). You may need to use the repeat() function when building your dataset.`);break}if(x.value!=null){const{xs:b,ys:w}=EX(t,x.value),C={};C.batch=v,C.size=b[0].shape[0],await f.onBatchBegin(v,C);const $=[];if(n.classWeight!=null){const E=TX(n.classWeight,t.outputNames);for(let N=0;N<E.length;++N)$.push(await IX(w[N],null,E[N]))}const T=b.concat(w).concat($),I=a(T);qe(T);for(let E=0;E<l.length;++E){const N=l[E],A=I[E];C[N]=A,li(A)}await f.onBatchEnd(v,C),gX(C),v++,y++}if(r?y>=n.batchesPerEpoch:x.done){if(o){let b;Ej(n.validationData)?b=ht(await t.evaluateDataset(n.validationData,{batches:n.validationBatches})):b=ht(t.evaluate(s,i,{batchSize:n.validationBatchSize==null?FUe:n.validationBatchSize,verbose:0}));for(let w=0;w<t.metricsNames.length;++w)g[`val_${t.metricsNames[w]}`]=b[w]}break}if(t.stopTraining_)break}if(await f.onEpochEnd(p,g),p++,t.stopTraining_)break}return await f.onTrainEnd(),await t.history.syncData(),t.history}finally{t.isTraining=!1}}function BUe(t,e){let n=null;return e.batchesPerEpoch!=null?n=e.batchesPerEpoch:Number.isFinite(t.size)&&(n=t.size),n}function Ej(t){return typeof t.iterator=="function"}function zUe(t){return typeof t.next=="function"}async function WUe(t,e,n){n=n||{};const r=n.batches!=null,o=t.testFunction;let s=[];if(n.verbose>0)throw new We("Verbose mode is not implemented yet.");M(!r||n.batches>0&&Number.isInteger(n.batches),()=>`Test loop expects \`batches\` to be a positive integer, but received ${JSON.stringify(n.batches)}`);const i=zUe(e)?e:await e.iterator();let a=0,l=0;for(;!r||l<n.batches;){const c=await i.next();if(s=Y(()=>{if(c.value){const{xs:u,ys:d}=EX(t,c.value),f=u.concat(d),h=Y(()=>o(f));if(qe(f),l===0)for(let m=0;m<h.length;++m)s.push(ct(0));const p=f[0].shape[0];for(let m=0;m<h.length;++m){const g=h[m],y=s[m];s[m]=Y(()=>de(s[m],U(p,g))),l>0&&qe(y)}qe(h),a+=p,++l}return s}),c.done){r&&console.warn(`Your dataset iterator ran out of data during evaluateDataset(). Interrupting evalution. Make sure that your dataset can generate at least \`batches\` batches (in this case, ${n.batches} batches). You may need to use the repeat() function when building your dataset.`);break}}for(let c=0;c<s.length;++c){const u=s[c];s[c]=Ae(s[c],a),qe(u)}return $r(s)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function HC(t){M(t>0&&Number.isInteger(t),()=>`batchSize is required to be a positive integer, but got ${t}`)}function Dh(t,e,n){return t==null?[null]:Array.isArray(t)?t.map(r=>Cc(r,e,n-e)):Cc(t,e,n-e)}function DI(t,e){return Y(()=>t==null?null:Array.isArray(t)?t.map(n=>DI(n,e)):nX(t,e.dtype==="int32"?e:xe(e,"int32")))}function KC(t,e){const n=[];let r=0,o=null;for(;r<t;)o=r+e,o>=t&&(o=t),n.push([r,o]),r=o;return n}function NX(t){const e=[];t instanceof fn&&(t=[t]);for(let n=0;n<t.length;++n){const r=t[n];if(r.rank===1)e.push(vy(r,1));else{if(r.rank===0)throw new Error("Expected tensor to be at least 1D, but received a 0D tensor (scalar).");e.push(r)}}return e}function ss(t,e){if(t==null)return;const n=[];if(e instanceof fn)n.push(e.id);else if(Array.isArray(e))e.forEach(o=>n.push(o.id));else if(e!=null)for(const o in e){const s=e[o];n.push(s.id)}const r=[];if(t instanceof fn)n.indexOf(t.id)===-1&&r.push(t);else if(Array.isArray(t))t.forEach(o=>{n.indexOf(o.id)===-1&&r.push(o)});else if(t!=null)for(const o in t){const s=t[o];n.indexOf(s.id)===-1&&r.push(s)}r.forEach(o=>{o.isDisposed||o.dispose()})}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function VUe(t){return t instanceof fn}function MI(t){return Array.isArray(t)}function Nj(t){return!VUe(t)&&!MI(t)}function Aj(t,e,n,r=!0,o=""){if(e==null||e.length===0){if(t!=null){let i=!1;if(MI(t)&&t.length>0)i=!0;else if(Nj(t)){for(const a in t)if(t.hasOwnProperty(a)){i=!0;break}}else i=!0;if(i)throw new W(`Error when checking model ${o} expected no data, but got ${t}`)}return[]}if(t==null)return e.map(i=>null);let s;if(Nj(t)){t=t,s=[];for(const i of e){if(t[i]==null)throw new W(`No data provided for "${i}". Need data for each key in: ${e}`);s.push(t[i])}}else if(MI(t)){if(t=t,t.length!==e.length)throw new W(`Error when checking model ${o}: the Array of Tensors that you are passing to your model is not the size the model expected. Expected to see ${e.length} Tensor(s), but instead got the following list of Tensor(s): ${t}`);s=t}else{if(t=t,e.length>1)throw new W(`The model ${o} expects ${e.length} Tensor(s), but only received one Tensor. Found: Tensor with shape ${t.shape}`);s=[t]}if(s=NX(s),n!=null)for(let i=0;i<e.length;++i){if(n[i]==null)continue;const a=s[i];if(a.shape.length!==n[i].length)throw new W(`Error when checking ${o}: expected ${e[i]} to have ${n[i].length} dimension(s). but got array with shape ${a.shape}`);for(let l=0;l<n[i].length;++l){if(l===0&&!r)continue;const c=a.shape[l],u=n[i][l];if(u!=null&&u>=0&&c!==u)throw new W(`${o} expected a batch of elements where each example has shape [${n[i].slice(1,n[i].length)}] (i.e.,tensor shape [*,${n[i].slice(1,n[i].length)}]) but the ${o} received an input with ${a.shape[0]} examples, each with shape [${a.shape.slice(1,a.shape.length)}] (tensor shape [${a.shape}])`)}}return s}function UUe(t,e,n){const r=ol(t.map(s=>s.shape[0]));r.sort();const o=ol(e.map(s=>s.shape[0]));if(o.sort(),r.length>1)throw new W(`All input Tensors (x) should have the same number of samples. Got array shapes: ${JSON.stringify(t.map(s=>s.shape))}`);if(o.length>1)throw new W(`All target Tensors (y) should have the same number of samples. Got array shapes: ${JSON.stringify(e.map(s=>s.shape))}`);if(r.length>0&&o.length>0&&!dt(r,o))throw new W(`Input Tensors should have the same number of samples as target Tensors. Found ${r[0]} input sample(s) and ${o[0]} target sample(s).`)}function GUe(t,e,n){const r=[tS,nS,Om];for(let o=0;o<t.length;++o){const s=t[o],i=e[o],a=n[o];if(i!=null){if(i===Om&&s.shape[s.shape.length-1]===1)throw new W(`You are passing a target array of shape ${s.shape} while using a loss 'categorical_crossentropy'. 'categorical_crossentropy'expects targets to be binary matrices (1s and 0s) of shape [samples, classes].`);if(r.indexOf(i)!==-1){const l=s.shape.slice(1),c=a.slice(1);for(let u=0;u<l.length;++u){const d=l[u],f=c[u];if(f!=null&&d!==f)throw new W(`A target Tensor with shape ${s.shape} was passed for an output of shape ${a}, while using a loss function that expects targets to have the same shape as the output.`)}}}}}function Oj(t,e,n,r=!0,o=""){let s;if(Array.isArray(t)){if(t.length!==e.length)throw new W(`Error when checking model ${o}: the Array of Tensors that you are passing to your model is not the size the the model expected. Expected to see ${e.length} Tensor(s), but instead got ${t.length} Tensors(s).`);s=t}else{if(e.length>1)throw new W(`The model expects ${e.length} ${o} Tensors, but only received one Tensor. Found: array with shape ${JSON.stringify(t.shape)}.`);s=[t]}if(n!=null)for(let i=0;i<e.length;++i){if(n[i]==null)continue;const a=s[i];if(a.shape.length!==n[i].length)throw new W(`Error when checking ${o}: expected ${e[i]} to have ${n[i].length} dimension(s), but got array with shape ${JSON.stringify(a.shape)}`);for(let l=0;l<n[i].length;++l){if(l===0&&!r)continue;const c=a.shape[l],u=n[i][l];if(u!=null&&u!==c)throw new W(`Error when checking ${o}: expected ${e[i]} to have shape ${JSON.stringify(n[i])} but got array with shape ${JSON.stringify(a.shape)}.`)}}}function HUe(t,e){if(t==null||Array.isArray(t)&&t.length===0)return e.map(r=>[]);let n;if(typeof t=="string"||typeof t=="function")n=[t];else if(Array.isArray(t)||typeof t=="object")n=t;else throw new TypeError(`Type of metrics argument not understood. Expected an string,function, Array, or Object, found: ${t}`);if(Array.isArray(n))return e.map(r=>n);{const r=[];for(const o of e){let s=n.hasOwnProperty(o)?n[o]:[];Array.isArray(s)||(s=[s]),r.push(s)}return r}}const KUe="layers-model";class md extends as{constructor(e){super(e),this.isTraining=!1}summary(e,n,r=console.log){if(!this.built)throw new W("This model has never been called, thus its weights have not been created yet. So no summary can be displayed. Build the model first (e.g., by calling it on some test data).");NUe(this,e,n,r)}compile(e){if(e.loss==null&&(e.loss=[]),this.loss=e.loss,typeof e.optimizer=="string")this.optimizer_=EUe(e.optimizer),this.isOptimizerOwned=!0;else{if(!(e.optimizer instanceof _l))throw new W("User-defined optimizer must be an instance of tf.Optimizer.");this.optimizer_=e.optimizer,this.isOptimizerOwned=!1}let n=[];if(!Array.isArray(e.loss)&&typeof e.loss!="string"&&typeof e.loss!="function"){e.loss=e.loss;for(const i in e.loss)if(this.outputNames.indexOf(i)===-1)throw new W(`Unknown entry in loss dictionary: "${i}". Only expected the following keys: ${this.outputNames}`);for(const i of this.outputNames)e.loss[i]==null&&console.warn(`Output "${i}" is missing from loss dictionary. We assume this was done on purpose, and we will not be expecting data to be passed to ${i} during training`),n.push(GC(e.loss[i]))}else if(Array.isArray(e.loss)){if(e.loss.length!==this.outputs.length)throw new W(`When passing an Array as loss, it should have one entry per model output. The model has ${this.outputs.length} output(s), but you passed loss=${e.loss}.`);n=e.loss.map(a=>GC(a))}else{const i=GC(e.loss);this.outputs.forEach(a=>{n.push(i)})}this.lossFunctions=n,this.feedOutputNames=[],this.feedOutputShapes=[],this.feedLossFns=[];for(let i=0;i<this.outputs.length;++i){const a=this.internalOutputShapes[i],l=this.outputNames[i];this.feedOutputNames.push(l),this.feedOutputShapes.push(a),this.feedLossFns.push(this.lossFunctions[i])}const r=[];this.metrics=e.metrics,this.metricsNames=["loss"],this.metricsTensors=[],Sc("loss",()=>{for(let i=0;i<this.outputs.length;++i){if(r.indexOf(i)!==-1)continue;const a=this.lossFunctions[i];this.outputs.length>1&&(this.metricsTensors.push([a,i]),this.metricsNames.push(this.outputNames[i]+"_loss"))}});const o=HUe(e.metrics,this.outputNames),s=(i,a,l)=>{this.outputNames.length>1&&(a=this.outputNames[i]+"_"+a),this.metricsNames.push(a),this.metricsTensors.push([l,i])};Sc("metric",()=>{for(let i=0;i<this.outputs.length;++i){if(r.indexOf(i)!==-1)continue;const a=o[i];(c=>{const u="";let d,f,h;for(const p of c){if(typeof p=="string"&&["accuracy","acc","crossentropy","ce"].indexOf(p)!==-1){const g=this.internalOutputShapes[i];g[g.length-1]===1||this.lossFunctions[i]===nS?["accuracy","acc"].indexOf(p)!==-1?f=bX:["crossentropy","ce"].indexOf(p)!==-1&&(f=vUe):this.lossFunctions[i]===Zb?["accuracy","acc"].indexOf(p)!==-1?f=xUe:["crossentropy","ce"].indexOf(p)!==-1&&(f=CX):["accuracy","acc"].indexOf(p)!==-1?f=wX:["crossentropy","ce"].indexOf(p)!==-1&&(f=SX);let y;["accuracy","acc"].indexOf(p)!==-1?y="acc":["crossentropy","ce"].indexOf(p)!==-1&&(y="ce"),h=f,d=u+y}else h=IUe(p),d=u+Cv(p);let m;Sc(d,()=>{m=h}),s(i,d,m)}})(a)}}),this.collectedTrainableWeights=this.trainableWeights}checkTrainableWeightsConsistency(){this.collectedTrainableWeights!=null&&this.trainableWeights.length!==this.collectedTrainableWeights.length&&console.warn("Discrepancy between trainableweights and collected trainable weights. Did you set `model.trainable` without calling `model.compile()` afterwards?")}evaluate(e,n,r={}){const o=r.batchSize==null?32:r.batchSize;HC(o);const i=this.standardizeUserDataXY(e,n,!0,o);try{const a=i[0].concat(i[1]);this.makeTestFunction();const l=this.testFunction,c=this.testLoop(l,a,o,r.verbose,r.steps);return $r(c)}finally{ss(i[0],e),ss(i[1],n)}}async evaluateDataset(e,n){return this.makeTestFunction(),WUe(this,e,n)}checkNumSamples(e,n,r,o="steps"){let s;if(r!=null){if(s=null,n!=null)throw new W(`If ${o} is set, batchSize must be null or undefined.Got batchSize = ${n}`)}else if(e!=null)Array.isArray(e)?s=e[0].shape[0]:s=e.shape[0];else throw new W(`Either the input data should have a defined shape, or ${o} shoud be specified.`);return s}execute(e,n){if(Array.isArray(n)&&n.length===0)throw new W("`outputs` is an empty Array, which is not allowed.");const r=Array.isArray(n),o=r?n:[n],s=this.retrieveSymbolicTensors(o),i=new Va;if(e instanceof fn&&(e=[e]),Array.isArray(e)){if(e.length!==this.inputs.length)throw new W(`The number of inputs provided (${e.length}) does not match the number of inputs of this model (${this.inputs.length}).`);for(let l=0;l<this.inputs.length;++l)i.add(this.inputs[l],e[l])}else for(const l of this.inputs){const c=e[l.name];if(c==null)throw new W(`No value is provided for the model's input ${l.name}`);i.add(l,c)}const a=qh(s,i);return r?a:a[0]}retrieveSymbolicTensors(e){const n=Xc(null,e.length);let r=e.length;for(const o of this.layers){const s=Array.isArray(o.output)?o.output:[o.output],i=s.map(a=>a.name);for(let a=0;a<e.length;++a){const l=i.indexOf(e[a]);if(l!==-1&&(n[a]=s[l],r--),r===0)break}if(r===0)break}if(r>0){const o=[];throw n.forEach((s,i)=>{s==null&&o.push(e[i])}),new W(`Cannot find SymbolicTensors for output name(s): ${JSON.stringify(o)}`)}return n}predictLoop(e,n=32,r=!1){return Y(()=>{const o=this.checkNumSamples(e);if(r)throw new We("Verbose predictLoop() is not implemented yet.");const s=KC(o,n),i=this.outputs.map(a=>[]);for(let a=0;a<s.length;++a)Y(()=>{const c=s[a][0],u=s[a][1],d=Dh(e,c,u),f=[];if(Array.isArray(d))for(let p=0;p<d.length;++p)f.push({key:this.inputs[p],value:d[p]});else f.push({key:this.inputs[0],value:d});const h=new Va(f);return qh(this.outputs,h)}).forEach((c,u)=>i[u].push(c));return $r(i.map(a=>Nr(a,0)))})}predict(e,n={}){const r=NX(e);Oj(r,this.inputNames,this.feedInputShapes,!1);try{const o=n.batchSize==null?32:n.batchSize;return HC(o),this.predictLoop(r,o)}finally{ss(r,e)}}predictOnBatch(e){Oj(e,this.inputNames,this.feedInputShapes,!0);const n=(Array.isArray(e)?e[0]:e).shape[0];return this.predictLoop(e,n)}standardizeUserDataXY(e,n,r=!0,o){if(this.optimizer_==null)throw new Bo("You must compile a model before training/testing. Use LayersModel.compile(modelCompileArgs).");const s=[];for(let i=0;i<this.feedOutputShapes.length;++i){const a=this.feedOutputShapes[i];this.feedLossFns[i]===Zb?s.push(a.slice(0,a.length-1).concat([1])):s.push(a)}if(e=Aj(e,this.feedInputNames,this.feedInputShapes,!1,"input"),n=Aj(n,this.feedOutputNames,s,!1,"target"),UUe(e,n),GUe(n,this.feedLossFns,this.feedOutputShapes),this.stateful&&o!=null&&o>0&&e[0].shape[0]%o!==0)throw new W(`In a stateful network, you should only pass inputs with a number of samples that is divisible by the batch size ${o}. Found: ${e[0].shape[0]} sample(s).`);return[e,n]}async standardizeUserData(e,n,r,o,s=!0,i){const[a,l]=this.standardizeUserDataXY(e,n,s,i);if(r!=null)throw new Error("sample weight is not supported yet.");let c=null;if(o!=null){const u=TX(o,this.outputNames);c=[];for(let d=0;d<u.length;++d)c.push(await IX(l[d],null,u[d]))}return[a,l,c]}testLoop(e,n,r,o=0,s){return Y(()=>{const i=this.checkNumSamples(n,r,s,"steps"),a=[];if(o>0)throw new We("Verbose mode is not implemented yet.");if(s!=null)throw new We("steps mode in testLoop() is not implemented yet");{const l=KC(i,r),c=Hr(Ps(0,i));for(let u=0;u<l.length;++u){const d=l[u][0],f=l[u][1],h=Cc(c,d,f-d),p=DI(n,h),m=e(p);if(u===0)for(let g=0;g<m.length;++g)a.push(ct(0));for(let g=0;g<m.length;++g){const y=m[g];a[g]=de(a[g],U(f-d,y))}}for(let u=0;u<a.length;++u)a[u]=Ae(a[u],i)}return a})}getDedupedMetricsNames(){const e=this.metricsNames,n=[];for(let r=0;r<e.length;++r){const o=e[r];let s=o;if(mj(e,o)>1){const i=mj(e.slice(0,r),o);s+=`_${i}`}n.push(s)}return n}makeTrainFunction(){return e=>{const n=[],r=e.slice(0,this.inputs.length),o=e.slice(this.inputs.length,this.inputs.length+this.outputs.length),s=e.slice(this.inputs.length+this.outputs.length,this.inputs.length+this.outputs.length*2),i=[],a=()=>{const d=[];for(let m=0;m<this.inputs.length;++m)d.push({key:this.inputs[m],value:r[m]});const f=new Va(d),h=qh(this.outputs,f,{training:!0});let p;for(let m=0;m<this.lossFunctions.length;++m){const g=this.lossFunctions[m];let y=g(o[m],h[m]);s[m]!=null&&(y=MUe(y,s[m]));const v=cn(y);n.push(v),m===0?p=y:p=de(p,y)}for(let m=0;m<this.metricsTensors.length;++m){let g;if(this.outputs.length>1&&m<this.outputs.length)g=n[m];else{const y=this.metricsTensors[m][0],v=this.metricsTensors[m][1];g=cn(y(o[v],h[v]))}li(g),i.push(g)}return p=cn(p),this.calculateLosses().forEach(m=>{p=de(p,m)}),p},l=this.collectedTrainableWeights.map(d=>d.read());return[this.optimizer_.minimize(a,!0,l)].concat(i)}}makeTestFunction(){this.testFunction=e=>Y(()=>{const n=[];let r;const o=e.slice(0,this.inputs.length),s=e.slice(this.inputs.length,this.inputs.length+this.outputs.length),i=[];for(let c=0;c<this.inputs.length;++c)i.push({key:this.inputs[c],value:o[c]});const a=new Va(i),l=qh(this.outputs,a);for(let c=0;c<this.lossFunctions.length;++c){const u=this.lossFunctions[c],d=cn(u(s[c],l[c]));c===0?r=d:r=de(r,d),n.push(r)}for(let c=0;c<this.metricsTensors.length;++c){const u=this.metricsTensors[c][0],d=this.metricsTensors[c][1],f=cn(u(s[d],l[d]));n.push(f)}return n})}async fit(e,n,r={}){if(this.isTraining)throw new Error("Cannot start training because another fit() call is ongoing.");this.isTraining=!0;let o,s,i,a,l,c,u,d,f;try{const h=r.batchSize==null?32:r.batchSize;HC(h);const m=await this.standardizeUserData(e,n,r.sampleWeight,r.classWeight,!1,h);o=m[0],s=m[1],f=m[2];let g=!1,y;if(r.validationData!=null&&r.validationData.length>0){if(g=!0,r.validationData.length===2)l=r.validationData[0],c=r.validationData[1];else throw r.validationData.length===3?new We("validationData including sample weights is not supported yet."):new W(`When passing validation data, it must contain 2 (valX, valY) or 3 (valX, valY, valSampleWeight) items; ${r.validationData} is invalid.`);const E=await this.standardizeUserData(l,c,null,null,!0,h);u=E[0],d=E[1],y=u.concat(d)}else if(r.validationSplit!=null&&r.validationSplit>0&&r.validationSplit<1){g=!0;const I=Math.floor(o[0].shape[0]*(1-r.validationSplit)),E=o[0].shape[0];u=Dh(o,I,E),i=o,o=Dh(o,0,I),d=Dh(s,I,E),a=s,s=Dh(s,0,I),y=u.concat(d)}else r.validationSteps!=null&&(g=!0);const v=o.concat(s).concat(f);this.checkTrainableWeightsConsistency();const x=this.makeTrainFunction(),b=this.getDedupedMetricsNames();let w,C;g?(this.makeTestFunction(),w=this.testFunction,C=b.slice().concat(b.map(I=>"val_"+I))):(w=null,y=[],C=b.slice());const $=yX(r.callbacks,r.yieldEvery);return await this.fitLoop(x,v,b,h,r.epochs,r.verbose,$,w,y,r.shuffle,C,r.initialEpoch,null,null)}finally{this.isTraining=!1,ss(o,e),ss(s,n),ss(i,e),ss(a,n),ss(u,l),ss(d,c),f!=null&&qe(f)}}async fitLoop(e,n,r,o,s,i,a,l,c,u,d,f,h,p){o==null&&(o=32),s==null&&(s=1),u==null&&(u=!0),f==null&&(f=0);let m=!1;if(l!=null&&c!=null&&(m=!0),p!=null&&(m=!0,h==null))throw new W("Can only use `validationSteps` when doing step-wise training, i.e., `stepsPerEpoch` must be set.");const g=this.checkNumSamples(n,o,h,"steps_per_epoch");let y;g!=null&&(y=Ps(0,g)),i==null&&(i=1);const{callbackList:v,history:x}=vX(a,i,s,f,g,h,o,m,d);v.setModel(this),this.history=x,await v.onTrainBegin(),this.stopTraining_=!1;for(let b=f;b<s;++b){await v.onEpochBegin(b);const w={};if(h!=null)throw new We("stepsPerEpoch mode is not implemented yet.");{if(u==="batch")throw new We("batch shuffling is not implemneted yet");u&&OMe(y);const C=Hr(y),$=KC(g,o);for(let T=0;T<$.length;++T){const I={};if(await v.onBatchBegin(T,I),Y(()=>{const E=$[T][0],N=$[T][1],A=Cc(C,E,N-E);I.batch=T,I.size=N-E;const R=DI(n,A),P=e(R);for(let F=0;F<r.length;++F){const _=r[F],L=P[F];I[_]=L,li(L)}if(T===$.length-1&&m){const F=this.testLoop(l,c,o);for(let _=0;_<r.length;++_){const L=r[_],O=F[_];li(O),w["val_"+L]=O}}}),await v.onBatchEnd(T,I),gX(I),this.stopTraining_)break}C.dispose()}if(await v.onEpochEnd(b,w),this.stopTraining_)break}return await v.onTrainEnd(),await this.history.syncData(),this.history}async fitDataset(e,n){return jUe(this,e,n)}async trainOnBatch(e,n){const r=await this.standardizeUserData(e,n),o=r[0],s=r[1],a=this.makeTrainFunction()(o.concat(s)),l=[];for(const c of a){const u=await c.data();l.push(u[0])}return qe(a),ss(r[0],e),ss(r[1],n),$r(l)}getNamedWeights(e){const n=[],r=e!=null&&e.trainableOnly,o=r?this.trainableWeights:this.weights,s=this.getWeights(r);for(let i=0;i<o.length;++i)r&&!o[i].trainable||n.push({name:o[i].originalName,tensor:s[i]});return n}set stopTraining(e){this.stopTraining_=e}get stopTraining(){return this.stopTraining_}get optimizer(){return this.optimizer_}set optimizer(e){this.optimizer_!==e&&(this.optimizer_=e,this.isOptimizerOwned=!1)}dispose(){const e=super.dispose();if(e.refCountAfterDispose===0&&this.optimizer!=null&&this.isOptimizerOwned){const n=QL().numTensors;this.optimizer_.dispose(),e.numDisposedVariables+=n-QL().numTensors}return e}getLossIdentifiers(){let e;if(typeof this.loss=="string")e=Ei(this.loss);else if(Array.isArray(this.loss)){for(const n of this.loss)if(typeof n!="string")throw new Error("Serialization of non-string loss is not supported.");e=this.loss.map(n=>Ei(n))}else{const n=Object.keys(this.loss);e={};const r=this.loss;for(const o of n)if(typeof r[o]=="string")e[o]=Ei(r[o]);else throw new Error("Serialization of non-string loss is not supported.")}return e}getMetricIdentifiers(){if(typeof this.metrics=="string"||typeof this.metrics=="function")return[Ei(Cv(this.metrics))];if(Array.isArray(this.metrics))return this.metrics.map(e=>Ei(Cv(e)));{const e={};for(const n in this.metrics)e[n]=Ei(Cv(this.metrics[n]));return e}}getTrainingConfig(){return{loss:this.getLossIdentifiers(),metrics:this.getMetricIdentifiers(),optimizer_config:{class_name:this.optimizer.getClassName(),config:this.optimizer.getConfig()}}}loadTrainingConfig(e){if(e.weighted_metrics!=null)throw new Error("Loading weight_metrics is not supported yet.");if(e.loss_weights!=null)throw new Error("Loading loss_weights is not supported yet.");if(e.sample_weight_mode!=null)throw new Error("Loading sample_weight_mode is not supported yet.");const n=RI(e.optimizer_config),r=Vi(n);let o;if(typeof e.loss=="string")o=Yl(e.loss);else if(Array.isArray(e.loss))o=e.loss.map(i=>Yl(i));else if(e.loss!=null){o={};for(const i in e.loss)o[i]=Yl(e.loss[i])}let s;if(Array.isArray(e.metrics))s=e.metrics.map(i=>Yl(i));else if(e.metrics!=null){s={};for(const i in e.metrics)s[i]=Yl(e.metrics[i])}this.compile({loss:o,metrics:s,optimizer:r})}async save(e,n){if(typeof e=="string"){const c=IFe(e);if(c.length===0)throw new W(`Cannot find any save handlers for URL '${e}'`);if(c.length>1)throw new W(`Found more than one (${c.length}) save handlers for URL '${e}'`);e=c[0]}if(e.save==null)throw new W("LayersModel.save() cannot proceed because the IOHandler provided does not have the `save` attribute defined.");const r=await JL(this.getNamedWeights(n)),a={modelTopology:this.toJSON(null,!1),format:KUe,generatedBy:`TensorFlow.js tfjs-layers v${kX}`,convertedBy:null};if((n==null?!1:n.includeOptimizer)&&this.optimizer!=null){a.trainingConfig=this.getTrainingConfig();const c="optimizer",{data:u,specs:d}=await JL(await this.optimizer.getWeights(),c);r.specs.push(...d),r.data=TFe([r.data,u])}return this.userDefinedMetadata!=null&&(Tj(this.userDefinedMetadata,this.name,!0),a.userDefinedMetadata=this.userDefinedMetadata),a.weightData=r.data,a.weightSpecs=r.specs,e.save(a)}setUserDefinedMetadata(e){Tj(e,this.name),this.userDefinedMetadata=e}getUserDefinedMetadata(){return this.userDefinedMetadata}}md.className="Model";ue(md);class AX extends md{}AX.className="Functional";ue(AX);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class Pm extends md{constructor(e){if(super({inputs:[],outputs:[]}),e=e||{},this.trainable=!0,this.built=!1,this.name=e.name!=null?e.name:Z1("sequential_"),e.layers!=null)for(const n of e.layers)this.add(n)}checkShape(e){if(e.inboundNodes[0].outputTensors[0].shape.some(r=>r<0))throw new W(`Negative dimension size caused by adding layer ${e.name} with input shape [${e.inboundNodes[0].inputTensors[0].shape}]`)}add(e){const n=e instanceof Pm||e instanceof md;let r;if(n){if(r=e,r.outputs.length!==1)throw new W("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");if(r.inputs.length!==1)throw new W("All layers in a Sequential model should have a single input tensor. For multi-input layers, use the functional API.")}if(this.outputs.length===0){if(e.inboundNodes.length===0){if(e.batchInputShape==null)throw new W("The first layer in a Sequential model must get an `inputShape` or `batchInputShape` argument.");const o=XVe({batchShape:e.batchInputShape,dtype:e.dtype,name:e.name+"_input"});e.apply(o)}if(n)this.outputs=r.outputs,this.inputs=r.inputs;else{if(e.inboundNodes.length!==1)throw new W(`A layer added to a Sequential model must not already be connected somewhere else. LayersModel received layer ${e.name} which has ${e.inboundNodes.length} pre-existing inbound connections.`);if(e.inboundNodes[0].outputTensors.length!==1)throw new W("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");this.checkShape(e),this.outputs=[e.inboundNodes[0].outputTensors[0]],this.inputs=dX(this.outputs[0])}this.inboundNodes=[],new eS({outboundLayer:this,inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:this.inputs,outputTensors:this.outputs,inputMasks:Xc(null,this.inputs.length),outputMasks:[null],inputShapes:this.inputs.map(o=>o.shape),outputShapes:this.outputs[0].shape})}else{const o=e.apply(this.outputs[0]);if(Array.isArray(o))throw new TypeError("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");this.checkShape(e),this.outputs=[o],this.inboundNodes[0].outputTensors=this.outputs,this.inboundNodes[0].outputShapes=[this.outputs[0].shape]}this.layers.push(e),this.built=!1}pop(){if(this.layers.length===0)throw new TypeError("There are no layers in the model.");if(this.layers.pop(),this.layers.length===0)this.outputs=[],this.inboundNodes=[],this.outboundNodes=[];else{const e=this.layers.length-1;this.layers[e].outboundNodes=[],this.outputs=[this.layers[e].output],this.inboundNodes[0].outputTensors=this.outputs,this.inboundNodes[0].outputShapes=[this.outputs[0].shape]}}call(e,n){return this.model==null&&this.build(),this.model.call(e,n)}build(e){if(it(e),this.inputs.length===0||this.outputs.length===0)throw new TypeError("Sequential model cannot be built: model is empty. Add some layers first.");this.model=new md({inputs:this.inputs,outputs:this.outputs[0],name:this.name+"_model"}),this.model.trainable=this.trainable,this.supportsMasking=this.model.supportsMasking,this.inputLayers=this.model.inputLayers,this.inputLayersNodeIndices=this.model.inputLayersNodeIndices,this.inputLayersTensorIndices=this.model.inputLayersTensorIndices,this.outputLayers=this.model.outputLayers,this.outputLayersNodeIndices=this.model.outputLayersNodeIndices,this.outputLayersTensorIndices=this.model.outputLayersTensorIndices,this.nodesByDepth=this.model.nodesByDepth,this.containerNodes=this.model.containerNodes,this.outputNames=this.model.outputNames,this.inputNames=this.model.inputNames,this.built=!0}countParams(){return this.built||this.build(),super.countParams()}summary(e,n,r=console.log){this.built||this.build(),super.summary(e,n,r)}setWeights(e){this.model==null&&this.build(),this.model.setWeights(e)}evaluate(e,n,r={}){if(!this.built)throw new Bo("The model needs to be compiled before being used.");return this.model.evaluate(e,n,r)}async evaluateDataset(e,n){if(!this.built)throw new Bo("The model needs to be compiled before being used.");return this.model.evaluateDataset(e,n)}predict(e,n={}){return this.model==null&&this.build(),this.model.predict(e,n)}predictOnBatch(e){return this.model==null&&this.build(),this.model.predictOnBatch(e)}compile(e){this.build(),this.model.compile(e),this.optimizer_=this.model.optimizer,this.isOptimizerOwned=this.model.isOptimizerOwned,this.loss=this.model.loss,this.metrics=this.model.metrics,this.metricsTensors=this.model.metricsTensors,this.metricsNames=this.model.metricsNames}get optimizer(){return this.model==null?void 0:this.model.optimizer}set optimizer(e){this.model.optimizer=e}async fit(e,n,r={}){if(!this.built)throw new Bo("The model needs to be compiled before being used.");return this.model.fit(e,n,r)}async fitDataset(e,n){if(!this.built)throw new Bo("The model needs to be compiled before being used.");return this.model.fitDataset(e,n)}async trainOnBatch(e,n){return this.model.trainOnBatch(e,n)}static fromConfig(e,n,r={},o=!1){let s,i={};if(n instanceof Array){if(n[0].className==null||n[0].className==="Merge")throw new W("Legacy serialization format not supported yet.");s=n}else M(n.layers!=null,()=>"When the config data for a Sequential model is not an Array, it must be an Object that contains the 'layers' field."),s=n.layers,delete n.layers,i=n;const a=new e(i);if(!(a instanceof Pm))throw new We(`Sequential.fromConfig called on non-Sequential input: ${a}`);for(const l of s){const u=Vi(l,void 0,o);o&&u.setFastWeightInitDuringBuild(!0),a.add(u)}return a}set stopTraining(e){if(this.model==null)throw new W("Cannot set the stopTraining property of a sequential model before it is compiled.");this.model.stopTraining=e}get stopTraining(){if(this.model==null)throw new W("Cannot get the stopTraining property of a sequential model before it is compiled.");return this.model.stopTraining}getConfig(){const e=[];for(const n of this.layers){const r={};r.className=n.getClassName(),r.config=n.getConfig(),e.push(r)}return{name:this.name,layers:e}}}Pm.className="Sequential";ue(Pm);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */let Zn=class extends Zf{getConfig(){return{}}};class OX extends Zn{apply(e,n=1){return RVe(e,n)}}OX.className="elu";ue(OX);class PX extends Zn{apply(e){return Xq(e)}}PX.className="selu";ue(PX);class RX extends Zn{apply(e){return fu(e)}}RX.className="relu";ue(RX);class _X extends Zn{apply(e){return Y(()=>Em(6,fu(e)))}}_X.className="relu6";ue(_X);class DX extends Zn{apply(e){return e}}DX.className="linear";ue(DX);class MX extends Zn{apply(e){return Xf(e)}}MX.className="sigmoid";ue(MX);class FX extends Zn{apply(e){return DVe(e)}}FX.className="hardSigmoid";ue(FX);class LX extends Zn{apply(e){return uy(e)}}LX.className="softplus";ue(LX);class jX extends Zn{apply(e){return _Ve(e)}}jX.className="softsign";ue(jX);class BX extends Zn{apply(e){return W1(e)}}BX.className="tanh";ue(BX);let sP=class extends Zn{apply(e,n=-1){return lO(e,n)}};sP.className="softmax";ue(sP);class zX extends Zn{apply(e,n=-1){return Bq(e,n)}}zX.className="logSoftmax";ue(zX);class WX extends Zn{apply(e){return Y(()=>Y(()=>{const n=Math.sqrt(2),r=U(.5,de(1,Dq(Ae(e,n))));return U(e,r)}))}}WX.className="gelu";ue(WX);class VX extends Zn{apply(e){return Y(()=>U(.5,U(e,de(1,W1(U(Yn(Ae(2,Math.PI)),de(e,U(.044715,Hc(e,3)))))))))}}VX.className="gelu_new";ue(VX);class UX extends Zn{apply(e){return Y(()=>U(e,W1(uy(e))))}}UX.className="mish";ue(UX);class GX extends Zn{apply(e,n=1){return Y(()=>U(Xf(U(e,n)),e))}}GX.className="swish";ue(GX);function pl(t){return t.getClassName()}function qC(t,e={}){return yy(t,_o.getMap().classNameMap,e,"activation")}function ml(t){if(t==null){const e={};return e.className="linear",e.config={},qC(e)}if(typeof t=="string"){const e={};return e.className=t,e.config={},qC(e)}else return t instanceof Zn?t:qC(t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function qUe(t){if(t!=null&&typeof t!="object")throw new Error(`Argument to L1L2 regularizer's constructor is expected to be an object, but received: ${t}`)}class HX extends Zf{}class KX extends HX{constructor(e){super(),qUe(e),this.l1=e==null||e.l1==null?.01:e.l1,this.l2=e==null||e.l2==null?.01:e.l2,this.hasL1=this.l1!==0,this.hasL2=this.l2!==0}apply(e){return Y(()=>{let n=kn([1]);return this.hasL1&&(n=de(n,Ee(U(this.l1,ir(e))))),this.hasL2&&(n=de(n,Ee(U(this.l2,xy(e))))),q(n,[])})}getConfig(){return{l1:this.l1,l2:this.l2}}static fromConfig(e,n){return new e({l1:n.l1,l2:n.l2})}}KX.className="L1L2";ue(KX);const Pj={l1l2:"L1L2"};function wt(t){return GO(t)}function Rj(t,e={}){return yy(t,_o.getMap().classNameMap,e,"regularizer")}function Ft(t){if(t==null)return null;if(typeof t=="string"){const n={className:t in Pj?Pj[t]:t,config:{}};return Rj(n)}else return t instanceof HX?t:Rj(t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class qX extends Ke{constructor(e){super(e??{}),this.supportsMasking=!0,e!=null&&(this.maxValue=e.maxValue)}call(e,n){e=Me(e);let r=fu(e);return this.maxValue!=null&&(r=yo(r,0,this.maxValue)),r}computeOutputShape(e){return e}getConfig(){const e={maxValue:this.maxValue},n=super.getConfig();return Object.assign(e,n),e}}qX.className="ReLU";ue(qX);class XX extends Ke{constructor(e){super(e??{}),this.DEFAULT_ALPHA=.3,e==null&&(e={}),this.alpha=e.alpha==null?this.DEFAULT_ALPHA:e.alpha}call(e,n){const r=Me(e);return HA(r,this.alpha)}computeOutputShape(e){return e}getConfig(){const e={alpha:this.alpha},n=super.getConfig();return Object.assign(e,n),e}}XX.className="LeakyReLU";ue(XX);class YX extends Ke{constructor(e){if(super(e??{}),this.DEFAULT_ALPHA_INITIALIZER="zeros",e==null&&(e={}),this.supportsMasking=!0,this.alphaInitializer=Mt(e.alphaInitializer||this.DEFAULT_ALPHA_INITIALIZER),this.alphaRegularizer=Ft(e.alphaRegularizer),this.alphaConstraint=vn(e.alphaConstraint),e.sharedAxes==null)this.sharedAxes=null;else if(Array.isArray(e.sharedAxes))this.sharedAxes=e.sharedAxes;else if(typeof e.sharedAxes=="number")this.sharedAxes=[e.sharedAxes];else throw new W(`Expected sharedAxes to be a number or an array of numbers, but got ${e.sharedAxes}`)}build(e){e=it(e);const n=e.slice(1);if(this.sharedAxes!=null)for(const o of this.sharedAxes)n[o-1]=1;this.alpha=this.addWeight("alpha",n,"float32",this.alphaInitializer,this.alphaRegularizer,!0,this.alphaConstraint);const r={};if(this.sharedAxes!=null)for(let o=1;o<e.length;++o)r[o]=e[o];this.inputSpec=[new mn({ndim:e.length,axes:r})],this.built=!0}call(e,n){return e=Me(e),ZA(e,this.alpha.read())}getConfig(){const e={alphaInitializer:zt(this.alphaInitializer),alphaRegularizer:wt(this.alphaRegularizer),alphaConstraint:yn(this.alphaConstraint),sharedAxes:this.sharedAxes},n=super.getConfig();return Object.assign(e,n),e}}YX.className="PReLU";ue(YX);let QX=class extends Ke{constructor(e){if(super(e??{}),this.DEFAULT_ALPHA=1,e==null&&(e={}),e.alpha!=null&&e.alpha!==this.DEFAULT_ALPHA)throw new We(`Non-default alpha value (${e.alpha}) is not supported by the ELU layer yet.`);this.alpha=e.alpha==null?this.DEFAULT_ALPHA:e.alpha}call(e,n){const r=Me(e);return G1(r)}computeOutputShape(e){return e}getConfig(){const e={alpha:this.alpha},n=super.getConfig();return Object.assign(e,n),e}};QX.className="ELU";ue(QX);class ZX extends Ke{constructor(e){super(e??{}),this.DEFAULT_THETA=1,e==null&&(e={}),this.theta=e.theta==null?this.DEFAULT_THETA:e.theta}call(e,n){const r=Me(e);return U(r,xe(bo(r,this.theta),"float32"))}computeOutputShape(e){return e}getConfig(){const e={theta:this.theta},n=super.getConfig();return Object.assign(e,n),e}}ZX.className="ThresholdedReLU";ue(ZX);class JX extends Ke{constructor(e){super(e??{}),this.DEFAULT_AXIS=1,e==null&&(e={}),this.softmax=new sP().apply,this.axis=e.axis==null?this.DEFAULT_AXIS:e.axis}call(e,n){return Y(()=>{let r=Me(e);const o=n.mask;if(o!=null){const s=U(_e(Rl(r.shape),xe(o,r.dtype)),ct(-1e9));r=de(r,s)}return this.axis instanceof Array?this.axis.length>1?mi(_e(r,zq(r,this.axis,!0))):this.softmax(r,this.axis[0]):this.softmax(r,this.axis)})}computeOutputShape(e){return e}getConfig(){const e={axis:this.axis},n=super.getConfig();return Object.assign(e,n),e}}JX.className="Softmax";ue(JX);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function gd(t,e,n){if(typeof t=="number")return Xc(t,e);if(t.length!==e)throw new W(`The ${n} argument must be an integer or tuple of ${e} integers. Received: ${t.length} elements.`);for(let r=0;r<e;++r){const o=t[r];if(!NVe(o))throw new W(`The ${n} argument must be an integer or tuple of ${e} integers. Received: ${JSON.stringify(t)} including a non-integer number ${o}`)}return t}function Es(t,e,n,r,o=1){if(t==null)return t;const s=e+(e-1)*(o-1);let i;return n==="same"?i=t:i=t-s+1,Math.floor((i+r-1)/r)}function Ys(t,e,n,r){if(t==null)return null;if(r==="valid")t=t*e+hl([n-e,0]);else if(r==="same")t=t*e;else throw new W(`Unsupport padding mode: ${r}.`);return t}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function iP(t,e){return Y(()=>(rn(e),e==="channelsFirst"?nt(t,[0,2,3,1]):t))}function e9(t,e){return Y(()=>(rn(e),e==="channelsFirst"?nt(t,[0,2,3,4,1]):t))}function XUe(t,e,n,r=1,o="valid",s,i=1){return Y(()=>{if(s==null&&(s=Rs()),rn(s),t.shape.length!==3)throw new W(`The input of a conv1dWithBias operation should be 3, but is ${t.shape.length} instead.`);if(e.shape.length!==3)throw new W(`The kernel for a conv1dWithBias operation should be 3, but is ${e.shape.length} instead`);if(n!=null&&n.shape.length!==1)throw new W(`The bias for a conv1dWithBias operation should be 1, but is ${n.shape.length} instead`);if(s==="channelsFirst"&&(t=nt(t,[0,2,1])),o==="causal")throw new We("The support for CAUSAL padding mode in conv1dWithBias is not implemented yet.");let a=Aq(t,e,r,o==="same"?"same":"valid","NWC",i);return n!=null&&(a=js(a,n)),a})}function _j(t,e,n,r=[1,1],o="valid",s,i,a=null){return Y(()=>{if(s==null&&(s=Rs()),rn(s),t.rank!==3&&t.rank!==4)throw new W(`conv2dWithBiasActivation expects input to be of rank 3 or 4, but received ${t.rank}.`);if(e.rank!==3&&e.rank!==4)throw new W(`conv2dWithBiasActivation expects kernel to be of rank 3 or 4, but received ${t.rank}.`);let l=iP(t,s);if(o==="causal")throw new We("The support for CAUSAL padding mode in conv1dWithBias is not implemented yet.");return l=oze({x:l,filter:e,strides:r,pad:o==="same"?"same":"valid",dilations:i,dataFormat:"NHWC",bias:n,activation:a}),s==="channelsFirst"&&(l=nt(l,[0,3,1,2])),l})}function YUe(t,e,n,r=[1,1,1],o="valid",s,i){return Y(()=>{if(s==null&&(s=Rs()),rn(s),t.rank!==4&&t.rank!==5)throw new W(`conv3dWithBias expects input to be of rank 4 or 5, but received ${t.rank}.`);if(e.rank!==4&&e.rank!==5)throw new W(`conv3dWithBias expects kernel to be of rank 4 or 5, but received ${t.rank}.`);let a=e9(t,s);if(o==="causal")throw new We("The support for CAUSAL padding mode in conv3dWithBias is not implemented yet.");return a=rje(a,e,r,o==="same"?"same":"valid","NDHWC",i),n!=null&&(a=js(a,n)),s==="channelsFirst"&&(a=nt(a,[0,4,1,2,3])),a})}class rS extends Ke{constructor(e,n){if(super(n),this.bias=null,this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_BIAS_INITIALIZER="zeros",rS.verifyArgs(n),this.rank=e,En(this.rank,"rank"),this.rank!==1&&this.rank!==2&&this.rank!==3)throw new We(`Convolution layer for rank other than 1, 2, or 3 (${this.rank}) is not implemented yet.`);if(this.kernelSize=gd(n.kernelSize,e,"kernelSize"),this.strides=gd(n.strides==null?1:n.strides,e,"strides"),this.padding=n.padding==null?"valid":n.padding,wo(this.padding),this.dataFormat=n.dataFormat==null?"channelsLast":n.dataFormat,rn(this.dataFormat),this.activation=ml(n.activation),this.useBias=n.useBias==null?!0:n.useBias,this.biasInitializer=Mt(n.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.biasConstraint=vn(n.biasConstraint),this.biasRegularizer=Ft(n.biasRegularizer),this.activityRegularizer=Ft(n.activityRegularizer),this.dilationRate=gd(n.dilationRate==null?1:n.dilationRate,e,"dilationRate"),this.rank===1&&Array.isArray(this.dilationRate)&&this.dilationRate.length!==1)throw new W(`dilationRate must be a number or an array of a single number for 1D convolution, but received ${JSON.stringify(this.dilationRate)}`);if(this.rank===2){if(typeof this.dilationRate=="number")this.dilationRate=[this.dilationRate,this.dilationRate];else if(this.dilationRate.length!==2)throw new W(`dilationRate must be a number or array of two numbers for 2D convolution, but received ${JSON.stringify(this.dilationRate)}`)}else if(this.rank===3){if(typeof this.dilationRate=="number")this.dilationRate=[this.dilationRate,this.dilationRate,this.dilationRate];else if(this.dilationRate.length!==3)throw new W(`dilationRate must be a number or array of three numbers for 3D convolution, but received ${JSON.stringify(this.dilationRate)}`)}}static verifyArgs(e){if(Xs("kernelSize"in e,"required key 'kernelSize' not in config"),typeof e.kernelSize!="number"&&!HO(e.kernelSize,"number",1,3))throw new W(`BaseConv expects config.kernelSize to be number or number[] with length 1, 2, or 3, but received ${JSON.stringify(e.kernelSize)}.`)}getConfig(){const e={kernelSize:this.kernelSize,strides:this.strides,padding:this.padding,dataFormat:this.dataFormat,dilationRate:this.dilationRate,activation:pl(this.activation),useBias:this.useBias,biasInitializer:zt(this.biasInitializer),biasRegularizer:wt(this.biasRegularizer),activityRegularizer:wt(this.activityRegularizer),biasConstraint:yn(this.biasConstraint)},n=super.getConfig();return Object.assign(e,n),e}}class Jf extends rS{constructor(e,n){super(e,n),this.kernel=null,Jf.verifyArgs(n),this.filters=n.filters,En(this.filters,"filters"),this.kernelInitializer=Mt(n.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.kernelConstraint=vn(n.kernelConstraint),this.kernelRegularizer=Ft(n.kernelRegularizer)}build(e){e=it(e);const n=this.dataFormat==="channelsFirst"?1:e.length-1;if(e[n]==null)throw new W(`The channel dimension of the input should be defined. Found ${e[n]}`);const r=e[n],o=this.kernelSize.concat([r,this.filters]);this.kernel=this.addWeight("kernel",o,null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.filters],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint)),this.inputSpec=[{ndim:this.rank+2,axes:{[n]:r}}],this.built=!0}call(e,n){return Y(()=>{e=Me(e);let r;const o=this.bias==null?null:this.bias.read(),s=Y8(this.activation.getClassName());if(s!=null&&this.rank===2)r=_j(e,this.kernel.read(),o,this.strides,this.padding,this.dataFormat,this.dilationRate,s);else{if(this.rank===1)r=XUe(e,this.kernel.read(),o,this.strides[0],this.padding,this.dataFormat,this.dilationRate[0]);else if(this.rank===2)r=_j(e,this.kernel.read(),o,this.strides,this.padding,this.dataFormat,this.dilationRate);else if(this.rank===3)r=YUe(e,this.kernel.read(),o,this.strides,this.padding,this.dataFormat,this.dilationRate);else throw new We("convolutions greater than 3D are not implemented yet.");this.activation!=null&&(r=this.activation.apply(r))}return r})}computeOutputShape(e){e=it(e);const n=[],r=this.dataFormat==="channelsLast"?e.slice(1,e.length-1):e.slice(2);for(let s=0;s<r.length;++s){const i=Es(r[s],this.kernelSize[s],this.padding,this.strides[s],typeof this.dilationRate=="number"?this.dilationRate:this.dilationRate[s]);n.push(i)}let o=[e[0]];return this.dataFormat==="channelsLast"?(o=o.concat(n),o.push(this.filters)):(o.push(this.filters),o=o.concat(n)),o}getConfig(){const e={filters:this.filters,kernelInitializer:zt(this.kernelInitializer),kernelRegularizer:wt(this.kernelRegularizer),kernelConstraint:yn(this.kernelConstraint)},n=super.getConfig();return Object.assign(e,n),e}static verifyArgs(e){if(!("filters"in e)||typeof e.filters!="number"||e.filters<1)throw new W(`Convolution layer expected config.filters to be a 'number' > 0 but got ${JSON.stringify(e.filters)}`)}}class Cy extends Jf{constructor(e){super(2,e),Cy.verifyArgs(e)}getConfig(){const e=super.getConfig();return delete e.rank,e}static verifyArgs(e){if(typeof e.kernelSize!="number"&&!HO(e.kernelSize,"number",1,2))throw new W(`Conv2D expects config.kernelSize to be number or number[] with length 1 or 2, but received ${JSON.stringify(e.kernelSize)}.`)}}Cy.className="Conv2D";ue(Cy);class $y extends Jf{constructor(e){super(3,e),$y.verifyArgs(e)}getConfig(){const e=super.getConfig();return delete e.rank,e}static verifyArgs(e){if(typeof e.kernelSize!="number"&&!(Array.isArray(e.kernelSize)&&(e.kernelSize.length===1||e.kernelSize.length===3)))throw new W(`Conv3D expects config.kernelSize to be number or [number, number, number], but received ${JSON.stringify(e.kernelSize)}.`)}}$y.className="Conv3D";ue($y);class t9 extends Cy{constructor(e){if(super(e),this.inputSpec=[new mn({ndim:4})],this.padding!=="same"&&this.padding!=="valid")throw new W(`Conv2DTranspose currently supports only padding modes 'same' and 'valid', but received padding mode ${this.padding}`)}build(e){if(e=it(e),e.length!==4)throw new W("Input should have rank 4; Received input shape: "+JSON.stringify(e));const n=this.dataFormat==="channelsFirst"?1:e.length-1;if(e[n]==null)throw new W("The channel dimension of the inputs should be defined. Found `None`.");const r=e[n],o=this.kernelSize.concat([this.filters,r]);this.kernel=this.addWeight("kernel",o,"float32",this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.filters],"float32",this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint)),this.inputSpec=[new mn({ndim:4,axes:{[n]:r}})],this.built=!0}call(e,n){return Y(()=>{let r=Me(e);if(r.shape.length!==4)throw new W(`Conv2DTranspose.call() expects input tensor to be rank-4, but received a tensor of rank-${r.shape.length}`);const o=r.shape,s=o[0];let i,a;this.dataFormat==="channelsFirst"?(i=2,a=3):(i=1,a=2);const l=o[i],c=o[a],u=this.kernelSize[0],d=this.kernelSize[1],f=this.strides[0],h=this.strides[1],p=Ys(l,f,u,this.padding),m=Ys(c,h,d,this.padding),g=[s,p,m,this.filters];this.dataFormat!=="channelsLast"&&(r=nt(r,[0,2,3,1]));let y=Oq(r,this.kernel.read(),g,this.strides,this.padding);return this.dataFormat!=="channelsLast"&&(y=nt(y,[0,3,1,2])),this.bias!=null&&(y=js(y,this.bias.read(),this.dataFormat)),this.activation!=null&&(y=this.activation.apply(y)),y})}computeOutputShape(e){e=it(e);const n=e.slice();let r,o,s;this.dataFormat==="channelsFirst"?(r=1,o=2,s=3):(r=3,o=1,s=2);const i=this.kernelSize[0],a=this.kernelSize[1],l=this.strides[0],c=this.strides[1];return n[r]=this.filters,n[o]=Ys(n[o],l,i,this.padding),n[s]=Ys(n[s],c,a,this.padding),n}getConfig(){const e=super.getConfig();return delete e.dilationRate,e}}t9.className="Conv2DTranspose";ue(t9);class n9 extends $y{constructor(e){if(super(e),this.inputSpec=[new mn({ndim:5})],this.padding!=="same"&&this.padding!=="valid")throw new W(`Conv3DTranspose currently supports only padding modes 'same' and 'valid', but received padding mode ${this.padding}`)}build(e){if(e=it(e),e.length!==5)throw new W("Input should have rank 5; Received input shape: "+JSON.stringify(e));const n=this.dataFormat==="channelsFirst"?1:e.length-1;if(e[n]==null)throw new W("The channel dimension of the inputs should be defined. Found `None`.");const r=e[n],o=this.kernelSize.concat([this.filters,r]);this.kernel=this.addWeight("kernel",o,"float32",this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.filters],"float32",this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint)),this.inputSpec=[new mn({ndim:5,axes:{[n]:r}})],this.built=!0}call(e,n){return Y(()=>{let r=Me(e);if(r.shape.length!==5)throw new W(`Conv3DTranspose.call() expects input tensor to be rank-4, but received a tensor of rank-${r.shape.length}`);const o=r.shape,s=o[0];let i,a,l;this.dataFormat==="channelsFirst"?(l=2,i=3,a=4):(l=1,i=2,a=3);const c=o[l],u=o[i],d=o[a],f=this.kernelSize[0],h=this.kernelSize[1],p=this.kernelSize[2],m=this.strides[0],g=this.strides[1],y=this.strides[2],v=Ys(c,m,f,this.padding),x=Ys(u,g,h,this.padding),b=Ys(d,y,p,this.padding),w=[s,v,x,b,this.filters];this.dataFormat!=="channelsLast"&&(r=nt(r,[0,2,3,4,1]));let C=ije(r,this.kernel.read(),w,this.strides,this.padding);return this.dataFormat!=="channelsLast"&&(C=nt(C,[0,4,1,2,3])),this.bias!==null&&(C=js(C,this.bias.read(),this.dataFormat)),this.activation!==null&&(C=this.activation.apply(C)),C})}computeOutputShape(e){e=it(e);const n=e.slice();let r,o,s,i;this.dataFormat==="channelsFirst"?(r=1,o=2,s=3,i=4):(r=4,o=1,s=2,i=3);const a=this.kernelSize[0],l=this.kernelSize[1],c=this.kernelSize[2],u=this.strides[0],d=this.strides[1],f=this.strides[2];return n[r]=this.filters,n[o]=Ys(n[o],u,a,this.padding),n[s]=Ys(n[s],d,l,this.padding),n[i]=Ys(n[i],f,c,this.padding),n}getConfig(){const e=super.getConfig();return delete e.dilationRate,e}}n9.className="Conv3DTranspose";ue(n9);class r9 extends Jf{constructor(e,n){if(super(e,n),this.DEFAULT_DEPTHWISE_INITIALIZER="glorotUniform",this.DEFAULT_POINTWISE_INITIALIZER="glorotUniform",this.depthwiseKernel=null,this.pointwiseKernel=null,n.filters==null)throw new W("The `filters` configuration field is required by SeparableConv, but is unspecified.");if(n.kernelInitializer!=null||n.kernelRegularizer!=null||n.kernelConstraint!=null)throw new W("Fields kernelInitializer, kernelRegularizer and kernelConstraint are invalid for SeparableConv2D. Use depthwiseInitializer, depthwiseRegularizer, depthwiseConstraint, pointwiseInitializer, pointwiseRegularizer and pointwiseConstraint instead.");if(n.padding!=null&&n.padding!=="same"&&n.padding!=="valid")throw new W(`SeparableConv${this.rank}D supports only padding modes: 'same' and 'valid', but received ${JSON.stringify(n.padding)}`);this.depthMultiplier=n.depthMultiplier==null?1:n.depthMultiplier,this.depthwiseInitializer=Mt(n.depthwiseInitializer||this.DEFAULT_DEPTHWISE_INITIALIZER),this.depthwiseRegularizer=Ft(n.depthwiseRegularizer),this.depthwiseConstraint=vn(n.depthwiseConstraint),this.pointwiseInitializer=Mt(n.depthwiseInitializer||this.DEFAULT_POINTWISE_INITIALIZER),this.pointwiseRegularizer=Ft(n.pointwiseRegularizer),this.pointwiseConstraint=vn(n.pointwiseConstraint)}build(e){if(e=it(e),e.length<this.rank+2)throw new W(`Inputs to SeparableConv${this.rank}D should have rank ${this.rank+2}, but received input shape: ${JSON.stringify(e)}`);const n=this.dataFormat==="channelsFirst"?1:e.length-1;if(e[n]==null||e[n]<0)throw new W(`The channel dimension of the inputs should be defined, but found ${JSON.stringify(e[n])}`);const r=e[n],o=this.kernelSize.concat([r,this.depthMultiplier]),s=[];for(let a=0;a<this.rank;++a)s.push(1);s.push(r*this.depthMultiplier,this.filters);const i=!0;this.depthwiseKernel=this.addWeight("depthwise_kernel",o,"float32",this.depthwiseInitializer,this.depthwiseRegularizer,i,this.depthwiseConstraint),this.pointwiseKernel=this.addWeight("pointwise_kernel",s,"float32",this.pointwiseInitializer,this.pointwiseRegularizer,i,this.pointwiseConstraint),this.useBias?this.bias=this.addWeight("bias",[this.filters],"float32",this.biasInitializer,this.biasRegularizer,i,this.biasConstraint):this.bias=null,this.inputSpec=[new mn({ndim:this.rank+2,axes:{[n]:r}})],this.built=!0}call(e,n){return Y(()=>{e=Me(e);let r;if(this.rank===1)throw new We("1D separable convolution is not implemented yet.");return this.rank===2&&(this.dataFormat==="channelsFirst"&&(e=nt(e,[0,2,3,1])),r=Yq(e,this.depthwiseKernel.read(),this.pointwiseKernel.read(),this.strides,this.padding,this.dilationRate,"NHWC")),this.useBias&&(r=js(r,this.bias.read(),this.dataFormat)),this.activation!=null&&(r=this.activation.apply(r)),this.dataFormat==="channelsFirst"&&(r=nt(r,[0,3,1,2])),r})}getConfig(){const e=super.getConfig();return delete e.rank,delete e.kernelInitializer,delete e.kernelRegularizer,delete e.kernelConstraint,e.depthwiseInitializer=zt(this.depthwiseInitializer),e.pointwiseInitializer=zt(this.pointwiseInitializer),e.depthwiseRegularizer=wt(this.depthwiseRegularizer),e.pointwiseRegularizer=wt(this.pointwiseRegularizer),e.depthwiseConstraint=yn(this.depthwiseConstraint),e.pointwiseConstraint=yn(this.pointwiseConstraint),e}}r9.className="SeparableConv";class o9 extends r9{constructor(e){super(2,e)}}o9.className="SeparableConv2D";ue(o9);class oS extends Jf{constructor(e){super(1,e),oS.verifyArgs(e),this.inputSpec=[{ndim:3}]}getConfig(){const e=super.getConfig();return delete e.rank,delete e.dataFormat,e}static verifyArgs(e){if(typeof e.kernelSize!="number"&&!HO(e.kernelSize,"number",1,1))throw new W(`Conv1D expects config.kernelSize to be number or number[] with length 1, but received ${JSON.stringify(e.kernelSize)}.`)}}oS.className="Conv1D";ue(oS);class s9 extends Ke{constructor(e){super(e),typeof e.cropping=="number"?this.cropping=[[e.cropping,e.cropping],[e.cropping,e.cropping]]:typeof e.cropping[0]=="number"?this.cropping=[[e.cropping[0],e.cropping[0]],[e.cropping[1],e.cropping[1]]]:this.cropping=e.cropping,this.dataFormat=e.dataFormat===void 0?"channelsLast":e.dataFormat,this.inputSpec=[{ndim:4}]}computeOutputShape(e){return this.dataFormat==="channelsFirst"?[e[0],e[1],e[2]-this.cropping[0][0]-this.cropping[0][1],e[3]-this.cropping[1][0]-this.cropping[1][1]]:[e[0],e[1]-this.cropping[0][0]-this.cropping[0][1],e[2]-this.cropping[1][0]-this.cropping[1][1],e[3]]}call(e,n){return Y(()=>{if(e=Me(e),this.dataFormat==="channelsLast"){const r=Sv(e,this.cropping[0][0],e.shape[1]-this.cropping[0][0]-this.cropping[0][1],2);return Sv(r,this.cropping[1][0],e.shape[2]-this.cropping[1][1]-this.cropping[1][0],3)}else{const r=Sv(e,this.cropping[0][0],e.shape[2]-this.cropping[0][0]-this.cropping[0][1],3);return Sv(r,this.cropping[1][0],e.shape[3]-this.cropping[1][1]-this.cropping[1][0],4)}})}getConfig(){const e={cropping:this.cropping,dataFormat:this.dataFormat},n=super.getConfig();return Object.assign(e,n),e}}s9.className="Cropping2D";ue(s9);class i9 extends Ke{constructor(e){super(e),this.DEFAULT_SIZE=[2,2],this.inputSpec=[{ndim:4}],this.size=e.size==null?this.DEFAULT_SIZE:e.size,this.dataFormat=e.dataFormat==null?"channelsLast":e.dataFormat,rn(this.dataFormat),this.interpolation=e.interpolation==null?"nearest":e.interpolation,TVe(this.interpolation)}computeOutputShape(e){if(this.dataFormat==="channelsFirst"){const n=e[2]==null?null:this.size[0]*e[2],r=e[3]==null?null:this.size[1]*e[3];return[e[0],e[1],n,r]}else{const n=e[1]==null?null:this.size[0]*e[1],r=e[2]==null?null:this.size[1]*e[2];return[e[0],n,r,e[3]]}}call(e,n){return Y(()=>{let r=Me(e);const o=r.shape;if(this.dataFormat==="channelsFirst"){r=nt(r,[0,2,3,1]);const s=this.size[0]*o[2],i=this.size[1]*o[3],a=this.interpolation==="nearest"?Di.resizeNearestNeighbor(r,[s,i]):Di.resizeBilinear(r,[s,i]);return nt(a,[0,3,1,2])}else{const s=this.size[0]*o[1],i=this.size[1]*o[2];return this.interpolation==="nearest"?Di.resizeNearestNeighbor(r,[s,i]):Di.resizeBilinear(r,[s,i])}})}getConfig(){const e={size:this.size,dataFormat:this.dataFormat,interpolation:this.interpolation},n=super.getConfig();return Object.assign(e,n),e}}i9.className="UpSampling2D";ue(i9);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function QUe(t,e,n=[1,1],r="valid",o,s){return Y(()=>{o==null&&(o=Rs()),rn(o);let i=iP(t,o);if(t.rank!==4)throw new W(`Input for depthwiseConv2d is required to be 4-D, but is instead ${t.rank}-D`);if(e.rank!==4)throw new W(`depthwiseKernel is required to be 4-D, but is instead ${e.rank}-D`);return i=WA(i,e,n,r==="same"?"same":"valid","NHWC",s),o==="channelsFirst"&&(i=nt(i,[0,3,1,2])),i})}class a9 extends rS{constructor(e){super(2,e),this.depthwiseKernel=null,this.depthMultiplier=e.depthMultiplier==null?1:e.depthMultiplier,this.depthwiseInitializer=Mt(e.depthwiseInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.depthwiseConstraint=vn(e.depthwiseConstraint),this.depthwiseRegularizer=Ft(e.depthwiseRegularizer)}build(e){if(e=it(e),e.length<4)throw new W(`Inputs to DepthwiseConv2D should have rank 4. Received input shape: ${JSON.stringify(e)}.`);const n=this.dataFormat==="channelsFirst"?1:3;if(e[n]==null||e[n]<0)throw new W(`The channel dimension of the inputs to DepthwiseConv2D should be defined, but is not (${e[n]}).`);const r=e[n],o=[this.kernelSize[0],this.kernelSize[1],r,this.depthMultiplier];this.depthwiseKernel=this.addWeight("depthwise_kernel",o,null,this.depthwiseInitializer,this.depthwiseRegularizer,!0,this.depthwiseConstraint),this.useBias?this.bias=this.addWeight("bias",[r*this.depthMultiplier],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):this.bias=null,this.built=!0}call(e,n){return Y(()=>{e=Me(e);let r=QUe(e,this.depthwiseKernel.read(),this.strides,this.padding,this.dataFormat,null);return this.useBias&&(r=js(r,this.bias.read(),this.dataFormat)),this.activation!=null&&(r=this.activation.apply(r)),r})}computeOutputShape(e){e=it(e);const n=this.dataFormat==="channelsFirst"?e[2]:e[1],r=this.dataFormat==="channelsFirst"?e[3]:e[2],o=this.dataFormat==="channelsFirst"?e[1]*this.depthMultiplier:e[3]*this.depthMultiplier,s=Es(n,this.kernelSize[0],this.padding,this.strides[0]),i=Es(r,this.kernelSize[1],this.padding,this.strides[1]);return this.dataFormat==="channelsFirst"?[e[0],o,s,i]:[e[0],s,i,o]}getConfig(){const e=super.getConfig();return e.depthMultiplier=this.depthMultiplier,e.depthwiseInitializer=zt(this.depthwiseInitializer),e.depthwiseRegularizer=wt(this.depthwiseRegularizer),e.depthwiseConstraint=yn(this.depthwiseRegularizer),e}}a9.className="DepthwiseConv2D";ue(a9);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function l9(t,e,n,r){if(Array.isArray(t)){if(e!=null||n!=null)throw new W("When inputs is an array, neither initialState or constants should be provided");r!=null&&(n=t.slice(t.length-r,t.length),t=t.slice(0,t.length-r)),t.length>1&&(e=t.slice(1,t.length)),t=t[0]}function o(s){return s==null||Array.isArray(s)?s:[s]}return e=o(e),n=o(n),{inputs:t,initialState:e,constants:n}}function c9(t,e,n,r=!1,o,s,i=!1,a=!1){return Y(()=>{const l=e.shape.length;if(l<3)throw new W(`Input should be at least 3D, but is ${l}D.`);const c=[1,0].concat(Ps(2,l));e=nt(e,c),i&&console.warn("Backend rnn(): the unroll = true option is not applicable to the imperative deeplearn.js backend."),o!=null&&(o=xe(xe(o,"bool"),"float32"),o.rank===l-1&&(o=Cr(o,-1)),o=nt(o,c)),r&&(e=Kc(e,0),o!=null&&(o=Kc(o,0)));const u=[];let d,f=n;const h=e.shape[0],p=qc(e);let m;o!=null&&(m=qc(o));for(let y=0;y<h;++y){const v=p[y],x=Y(()=>t(v,f));if(o==null)d=x[0],f=x[1];else{const b=Y(()=>{const w=m[y],C=_e(Xo(w),w),$=de(U(x[0],w),U(f[0],C)),T=f.map((I,E)=>de(U(x[1][E],w),U(I,C)));return{output:$,newStates:T}});d=b.output,f=b.newStates}a&&u.push(d)}let g;return a&&(g=na(u,1)),[d,g,f]})}class Dl extends Ke{constructor(e){super(e);let n;if(e.cell==null)throw new W("cell property is missing for the constructor of RNN.");if(Array.isArray(e.cell)?n=new cP({cells:e.cell}):n=e.cell,n.stateSize==null)throw new W("The RNN cell should have an attribute `stateSize` (tuple of integers, one integer per RNN state).");this.cell=n,this.returnSequences=e.returnSequences==null?!1:e.returnSequences,this.returnState=e.returnState==null?!1:e.returnState,this.goBackwards=e.goBackwards==null?!1:e.goBackwards,this._stateful=e.stateful==null?!1:e.stateful,this.unroll=e.unroll==null?!1:e.unroll,this.supportsMasking=!0,this.inputSpec=[new mn({ndim:3})],this.stateSpec=null,this.states_=null,this.numConstants=null,this.keptStates=[]}getStates(){if(this.states_==null){const e=Array.isArray(this.cell.stateSize)?this.cell.stateSize.length:1;return Ps(0,e).map(n=>null)}else return this.states_}setStates(e){this.states_=e}computeOutputShape(e){AI(e)&&(e=e[0]),e=e;let n=this.cell.stateSize;Array.isArray(n)||(n=[n]);const r=n[0];let o;if(this.returnSequences?o=[e[0],e[1],r]:o=[e[0],r],this.returnState){const s=[];for(const i of n)s.push([e[0],i]);return[o].concat(s)}else return o}computeMask(e,n){return Y(()=>{Array.isArray(n)&&(n=n[0]);const r=this.returnSequences?n:null;if(this.returnState){const o=this.states.map(s=>null);return[r].concat(o)}else return r})}get states(){if(this.states_==null){const e=Array.isArray(this.cell.stateSize)?this.cell.stateSize.length:1,n=[];for(let r=0;r<e;++r)n.push(null);return n}else return this.states_}set states(e){this.states_=e}build(e){if(this.numConstants!=null)throw new We("Constants support is not implemented in RNN yet.");AI(e)&&(e=e[0]),e=e;const n=this.stateful?e[0]:null,r=e.slice(2);this.inputSpec[0]=new mn({shape:[n,null,...r]});const o=[e[0]].concat(e.slice(2));this.cell.build(o);let s;if(Array.isArray(this.cell.stateSize)?s=this.cell.stateSize:s=[this.cell.stateSize],this.stateSpec!=null){if(!dt(this.stateSpec.map(i=>i.shape[i.shape.length-1]),s))throw new W(`An initialState was passed that is not compatible with cell.stateSize. Received stateSpec=${this.stateSpec}; However cell.stateSize is ${this.cell.stateSize}`)}else this.stateSpec=s.map(i=>new mn({shape:[null,i]}));this.stateful&&this.resetStates()}resetStates(e,n=!1){Y(()=>{if(!this.stateful)throw new qs("Cannot call resetStates() on an RNN Layer that is not stateful.");const r=this.inputSpec[0].shape[0];if(r==null)throw new W("If an RNN is stateful, it needs to know its batch size. Specify the batch size of your input tensors: \n- If using a Sequential model, specify the batch size by passing a `batchInputShape` option to your first layer.\n- If using the functional API, specify the batch size by passing a `batchShape` option to your Input layer.");if(this.states_==null)Array.isArray(this.cell.stateSize)?this.states_=this.cell.stateSize.map(o=>kn([r,o])):this.states_=[kn([r,this.cell.stateSize])];else if(e==null)qe(this.states_),this.keptStates!=null&&(qe(this.keptStates),this.keptStates=[]),Array.isArray(this.cell.stateSize)?this.states_=this.cell.stateSize.map(o=>kn([r,o])):this.states_[0]=kn([r,this.cell.stateSize]);else{if(Array.isArray(e)||(e=[e]),e.length!==this.states_.length)throw new W(`Layer ${this.name} expects ${this.states_.length} state(s), but it received ${e.length} state value(s). Input received: ${e}`);n===!0?this.keptStates.push(this.states_.slice()):qe(this.states_);for(let o=0;o<this.states_.length;++o){const s=e[o],i=Array.isArray(this.cell.stateSize)?this.cell.stateSize[o]:this.cell.stateSize,a=[r,i];if(!dt(s.shape,a))throw new W(`State ${o} is incompatible with layer ${this.name}: expected shape=${a}, received shape=${s.shape}`);this.states_[o]=s}}this.states_=this.states_.map(o=>li(o.clone()))})}apply(e,n){let r=n==null?null:n.initialState,o=n==null?null:n.constants;n==null&&(n={});const s=l9(e,r,o,this.numConstants);e=s.inputs,r=s.initialState,o=s.constants;let i=[],a=[];if(r!=null){n.initialState=r,i=i.concat(r),this.stateSpec=[];for(const c of r)this.stateSpec.push(new mn({shape:c.shape}));a=a.concat(this.stateSpec)}if(o!=null&&(n.constants=o,i=i.concat(o),this.numConstants=o.length),i[0]instanceof yi){const c=[e].concat(i),u=this.inputSpec.concat(a),d=this.inputSpec;this.inputSpec=u;const f=super.apply(c,n);return this.inputSpec=d,f}else return super.apply(e,n)}call(e,n){return Y(()=>{const r=n==null?null:n.mask,o=n==null?null:n.training;let s=n==null?null:n.initialState;e=Me(e),s==null&&(this.stateful?s=this.states_:s=this.getInitialState(e));const i=Array.isArray(this.cell.stateSize)?this.cell.stateSize.length:1;if(s.length!==i)throw new W(`RNN Layer has ${i} state(s) but was passed ${s.length} initial state(s).`);this.unroll&&console.warn("Ignoring unroll = true for RNN layer, due to imperative backend.");const a={training:o},c=c9((p,m)=>{const g=this.cell.call([p].concat(m),a);return[g[0],g.slice(1)]},e,s,this.goBackwards,r,null,this.unroll,this.returnSequences),u=c[0],d=c[1],f=c[2];this.stateful&&this.resetStates(f,o);const h=this.returnSequences?d:u;return this.returnState?[h].concat(f):h})}getInitialState(e){return Y(()=>{let n=kn(e.shape);return n=Ee(n,[1,2]),n=vy(n),Array.isArray(this.cell.stateSize)?this.cell.stateSize.map(r=>r>1?EI(n,[1,r]):n):this.cell.stateSize>1?[EI(n,[1,this.cell.stateSize])]:[n]})}get trainableWeights(){return this.trainable?this.cell.trainableWeights:[]}get nonTrainableWeights(){return this.trainable?this.cell.nonTrainableWeights:this.cell.weights}setFastWeightInitDuringBuild(e){super.setFastWeightInitDuringBuild(e),this.cell!=null&&this.cell.setFastWeightInitDuringBuild(e)}getConfig(){const e=super.getConfig(),n={returnSequences:this.returnSequences,returnState:this.returnState,goBackwards:this.goBackwards,stateful:this.stateful,unroll:this.unroll};this.numConstants!=null&&(n.numConstants=this.numConstants);const r=this.cell.getConfig();return this.getClassName()===Dl.className&&(n.cell={className:this.cell.getClassName(),config:r}),Object.assign(Object.assign(Object.assign({},r),e),n)}static fromConfig(e,n,r={}){const o=n.cell,s=Vi(o,r);return new e(Object.assign(n,{cell:s}))}}Dl.className="RNN";ue(Dl);class sS extends Ke{}class aP extends sS{constructor(e){super(e),this.DEFAULT_ACTIVATION="tanh",this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_RECURRENT_INITIALIZER="orthogonal",this.DEFAULT_BIAS_INITIALIZER="zeros",this.units=e.units,En(this.units,"units"),this.activation=ml(e.activation==null?this.DEFAULT_ACTIVATION:e.activation),this.useBias=e.useBias==null?!0:e.useBias,this.kernelInitializer=Mt(e.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.recurrentInitializer=Mt(e.recurrentInitializer||this.DEFAULT_RECURRENT_INITIALIZER),this.biasInitializer=Mt(e.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.kernelRegularizer=Ft(e.kernelRegularizer),this.recurrentRegularizer=Ft(e.recurrentRegularizer),this.biasRegularizer=Ft(e.biasRegularizer),this.kernelConstraint=vn(e.kernelConstraint),this.recurrentConstraint=vn(e.recurrentConstraint),this.biasConstraint=vn(e.biasConstraint),this.dropout=gf([1,hl([0,e.dropout==null?0:e.dropout])]),this.recurrentDropout=gf([1,hl([0,e.recurrentDropout==null?0:e.recurrentDropout])]),this.dropoutFunc=e.dropoutFunc,this.stateSize=this.units,this.dropoutMask=null,this.recurrentDropoutMask=null}build(e){e=it(e),this.kernel=this.addWeight("kernel",[e[e.length-1],this.units],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,this.units],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias?this.bias=this.addWeight("bias",[this.units],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):this.bias=null,this.built=!0}call(e,n){return Y(()=>{if(e=e,e.length!==2)throw new W(`SimpleRNNCell expects 2 input Tensors, got ${e.length}.`);let r=e[1];e=e[0];const o=n.training==null?!1:n.training;0<this.dropout&&this.dropout<1&&this.dropoutMask==null&&(this.dropoutMask=gl({ones:()=>Xo(e),rate:this.dropout,training:o,dropoutFunc:this.dropoutFunc})),0<this.recurrentDropout&&this.recurrentDropout<1&&this.recurrentDropoutMask==null&&(this.recurrentDropoutMask=gl({ones:()=>Xo(r),rate:this.recurrentDropout,training:o,dropoutFunc:this.dropoutFunc}));let s;const i=this.dropoutMask,a=this.recurrentDropoutMask;i!=null?s=di(U(e,i),this.kernel.read()):s=di(e,this.kernel.read()),this.bias!=null&&(s=js(s,this.bias.read())),a!=null&&(r=U(r,a));let l=de(s,di(r,this.recurrentKernel.read()));return this.activation!=null&&(l=this.activation.apply(l)),[l,l]})}getConfig(){const e=super.getConfig(),n={units:this.units,activation:pl(this.activation),useBias:this.useBias,kernelInitializer:zt(this.kernelInitializer),recurrentInitializer:zt(this.recurrentInitializer),biasInitializer:zt(this.biasInitializer),kernelRegularizer:wt(this.kernelRegularizer),recurrentRegularizer:wt(this.recurrentRegularizer),biasRegularizer:wt(this.biasRegularizer),activityRegularizer:wt(this.activityRegularizer),kernelConstraint:yn(this.kernelConstraint),recurrentConstraint:yn(this.recurrentConstraint),biasConstraint:yn(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout};return Object.assign(Object.assign({},e),n)}}aP.className="SimpleRNNCell";ue(aP);class u9 extends Dl{constructor(e){e.cell=new aP(e),super(e)}call(e,n){return Y(()=>{this.cell.dropoutMask!=null&&(qe(this.cell.dropoutMask),this.cell.dropoutMask=null),this.cell.recurrentDropoutMask!=null&&(qe(this.cell.recurrentDropoutMask),this.cell.recurrentDropoutMask=null);const r=n==null?null:n.mask,o=n==null?null:n.training,s=n==null?null:n.initialState;return super.call(e,{mask:r,training:o,initialState:s})})}static fromConfig(e,n){return new e(n)}}u9.className="SimpleRNN";ue(u9);class lP extends sS{constructor(e){if(super(e),this.DEFAULT_ACTIVATION="tanh",this.DEFAULT_RECURRENT_ACTIVATION="hardSigmoid",this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_RECURRENT_INITIALIZER="orthogonal",this.DEFAULT_BIAS_INITIALIZER="zeros",e.resetAfter)throw new W("GRUCell does not support reset_after parameter set to true.");this.units=e.units,En(this.units,"units"),this.activation=ml(e.activation===void 0?this.DEFAULT_ACTIVATION:e.activation),this.recurrentActivation=ml(e.recurrentActivation===void 0?this.DEFAULT_RECURRENT_ACTIVATION:e.recurrentActivation),this.useBias=e.useBias==null?!0:e.useBias,this.kernelInitializer=Mt(e.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.recurrentInitializer=Mt(e.recurrentInitializer||this.DEFAULT_RECURRENT_INITIALIZER),this.biasInitializer=Mt(e.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.kernelRegularizer=Ft(e.kernelRegularizer),this.recurrentRegularizer=Ft(e.recurrentRegularizer),this.biasRegularizer=Ft(e.biasRegularizer),this.kernelConstraint=vn(e.kernelConstraint),this.recurrentConstraint=vn(e.recurrentConstraint),this.biasConstraint=vn(e.biasConstraint),this.dropout=gf([1,hl([0,e.dropout==null?0:e.dropout])]),this.recurrentDropout=gf([1,hl([0,e.recurrentDropout==null?0:e.recurrentDropout])]),this.dropoutFunc=e.dropoutFunc,this.implementation=e.implementation,this.stateSize=this.units,this.dropoutMask=null,this.recurrentDropoutMask=null}build(e){e=it(e);const n=e[e.length-1];this.kernel=this.addWeight("kernel",[n,this.units*3],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,this.units*3],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias?this.bias=this.addWeight("bias",[this.units*3],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):this.bias=null,this.built=!0}call(e,n){return Y(()=>{if(e=e,e.length!==2)throw new W(`GRUCell expects 2 input Tensors (inputs, h, c), got ${e.length}.`);const r=n.training==null?!1:n.training;let o=e[1];e=e[0],0<this.dropout&&this.dropout<1&&this.dropoutMask==null&&(this.dropoutMask=gl({ones:()=>Xo(e),rate:this.dropout,training:r,count:3,dropoutFunc:this.dropoutFunc})),0<this.recurrentDropout&&this.recurrentDropout<1&&this.recurrentDropoutMask==null&&(this.recurrentDropoutMask=gl({ones:()=>Xo(o),rate:this.recurrentDropout,training:r,count:3,dropoutFunc:this.dropoutFunc}));const s=this.dropoutMask,i=this.recurrentDropoutMask;let a,l,c;0<this.dropout&&this.dropout<1&&(e=U(e,s[0]));let u=di(e,this.kernel.read());this.useBias&&(u=js(u,this.bias.read())),0<this.recurrentDropout&&this.recurrentDropout<1&&(o=U(o,i[0]));const d=this.recurrentKernel.read(),[f,h]=po(d,[2*this.units,this.units],d.rank-1),p=di(o,f),[m,g,y]=po(u,3,u.rank-1),[v,x]=po(p,2,p.rank-1);a=this.recurrentActivation.apply(de(m,v)),l=this.recurrentActivation.apply(de(g,x));const b=di(U(l,o),h);c=this.activation.apply(de(y,b));const w=de(U(a,o),U(de(1,Zt(a)),c));return[w,w]})}getConfig(){const e=super.getConfig(),n={units:this.units,activation:pl(this.activation),recurrentActivation:pl(this.recurrentActivation),useBias:this.useBias,kernelInitializer:zt(this.kernelInitializer),recurrentInitializer:zt(this.recurrentInitializer),biasInitializer:zt(this.biasInitializer),kernelRegularizer:wt(this.kernelRegularizer),recurrentRegularizer:wt(this.recurrentRegularizer),biasRegularizer:wt(this.biasRegularizer),activityRegularizer:wt(this.activityRegularizer),kernelConstraint:yn(this.kernelConstraint),recurrentConstraint:yn(this.recurrentConstraint),biasConstraint:yn(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout,implementation:this.implementation,resetAfter:!1};return Object.assign(Object.assign({},e),n)}}lP.className="GRUCell";ue(lP);class d9 extends Dl{constructor(e){e.implementation===0&&console.warn("`implementation=0` has been deprecated, and now defaults to `implementation=1`. Please update your layer call."),e.cell=new lP(e),super(e)}call(e,n){return Y(()=>{this.cell.dropoutMask!=null&&(qe(this.cell.dropoutMask),this.cell.dropoutMask=null),this.cell.recurrentDropoutMask!=null&&(qe(this.cell.recurrentDropoutMask),this.cell.recurrentDropoutMask=null);const r=n==null?null:n.mask,o=n==null?null:n.training,s=n==null?null:n.initialState;return super.call(e,{mask:r,training:o,initialState:s})})}static fromConfig(e,n){return n.implmentation===0&&(n.implementation=1),new e(n)}}d9.className="GRU";ue(d9);class iS extends sS{constructor(e){super(e),this.DEFAULT_ACTIVATION="tanh",this.DEFAULT_RECURRENT_ACTIVATION="hardSigmoid",this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_RECURRENT_INITIALIZER="orthogonal",this.DEFAULT_BIAS_INITIALIZER="zeros",this.units=e.units,En(this.units,"units"),this.activation=ml(e.activation===void 0?this.DEFAULT_ACTIVATION:e.activation),this.recurrentActivation=ml(e.recurrentActivation===void 0?this.DEFAULT_RECURRENT_ACTIVATION:e.recurrentActivation),this.useBias=e.useBias==null?!0:e.useBias,this.kernelInitializer=Mt(e.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.recurrentInitializer=Mt(e.recurrentInitializer||this.DEFAULT_RECURRENT_INITIALIZER),this.biasInitializer=Mt(e.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.unitForgetBias=e.unitForgetBias,this.kernelRegularizer=Ft(e.kernelRegularizer),this.recurrentRegularizer=Ft(e.recurrentRegularizer),this.biasRegularizer=Ft(e.biasRegularizer),this.kernelConstraint=vn(e.kernelConstraint),this.recurrentConstraint=vn(e.recurrentConstraint),this.biasConstraint=vn(e.biasConstraint),this.dropout=gf([1,hl([0,e.dropout==null?0:e.dropout])]),this.recurrentDropout=gf([1,hl([0,e.recurrentDropout==null?0:e.recurrentDropout])]),this.dropoutFunc=e.dropoutFunc,this.implementation=e.implementation,this.stateSize=[this.units,this.units],this.dropoutMask=null,this.recurrentDropoutMask=null}build(e){var n;e=it(e);const r=e[e.length-1];this.kernel=this.addWeight("kernel",[r,this.units*4],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,this.units*4],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint);let o;if(this.useBias){if(this.unitForgetBias){const s=this.biasInitializer,i=this.units;o=new(n=class extends es{apply(l,c){const u=s.apply([i]),d=new qO().apply([i]),f=s.apply([i*2]);return yj(yj(u,d),f)}},n.className="CustomInit",n)}else o=this.biasInitializer;this.bias=this.addWeight("bias",[this.units*4],null,o,this.biasRegularizer,!0,this.biasConstraint)}else this.bias=null;this.built=!0}call(e,n){return Y(()=>{const r=n.training==null?!1:n.training;if(e=e,e.length!==3)throw new W(`LSTMCell expects 3 input Tensors (inputs, h, c), got ${e.length}.`);let o=e[1];const s=e[2];e=e[0],0<this.dropout&&this.dropout<1&&this.dropoutMask==null&&(this.dropoutMask=gl({ones:()=>Xo(e),rate:this.dropout,training:r,count:4,dropoutFunc:this.dropoutFunc})),0<this.recurrentDropout&&this.recurrentDropout<1&&this.recurrentDropoutMask==null&&(this.recurrentDropoutMask=gl({ones:()=>Xo(o),rate:this.recurrentDropout,training:r,count:4,dropoutFunc:this.dropoutFunc}));const i=this.dropoutMask,a=this.recurrentDropoutMask;let l,c,u,d;0<this.dropout&&this.dropout<1&&(e=U(e,i[0]));let f=di(e,this.kernel.read());0<this.recurrentDropout&&this.recurrentDropout<1&&(o=U(o,a[0])),f=de(f,di(o,this.recurrentKernel.read())),this.useBias&&(f=js(f,this.bias.read()));const[h,p,m,g]=po(f,4,f.rank-1);l=this.recurrentActivation.apply(h),c=this.recurrentActivation.apply(p),u=de(U(c,s),U(l,this.activation.apply(m))),d=this.recurrentActivation.apply(g);const y=U(d,this.activation.apply(u));return[y,y,u]})}getConfig(){const e=super.getConfig(),n={units:this.units,activation:pl(this.activation),recurrentActivation:pl(this.recurrentActivation),useBias:this.useBias,kernelInitializer:zt(this.kernelInitializer),recurrentInitializer:zt(this.recurrentInitializer),biasInitializer:zt(this.biasInitializer),unitForgetBias:this.unitForgetBias,kernelRegularizer:wt(this.kernelRegularizer),recurrentRegularizer:wt(this.recurrentRegularizer),biasRegularizer:wt(this.biasRegularizer),activityRegularizer:wt(this.activityRegularizer),kernelConstraint:yn(this.kernelConstraint),recurrentConstraint:yn(this.recurrentConstraint),biasConstraint:yn(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout,implementation:this.implementation};return Object.assign(Object.assign({},e),n)}}iS.className="LSTMCell";ue(iS);class f9 extends Dl{constructor(e){e.implementation===0&&console.warn("`implementation=0` has been deprecated, and now defaults to `implementation=1`. Please update your layer call."),e.cell=new iS(e),super(e)}call(e,n){return Y(()=>{this.cell.dropoutMask!=null&&(qe(this.cell.dropoutMask),this.cell.dropoutMask=null),this.cell.recurrentDropoutMask!=null&&(qe(this.cell.recurrentDropoutMask),this.cell.recurrentDropoutMask=null);const r=n==null?null:n.mask,o=n==null?null:n.training,s=n==null?null:n.initialState;return super.call(e,{mask:r,training:o,initialState:s})})}static fromConfig(e,n){return n.implmentation===0&&(n.implementation=1),new e(n)}}f9.className="LSTM";ue(f9);class cP extends sS{constructor(e){super(e),this.cells=e.cells}get stateSize(){const e=[];for(const n of this.cells.slice().reverse())Array.isArray(n.stateSize)?e.push(...n.stateSize):e.push(n.stateSize);return e}call(e,n){return Y(()=>{e=e;let r=e.slice(1);const o=[];for(const a of this.cells.slice().reverse())Array.isArray(a.stateSize)?o.push(r.splice(0,a.stateSize.length)):o.push(r.splice(0,1));o.reverse();const s=[];let i;for(let a=0;a<this.cells.length;++a){const l=this.cells[a];r=o[a],a===0?i=[e[0]].concat(r):i=[i[0]].concat(r),i=l.call(i,n),s.push(i.slice(1))}r=[];for(const a of s.slice().reverse())r.push(...a);return[i[0]].concat(r)})}build(e){AI(e)&&(e=e[0]),e=e;let n;this.cells.forEach((r,o)=>{Sc(`RNNCell_${o}`,()=>{r.build(e),Array.isArray(r.stateSize)?n=r.stateSize[0]:n=r.stateSize,e=[e[0],n]})}),this.built=!0}getConfig(){const e=super.getConfig(),n=s=>({className:s.getClassName(),config:s.getConfig()}),o={cells:this.cells.map(n)};return Object.assign(Object.assign({},e),o)}static fromConfig(e,n,r={}){const o=[];for(const s of n.cells)o.push(Vi(s,r));return new e({cells:o})}get trainableWeights(){if(!this.trainable)return[];const e=[];for(const n of this.cells)e.push(...n.trainableWeights);return e}get nonTrainableWeights(){const e=[];for(const n of this.cells)e.push(...n.nonTrainableWeights);if(!this.trainable){const n=[];for(const r of this.cells)n.push(...r.trainableWeights);return n.concat(e)}return e}getWeights(){const e=[];for(const n of this.cells)e.push(...n.weights);return OI(e)}setWeights(e){const n=[];for(const r of this.cells){const o=r.weights.length,s=e.splice(o);for(let i=0;i<r.weights.length;++i)n.push([r.weights[i],s[i]])}tP(n)}}cP.className="StackedRNNCells";ue(cP);function gl(t){const{ones:e,rate:n,training:r=!1,count:o=1,dropoutFunc:s}=t,i=()=>s!=null?s(e(),n):rX(e(),n),a=()=>by(i,e,r);return!o||o<=1?li(a().clone()):Array(o).fill(void 0).map(a).map(c=>li(c.clone()))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */var ZUe=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]]);return n};class h9 extends Dl{constructor(e){if(e.unroll)throw new We("Unrolling is not possible with convolutional RNNs.");if(Array.isArray(e.cell))throw new We("It is not possible at the moment to stack convolutional cells.");super(e),this.inputSpec=[new mn({ndim:5})]}call(e,n){return Y(()=>{if(this.cell.dropoutMask!=null&&(qe(this.cell.dropoutMask),this.cell.dropoutMask=null),this.cell.recurrentDropoutMask!=null&&(qe(this.cell.recurrentDropoutMask),this.cell.recurrentDropoutMask=null),n&&n.constants)throw new W("ConvRNN2D cell does not support constants");const r=n==null?null:n.mask,o=n==null?null:n.training,s=n==null?null:n.initialState;return super.call(e,{mask:r,training:o,initialState:s})})}computeOutputShape(e){let n=this.computeSingleOutputShape(e);return this.returnSequences||(n=[n[0],...n.slice(2)]),this.returnState&&(n=[n,...Array(2).fill([e[0],...n.slice(-3)])]),n}getInitialState(e){return Y(()=>{const{stateSize:n}=this.cell,r=e.shape,o=this.computeSingleOutputShape(r),s=[o[0],...o.slice(2)],i=kn(s);return Array.isArray(n)?Array(n.length).fill(i):[i]})}resetStates(e,n=!1){Y(()=>{if(!this.stateful)throw new qs("Cannot call resetStates() on an RNN Layer that is not stateful.");const r=this.inputSpec[0].shape,o=this.computeSingleOutputShape(r),s=[o[0],...o.slice(2)];if(r[0]==null)throw new W("If an RNN is stateful, it needs to know its batch size. Specify the batch size of your input tensors: \n- If using a Sequential model, specify the batch size by passing a `batchInputShape` option to your first layer.\n- If using the functional API, specify the batch size by passing a `batchShape` option to your Input layer.");if(this.getStates()==null)Array.isArray(this.cell.stateSize)?this.states_=this.cell.stateSize.map(()=>kn(s)):this.states_=[kn(s)];else if(e==null)qe(this.states_),this.keptStates!=null&&(qe(this.keptStates),this.keptStates=[]),Array.isArray(this.cell.stateSize)?this.states_=this.cell.stateSize.map(()=>kn(s)):this.states_[0]=kn(s);else{if(Array.isArray(e)||(e=[e]),e.length!==this.states_.length)throw new W(`Layer ${this.name} expects ${this.states_.length} state(s), but it received ${e.length} state value(s). Input received: ${e}`);n?this.keptStates.push(this.states_.slice()):qe(this.states_);for(let a=0;a<this.states_.length;++a){const l=e[a],c=s;if(!dt(l.shape,c))throw new W(`State ${a} is incompatible with layer ${this.name}: expected shape=${c}, received shape=${l.shape}`);this.states_[a]=l}}this.states_=this.states_.map(a=>li(a.clone()))})}computeSingleOutputShape(e){const{dataFormat:n,filters:r,kernelSize:o,padding:s,strides:i,dilationRate:a}=this.cell,l=n==="channelsFirst",c=e[l?3:2],u=e[l?4:3],d=Es(c,o[0],s,i[0],a[0]),f=Es(u,o[1],s,i[1],a[1]);return[...e.slice(0,2),...l?[r,d,f]:[d,f,r]]}}h9.className="ConvRNN2D";class uP extends iS{constructor(e){const{filters:n,kernelSize:r,strides:o,padding:s,dataFormat:i,dilationRate:a}=e;super(Object.assign(Object.assign({},e),{units:n})),this.filters=n,En(this.filters,"filters"),this.kernelSize=gd(r,2,"kernelSize"),this.kernelSize.forEach(l=>En(l,"kernelSize")),this.strides=gd(o||1,2,"strides"),this.strides.forEach(l=>En(l,"strides")),this.padding=s||"valid",wo(this.padding),this.dataFormat=i||"channelsLast",rn(this.dataFormat),this.dilationRate=gd(a||1,2,"dilationRate"),this.dilationRate.forEach(l=>En(l,"dilationRate"))}build(e){var n;e=it(e);const r=this.dataFormat==="channelsFirst"?1:e.length-1;if(e[r]==null)throw new W(`The channel dimension of the input should be defined. Found ${e[r]}`);const o=e[r],s=4,i=this.kernelSize.concat([o,this.filters*s]);this.kernel=this.addWeight("kernel",i,null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint);const a=this.kernelSize.concat([this.filters,this.filters*s]);if(this.recurrentKernel=this.addWeight("recurrent_kernel",a,null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias){let l;if(this.unitForgetBias){const c=this.biasInitializer,u=this.filters;l=new(n=class extends es{apply(f,h){const p=c.apply([u]),m=Rl([u]),g=c.apply([u*2]);return KO([p,m,g])}},n.className="CustomInit",n)}else l=this.biasInitializer;this.bias=this.addWeight("bias",[this.filters*s],null,l,this.biasRegularizer,!0,this.biasConstraint)}this.built=!0}call(e,n){return Y(()=>{if(e.length!==3)throw new W(`ConvLSTM2DCell expects 3 input Tensors (inputs, h, c), got ${e.length}.`);const r=n.training||!1,o=e[0],s=e[1],i=e[2],a=4;0<this.dropout&&this.dropout<1&&this.dropoutMask==null&&(this.dropoutMask=gl({ones:()=>Xo(o),rate:this.dropout,training:r,count:a,dropoutFunc:this.dropoutFunc}));const l=this.dropoutMask,c=(B,V,G)=>!V||!V[G]?B:U(V[G],B);let u=c(o,l,0),d=c(o,l,1),f=c(o,l,2),h=c(o,l,3);0<this.recurrentDropout&&this.recurrentDropout<1&&this.recurrentDropoutMask==null&&(this.recurrentDropoutMask=gl({ones:()=>Xo(s),rate:this.recurrentDropout,training:r,count:a,dropoutFunc:this.dropoutFunc}));const p=this.recurrentDropoutMask;let m=c(s,p,0),g=c(s,p,1),y=c(s,p,2),v=c(s,p,3);const x=3,[b,w,C,$]=po(this.kernel.read(),a,x),[T,I,E,N]=this.useBias?po(this.bias.read(),a):[null,null,null,null];u=this.inputConv(u,b,T,this.padding),d=this.inputConv(d,w,I,this.padding),f=this.inputConv(f,C,E,this.padding),h=this.inputConv(h,$,N,this.padding);const[A,R,P,F]=po(this.recurrentKernel.read(),a,x);m=this.recurrentConv(m,A),g=this.recurrentConv(g,R),y=this.recurrentConv(y,P),v=this.recurrentConv(v,F);const _=this.recurrentActivation.apply(de(u,m)),L=this.recurrentActivation.apply(de(d,g)),O=de(U(L,i),U(_,this.activation.apply(de(f,y)))),D=U(this.recurrentActivation.apply(de(h,v)),this.activation.apply(O));return[D,D,O]})}getConfig(){const e=super.getConfig(),n=ZUe(e,["units"]),r={filters:this.filters,kernelSize:this.kernelSize,padding:this.padding,dataFormat:this.dataFormat,dilationRate:this.dilationRate,strides:this.strides};return Object.assign(Object.assign({},n),r)}inputConv(e,n,r,o){const s=Gc(e,n,this.strides,o||"valid",this.dataFormat==="channelsFirst"?"NCHW":"NHWC",this.dilationRate);return r?js(s,r,this.dataFormat):s}recurrentConv(e,n){return Gc(e,n,1,"same",this.dataFormat==="channelsFirst"?"NCHW":"NHWC")}}uP.className="ConvLSTM2DCell";ue(uP);class p9 extends h9{constructor(e){const n=new uP(e);super(Object.assign(Object.assign({},e),{cell:n}))}static fromConfig(e,n){return new e(n)}}p9.className="ConvLSTM2D";ue(p9);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class dP extends Ke{constructor(e){super(e),this.rate=Math.max(Math.min(e.rate,1),0),this.noiseShape=e.noiseShape,this.seed=e.seed,this.supportsMasking=!0}getNoiseShape(e){if(this.noiseShape==null)return this.noiseShape;const n=e.shape,r=[];for(let o=0;o<this.noiseShape.length;++o)r.push(this.noiseShape[o]==null?n[o]:this.noiseShape[o]);return r}call(e,n){return Y(()=>{this.invokeCallHook(e,n);const r=Me(e);if(0<this.rate&&this.rate<1){const o=n.training==null?!1:n.training,s=this.getNoiseShape(r);return by(()=>rX(r,this.rate,s,this.seed),()=>r,o)}return e})}getConfig(){const e={rate:this.rate,noiseShape:this.noiseShape,seed:this.seed},n=super.getConfig();return Object.assign(e,n),e}dispose(){return super.dispose()}}dP.className="Dropout";ue(dP);class m9 extends dP{constructor(e){super(e),this.inputSpec=[{ndim:3}]}getNoiseShape(e){const n=e.shape;return[n[0],1,n[2]]}}m9.className="SpatialDropout1D";ue(m9);class g9 extends Ke{constructor(e){if(super(e),this.activation=null,this.useBias=!0,this.kernel=null,this.bias=null,this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_BIAS_INITIALIZER="zeros",e.batchInputShape==null&&e.inputShape==null&&e.inputDim!=null){let n=null;e.batchSize!=null&&(n=e.batchSize),this.batchInputShape=[n,e.inputDim]}this.units=e.units,En(this.units,"units"),this.activation=ml(e.activation),e.useBias!=null&&(this.useBias=e.useBias),this.kernelInitializer=Mt(e.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.biasInitializer=Mt(e.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.kernelConstraint=vn(e.kernelConstraint),this.biasConstraint=vn(e.biasConstraint),this.kernelRegularizer=Ft(e.kernelRegularizer),this.biasRegularizer=Ft(e.biasRegularizer),this.activityRegularizer=Ft(e.activityRegularizer),this.supportsMasking=!0,this.inputSpec=[{minNDim:2}]}build(e){e=it(e);const n=e[e.length-1];this.kernel==null&&(this.kernel=this.addWeight("kernel",[n,this.units],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.units],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint))),this.inputSpec=[{minNDim:2,axes:{[-1]:n}}],this.built=!0}computeOutputShape(e){e=it(e);const n=e.slice();return n[n.length-1]=this.units,n}call(e,n){return Y(()=>{this.invokeCallHook(e,n);const r=Me(e),o=Y8(this.activation.getClassName());let s;return o!=null?s=di(r,this.kernel.read(),o,this.bias?this.bias.read():null):(s=di(r,this.kernel.read()),this.bias!=null&&(s=js(s,this.bias.read())),this.activation!=null&&(s=this.activation.apply(s))),s})}getConfig(){const e={units:this.units,activation:pl(this.activation),useBias:this.useBias,kernelInitializer:zt(this.kernelInitializer),biasInitializer:zt(this.biasInitializer),kernelRegularizer:wt(this.kernelRegularizer),biasRegularizer:wt(this.biasRegularizer),activityRegularizer:wt(this.activityRegularizer),kernelConstraint:yn(this.kernelConstraint),biasConstraint:yn(this.biasConstraint)},n=super.getConfig();return Object.assign(e,n),e}}g9.className="Dense";ue(g9);class y9 extends Ke{constructor(e){e=e||{},super(e),this.inputSpec=[{minNDim:3}],this.dataFormat=e.dataFormat}computeOutputShape(e){e=it(e);for(const n of e.slice(1))if(n==null)throw new W(`The shape of the input to "Flatten" is not fully defined (got ${e.slice(1)}). Make sure to pass a complete "input_shape" or "batch_input_shape" argument to the first layer in your model.`);return[e[0],sl(e,1)]}call(e,n){return Y(()=>{this.invokeCallHook(e,n);let r=Me(e);if(this.dataFormat==="channelsFirst"&&r.rank>1){const o=[0];for(let s=2;s<r.rank;++s)o.push(s);o.push(1),r=nt(r,o)}return PVe(r)})}getConfig(){const e={};this.dataFormat!=null&&(e.dataFormat=this.dataFormat);const n=super.getConfig();return Object.assign(e,n),e}}y9.className="Flatten";ue(y9);class v9 extends Ke{constructor(e){super(e),this.supportsMasking=!0,this.activation=ml(e.activation)}call(e,n){return Y(()=>{this.invokeCallHook(e,n);const r=Me(e);return this.activation.apply(r)})}getConfig(){const e={activation:pl(this.activation)},n=super.getConfig();return Object.assign(e,n),e}}v9.className="Activation";ue(v9);class x9 extends Ke{constructor(e){super(e),this.n=e.n,this.inputSpec=[{ndim:2}]}computeOutputShape(e){return[e[0],this.n,e[1]]}call(e,n){return Y(()=>(e=Me(e),AVe(e,this.n)))}getConfig(){const e={n:this.n},n=super.getConfig();return Object.assign(e,n),e}}x9.className="RepeatVector";ue(x9);class b9 extends Ke{constructor(e){super(e),this.targetShape=e.targetShape;for(let n=0;n<this.targetShape.length;++n)this.isUnknown(this.targetShape[n])&&(this.targetShape[n]=null)}isUnknown(e){return e<0||e==null}fixUnknownDimension(e,n){const r="Total size of new array must be unchanged.",o=n.slice();let s=1,i=null;for(let l=0;l<o.length;++l){const c=o[l];if(this.isUnknown(c))if(i===null)i=l;else throw new W("Can only specifiy one unknown dimension.");else s*=c}const a=sl(e);if(i!==null){if(s===0||a%s!==0)throw new W(r);o[i]=a/s}else if(a!==s)throw new W(r);return o}computeOutputShape(e){let n=!1;for(let r=0;r<e.length;++r)if(this.isUnknown(e[r])){n=!0;break}return n?e.slice(0,1).concat(this.targetShape):e.slice(0,1).concat(this.fixUnknownDimension(e.slice(1),this.targetShape))}call(e,n){return Y(()=>{this.invokeCallHook(e,n);const r=Me(e),o=r.shape,s=o.slice(0,1).concat(this.fixUnknownDimension(o.slice(1),this.targetShape));return q(r,s)})}getConfig(){const e={targetShape:this.targetShape},n=super.getConfig();return Object.assign(e,n),e}}b9.className="Reshape";ue(b9);class w9 extends Ke{constructor(e){if(super(e),e.dims==null)throw new Error("Required configuration field `dims` is missing during Permute constructor call.");if(!Array.isArray(e.dims))throw new Error(`Permute constructor requires \`dims\` to be an Array, but received ${e.dims} instead.`);const n=Ps(1,e.dims.length+1);if(!dt(e.dims.slice().sort(),n))throw new Error("Invalid permutation `dims`: "+JSON.stringify(e.dims)+" `dims` must contain consecutive integers starting from 1.");this.dims=e.dims,this.dimsIncludingBatch=[0].concat(this.dims),this.inputSpec=[new mn({ndim:this.dims.length+1})]}computeOutputShape(e){e=it(e);const n=e.slice();return this.dims.forEach((r,o)=>{n[o+1]=e[r]}),n}call(e,n){return nt(Me(e),this.dimsIncludingBatch)}getConfig(){const e={dims:this.dims},n=super.getConfig();return Object.assign(e,n),e}}w9.className="Permute";ue(w9);class S9 extends Ke{constructor(e){super(e??{}),this.supportsMasking=!0,e!=null?this.maskValue=e.maskValue==null?0:e.maskValue:this.maskValue=0}computeOutputShape(e){return e}getConfig(){const e=super.getConfig(),n={maskValue:this.maskValue};return Object.assign(n,e),n}computeMask(e,n){const r=Me(e);return wI(Ub(r,this.maskValue),-1)}call(e,n){return Y(()=>{this.invokeCallHook(e,n);const r=Me(e),i=wI(Ub(r,this.maskValue),-1,!0);return U(r,xe(i,r.dtype))})}}S9.className="Masking";ue(S9);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class C9 extends Ke{constructor(e){if(super(e),this.embeddings=null,this.DEFAULT_EMBEDDINGS_INITIALIZER="randomUniform",e.batchInputShape==null&&e.inputShape==null){let n=null;e.batchSize!=null&&(n=e.batchSize),e.inputLength==null?this.batchInputShape=[n,null]:this.batchInputShape=[n].concat(ht(e.inputLength))}this.inputDim=e.inputDim,En(this.inputDim,"inputDim"),this.outputDim=e.outputDim,En(this.outputDim,"outputDim"),this.embeddingsInitializer=Mt(e.embeddingsInitializer||this.DEFAULT_EMBEDDINGS_INITIALIZER),this.embeddingsRegularizer=Ft(e.embeddingsRegularizer),this.activityRegularizer=Ft(e.activityRegularizer),this.embeddingsConstraint=vn(e.embeddingsConstraint),this.maskZero=e.maskZero,this.supportsMasking=e.maskZero,this.inputLength=e.inputLength}build(e){this.embeddings=this.addWeight("embeddings",[this.inputDim,this.outputDim],this.dtype,this.embeddingsInitializer,this.embeddingsRegularizer,!0,this.embeddingsConstraint),this.built=!0}warnOnIncompatibleInputShape(e){}computeMask(e,n){return Y(()=>this.maskZero?(e=Me(e),Ub(e,rt(e))):null)}computeOutputShape(e){if(e=it(e),this.inputLength==null)return[...e,this.outputDim];const n=ht(this.inputLength);if(n.length!==e.length-1)throw new W(`"inputLength" is ${this.inputLength}, but received input shape has shape ${e}`);{let r=0;for(let o=0;o<n.length;++o){const s=n[o],i=e[o+1];if(s!=null&&i!=null&&s!==i)throw new W(`"inputLength" is ${this.inputLength}, but received input shape has shape ${e}`);s==null&&(n[r]=i),r++}}return[e[0],...n,this.outputDim]}call(e,n){return Y(()=>{this.invokeCallHook(e,n);let r=Me(e);r.dtype!=="int32"&&(r=ui(r,"int32"));const o=nX(this.embeddings.read(),q(r,[r.size]));return q(o,it(this.computeOutputShape(r.shape)))})}getConfig(){const e={inputDim:this.inputDim,outputDim:this.outputDim,embeddingsInitializer:zt(this.embeddingsInitializer),embeddingsRegularizer:wt(this.embeddingsRegularizer),activityRegularizer:wt(this.activityRegularizer),embeddingsConstraint:yn(this.embeddingsConstraint),maskZero:this.maskZero,inputLength:this.inputLength},n=super.getConfig();return Object.assign(e,n),e}}C9.className="Embedding";ue(C9);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class mu extends Ke{constructor(e){super(e||{}),this.supportsMasking=!0}mergeFunction(e){throw new We}computeElementwiseOpOutputShape(e,n){if(e==null||n==null)return null;if(e.length<n.length)return this.computeElementwiseOpOutputShape(n,e);if(n.length===0)return e;const r=e.slice(0,e.length-n.length);for(let o=0;o<n.length;++o){const s=e[e.length-n.length+o],i=n[o];if(s==null||i==null||s<0||i<0)r.push(null);else if(s===1)r.push(i);else if(i===1)r.push(s);else{if(s!==i)throw new W("Operands could not be broadcast together with shapes "+JSON.stringify(e)+" "+JSON.stringify(n));r.push(s)}}return r}build(e){if(Array.isArray(e)&&!Array.isArray(e[0])&&(e=[it(e)]),e=e,e.length<2)throw new W(`A merge layer should be called on an Array of at least 2 inputs. Got ${e.length} input(s).`);let n=[];for(const s of e)s!=null&&s[0]!==null&&n.push(s[0]);if(n=ol(n),n.length>1)throw new W(`Can not merge tensors with different batch sizes. Got tensors with shapes: ${JSON.stringify(e)}.`);let r=e[0]==null?null:e[0].slice(1);for(let s=1;s<e.length;++s){const i=e[s]==null?null:e[s].slice(1);r=this.computeElementwiseOpOutputShape(r,i)}const o=e.map(s=>s.length);e.indexOf(null)===-1&&ol(o).length===1?this.reshapeRequired=!1:this.reshapeRequired=!0}call(e,n){return Y(()=>{if(e=e,this.reshapeRequired){const r=[],o=e.map(s=>s.rank);if(o.indexOf(null)===-1){const s=hl(o);for(let i of e){const a=i.rank;for(let l=0;l<s-a;++l)i=vy(i,1);r.push(i)}return this.mergeFunction(r)}else{let s=!1;for(const l of e){const c=l.rank;if(c==null){const u=l.shape,d=u[0],f=u.slice(1).concat([d]);let h=q(l,[d].concat(sl(u.slice(1))));h=nt(h,[1,0]),h=q(h,f),r.push(h),s=!0}else if(c>1){const u=Ps(1,c).concat([0]);r.push(nt(l,u)),s=!0}else r.push(l)}let i=this.mergeFunction(r);const a=i.rank;if(s){if(a==null){const l=i.shape,c=l.length,u=l[c-1],d=[u].concat(l.slice(0,l.length-1));i=q(nt(q(i,[-1,u]),[1,0]),d)}else if(a>1){const l=[a-1].concat(Ps(0,a-1));i=nt(i,l)}}return i}}else return this.mergeFunction(e)})}computeOutputShape(e){e=e;let n;e[0]==null?n=null:n=e[0].slice(1);for(let o=1;o<e.length;++o){const s=e[o]==null?null:e[o].slice(1);n=this.computeElementwiseOpOutputShape(n,s)}let r=[];for(const o of e)o!=null&&o[0]!==null&&r.push(o[0]);return r=ol(r),r.length===1?n=r.concat(n):n=[null].concat(n),n}computeMask(e,n){return Y(()=>{if(n==null)return null;if(!Array.isArray(n))throw new W("`mask` should be an Array");if(!Array.isArray(e))throw new W("`inputs` should be an Array");if(n.length!==e.length)throw new W(`The Array 'inputs' and 'mask' are expected to have the same length, but have different lengths (${e.length} vs ${n.length})`);if(n.every(o=>o==null))return null;n=n.map(o=>o==null?o:Cr(o,0));let r=n[0];for(let o=1;o<n.length-1;++o)r=ta(r,n[o]);return r})}}class $9 extends mu{constructor(e){super(e)}mergeFunction(e){return Y(()=>{let n=e[0].clone();for(let r=1;r<e.length;++r)n=de(n,e[r]);return n})}}$9.className="Add";ue($9);class k9 extends mu{constructor(e){super(e)}mergeFunction(e){return Y(()=>{let n=e[0].clone();for(let r=1;r<e.length;++r)n=U(n,e[r]);return n})}}k9.className="Multiply";ue(k9);class T9 extends mu{constructor(e){super(e)}mergeFunction(e){return Y(()=>{let n=e[0].clone();for(let r=1;r<e.length;++r)n=de(n,e[r]);return U(1/e.length,n)})}}T9.className="Average";ue(T9);class I9 extends mu{constructor(e){super(e)}mergeFunction(e){return Y(()=>{let n=e[0];for(let r=1;r<e.length;++r)n=Pl(n,e[r]);return n})}}I9.className="Maximum";ue(I9);class E9 extends mu{constructor(e){super(e)}mergeFunction(e){return Y(()=>{let n=e[0];for(let r=1;r<e.length;++r)n=Em(n,e[r]);return n})}}E9.className="Minimum";ue(E9);class N9 extends mu{constructor(e){super(e),this.DEFAULT_AXIS=-1,e==null&&(e={}),this.axis=e.axis==null?this.DEFAULT_AXIS:e.axis,this.supportsMasking=!0,this.reshapeRequired=!1}build(e){if(!(Array.isArray(e)&&Array.isArray(e[0]))||e.length===1)throw new W("A `Concatenate` layer should be called on a list of at least 2 inputs");e=e;let n=!0;for(const o of e)if(o!=null){n=!1;break}if(n)return;const r=[];for(let o=0;o<e.length;++o){const s=e[o].slice();s.splice(this.axis,1);let i=!1;for(const a of r)if(dt(a,s)){i=!0;break}i||r.push(s)}if(r.length>1)throw new W("A `Concatenate` layer requires inputs with matching shapes except for the concat axis. Got input shapes: "+JSON.stringify(e))}mergeFunction(e){return Y(()=>KO(e,this.axis))}computeOutputShape(e){if(!(Array.isArray(e)&&Array.isArray(e[0])))throw new W("A `Concatenate` layer should be called on a list of inputs.");const n=e,r=n[0].slice(),o=this.axis<0?r.length+this.axis:this.axis;for(const s of n.slice(1)){if(r[o]==null||s[o]==null){r[o]=null;break}r[o]+=s[o]}return r}computeMask(e,n){if(n==null)return null;if(!Array.isArray(n))throw new W("`mask` should be an array for Concatenate");if(!Array.isArray(e))throw new W("`inputs` should be an array for Concatenate");if(n.length!==e.length)throw new W(`Mismatch in the length of mask (${n.length}) and the legnth of inputs (${e.length})`);return Y(()=>{let r=!0;if(n.forEach(i=>{if(i!=null){r=!1;return}}),r)return null;const o=[];for(let i=0;i<e.length;++i)n[i]==null?o.push(xe(Xo(e[i]),"bool")):n[i].rank<e[i].rank?o.push(Cr(n[i],-1)):o.push(n[i]);const s=Nr(o,this.axis);return Nq(s,-1,!1)})}getConfig(){const e={axis:this.axis},n=super.getConfig();return Object.assign(e,n),e}}N9.className="Concatenate";ue(N9);function Mh(t,e){for(;t<0;)t+=e;return t}function JUe(t,e,n){if(t.shape.length>3||e.shape.length>3)throw new We("batchDot is not implemented for tensors of 4D or higher rank yet");if(M(t.shape.length>=2,()=>`batchDot requires the rank of x to be >= 2, but got ${t.shape.length}`),M(t.shape.length>=2,()=>`batchDot requires the rank of y to be >= 2, but got ${e.shape.length}`),typeof n=="number"&&(n=[n,n]),t.dtype==="complex64"||e.dtype==="complex64")throw new We("batchDot is not implemented for complex64-type Tensors yet.");const r=t.shape.length,o=e.shape.length;n==null&&(n=[r-1,o-2]);const s=n;return Y(()=>{let i;if(r>o){i=r-o;const l=[];for(let c=0;c<i;++c)l.push(1);e=q(e,e.shape.concat(l))}else if(o>r){i=o-r;const l=[];for(let c=0;c<i;++c)l.push(1);t=q(t,t.shape.concat(l))}else i=0;let a;if(t.shape.length===2&&e.shape.length===2)s[0]===s[1]?a=Ee(U(t,e),s[0]):a=Ee(U(nt(t,[1,0]),e),s[1]);else{const l=s[0]!==t.shape.length-1,c=s[1]===e.shape.length-1;a=lt(t,e,l,c)}if(i>0){let l;r>o?l=r+o-3:l=r-1;const c=[];for(let u=l;u<l+i;++u)c.push(u);a=fy(a,c)}return a.shape.length===1&&(a=Cr(a,1)),a})}class A9 extends mu{constructor(e){super(e),this.axes=e.axes,this.normalize=e.normalize==null?!1:e.normalize,this.supportsMasking=!0,this.reshapeRequired=!1}build(e){M(Array.isArray(e)&&e.length===2&&Array.isArray(e[0])&&Array.isArray(e[1]),()=>"A `Dot` layer should be called on a list of exactly 2 inputs.");const n=e[0],r=e[1];if(n.length>3||r.length>3)throw new We("Dot layer does not support tensors of 4D or higher rank yet.");const o=this.interpretAxes(n,r);if(n[o[0]]!==r[o[1]])throw new W(`Dimension incompatibility: ${n[o[0]]} !== ${r[o[1]]}`)}mergeFunction(e){if(e.length!==2)throw new W(`A \`Dot\` layer must be called on exactly 2 inputs, but received ${e.length} input(s).`);let n=e[0],r=e[1],o;return Array.isArray(this.axes)?o=this.axes.map((s,i)=>Mh(s,e[i].shape.length)):o=[Mh(this.axes,n.shape.length),Mh(this.axes,r.shape.length)],this.normalize&&(n=Qb(n,o[0]),r=Qb(r,o[1])),JUe(n,r,o)}interpretAxes(e,n){let r;return Array.isArray(this.axes)?r=this.axes:r=[Mh(this.axes,e.length),Mh(this.axes,n.length)],r}computeOutputShape(e){M(Array.isArray(e)&&e.length===2&&Array.isArray(e[0])&&Array.isArray(e[1]),()=>"A `Dot` layer should be called on a list of exactly 2 inputs.");const n=e[0].slice(),r=e[1].slice();if(n.length>3||r.length>3)throw new We("Dot layer does not support tensors of 4D or higher rank yet.");const o=this.interpretAxes(n,r);n.splice(o[0],1),r.splice(o[1],1),r.splice(0,1);const s=n.concat(r);return s.length===1&&s.push(1),s}computeMask(e,n){return null}getConfig(){const e={axes:this.axes,normalize:this.normalize},n=super.getConfig();return Object.assign(e,n),e}}A9.className="Dot";ue(A9);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class O9 extends Ke{constructor(e){super(e),this.supportsMasking=!0,this.stddev=e.stddev}computeOutputShape(e){return e}getConfig(){const e=super.getConfig(),n={stddev:this.stddev};return Object.assign(n,e),n}call(e,n){return Y(()=>{this.invokeCallHook(e,n);const r=Me(e);return by(()=>de(J1(r.shape,0,this.stddev),r),()=>r,n.training||!1)})}}O9.className="GaussianNoise";ue(O9);class P9 extends Ke{constructor(e){super(e),this.supportsMasking=!0,this.rate=e.rate}computeOutputShape(e){return e}getConfig(){const e=super.getConfig(),n={rate:this.rate};return Object.assign(n,e),n}call(e,n){return Y(()=>{this.invokeCallHook(e,n);const r=Me(e);return this.rate>0&&this.rate<1?by(()=>{const s=Math.sqrt(this.rate/(1-this.rate));return U(r,J1(r.shape,1,s))},()=>r,n.training||!1):r})}}P9.className="GaussianDropout";ue(P9);class R9 extends Ke{constructor(e){super(e),this.supportsMasking=!0,this.rate=e.rate,this.noiseShape=e.noiseShape}_getNoiseShape(e){return this.noiseShape||Me(e).shape}computeOutputShape(e){return e}getConfig(){const e=super.getConfig(),n={rate:this.rate};return Object.assign(n,e),n}call(e,n){return Y(()=>{if(this.rate<1&&this.rate>0){const r=this._getNoiseShape(e);return by(()=>{const s=Me(e),l=-1.6732632423543772*1.0507009873554805;let c=uu(dy(r),this.rate);c=ui(c,"float32");const u=((1-this.rate)*(1+this.rate*l**2))**-.5,d=-u*l*this.rate,f=de(U(s,c),U(de(c,-1),l));return de(U(f,u),d)},()=>Me(e),n.training||!1)}return e})}}R9.className="AlphaDropout";ue(R9);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function Rm(t,e,n,r,o,s=.001){let i;if(t.rank===2)i=RLe(t,e,n,r,o,s);else if(t.rank===3)i=DLe(t,e,n,r,o,s);else if(t.rank===4)i=FLe(t,e,n,r,o,s);else throw new We(`batchNormalization is not implemented for array of rank ${t.rank} yet`);return i}function eGe(t,e,n,r,o=.001){return Y(()=>{const s=XA(t,r),i=s.mean,a=s.variance;return[Rm(t,i,a,n,e,o),i,a]})}function tGe(t,e,n,r,o=.001){return Y(()=>{const s=XA(t,r),i=s.mean,a=s.variance,l=[];for(const p of Ps(0,t.rank))r.indexOf(p)!==-1?l.push(1):l.push(t.shape[p]);const c=q(i,l),u=q(a,l),d=e==null?null:q(e,l),f=n==null?null:q(n,l);return[Rm(t,c,u,f,d,o),i,a]})}function nGe(t,e,n,r,o=.001){return dt(r.slice().sort(),Ps(0,t.rank-1))?eGe(t,e,n,r,o):tGe(t,e,n,r,o)}class _9 extends Ke{constructor(e){e==null&&(e={}),super(e),this.supportsMasking=!0,this.axis=e.axis==null?-1:e.axis,this.momentum=e.momentum==null?.99:e.momentum,this.epsilon=e.epsilon==null?.001:e.epsilon,this.center=e.center==null?!0:e.center,this.scale=e.scale==null?!0:e.scale,this.betaInitializer=Mt(e.betaInitializer||"zeros"),this.gammaInitializer=Mt(e.gammaInitializer||"ones"),this.movingMeanInitializer=Mt(e.movingMeanInitializer||"zeros"),this.movingVarianceInitializer=Mt(e.movingVarianceInitializer||"ones"),this.betaConstraint=vn(e.betaConstraint),this.gammaConstraint=vn(e.gammaConstraint),this.betaRegularizer=Ft(e.betaRegularizer),this.gammaRegularizer=Ft(e.gammaRegularizer)}build(e){e=it(e);const n=this.axis>=0?this.axis:this.axis+e.length,r=e[n];if(r==null)throw new W(`Axis ${n} of input tensor should have a defined dimension but the layer received an input with shape ${JSON.stringify(e)}.`);this.inputSpec=[new mn({ndim:e.length,axes:{[n]:r}})];const o=[r];this.scale&&(this.gamma=this.addWeight("gamma",o,null,this.gammaInitializer,this.gammaRegularizer,!0,this.gammaConstraint)),this.center&&(this.beta=this.addWeight("beta",o,null,this.betaInitializer,this.betaRegularizer,!0,this.betaConstraint)),this.movingMean=this.addWeight("moving_mean",o,null,this.movingMeanInitializer,null,!1),this.movingVariance=this.addWeight("moving_variance",o,null,this.movingVarianceInitializer,null,!1),this.built=!0}call(e,n){return Y(()=>{const r=n.training==null?!1:n.training,o=Me(e),s=o.shape,i=s.length,a=Ps(0,i),l=this.axis>=0?this.axis:this.axis+i;a.splice(l,1);const c=Xc(1,i);c[l]=s[l];const u=a.slice();u.sort();const d=!dt(u,Ps(0,i).slice(0,i-1)),f=()=>{if(d){const v=q(this.movingMean.read(),c),x=q(this.movingVariance.read(),c),b=this.center?q(this.beta.read(),c):null,w=this.scale?q(this.gamma.read(),c):null;return Rm(o,v,x,b,w,this.epsilon)}else return Rm(o,this.movingMean.read(),this.movingVariance.read(),this.beta==null?null:this.beta.read(),this.gamma==null?null:this.gamma.read(),this.epsilon)};if(!r)return f();const[h,p,m]=nGe(o,this.gamma.read(),this.beta.read(),a,this.epsilon),g=(v,x,b)=>{Y(()=>{const w=1-b,C=v.read(),$=U(_e(C,x),w);v.write(_e(C,$))})};return(()=>{g(this.movingMean,p,this.momentum),g(this.movingVariance,m,this.momentum)})(),h})}getConfig(){const e={axis:this.axis,momentum:this.momentum,epsilon:this.epsilon,center:this.center,scale:this.scale,betaInitializer:zt(this.betaInitializer),gammaInitializer:zt(this.gammaInitializer),movingMeanInitializer:zt(this.movingMeanInitializer),movingVarianceInitializer:zt(this.movingVarianceInitializer),betaRegularizer:wt(this.betaRegularizer),gammaRegularizer:wt(this.gammaRegularizer),betaConstraint:yn(this.betaConstraint),gammaConstraint:yn(this.gammaConstraint)},n=super.getConfig();return Object.assign(e,n),e}}_9.className="BatchNormalization";ue(_9);class D9 extends Ke{constructor(e){if(e==null&&(e={}),super(e),this.axis=e.axis==null?-1:e.axis,typeof this.axis=="number"){if(!Number.isInteger(this.axis))throw new Error(`Expected axis to be an integer, but received ${this.axis}`)}else if(Array.isArray(this.axis)){for(const n of this.axis)if(!Number.isInteger(n))throw new Error(`Expected axis to be an array of integers, but received ${JSON.stringify(this.axis)}`)}else throw new Error(`Expected axis to be an integer or an array of integers, but received ${JSON.stringify(this.axis)}`);this.epsilon=e.epsilon==null?.001:e.epsilon,this.center=e.center==null?!0:e.center,this.scale=e.scale==null?!0:e.scale,this.betaInitializer=Mt(e.betaInitializer||"zeros"),this.gammaInitializer=Mt(e.gammaInitializer||"ones"),this.betaRegularizer=Ft(e.betaRegularizer),this.gammaRegularizer=Ft(e.gammaRegularizer),this.supportsMasking=!0}build(e){e=it(e);const n=e.length;typeof this.axis=="number"&&(this.axis=[this.axis]);for(let s=0;s<this.axis.length;++s)this.axis[s]<0&&(this.axis[s]+=n);for(const s of this.axis)if(s<0||s>=n)throw new Error(`Invalid axis: ${s}`);if(this.axis.length!==ol(this.axis).length)throw new Error(`Found duplicate axes in: ${this.axis}`);const r=this.axis.map(s=>e[s]),o=!0;this.scale?this.gamma=this.addWeight("gamma",r,"float32",this.gammaInitializer,this.gammaRegularizer,o):this.gamma=null,this.center?this.beta=this.addWeight("beta",r,"float32",this.betaInitializer,this.betaRegularizer,o):this.beta=null,this.built=!0}call(e,n){const r=Me(e),o=r.shape,s=o.length;return Y(()=>{let{mean:a,variance:l}=XA(r,this.axis,!0);const c=Xc(1,s);for(const m of this.axis)c[m]=o[m];const u=m=>m!=null&&m.shape.length!==s?q(m,c):m;let d=this.scale?u(this.gamma.read()):null,f=this.center?u(this.beta.read()):null;const h=[],p=[];for(let m=0;m<s;++m)this.axis.indexOf(m)!==-1?(h.push(o[m]),p.push(1)):(h.push(1),p.push(o[m]));return a=Ss(a,h),l=Ss(l,h),d!=null&&(d=Ss(d,p)),f!=null&&(f=Ss(f,p)),Rm(r,a,l,f,d,this.epsilon)})}getConfig(){const e={axis:this.axis,epsilon:this.epsilon,center:this.center,scale:this.scale,betaInitializer:zt(this.betaInitializer),gammaInitializer:zt(this.gammaInitializer),betaRegularizer:wt(this.betaRegularizer),gammaRegularizer:wt(this.gammaRegularizer)},n=super.getConfig();return Object.assign(e,n),e}}D9.className="LayerNormalization";ue(D9);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function rGe(t,e,n){return Y(()=>{if(t.rank!==4)throw new W(`temporalPadding expects input tensor to be 4-D, but received a ${t.rank}-D tensor.`);if(e==null&&(e=[[1,1],[1,1]]),e.length!==2||e[0].length!==2||e[1].length!==2)throw new W("spatial2dPadding expects `padding` to be an Array of two Arrays, each of which is an Array of two integers.");if(n==null&&(n=Rs()),n!=="channelsLast"&&n!=="channelsFirst")throw new W(`Unknown data format: ${n}. Supported data formats are 'channelsLast' and 'channelsFirst.`);let r;return n==="channelsFirst"?r=[[0,0],[0,0],e[0],e[1]]:r=[[0,0],e[0],e[1],[0,0]],YA(t,r)})}class M9 extends Ke{constructor(e){if(e==null&&(e={}),super(e),this.dataFormat=e.dataFormat==null?Rs():e.dataFormat,e.padding==null)this.padding=[[1,1],[1,1]];else if(typeof e.padding=="number")this.padding=[[e.padding,e.padding],[e.padding,e.padding]];else{if(e.padding=e.padding,e.padding.length!==2)throw new W(`ZeroPadding2D expects padding to be a length-2 array, but received a length-${e.padding.length} array.`);let n,r;if(typeof e.padding[0]=="number")n=[e.padding[0],e.padding[0]],r=[e.padding[1],e.padding[1]];else{if(e.padding=e.padding,e.padding[0].length!==2)throw new W(`ZeroPadding2D expects height padding to be a length-2 array, but received a length-${e.padding[0].length} array.`);if(n=e.padding[0],e.padding[1].length!==2)throw new W(`ZeroPadding2D expects width padding to be a length-2 array, but received a length-${e.padding[1].length} array.`);r=e.padding[1]}this.padding=[n,r]}this.inputSpec=[new mn({ndim:4})]}computeOutputShape(e){e=it(e);let n,r;return this.dataFormat==="channelsFirst"?(e[2]!=null&&e[2]>=0?n=e[2]+this.padding[0][0]+this.padding[0][1]:n=null,e[3]!=null&&e[3]>=0?r=e[3]+this.padding[1][0]+this.padding[1][1]:r=null,[e[0],e[1],n,r]):(e[1]!=null&&e[1]>=0?n=e[1]+this.padding[0][0]+this.padding[0][1]:n=null,e[2]!=null&&e[2]>=0?r=e[2]+this.padding[1][0]+this.padding[1][1]:r=null,[e[0],n,r,e[3]])}call(e,n){return Y(()=>rGe(Me(e),this.padding,this.dataFormat))}getConfig(){const e={padding:this.padding,dataFormat:this.dataFormat},n=super.getConfig();return Object.assign(e,n),e}}M9.className="ZeroPadding2D";ue(M9);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function aS(t,e,n,r,o,s){return Y(()=>{rn(o),Z8(s),wo(r),n==null&&(n=[1,1]),r==null&&(r="valid"),o==null&&(o=Rs()),s==null&&(s="max"),t=iP(t,o);let i;const a=r==="same"?"same":"valid";return s==="max"?i=qA(t,e,n,a):i=LA(t,e,n,a),o==="channelsFirst"&&(i=nt(i,[0,3,1,2])),i})}function F9(t,e,n,r,o,s){return Y(()=>{rn(o),Z8(s),wo(r),n==null&&(n=[1,1,1]),r==null&&(r="valid"),o==null&&(o=Rs()),s==null&&(s="max"),t=e9(t,o);let i;const a=r==="same"?"same":"valid";return s==="max"?i=w3e(t,e,n,a):i=CLe(t,e,n,a),o==="channelsFirst"&&(i=nt(i,[0,4,1,2,3])),i})}class L9 extends Ke{constructor(e){if(e.poolSize==null&&(e.poolSize=2),super(e),typeof e.poolSize=="number")this.poolSize=[e.poolSize];else if(Array.isArray(e.poolSize)&&e.poolSize.length===1&&typeof e.poolSize[0]=="number")this.poolSize=e.poolSize;else throw new W(`poolSize for 1D convolutional layer must be a number or an Array of a single number, but received ${JSON.stringify(e.poolSize)}`);if(En(this.poolSize,"poolSize"),e.strides==null)this.strides=this.poolSize;else if(typeof e.strides=="number")this.strides=[e.strides];else if(Array.isArray(e.strides)&&e.strides.length===1&&typeof e.strides[0]=="number")this.strides=e.strides;else throw new W(`strides for 1D convolutional layer must be a number or an Array of a single number, but received ${JSON.stringify(e.strides)}`);En(this.strides,"strides"),this.padding=e.padding==null?"valid":e.padding,wo(this.padding),this.inputSpec=[new mn({ndim:3})]}computeOutputShape(e){e=it(e);const n=Es(e[1],this.poolSize[0],this.padding,this.strides[0]);return[e[0],n,e[2]]}call(e,n){return Y(()=>{this.invokeCallHook(e,n),e=vy(Me(e),2);const r=this.poolingFunction(Me(e),[this.poolSize[0],1],[this.strides[0],1],this.padding,"channelsLast");return fy(r,[2])})}getConfig(){const e={poolSize:this.poolSize,padding:this.padding,strides:this.strides},n=super.getConfig();return Object.assign(e,n),e}}class j9 extends L9{constructor(e){super(e)}poolingFunction(e,n,r,o,s){return rn(s),wo(o),aS(e,n,r,o,s,"max")}}j9.className="MaxPooling1D";ue(j9);class B9 extends L9{constructor(e){super(e)}poolingFunction(e,n,r,o,s){return rn(s),wo(o),aS(e,n,r,o,s,"avg")}}B9.className="AveragePooling1D";ue(B9);class z9 extends Ke{constructor(e){if(e.poolSize==null&&(e.poolSize=[2,2]),super(e),this.poolSize=Array.isArray(e.poolSize)?e.poolSize:[e.poolSize,e.poolSize],e.strides==null)this.strides=this.poolSize;else if(Array.isArray(e.strides)){if(e.strides.length!==2)throw new W(`If the strides property of a 2D pooling layer is an Array, it is expected to have a length of 2, but received length ${e.strides.length}.`);this.strides=e.strides}else this.strides=[e.strides,e.strides];En(this.poolSize,"poolSize"),En(this.strides,"strides"),this.padding=e.padding==null?"valid":e.padding,this.dataFormat=e.dataFormat==null?"channelsLast":e.dataFormat,rn(this.dataFormat),wo(this.padding),this.inputSpec=[new mn({ndim:4})]}computeOutputShape(e){e=it(e);let n=this.dataFormat==="channelsFirst"?e[2]:e[1],r=this.dataFormat==="channelsFirst"?e[3]:e[2];return n=Es(n,this.poolSize[0],this.padding,this.strides[0]),r=Es(r,this.poolSize[1],this.padding,this.strides[1]),this.dataFormat==="channelsFirst"?[e[0],e[1],n,r]:[e[0],n,r,e[3]]}call(e,n){return Y(()=>(this.invokeCallHook(e,n),this.poolingFunction(Me(e),this.poolSize,this.strides,this.padding,this.dataFormat)))}getConfig(){const e={poolSize:this.poolSize,padding:this.padding,strides:this.strides,dataFormat:this.dataFormat},n=super.getConfig();return Object.assign(e,n),e}}class W9 extends z9{constructor(e){super(e)}poolingFunction(e,n,r,o,s){return rn(s),wo(o),aS(e,n,r,o,s,"max")}}W9.className="MaxPooling2D";ue(W9);class V9 extends z9{constructor(e){super(e)}poolingFunction(e,n,r,o,s){return rn(s),wo(o),aS(e,n,r,o,s,"avg")}}V9.className="AveragePooling2D";ue(V9);class U9 extends Ke{constructor(e){if(e.poolSize==null&&(e.poolSize=[2,2,2]),super(e),this.poolSize=Array.isArray(e.poolSize)?e.poolSize:[e.poolSize,e.poolSize,e.poolSize],e.strides==null)this.strides=this.poolSize;else if(Array.isArray(e.strides)){if(e.strides.length!==3)throw new W(`If the strides property of a 3D pooling layer is an Array, it is expected to have a length of 3, but received length ${e.strides.length}.`);this.strides=e.strides}else this.strides=[e.strides,e.strides,e.strides];En(this.poolSize,"poolSize"),En(this.strides,"strides"),this.padding=e.padding==null?"valid":e.padding,this.dataFormat=e.dataFormat==null?"channelsLast":e.dataFormat,rn(this.dataFormat),wo(this.padding),this.inputSpec=[new mn({ndim:5})]}computeOutputShape(e){e=it(e);let n=this.dataFormat==="channelsFirst"?e[2]:e[1],r=this.dataFormat==="channelsFirst"?e[3]:e[2],o=this.dataFormat==="channelsFirst"?e[4]:e[3];return n=Es(n,this.poolSize[0],this.padding,this.strides[0]),r=Es(r,this.poolSize[1],this.padding,this.strides[1]),o=Es(o,this.poolSize[2],this.padding,this.strides[2]),this.dataFormat==="channelsFirst"?[e[0],e[1],n,r,o]:[e[0],n,r,o,e[4]]}call(e,n){return Y(()=>(this.invokeCallHook(e,n),this.poolingFunction(Me(e),this.poolSize,this.strides,this.padding,this.dataFormat)))}getConfig(){const e={poolSize:this.poolSize,padding:this.padding,strides:this.strides,dataFormat:this.dataFormat},n=super.getConfig();return Object.assign(e,n),e}}class G9 extends U9{constructor(e){super(e)}poolingFunction(e,n,r,o,s){return rn(s),wo(o),F9(e,n,r,o,s,"max")}}G9.className="MaxPooling3D";ue(G9);class H9 extends U9{constructor(e){super(e)}poolingFunction(e,n,r,o,s){return rn(s),wo(o),F9(e,n,r,o,s,"avg")}}H9.className="AveragePooling3D";ue(H9);class K9 extends Ke{constructor(e){super(e),this.inputSpec=[new mn({ndim:3})]}computeOutputShape(e){return[e[0],e[2]]}call(e,n){throw new We}}class q9 extends K9{constructor(e){super(e||{})}call(e,n){return Y(()=>{const r=Me(e);return cn(r,1)})}}q9.className="GlobalAveragePooling1D";ue(q9);class X9 extends K9{constructor(e){super(e||{})}call(e,n){return Y(()=>{const r=Me(e);return Is(r,1)})}}X9.className="GlobalMaxPooling1D";ue(X9);class Y9 extends Ke{constructor(e){super(e),this.dataFormat=e.dataFormat==null?"channelsLast":e.dataFormat,rn(this.dataFormat),this.inputSpec=[new mn({ndim:4})]}computeOutputShape(e){return e=e,this.dataFormat==="channelsLast"?[e[0],e[3]]:[e[0],e[1]]}call(e,n){throw new We}getConfig(){const e={dataFormat:this.dataFormat},n=super.getConfig();return Object.assign(e,n),e}}class Q9 extends Y9{call(e,n){return Y(()=>{const r=Me(e);return this.dataFormat==="channelsLast"?cn(r,[1,2]):cn(r,[2,3])})}}Q9.className="GlobalAveragePooling2D";ue(Q9);class Z9 extends Y9{call(e,n){return Y(()=>{const r=Me(e);return this.dataFormat==="channelsLast"?Is(r,[1,2]):Is(r,[2,3])})}}Z9.className="GlobalMaxPooling2D";ue(Z9);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class J9 extends Ke{constructor(e){super(e),this.layer=e.layer}build(e){this.built=!0}get trainable(){return this.layer!=null?this.layer.trainable:!1}set trainable(e){this.layer!=null&&(this.layer.trainable=e)}get trainableWeights(){return this.layer.trainableWeights}get nonTrainableWeights(){return this.layer.nonTrainableWeights}get updates(){return this.layer._updates}get losses(){return this.layer.losses}getWeights(){return this.layer.getWeights()}setWeights(e){this.layer.setWeights(e)}getConfig(){const e={layer:{className:this.layer.getClassName(),config:this.layer.getConfig()}},n=super.getConfig();return Object.assign(e,n),e}setFastWeightInitDuringBuild(e){super.setFastWeightInitDuringBuild(e),this.layer!=null&&this.layer.setFastWeightInitDuringBuild(e)}static fromConfig(e,n,r={}){const o=n.layer,s=Vi(o,r);delete n.layer;const i={layer:s};return Object.assign(i,n),new e(i)}}class eY extends J9{constructor(e){super(e),this.supportsMasking=!0}build(e){if(e=it(e),e.length<3)throw new W(`TimeDistributed layer expects an input shape >= 3D, but received input shape ${JSON.stringify(e)}`);this.inputSpec=[{shape:e}];const n=[e[0]].concat(e.slice(2));this.layer.built||(this.layer.build(n),this.layer.built=!0),super.build(e)}computeOutputShape(e){e=it(e);const n=[e[0]].concat(e.slice(2)),r=this.layer.computeOutputShape(n),o=e[1];return[r[0],o].concat(r.slice(1))}call(e,n){return Y(()=>(e=Me(e),c9((i,a)=>[Me(this.layer.call(i,n)),[]],e,[],!1,null,null,!1,!0)[1]))}}eY.className="TimeDistributed";ue(eY);function oGe(t){pu(kVe,"BidirectionalMergeMode",t)}const sGe="concat";class tY extends J9{constructor(e){super(e);const n=e.layer.getConfig(),r={};r.className=e.layer.getClassName(),r.config=n,this.forwardLayer=Vi(r),n.goBackwards=n.goBackwards!==!0;const o={};if(o.className=e.layer.getClassName(),o.config=n,this.backwardLayer=Vi(o),this.forwardLayer.name="forward_"+this.forwardLayer.name,this.backwardLayer.name="backward_"+this.backwardLayer.name,this.mergeMode=e.mergeMode===void 0?sGe:e.mergeMode,oGe(this.mergeMode),e.weights)throw new We("weights support is not implemented for Bidirectional layer yet.");this._stateful=e.layer.stateful,this.returnSequences=e.layer.returnSequences,this.returnState=e.layer.returnState,this.supportsMasking=!0,this._trainable=!0,this.inputSpec=e.layer.inputSpec,this.numConstants=null}get trainable(){return this._trainable}set trainable(e){this._trainable=e,this.forwardLayer!=null&&(this.forwardLayer.trainable=e),this.backwardLayer!=null&&(this.backwardLayer.trainable=e)}getWeights(){return this.forwardLayer.getWeights().concat(this.backwardLayer.getWeights())}setWeights(e){const n=e.length,r=Math.floor(n/2);this.forwardLayer.setWeights(e.slice(0,r)),this.backwardLayer.setWeights(e.slice(r))}computeOutputShape(e){let n=this.forwardLayer.computeOutputShape(e);Array.isArray(n)&&Array.isArray(n[0])||(n=[n]),n=n;let r,o,s;return this.returnState&&(s=n.slice(1)),r=n[0],r=r,this.mergeMode==="concat"?(r[r.length-1]*=2,o=[r]):this.mergeMode==null?o=[r,r.slice()]:o=[r],this.returnState?this.mergeMode==null?o.concat(s).concat(s.slice()):[r].concat(s).concat(s.slice()):$r(o)}apply(e,n){let r=n==null?null:n.initialState,o=n==null?null:n.constants;n==null&&(n={});const s=l9(e,r,o,this.numConstants);if(e=s.inputs,r=s.initialState,o=s.constants,Array.isArray(e)&&(r=e.slice(1),e=e[0]),(r==null||r.length===0)&&o==null)return super.apply(e,n);const i=[],a=[];if(r!=null){const c=r.length;if(c%2>0)throw new W("When passing `initialState` to a Bidrectional RNN, the state should be an Array containing the states of the underlying RNNs.");n.initialState=r,i.push(...r);const u=r.map(d=>new mn({shape:d.shape}));this.forwardLayer.stateSpec=u.slice(0,c/2),this.backwardLayer.stateSpec=u.slice(c/2),a.push(...u)}if(o!=null)throw new We("Support for constants in Bidirectional layers is not implemented yet.");const l=i[0]instanceof yi;for(const c of i)if(c instanceof yi!==l)throw new W("The initial state of a Bidirectional layer cannot be specified as a mix of symbolic and non-symbolic tensors");if(l){const c=[e].concat(i),u=this.inputSpec.concat(a),d=this.inputSpec;this.inputSpec=u;const f=super.apply(c,n);return this.inputSpec=d,f}else return super.apply(e,n)}call(e,n){return Y(()=>{const r=n.initialState;let o,s;if(r==null)o=this.forwardLayer.call(e,n),s=this.backwardLayer.call(e,n);else{const l=r.slice(0,r.length/2),c=r.slice(r.length/2);o=this.forwardLayer.call(e,Object.assign(n,{initialState:l})),s=this.backwardLayer.call(e,Object.assign(n,{initialState:c}))}let i;this.returnState&&(Array.isArray(o)&&(i=o.slice(1).concat(s.slice(1))),o=o[0],s=s[0]),this.returnSequences&&(s=Kc(s,1));let a;return this.mergeMode==="concat"?a=KO([o,s]):this.mergeMode==="sum"?a=de(o,s):this.mergeMode==="ave"?a=U(.5,de(o,s)):this.mergeMode==="mul"?a=U(o,s):this.mergeMode==null&&(a=[o,s]),this.returnState?this.mergeMode==null?a.concat(i):[a].concat(i):a})}resetStates(e){this.forwardLayer.resetStates(),this.backwardLayer.resetStates()}build(e){Sc(this.forwardLayer.name,()=>{this.forwardLayer.build(e)}),Sc(this.backwardLayer.name,()=>{this.backwardLayer.build(e)}),this.built=!0}computeMask(e,n){Array.isArray(n)&&(n=n[0]);let r;if(this.returnSequences?this.mergeMode==null?r=[n,n]:r=n:this.mergeMode==null?r=[null,null]:r=null,this.returnState){const s=this.forwardLayer.states.map(i=>null);return Array.isArray(r)?r.concat(s).concat(s):[r].concat(s).concat(s)}else return r}get trainableWeights(){return this.forwardLayer.trainableWeights.concat(this.backwardLayer.trainableWeights)}get nonTrainableWeights(){return this.forwardLayer.nonTrainableWeights.concat(this.backwardLayer.nonTrainableWeights)}setFastWeightInitDuringBuild(e){super.setFastWeightInitDuringBuild(e),this.forwardLayer!=null&&this.forwardLayer.setFastWeightInitDuringBuild(e),this.backwardLayer!=null&&this.backwardLayer.setFastWeightInitDuringBuild(e)}getConfig(){const e={mergeMode:this.mergeMode},n=super.getConfig();return Object.assign(e,n),e}static fromConfig(e,n){const r=Vi(n.layer);if(delete n.layer,n.numConstants!=null)throw new We("Deserialization of a Bidirectional layer with numConstants present is not supported yet.");const o=n;return o.layer=r,new e(o)}}tY.className="Bidirectional";ue(tY);/**
 * @license
 * Copyright 2022 CodeSmith LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class nY extends Ke{constructor(e){super(e),this.scale=e.scale,e.offset?this.offset=e.offset:this.offset=0}getConfig(){const e={scale:this.scale,offset:this.offset},n=super.getConfig();return Object.assign(e,n),e}call(e,n){return Y(()=>(e=Me(e),e.dtype!=="float32"&&(e=ui(e,"float32")),de(U(e,this.scale),this.offset)))}}nY.className="Rescaling";ue(nY);/**
 * @license
 * Copyright 2022 CodeSmith LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const{resizeBilinear:iGe,cropAndResize:aGe}=Di;class rY extends Ke{constructor(e){super(e),this.height=e.height,this.width=e.width}centerCrop(e,n,r,o,s,i,a,l){return Y(()=>{let c,u=!1;const d=n/i,f=r/a,h=(o+n)/i,p=(s+r)/a,m=[d,f,h,p],g=[];e.rank===3?(u=!0,c=na([e])):c=e;for(let w=0;w<c.shape[0];w++)g.push(m);const y=xq(g,[g.length,4]),v=Nm(0,g.length,1,"int32"),b=aGe(c,y,v,[o,s],"nearest");return ui(u?Me(qc(b)):b,l)})}upsize(e,n,r,o){return Y(()=>{const s=iGe(e,[n,r]);return ui(s,o)})}call(e,n){return Y(()=>{const r=Me(e),o=r.dtype,s=r.shape,i=s[s.length-3],a=s[s.length-2];let l=0;i!==this.height&&(l=Math.floor((i-this.height)/2));let c=0;return a!==this.width&&(c=Math.floor((a-this.width)/2),c===0&&(c=1)),l>=0&&c>=0?this.centerCrop(r,l,c,this.height,this.width,i,a,o):this.upsize(e,this.height,this.width,o)})}getConfig(){const e={height:this.height,width:this.width},n=super.getConfig();return Object.assign(e,n),e}computeOutputShape(e){e=it(e);const n=e.length-3,r=e.length-2;return e[n]=this.height,e[r]=this.width,e}}rY.className="CenterCrop";ue(rY);/**
 * @license
 * Copyright 2022 CodeSmith LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function lGe(t,e,n,r){let o=Me(t);if(o.dtype!=="int32"&&(o=ui(o,"int32")),e==="int")return o;const s=o.shape;if(o.rank===0&&(o=Cr(o,-1)),e==="oneHot"&&o.shape[o.shape.length-1]!==1&&(o=Cr(o,-1)),o.rank>2)throw new W(`When outputMode is not int, maximum output rank is 2 Received outputMode ${e} and input shape ${s} which would result in output rank ${o.rank}.`);const i=["multiHot","oneHot"].includes(e),a=o;let l;if(typeof r<"u"&&e==="count"?l=nj(a,r,n,i):l=nj(a,[],n,i),e!=="tfIdf")return l;if(r)return U(l,r);throw new W("When outputMode is 'tfIdf', weights must be provided.")}/**
 * @license
 * Copyright 2022 CodeSmith LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class oY extends Ke{constructor(e){super(e),this.numTokens=e.numTokens,e.outputMode?this.outputMode=e.outputMode:this.outputMode="multiHot"}getConfig(){const e={numTokens:this.numTokens,outputMode:this.outputMode},n=super.getConfig();return Object.assign(e,n),e}computeOutputShape(e){return e=it(e),e==null?[this.numTokens]:this.outputMode==="oneHot"&&e[e.length-1]!==1?(e.push(this.numTokens),e):(e[e.length-1]=this.numTokens,e)}call(e,n){return Y(()=>{e=Me(e),e.dtype!=="int32"&&(e=ui(e,"int32"));let r;if(typeof n.countWeights<"u"){if(this.outputMode!=="count")throw new W(`countWeights is not used when outputMode !== count.
              Received countWeights=${n.countWeights}`);r=Me(n.countWeights)}const o=Is(e),s=Wb(e),i=bo(this.numTokens,o).bufferSync().get(0),a=uu(s,0).bufferSync().get(0);if(!(i&&a))throw new W(`Input values must be between 0 < values <= numTokens with numTokens=${this.numTokens}`);return lGe(e,this.outputMode,this.numTokens,r)})}}oY.className="CategoryEncoding";ue(oY);/**
 * @license
 * Copyright 2022 CodeSmith LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const cGe=["bilinear","nearest"],Dj=new Set(cGe);class sY extends Ke{constructor(e){if(super(e),this.height=e.height,this.width=e.width,e.interpolation)if(Dj.has(e.interpolation))this.interpolation=e.interpolation;else throw new W(`Invalid interpolation parameter: ${e.interpolation} is not implemented`);else this.interpolation="bilinear";this.cropToAspectRatio=!!e.cropToAspectRatio}computeOutputShape(e){e=it(e);const n=e[2];return[this.height,this.width,n]}getConfig(){const e={height:this.height,width:this.width,interpolation:this.interpolation,cropToAspectRatio:this.cropToAspectRatio},n=super.getConfig();return Object.assign(e,n),e}call(e,n){return Y(()=>{const r=[this.height,this.width];if(this.interpolation==="bilinear")return Di.resizeBilinear(e,r,!this.cropToAspectRatio);if(this.interpolation==="nearest")return Di.resizeNearestNeighbor(e,r,!this.cropToAspectRatio);throw new Error(`Interpolation is ${this.interpolation} but only ${[...Dj]} are supported`)})}}sY.className="Resizing";ue(sY);/**
 * @license
 * Copyright 2023 CodeSmith LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class iY{constructor(e){this.seed=e}next(){if(this.seed!==void 0)return this.seed++}}iY.className="RandomSeed";/**
 * @license
 * Copyright 2023 CodeSmith LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class aY extends Ke{constructor(e){super(e),this.randomGenerator=new iY(e.seed)}getConfig(){const e={seed:this.randomGenerator.seed},n=super.getConfig();return Object.assign(e,n),e}}aY.className="BaseRandomLayer";/**
 * @license
 * Copyright 2023 CodeSmith LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const uGe=["bilinear","nearest"],Mj=new Set(uGe);class lY extends aY{constructor(e){super(e);const{factor:n,interpolation:r="bilinear"}=e;if(this.factor=n,Array.isArray(this.factor)&&this.factor.length===2)this.widthLower=this.factor[0],this.widthUpper=this.factor[1];else if(!Array.isArray(this.factor)&&this.factor>0)this.widthLower=-this.factor,this.widthUpper=this.factor;else throw new W(`Invalid factor: ${this.factor}. Must be positive number or tuple of 2 numbers`);if(this.widthLower<-1||this.widthUpper<-1)throw new W(`factor must have values larger than -1. Got: ${this.factor}`);if(this.widthUpper<this.widthLower)throw new W(`factor cannot have upper bound less than lower bound.
        Got upper bound: ${this.widthUpper}.
        Got lower bound: ${this.widthLower}
      `);if(r)if(Mj.has(r))this.interpolation=r;else throw new W(`Invalid interpolation parameter: ${r} is not implemented`)}getConfig(){const e={factor:this.factor,interpolation:this.interpolation},n=super.getConfig();return Object.assign(e,n),e}computeOutputShape(e){e=it(e);const n=e[2];return[this.imgHeight,-1,n]}call(e,n){return Y(()=>{const r=Me(e);this.imgHeight=r.shape[r.shape.length-3];const o=r.shape[r.shape.length-2];this.widthFactor=dy([1],1+this.widthLower,1+this.widthUpper,"float32",this.randomGenerator.next());let s=this.widthFactor.dataSync()[0]*o;s=Math.round(s);const i=[this.imgHeight,s];switch(this.interpolation){case"bilinear":return Di.resizeBilinear(e,i);case"nearest":return Di.resizeNearestNeighbor(e,i);default:throw new Error(`Interpolation is ${this.interpolation}
          but only ${[...Mj]} are supported`)}})}}lY.className="RandomWidth";ue(lY);/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const dGe=ee();dGe.registerFlag("KEEP_INTERMEDIATE_TENSORS",()=>!1,t=>{t&&console.warn("Keep intermediate tensors is ON. This will print the values of all intermediate tensors during model inference. Not all models support this mode. For details, check e2e/benchmarks/ model_config.js. This significantly impacts performance.")});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * =============================================================================
 */var Fj;(function(t){t[t.DT_INVALID=0]="DT_INVALID",t[t.DT_FLOAT=1]="DT_FLOAT",t[t.DT_DOUBLE=2]="DT_DOUBLE",t[t.DT_INT32=3]="DT_INT32",t[t.DT_UINT8=4]="DT_UINT8",t[t.DT_INT16=5]="DT_INT16",t[t.DT_INT8=6]="DT_INT8",t[t.DT_STRING=7]="DT_STRING",t[t.DT_COMPLEX64=8]="DT_COMPLEX64",t[t.DT_INT64=9]="DT_INT64",t[t.DT_BOOL=10]="DT_BOOL",t[t.DT_QINT8=11]="DT_QINT8",t[t.DT_QUINT8=12]="DT_QUINT8",t[t.DT_QINT32=13]="DT_QINT32",t[t.DT_BFLOAT16=14]="DT_BFLOAT16",t[t.DT_QINT16=15]="DT_QINT16",t[t.DT_QUINT16=16]="DT_QUINT16",t[t.DT_UINT16=17]="DT_UINT16",t[t.DT_COMPLEX128=18]="DT_COMPLEX128",t[t.DT_HALF=19]="DT_HALF",t[t.DT_RESOURCE=20]="DT_RESOURCE",t[t.DT_VARIANT=21]="DT_VARIANT",t[t.DT_UINT32=22]="DT_UINT32",t[t.DT_UINT64=23]="DT_UINT64",t[t.DT_FLOAT_REF=101]="DT_FLOAT_REF",t[t.DT_DOUBLE_REF=102]="DT_DOUBLE_REF",t[t.DT_INT32_REF=103]="DT_INT32_REF",t[t.DT_UINT8_REF=104]="DT_UINT8_REF",t[t.DT_INT16_REF=105]="DT_INT16_REF",t[t.DT_INT8_REF=106]="DT_INT8_REF",t[t.DT_STRING_REF=107]="DT_STRING_REF",t[t.DT_COMPLEX64_REF=108]="DT_COMPLEX64_REF",t[t.DT_INT64_REF=109]="DT_INT64_REF",t[t.DT_BOOL_REF=110]="DT_BOOL_REF",t[t.DT_QINT8_REF=111]="DT_QINT8_REF",t[t.DT_QUINT8_REF=112]="DT_QUINT8_REF",t[t.DT_QINT32_REF=113]="DT_QINT32_REF",t[t.DT_BFLOAT16_REF=114]="DT_BFLOAT16_REF",t[t.DT_QINT16_REF=115]="DT_QINT16_REF",t[t.DT_QUINT16_REF=116]="DT_QUINT16_REF",t[t.DT_UINT16_REF=117]="DT_UINT16_REF",t[t.DT_COMPLEX128_REF=118]="DT_COMPLEX128_REF",t[t.DT_HALF_REF=119]="DT_HALF_REF",t[t.DT_RESOURCE_REF=120]="DT_RESOURCE_REF",t[t.DT_VARIANT_REF=121]="DT_VARIANT_REF",t[t.DT_UINT32_REF=122]="DT_UINT32_REF",t[t.DT_UINT64_REF=123]="DT_UINT64_REF"})(Fj||(Fj={}));var Lj;(function(t){(function(e){e[e.LEGACY=0]="LEGACY",e[e.V1=1]="V1",e[e.V2=2]="V2"})(t.CheckpointFormatVersion||(t.CheckpointFormatVersion={}))})(Lj||(Lj={}));/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * =============================================================================
 */var jj;(function(t){t[t.FAIL=0]="FAIL",t[t.SHORTEST=1]="SHORTEST",t[t.LONGEST=2]="LONGEST"})(jj||(jj={}));/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ce(t,e){Array.isArray(t)||(t=[t]),t.forEach(n=>{n!=null&&M(n.dtype!=="complex64",()=>`${e} does not support complex64 tensors in the CPU backend.`)})}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const fGe=o8;class lS extends z2{nextDataId(){return lS.nextDataId++}constructor(){super(),this.blockSize=48,this.firstUse=!0,this.data=new CK(this,Ws())}write(e,n,r){this.firstUse&&(this.firstUse=!1,ee().get("IS_NODE")&&lo(`
============================
Hi, looks like you are running TensorFlow.js in Node.js. To speed things up dramatically, install our node backend, visit https://github.com/tensorflow/tfjs-node for more details. 
============================`));const o={id:this.nextDataId()};return this.data.set(o,{values:e,dtype:r,refCount:1}),o}makeTensorInfo(e,n,r){let o;if(n==="string"&&r!=null&&r.length>0&&hg(r[0])){const s=r.map(i=>rl(i));o=this.write(s,e,n)}else o=this.write(r,e,n);return{dataId:o,shape:e,dtype:n}}refCount(e){return this.data.has(e)?this.data.get(e).refCount:0}incRef(e){const n=this.data.get(e);n.refCount++}decRef(e){if(this.data.has(e)){const n=this.data.get(e);n.refCount--}}move(e,n,r,o,s){this.data.set(e,{values:n,dtype:o,refCount:s})}numDataIds(){return this.data.numDataIds()}async read(e){return this.readSync(e)}readSync(e){const{dtype:n,complexTensorInfos:r}=this.data.get(e);if(n==="complex64"){const o=this.readSync(r.real.dataId),s=this.readSync(r.imag.dataId);return ra(o,s)}return FMe(this.data.get(e).values,n)}bufferSync(e){const n=this.readSync(e.dataId);if(e.dtype==="string")try{const r=n.map(o=>fl(o));return Ge(e.shape,e.dtype,r)}catch{throw new Error("Failed to decode encoded string bytes into utf-8")}return Ge(e.shape,e.dtype,n)}makeOutput(e,n,r){return Ws().makeTensorFromTensorInfo(this.makeTensorInfo(n,r,e),this)}disposeData(e,n=!1){if(this.data.has(e)){if(this.data.get(e).refCount--,!n&&this.data.get(e).refCount>0)return!1;const{complexTensorInfos:r}=this.data.get(e);r!=null&&(this.disposeData(r.real.dataId,!0),this.disposeData(r.imag.dataId,!0)),this.data.delete(e)}return!0}disposeIntermediateTensorInfo(e){this.disposeData(e.dataId)}async time(e){const n=Sr();return e(),{kernelMs:Sr()-n}}memory(){return{unreliable:!0,reasons:["The reported memory is an upper bound. Due to automatic garbage collection, the true allocated memory may be less."]}}where(e){Ce([e],"where");const n=this.readSync(e.dataId);return fGe(e.shape,n)}dispose(){}floatPrecision(){return 32}epsilon(){return super.epsilon()}}lS.nextDataId=0;/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cY(t){const e=new Float32Array(t.length);for(let n=0;n<t.length;++n)e[n]=Math.abs(t[n]);return e}const hGe=t=>{const{x:e}=t.inputs,n=t.backend;Ce(e,"abs");let r=new Float32Array(ne(e.shape));const o=n.data.get(e.dataId).values;return r=cY(o),n.makeOutput(r,e.shape,e.dtype)},pGe={kernelName:jw,backendName:"cpu",kernelFunc:hGe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function on(t){return(e,n,r,o,s)=>{const i=Be(e,n),a=i.length,l=Ie(i),c=ne(i),u=qn(s,c),d=e.length,f=n.length,h=Ie(e),p=Ie(n),m=pf(e,i),g=pf(n,i);if(m.length+g.length===0)for(let y=0;y<u.length;++y)u[y]=t(r[y%r.length],o[y%o.length]);else for(let y=0;y<u.length;++y){const v=Hf(y,a,l),x=v.slice(-d);m.forEach($=>x[$]=0);const b=ai(x,d,h),w=v.slice(-f);g.forEach($=>w[$]=0);const C=ai(w,f,p);u[y]=t(r[b],o[C])}return[u,i]}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Wr(t){const{inputs:e,backend:n}=t,{real:r,imag:o}=e,s=n.data.get(r.dataId).values,i=n.data.get(o.dataId).values,a=n.makeTensorInfo(r.shape,"complex64"),l=n.data.get(a.dataId);return l.complexTensorInfos={real:n.makeTensorInfo(r.shape,"float32",s),imag:n.makeTensorInfo(o.shape,"float32",i)},a}const mGe={kernelName:eA,backendName:"cpu",kernelFunc:Wr};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function n0(t,e,n="float32"){if(n==="complex64"){const o=n0(t,e,"float32"),s=n0(t,e,"float32");return Wr({inputs:{real:o,imag:s},backend:t})}const r=Xn(ne(e),n);return t.makeTensorInfo(e,n,r)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vi(t){const{inputs:e,backend:n}=t,{x:r}=e;return n.incRef(r.dataId),{dataId:r.dataId,shape:r.shape,dtype:r.dtype}}const gGe={kernelName:_g,backendName:"cpu",kernelFunc:vi};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Yc(t){const{inputs:e,backend:n}=t,{input:r}=e,o=n.data.get(r.dataId).complexTensorInfos.real,s=n.data.get(o.dataId).values;return n.makeTensorInfo(o.shape,o.dtype,s)}const yGe={kernelName:$A,backendName:"cpu",kernelFunc:Yc};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function uY(t,e,n,r){if(r==="int32"){const o=Int32Array.from(t);return[e,"int32",o]}if(r==="bool"){const o=cu([0],n),[s,i]=on((a,l)=>a!==l?1:0)(e,[],t,o,"bool");return[i,"bool",s]}throw new Error(`Error in Cast: failed to cast ${n} to ${r}`)}function yl(t){const{inputs:e,backend:n,attrs:r}=t,{x:o}=e,{dtype:s}=r;if(s==="complex64"){if(o.dtype==="complex64")return vi({inputs:{x:o},backend:n});const u=n0(n,o.shape,o.dtype),d=yl({inputs:{x:o},backend:n,attrs:{dtype:"float32"}}),f=Wr({inputs:{real:d,imag:u},backend:n});return n.disposeIntermediateTensorInfo(u),n.disposeIntermediateTensorInfo(d),f}if(o.dtype==="complex64"){const u=Yc({inputs:{input:o},backend:n}),d=yl({inputs:{x:u},backend:n,attrs:{dtype:s}});return n.disposeIntermediateTensorInfo(u),d}if(!TK(o.dtype,s)){const u=vi({inputs:{x:o},backend:n});return{dataId:u.dataId,shape:u.shape,dtype:s}}const i=n.data.get(o.dataId).values,[a,l,c]=uY(i,o.shape,o.dtype,s);return n.makeTensorInfo(a,l,c)}const vGe={kernelName:wg,backendName:"cpu",kernelFunc:yl};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function wn(t,e,n,r){return n==null?({inputs:o,backend:s})=>{const{a:i,b:a}=o,l=s;Ce([i,a],t);const c=l.data.get(i.dataId).values,u=l.data.get(a.dataId).values,d=i.dtype==="string"?oa(c):c,f=i.dtype==="string"?oa(u):u,h=r||i.dtype,[p,m]=e(i.shape,a.shape,d,f,h);return l.makeTensorInfo(m,h,p)}:({inputs:o,backend:s})=>{const{a:i,b:a}=o,l=s;if(i.dtype==="complex64"||a.dtype==="complex64"){const c=yl({inputs:{x:i},backend:l,attrs:{dtype:"complex64"}}),u=l.data.get(c.dataId),d=u.complexTensorInfos.real,f=u.complexTensorInfos.imag,h=l.data.get(d.dataId).values,p=l.data.get(f.dataId).values,m=yl({inputs:{x:a},backend:l,attrs:{dtype:"complex64"}}),g=l.data.get(m.dataId),y=g.complexTensorInfos.real,v=g.complexTensorInfos.imag,x=l.data.get(y.dataId).values,b=l.data.get(v.dataId).values,[w,C,$]=n(i.shape,a.shape,h,p,x,b),T=l.makeTensorInfo($,"float32",w),I=l.makeTensorInfo($,"float32",C),E=Wr({inputs:{real:T,imag:I},backend:l});return l.disposeIntermediateTensorInfo(c),l.disposeIntermediateTensorInfo(m),l.disposeIntermediateTensorInfo(T),l.disposeIntermediateTensorInfo(I),E}else{const c=l.data.get(i.dataId).values,u=l.data.get(a.dataId).values,d=r||i.dtype,[f,h]=e(i.shape,a.shape,c,u,d);return l.makeTensorInfo(h,d,f)}}}function fP(t){return(e,n,r,o,s,i)=>{const a=Be(e,n),l=ne(a),c=a.length,u=Ie(a),d=qn("float32",l),f=qn("float32",l),h=pf(e,a),p=pf(n,a),m=ra(r,o),g=ra(s,i),y=e.length,v=Ie(e),x=n.length,b=Ie(n);if(h.length+p.length===0)for(let w=0;w<d.length;w++){const C=w%m.length,$=w%g.length,T=t(m[C*2],m[C*2+1],g[$*2],g[$*2+1]);d[w]=T.real,f[w]=T.imag}else for(let w=0;w<d.length;w++){const C=Hf(w,c,u),$=C.slice(-y);h.forEach(A=>$[A]=0);const T=ai($,y,v),I=C.slice(-x);p.forEach(A=>I[A]=0);const E=ai(I,x,b),N=t(m[T*2],m[T*2+1],g[E*2],g[E*2+1]);d[w]=N.real,f[w]=N.imag}return[d,f,a]}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const dY=on((t,e)=>t+e),xGe=fP((t,e,n,r)=>({real:t+n,imag:e+r})),yf=wn(Kf,dY,xGe),bGe={kernelName:Kf,backendName:"cpu",kernelFunc:yf};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hP(t,e,n,r,o){const s=ne(r),i=Xn(o,n);for(let a=0;a<t.length;a++){const l=t[a];if(l<0)throw new Error("Input x must be non-negative!");l>=o||(s>0?i[l]+=e[a]:i[l]+=1)}return i}function fY(t,e,n,r=!1){const o=t.shape[0],s=t.shape[1],i=Ge([o,n],e.dtype);for(let a=0;a<o;a++)for(let l=0;l<s;l++){const c=t.get(a,l);if(c<0)throw new Error("Input x must be non-negative!");c>=n||(r?i.set(1,a,c):e.size>0?i.set(i.get(a,c)+e.get(a,l),a,c):i.set(i.get(a,c)+1,a,c))}return i}/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const hY=on((t,e)=>t&e),wGe=wn(J2,hY),SGe={kernelName:J2,backendName:"cpu",kernelFunc:wGe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function wi(t){return(e,n,r)=>{const o=Qt(n,e.length);for(let s=0;s<e.length;++s)o[s]=t(e[s],r);return o}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mt(t,e,n){const r=wi(e);return Ml(t,r,n)}function Ml(t,e,n){return({inputs:r,attrs:o,backend:s})=>{const{x:i}=r;Ce(i,t);const a=s,l=a.data.get(i.dataId).values;let c;if(i.dtype==="string"){if(!Array.isArray(l))throw new Error("String tensor's value was not an instance of Array");c=oa(l)}else c=l;const u=n||i.dtype,d=e(c,u,o);return a.makeTensorInfo(i.shape,u,d)}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const pY=wi(t=>Math.ceil(t)),CGe=Ml(Sg,pY),$Ge={kernelName:Sg,backendName:"cpu",kernelFunc:CGe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mY(t,e,n,r){const o=Qt(n,ne(e));if(r&&n!=="string"){let s=0;t.forEach(i=>{const a=ne(i.shape);o.set(i.vals,s),s+=a})}else{let s=0;t.forEach(i=>{const a=n==="string"?oa(i.vals):i.vals;let l=0;for(let c=0;c<i.shape[0];++c){const u=c*e[1]+s;for(let d=0;d<i.shape[1];++d)o[u+d]=a[l++]}s+=i.shape[1]})}return o}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const gY=on((t,e)=>t===e?1:0),yY=wn(e1,gY,null,"bool"),kGe={kernelName:e1,backendName:"cpu",kernelFunc:yY};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const vY=wi(t=>Math.exp(t)),xY=Ml(Ng,vY,"float32"),TGe={kernelName:Ng,backendName:"cpu",kernelFunc:xY};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const bY=wi(t=>Math.expm1(t)),IGe=Ml(Ag,bY),EGe={kernelName:Ag,backendName:"cpu",kernelFunc:IGe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const wY=wi(t=>Math.floor(t)),NGe=Ml(Og,wY),AGe={kernelName:Og,backendName:"cpu",kernelFunc:NGe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const SY=on((t,e)=>Math.floor(t/e)),OGe=wn(Pg,SY,null,"int32"),PGe={kernelName:Pg,backendName:"cpu",kernelFunc:OGe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function CY(t,e,n,r,o,s,i,a,l){const c=Ge([r,s],n);for(let u=0;u<r;u++){const d=[];let f=0;for(let h=0;h<o;h++){const p=t[u*o+h];f+=p*i[h],d.push(p)}if(f<0||f>=l/s)throw new Error(`Invalid indices: ${d} does not index into ${a}`);for(let h=0;h<s;h++)c.values[u*s+h]=e.get(...e.indexToLoc(f*s+h))}return c}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $Y(t,e,n){const r=Ge(n,t.dtype);for(let o=0;o<r.size;++o){const i=r.indexToLoc(o).slice(),a=i[0],l=i[2],c=e.locToIndex([a,l]);i[2]=e.values[c];const u=t.locToIndex(i);0<=u&&u<t.values.length&&(r.values[o]=t.values[u])}return r}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const kY=on((t,e)=>t>e?1:0),RGe=wn(o1,kY,null,"bool"),_Ge={kernelName:o1,backendName:"cpu",kernelFunc:RGe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const TY=on((t,e)=>t>=e?1:0),DGe=wn(Rg,TY,null,"bool"),MGe={kernelName:Rg,backendName:"cpu",kernelFunc:DGe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const IY=on((t,e)=>t<e?1:0),FGe=wn(i1,IY,null,"bool"),LGe={kernelName:i1,backendName:"cpu",kernelFunc:FGe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const EY=on((t,e)=>t<=e?1:0),jGe=wn(a1,EY,null,"bool"),BGe={kernelName:a1,backendName:"cpu",kernelFunc:jGe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function NY(t,e,n){const r=(e-t)/(n-1),o=Xn(n,"float32");o[0]=t;for(let s=1;s<o.length;s++)o[s]=o[s-1]+r;return o}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const AY=wi(t=>Math.log(t)),zGe=Ml(Lg,AY),WGe={kernelName:Lg,backendName:"cpu",kernelFunc:zGe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function OY(t,e,n,r){const o=qn(r,ne(n));for(let s=0;s<o.length;++s){const i=s*e;let a=t[i];for(let l=0;l<e;++l){const c=t[i+l];(Number.isNaN(c)||c>a)&&(a=c)}o[s]=a}return o}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const PY=on((t,e)=>Math.max(t,e)),VGe=wn(Bg,PY),UGe={kernelName:Bg,backendName:"cpu",kernelFunc:VGe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const RY=on((t,e)=>Math.min(t,e)),GGe=wn(zg,RY),HGe={kernelName:zg,backendName:"cpu",kernelFunc:GGe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const pP=on((t,e)=>t*e),KGe=fP((t,e,n,r)=>({real:t*n-e*r,imag:t*r+e*n})),cS=wn(Vg,pP,KGe),qGe={kernelName:Vg,backendName:"cpu",kernelFunc:cS};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _Y(t,e,n){const r=Nl(-1,n);return pP([],e,r,t,n)}function XGe(t){const{inputs:e,backend:n}=t,{x:r}=e;Ce(r,"neg");const o=n.data.get(r.dataId).values,[s,i]=_Y(o,r.shape,r.dtype);return n.makeTensorInfo(i,r.dtype,s)}const YGe={kernelName:v1,backendName:"cpu",kernelFunc:XGe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const DY=on((t,e)=>t!==e?1:0),QGe=wn(x1,DY,null,"bool"),ZGe={kernelName:x1,backendName:"cpu",kernelFunc:QGe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mP(t,e,n,r,o){const s=e.length,i=ne(e),a=Ie(e),l=Ie(o),c=qn(n,ne(o));for(let u=0;u<i;++u){const d=Hf(u,s,a),f=new Array(d.length);for(let p=0;p<f.length;p++)f[p]=d[r[p]];const h=ai(f,s,l);c[h]=t[u]}return c}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Or(t){const{inputs:e,attrs:n,backend:r}=t,{x:o}=e,{perm:s}=n;Ce(o,"transpose");const i=o.shape.length,a=new Array(i);for(let d=0;d<a.length;d++)a[d]=o.shape[s[d]];const l=r.data.get(o.dataId).values,c=mP(l,o.shape,o.dtype,s,a);return{dataId:r.write(c,a,o.dtype),shape:a,dtype:o.dtype}}const JGe={kernelName:hd,backendName:"cpu",kernelFunc:Or};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function MY(t,e,n,r){const[o,s]=On(t,r),i=Yr(e,"int32"),a=Xn(ne(o),i),l=ne(s);for(let c=0;c<a.length;++c){const u=c*l;let d=1;for(let f=0;f<l;++f)d*=n[u+f];a[c]=d}return{outVals:a,outShape:o,outDtype:i}}function eHe(t){const{inputs:e,backend:n,attrs:r}=t,{x:o}=e,{axis:s,keepDims:i}=r;Ce(o,"prod");const a=o.shape.length,l=He(s,o.shape),c=Wt(l,a);let u=l,d=o;const f=[];c!=null&&(d=Or({inputs:{x:o},backend:n,attrs:{perm:c}}),f.push(d),u=nn(u.length,a));const h=n.data.get(d.dataId).values,{outVals:p,outShape:m,outDtype:g}=MY(d.shape,d.dtype,h,u);let y=m;return i&&(y=un(m,l)),f.forEach(v=>n.disposeIntermediateTensorInfo(v)),n.makeTensorInfo(y,g,p)}const tHe={kernelName:k1,backendName:"cpu",kernelFunc:eHe};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nHe(t,e,n){t.forEach((r,o)=>{if(r<0||r>=n){const s=Hf(o,e.length,Ie(e)).join(",");throw new Error(`indices[${s}] = ${r} is not in [0, ${n})`)}})}function rHe(t,e){for(let n=0;n<t.length;++n){const r=t[n],o=n===t.length-1?e:t[n+1].length;if(r.length===0)throw new Error("Ragged splits may not be empty");if(r[0]<0)throw new Error("Ragged splits must be non-negative");if(r[r.length-1]>o)throw new Error("Ragged splits must not point past values");for(let s=1;s<r.length;++s)if(r[s-1]>r[s])throw new Error("Ragged splits must be sorted in ascending order")}}function oHe(t,e,n,r){const o=[];let s=0;const i=e.length-1+n.length,a=new Array(i).fill(null).map(()=>[0]);rHe(n,r);let l=1;for(let c=0;c<e.length-1;++c){l*=e[c];const u=e[c+1];for(let d=1;d<l+1;++d)a[c].push(d*u)}for(let c=0;c<t.length;++c){let u=t[c],d=t[c]+1;for(let f=0;f<n.length;++f){const h=n[f],p=f+e.length-1;if(p>=0){const m=a[p],g=m[m.length-1]-h[u];for(let y=u;y<d;++y)a[p].push(h[y+1]+g)}u=h[u],d=h[d]}d!==u&&(o.push([u,d]),s+=d-u)}return{outSplits:a,valueSlices:o,numValues:s}}function sHe(t){const e=[];for(let n=0;n<t.length;++n){const r=t[n].length,o=Qt("int32",r);e.push(o),t[n].forEach((s,i)=>o[i]=s)}return e}function Bj(t,e){const n=t.slice(0,e);for(;n.length<e;)n.push(1);for(let r=e;r<t.length;r++)n[e-1]*=t[r];return n}function iHe(t,e,n,r,o,s){const i=Bj(e,2)[1],a=Bj(s,2)[1];let l=0;for(const c of n)for(let u=c[0];u<c[1];++u){for(let d=0;d<r;++d)o[l*a+d]=t[u*i+d];++l}}function aHe(t,e,n,r,o){const s=e.slice();s[0]=o;const i=Qt(n,ne(s)),a=t.length,l=a===0?0:a/e[0];return iHe(t,e,r,l,i,s),[i,s]}function FY(t,e,n,r,o,s,i,a){if(t.length===0)throw new Error("paramsNestedSplits must be non empty");if(e[0].length===0)throw new Error("Split tensors must not be scalars");const l=e[0][0]-1;if(nHe(s,i,l),r.length===0)throw new Error("params.rank must be nonzero");const c=r[0],{outSplits:u,valueSlices:d,numValues:f}=oHe(s,i,t,c),h=sHe(u),p=aHe(n,r,o,d,f);return[h,p[0],p[1]]}/**
 * @license
 * Copyright 2022 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const zj=2147483647;function LY(t,e,n,r,o,s,i){if(e.length>1)throw new Error("starts must be a scalar or vector");if(o.length>1)throw new Error("limits must be a scalar or vector");if(i.length>1)throw new Error("deltas must be a scalar or vector");const a=e.length===0,l=o.length===0,c=i.length===0,u=[];a||u.push(e[0]),l||u.push(o[0]),c||u.push(i[0]);for(let g=1;g<u.length;++g)if(u[g]!==u[g-1])throw new Error("starts, limits, and deltas must have the same shape");const d=u.length===0?1:u[0],f=Qt("int32",d+1);f[0]=0;for(let g=0;g<d;++g){const y=a?t[0]:t[g],v=l?r[0]:r[g],x=c?s[0]:s[g];if(x===0)throw new Error("Requires delta != 0");let b;if(x>0&&v<y||x<0&&v>y)b=0;else if(b=Math.ceil(Math.abs((v-y)/x)),b>zj)throw new Error(`Requires ((limit - start) / delta) <= ${zj}`);f[g+1]=f[g]+b}const h=f[d],p=Qt(n,h);let m=0;for(let g=0;g<d;++g){const y=f[g+1]-f[g];let v=a?t[0]:t[g];const x=c?s[0]:s[g];for(let b=0;b<y;++b)p[m++]=v,v+=x}return[f,p]}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var Io=gs;class r0{constructor(e,n,r,o,s,i,a,l,c,u){this.shape=e,this.shapeShape=n,this.values=r,this.valuesShape=o,this.valuesDType=s,this.defaultValue=i,this.defaultValueShape=a,this.rowPartitionValues=l,this.rowPartitionValuesShapes=c,this.rowPartitionTypes=C8(u),this.raggedRank=$8(this.rowPartitionTypes)}getRowPartitionTypeByDimension(e){return this.rowPartitionTypes[0]===Io.FIRST_DIM_SIZE?this.rowPartitionTypes[e+1]:this.rowPartitionTypes[e]}getRowPartitionTensor(e){return this.rowPartitionTypes[0]===Io.FIRST_DIM_SIZE?this.rowPartitionValues[e+1]:this.rowPartitionValues[e]}getMaxWidth(e){const n=this.getRowPartitionTensor(e-1);switch(this.getRowPartitionTypeByDimension(e-1)){case Io.VALUE_ROWIDS:return r0.getMaxWidthValueRowID(n);case Io.ROW_SPLITS:return r0.getMaxWidthRowSplit(n);default:throw new Error(`Cannot handle partition type ${Io[this.getRowPartitionTypeByDimension(e-1)]}`)}}static getMaxWidthRowSplit(e){const n=e.length;if(n===0||n===1)return 0;let r=0;for(let o=0;o<n-1;++o){const s=e[o+1]-e[o];s>r&&(r=s)}return r}static getMaxWidthValueRowID(e){const n=e.length;if(n===0)return 0;let r=0,o=e[0],s=0;for(let i=1;i<n;++i){const a=e[i];a!==o&&(o=a,s=Math.max(i-r,s),r=i)}return Math.max(n-r,s)}tensorShapeFromTensor(e,n,r=!0){if(n.length===0){if(e[0]===-1)return[];throw new Error("The only valid scalar shape tensor is the fully unknown shape specified as -1.")}return Vj(e,r)}calculateOutputSize(e){const n=this.valuesShape,r=this.defaultValueShape;k8(r,n);const o=this.tensorShapeFromTensor(this.shape,this.shapeShape),i=S8(this.raggedRank,o,n);i[0]<0&&(i[0]=e);for(let a=1;a<=this.raggedRank;++a)i[a]<0&&(i[a]=this.getMaxWidth(a));return i}calculateFirstParentOutputIndex(e,n,r){const o=Math.min(e,r),s=[];let i=0;for(let a=0;a<o;++a,i+=n)s.push(i);for(let a=o;a<e;++a)s.push(-1);return M(s.length===e,()=>"Final length of result must be equal to firstDimension."),s}calculateOutputIndexRowSplit(e,n,r,o){const s=e.length,i=[];for(let a=0;a<s-1;++a){const l=e[a+1]-e[a];let c=Math.min(o,l),u=n[a];u===-1&&(c=0);for(let d=0;d<c;++d)i.push(u),u+=r;for(let d=0;d<l-c;++d)i.push(-1)}if(s>0&&i.length!==e[s-1])throw new Error("Invalid row split size.");return i}calculateOutputIndexValueRowID(e,n,r,o){const s=e.length,i=[];if(s===0)return[];let a=0,l=e[0];if(l>=n.length)throw new Error(`Got currentValueRowId=${l}, which is not less than ${n.length}`);let c=n[l];i.push(c);for(let u=1;u<s;++u){const d=e[u];if(d===l)c>=0&&(++a,a<o?c+=r:c=-1);else{if(a=0,l=d,d>=n.length)throw new Error(`Got nextValueRowId=${d} which is not less than ${n.length}`);c=n[d]}i.push(c)}if(i.length!==e.length)throw new Error("Invalid row ids.");return i}calculateOutputIndex(e,n,r,o){const s=this.getRowPartitionTensor(e),i=this.getRowPartitionTypeByDimension(e);switch(i){case Io.VALUE_ROWIDS:return this.calculateOutputIndexValueRowID(s,n,r,o);case Io.ROW_SPLITS:if(s.length-1>n.length)throw new Error(`Row partition size is greater than output size: ${s.length-1} > ${n.length}`);return this.calculateOutputIndexRowSplit(s,n,r,o);default:throw new Error(`Unsupported partition type: ${Io[i]}`)}}getFirstDimensionSize(){const e=this.rowPartitionValues[0];if(this.rowPartitionTypes.length===0)throw new Error("No row_partition_types given.");const n=this.rowPartitionTypes[0];switch(n){case Io.FIRST_DIM_SIZE:return e[0];case Io.VALUE_ROWIDS:throw new Error("Cannot handle VALUE_ROWIDS in first dimension.");case Io.ROW_SPLITS:return this.rowPartitionValuesShapes[0][0]-1;default:throw new Error(`Cannot handle type ${Io[n]}`)}}compute(){if(this.rowPartitionValues[0].length<=0)throw new Error("Invalid first partition input. Tensor requires at least one element.");const n=this.getFirstDimensionSize(),r=this.calculateOutputSize(n),o=new Array(this.raggedRank+1);o[o.length-1]=1;for(let l=o.length-2;l>=0;--l)o[l]=o[l+1]*r[l+1];const s=Vj(r,!1),i=Qt(this.valuesDType,ne(s));if(o[0]*r[0]>0){let l=this.calculateFirstParentOutputIndex(n,o[0],r[0]);for(let c=1;c<=this.raggedRank;++c)l=this.calculateOutputIndex(c-1,l,o[c],r[c]);this.setOutput(this.raggedRank,l,i,s)}return[s,i]}setOutput(e,n,r,o){if(r.length===0)return;const s=this.values,i=r;let a=o.slice();a=a.slice(e+1);const l=ne(a),c=n.length;let u=this.defaultValue;if(u.length!==l&&u.length!==1){const p=this.defaultValueShape;Y(()=>{const m=q(u,p);u=hp(m,a).dataSync()})}let d=0,f=0,h=0;for(let p=0;p<=c;++p){let m=p<c?n[p]:-1;if(m===h){++h;continue}if(f<h){const g=s.subarray(d*l),y=i.subarray(f*l),v=(h-f)*l;Wj(y,g,v)}if(p>=c){const g=r.length;m=Math.floor(g/l)}if(m>h)if(this.defaultValue.length===1)i.subarray(h*l,m*l).fill(this.defaultValue[0]),h=m;else for(;m>h;){const g=i.slice(h*l);Wj(g,u,l),++h}m<0?(d=p+1,f=h):(d=p,f=h,h=f+1)}}}function Wj(t,e,n){for(let r=0;r<n;r++)t[r]=e[r]}function Vj(t,e){const n=[];for(let r of t){if(r<0){if(!e)throw new Error(`Dimension ${r} must be >= 0`);if(r<-1)throw new Error(`Dimension ${r} must be >= -1`);r=-1}n.push(r)}return n}function jY(t,e,n,r,o,s,i,a,l,c){return new r0(t,e,n,r,o,s,i,a,l,c).compute()}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function BY(t,e,n,r){const o=t===e,s=t<e&&n<0,i=e<t&&n>1;if(o||s||i)return Xn(0,r);const a=Math.abs(Math.ceil((e-t)/n)),l=Xn(a,r);e<t&&n===1&&(n=-1),l[0]=t;for(let c=1;c<l.length;c++)l[c]=l[c-1]+n;return l}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const zY=wi(t=>1/Math.sqrt(t)),lHe=Ml(Xg,zY),cHe={kernelName:Xg,backendName:"cpu",kernelFunc:lHe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lc(t,e,n,r,o,s,i,a,l,c){const u=[r/o,o],d=t.values,f=e.values;if(r===0)return Ge(n,e.dtype);const h=l instanceof Mn?l:Ge(u,e.dtype);typeof l=="string"||typeof l=="number"?h.values.fill(l):typeof l=="boolean"&&h.values.fill(+l);for(let p=0;p<s;p++){const m=[];let g=0;for(let y=0;y<i;y++){const v=d[p*i+y];m.push(v),g+=v*a[y]}if(g<0||g>=r/o)throw new Error(`Invalid indices: ${m} does not index into ${n}`);for(let y=0;y<o;y++)c?h.values[g*o+y]+=f[p*o+y]:h.values[g*o+y]=e.rank===0?f[0]:f[p*o+y]}return h}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const uHe=wi(t=>1/(1+Math.exp(-t))),WY=mt(ey,t=>1/(1+Math.exp(-t))),dHe={kernelName:ey,backendName:"cpu",kernelFunc:WY};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function VY(t,e,n,r,o){const s=SO(r,e,n),i=ne(n),a=Ie(r);if(s){const d=CO(e,a);return o==="string"?t.slice(d,d+i):t.subarray(d,d+i)}const l=o==="string"?oa(t):t,c=Ge(r,o,l),u=Ge(n,o);for(let d=0;d<u.size;++d){const f=u.indexToLoc(d),h=f.map((p,m)=>p+e[m]);u.set(c.get(...h),...f)}return o==="string"?G8(u.values):u.values}function Qc(t){const{inputs:e,backend:n,attrs:r}=t,{x:o}=e,{begin:s,size:i}=r;Ce(o,"slice");const[a,l]=q1(o,s,i);bO(o,a,l);const c=n.data.get(o.dataId).values,u=VY(c,a,l,o.shape,o.dtype);return n.makeTensorInfo(l,o.dtype,u)}const fHe={kernelName:O1,backendName:"cpu",kernelFunc:Qc};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function UY(t,e,n,r,o,s,i){const a=e[0],l=s[0],c=new Array(l),u=new Array(a),d=e[1];if(l===0){if(a!==0)throw new Error(P8(a));const g=Qt(n,0),y=Qt(o,0);return[g,[0,d],y,c,u]}let f=!0,h=0;const p=new Array(l).fill(0);for(let g=0;g<a;++g){const y=t[g*d];if(y<0)throw new Error(R8(g,y));if(y>=l)throw new Error(_8(g,y,l));++p[y],f=f&&y>=h,h=y}let m=!0;for(let g=0;g<l;++g){const y=p[g]===0;c[g]=y,m=m&&!y,p[g]=Math.max(p[g],1),g>0&&(p[g]+=p[g-1])}if(m&&f){const g=t,y=r;for(let v=0;v<a;++v)u[v]=v;return[g,[a,d],y,c,u]}else{const g=p[l-1],y=Qt(n,g*d),v=Qt(o,g),x=new Array(l).fill(0);for(let b=0;b<a;++b){const w=t[b*d],C=x[w],$=(w===0?0:p[w-1])+C;x[w]++;for(let T=0;T<d;++T)y[$*d+T]=t[b*d+T];v[$]=r[b],u[b]=$}for(let b=0;b<l;++b)if(x[b]===0){const C=b===0?0:p[b-1];y[C*d+0]=b;for(let $=1;$<d;++$)y[C*d+$]=0;v[C]=i}return[y,[g,d],v,c,u]}}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function GY(t,e,n,r,o){const s=ne(r),i=e[0],a=o.length,l=[];let c=1,u=-1;for(let g=0;g<a;++g){const y=o[g];if(y===-1){if(u!==-1)throw new Error(D8(u,g));u=g,l.push(1)}else{if(y<0)throw new Error(M8(g,y));c*=y,l.push(y)}}if(u!==-1){if(c<=0)throw new Error(F8());const g=Math.trunc(s/c);if(c*g!==s)throw new Error(L8(r,l));l[u]=g}if(ne(l)!==s)throw new Error(j8(r,l));const f=r.length,h=[];if(f>0){h[f-1]=1;for(let g=f-2;g>=0;--g)h[g]=h[g+1]*r[g+1]}const p=[];if(a>0){p[a-1]=1;for(let g=a-2;g>=0;--g)p[g]=p[g+1]*l[g+1]}const m=Qt(n,i*a);for(let g=0;g<i;++g){let y=0;for(let v=0;v<f;++v)y+=t[g*f+v]*h[v];for(let v=0;v<a;++v)m[g*a+v]=Math.trunc(y/p[v]),y%=p[v]}return[m,[i,a],l]}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gP(t,e,n,r,o,s=!1,i=0){const a=r.length,l=[e[0],t.length/e[0]],c=l[1],d=a>0?o[a-1]+1:0;if(d<0)throw new Error(TI());const f=e.slice();f[0]=d;const h=f.reduce((x,b)=>x*b,1),p=Qt(n,h);if(a===0)return d>0&&p.fill(i),[p,f];if(d<=0)throw new Error(TI());let m=0,g=1,y=0,v=o[m];for(;;){let x=0;if(g<a){if(x=o[g],v===x){++g;continue}if(v>=x)throw new Error(B8())}if(v<0||v>=d)throw new Error(z8(v,d));v>y&&p.fill(i,y*c,v*c);for(let b=m;b<g;++b){const w=r[b];if(w<0||w>=l[0])throw new Error(W8(b,r[b],l[0]));for(let C=0;C<c;C++)p[v*c+C]+=t[w*c+C]}if(s)for(let b=0;b<c;b++)p[v*c+b]/=g-m;if(m=g,++g,y=v+1,v=x,g>a)break}return y<d&&p.fill(i,y*c,d*c),[p,f]}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const hHe=wi(t=>Math.sqrt(t)),pHe=mt(ny,t=>Math.sqrt(t)),mHe={kernelName:ny,backendName:"cpu",kernelFunc:pHe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const HY=on((t,e)=>{const n=t-e;return n*n}),gHe=wn(ry,HY),yHe={kernelName:ry,backendName:"cpu",kernelFunc:gHe};/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const KY=wi((t,e)=>{const{pattern:n,replaceGlobal:r,rewrite:o}=e;return t.replace(new RegExp(n,r?"g":""),o)}),vHe=Ml(EA,KY),xHe={kernelName:EA,backendName:"cpu",kernelFunc:vHe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qY(t,e,n,r){const o=Ge(t,e.dtype);for(let s=0;s<o.size;s++){const i=o.indexToLoc(s),a=new Array(i.length);for(let l=0;l<a.length;l++)a[l]=i[l]*n[l]+r[l];o.set(e.get(...a),...i)}return o}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class bHe{constructor(e,n,r,o,s,i){this.separator=rl(e),this.nGramWidths=n,this.leftPad=rl(r),this.rightPad=rl(o),this.padWidth=s,this.preserveShort=i}getPadWidth(e){return Math.min(this.padWidth<0?e-1:this.padWidth,e-1)}getNumNGrams(e,n){const r=this.getPadWidth(n);return Math.max(0,e+2*r-n+1)}createNGrams(e,n,r,o,s,i){for(let a=0;a<s;++a){const l=this.getPadWidth(i),c=Math.max(0,l-a),u=Math.max(0,l-(s-(a+1))),d=i-(c+u),f=n+(c>0?0:a-l);let h=0;h+=c*this.leftPad.length;for(let v=0;v<d;++v)h+=e[f+v].length;h+=u*this.rightPad.length;const p=c+u+d-1;h+=p*this.separator.length,r[o+a]=new Uint8Array(h);const m=r[o+a];let g=0;const y=v=>v.forEach(x=>m[g++]=x);for(let v=0;v<c;++v)y(this.leftPad),y(this.separator);for(let v=0;v<d-1;++v)y(e[f+v]),y(this.separator);if(d>0){y(e[f+d-1]);for(let v=0;v<u;++v)y(this.separator),y(this.rightPad)}else{for(let v=0;v<u-1;++v)y(this.rightPad),y(this.separator);y(this.rightPad)}}}compute(e,n){const r=e.length,o=n.length;if(o>0){let l=n[0];if(l!==0)throw new Error(`First split value must be 0, got ${l}`);for(let c=1;c<o;++c){let u=n[c]>=l;if(u=u&&n[c]<=r,!u)throw new Error(`Invalid split value ${n[c]}, must be in [${l}, ${r}]`);l=n[c]}if(l!==r)throw new Error(`Last split value must be data size. Expected ${r}, got ${l}`)}const s=o-1,i=Qt("int32",o);if(r===0||o===0){const l=new Array(r);for(let c=0;c<=s;++c)i[c]=0;return[l,i]}i[0]=0;for(let l=1;l<=s;++l){const c=n[l]-n[l-1];let u=0;this.nGramWidths.forEach(d=>{u+=this.getNumNGrams(c,d)}),this.preserveShort&&c>0&&u===0&&(u=1),i[l]=i[l-1]+u}const a=new Array(i[s]);for(let l=0;l<s;++l){const c=n[l];let u=i[l];if(this.nGramWidths.forEach(d=>{const f=n[l+1]-n[l],h=this.getNumNGrams(f,d);this.createNGrams(e,c,a,u,h,d),u+=h}),this.preserveShort&&u===i[l]){const d=n[l+1]-n[l];if(d===0)continue;const f=d+2*this.padWidth;this.createNGrams(e,c,a,u,1,f)}}return[a,i]}}function XY(t,e,n,r,o,s,i,a){return new bHe(n,r,o,s,i,a).compute(t,e)}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function wHe(t,e,n,r){if(!t.length)return;if(e.length===0){for(let s=0;s<t.length;++s)r.push(t.subarray(s,s+1));return}if(e.length===1){const s=e[0];let i=t.indexOf(s);for(;i!==-1;){const a=t.subarray(0,i);(!n||a.length!==0)&&r.push(a),t=t.subarray(i+1),i=t.indexOf(s)}(!n||t.length!==0)&&r.push(t);return}let o=0;for(let s=0;s<t.length+1;s++)if(s===t.length||e.indexOf(t[s])!==-1){const i=t.subarray(o,s);(!n||i.length!==0)&&r.push(i),o=s+1}}function YY(t,e,n){const r=t.length,o=[];let s=0,i=0;const a=new Array(r);for(let f=0;f<r;++f){const h=o.length;wHe(t[f],e,n,o);const p=o.length-h;a[f]=p,s+=p,i=Math.max(i,p)}const l=Qt("int32",s*2),c=new Array(s),u=[r,i];let d=0;for(let f=0;f<r;++f)for(let h=0;h<a[f];++h)l[d*2]=f,l[d*2+1]=h,c[d]=o[d],++d;return[l,c,u]}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function QY(t,e){const n=Qt("int32",t.length);for(let r=0;r<t.length;++r)n[r]=nFe(t[r]).modulo(e).getLowBitsUnsigned();return n}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ZY=on((t,e)=>t-e),SHe=fP((t,e,n,r)=>({real:t-n,imag:e-r})),yP=wn(oy,ZY,SHe),CHe={kernelName:oy,backendName:"cpu",kernelFunc:yP};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function JY(t,e){const n=new Array(t.rank);for(let o=0;o<n.length;o++)n[o]=t.shape[o]*e[o];const r=Ge(n,t.dtype);for(let o=0;o<r.values.length;++o){const s=r.indexToLoc(o),i=new Array(t.rank);for(let l=0;l<i.length;l++)i[l]=s[l]%t.shape[l];const a=t.locToIndex(i);r.values[o]=t.values[a]}return r}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Xh=(t,e)=>{const n=e.value-t.value;return n===0?t.index-e.index:n};function e7(t,e,n=0,r=t.length-1){for(;r>n;){if(r-n>600){const a=r-n+1,l=e-n+1,c=Math.log(a),u=.5*Math.exp(2*c/3),d=.5*Math.sqrt(c*u*(a-u)/a)*Math.sign(l-a/2),f=Math.max(n,Math.floor(e-l*u/a+d)),h=Math.min(r,Math.floor(e+(a-l)*u/a+d));e7(t,e,f,h)}const o=t[e];let s=n,i=r;for(Pu(t,n,e),Xh(t[r],o)>0&&Pu(t,n,r);s<i;){for(Pu(t,s,i),s++,i--;Xh(t[s],o)<0;)s=s+1;for(;Xh(t[i],o)>0;)i=i-1}Xh(t[n],o)===0?Pu(t,n,i):(i=i+1,Pu(t,i,r)),i<=e&&(n=i+1),e<=i&&(r=i-1)}}function t7(t,e,n,r,o){const s=e[e.length-1],[i,a]=[t.length/s,s],l=qn(n,i*r),c=qn("int32",i*r);for(let d=0;d<i;d++){const f=d*a,h=t.subarray(f,f+a);let p=new Array(h.length);h.forEach((v,x)=>p[x]={value:v,index:x}),r<p.length&&(e7(p,r),p=p.slice(0,r)),o&&p.sort(Xh);const m=d*r,g=l.subarray(m,m+r),y=c.subarray(m,m+r);for(let v=0;v<r;v++)g[v]=p[v].value,y[v]=p[v].index}const u=e.slice();return u[u.length-1]=r,[Ge(u,n,l),Ge(u,"int32",c)]}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function n7(t,e,n,r){const o=He(e,n)[0],s=[1,n[0],1];for(let p=0;p<o;p++)s[0]*=n[p];s[1]=n[o];for(let p=o+1;p<n.length;p++)s[2]*=n[p];const i=new Map,a=new Int32Array(n[o]),l=new Mn(s,r,t),c=[],u=s[0]===1&&s[2]===1;for(let p=0;p<n[o];p++){let m;if(u)m=t[p].toString();else{const y=[];for(let v=0;v<s[0];v++)for(let x=0;x<s[2];x++)y.push(l.get(v,p,x));m=y.join(",")}const g=i.get(m);if(g!=null)a[p]=g;else{const y=i.size;i.set(m,y),a[p]=y,c.push(p)}}const d=s.slice();d[1]=i.size;const f=new Mn(d,r);c.forEach((p,m)=>{for(let g=0;g<s[0];g++)for(let y=0;y<s[2];y++)f.set(l.get(g,p,y),g,m,y)});const h=n.slice();return h[o]=d[1],{outputValues:f.values,outputShape:h,indices:a}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const $He=Object.freeze(Object.defineProperty({__proto__:null,addImpl:dY,bincountImpl:hP,bincountReduceImpl:fY,bitwiseAndImpl:hY,castImpl:uY,ceilImpl:pY,concatImpl:mY,equalImpl:gY,expImpl:vY,expm1Impl:bY,floorDivImpl:SY,floorImpl:wY,gatherNdImpl:CY,gatherV2Impl:$Y,greaterEqualImpl:TY,greaterImpl:kY,lessEqualImpl:EY,lessImpl:IY,linSpaceImpl:NY,logImpl:AY,maxImpl:OY,maximumImpl:PY,minimumImpl:RY,multiplyImpl:pP,negImpl:_Y,notEqualImpl:DY,prodImpl:MY,raggedGatherImpl:FY,raggedRangeImpl:LY,raggedTensorToTensorImpl:jY,rangeImpl:BY,rsqrtImpl:zY,scatterImpl:lc,sigmoidImpl:uHe,simpleAbsImpl:cY,sliceImpl:VY,sparseFillEmptyRowsImpl:UY,sparseReshapeImpl:GY,sparseSegmentReductionImpl:gP,sqrtImpl:hHe,squaredDifferenceImpl:HY,staticRegexReplaceImpl:KY,stridedSliceImpl:qY,stringNGramsImpl:XY,stringSplitImpl:YY,stringToHashBucketFastImpl:QY,subImpl:ZY,tileImpl:JY,topKImpl:t7,transposeImpl:mP,uniqueImpl:n7},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */bq("cpu",()=>new lS,1);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const r7=mt(Ig,t=>t>=0?t:Math.exp(t)-1),kHe={kernelName:Ig,backendName:"cpu",kernelFunc:r7};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function o7(t){const{inputs:e,backend:n,attrs:r}=t,{x:o}=e,{alpha:s}=r;Ce([o],"leakyRelu");const i=ne(o.shape),a=n.data.get(o.dataId).values,l=qn("float32",i);for(let c=0;c<a.length;c++)l[c]=a[c]<0?s*a[c]:a[c];return n.makeTensorInfo(o.shape,"float32",l)}const THe={kernelName:s1,backendName:"cpu",kernelFunc:o7};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const IHe=on((t,e)=>t<0?e*t:t);function s7(t){const{inputs:e,backend:n}=t,{x:r,alpha:o}=e;Ce([r,o],"prelu");const s=n.data.get(r.dataId).values,i=n.data.get(o.dataId).values,[a,l]=IHe(r.shape,o.shape,s,i,"float32");return n.makeTensorInfo(l,"float32",a)}const EHe={kernelName:$1,backendName:"cpu",kernelFunc:s7};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const i7=mt(Hg,t=>Math.max(0,t)),NHe={kernelName:Hg,backendName:"cpu",kernelFunc:i7};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const a7=mt(Kg,t=>Math.min(Math.max(0,t),6)),AHe={kernelName:Kg,backendName:"cpu",kernelFunc:a7};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function o0(t,e,n,r,o){if(n==="linear")return vi({inputs:{x:e},backend:t});if(n==="relu")return i7({inputs:{x:e},backend:t});if(n==="elu")return r7({inputs:{x:e},backend:t});if(n==="relu6")return a7({inputs:{x:e},backend:t});if(n==="prelu")return s7({inputs:{x:e,alpha:r},backend:t});if(n==="leakyrelu")return o7({inputs:{x:e},backend:t,attrs:{alpha:o}});if(n==="sigmoid")return WY({inputs:{x:e},backend:t});throw new Error(`Activation ${n} has not been implemented for the CPU backend.`)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kt(t){const{inputs:e,backend:n,attrs:r}=t,{x:o}=e,{shape:s}=r,i=ne(o.shape),a=kK(s,i),l=ne(a);M(i===l,()=>`The new shape (${a}) has ${l} elements and the old shape (${o.shape}) has ${i} elements. The new shape and old shape must have the same number of elements.`),n.incRef(o.dataId);const c=n.data.get(o.dataId);if(c.complexTensorInfos!=null){const u=c.complexTensorInfos.real,d=c.complexTensorInfos.imag;u.shape=a,d.shape=a}return{dataId:o.dataId,shape:a,dtype:o.dtype}}const OHe={kernelName:T1,backendName:"cpu",kernelFunc:kt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function l7(t){const{inputs:e,backend:n,attrs:r}=t,{a:o,b:s}=e,{transposeA:i,transposeB:a}=r;Ce([o,s],"matMul");const l=o.shape.length,c=s.shape.length,u=i?o.shape[l-2]:o.shape[l-1],d=a?s.shape[c-1]:s.shape[c-2],f=i?o.shape[l-1]:o.shape[l-2],h=a?s.shape[c-2]:s.shape[c-1],p=o.shape.slice(0,-2),m=s.shape.slice(0,-2),g=ne(p),y=ne(m),x=Be(o.shape.slice(0,-2),s.shape.slice(0,-2)).concat([f,h]);M(u===d,()=>`Error in matMul: inner shapes (${u}) and (${d}) of Tensors with shapes ${o.shape} and ${s.shape} and transposeA=${i} and transposeB=${a} must match.`);const b=i?[g,u,f]:[g,f,u],w=a?[y,h,d]:[y,d,h],C=kt({inputs:{x:o},backend:n,attrs:{shape:b}}),$=kt({inputs:{x:s},backend:n,attrs:{shape:w}}),T=i?C.shape[1]:C.shape[2],I=i?C.shape[2]:C.shape[1],E=a?$.shape[1]:$.shape[2],N=Math.max(g,y),A=n.data.get(C.dataId).values,R=n.data.get($.dataId).values,P=Ie(C.shape),F=Ie($.shape),[_,L,O]=i?[P[0],1,P[1]]:[P[0],P[1],1],[D,B,V]=a?[1,F[1],F[0]]:[F[1],1,F[0]],G=I*E,Q=Ge([N,I,E],C.dtype),re=Q.values,ie=n.blockSize;for(let ce=0;ce<N;ce++){const se=ce%g,fe=ce%y;for(let J=0;J<I;J+=ie){const ae=Math.min(J+ie,I);for(let le=0;le<E;le+=ie){const Z=Math.min(le+ie,E);for(let $e=0;$e<T;$e+=ie){const be=Math.min($e+ie,T);for(let Pe=J;Pe<ae;Pe++)for(let Ne=le;Ne<Z;Ne++){let je=0;for(let Ze=$e;Ze<be;Ze++){const sn=A[se*_+Pe*L+Ze*O],Vt=R[Ze*D+Ne*B+fe*V];je+=sn*Vt}re[ce*G+(Pe*E+Ne)]+=je}}}}}return n.disposeIntermediateTensorInfo(C),n.disposeIntermediateTensorInfo($),n.makeTensorInfo(x,Q.dtype,Q.values)}const PHe={kernelName:Uw,backendName:"cpu",kernelFunc:l7};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function RHe(t){const{inputs:e,backend:n,attrs:r}=t,{a:o,b:s,bias:i,preluActivationWeights:a}=e,{transposeA:l,transposeB:c,activation:u,leakyreluAlpha:d}=r;let f,h,p;const m=[];f=l7({inputs:{a:o,b:s},attrs:{transposeA:l,transposeB:c},backend:n}),i&&(h=yf({inputs:{a:f,b:i},backend:n}),m.push(f),f=h),u&&(p=o0(n,f,u,a,d),m.push(f),f=p);for(const y of m)n.disposeIntermediateTensorInfo(y);return f}const _He={kernelName:Fb,backendName:"cpu",kernelFunc:RHe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const DHe=mt(pg,t=>Math.acos(t)),MHe={kernelName:pg,backendName:"cpu",kernelFunc:DHe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const FHe=mt(mg,t=>Math.acosh(t)),LHe={kernelName:mg,backendName:"cpu",kernelFunc:FHe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function jHe(t){const{inputs:e,backend:n}=t,r=e;Ce(e,"addN");const o=r.map(a=>n.data.get(a.dataId).values),s=Ge(r[0].shape,r[0].dtype),i=s.values;for(let a=0;a<r.length;a++){const l=o[a];for(let c=0;c<i.length;c++)i[c]+=l[c]}return n.makeTensorInfo(s.shape,s.dtype,s.values)}const BHe={kernelName:K2,backendName:"cpu",kernelFunc:jHe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zHe(t){const{inputs:e,backend:n,attrs:r}=t,{x:o}=e,{axis:s,keepDims:i}=r;Ce(o,"all");const a=He(s,o.shape);let l=a;const c=Wt(l,o.shape.length);let u=o;c!=null&&(u=Or({inputs:{x:o},backend:n,attrs:{perm:c}}),l=nn(l.length,o.shape.length)),jn("all",l,u.shape.length);const[d,f]=On(u.shape,l),h=ne(f),p=Xn(ne(d),u.dtype),m=n.data.get(u.dataId).values;for(let y=0;y<p.length;++y){const v=y*h;let x=m[v];for(let b=0;b<h;++b){const w=m[v+b];x=x&&w}p[y]=x}c!=null&&n.disposeIntermediateTensorInfo(u);const g=n.makeTensorInfo(d,u.dtype,p);if(i){const y=un(d,a),v=kt({inputs:{x:g},backend:n,attrs:{shape:y}});return n.disposeIntermediateTensorInfo(g),v}return g}const WHe={kernelName:q2,backendName:"cpu",kernelFunc:zHe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function VHe(t){const{inputs:e,backend:n,attrs:r}=t,{x:o}=e,{axis:s,keepDims:i}=r;Ce(o,"any");const a=He(s,o.shape);let l=a;const c=Wt(l,o.shape.length);let u=o;c!=null&&(u=Or({inputs:{x:o},backend:n,attrs:{perm:c}}),l=nn(l.length,o.shape.length)),jn("any",l,u.shape.length);const[d,f]=On(u.shape,l),h=ne(f),p=Xn(ne(d),u.dtype),m=n.data.get(u.dataId).values;for(let y=0;y<p.length;++y){const v=y*h;let x=m[v];for(let b=0;b<h;++b){const w=m[v+b];x=x||w}p[y]=x}c!=null&&n.disposeIntermediateTensorInfo(u);const g=n.makeTensorInfo(d,u.dtype,p);if(i){const y=un(d,a),v=kt({inputs:{x:g},backend:n,attrs:{shape:y}});return n.disposeIntermediateTensorInfo(g),v}return g}const UHe={kernelName:X2,backendName:"cpu",kernelFunc:VHe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function GHe(t){const{inputs:e,backend:n,attrs:r}=t,{x:o}=e,{axis:s}=r;Ce(o,"argMax");let i=He(s,o.shape);const a=Wt(i,o.shape.length);let l=o;const c=[];a!=null&&(l=Or({inputs:{x:o},backend:n,attrs:{perm:a}}),c.push(l),i=nn(i.length,l.shape.length)),i=[i[0]],jn("argMax",i,l.shape.length);const[u,d]=On(l.shape,i),f=ne(u),h=Xn(f,"int32"),p=ne(d),m=n.data.get(l.dataId).values;for(let g=0;g<h.length;++g){const y=g*p;let v=m[y],x=0;for(let b=0;b<p;++b){const w=m[y+b];w>v&&(v=w,x=b)}h[g]=x}return c.forEach(g=>n.disposeIntermediateTensorInfo(g)),n.makeTensorInfo(u,"int32",h)}const HHe={kernelName:Bw,backendName:"cpu",kernelFunc:GHe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function KHe(t){const{inputs:e,backend:n,attrs:r}=t,{x:o}=e,{axis:s}=r;Ce(o,"argMin");let i=He(s,o.shape);const a=Wt(i,o.shape.length);let l=o;const c=[];a!=null&&(l=Or({inputs:{x:o},backend:n,attrs:{perm:a}}),c.push(l),i=nn(i.length,l.shape.length)),i=[i[0]],jn("argMin",i,l.shape.length);const[u,d]=On(l.shape,i),f=ne(u),h=Xn(f,"int32"),p=ne(d),m=n.data.get(l.dataId).values;for(let g=0;g<h.length;++g){const y=g*p;let v=m[y],x=0;for(let b=0;b<p;++b){const w=m[y+b];w<v&&(v=w,x=b)}h[g]=x}return c.forEach(g=>n.disposeIntermediateTensorInfo(g)),n.makeTensorInfo(u,"int32",h)}const qHe={kernelName:zw,backendName:"cpu",kernelFunc:KHe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const XHe=mt(gg,t=>Math.asin(t)),YHe={kernelName:gg,backendName:"cpu",kernelFunc:XHe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const QHe=mt(yg,t=>Math.asinh(t)),ZHe={kernelName:yg,backendName:"cpu",kernelFunc:QHe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const JHe=mt(vg,t=>Math.atan(t)),e5e={kernelName:vg,backendName:"cpu",kernelFunc:JHe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const t5e=on((t,e)=>Math.atan2(t,e)),n5e=wn(bg,t5e),r5e={kernelName:bg,backendName:"cpu",kernelFunc:n5e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const o5e=mt(xg,t=>Math.atanh(t)),s5e={kernelName:xg,backendName:"cpu",kernelFunc:o5e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vP(t,e,n,r,o,s){const i=o.strideHeight,a=o.strideWidth,l=o.dilationHeight,c=o.dilationWidth,u=o.effectiveFilterHeight,d=o.effectiveFilterWidth,f=o.padInfo.top,h=o.padInfo.left,p=s==="max"?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,m=Ge(o.outShape,n),g=m.values,y=o.outShape[1]*o.outShape[2]*o.outShape[3],v=o.outShape[2]*o.outShape[3],x=o.outShape[3];for(let b=0;b<o.batchSize;++b){const w=b*y,C=b*r[0];for(let $=0;$<o.inChannels;++$)for(let T=0;T<o.outHeight;++T){const I=T*i-f,E=Math.max(0,I),N=Math.min(o.inHeight,u+I),A=w+T*v;for(let R=0;R<o.outWidth;++R){const P=R*a-h,F=Math.max(0,P),_=Math.min(o.inWidth,d+P);let L=p,O=0,D=0;for(let V=E;V<N;V+=l){const G=C+V*r[1];for(let Q=F;Q<_;Q+=c){const re=G+Q*r[2],ie=t[re+$];s==="max"&&ie>L?L=ie:s==="avg"&&(O+=ie,D++)}if(isNaN(L))break}const B=A+R*x+$;g[B]=s==="avg"?O/D:L}}}return m}function c7(t,e,n,r,o=!1,s=!1){const i=Ge(r.outShape,"int32"),a=r.strideHeight,l=r.strideWidth,c=r.dilationHeight,u=r.dilationWidth,d=r.effectiveFilterHeight,f=r.effectiveFilterWidth,h=r.padInfo.top,p=r.padInfo.left,m=Ge(e,n,t);for(let g=0;g<r.batchSize;++g)for(let y=0;y<r.inChannels;++y)for(let v=0;v<r.outHeight;++v){const x=v*a-h;let b=x;for(;b<0;)b+=c;const w=Math.min(r.inHeight,d+x);for(let C=0;C<r.outWidth;++C){const $=C*l-p;let T=$;for(;T<0;)T+=u;const I=Math.min(r.inWidth,f+$);let E=Number.NEGATIVE_INFINITY,N=-1;for(let A=b;A<w;A+=c){const R=A-x;for(let P=T;P<I;P+=u){const F=P-$,_=m.get(g,A,P,y);_>E&&(E=_,o?N=s?((g*r.inHeight+A)*r.inWidth+P)*r.inChannels+y:(A*r.inWidth+P)*r.inChannels+y:N=R*f+F)}}i.set(N,g,v,C,y)}}return i}function u7(t,e,n,r,o,s){const i=o.strideDepth,a=o.strideHeight,l=o.strideWidth,c=o.dilationDepth,u=o.dilationHeight,d=o.dilationWidth,f=o.effectiveFilterDepth,h=o.effectiveFilterHeight,p=o.effectiveFilterWidth,m=o.padInfo.front,g=o.padInfo.top,y=o.padInfo.left,v=s==="max"?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,x=Ge(o.outShape,n),b=x.values,w=o.outShape[1]*o.outShape[2]*o.outShape[3]*o.outShape[4],C=o.outShape[2]*o.outShape[3]*o.outShape[4],$=o.outShape[3]*o.outShape[4],T=o.outShape[4];for(let I=0;I<o.batchSize;++I){const E=I*w,N=I*r[0];for(let A=0;A<o.inChannels;++A)for(let R=0;R<o.outDepth;++R){const P=R*i-m;let F=P;for(;F<0;)F+=c;const _=Math.min(o.inDepth,f+P),L=E+R*C;for(let O=0;O<o.outHeight;++O){const D=O*a-g;let B=D;for(;B<0;)B+=u;const V=Math.min(o.inHeight,h+D),G=L+O*$;for(let Q=0;Q<o.outWidth;++Q){const re=Q*l-y;let ie=re;for(;ie<0;)ie+=d;const ce=Math.min(o.inWidth,p+re),se=G+Q*T;let fe=v,J=0,ae=0;for(let Z=F;Z<_;Z+=c){const $e=N+Z*r[1];for(let be=B;be<V;be+=u){const Pe=$e+be*r[2];for(let Ne=ie;Ne<ce;Ne+=d){const je=Pe+Ne*r[3],Ze=t[je+A];if(s==="max"&&Ze>fe?fe=Ze:s==="avg"&&(J+=Ze,ae++),isNaN(fe))break}if(isNaN(fe))break}if(isNaN(fe))break}const le=se+A;b[le]=s==="avg"?J/Math.max(ae,1):fe}}}}return x}function i5e(t,e){const n=Ge(e.outShape,"int32"),r=e.strideDepth,o=e.strideHeight,s=e.strideWidth,i=e.dilationDepth,a=e.dilationHeight,l=e.dilationWidth,c=e.effectiveFilterDepth,u=e.effectiveFilterHeight,d=e.effectiveFilterWidth,f=e.padInfo.front,h=e.padInfo.top,p=e.padInfo.left;for(let m=0;m<e.batchSize;++m)for(let g=0;g<e.inChannels;++g)for(let y=0;y<e.outDepth;++y){const v=y*r-f;let x=v;for(;x<0;)x+=i;const b=Math.min(e.inDepth,c+v);for(let w=0;w<e.outHeight;++w){const C=w*o-h;let $=C;for(;$<0;)$+=a;const T=Math.min(e.inHeight,u+C);for(let I=0;I<e.outWidth;++I){const E=I*s-p;let N=E;for(;N<0;)N+=l;const A=Math.min(e.inWidth,d+E);let R=Number.NEGATIVE_INFINITY,P=-1;for(let F=x;F<b;F+=i){const _=F-v;for(let L=$;L<T;L+=a){const O=L-C;for(let D=N;D<A;D+=l){const B=D-E,V=t.get(m,F,L,D,g);V>=R&&(R=V,P=_*u*d+O*u+B)}}}n.set(P,m,y,w,I,g)}}}return n}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function a5e(t){const{inputs:e,backend:n,attrs:r}=t,{x:o}=e;Ce(o,"avgPool");const{filterSize:s,strides:i,pad:a,dimRoundingMode:l}=r,c=1;M(Qn(i,c),()=>`Error in avgPool: Either strides or dilations must be 1. Got strides ${i} and dilations '${c}'`);const u=Jo(o.shape,s,i,c,a,l);let d;if(u.filterWidth===1&&u.filterHeight===1&&dt(u.inShape,u.outShape))d=vi({inputs:{x:o},backend:n});else{const f=n.data.get(o.dataId).values,h=Ie(o.shape),p=vP(f,o.shape,o.dtype,h,u,"avg");d=n.makeTensorInfo(u.outShape,o.dtype,p.values)}return d}const l5e={kernelName:Ww,backendName:"cpu",kernelFunc:a5e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function c5e(t){const{inputs:e,backend:n,attrs:r}=t,{x:o}=e,{filterSize:s,strides:i,pad:a,dimRoundingMode:l,dataFormat:c}=r;Ce(o,"avgPool3d");const u=ua(o.shape,s,i,1,a,l,c),d=n.data.get(o.dataId).values,f=u7(d,o.shape,o.dtype,Ie(o.shape),u,"avg");return n.makeTensorInfo(f.shape,"float32",f.values)}const u5e={kernelName:Vw,backendName:"cpu",kernelFunc:c5e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function d5e(t){const{inputs:e,backend:n,attrs:r}=t,{dy:o,input:s}=e,{filterSize:i,strides:a,pad:l,dimRoundingMode:c}=r;Ce([o,s],"avgPool3DGrad");const u=ua(s.shape,i,a,1,l,c),d=u.strideDepth,f=u.strideHeight,h=u.strideWidth,p=u.filterDepth,m=u.filterHeight,g=u.filterWidth,y=u.dilationDepth,v=u.dilationHeight,x=u.dilationWidth,b=u.effectiveFilterDepth,w=u.effectiveFilterHeight,C=u.effectiveFilterWidth,$=b-1-u.padInfo.front,T=C-1-u.padInfo.left,I=w-1-u.padInfo.top,E=Ge(s.shape,"float32"),N=1/(p*m*g),A=n.bufferSync(o);for(let R=0;R<u.batchSize;++R)for(let P=0;P<u.inChannels;++P)for(let F=0;F<u.inDepth;++F)for(let _=0;_<u.inHeight;++_)for(let L=0;L<u.inWidth;++L){const O=F-$,D=_-I,B=L-T;let V=0;for(let G=0;G<b;G+=y){const Q=(O+G)/d;if(!(Q<0||Q>=u.outDepth||Math.floor(Q)!==Q))for(let re=0;re<w;re+=v){const ie=(D+re)/f;if(!(ie<0||ie>=u.outHeight||Math.floor(ie)!==ie))for(let ce=0;ce<C;ce+=x){const se=(B+ce)/h;if(se<0||se>=u.outWidth||Math.floor(se)!==se)continue;const fe=A.get(R,Q,ie,se,P);V+=fe}}}E.set(V*N,R,F,_,L,P)}return n.makeTensorInfo(E.shape,E.dtype,E.values)}const f5e={kernelName:Q2,backendName:"cpu",kernelFunc:d5e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function h5e(t){const{inputs:e,backend:n,attrs:r}=t,{dy:o,input:s}=e,i=s;Ce([o,s],"avgPoolGrad");const{filterSize:a,strides:l,pad:c}=r,u=Jo(i.shape,a,l,1,c),d=u.strideHeight,f=u.strideWidth,h=u.filterHeight,p=u.filterWidth,m=u.dilationHeight,g=u.dilationWidth,y=u.effectiveFilterHeight,v=u.effectiveFilterWidth,x=v-1-u.padInfo.left,b=y-1-u.padInfo.top,w=Ge(i.shape,"float32"),C=1/(h*p),$=n.data.get(o.dataId).values,T=Ge(o.shape,"float32",$);for(let I=0;I<u.batchSize;++I)for(let E=0;E<u.inChannels;++E)for(let N=0;N<u.inHeight;++N)for(let A=0;A<u.inWidth;++A){const R=N-b,P=A-x;let F=0;for(let _=0;_<y;_+=m){const L=(R+_)/d;if(!(L<0||L>=u.outHeight||Math.floor(L)!==L))for(let O=0;O<v;O+=g){const D=(P+O)/f;if(D<0||D>=u.outWidth||Math.floor(D)!==D)continue;const B=T.get(I,L,D,E);F+=B}}w.set(F*C,I,N,A,E)}return n.makeTensorInfo(w.shape,w.dtype,w.values)}const p5e={kernelName:Y2,backendName:"cpu",kernelFunc:h5e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function m5e(t){const{inputs:e,backend:n,attrs:r}=t,{x:o,scale:s,offset:i,mean:a,variance:l}=e;M(a.shape.length===l.shape.length,()=>"Batch normalization gradient requires mean and variance to have equal ranks."),M(i==null||a.shape.length===i.shape.length,()=>"Batch normalization gradient requires mean and offset to have equal ranks."),M(s==null||a.shape.length===s.shape.length,()=>"Batch normalization gradient requires mean and scale to have equal ranks."),Ce([o,a,l,s,i],"batchNorm");let{varianceEpsilon:c}=r;c==null&&(c=.001);const u=n.data.get(o.dataId).values,d=n.data.get(a.dataId).values,f=n.data.get(l.dataId).values,h=s?n.data.get(s.dataId).values:new Float32Array([1]),p=i?n.data.get(i.dataId).values:new Float32Array([0]),m=new Float32Array(u.length),g=p.length,y=h.length,v=f.length,x=d.length;let b=0,w=0,C=0,$=0;for(let T=0;T<u.length;++T)m[T]=p[b++]+(u[T]-d[w++])*h[C++]/Math.sqrt(f[$++]+c),b>=g&&(b=0),w>=x&&(w=0),C>=y&&(C=0),$>=v&&($=0);return n.makeTensorInfo(o.shape,o.dtype,m)}const g5e={kernelName:n1,backendName:"cpu",kernelFunc:m5e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function y5e(t){const{inputs:e,backend:n,attrs:r}=t,{x:o}=e,{blockShape:s,crops:i}=r;Ce([o],"batchToSpaceND");const a=s.reduce((y,v)=>y*v),l=py(o.shape,s,a),c=my(l.length,s.length),u=gy(o.shape,s,a),d=EO(i,s.length),f=NO(u,i,s.length),h=kt({inputs:{x:o},backend:n,attrs:{shape:l}}),p=Or({inputs:{x:h},backend:n,attrs:{perm:c}}),m=kt({inputs:{x:p},backend:n,attrs:{shape:u}}),g=Qc({inputs:{x:m},backend:n,attrs:{begin:d,size:f}});return n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(m),g}const v5e={kernelName:Gw,backendName:"cpu",kernelFunc:y5e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function x5e(t){const{inputs:e,backend:n,attrs:r}=t,{x:o,weights:s}=e,{size:i}=r,a=n.data.get(o.dataId).values,l=n.data.get(s.dataId).values,c=hP(a,l,s.dtype,s.shape,i);return n.makeTensorInfo([i],s.dtype,c)}const b5e={kernelName:Z2,backendName:"cpu",kernelFunc:x5e};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function w5e(t){const{inputs:e,backend:n}=t,{s0:r,s1:o}=e,s=n.data.get(r.dataId).values,i=n.data.get(o.dataId).values,a=Be(Array.from(s),Array.from(i));return n.makeTensorInfo([a.length],"int32",Int32Array.from(a))}const S5e={kernelName:OK,backendName:"cpu",kernelFunc:w5e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const C5e=mt(Cg,(t,e)=>{const n=e;return t>n.clipValueMax?n.clipValueMax:t<n.clipValueMin?n.clipValueMin:t}),$5e={kernelName:Cg,backendName:"cpu",kernelFunc:C5e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const k5e=t=>{const{x:e}=t.inputs,n=t.backend,r=new Float32Array(ne(e.shape)),o=n.data.get(e.dataId),s=o.complexTensorInfos.real,i=o.complexTensorInfos.imag,a=n.data.get(s.dataId).values,l=n.data.get(i.dataId).values;for(let c=0;c<a.length;c++){const u=a[c],d=l[c];r[c]=Math.hypot(u,d)}return n.makeOutput(r,e.shape,"float32")},T5e={kernelName:Hw,backendName:"cpu",kernelFunc:k5e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vf(t){const{inputs:e,backend:n}=t,{input:r}=e,o=n.data.get(r.dataId).complexTensorInfos.imag,s=n.data.get(o.dataId).values;return n.makeTensorInfo(o.shape,o.dtype,s)}const I5e={kernelName:gA,backendName:"cpu",kernelFunc:vf};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xf(t){const{inputs:e,backend:n,attrs:r}=t,{axis:o}=r,s=He(o,e[0].shape)[0],i=e.map(m=>m.shape);kO(i,s);let a=ci(e.map(m=>m.shape),s);if(ne(a)===0)return n.makeTensorInfo(a,e[0].dtype,[]);const l=e.filter(m=>ne(m.shape)>0);if(l.length===1)return vi({inputs:{x:l[0]},backend:n});if(l[0].dtype==="complex64"){const m=l.map(b=>Yc({inputs:{input:b},backend:n})),g=l.map(b=>vf({inputs:{input:b},backend:n})),y=xf({inputs:m,backend:n,attrs:{axis:s}}),v=xf({inputs:g,backend:n,attrs:{axis:s}}),x=Wr({inputs:{real:y,imag:v},backend:n});return m.forEach(b=>n.disposeIntermediateTensorInfo(b)),g.forEach(b=>n.disposeIntermediateTensorInfo(b)),n.disposeIntermediateTensorInfo(y),n.disposeIntermediateTensorInfo(v),x}const c=l.map(m=>{const y=[-1,ne(m.shape.slice(s))];return kt({inputs:{x:m},backend:n,attrs:{shape:y}})}),u=c.map(m=>({vals:n.data.get(m.dataId).values,shape:m.shape}));a=ci(c.map(m=>m.shape),1);const d=c[0].shape[0]===1,f=mY(u,a,e[0].dtype,d),h=ci(l.map(m=>m.shape),s),p=n.makeTensorInfo(h,e[0].dtype,f);return c.forEach(m=>n.disposeIntermediateTensorInfo(m)),p}const E5e={kernelName:Kw,backendName:"cpu",kernelFunc:xf};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function d7(t){const{inputs:e,backend:n,attrs:r}=t,{x:o,filter:s}=e,{strides:i,pad:a,dataFormat:l,dilations:c,dimRoundingMode:u}=r;Ce([o,s],"conv2d");const d=da(l),f=Ln(o.shape,s.shape,i,c,a,u,!1,d),h=f.filterHeight,p=f.filterWidth,m=f.dilationHeight,g=f.dilationWidth,y=f.padInfo.left,v=f.padInfo.top,x=f.dataFormat==="channelsLast",b=new Mn(f.outShape,o.dtype),w=Ie(o.shape),C=Ie(s.shape),$=w[0],T=x?w[1]:w[2],I=x?w[2]:1,E=x?1:w[1],N=b.strides[0],A=x?b.strides[1]:b.strides[2],R=x?b.strides[2]:1,P=x?1:b.strides[1],F=n.data.get(o.dataId).values,_=n.data.get(s.dataId).values,L=b.values;for(let O=0;O<f.batchSize;++O){const D=O*$,B=O*N;for(let V=0;V<f.outHeight;++V){const G=B+V*A,Q=V*f.strideHeight-v;for(let re=0;re<h;++re){const ie=Q+re*m;if(ie<0||ie>=f.inHeight)continue;const ce=re*C[0],se=D+ie*T;for(let fe=0;fe<f.outWidth;++fe){const J=G+fe*R,ae=fe*f.strideWidth-y;for(let le=0;le<p;++le){const Z=ae+le*g;if(Z<0||Z>=f.inWidth)continue;const $e=ce+le*C[1],be=se+Z*I;let Pe=$e;for(let Ne=0;Ne<f.inChannels;++Ne){const je=F[be+Ne*E];for(let Ze=0;Ze<f.outChannels;++Ze)L[J+Ze*P]+=je*_[Pe+Ze];Pe+=f.outChannels}}}}}}return n.makeTensorInfo(b.shape,b.dtype,L)}const N5e={kernelName:qw,backendName:"cpu",kernelFunc:d7};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function A5e(t){const{inputs:e,backend:n,attrs:r}=t,{x:o,dy:s}=e,{strides:i,pad:a,dataFormat:l,dimRoundingMode:c,filterShape:u}=r;Ce([o,s],"conv2dBackpropFilter");const d=da(l),f=Ln(o.shape,u,i,1,a,c,!1,d),{strideHeight:h,strideWidth:p,filterHeight:m,filterWidth:g}=f,y=f.dataFormat==="channelsLast",v=new Mn(f.filterShape,"float32"),x=f.padInfo.left,b=f.padInfo.top,w=n.data.get(o.dataId).values,C=n.data.get(s.dataId).values,$=new Mn(o.shape,o.dtype,w),T=new Mn(s.shape,s.dtype,C);for(let I=0;I<m;++I){const E=Math.max(0,Math.ceil((b-I)/h)),N=Math.min(f.outHeight,(f.inHeight+b-I)/h);for(let A=0;A<g;++A){const R=Math.max(0,Math.ceil((x-A)/p)),P=Math.min(f.outWidth,(f.inWidth+x-A)/p);for(let F=0;F<f.inChannels;++F)for(let _=0;_<f.outChannels;++_){let L=0;for(let O=0;O<f.batchSize;++O)for(let D=E;D<N;++D){const B=I+D*h-b;for(let V=R;V<P;++V){const G=A+V*p-x;y?L+=$.get(O,B,G,F)*T.get(O,D,V,_):L+=$.get(O,F,B,G)*T.get(O,_,D,V)}}v.set(L,I,A,F,_)}}}return n.makeTensorInfo(v.shape,v.dtype,v.values)}const O5e={kernelName:tA,backendName:"cpu",kernelFunc:A5e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function P5e(t){const{inputs:e,backend:n,attrs:r}=t,{dy:o,filter:s}=e,{inputShape:i,strides:a,pad:l,dataFormat:c,dimRoundingMode:u}=r;Ce([o,s],"conv2dBackpropInput");const d=Ie(s.shape),f=Ie(o.shape);let h=da(c);const p=Ln(i,s.shape,a,1,l,u,!1,h),m=new Mn(p.inShape,"float32"),g=m.values,y=n.data.get(o.dataId).values,v=n.data.get(s.dataId).values,[x,b,w]=d,{batchSize:C,filterHeight:$,filterWidth:T,inChannels:I,inHeight:E,inWidth:N,outChannels:A,outHeight:R,outWidth:P,strideHeight:F,strideWidth:_}=p;h=p.dataFormat;const L=$-1-p.padInfo.top,O=T-1-p.padInfo.left,D=h==="channelsLast",B=m.strides[0],V=D?m.strides[1]:m.strides[2],G=D?m.strides[2]:1,Q=D?1:m.strides[1],re=f[0],ie=D?f[1]:f[2],ce=D?f[2]:1,se=D?1:f[1];for(let fe=0;fe<C;++fe)for(let J=0;J<I;++J)for(let ae=0;ae<E;++ae){const le=ae-L,Z=Math.max(0,Math.ceil(le/F)),$e=Math.min(R,($+le)/F);for(let be=0;be<N;++be){const Pe=be-O,Ne=Math.max(0,Math.ceil(Pe/_)),je=Math.min(P,(T+Pe)/_);let Ze=0;for(let Vt=Z;Vt<$e;++Vt){const er=Vt*F-le;for(let an=Ne;an<je;++an){const ns=an*_-Pe,Mr=re*fe+ie*Vt+ce*an,So=x*($-1-er)+b*(T-1-ns)+w*J;for(let ha=0;ha<A;++ha){const pa=y[Mr+se*ha],ma=v[So+ha];Ze+=pa*ma}}}const sn=B*fe+V*ae+G*be+Q*J;g[sn]=Ze}}return n.makeTensorInfo(m.shape,m.dtype,m.values)}const R5e={kernelName:Xw,backendName:"cpu",kernelFunc:P5e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _5e(t){const{inputs:e,backend:n,attrs:r}=t,{x:o,filter:s}=e,{strides:i,pad:a,dilations:l}=r;Ce([o,s],"conv3d");const c=Al(o.shape,s.shape,i,l,a),{filterDepth:u,filterHeight:d,filterWidth:f,dilationDepth:h,dilationHeight:p,dilationWidth:m,padInfo:g}=c,y=g.front,v=g.left,x=g.top,b=new Mn(c.outShape,o.dtype),w=n.data.get(o.dataId).values,C=n.data.get(s.dataId).values,$=b.values,T=Ie(o.shape),I=Ie(s.shape);for(let E=0;E<c.batchSize;++E){const N=E*T[0],A=E*b.strides[0];for(let R=0;R<c.outDepth;++R){const P=A+R*b.strides[1],F=R*c.strideDepth-y;for(let _=0;_<u;++_){const L=F+_*h;if(L<0||L>=c.inDepth)continue;const O=_*I[0],D=N+L*T[1];for(let B=0;B<c.outHeight;++B){const V=P+B*b.strides[2],G=B*c.strideHeight-x;for(let Q=0;Q<d;++Q){const re=G+Q*p;if(re<0||re>=c.inHeight)continue;const ie=O+Q*I[1],ce=D+re*T[2];for(let se=0;se<c.outWidth;++se){const fe=V+se*c.outChannels,J=se*c.strideWidth-v;for(let ae=0;ae<f;++ae){const le=J+ae*m;if(le<0||le>=c.inWidth)continue;const Z=ie+ae*I[2],$e=ce+le*c.inChannels;let be=Z;for(let Pe=0;Pe<c.inChannels;++Pe){const Ne=w[$e+Pe];for(let je=0;je<c.outChannels;++je)$[fe+je]+=Ne*C[be+je];be+=c.outChannels}}}}}}}}return n.makeTensorInfo(b.shape,b.dtype,b.values)}const D5e={kernelName:Yw,backendName:"cpu",kernelFunc:_5e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function M5e(t){const{inputs:e,backend:n,attrs:r}=t,{x:o,dy:s}=e,{strides:i,pad:a,filterShape:l}=r;Ce([o,s],"conv3dBackpropFilterV2");const c=Ie(o.shape),u=Ie(s.shape),d=Al(o.shape,l,i,1,a),f=d.strideDepth,h=d.strideHeight,p=d.strideWidth,m=d.filterDepth,g=d.filterHeight,y=d.filterWidth,v=new Mn(d.filterShape,"float32"),x=v.values,[b,w,C,$]=v.strides,T=n.data.get(s.dataId).values,[I,E,N,A]=u,R=n.data.get(o.dataId).values,[P,F,_,L]=c,O=d.padInfo.front,D=d.padInfo.left,B=d.padInfo.top;for(let V=0;V<m;++V){const G=Math.max(0,Math.ceil((O-V)/f)),Q=Math.min(d.outDepth,(d.inDepth+O-V)/f),re=V*b;for(let ie=0;ie<g;++ie){const ce=Math.max(0,Math.ceil((B-ie)/h)),se=Math.min(d.outHeight,(d.inHeight+B-ie)/h),fe=ie*w+re;for(let J=0;J<y;++J){const ae=Math.max(0,Math.ceil((D-J)/p)),le=Math.min(d.outWidth,(d.inWidth+D-J)/p),Z=J*C+fe;for(let $e=0;$e<d.inChannels;++$e){const be=$e*$+Z;for(let Pe=0;Pe<d.outChannels;++Pe){let Ne=0;for(let je=0;je<d.batchSize;++je){const Ze=je*P,sn=je*I;for(let Vt=G;Vt<Q;++Vt){const an=(V+Vt*f-O)*F+Ze,ns=Vt*E+sn;for(let Mr=ce;Mr<se;++Mr){const ha=(ie+Mr*h-B)*_+an,pa=Mr*N+ns;for(let ma=ae;ma<le;++ma){const mS=(J+ma*p-D)*L+ha,gS=ma*A+pa;Ne+=R[mS+$e]*T[gS+Pe]}}}}x[be+Pe]=Ne}}}}}return n.makeTensorInfo(v.shape,v.dtype,v.values)}const F5e={kernelName:nA,backendName:"cpu",kernelFunc:M5e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function L5e(t){const{inputs:e,backend:n,attrs:r}=t,{dy:o,filter:s}=e,{pad:i,strides:a,inputShape:l}=r;Ce([o],"conv3dBackpropInputV2");const c=Ie(o.shape),u=Ie(s.shape),d=Al(l,s.shape,a,1,i),f=new Mn(d.inShape,"float32"),h=f.values,[p,m,g,y]=f.strides,v=n.data.get(o.dataId).values,[x,b,w,C]=c,$=n.data.get(s.dataId).values,[T,I,E,N]=u,{batchSize:A,filterDepth:R,filterHeight:P,filterWidth:F,inChannels:_,inDepth:L,inHeight:O,inWidth:D,outChannels:B,outDepth:V,outHeight:G,outWidth:Q,strideDepth:re,strideHeight:ie,strideWidth:ce}=d,se=R-1-d.padInfo.front,fe=P-1-d.padInfo.top,J=F-1-d.padInfo.left;for(let ae=0;ae<A;++ae)for(let le=0;le<_;++le)for(let Z=0;Z<L;++Z){const $e=Z-se,be=Math.max(0,Math.ceil($e/re)),Pe=Math.min(V,(R+$e)/re);for(let Ne=0;Ne<O;++Ne){const je=Ne-fe,Ze=Math.max(0,Math.ceil(je/ie)),sn=Math.min(G,(P+je)/ie);for(let Vt=0;Vt<D;++Vt){const er=Vt-J,an=Math.max(0,Math.ceil(er/ce)),ns=Math.min(Q,(F+er)/ce);let Mr=0;for(let So=be;So<Pe;++So){const ha=So*re-$e;for(let pa=Ze;pa<sn;++pa){const ma=pa*ie-je;for(let lh=an;lh<ns;++lh){const mS=lh*ce-er,gS=x*ae+b*So+w*pa+C*lh,uQ=T*(R-1-ha)+I*(P-1-ma)+E*(F-1-mS)+N*le;for(let Oy=0;Oy<B;++Oy){const dQ=v[gS+Oy],fQ=$[uQ+Oy];Mr+=dQ*fQ}}}}h[p*ae+m*Z+g*Ne+y*Vt+le]=Mr}}}return n.makeTensorInfo(f.shape,f.dtype,f.values)}const j5e={kernelName:rA,backendName:"cpu",kernelFunc:L5e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const B5e=mt($g,t=>Math.cos(t)),z5e={kernelName:$g,backendName:"cpu",kernelFunc:B5e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const W5e=mt(kg,t=>Math.cosh(t)),V5e={kernelName:kg,backendName:"cpu",kernelFunc:W5e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function U5e(t){const{inputs:e,backend:n,attrs:r}=t,{image:o,boxes:s,boxInd:i}=e,{cropSize:a,method:l,extrapolationValue:c}=r,[u,d,f,h]=o.shape,p=s.shape[0],[m,g]=a,y=Ge([p,m,g,h],"float32"),v=n.data.get(s.dataId).values,x=n.data.get(i.dataId).values,b=n.data.get(o.dataId).values,w=Ie(o.shape),C=Ie(y.shape);for(let $=0;$<p;$++){const T=$*4,I=v[T],E=v[T+1],N=v[T+2],A=v[T+3],R=x[$];if(R>=u)continue;const P=m>1?(N-I)*(d-1)/(m-1):0,F=g>1?(A-E)*(f-1)/(g-1):0;for(let _=0;_<m;_++){const L=m>1?I*(d-1)+_*P:.5*(I+N)*(d-1);if(L<0||L>d-1){for(let O=0;O<g;O++)for(let D=0;D<h;D++){const B=D+O*C[2]+_*C[1]+$*C[0];y.values[B]=c}continue}if(l==="bilinear"){const O=Math.floor(L),D=Math.ceil(L),B=L-O;for(let V=0;V<g;V++){const G=g>1?E*(f-1)+V*F:.5*(E+A)*(f-1);if(G<0||G>f-1){for(let ce=0;ce<h;ce++){const se=ce+V*C[2]+_*C[1]+$*C[0];y.values[se]=c}continue}const Q=Math.floor(G),re=Math.ceil(G),ie=G-Q;for(let ce=0;ce<h;ce++){let se=ce+Q*w[2]+O*w[1]+R*w[0];const fe=b[se];se=ce+re*w[2]+O*w[1]+R*w[0];const J=b[se];se=ce+Q*w[2]+D*w[1]+R*w[0];const ae=b[se];se=ce+re*w[2]+D*w[1]+R*w[0];const le=b[se],Z=fe+(J-fe)*ie,$e=ae+(le-ae)*ie;se=ce+V*C[2]+_*C[1]+$*C[0],y.values[se]=Z+($e-Z)*B}}}else for(let O=0;O<g;++O){const D=g>1?E*(f-1)+O*F:.5*(E+A)*(f-1);if(D<0||D>f-1){for(let G=0;G<h;G++){const Q=G+O*C[2]+_*C[1]+$*C[0];y.values[Q]=c}continue}const B=Math.round(D),V=Math.round(L);for(let G=0;G<h;G++){const Q=G+B*w[2]+V*w[1]+R*w[0],re=G+O*C[2]+_*C[1]+$*C[0];y.values[re]=b[Q]}}}}return n.makeTensorInfo(y.shape,y.dtype,y.values)}const G5e={kernelName:sA,backendName:"cpu",kernelFunc:U5e};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function H5e(t){const{inputs:e,backend:n,attrs:r}=t,{x:o}=e,{axis:s,exclusive:i,reverse:a}=r;Ce(o,"cumprod");const l=Wt([s],o.shape.length);let c=o;l!=null&&(c=Or({inputs:{x:o},backend:n,attrs:{perm:l}}));const u=nn(1,o.shape.length)[0];if(u!==c.shape.length-1)throw new Error(`backend.cumprod in CPU expects an inner-most axis=${c.shape.length-1} but got axis=${u}`);const d=Yr(c.dtype,"int32"),f=U2(ne(c.shape),d),h=n.data.get(c.dataId).values,p=c.shape[c.shape.length-1],m=a?(y,v)=>y+p-v-1:(y,v)=>y+v;for(let y=0;y<h.length;y+=p)for(let v=0;v<p;v++){const x=m(y,v);if(v===0)f[x]=i?1:h[x];else{const b=m(y,v-1);f[x]=i?h[b]*f[b]:h[x]*f[b]}}const g=n.makeTensorInfo(c.shape,d,f);if(l!=null){const y=Ol(l),v=Or({inputs:{x:g},backend:n,attrs:{perm:y}});return n.disposeIntermediateTensorInfo(g),n.disposeIntermediateTensorInfo(c),v}return g}const K5e={kernelName:oA,backendName:"cpu",kernelFunc:H5e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function q5e(t){const{inputs:e,backend:n,attrs:r}=t,{x:o}=e,{axis:s,exclusive:i,reverse:a}=r;Ce(o,"cumsum");const l=Wt([s],o.shape.length);let c=o;l!=null&&(c=Or({inputs:{x:o},backend:n,attrs:{perm:l}}));const u=nn(1,o.shape.length)[0];if(u!==c.shape.length-1)throw new Error(`backend.cumsum in CPU expects an inner-most axis=${c.shape.length-1} but got axis=${u}`);const d=Yr(c.dtype,"int32"),f=Xn(ne(c.shape),d),h=n.data.get(c.dataId).values,p=c.shape[c.shape.length-1],m=a?(y,v)=>y+p-v-1:(y,v)=>y+v;for(let y=0;y<h.length;y+=p)for(let v=0;v<p;v++){const x=m(y,v);if(v===0)f[x]=i?0:h[x];else{const b=m(y,v-1);f[x]=i?h[b]+f[b]:h[x]+f[b]}}const g=n.makeTensorInfo(c.shape,d,f);if(l!=null){const y=Ol(l),v=Or({inputs:{x:g},backend:n,attrs:{perm:y}});return n.disposeIntermediateTensorInfo(g),n.disposeIntermediateTensorInfo(c),v}return g}const X5e={kernelName:Qw,backendName:"cpu",kernelFunc:q5e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Y5e(t){const{inputs:e,backend:n,attrs:r}=t,{x:o,weights:s}=e,{size:i,binaryOutput:a}=r;if(o.shape.length===1){const l=n.data.get(o.dataId).values,c=n.data.get(s.dataId).values,u=hP(l,c,s.dtype,s.shape,i);return n.makeTensorInfo([i],s.dtype,u)}else if(o.shape.length===2){const l=n.bufferSync(o),c=n.bufferSync(s),u=fY(l,c,i,a);return n.makeTensorInfo(u.shape,s.dtype,u.values)}throw new Error(`Error in denseBincount: input must be at most rank 2, but got rank${o.shape.length}.`)}const Q5e={kernelName:iA,backendName:"cpu",kernelFunc:Y5e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Z5e(t){const{inputs:e,backend:n,attrs:r}=t,{x:o}=e,{blockSize:s,dataFormat:i}=r;M(i==="NHWC",()=>`Only NHWC dataFormat supported on CPU for depthToSpace. Got ${i}`);const a=o.shape[0],l=o.shape[1],c=o.shape[2],u=o.shape[3],d=l*s,f=c*s,h=u/(s*s),p=n.data.get(o.dataId).values,m=new Float32Array(a*d*f*h);let g=0;for(let y=0;y<a;++y)for(let v=0;v<d;++v){const x=Math.floor(v/s),b=v%s;for(let w=0;w<f;++w){const C=Math.floor(w/s),$=w%s,T=(b*s+$)*h;for(let I=0;I<h;++I){const N=I+T+u*(C+c*(x+l*y));m[g++]=p[N]}}}return n.makeTensorInfo([a,d,f,h],o.dtype,m)}const J5e={kernelName:aA,backendName:"cpu",kernelFunc:Z5e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function f7(t){const{inputs:e,backend:n,attrs:r}=t,{x:o,filter:s}=e,{strides:i,pad:a,dilations:l,dimRoundingMode:c}=r;Ce([o,s],"depthwiseConv2DNative");const u=Ie(o.shape),d=Ie(s.shape);let f=l;f==null&&(f=[1,1]),M(Qn(i,f),()=>`Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides ${i} and dilations '${f}'`);const h=Ln(o.shape,s.shape,i,f,a,c,!0),{filterHeight:p,filterWidth:m,dilationHeight:g,dilationWidth:y,padInfo:v}=h,x=v.left,b=v.top,w=h.outChannels/h.inChannels,C=new Mn(h.outShape,o.dtype),$=n.data.get(o.dataId).values,T=n.data.get(s.dataId).values,I=C.values;for(let E=0;E<h.batchSize;++E){const N=E*u[0],A=E*C.strides[0];for(let R=0;R<h.outHeight;++R){const P=A+R*C.strides[1],F=R*h.strideHeight-b;for(let _=0;_<p;++_){const L=F+_*g;if(L<0||L>=h.inHeight)continue;const O=_*d[0],D=N+L*u[1];for(let B=0;B<h.outWidth;++B){const V=P+B*C.strides[2],G=B*h.strideWidth-x;for(let Q=0;Q<m;++Q){const re=G+Q*y;if(re<0||re>=h.inWidth)continue;const ie=O+Q*d[1],ce=D+re*h.inChannels;let se=V,fe=ie;for(let J=0;J<h.inChannels;++J){const ae=$[ce+J];for(let le=0;le<w;++le)I[se+le]+=ae*T[fe+le];se+=w,fe+=w}}}}}}return n.makeTensorInfo(C.shape,C.dtype,C.values)}const e6e={kernelName:Zw,backendName:"cpu",kernelFunc:f7};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function t6e(t){const{inputs:e,backend:n,attrs:r}=t,{x:o,dy:s}=e,{strides:i,dilations:a,pad:l,dimRoundingMode:c,filterShape:u}=r;Ce([o,s],"depthwiseConv2dNativeBackpropFilter");const d=Ln(o.shape,u,i,a,l,c,!0),{strideHeight:f,strideWidth:h,filterHeight:p,filterWidth:m}=d,g=new Mn(d.filterShape,"float32"),y=d.padInfo.left,v=d.padInfo.top,x=d.outChannels/d.inChannels,b=n.data.get(o.dataId).values,w=new Mn(o.shape,o.dtype,b),C=n.data.get(s.dataId).values,$=new Mn(s.shape,s.dtype,C);for(let T=0;T<p;++T){const I=Math.max(0,Math.ceil((v-T)/f)),E=Math.min(d.outHeight,(d.inHeight+v-T)/f);for(let N=0;N<m;++N){const A=Math.max(0,Math.ceil((y-N)/h)),R=Math.min(d.outWidth,(d.inWidth+y-N)/h);for(let P=0;P<d.outChannels;++P){const F=Math.trunc(P/x),_=P%x;let L=0;for(let O=0;O<d.batchSize;++O)for(let D=I;D<E;++D){const B=T+D*f-v;for(let V=A;V<R;++V){const G=N+V*h-y;L+=w.get(O,B,G,F)*$.get(O,D,V,P)}}g.set(L,T,N,F,_)}}}return n.makeTensorInfo(g.shape,g.dtype,g.values)}const n6e={kernelName:lA,backendName:"cpu",kernelFunc:t6e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function r6e(t){const{inputs:e,backend:n,attrs:r}=t,{dy:o,filter:s}=e,{strides:i,dilations:a,pad:l,dimRoundingMode:c,inputShape:u}=r;Ce([o,s],"depthwiseConv2DNativeBackpropInput");const d=Ie(o.shape),f=Ie(s.shape),h=Ln(u,s.shape,i,a,l,c,!0),p=new Mn(h.inShape,"float32"),m=p.values,[g,y,v]=p.strides,x=n.data.get(o.dataId).values,[b,w,C]=d,$=n.data.get(s.dataId).values,[T,I,E]=f,{batchSize:N,filterHeight:A,filterWidth:R,inChannels:P,inHeight:F,inWidth:_,outChannels:L,outHeight:O,outWidth:D,strideHeight:B,strideWidth:V}=h,G=A-1-h.padInfo.top,Q=R-1-h.padInfo.left,re=L/P;for(let ie=0;ie<N;++ie)for(let ce=0;ce<P;++ce)for(let se=0;se<F;++se){const fe=se-G,J=Math.max(0,Math.ceil(fe/B)),ae=Math.min(O,(A+fe)/B);for(let le=0;le<_;++le){const Z=le-Q,$e=Math.max(0,Math.ceil(Z/V)),be=Math.min(D,(R+Z)/V);let Pe=0;for(let Ne=J;Ne<ae;++Ne){const je=Ne*B-fe;for(let Ze=$e;Ze<be;++Ze){const sn=Ze*V-Z,Vt=b*ie+w*Ne+C*Ze,er=T*(A-1-je)+I*(R-1-sn)+E*ce;for(let an=0;an<re;++an){const ns=ce*re+an,Mr=x[Vt+ns],So=$[er+an];Pe+=Mr*So}}}m[g*ie+y*se+v*le+ce]=Pe}}return n.makeTensorInfo(p.shape,p.dtype,p.values)}const o6e={kernelName:cA,backendName:"cpu",kernelFunc:r6e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function s6e(t){const{inputs:e,backend:n}=t,{x:r}=e,o=ne(r.shape),s=n.data.get(r.dataId).values,i=Ge([o,o],r.dtype),a=i.values;for(let c=0;c<s.length;c++)a[c*o+c]=s[c];const l=[...r.shape,...r.shape];return n.makeTensorInfo(l,i.dtype,i.values)}const i6e={kernelName:PK,backendName:"cpu",kernelFunc:s6e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const a6e={kernelName:Jw,backendName:"cpu",kernelFunc:({inputs:t,backend:e,attrs:n})=>{const{x:r,filter:o}=t,{strides:s,pad:i,dilations:a}=n,l=e,c=l.data.get(r.dataId).values,u=r.shape.length,d=l.data.get(o.dataId).values,f=o.shape.length,{batchSize:h,inHeight:p,inWidth:m,inChannels:g,outHeight:y,outWidth:v,padInfo:x,strideHeight:b,strideWidth:w,filterHeight:C,filterWidth:$,dilationHeight:T,dilationWidth:I,outShape:E}=cy(r.shape,o.shape,s,i,"NHWC",a),N=ne(E),A=E.length,R=Qt(r.dtype,N);for(let F=0;F<h;++F)for(let _=0;_<y;++_){const L=_*b-x.top;for(let O=0;O<v;++O){const D=O*w-x.left;for(let B=0;B<g;++B){let V=Number.MIN_SAFE_INTEGER;for(let Q=0;Q<C;++Q){const re=L+Q*T;if(re>=0&&re<p)for(let ie=0;ie<$;++ie){const ce=D+ie*I;if(ce>=0&&ce<m){const se=ai([F,re,ce,B],u,Ie(r.shape)),fe=ai([Q,ie,B],f,Ie(o.shape)),J=c[se]+d[fe];J>V&&(V=J)}}}const G=ai([F,_,O,B],A,Ie(E));R[G]=V}}}return{dataId:l.write(cu(R,r.dtype),E,r.dtype),shape:E,dtype:r.dtype}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const l6e={kernelName:uI,backendName:"cpu",kernelFunc:({inputs:t,backend:e,attrs:n})=>{const{x:r,filter:o,dy:s}=t,{strides:i,pad:a,dilations:l}=n,c=e,u=Ts(r.shape,c.data.get(r.dataId).values),d=Ts(o.shape,c.data.get(o.dataId).values),{batchSize:f,inHeight:h,inWidth:p,inChannels:m,outHeight:g,outWidth:y,padInfo:v,strideHeight:x,strideWidth:b,filterHeight:w,filterWidth:C,dilationHeight:$,dilationWidth:T,outShape:I}=cy(r.shape,o.shape,i,a,"NHWC",l);M(s.rank===I.length,()=>`Error in ${uI}, dy must have the same rank as output ${I.length}, but got ${s.rank}`);const E=Ts(I,c.data.get(s.dataId).values),N=EK(o.shape,o.dtype);for(let R=0;R<f;++R)for(let P=0;P<g;++P){const F=P*x-v.top;for(let _=0;_<y;++_){const L=_*b-v.left;for(let O=0;O<m;++O){let D=Number.MIN_SAFE_INTEGER,B=0,V=0;for(let G=0;G<w;++G){const Q=F+G*$;if(Q>=0&&Q<h)for(let re=0;re<C;++re){const ie=L+re*T;if(ie>=0&&ie<p){const ce=u[R][Q][ie][O]+d[G][re][O];ce>D&&(D=ce,B=G,V=re)}}}N[B][V][O]+=E[R][P][_][O]}}}return{dataId:c.write(cu(N,r.dtype),o.shape,o.dtype),shape:o.shape,dtype:o.dtype}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const c6e={kernelName:cI,backendName:"cpu",kernelFunc:({inputs:t,backend:e,attrs:n})=>{const{x:r,filter:o,dy:s}=t,{strides:i,pad:a,dilations:l}=n,c=e,u=Ts(r.shape,c.data.get(r.dataId).values),d=Ts(o.shape,c.data.get(o.dataId).values),{batchSize:f,inHeight:h,inWidth:p,inChannels:m,outHeight:g,outWidth:y,padInfo:v,strideHeight:x,strideWidth:b,filterHeight:w,filterWidth:C,dilationHeight:$,dilationWidth:T,outShape:I}=cy(r.shape,o.shape,i,a,"NHWC",l);M(s.rank===I.length,()=>`Error in ${cI}, dy must have the same rank as output ${I.length}, but got ${s.rank}`);const E=Ts(I,c.data.get(s.dataId).values),N=EK(r.shape,r.dtype);for(let R=0;R<f;++R)for(let P=0;P<g;++P){const F=P*x-v.top;for(let _=0;_<y;++_){const L=_*b-v.left;for(let O=0;O<m;++O){let D=Number.MIN_SAFE_INTEGER,B=F<0?0:F,V=L<0?0:L;for(let G=0;G<w;++G){const Q=F+G*$;if(Q>=0&&Q<h)for(let re=0;re<C;++re){const ie=L+re*T;if(ie>=0&&ie<p){const ce=u[R][Q][ie][O]+d[G][re][O];ce>D&&(D=ce,B=Q,V=ie)}}}N[R][B][V][O]+=E[R][P][_][O]}}}return{dataId:c.write(cu(N,r.dtype),r.shape,r.dtype),shape:r.shape,dtype:r.dtype}}};/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function u6e(t){const{inputs:e,backend:n,attrs:r}=t,{image:o}=e,{canvas:s,options:i}=r,{contextOptions:a,imageOptions:l}=i||{},c=(l==null?void 0:l.alpha)||1,u=(a==null?void 0:a.contextType)||"2d";if(u!=="2d")throw new Error(`Context type ${a.contextType} is not supported by the CPU backend.`);const d=s.getContext(u,(a==null?void 0:a.contextAttributes)||{});if(d==null)throw new Error(`Could not get the context with ${u} type.`);const[f,h]=o.shape.slice(0,2),p=o.shape.length===2?1:o.shape[2],m=n.data.get(o.dataId).values,g=o.dtype==="float32"?255:1,y=new Uint8ClampedArray(h*f*4);for(let x=0;x<f*h;++x){const b=[0,0,0,255*c];for(let C=0;C<p;C++){const $=m[x*p+C];if(o.dtype==="float32"){if($<0||$>1)throw new Error(`Tensor values for a float32 Tensor must be in the range [0 - 1] but encountered ${$}.`)}else if(o.dtype==="int32"&&($<0||$>255))throw new Error(`Tensor values for a int32 Tensor must be in the range [0 - 255] but encountered ${$}.`);p===1?(b[0]=$*g,b[1]=$*g,b[2]=$*g):b[C]=$*g}const w=x*4;y[w+0]=Math.round(b[0]),y[w+1]=Math.round(b[1]),y[w+2]=Math.round(b[2]),y[w+3]=Math.round(b[3])}s.width=h,s.height=f;const v=new ImageData(y,h,f);return d.putImageData(v,0,0),o}const d6e={kernelName:GMe,backendName:"cpu",kernelFunc:u6e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ky(t){const{inputs:e,backend:n,attrs:r}=t,{x:o}=e,{axis:s,keepDims:i}=r;Ce(o,"sum");let a;o.dtype==="bool"?a=yl({inputs:{x:o},backend:n,attrs:{dtype:"int32"}}):a=vi({inputs:{x:o},backend:n});const l=a.shape.length,c=He(s,a.shape),u=Wt(c,l);let d=c,f=a;u!=null&&(f=Or({inputs:{x:a},backend:n,attrs:{perm:u}}),d=nn(d.length,l)),jn("sum",d,f.shape.length);const[h,p]=On(f.shape,d),m=Yr(f.dtype,"int32");let g=n0(n,h,m);const y=ne(p),v=n.data.get(g.dataId).values,x=n.data.get(f.dataId).values;for(let b=0;b<v.length;++b){const w=b*y;let C=0;for(let $=0;$<y;++$)C+=x[w+$];v[b]=C}if(i){const b=un(g.shape,c),w=g;g=kt({inputs:{x:g},backend:n,attrs:{shape:b}}),n.disposeIntermediateTensorInfo(w)}return n.disposeIntermediateTensorInfo(a),u!=null&&n.disposeIntermediateTensorInfo(f),g}const f6e={kernelName:P1,backendName:"cpu",kernelFunc:ky};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function h6e(t){const{inputs:e,backend:n,attrs:r}=t,{equation:o}=r,s=e,{allDims:i,summedDims:a,idDims:l}=FO(o,s.length);jO(i.length,l,s);const{path:c,steps:u}=BO(a,l),d=u.length;let f=null,h=i.length;const p=[];for(let m=0;m<d;++m){for(const g of u[m]){const{permutationIndices:y,expandDims:v}=LO(h,l[g]);let x;zO(y)?x=s[g]:(x=Or({inputs:{x:s[g]},backend:n,attrs:{perm:y}}),p.push(x));const b=x.shape.slice();for(let w=0;w<v.length;++w)b.splice(v[w],0,1);dt(x.shape,b)||(x=kt({inputs:{x},backend:n,attrs:{shape:b}}),p.push(x)),f===null?f=x:(f=cS({inputs:{a:x,b:f},backend:n}),p.push(f))}m<d-1&&(c[m]>=0&&(f=ky({inputs:{x:f},backend:n,attrs:{axis:c[m]-(i.length-h),keepDims:!1}}),p.push(f)),h--)}for(const m of p)m!==f&&n.disposeIntermediateTensorInfo(m);return f}const p6e={kernelName:uA,backendName:"cpu",kernelFunc:h6e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function m6e(t){const{inputs:e,backend:n}=t,{dy:r,y:o}=e;Ce([r,o],"eluGrad");const s=new Float32Array(ne(o.shape)),i=n.data.get(o.dataId).values,a=n.data.get(r.dataId).values;for(let l=0;l<i.length;++l){const c=i[l];c>=0?s[l]=a[l]:s[l]=a[l]*(c+1)}return n.makeTensorInfo(o.shape,"float32",s)}const g6e={kernelName:dA,backendName:"cpu",kernelFunc:m6e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const y6e=AO,v6e=OO,x6e=PO,b6e=RO,w6e=_O,S6e=DO,C6e=mt(Eg,t=>{const e=Math.sign(t),n=Math.abs(t),r=1/(1+y6e*n);return e*(1-((((S6e*r+w6e)*r+b6e)*r+x6e)*r+v6e)*r*Math.exp(-n*n))}),$6e={kernelName:Eg,backendName:"cpu",kernelFunc:C6e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function s0(t){const{inputs:e,backend:n,attrs:r}=t,{input:o}=e,{dim:s}=r,i=o.shape.length,a=o.shape.slice();let l=s;return s<0&&(M(-(i+1)<=s,()=>`Axis must be in the interval [${-(i+1)}, ${i}]`),l=i+s+1),a.splice(l,0,1),kt({inputs:{x:o},backend:n,attrs:{shape:a}})}const k6e={kernelName:t1,backendName:"cpu",kernelFunc:s0};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const T6e=on((t,e)=>t/e),xP=wn(Tg,T6e),FI={kernelName:Tg,backendName:"cpu",kernelFunc:xP};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function h7(t,e,n){const r=t.shape,o=r[0],s=r[1],i=n.data.get(t.dataId),a=i.complexTensorInfos.real,l=i.complexTensorInfos.imag,c=[o,s],u=ne(c),d=qn("float32",u),f=qn("float32",u);for(let g=0;g<o;g++){const y=Qc({inputs:{x:a},backend:n,attrs:{begin:[g,0],size:[1,s]}}),v=Qc({inputs:{x:l},backend:n,attrs:{begin:[g,0],size:[1,s]}}),x=Wr({inputs:{real:y,imag:v},backend:n}),{real:b,imag:w}=I6e(x,e,n),C=ra(b,w);for(let $=0;$<s;$++){const T=MO(C,$);d[g*s+$]=T.real,f[g*s+$]=T.imag}n.disposeIntermediateTensorInfo(y),n.disposeIntermediateTensorInfo(v),n.disposeIntermediateTensorInfo(x)}const h=n.makeTensorInfo(c,"float32",d),p=n.makeTensorInfo(c,"float32",f),m=Wr({inputs:{real:h,imag:p},backend:n});return n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(p),m}function I6e(t,e,n){const r=ne(t.shape),o=n.data.get(t.dataId),s=n.data.get(o.complexTensorInfos.real.dataId).values,i=n.data.get(o.complexTensorInfos.imag.dataId).values;if(E6e(r)){const a=LI(s,i,r,e,n),l=[t.shape[0],t.shape[1]];if(e){const c=n.makeTensorInfo(l,"float32",a.real),u=n.makeTensorInfo(l,"float32",a.imag),d=n.makeTensorInfo([],"float32",Nl(r,"float32")),f=vi({inputs:{x:d},backend:n}),h=FI.kernelFunc({inputs:{a:c,b:d},backend:n}),p=FI.kernelFunc({inputs:{a:u,b:f},backend:n}),m=n.data.get(h.dataId).values,g=n.data.get(p.dataId).values;return n.disposeIntermediateTensorInfo(c),n.disposeIntermediateTensorInfo(u),n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(p),{real:m,imag:g}}return a}else{const a=ra(s,i),l=N6e(a,r,e);return T8(l)}}function E6e(t){return(t&t-1)===0}function LI(t,e,n,r,o){if(n===1)return{real:t,imag:e};const s=ra(t,e),i=n/2,a=I8(s),l=a.real,c=a.imag,u=[l.length],d=o.makeTensorInfo(u,"float32",l),f=o.makeTensorInfo(u,"float32",c),h=Wr({inputs:{real:d,imag:f},backend:o}),p=E8(s),m=p.real,g=p.imag,y=[m.length],v=o.makeTensorInfo(y,"float32",m),x=o.makeTensorInfo(y,"float32",g),b=Wr({inputs:{real:v,imag:x},backend:o}),w=LI(l,c,i,r,o),C=w.real,$=w.imag,T=[C.length],I=o.makeTensorInfo(T,"float32",C),E=o.makeTensorInfo(T,"float32",$),N=Wr({inputs:{real:I,imag:E},backend:o}),A=LI(m,g,i,r,o),R=A.real,P=A.imag,F=[R.length],_=o.makeTensorInfo(F,"float32",R),L=o.makeTensorInfo(F,"float32",P),O=Wr({inputs:{real:_,imag:L},backend:o}),D=A8(n,r),B=[D.real.length],V=o.makeTensorInfo(B,"float32",D.real),G=o.makeTensorInfo(B,"float32",D.imag),Q=Wr({inputs:{real:V,imag:G},backend:o}),re=cS({inputs:{a:Q,b:O},backend:o}),ie=yf({inputs:{a:N,b:re},backend:o}),ce=yP({inputs:{a:N,b:re},backend:o}),se=Yc({inputs:{input:ie},backend:o}),fe=Yc({inputs:{input:ce},backend:o}),J=vf({inputs:{input:ie},backend:o}),ae=vf({inputs:{input:ce},backend:o}),le=xf({inputs:[se,fe],backend:o,attrs:{axis:0}}),Z=xf({inputs:[J,ae],backend:o,attrs:{axis:0}}),$e=o.data.get(le.dataId).values,be=o.data.get(Z.dataId).values;return o.disposeIntermediateTensorInfo(d),o.disposeIntermediateTensorInfo(f),o.disposeIntermediateTensorInfo(h),o.disposeIntermediateTensorInfo(v),o.disposeIntermediateTensorInfo(x),o.disposeIntermediateTensorInfo(b),o.disposeIntermediateTensorInfo(I),o.disposeIntermediateTensorInfo(E),o.disposeIntermediateTensorInfo(N),o.disposeIntermediateTensorInfo(_),o.disposeIntermediateTensorInfo(L),o.disposeIntermediateTensorInfo(O),o.disposeIntermediateTensorInfo(V),o.disposeIntermediateTensorInfo(G),o.disposeIntermediateTensorInfo(Q),o.disposeIntermediateTensorInfo(re),o.disposeIntermediateTensorInfo(ie),o.disposeIntermediateTensorInfo(ce),o.disposeIntermediateTensorInfo(se),o.disposeIntermediateTensorInfo(J),o.disposeIntermediateTensorInfo(fe),o.disposeIntermediateTensorInfo(ae),o.disposeIntermediateTensorInfo(le),o.disposeIntermediateTensorInfo(Z),{real:$e,imag:be}}function N6e(t,e,n){const r=new Float32Array(e*2);for(let o=0;o<e;o++){let s=0,i=0;for(let a=0;a<e;a++){const l=O8(o*a,e,n),c=MO(t,a);s+=c.real*l.real-c.imag*l.imag,i+=c.real*l.imag+c.imag*l.real}n&&(s/=e,i/=e),N8(r,s,i,o)}return r}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function A6e(t){const{inputs:e,backend:n}=t,{input:r}=e,o=ne(r.shape),s=r.shape[r.shape.length-1],i=o/s,a=kt({inputs:{x:r},backend:n,attrs:{shape:[i,s]}}),l=h7(a,!1,n),c=kt({inputs:{x:l},backend:n,attrs:{shape:r.shape}});return n.disposeIntermediateTensorInfo(a),n.disposeIntermediateTensorInfo(l),c}const O6e={kernelName:fA,backendName:"cpu",kernelFunc:A6e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bP(t){const{backend:e,attrs:n}=t,{shape:r,value:o,dtype:s}=n,i=s||Gf(o),a=Qt(i,ne(r));return R6e(a,o,i),e.makeTensorInfo(r,i,a)}const P6e={kernelName:hA,backendName:"cpu",kernelFunc:bP};function R6e(t,e,n){t.fill(e)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const _6e={kernelName:pA,backendName:"cpu",kernelFunc:({inputs:t,attrs:e,backend:n})=>{const{image:r}=t,o=n,s=qn(r.dtype,ne(r.shape)),[i,a,l,c]=r.shape,u=o.data.get(r.dataId).values;for(let f=0;f<i;f++){const h=f*l*a*c;for(let p=0;p<a;p++){const m=p*(l*c);for(let g=0;g<l;g++){const y=g*c;for(let v=0;v<c;v++){const x=Math.round(l-g-1),b=h+m+y+v;let w=u[b];if(x>=0&&x<l){const C=x*c,$=h+m+C+v;w=u[$]}s[b]=w}}}}return{dataId:o.write(s,r.shape,r.dtype),shape:r.shape,dtype:r.dtype}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function D6e(t){const{inputs:e,backend:n,attrs:r}=t,{x:o,filter:s,bias:i,preluActivationWeights:a}=e,{strides:l,pad:c,dataFormat:u,dilations:d,dimRoundingMode:f,activation:h,leakyreluAlpha:p}=r;let m=d7({inputs:{x:o,filter:s},backend:n,attrs:{strides:l,pad:c,dataFormat:u,dilations:d,dimRoundingMode:f}});if(i){const g=m;if(u==="NCHW"&&i.shape.length===1&&i.shape[0]!==1){const y=kt({inputs:{x:i},backend:n,attrs:{shape:[i.shape[0],1,1]}});m=yf({inputs:{a:m,b:y},backend:n}),n.disposeIntermediateTensorInfo(y)}else m=yf({inputs:{a:m,b:i},backend:n});n.disposeIntermediateTensorInfo(g)}if(h){const g=m;if(u==="NCHW"&&h==="prelu"&&a.shape.length===1&&a.shape[0]!==1){const y=kt({inputs:{x:a},backend:n,attrs:{shape:[a.shape[0],1,1]}});m=o0(n,m,h,y,p),n.disposeIntermediateTensorInfo(y)}else m=o0(n,m,h,a,p);n.disposeIntermediateTensorInfo(g)}return m}const M6e={kernelName:Lb,backendName:"cpu",kernelFunc:D6e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function F6e(t){const{inputs:e,backend:n,attrs:r}=t,{x:o,filter:s,bias:i,preluActivationWeights:a}=e,{strides:l,pad:c,dataFormat:u,dilations:d,dimRoundingMode:f,activation:h,leakyreluAlpha:p}=r;let m=f7({inputs:{x:o,filter:s},backend:n,attrs:{strides:l,pad:c,dataFormat:u,dilations:d,dimRoundingMode:f}});if(i){const g=m;m=yf({inputs:{a:m,b:i},backend:n}),n.disposeIntermediateTensorInfo(g)}if(h){const g=m;m=o0(n,m,h,a,p),n.disposeIntermediateTensorInfo(g)}return m}const L6e={kernelName:QK,backendName:"cpu",kernelFunc:F6e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function j6e(t){const{inputs:e,backend:n}=t,{params:r,indices:o}=e,s=ne(r.shape),i=o.shape,a=i[i.length-1],[l,c,u,d]=xO(r,o);if(c===0)return n.makeTensorInfo(l,r.dtype,[]);const f=n.data.get(o.dataId).values,h=n.bufferSync(r),p=CY(f,h,r.dtype,c,a,u,d,r.shape,s);return n.makeTensorInfo(l,r.dtype,p.values)}const B6e={kernelName:RK,backendName:"cpu",kernelFunc:j6e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function z6e(t){const{inputs:e,backend:n,attrs:r}=t,{x:o,indices:s}=e,{axis:i,batchDims:a}=r;Ce([o,s],"gatherV2");const l=He(i,o.shape)[0],c=n.data.get(s.dataId).values,u=o.shape[l];for(let b=0;b<c.length;++b){const w=c[b];M(w<=u-1&&w>=0,()=>`GatherV2: the index value ${w} is not in [0, ${u-1}]`)}let d=a;a==null&&(d=0);const f=ne(s.shape),h=VO(o,s,l,d),p=kt({inputs:{x:o},backend:n,attrs:{shape:[h.batchSize,h.outerSize,h.dimSize,h.sliceSize]}}),m=kt({inputs:{x:s},backend:n,attrs:{shape:[h.batchSize,f/h.batchSize]}}),g=[h.batchSize,h.outerSize,f/h.batchSize,h.sliceSize],y=n.bufferSync(m),v=n.bufferSync(p),x=$Y(v,y,g);return n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(m),n.makeTensorInfo(h.outputShape,x.dtype,x.values)}const W6e={kernelName:r1,backendName:"cpu",kernelFunc:z6e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function V6e(t){const{inputs:e,backend:n}=t,{input:r}=e,o=ne(r.shape),s=r.shape[r.shape.length-1],i=o/s,a=kt({inputs:{x:r},backend:n,attrs:{shape:[i,s]}}),l=h7(a,!0,n),c=kt({inputs:{x:l},backend:n,attrs:{shape:r.shape}});return n.disposeIntermediateTensorInfo(a),n.disposeIntermediateTensorInfo(l),c}const U6e={kernelName:mA,backendName:"cpu",kernelFunc:V6e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const G6e=mt(Dg,t=>Number.isFinite(t)?1:0,"bool"),H6e={kernelName:Dg,backendName:"cpu",kernelFunc:G6e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const K6e=mt(Mg,t=>Math.abs(t)===1/0?1:0,"bool"),q6e={kernelName:Mg,backendName:"cpu",kernelFunc:K6e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const X6e=mt(Fg,t=>Number.isNaN(t)?1:0,"bool"),Y6e={kernelName:Fg,backendName:"cpu",kernelFunc:X6e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Q6e(t){const{backend:e,attrs:n}=t,{start:r,stop:o,num:s}=n,i=NY(r,o,s);return e.makeTensorInfo([i.length],"float32",i)}const Z6e={kernelName:_K,backendName:"cpu",kernelFunc:Q6e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const J6e=mt(jg,t=>Math.log1p(t)),eKe={kernelName:jg,backendName:"cpu",kernelFunc:J6e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const tKe=on((t,e)=>t&&e),nKe=wn(l1,tKe,null,"bool"),rKe={kernelName:l1,backendName:"cpu",kernelFunc:nKe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const oKe=mt(c1,t=>t?0:1,"bool"),sKe={kernelName:c1,backendName:"cpu",kernelFunc:oKe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const iKe=on((t,e)=>t||e),aKe=wn(u1,iKe,null,"bool"),lKe={kernelName:u1,backendName:"cpu",kernelFunc:aKe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cKe(t){const{inputs:e,backend:n,attrs:r}=t,{x:o}=e,{depthRadius:s,bias:i,alpha:a,beta:l}=r;Ce(o,"LRN");const c=o.shape[3],u=c-1,d=n.data.get(o.dataId).values,f=ne(o.shape),h=new Float32Array(f);function p(m){const g=m%c;let y=m-g+Math.max(0,g-s);const v=m-g+Math.min(g+s,u);let x=0;for(;y<=v;y++){const b=d[y];x+=b*b}return x}for(let m=0;m<f;m++){const g=p(m),y=d[m]*Math.pow(i+a*g,-l);h[m]=y}return n.makeTensorInfo(o.shape,o.dtype,h)}const uKe={kernelName:d1,backendName:"cpu",kernelFunc:cKe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dKe(t){const{inputs:e,backend:n,attrs:r}=t,{x:o,y:s,dy:i}=e,{depthRadius:a,bias:l,alpha:c,beta:u}=r;Ce(i,"LRNGrad");const d=ne(i.shape),f=i.shape[3],h=n.data.get(i.dataId).values,p=n.data.get(o.dataId).values,m=n.data.get(s.dataId).values,g=new Float32Array(d),y=d;for(let v=0;v<y;v++){const x=v%f,b=v-x+Math.max(0,x-a),w=v-x+Math.min(f,x+a+1);let C=0;for(let $=b;$<w;$++)C+=Math.pow(p[$],2);C=c*C+l;for(let $=b;$<w;$++){let T=-2*c*u*p[$]*m[v]/C;v===$&&(T+=Math.pow(C,-u)),T*=h[v],g[$]+=T}}return n.makeTensorInfo(i.shape,o.dtype,g)}const fKe={kernelName:yA,backendName:"cpu",kernelFunc:dKe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function p7(t){const{inputs:e,backend:n,attrs:r}=t,{x:o}=e,{reductionIndices:s,keepDims:i}=r,a=n;let l=o.shape;const c=l.length,u=He(s,l);let d=u;const f=Wt(d,c);let h=a.data.get(o.dataId).values;if(f!=null){const b=new Array(c);for(let w=0;w<b.length;w++)b[w]=l[f[w]];h=mP(h,l,o.dtype,f,b),d=nn(d.length,c),l=b}Ce(o,"max"),jn("max",d,c);const[p,m]=On(l,d),g=ne(m),y=OY(h,g,p,o.dtype),v=a.write(y,p,o.dtype);let x=p;return i&&(x=un(p,u)),{dataId:v,shape:x,dtype:o.dtype}}const hKe={kernelName:f1,backendName:"cpu",kernelFunc:p7};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pKe(t){const{inputs:e,backend:n,attrs:r}=t,{x:o}=e;Ce(o,"maxPool");const{filterSize:s,strides:i,pad:a,dimRoundingMode:l}=r,c=1;M(Qn(i,c),()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${i} and dilations '${c}'`);const u=Jo(o.shape,s,i,c,a,l);let d;if(u.filterWidth===1&&u.filterHeight===1&&dt(u.inShape,u.outShape))d=vi({inputs:{x:o},backend:n});else{const f=n.data.get(o.dataId).values,h=Ie(o.shape),p=vP(f,o.shape,o.dtype,h,u,"max");d=n.makeTensorInfo(u.outShape,o.dtype,p.values)}return d}const mKe={kernelName:h1,backendName:"cpu",kernelFunc:pKe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gKe(t){const{inputs:e,backend:n,attrs:r}=t,{x:o}=e,{filterSize:s,strides:i,pad:a,dimRoundingMode:l,dataFormat:c}=r;Ce(o,"maxPool3d");const u=ua(o.shape,s,i,1,a,l,c),d=n.data.get(o.dataId).values,f=u7(d,o.shape,o.dtype,Ie(o.shape),u,"max");return n.makeTensorInfo(f.shape,"float32",f.values)}const yKe={kernelName:p1,backendName:"cpu",kernelFunc:gKe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vKe(t){const{inputs:e,backend:n,attrs:r}=t,{dy:o,input:s}=e,{filterSize:i,strides:a,pad:l,dimRoundingMode:c}=r;Ce([o,s],"maxPool3DGrad");const u=ua(s.shape,i,a,1,l,c),d=n.bufferSync(s),f=i5e(d,u),h=u.strideDepth,p=u.strideHeight,m=u.strideWidth,g=u.dilationDepth,y=u.dilationHeight,v=u.dilationWidth,x=u.effectiveFilterDepth,b=u.effectiveFilterHeight,w=u.effectiveFilterWidth,C=x-1-u.padInfo.front,$=w-1-u.padInfo.left,T=b-1-u.padInfo.top,I=Ge(s.shape,"float32"),E=n.bufferSync(o);for(let N=0;N<u.batchSize;++N)for(let A=0;A<u.inChannels;++A)for(let R=0;R<u.inDepth;++R)for(let P=0;P<u.inHeight;++P)for(let F=0;F<u.inWidth;++F){const _=R-C,L=P-T,O=F-$;let D=0;for(let B=0;B<x;B+=g){const V=(_+B)/h;if(!(V<0||V>=u.outDepth||Math.floor(V)!==V))for(let G=0;G<b;G+=y){const Q=(L+G)/p;if(!(Q<0||Q>=u.outHeight||Math.floor(Q)!==Q))for(let re=0;re<w;re+=v){const ie=(O+re)/m;if(ie<0||ie>=u.outWidth||Math.floor(ie)!==ie)continue;const ce=x*b*w-1-f.get(N,V,Q,ie,A),se=B*b*w+G*w+re,fe=ce===se?1:0;if(fe===0)continue;const J=E.get(N,V,Q,ie,A);D+=J*fe}}}I.set(D,N,R,P,F,A)}return n.makeTensorInfo(I.shape,I.dtype,I.values)}const xKe={kernelName:xA,backendName:"cpu",kernelFunc:vKe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bKe(t){const{inputs:e,backend:n,attrs:r}=t,{dy:o,input:s,output:i}=e,a=s;Ce([s,i],"maxPoolGrad");const{filterSize:l,strides:c,pad:u,dimRoundingMode:d}=r,f=Jo(a.shape,l,c,1,u,d),h=n.data.get(a.dataId).values,p=Ge(f.outShape,a.dtype,c7(h,a.shape,a.dtype,f).values),m=f.strideHeight,g=f.strideWidth,y=f.dilationHeight,v=f.dilationWidth,x=f.effectiveFilterHeight,b=f.effectiveFilterWidth,w=b-1-f.padInfo.left,C=x-1-f.padInfo.top,$=Ge(a.shape,"float32"),T=n.data.get(o.dataId).values,I=Ge(o.shape,"float32",T);for(let E=0;E<f.batchSize;++E)for(let N=0;N<f.inChannels;++N)for(let A=0;A<f.inHeight;++A)for(let R=0;R<f.inWidth;++R){const P=A-C,F=R-w;let _=0;for(let L=0;L<x;L+=y){const O=(P+L)/m;if(!(O<0||O>=f.outHeight||Math.floor(O)!==O))for(let D=0;D<b;D+=v){const B=(F+D)/g;if(B<0||B>=f.outWidth||Math.floor(B)!==B)continue;const V=x*b-1-p.get(E,O,B,N),G=L*b+D,Q=V===G?1:0;if(Q===0)continue;const re=I.get(E,O,B,N);_+=re*Q}}$.set(_,E,A,R,N)}return n.makeTensorInfo($.shape,$.dtype,$.values)}const wKe={kernelName:vA,backendName:"cpu",kernelFunc:bKe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function SKe(t,e,n,r,o){const s=Ie(e),i=vP(t,e,n,s,o,"max"),a=c7(t,e,n,o,!0,r);return[i.values,a.values]}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const CKe={kernelName:DK,backendName:"cpu",kernelFunc:({inputs:t,attrs:e,backend:n})=>{const{x:r}=t,{filterSize:o,strides:s,pad:i,includeBatchInIndex:a}=e,l=n;Ce(r,"MaxPoolWithArgmax");const c=l.data.get(r.dataId).values,u=Jo(r.shape,o,s,[1,1],i),[d,f]=SKe(c,r.shape,r.dtype,a,u),h=l.write(d,u.outShape,r.dtype),p=l.write(f,u.outShape,r.dtype);return[{dataId:h,shape:u.outShape,dtype:r.dtype},{dataId:p,shape:u.outShape,dtype:"int32"}]}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $Ke(t){const{inputs:e,backend:n,attrs:r}=t,{x:o}=e,{axis:s,keepDims:i}=r,a=He(s,o.shape),c=On(o.shape,a)[1],u=ne(c),d=[],f=n.makeTensorInfo([],"float32",new Float32Array([u]));d.push(f);const h=yl({inputs:{x:o},backend:n,attrs:{dtype:"float32"}});d.push(h);const p=xP({inputs:{a:h,b:f},backend:n});d.push(p);const m=ky({inputs:{x:p},backend:n,attrs:{axis:s,keepDims:i}});return d.forEach(g=>n.disposeIntermediateTensorInfo(g)),m}const kKe={kernelName:m1,backendName:"cpu",kernelFunc:$Ke};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function TKe(t){const{inputs:e,backend:n,attrs:r}=t,{x:o}=e,{axis:s,keepDims:i}=r;Ce(o,"min");const a=He(s,o.shape);let l=a;const c=Wt(l,o.shape.length);let u=o;c!=null&&(u=Or({inputs:{x:o},backend:n,attrs:{perm:c}}),l=nn(l.length,o.shape.length)),jn("min",l,u.shape.length);const[d,f]=On(u.shape,l),h=ne(f),p=Xn(ne(d),u.dtype),m=n.data.get(u.dataId).values;for(let y=0;y<p.length;++y){const v=y*h;let x=m[v];for(let b=0;b<h;++b){const w=m[v+b];(Number.isNaN(w)||w<x)&&(x=w)}p[y]=x}c!=null&&n.disposeIntermediateTensorInfo(u);const g=n.makeTensorInfo(d,u.dtype,p);if(i){const y=un(d,a),v=kt({inputs:{x:g},backend:n,attrs:{shape:y}});return n.disposeIntermediateTensorInfo(g),v}return g}const IKe={kernelName:g1,backendName:"cpu",kernelFunc:TKe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function EKe(t){const{inputs:e,backend:n,attrs:r}=t,{x:o}=e,{paddings:s,mode:i}=r;Ce(o,"mirrorPad");const a=s.map((x,b)=>x[0]+o.shape[b]+x[1]),l=s.map(x=>x[0]),c=s.map((x,b)=>x[0]+o.shape[b]),u=i==="reflect"?0:1,d=n.data.get(o.dataId).values,f=o.shape.length,h=Ie(o.shape),p=ne(a),m=a.length,g=Ie(a),y=qn(o.dtype,p);for(let x=0;x<p;x++){let b=Hf(x,m,g);for(let C=0;C<m;C++)b[C]<l[C]?b[C]=l[C]*2-b[C]-u:b[C]>=c[C]&&(b[C]=(c[C]-1)*2-b[C]+u);b=b.map((C,$)=>C-l[$]);const w=ai(b,f,h);y[x]=d[w]}return{dataId:n.write(y,a,o.dtype),shape:a,dtype:o.dtype}}const NKe={kernelName:y1,backendName:"cpu",kernelFunc:EKe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const AKe=on((t,e)=>{const n=t%e;return t<0&&e<0||t>=0&&e>=0?n:(n+e)%e}),OKe=wn(Wg,AKe),PKe={kernelName:Wg,backendName:"cpu",kernelFunc:OKe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function m7(t){const{inputs:e,backend:n,attrs:r}=t,{logits:o}=e,{dim:s}=r,i=o.shape.length;let a=s;if(a===-1&&(a=i-1),a!==i-1)throw Error(`Softmax along a non-last dimension is not yet supported. Logits was rank ${i} and dim was ${a}`);const l=He([a],o.shape),c=p7({inputs:{x:o},backend:n,attrs:{reductionIndices:l,keepDims:!1}}),u=un(c.shape,l),d=kt({inputs:{x:c},backend:n,attrs:{shape:u}}),f=yP({inputs:{a:o,b:d},backend:n}),h=xY({inputs:{x:f},backend:n}),p=ky({inputs:{x:h},backend:n,attrs:{axis:l,keepDims:!1}}),m=kt({inputs:{x:p},backend:n,attrs:{shape:u}}),g=xP({inputs:{a:h,b:m},backend:n});return n.disposeIntermediateTensorInfo(c),n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(m),g}const RKe={kernelName:D1,backendName:"cpu",kernelFunc:m7};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _Ke(t){const{inputs:e,backend:n,attrs:r}=t,{logits:o}=e,{numSamples:s,seed:i,normalized:a}=r;Ce(o,"multinomial");const l=a?o:m7({inputs:{logits:o},backend:n,attrs:{dim:-1}}),c=l.shape[0],u=l.shape[1],d=n.data.get(l.dataId).values,f=[c,s],h=Xn(ne(f),"int32");for(let p=0;p<c;++p){const m=p*u,g=new Float32Array(u-1);g[0]=d[m];for(let x=1;x<g.length;++x)g[x]=g[x-1]+d[m+x];const y=sO.alea(i.toString()),v=p*s;for(let x=0;x<s;++x){const b=y();h[v+x]=g.length;for(let w=0;w<g.length;w++)if(b<g[w]){h[v+x]=w;break}}}return a||n.disposeIntermediateTensorInfo(l),n.makeTensorInfo(f,"int32",h)}const DKe={kernelName:MK,backendName:"cpu",kernelFunc:_Ke};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const MKe=pO;function FKe(t){const{inputs:e,backend:n,attrs:r}=t,{boxes:o,scores:s}=e,{maxOutputSize:i,iouThreshold:a,scoreThreshold:l}=r;Ce(o,"NonMaxSuppression");const c=n.data.get(o.dataId).values,u=n.data.get(s.dataId).values,{selectedIndices:d}=MKe(c,u,i,a,l);return n.makeTensorInfo([d.length],"int32",new Int32Array(d))}const LKe={kernelName:bA,backendName:"cpu",kernelFunc:FKe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const jKe=mO;function BKe(t){const{inputs:e,backend:n,attrs:r}=t,{boxes:o,scores:s}=e,{maxOutputSize:i,iouThreshold:a,scoreThreshold:l,padToMaxOutputSize:c}=r;Ce(o,"NonMaxSuppressionPadded");const u=n.data.get(o.dataId).values,d=n.data.get(s.dataId).values,{selectedIndices:f,validOutputs:h}=jKe(u,d,i,a,l,c);return[n.makeTensorInfo([f.length],"int32",new Int32Array(f)),n.makeTensorInfo([],"int32",new Int32Array([h]))]}const zKe={kernelName:wA,backendName:"cpu",kernelFunc:BKe};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const WKe=gO;function VKe(t){const{inputs:e,backend:n,attrs:r}=t,{boxes:o,scores:s}=e,{maxOutputSize:i,iouThreshold:a,scoreThreshold:l,softNmsSigma:c}=r;Ce(o,"NonMaxSuppressionWithScore");const u=n.data.get(o.dataId).values,d=n.data.get(s.dataId).values,f=i,h=a,p=l,m=c,{selectedIndices:g,selectedScores:y}=WKe(u,d,f,h,p,m);return[n.makeTensorInfo([g.length],"int32",new Int32Array(g)),n.makeTensorInfo([y.length],"float32",new Float32Array(y))]}const UKe={kernelName:SA,backendName:"cpu",kernelFunc:VKe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function GKe(t){const{inputs:e,backend:n,attrs:r}=t,{indices:o}=e,{dtype:s,depth:i,onValue:a,offValue:l}=r;Ce(o,"oneHot");const c=ne(o.shape),u=new Float32Array(c*i);u.fill(l);const d=n.data.get(o.dataId).values;for(let f=0;f<c;++f)d[f]>=0&&d[f]<i&&(u[f*i+d[f]]=a);return n.makeTensorInfo([...o.shape,i],s,u)}const HKe={kernelName:w1,backendName:"cpu",kernelFunc:GKe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function i0(t){const{inputs:e,backend:n}=t,{x:r}=e;if(r.dtype==="string")throw new Error("zerosLike is not supported for string tensors");if(r.dtype==="complex64"){const o=Yc({inputs:{input:r},backend:n}),s=i0({inputs:{x:o},backend:n}),i=vf({inputs:{input:r},backend:n}),a=i0({inputs:{x:i},backend:n}),l=Wr({inputs:{real:s,imag:a},backend:n});return n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(s),n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(a),l}else return bP({backend:n,attrs:{shape:r.shape,value:0,dtype:r.dtype}})}const KKe={kernelName:L1,backendName:"cpu",kernelFunc:i0};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function g7(t){const{inputs:e,backend:n}=t,{x:r}=e;if(r.dtype==="string")throw new Error("onesLike is not supported for string tensors");if(r.dtype==="complex64"){const o=Yc({inputs:{input:r},backend:n}),s=g7({inputs:{x:o},backend:n}),i=vf({inputs:{input:r},backend:n}),a=i0({inputs:{x:i},backend:n}),l=Wr({inputs:{real:s,imag:a},backend:n});return n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(s),n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(a),l}else return bP({backend:n,attrs:{shape:r.shape,value:1,dtype:r.dtype}})}const qKe={kernelName:b1,backendName:"cpu",kernelFunc:g7};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function y7(t){const{inputs:e,backend:n,attrs:r}=t,{axis:o}=r;if(e.length===1)return s0({inputs:{input:e[0]},backend:n,attrs:{dim:o}});const s=e[0].shape,i=e[0].dtype;e.forEach(u=>{V2(s,u.shape,"All tensors passed to stack must have matching shapes"),M(i===u.dtype,()=>"All tensors passed to stack must have matching dtypes")});const a=[],l=e.map(u=>{const d=s0({inputs:{input:u},backend:n,attrs:{dim:o}});return a.push(d),d}),c=xf({inputs:l,backend:n,attrs:{axis:o}});return a.forEach(u=>n.disposeIntermediateTensorInfo(u)),c}const XKe={kernelName:S1,backendName:"cpu",kernelFunc:y7};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function YKe(t){const{inputs:e,backend:n,attrs:r}=t,{x:o}=e,{paddings:s,constantValue:i}=r;Ce(o,"pad");const a=s.map((v,x)=>v[0]+o.shape[x]+v[1]),l=s.map(v=>v[0]),c=n.data.get(o.dataId).values,u=ne(o.shape),d=o.shape.length,f=Ie(o.shape),h=ne(a),p=a.length,m=Ie(a),g=qn(o.dtype,h);i!==0&&g.fill(i);for(let v=0;v<u;v++){const b=Hf(v,d,f).map((C,$)=>C+l[$]),w=ai(b,p,m);g[w]=c[v]}return{dataId:n.write(g,a,o.dtype),shape:a,dtype:o.dtype}}const v7={kernelName:C1,backendName:"cpu",kernelFunc:YKe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const QKe=on((t,e)=>Math.pow(t,e)),ZKe=wn(Ug,QKe),JKe={kernelName:Ug,backendName:"cpu",kernelFunc:ZKe};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function eqe(t){const{inputs:e,backend:n,attrs:r}=t,{paramsNestedSplits:o,paramsDenseValues:s,indices:i}=e,a=o.map(g=>n.data.get(g.dataId).values),l=o.map(g=>g.shape),c=n.data.get(s.dataId).values,u=n.data.get(i.dataId).values,[d,f,h]=FY(a,l,c,s.shape,s.dtype,u,i.shape),p=d.map(g=>n.makeTensorInfo([g.length],"int32",g)),m=n.makeTensorInfo(h,s.dtype,f);return p.concat([m])}const tqe={kernelName:FK,backendName:"cpu",kernelFunc:eqe};/**
 * @license
 * Copyright 2022 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nqe(t){const{inputs:e,backend:n}=t,{starts:r,limits:o,deltas:s}=e,i=n.data.get(r.dataId).values,a=n.data.get(o.dataId).values,l=n.data.get(s.dataId).values,[c,u]=LY(i,r.shape,r.dtype,a,o.shape,l,s.shape),d=n.makeTensorInfo([c.length],"int32",c),f=n.makeTensorInfo([u.length],r.dtype,u);return[d,f]}const rqe={kernelName:LK,backendName:"cpu",kernelFunc:nqe};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function oqe(t){const{inputs:e,backend:n,attrs:r}=t,{shape:o,values:s,defaultValue:i,rowPartitionTensors:a}=e,{rowPartitionTypes:l}=r,c=n.data.get(o.dataId).values,u=n.data.get(s.dataId).values,d=n.data.get(i.dataId).values,f=a.map(g=>n.data.get(g.dataId).values),h=a.map(g=>g.shape),[p,m]=jY(c,o.shape,u,s.shape,s.dtype,d,i.shape,f,h,l);return n.makeTensorInfo(p,s.dtype,m)}const sqe={kernelName:jK,backendName:"cpu",kernelFunc:oqe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function iqe(t){const{backend:e,attrs:n}=t,{start:r,stop:o,dtype:s,step:i}=n,a=BY(r,o,i,s);return e.makeTensorInfo([a.length],s,a)}const aqe={kernelName:CA,backendName:"cpu",kernelFunc:iqe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const lqe=mt(Gg,t=>1/t),cqe={kernelName:Gg,backendName:"cpu",kernelFunc:lqe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function uqe(t){const{inputs:e,backend:n,attrs:r}=t,{images:o}=e,{alignCorners:s,halfPixelCenters:i,size:a}=r;Ce(o,"resizeBilinear");const l=Ie(o.shape),[c,u]=a,[d,f,h,p]=o.shape,m=n.data.get(o.dataId).values,g=new Float32Array(ne([d,c,u,p])),y=[s&&c>1?f-1:f,s&&u>1?h-1:h],v=[s&&c>1?c-1:c,s&&u>1?u-1:u];let x=0;const b=y[0]/v[0],w=y[1]/v[1];for(let C=0;C<d;C++)for(let $=0;$<c;$++){let T;i?T=b*($+.5)-.5:T=b*$;const I=Math.max(0,Math.floor(T)),E=T-I,N=Math.min(f-1,Math.ceil(T)),A=C*l[0]+I*l[1],R=C*l[0]+N*l[1];for(let P=0;P<u;P++){let F;i?F=w*(P+.5)-.5:F=w*P;const _=Math.max(0,Math.floor(F)),L=F-_,O=Math.min(h-1,Math.ceil(F)),D=A+_*l[2],B=R+_*l[2],V=A+O*l[2],G=R+O*l[2];for(let Q=0;Q<p;Q++){const re=m[D+Q],ie=m[B+Q],ce=m[V+Q],se=m[G+Q],fe=re+(ce-re)*L,J=ie+(se-ie)*L,ae=fe+(J-fe)*E;g[x++]=ae}}}return n.makeTensorInfo([d,c,u,p],"float32",g)}const dqe={kernelName:E1,backendName:"cpu",kernelFunc:uqe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fqe(t){const{inputs:e,backend:n,attrs:r}=t,{images:o,dy:s}=e,{alignCorners:i}=r;Ce([s,o],"resizeBilinearGrad");const a=Ie(o.shape),[l,c,u,d]=o.shape,[,f,h]=s.shape,p=new Float32Array(l*c*u*d),m=[i&&f>1?c-1:c,i&&h>1?u-1:u],g=[i&&f>1?f-1:f,i&&h>1?h-1:h],y=m[0]/g[0],v=m[1]/g[1],x=n.data.get(s.dataId).values;let b=0;for(let w=0;w<l;w++){const C=w*a[0];for(let $=0;$<f;$++){const T=$*y,I=Math.floor(T),E=Math.min(Math.ceil(T),c-1),N=C+I*a[1],A=C+E*a[1],R=T-I,P=1-R;for(let F=0;F<h;F++){const _=F*v,L=Math.floor(_),O=Math.min(Math.ceil(_),u-1),D=_-L,B=1-D,V=N+L*a[2],G=N+O*a[2],Q=A+L*a[2],re=A+O*a[2],ie=P*B,ce=P*D,se=R*B,fe=R*D;for(let J=0;J<d;J++){const ae=x[b++];p[V+J]+=ae*ie,p[G+J]+=ae*ce,p[Q+J]+=ae*se,p[re+J]+=ae*fe}}}}return n.makeTensorInfo([l,u,c,d],"float32",p)}const hqe={kernelName:TA,backendName:"cpu",kernelFunc:fqe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pqe(t){const{inputs:e,backend:n,attrs:r}=t,{images:o}=e,{alignCorners:s,halfPixelCenters:i,size:a}=r;Ce(o,"resizeNearestNeighbor");const l=Ie(o.shape),[c,u]=a,[d,f,h,p]=o.shape,m=n.data.get(o.dataId).values,g=new Float32Array(d*c*u*p),y=[s&&c>1?f-1:f,s&&u>1?h-1:h],v=[s&&c>1?c-1:c,s&&u>1?u-1:u],x=y[0]/v[0],b=y[1]/v[1];let w=0;for(let C=0;C<d;C++){const $=C*l[0];for(let T=0;T<c;T++){const I=i?x*(T+.5):x*T;let E=Math.min(f-1,s?Math.round(I):Math.floor(I));i&&(E=Math.max(0,E));const N=$+E*l[1];for(let A=0;A<u;A++){const R=i?b*(A+.5):b*A;let P=Math.min(h-1,s?Math.round(R):Math.floor(R));i&&(P=Math.max(0,P));const F=N+P*l[2];for(let _=0;_<p;_++){const L=m[F+_];g[w++]=L}}}}return n.makeTensorInfo([d,c,u,p],o.dtype,g)}const mqe={kernelName:I1,backendName:"cpu",kernelFunc:pqe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gqe(t){const{inputs:e,backend:n,attrs:r}=t,{images:o,dy:s}=e,{alignCorners:i}=r;Ce([s,o],"resizeNearestNeighborGrad");const a=Ie(o.shape),l=Ie(s.shape),[c,u,d,f]=o.shape,[,h,p]=s.shape,m=new Float32Array(c*u*d*f),g=n.data.get(s.dataId).values,y=[i&&h>1?u-1:u,i&&p>1?d-1:d],v=[i&&h>1?h-1:h,i&&p>1?p-1:p],x=y[0]/v[0],b=y[1]/v[1],w=1/x,C=1/b,$=Math.ceil(w)*2+2,T=Math.ceil(C)*2+2;for(let I=0;I<c;I++){const E=I*a[0];for(let N=0;N<u;N++){const A=E+N*a[1],R=Math.floor(N*w),P=Math.floor(R-$/2);for(let F=0;F<d;F++){const _=A+F*a[2],L=Math.floor(F*C),O=Math.floor(L-T/2);for(let D=0;D<f;D++){let B=0;for(let V=0;V<$;V++){const G=V+P;if(G<0||G>=h)continue;const Q=E+G*l[1],re=G*x,ie=Math.min(u-1,i?Math.round(re):Math.floor(re));if(N===ie)for(let ce=0;ce<T;ce++){const se=ce+O;if(se<0||se>=p)continue;const fe=Q+se*l[2],J=se*b,ae=Math.min(d-1,i?Math.round(J):Math.floor(J));F===ae&&(B+=g[fe+D])}}m[_+D]=B}}}}return n.makeTensorInfo(o.shape,o.dtype,m)}const yqe={kernelName:kA,backendName:"cpu",kernelFunc:gqe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vqe(t){const{inputs:e,backend:n,attrs:r}=t,{x:o}=e,{dims:s}=r;Ce(o,"reverse");const i=o.shape.length,a=He(s,o.shape);if(i===0)return vi({inputs:{x:o},backend:n});const l=new Mn(o.shape,o.dtype),c=n.bufferSync(o);for(let u=0;u<l.size;u++){const d=l.indexToLoc(u),f=d.slice();a.forEach(h=>f[h]=o.shape[h]-1-f[h]),l.set(c.get(...f),...d)}return n.makeTensorInfo(l.shape,l.dtype,l.values)}const xqe={kernelName:N1,backendName:"cpu",kernelFunc:vqe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const bqe={kernelName:RA,backendName:"cpu",kernelFunc:({inputs:t,attrs:e,backend:n})=>{const{image:r}=t,{radians:o,fillValue:s,center:i}=e,a=n,l=qn(r.dtype,ne(r.shape)),[c,u,d,f]=r.shape,[h,p]=IO(i,u,d),m=255,g=Math.sin(o),y=Math.cos(o),v=a.data.get(r.dataId).values;for(let b=0;b<c;b++){const w=b*d*u*f;for(let C=0;C<u;C++){const $=C*(d*f);for(let T=0;T<d;T++){const I=T*f;for(let E=0;E<f;E++){const N=[c,C,T,E],A=N[2],R=N[1];let P=(A-h)*y-(R-p)*g,F=(A-h)*g+(R-p)*y;P=Math.round(P+h),F=Math.round(F+p);let _=s;if(typeof s!="number"&&(E===3?_=m:_=s[E]),P>=0&&P<d&&F>=0&&F<u){const O=F*(d*f),D=P*f,B=w+O+D+E;_=v[B]}const L=w+$+I+E;l[L]=_}}}}return{dataId:a.write(l,r.shape,r.dtype),shape:r.shape,dtype:r.dtype}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const wqe=mt(qg,t=>{const e=Math.floor(t);return t-e<.5?Math.floor(t):t-e>.5?Math.ceil(t):e%2===0?e:e+1}),Sqe={kernelName:qg,backendName:"cpu",kernelFunc:wqe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Cqe(t){const{inputs:e,backend:n,attrs:r}=t,{indices:o,updates:s}=e,{shape:i}=r,{sliceRank:a,numUpdates:l,sliceSize:c,strides:u,outputSize:d}=hu(s,o,i),f=!0,h=n.bufferSync(o),p=n.bufferSync(s),m=lc(h,p,i,d,c,l,a,u,0,f);return n.makeTensorInfo(i,m.dtype,m.values)}const $qe={kernelName:BK,backendName:"cpu",kernelFunc:Cqe};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kqe(t,e){let n=0,r=t.length,o=0;for(;n<r;)o=Math.floor((n+r)/2),t[o]<e?n=o+1:r=o;return r}function Tqe(t,e){let n=0,r=t.length,o=0;for(;n<r;)o=Math.floor((n+r)/2),t[o]<=e?n=o+1:r=o;return r}function Iqe(t,e,n,r,o,s){const i=Qt("int32",n*o);for(let a=0;a<n;++a){const l=t.slice(a*r,(a+1)*r),c=a*o;for(let u=0;u<o;++u)i[c+u]=s==="left"?kqe(l,e[u+c]):Tqe(l,e[u+c])}return i}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Eqe(t){const{inputs:e,backend:n,attrs:r}=t,{sortedSequence:o,values:s}=e,{side:i}=r,a=n.data.get(o.dataId).values,l=n.data.get(s.dataId).values,c=Iqe(a,l,o.shape[0],o.shape[1],s.shape[1],i);return n.makeTensorInfo(s.shape,"int32",c)}const Nqe={kernelName:WK,backendName:"cpu",kernelFunc:Eqe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Aqe(t){const{inputs:e,backend:n}=t,{condition:r,t:o,e:s}=e;Ce([r,o,s],"select");const i=r.shape.length,a=n.data.get(r.dataId).values,l=n.data.get(o.dataId).values,c=n.data.get(s.dataId).values,u=Yr(o.dtype,s.dtype),d=Xn(ne(o.shape),u);let f=0;const h=i===0||i>1||o.shape.length===1?1:ne(o.shape.slice(1));for(let p=0;p<a.length;p++)for(let m=0;m<h;m++)a[p]===1?d[f++]=l[p]:d[f++]=c[p];return n.makeTensorInfo(o.shape,u,d)}const Oqe={kernelName:A1,backendName:"cpu",kernelFunc:Aqe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Pqe=Y1,Rqe=Q1,_qe=mt(Yg,t=>t>=0?Rqe*t:Pqe*(Math.exp(t)-1)),Dqe={kernelName:Yg,backendName:"cpu",kernelFunc:_qe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Mqe=mt(Jg,t=>t<0?-1:t>0?1:0),Fqe={kernelName:Jg,backendName:"cpu",kernelFunc:Mqe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Lqe=mt(Qg,t=>Math.sin(t)),jqe={kernelName:Qg,backendName:"cpu",kernelFunc:Lqe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Bqe=mt(Zg,t=>Math.sinh(t)),zqe={kernelName:Zg,backendName:"cpu",kernelFunc:Bqe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Wqe=11920928955078125e-23,Uj=Math.log(Wqe)+2,Vqe=mt(ty,t=>{const e=t>-Uj,n=t<Uj,r=Math.exp(t);let o;return n?o=r:e?o=t:o=Math.log(1+r),o}),Uqe={kernelName:ty,backendName:"cpu",kernelFunc:Vqe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Gqe(t){const{inputs:e,backend:n,attrs:r}=t,{x:o}=e,{blockShape:s,paddings:i}=r;Ce([o],"spaceToBatchND");const a=ne(s),l=[[0,0]];l.push(...i);for(let C=1+s.length;C<o.shape.length;++C)l.push([0,0]);const c=v7.kernelFunc({inputs:{x:o},backend:n,attrs:{paddings:l,constantValue:0}}),u=py(c.shape,s,a,!1),d=my(u.length,s.length,!1),f=gy(c.shape,s,a,!1),m=kt({inputs:{x:c},backend:n,attrs:{shape:u}}),v=Or({inputs:{x:m},backend:n,attrs:{perm:d}}),w=kt({inputs:{x:v},backend:n,attrs:{shape:f}});return n.disposeIntermediateTensorInfo(c),n.disposeIntermediateTensorInfo(m),n.disposeIntermediateTensorInfo(v),w}const Hqe={kernelName:R1,backendName:"cpu",kernelFunc:Gqe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Kqe(t){const{inputs:e,backend:n}=t,{indices:r,values:o,denseShape:s,defaultValue:i}=e;if(s.shape.length!==1)throw new Error(`Dense shape must be a vector, saw:
        ${s.shape}`);if(r.shape.length!==2)throw new Error(`Indices must be a matrix, saw:
        ${r.shape}`);if(o.shape.length!==1)throw new Error(`Values must be a vector, saw:
        ${o.shape}`);if(i.shape.length!==0)throw new Error(`Default value must be a scalar, saw:
        ${i.shape}`);const a=n.data.get(r.dataId).values,l=n.data.get(o.dataId).values,c=n.data.get(s.dataId).values,u=n.data.get(i.dataId).values[0],[d,f,h,p,m]=UY(a,r.shape,r.dtype,l,o.dtype,c,u);return[n.makeTensorInfo(f,r.dtype,d),n.makeTensorInfo([f[0]],o.dtype,h),n.makeTensorInfo([p.length],"bool",new Uint8Array(p.map(g=>Number(g)))),n.makeTensorInfo([m.length],r.dtype,new Int32Array(m))]}const qqe={kernelName:VK,backendName:"cpu",kernelFunc:Kqe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Xqe(t){const{inputs:e,backend:n}=t,{inputIndices:r,inputShape:o,newShape:s}=e;if(r.shape.length!==2)throw new Error(`Input indices should be a matrix but received shape
        ${r.shape}`);if(o.shape.length!==1)throw new Error(`Input shape should be a vector but received shape
        ${o.shape}`);if(s.shape.length!==1)throw new Error(`Target shape should be a vector but received shape ${s.shape}`);const i=Array.from(n.data.get(o.dataId).values),a=n.data.get(r.dataId).values,l=Array.from(n.data.get(s.dataId).values),[c,u,d]=GY(a,r.shape,r.dtype,i,l);return[n.makeTensorInfo(u,r.dtype,c),n.makeTensorInfo([d.length],s.dtype,new Int32Array(d))]}const Yqe={kernelName:UK,backendName:"cpu",kernelFunc:Xqe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Qqe(t){const{inputs:e,backend:n}=t,{data:r,indices:o,segmentIds:s}=e;if(r.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(o.shape.length!==1)throw new Error(`Indices should be a vector but received shape
          ${o.shape}`);if(s.shape.length!==1)throw new Error(`Segment ids should be a vector but received shape
          ${s.shape}`);if(o.shape[0]!==s.shape[0])throw new Error("segmentIds and indices should have same size.");const i=n.data.get(r.dataId).values,a=n.data.get(o.dataId).values,l=n.data.get(s.dataId).values,[c,u]=gP(i,r.shape,r.dtype,a,l,!0);return n.makeTensorInfo(u,r.dtype,c)}const Zqe={kernelName:GK,backendName:"cpu",kernelFunc:Qqe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Jqe(t){const{inputs:e,backend:n}=t,{data:r,indices:o,segmentIds:s}=e;if(r.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(o.shape.length!==1)throw new Error(`Indices should be a vector but received shape
         ${o.shape}`);if(s.shape.length!==1)throw new Error(`Segment ids should be a vector but received shape
         ${s.shape}`);if(o.shape[0]!==s.shape[0])throw new Error("segmentIds and indices should have same size.");const i=n.data.get(r.dataId).values,a=n.data.get(o.dataId).values,l=n.data.get(s.dataId).values,[c,u]=gP(i,r.shape,r.dtype,a,l);return n.makeTensorInfo(u,r.dtype,c)}const e8e={kernelName:HK,backendName:"cpu",kernelFunc:Jqe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function t8e(t){const{inputs:e,backend:n,attrs:r}=t,{sparseIndices:o,sparseValues:s,defaultValue:i}=e,{outputShape:a}=r,{sliceRank:l,numUpdates:c,sliceSize:u,strides:d,outputSize:f}=hu(s,o,a),h=!1,p=n.bufferSync(o);let m;switch(s.dtype){case"bool":{const g=n.bufferSync(s),y=!!n.data.get(i.dataId).values[0];m=lc(p,g,a,f,u,c,l,d,y,h);break}case"float32":{const g=n.bufferSync(s),y=n.data.get(i.dataId).values[0];m=lc(p,g,a,f,u,c,l,d,y,h);break}case"int32":{const g=n.bufferSync(s),y=n.data.get(i.dataId).values[0];m=lc(p,g,a,f,u,c,l,d,y,h);break}case"string":{const g=n.bufferSync(s),y=fl(n.data.get(i.dataId).values[0]);m=lc(p,g,a,f,u,c,l,d,y,h);break}default:throw new Error(`Unsupported type ${s.dtype}`)}return n.makeTensorInfo(a,m.dtype,m.values)}const n8e={kernelName:KK,backendName:"cpu",kernelFunc:t8e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function r8e(t){const{inputs:e,backend:n,attrs:r}=t,{x:o}=e,{numOrSizeSplits:s,axis:i}=r,a=He(i,o.shape)[0],l=WO(o,s,a),c=new Array(o.shape.length).fill(0),u=o.shape.slice();return l.map(d=>{const f=[...u];f[a]=d;const h=Qc({inputs:{x:o},backend:n,attrs:{begin:c,size:f}});return c[a]+=d,h})}const o8e={kernelName:_1,backendName:"cpu",kernelFunc:r8e};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const s8e={kernelName:IA,backendName:"cpu",kernelFunc:({inputs:t,backend:e})=>{const{x:n}=t,r=e;Ce(n,"square");const o=r.data.get(n.dataId).values,s=new Float32Array(o.length);for(let a=0;a<o.length;++a){const l=o[a];s[a]=l*l}return{dataId:r.write(s,n.shape,n.dtype),shape:n.shape,dtype:n.dtype}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const i8e=mt(ly,(t,e)=>{const n=e;return isNaN(t)?NaN:t>0?1:n.alpha}),a8e={kernelName:ly,backendName:"cpu",kernelFunc:i8e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function l8e(t){const{inputs:e,backend:n,attrs:r}=t,{x:o}=e,{begin:s,end:i,strides:a,beginMask:l,endMask:c,ellipsisMask:u,newAxisMask:d,shrinkAxisMask:f}=r;Ce(o,"stridedSlice");const{finalShapeSparse:h,finalShape:p,isIdentity:m,sliceDim0:g,isSimpleSlice:y,begin:v,end:x,strides:b}=$O(o.shape,s,i,a,l,c,u,d,f);let w;if(m)w=kt({inputs:{x:o},backend:n,attrs:{shape:p}});else if(g||y){M(o.shape.length>=1,()=>`Input must have rank at least 1, got: ${o.shape.length}`);const C=wO(v,x,b),$=Qc({inputs:{x:o},backend:n,attrs:{begin:v,size:C}});w=kt({inputs:{x:$},backend:n,attrs:{shape:p}}),n.disposeIntermediateTensorInfo($)}else{const C=n.bufferSync(o),$=qY(h,C,b,v);w=n.makeTensorInfo(p,$.dtype,$.values)}return w}const c8e={kernelName:NA,backendName:"cpu",kernelFunc:l8e};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function u8e(t){const{inputs:e,backend:n,attrs:r}=t,{separator:o,nGramWidths:s,leftPad:i,rightPad:a,padWidth:l,preserveShortSequences:c}=r,{data:u,dataSplits:d}=e,f=n.data.get(u.dataId).values,h=n.data.get(d.dataId).values,[p,m]=XY(f,h,o,s,i,a,l,c);return[n.makeTensorInfo([p.length],"string",p),n.makeTensorInfo(d.shape,"int32",m)]}const d8e={kernelName:qK,backendName:"cpu",kernelFunc:u8e};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function f8e(t){const{inputs:e,backend:n,attrs:r}=t,{skipEmpty:o}=r,{input:s,delimiter:i}=e;if(s.dtype!=="string")throw new Error("Input must be of datatype string");if(s.shape.length!==1)throw new Error(`Input must be a vector, got shape: ${s.shape}`);if(i.shape.length!==0)throw new Error(`Delimiter must be a scalar, got shape: ${i.shape}`);const a=n.data.get(s.dataId).values,l=n.data.get(i.dataId).values[0],[c,u,d]=YY(a,l,o),f=u.length;return[n.makeTensorInfo([f,2],"int32",c),n.makeTensorInfo([f],"string",u),n.makeTensorInfo([2],"int32",new Int32Array(d))]}const h8e={kernelName:XK,backendName:"cpu",kernelFunc:f8e};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function p8e(t){const{inputs:e,backend:n,attrs:r}=t,{numBuckets:o}=r,{input:s}=e;if(s.dtype!=="string")throw new Error("Input must be of datatype string");if(o<=0)throw new Error("Number of buckets must be at least 1");const i=n.data.get(s.dataId).values,a=QY(i,o);return n.makeTensorInfo(s.shape,"int32",a)}const m8e={kernelName:YK,backendName:"cpu",kernelFunc:p8e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const g8e=mt(sy,t=>Math.tan(t)),y8e={kernelName:sy,backendName:"cpu",kernelFunc:g8e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const v8e=mt(iy,t=>Math.tanh(t)),x8e={kernelName:iy,backendName:"cpu",kernelFunc:v8e};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function b8e(t){const{inputs:e,backend:n}=t,{tensor:r,indices:o,updates:s}=e,{sliceRank:i,numUpdates:a,sliceSize:l,strides:c,outputSize:u}=hu(s,o,r.shape),d=!1,f=n.bufferSync(o),h=n.bufferSync(s),p=n.bufferSync(r),m=lc(f,h,r.shape,u,l,a,i,c,p,d);return n.makeTensorInfo(r.shape,m.dtype,m.values)}const w8e={kernelName:zK,backendName:"cpu",kernelFunc:b8e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function S8e(t){const{inputs:e,backend:n,attrs:r}=t,{x:o}=e,{reps:s}=r;Ce(o,"tile");const i=JY(n.bufferSync(o),s);return n.makeTensorInfo(i.shape,i.dtype,i.values)}const C8e={kernelName:ay,backendName:"cpu",kernelFunc:S8e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $8e(t){const{inputs:e,backend:n,attrs:r}=t,{x:o}=e,{k:s,sorted:i}=r;Ce(o,"topk");const a=n.data.get(o.dataId).values,[l,c]=t7(a,o.shape,o.dtype,s,i);return[n.makeTensorInfo(l.shape,l.dtype,l.values),n.makeTensorInfo(c.shape,c.dtype,c.values)]}const k8e={kernelName:AA,backendName:"cpu",kernelFunc:$8e};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function T8e(t){const{inputs:e,attrs:n,backend:r}=t,{image:o,transforms:s}=e,{interpolation:i,fillMode:a,fillValue:l,outputShape:c}=n,[u,d,f,h]=o.shape,[p,m]=c??[d,f],g=[u,p,m,h],y=Ie(o.shape),v=y[0],x=y[1],b=y[2],w=Ie(g),C=w[0],$=w[1],T=w[2],I=qn(o.dtype,ne(g));I.fill(l);const E=r.data.get(o.dataId).values,N=r.data.get(s.dataId).values;for(let R=0;R<u;++R){const P=s.shape[0]===1?N:N.subarray(R*8,R*8+8);for(let F=0;F<p;++F)for(let _=0;_<m;++_)for(let L=0;L<h;++L){let O;const D=P[6]*_+P[7]*F+1;if(D===0)continue;const B=(P[0]*_+P[1]*F+P[2])/D,V=(P[3]*_+P[4]*F+P[5])/D,G=Gj(B,f,a),Q=Gj(V,d,a);switch(i){case"nearest":O=P8e(E,d,f,v,x,b,R,Q,G,L,l);break;case"bilinear":O=R8e(E,d,f,v,x,b,R,Q,G,L,l);break;default:throw new Error(`Error in Transform: Expect 'nearest' or 'bilinear', but got ${i}`)}const re=R*C+F*$+_*T+L;I[re]=O}return r.makeTensorInfo(g,o.dtype,I)}return{dataId:r.write(I,g,o.dtype),shape:o.shape,dtype:o.dtype}}const I8e={kernelName:OA,backendName:"cpu",kernelFunc:T8e};function Gj(t,e,n){switch(n){case"reflect":return E8e(t,e);case"wrap":return N8e(t,e);case"nearest":return O8e(t,e);case"constant":default:return A8e(t)}}function E8e(t,e){let n=t;if(n<0)if(e<=1)n=0;else{const r=2*e;n<r&&(n=r*Math.trunc(-n/r)+n),n=n<-e?n+r:-n-1}else if(n>e-1)if(e<=1)n=0;else{const r=2*e;n-=r*Math.trunc(n/r),n>=e&&(n=r-n-1)}return jc(0,n,e-1)}function N8e(t,e){let n=t;if(n<0)if(e<=1)n=0;else{const r=e-1;n+=e*(Math.trunc(-n/r)+1)}else if(n>e-1)if(e<=1)n=0;else{const r=e-1;n-=e*Math.trunc(n/r)}return jc(0,n,e-1)}function A8e(t,e){return t}function O8e(t,e){return jc(0,t,e-1)}function Yh(t,e,n,r,o,s,i,a,l,c,u){const d=i*r+a*o+l*s+c;return 0<=a&&a<e&&0<=l&&l<n?t[d]:u}function P8e(t,e,n,r,o,s,i,a,l,c,u){const d=Math.round(a),f=Math.round(l);return Yh(t,e,n,r,o,s,i,d,f,c,u)}function R8e(t,e,n,r,o,s,i,a,l,c,u){const d=Math.floor(a),f=Math.floor(l),h=d+1,p=f+1,m=(p-l)*Yh(t,e,n,r,o,s,i,d,f,c,u)+(l-f)*Yh(t,e,n,r,o,s,i,d,p,c,u),g=(p-l)*Yh(t,e,n,r,o,s,i,h,f,c,u)+(l-f)*Yh(t,e,n,r,o,s,i,h,p,c,u);return(h-a)*m+(a-d)*g}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _8e(t){const{inputs:e,attrs:n,backend:r}=t,{axis:o}=n,{x:s}=e;Ce(s,"unique");const i=r.data.get(s.dataId).values,{outputValues:a,outputShape:l,indices:c}=n7(i,o,s.shape,s.dtype);return[r.makeTensorInfo(l,s.dtype,a),r.makeTensorInfo([c.length],"int32",c)]}const D8e={kernelName:PA,backendName:"cpu",kernelFunc:_8e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function M8e(t){const{inputs:e,backend:n,attrs:r}=t,{value:o}=e;let{axis:s}=r;s<0&&(s+=o.shape.length);const i=o.shape.length,a=o.shape[s],l=new Array(i-1);let c=0;for(let h=0;h<i;h++)h!==s&&(l[c++]=o.shape[h]);const u=new Array(i).fill(0),d=o.shape.slice();d[s]=1;const f=new Array(a);for(let h=0;h<f.length;h++){u[s]=h;const p=Qc({inputs:{x:o},backend:n,attrs:{begin:u,size:d}});f[h]=kt({inputs:{x:p},backend:n,attrs:{shape:l}}),n.disposeIntermediateTensorInfo(p)}return f}const F8e={kernelName:M1,backendName:"cpu",kernelFunc:M8e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function L8e(t){const{inputs:e,backend:n,attrs:r}=t,{x:o,segmentIds:s}=e,{numSegments:i}=r;Ce(o,"unsortedSegmentSum");const a=o.shape.length,l=s.shape.length,c=[],u=[],d=a-l;let f=s;for(let p=0;p<d;++p){const m=s0({inputs:{input:f},backend:n,attrs:{dim:p+1}});f=m,u.push(m)}for(let p=0;p<i;++p){const m=Nl(p,"int32"),g=n.makeTensorInfo([],"int32",m),y=yY({inputs:{a:g,b:f},backend:n}),v=yl({inputs:{x:y},backend:n,attrs:{dtype:"float32"}}),x=cS({inputs:{a:v,b:o},backend:n}),b=ky({inputs:{x},backend:n,attrs:{axis:0,keepDims:!1}});c.push(b),u.push(g),u.push(y),u.push(v),u.push(x),u.push(b)}const h=y7({inputs:c,backend:n,attrs:{axis:0}});return u.forEach(p=>n.disposeIntermediateTensorInfo(p)),h}const j8e={kernelName:F1,backendName:"cpu",kernelFunc:L8e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const B8e=[_He,pGe,MHe,LHe,bGe,BHe,WHe,UHe,HHe,qHe,YHe,ZHe,e5e,r5e,s5e,l5e,u5e,f5e,p5e,PHe,g5e,v5e,b5e,SGe,S5e,vGe,$Ge,$5e,mGe,T5e,E5e,N5e,O5e,R5e,D5e,F5e,j5e,z5e,V5e,G5e,K5e,X5e,Q5e,J5e,e6e,n6e,o6e,i6e,a6e,l6e,c6e,d6e,p6e,kHe,g6e,kGe,$6e,TGe,k6e,EGe,O6e,P6e,_6e,AGe,PGe,M6e,L6e,B6e,W6e,_Ge,MGe,gGe,U6e,I5e,H6e,q6e,Y6e,THe,LGe,BGe,Z6e,WGe,eKe,rKe,sKe,lKe,uKe,fKe,hKe,UGe,mKe,yKe,xKe,wKe,CKe,kKe,IKe,HGe,NKe,PKe,DKe,qGe,YGe,LKe,zKe,UKe,ZGe,HKe,qKe,XKe,v7,JKe,EHe,tHe,tqe,rqe,sqe,aqe,yGe,FI,cqe,NHe,AHe,OHe,dqe,hqe,mqe,yqe,xqe,bqe,Sqe,cHe,$qe,Nqe,Oqe,Dqe,dHe,Fqe,jqe,zqe,fHe,RKe,Uqe,Hqe,qqe,Yqe,Zqe,e8e,n8e,o8e,mHe,s8e,yHe,xHe,a8e,c8e,d8e,h8e,m8e,CHe,f6e,y8e,x8e,w8e,C8e,k8e,I8e,JGe,D8e,F8e,j8e,KKe];for(const t of B8e)ZK(t);/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Ql={},$v={alpha:!1,antialias:!1,premultipliedAlpha:!1,preserveDrawingBuffer:!1,depth:!1,stencil:!1,failIfMajorPerformanceCaveat:!0};function z8e(t,e){Ql[t]=e}function _s(t,e){if(!(t in Ql)||e!=null){const r=V8e(t,e);if(r!==null)Ql[t]=r;else return console.log("Could not get context for WebGL version",t),null}const n=Ql[t];return n==null||n.isContextLost()?(delete Ql[t],_s(t)):(n.disable(n.DEPTH_TEST),n.disable(n.STENCIL_TEST),n.disable(n.BLEND),n.disable(n.DITHER),n.disable(n.POLYGON_OFFSET_FILL),n.disable(n.SAMPLE_COVERAGE),n.enable(n.SCISSOR_TEST),n.enable(n.CULL_FACE),n.cullFace(n.BACK),Ql[t])}function W8e(t){if(!ee().getBool("IS_SAFARI")&&typeof OffscreenCanvas<"u"&&t===2)return new OffscreenCanvas(300,150);if(typeof document<"u")return document.createElement("canvas");throw new Error("Cannot create a canvas in this context")}function V8e(t,e){if(t!==1&&t!==2)throw new Error("Cannot get WebGL rendering context, WebGL is disabled.");const n=e??W8e(t);return n.addEventListener("webglcontextlost",r=>{r.preventDefault(),delete Ql[t]},!1),ee().getBool("SOFTWARE_WEBGL_ENABLED")&&($v.failIfMajorPerformanceCaveat=!1),t===1?n.getContext("webgl",$v)||n.getContext("experimental-webgl",$v):n.getContext("webgl2",$v)}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var _m;(function(t){t[t.DENSE=0]="DENSE",t[t.SHARED_BATCH=1]="SHARED_BATCH"})(_m||(_m={}));var uo;(function(t){t[t.RENDER=0]="RENDER",t[t.UPLOAD=1]="UPLOAD",t[t.PIXELS=2]="PIXELS",t[t.DOWNLOAD=3]="DOWNLOAD"})(uo||(uo={}));var _n;(function(t){t[t.UNPACKED_FLOAT16=0]="UNPACKED_FLOAT16",t[t.UNPACKED_FLOAT32=1]="UNPACKED_FLOAT32",t[t.PACKED_4X1_UNSIGNED_BYTE=2]="PACKED_4X1_UNSIGNED_BYTE",t[t.PACKED_2X2_FLOAT32=3]="PACKED_2X2_FLOAT32",t[t.PACKED_2X2_FLOAT16=4]="PACKED_2X2_FLOAT16"})(_n||(_n={}));function Ty(t,e){return[e,t]}function U8e(t,e){return t*e}function kv(t){const e=ne(t),n=Math.ceil(e/4);return sI(n)}function eh(t,e){return[Math.max(1,Math.ceil(e/2)),Math.max(1,Math.ceil(t/2))]}function G8e(t,e){const[n,r]=eh(t,e);return n*r*4}function wP(t,e){const n=t;let r,o,s,i,a,l,c,u,d,f;return ee().getNumber("WEBGL_VERSION")===2?(r=n.R32F,o=n.R16F,s=n.RGBA16F,i=n.RGBA32F,a=n.RED,c=4,u=1,d=n.HALF_FLOAT,f=n.FLOAT,l=n.RGBA8):(r=t.RGBA,o=t.RGBA,s=t.RGBA,i=n.RGBA,a=t.RGBA,c=4,u=4,d=e!=null?e.HALF_FLOAT_OES:null,f=t.FLOAT,l=t.RGBA),{internalFormatFloat:r,internalFormatHalfFloat:o,internalFormatPackedHalfFloat:s,internalFormatPackedFloat:i,textureFormatFloat:a,downloadTextureFormat:l,downloadUnpackNumChannels:c,defaultNumChannels:u,textureTypeHalfFloat:d,textureTypeFloat:f}}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ve(t,e){const n=e();return ee().getBool("DEBUG")&&H8e(t),n}function H8e(t){const e=t.getError();if(e!==t.NO_ERROR)throw new Error("WebGL Error: "+Y8e(t,e))}const K8e=596e-10,q8e=65504;function X8e(t){return!!(ee().getBool("WEBGL_RENDER_FLOAT32_ENABLED")||t===0||K8e<Math.abs(t)&&Math.abs(t)<q8e)}function Y8e(t,e){switch(e){case t.NO_ERROR:return"NO_ERROR";case t.INVALID_ENUM:return"INVALID_ENUM";case t.INVALID_VALUE:return"INVALID_VALUE";case t.INVALID_OPERATION:return"INVALID_OPERATION";case t.INVALID_FRAMEBUFFER_OPERATION:return"INVALID_FRAMEBUFFER_OPERATION";case t.OUT_OF_MEMORY:return"OUT_OF_MEMORY";case t.CONTEXT_LOST_WEBGL:return"CONTEXT_LOST_WEBGL";default:return`Unknown error code ${e}`}}function Tv(t,e){return fa(t,()=>t.getExtension(e),'Extension "'+e+'" not supported on this browser.')}function Q8e(t,e){const n=fa(t,()=>t.createShader(t.VERTEX_SHADER),"Unable to create vertex WebGLShader.");if(ve(t,()=>t.shaderSource(n,e)),ve(t,()=>t.compileShader(n)),t.getShaderParameter(n,t.COMPILE_STATUS)===!1)throw console.log(t.getShaderInfoLog(n)),new Error("Failed to compile vertex shader.");return n}function Z8e(t,e){const n=fa(t,()=>t.createShader(t.FRAGMENT_SHADER),"Unable to create fragment WebGLShader.");if(ve(t,()=>t.shaderSource(n,e)),ve(t,()=>t.compileShader(n)),ee().get("ENGINE_COMPILE_ONLY"))return n;if(t.getShaderParameter(n,t.COMPILE_STATUS)===!1)throw x7(e,t.getShaderInfoLog(n)),new Error("Failed to compile fragment shader.");return n}const J8e=/ERROR: [0-9]+:([0-9]+):/g;function x7(t,e){const n=J8e.exec(e);if(n==null){console.log(`Couldn't parse line number in error: ${e}`),console.log(t);return}const r=+n[1],o=t.split(`
`),s=o.length.toString().length+2,i=o.map((d,f)=>fd((f+1).toString(),s)+d);let a=0;for(let d=0;d<i.length;d++)a=Math.max(i[d].length,a);const l=i.slice(0,r-1),c=i.slice(r-1,r),u=i.slice(r);console.log(l.join(`
`)),console.log(e.split(`
`)[0]),console.log(`%c ${fd(c[0],a)}`,"border:1px solid red; background-color:#e3d2d2; color:#a61717"),console.log(u.join(`
`))}function eXe(t){return fa(t,()=>t.createProgram(),"Unable to create WebGLProgram.")}function tXe(t,e){if(ve(t,()=>t.linkProgram(e)),!ee().get("ENGINE_COMPILE_ONLY")&&t.getProgramParameter(e,t.LINK_STATUS)===!1)throw console.log(t.getProgramInfoLog(e)),new Error("Failed to link vertex and fragment shaders.")}function XC(t,e){if(ve(t,()=>t.validateProgram(e)),t.getProgramParameter(e,t.VALIDATE_STATUS)===!1)throw console.log(t.getProgramInfoLog(e)),new Error("Shader program validation failed.")}function nXe(t,e){const n=fa(t,()=>t.createBuffer(),"Unable to create WebGLBuffer");return ve(t,()=>t.bindBuffer(t.ARRAY_BUFFER,n)),ve(t,()=>t.bufferData(t.ARRAY_BUFFER,e,t.STATIC_DRAW)),n}function rXe(t,e){const n=fa(t,()=>t.createBuffer(),"Unable to create WebGLBuffer");return ve(t,()=>t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,n)),ve(t,()=>t.bufferData(t.ELEMENT_ARRAY_BUFFER,e,t.STATIC_DRAW)),n}function oXe(t){return fa(t,()=>t.createTexture(),"Unable to create WebGLTexture.")}function sXe(t,e){const n=ee().getNumber("WEBGL_MAX_TEXTURE_SIZE");if(t<=0||e<=0){const r=`[${t}x${e}]`;throw new Error("Requested texture size "+r+" is invalid.")}if(t>n||e>n){const r=`[${t}x${e}]`,o=`[${n}x${n}]`;throw new Error("Requested texture size "+r+" greater than WebGL maximum on this browser / GPU "+o+".")}}function iXe(t){return fa(t,()=>t.createFramebuffer(),"Unable to create WebGLFramebuffer.")}function Hj(t,e,n,r,o,s,i){const a=t.getAttribLocation(e,n);return a===-1?!1:(ve(t,()=>t.bindBuffer(t.ARRAY_BUFFER,r)),ve(t,()=>t.vertexAttribPointer(a,o,t.FLOAT,!1,s,i)),ve(t,()=>t.enableVertexAttribArray(a)),!0)}function aXe(t,e,n){fXe(t,n),ve(t,()=>t.activeTexture(t.TEXTURE0+n)),ve(t,()=>t.bindTexture(t.TEXTURE_2D,e))}function lXe(t,e,n){return fa(t,()=>t.getUniformLocation(e,n),'uniform "'+n+'" not present in program.')}function cXe(t,e,n){return t.getUniformLocation(e,n)}function uXe(t,e,n,r){ve(t,()=>aXe(t,e,r)),ve(t,()=>t.uniform1i(n,r))}function YC(t,e,n){ve(t,()=>t.bindFramebuffer(t.FRAMEBUFFER,n)),ve(t,()=>t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,e,0))}function Kj(t,e){ve(t,()=>t.bindFramebuffer(t.FRAMEBUFFER,e)),ve(t,()=>t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,null,0))}function Iv(t){const e=t.checkFramebufferStatus(t.FRAMEBUFFER);if(e!==t.FRAMEBUFFER_COMPLETE)throw new Error("Error binding framebuffer: "+dXe(t,e))}function dXe(t,e){switch(e){case t.FRAMEBUFFER_INCOMPLETE_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_ATTACHMENT";case t.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT";case t.FRAMEBUFFER_INCOMPLETE_DIMENSIONS:return"FRAMEBUFFER_INCOMPLETE_DIMENSIONS";case t.FRAMEBUFFER_UNSUPPORTED:return"FRAMEBUFFER_UNSUPPORTED";default:return`unknown error ${e}`}}function fa(t,e,n){const r=ve(t,()=>e());if(r==null)throw new Error(n);return r}function fXe(t,e){const n=t.MAX_COMBINED_TEXTURE_IMAGE_UNITS-1,r=e+t.TEXTURE0;if(r<t.TEXTURE0||r>n){const o=`[gl.TEXTURE0, gl.TEXTURE${n}]`;throw new Error(`textureUnit must be in ${o}.`)}}function bf(t,e=2){return ne(t.slice(0,t.length-e))}function wf(t){if(t.length===0)throw Error("Cannot get rows and columns of an empty shape array.");return[t.length>1?t[t.length-2]:1,t[t.length-1]]}function Ev(t){let e=[1,1,1];return t.length===0||t.length===1&&t[0]===1||(e=[bf(t),...wf(t)]),e}function hXe(t,e=!1){let n=ee().getNumber("WEBGL_MAX_TEXTURE_SIZE"),r=ee().getNumber("WEBGL_MAX_SIZE_FOR_NARROW_TEXTURE");r===1/0&&ee().getBool("WEBGL_AUTO_SQUARIFY_NARROW_TEXTURE_SHAPE")&&(r=n/2),e&&(n=n*2,r=r*2,t=t.map((a,l)=>l>=t.length-2?W2(t[l]):t[l]),t.length===1&&(t=[2,t[0]])),t.length!==2&&(t=El(t).newShape);let o=ne(t),s=null;t.length<=1&&o<=n?s=[1,o]:t.length===2&&t[0]<=n&&t[1]<=n?s=t:t.length===3&&t[0]*t[1]<=n&&t[2]<=n?s=[t[0]*t[1],t[2]]:t.length===3&&t[0]<=n&&t[1]*t[2]<=n?s=[t[0],t[1]*t[2]]:t.length===4&&t[0]*t[1]*t[2]<=n&&t[3]<=n?s=[t[0]*t[1]*t[2],t[3]]:t.length===4&&t[0]<=n&&t[1]*t[2]*t[3]<=n&&(s=[t[0],t[1]*t[2]*t[3]]);const i=s!=null&&Math.max(...s)>r&&Math.min(...s)<=(e?2:1)&&Math.min(...s)>0;if(s==null||i)if(e){const a=bf(t);let l=2,c=2;t.length&&([l,c]=wf(t)),o=a*(l/2)*(c/2),s=sI(o).map(u=>u*2)}else s=sI(o);return s}function Nv(t){return t%2===0}function a0(t,e){if(t=t.slice(-2),e=e.slice(-2),dt(t,e)||!t.length||!e.length||t[0]===0||t[1]===0||e[0]===0||e[1]===0)return!0;if(t.length!==e.length){const n=t[t.length-1],r=e[e.length-1];if(n===r||Nv(n)&&Nv(r)&&(t[0]===1||e[0]===1))return!0}return t[1]===e[1]&&Nv(t[0])&&Nv(e[0])}let QC,ZC;function pXe(t){if(QC==null){const e=_s(t);QC=e.getParameter(e.MAX_TEXTURE_SIZE)}return QC}function mXe(t){if(ZC==null){const e=_s(t);ZC=e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS)}return Math.min(16,ZC)}function gXe(t){if(t===0)return 0;let e;const n=_s(t);return zo(n,"EXT_disjoint_timer_query_webgl2")&&t===2?e=2:zo(n,"EXT_disjoint_timer_query")?e=1:e=0,e}function zo(t,e){return t.getExtension(e)!=null}function qj(t){try{if(_s(t)!=null)return!0}catch(e){return console.log("Error when getting WebGL context: ",e),!1}return!1}function yXe(t){if(t===0)return!1;const e=_s(t);if(t===1){if(!zo(e,"OES_texture_float"))return!1}else if(!zo(e,"EXT_color_buffer_float"))return!1;return jI(e)}function vXe(t){if(t===0)return!1;const e=_s(t);if(t===1){if(!zo(e,"OES_texture_float")||!zo(e,"WEBGL_color_buffer_float"))return!1}else{if(zo(e,"EXT_color_buffer_float"))return jI(e);const r="EXT_color_buffer_half_float";if(zo(e,r)){const o=e.getExtension(r);return xXe(e,o)}return!1}return jI(e)}function jI(t){const e=wP(t),n=t.createTexture();t.bindTexture(t.TEXTURE_2D,n),t.texImage2D(t.TEXTURE_2D,0,e.internalFormatFloat,1,1,0,e.textureFormatFloat,e.textureTypeFloat,null);const s=t.createFramebuffer();t.bindFramebuffer(t.FRAMEBUFFER,s),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,n,0);const i=t.checkFramebufferStatus(t.FRAMEBUFFER)===t.FRAMEBUFFER_COMPLETE;return t.bindTexture(t.TEXTURE_2D,null),t.bindFramebuffer(t.FRAMEBUFFER,null),t.deleteTexture(n),t.deleteFramebuffer(s),i}function xXe(t,e){const n=wP(t,e),r=t.createTexture();t.bindTexture(t.TEXTURE_2D,r),t.texImage2D(t.TEXTURE_2D,0,n.internalFormatHalfFloat,1,1,0,n.textureFormatFloat,n.textureTypeHalfFloat,null);const i=t.createFramebuffer();t.bindFramebuffer(t.FRAMEBUFFER,i),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,r,0);const a=t.checkFramebufferStatus(t.FRAMEBUFFER)===t.FRAMEBUFFER_COMPLETE;return t.bindTexture(t.TEXTURE_2D,null),t.bindFramebuffer(t.FRAMEBUFFER,null),t.deleteTexture(r),t.deleteFramebuffer(i),a}function bXe(t){return t!==2?!1:_s(t).fenceSync!=null}function Iy(t,e){Array.isArray(t)||(t=[t]),t.forEach(n=>{n!=null&&M(n.dtype!=="complex64",()=>`${e} does not support complex64 tensors in the WebGL backend.`)})}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Te=ee();Te.registerFlag("HAS_WEBGL",()=>Te.getNumber("WEBGL_VERSION")>0);Te.registerFlag("WEBGL_VERSION",()=>qj(2)?2:qj(1)?1:0);Te.registerFlag("WEBGL_CHECK_NUMERICAL_PROBLEMS",()=>!1);Te.registerFlag("WEBGL_BUFFER_SUPPORTED",()=>Te.get("WEBGL_VERSION")===2);Te.registerFlag("WEBGL_CPU_FORWARD",()=>!0);Te.registerFlag("WEBGL_FORCE_F16_TEXTURES",()=>!1);Te.registerFlag("WEBGL_PACK",()=>Te.getBool("HAS_WEBGL"));Te.registerFlag("WEBGL_PACK_NORMALIZATION",()=>Te.getBool("WEBGL_PACK"));Te.registerFlag("WEBGL_PACK_CLIP",()=>Te.getBool("WEBGL_PACK"));Te.registerFlag("WEBGL_PACK_DEPTHWISECONV",()=>Te.getBool("WEBGL_PACK"));Te.registerFlag("WEBGL_PACK_BINARY_OPERATIONS",()=>Te.getBool("WEBGL_PACK"));Te.registerFlag("WEBGL_PACK_UNARY_OPERATIONS",()=>Te.getBool("WEBGL_PACK"));Te.registerFlag("WEBGL_PACK_ARRAY_OPERATIONS",()=>Te.getBool("WEBGL_PACK"));Te.registerFlag("WEBGL_PACK_IMAGE_OPERATIONS",()=>Te.getBool("WEBGL_PACK"));Te.registerFlag("WEBGL_PACK_REDUCE",()=>Te.getBool("WEBGL_PACK"));Te.registerFlag("WEBGL_LAZILY_UNPACK",()=>Te.getBool("WEBGL_PACK"));Te.registerFlag("WEBGL_CONV_IM2COL",()=>Te.getBool("WEBGL_PACK"));Te.registerFlag("WEBGL_PACK_CONV2DTRANSPOSE",()=>Te.getBool("WEBGL_PACK"));Te.registerFlag("WEBGL_MAX_TEXTURE_SIZE",()=>pXe(Te.getNumber("WEBGL_VERSION")));Te.registerFlag("WEBGL_MAX_TEXTURES_IN_SHADER",()=>mXe(Te.getNumber("WEBGL_VERSION")));Te.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION",()=>{const t=Te.getNumber("WEBGL_VERSION");return t===0?0:gXe(t)});Te.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE",()=>Te.getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0&&!mq());Te.registerFlag("WEBGL_RENDER_FLOAT32_CAPABLE",()=>yXe(Te.getNumber("WEBGL_VERSION")));Te.registerFlag("WEBGL_RENDER_FLOAT32_ENABLED",()=>Te.getBool("WEBGL_FORCE_F16_TEXTURES")?!1:Te.getBool("WEBGL_RENDER_FLOAT32_CAPABLE"));Te.registerFlag("WEBGL_DOWNLOAD_FLOAT_ENABLED",()=>vXe(Te.getNumber("WEBGL_VERSION")));Te.registerFlag("WEBGL_FENCE_API_ENABLED",()=>bXe(Te.getNumber("WEBGL_VERSION")));Te.registerFlag("WEBGL_SIZE_UPLOAD_UNIFORM",()=>Te.getBool("WEBGL_RENDER_FLOAT32_ENABLED")?4:0);Te.registerFlag("WEBGL_DELETE_TEXTURE_THRESHOLD",()=>-1,t=>{if(typeof t!="number")throw new Error(`WEBGL_DELETE_TEXTURE_THRESHOLD must be a number but got ${t}.`);if(t<0&&t!==-1)throw new Error(`WEBGL_DELETE_TEXTURE_THRESHOLD must be -1 (indicating never delete) or at least 0, but got ${t}.`)});Te.registerFlag("WEBGL_FLUSH_THRESHOLD",()=>mq()?1:-1,t=>{if(typeof t!="number")throw new Error(`WEBGL_FLUSH_THRESHOLD must be a number but got ${t}.`);if(t<0&&t!==-1)throw new Error(`WEBGL_FLUSH_THRESHOLD must be -1 (indicating never manual flush) or at least 0, but got ${t}.`)});Te.registerFlag("CPU_HANDOFF_SIZE_THRESHOLD",()=>128);Te.registerFlag("WEBGL_USE_SHAPES_UNIFORMS",()=>!1);Te.registerFlag("TOPK_LAST_DIM_CPU_HANDOFF_SIZE_THRESHOLD",()=>1e5);Te.registerFlag("TOPK_K_CPU_HANDOFF_THRESHOLD",()=>128);Te.registerFlag("WEBGL_EXP_CONV",()=>!1);Te.registerFlag("SOFTWARE_WEBGL_ENABLED",()=>Te.getBool("IS_TEST"));Te.registerFlag("WEBGL_MAX_SIZE_FOR_NARROW_TEXTURE",()=>1/0);Te.registerFlag("WEBGL_AUTO_SQUARIFY_NARROW_TEXTURE_SHAPE",()=>!1);Te.registerFlag("WEBGL2_ISNAN_CUSTOM",()=>!1);Te.registerFlag("ENGINE_COMPILE_ONLY",()=>!1);/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mr(){let t,e,n,r,o,s,i,a,l,c;return ee().getNumber("WEBGL_VERSION")===2?(t="#version 300 es",e="in",n="out",r="in",o="texture",s="outputColor",i="out vec4 outputColor;",a=ee().getBool("WEBGL2_ISNAN_CUSTOM")?`
      bool isnan_custom(float val) {
        uint floatToUint = floatBitsToUint(val);
        return (floatToUint & 0x7fffffffu) > 0x7f800000u;
      }

      bvec4 isnan_custom(vec4 val) {
        return bvec4(isnan_custom(val.x),
          isnan_custom(val.y), isnan_custom(val.z), isnan_custom(val.w));
      }

      #define isnan(value) isnan_custom(value)
    `:"",l="",c=`
      #define round(value) newRound(value)
      int newRound(float value) {
        return int(floor(value + 0.5));
      }

      ivec4 newRound(vec4 value) {
        return ivec4(floor(value + vec4(0.5)));
      }
    `):(t="",e="attribute",n="varying",r="varying",o="texture2D",s="gl_FragColor",i="",a=`
      #define isnan(value) isnan_custom(value)
      bool isnan_custom(float val) {
        return (val > 0. || val < 1. || val == 0.) ? false : true;
      }
      bvec4 isnan_custom(vec4 val) {
        return bvec4(isnan(val.x), isnan(val.y), isnan(val.z), isnan(val.w));
      }
    `,l=`
      uniform float INFINITY;

      bool isinf(float val) {
        return abs(val) == INFINITY;
      }
      bvec4 isinf(vec4 val) {
        return equal(abs(val), vec4(INFINITY));
      }
    `,c=`
      int round(float value) {
        return int(floor(value + 0.5));
      }

      ivec4 round(vec4 value) {
        return ivec4(floor(value + vec4(0.5)));
      }
    `),{version:t,attribute:e,varyingVs:n,varyingFs:r,texture2D:o,output:s,defineOutput:i,defineSpecialNaN:a,defineSpecialInf:l,defineRound:c}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gu(t,e,n="index"){const r=Ie(e);return r.map((o,s)=>{const i=`int ${t[s]} = ${n} / ${o}`,a=s===r.length-1?`int ${t[s+1]} = ${n} - ${t[s]} * ${o}`:`index -= ${t[s]} * ${o}`;return`${i}; ${a};`}).join("")}function uS(t,e,n="index"){const r=Ie(e);return r.map((o,s)=>{const i=`int ${t[s]} = ${n} / outShapeStrides[${s}]`,a=s===r.length-1?`int ${t[s+1]} = ${n} - ${t[s]} * outShapeStrides[${s}]`:`index -= ${t[s]} * outShapeStrides[${s}]`;return`${i}; ${a};`}).join("")}function wXe(t,e){const n=t.length,r=t.map(s=>`${e}[${s}]`),o=new Array(n-1);o[n-2]=r[n-1];for(let s=n-3;s>=0;--s)o[s]=`(${o[s+1]} * ${r[s+1]})`;return o}function SXe(t,e,n="index"){const r=t.map((s,i)=>i),o=wXe(r,e);return o.map((s,i)=>{const a=`int ${t[i]} = ${n} / ${o[i]}`,l=i===o.length-1?`int ${t[i+1]} = ${n} - ${t[i]} * ${o[i]}`:`index -= ${t[i]} * ${o[i]}`;return`${a}; ${l};`}).join("")}function SP(t){const e=Ie(t).map(n=>n.toString());return`
  int getFlatIndex(ivec3 coords) {
    return coords.x * ${e[0]} + coords.y * ${e[1]} + coords.z;
  }
`}function CP(){return`
  int getFlatIndex(ivec3 coords) {
    return coords.x * outShapeStrides[0] + coords.y * outShapeStrides[1] + coords.z;
  }
`}const b7=`
  const float FLOAT_MAX = 1.70141184e38;
  const float FLOAT_MIN = 1.17549435e-38;

  lowp vec4 encode_float(highp float v) {
    if (isnan(v)) {
      return vec4(255, 255, 255, 255);
    }

    highp float av = abs(v);

    if(av < FLOAT_MIN) {
      return vec4(0.0, 0.0, 0.0, 0.0);
    } else if(v > FLOAT_MAX) {
      return vec4(0.0, 0.0, 128.0, 127.0) / 255.0;
    } else if(v < -FLOAT_MAX) {
      return vec4(0.0, 0.0,  128.0, 255.0) / 255.0;
    }

    highp vec4 c = vec4(0,0,0,0);

    highp float e = floor(log2(av));
    highp float m = exp2(fract(log2(av))) - 1.0;

    c[2] = floor(128.0 * m);
    m -= c[2] / 128.0;
    c[1] = floor(32768.0 * m);
    m -= c[1] / 32768.0;
    c[0] = floor(8388608.0 * m);

    highp float ebias = e + 127.0;
    c[3] = floor(ebias / 2.0);
    ebias -= c[3] * 2.0;
    c[2] += floor(ebias) * 128.0;

    c[3] += 128.0 * step(0.0, -v);

    return c / 255.0;
  }
`;/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const{getBroadcastDims:w7}=f4e;function CXe(t,e,n){const r=[];if(t.forEach(h=>{const p=ne(h.shapeInfo.logicalShape);if(h.shapeInfo.isUniform?r.push(`uniform float ${h.name}${p>1?`[${p}]`:""};`):(r.push(`uniform sampler2D ${h.name};`),r.push(`uniform int offset${h.name};`)),n.enableShapeUniforms){const{uniformShape:m}=$P(n.packedInputs,h.shapeInfo.logicalShape,h.shapeInfo.texShape);switch(m.length){case 1:r.push(`uniform int ${h.name}Shape;`);break;case 2:r.push(`uniform ivec2 ${h.name}Shape;`);break;case 3:r.push(`uniform ivec3 ${h.name}Shape;`);break;case 4:r.push(`uniform ivec4 ${h.name}Shape;`);break}r.push(`uniform ivec2 ${h.name}TexShape;`)}}),n.enableShapeUniforms){switch(e.logicalShape.length){case 1:r.push("uniform int outShape;");break;case 2:r.push("uniform ivec2 outShape;"),r.push("uniform int outShapeStrides;");break;case 3:r.push("uniform ivec3 outShape;"),r.push("uniform ivec2 outShapeStrides;");break;case 4:r.push("uniform ivec4 outShape;"),r.push("uniform ivec3 outShapeStrides;");break}r.push("uniform ivec2 outTexShape;")}n.customUniforms&&n.customUniforms.forEach(h=>{r.push(`uniform ${h.type} ${h.name}${h.arrayIndex?`[${h.arrayIndex}]`:""};`)});const o=r.join(`
`),s=t.map(h=>$Xe(h,e,n.packedInputs,n.enableShapeUniforms)).join(`
`),i=e.texShape,a=mr(),l=IXe(a);let c,u,d=AXe(a);return e.isPacked?(c=kXe(e.logicalShape,i,n.enableShapeUniforms),u=NXe(a)):(c=TXe(e.logicalShape,i,n.enableShapeUniforms),u=EXe(a)),n.packedInputs&&(d+=_Xe),[d,l,u,o,c,s,n.userCode].join(`
`)}function th(t,e=!1){const n=t.shapeInfo.logicalShape;switch(n.length){case 0:return HXe(t,e);case 1:return qXe(t,e);case 2:return YXe(t,e);case 3:return ZXe(t,e);case 4:return e9e(t,e);case 5:return t9e(t);case 6:return n9e(t);default:throw new Error(`${n.length}-D input sampling is not yet supported`)}}function S7(t,e){switch(t.shapeInfo.logicalShape.length){case 0:return GXe(t);case 1:return KXe(t,e);case 2:return XXe(t,e);case 3:return QXe(t,e);default:return JXe(t,e)}}function $Xe(t,e,n=!1,r){let o="";n?o+=S7(t,r):o+=th(t,r);const s=t.shapeInfo.logicalShape,i=e.logicalShape;return s.length<=i.length&&(n?o+=r9e(t,e):o+=o9e(t,e)),o}function kXe(t,e,n){switch(t.length){case 0:return C7();case 1:return DXe(t,e,n);case 2:return VXe(t,e,n);case 3:return FXe(t,e,n);default:return jXe(t,e,n)}}function TXe(t,e,n){switch(t.length){case 0:return C7();case 1:return MXe(t,e,n);case 2:return UXe(t,e,n);case 3:return LXe(t,e,n);case 4:return BXe(t,e,n);case 5:return zXe(t,e);case 6:return WXe(t,e);default:throw new Error(`${t.length}-D output sampling is not yet supported`)}}function IXe(t){return`
    float sampleTexture(sampler2D textureSampler, vec2 uv) {
      return ${t.texture2D}(textureSampler, uv).r;
    }
  `}function EXe(t){return`
    void setOutput(float val) {
      ${t.output} = vec4(val, 0, 0, 0);
    }
  `}function NXe(t){return`
    void setOutput(vec4 val) {
      ${t.output} = val;
    }
  `}function AXe(t){return`${t.version}
    precision highp float;
    precision highp int;
    precision highp sampler2D;
    ${t.varyingFs} vec2 resultUV;
    ${t.defineOutput}
    const vec2 halfCR = vec2(0.5, 0.5);

    struct ivec5
    {
      int x;
      int y;
      int z;
      int w;
      int u;
    };

    struct ivec6
    {
      int x;
      int y;
      int z;
      int w;
      int u;
      int v;
    };

    uniform float NAN;
    ${t.defineSpecialNaN}
    ${t.defineSpecialInf}
    ${t.defineRound}

    int imod(int x, int y) {
      return x - y * (x / y);
    }

    int idiv(int a, int b, float sign) {
      int res = a / b;
      int mod = imod(a, b);
      if (sign < 0. && mod != 0) {
        res -= 1;
      }
      return res;
    }

    //Based on the work of Dave Hoskins
    //https://www.shadertoy.com/view/4djSRW
    #define HASHSCALE1 443.8975
    float random(float seed){
      vec2 p = resultUV * seed;
      vec3 p3  = fract(vec3(p.xyx) * HASHSCALE1);
      p3 += dot(p3, p3.yzx + 19.19);
      return fract((p3.x + p3.y) * p3.z);
    }

    ${OXe}
    ${PXe}
    ${RXe}
  `}const OXe=`
vec2 uvFromFlat(int texNumR, int texNumC, int index) {
  int texR = index / texNumC;
  int texC = index - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
vec2 packedUVfrom1D(int texNumR, int texNumC, int index) {
  int texelIndex = index / 2;
  int texR = texelIndex / texNumC;
  int texC = texelIndex - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
`,PXe=`
vec2 packedUVfrom2D(int texelsInLogicalRow, int texNumR,
  int texNumC, int row, int col) {
  int texelIndex = (row / 2) * texelsInLogicalRow + (col / 2);
  int texR = texelIndex / texNumC;
  int texC = texelIndex - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
`,RXe=`
vec2 packedUVfrom3D(int texNumR, int texNumC,
    int texelsInBatch, int texelsInLogicalRow, int b,
    int row, int col) {
  int index = b * texelsInBatch + (row / 2) * texelsInLogicalRow + (col / 2);
  int texR = index / texNumC;
  int texC = index - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
`,_Xe=`
  float getChannel(vec4 frag, vec2 innerDims) {
    vec2 modCoord = mod(innerDims, 2.);
    return modCoord.x == 0. ?
      (modCoord.y == 0. ? frag.r : frag.g) :
      (modCoord.y == 0. ? frag.b : frag.a);
  }
  float getChannel(vec4 frag, int dim) {
    float modCoord = mod(float(dim), 2.);
    return modCoord == 0. ? frag.r : frag.g;
  }
`;function C7(){return`
    int getOutputCoords() {
      return 0;
    }
  `}function DXe(t,e,n){const r=[Math.ceil(e[0]/2),Math.ceil(e[1]/2)];return r[0]===1?n?`
      int getOutputCoords() {
        return 2 * int(resultUV.x * ceil(float(outTexShape[1]) / 2.0));
      }
    `:`
      int getOutputCoords() {
        return 2 * int(resultUV.x * ${r[1]}.0);
      }
    `:r[1]===1?n?`
      int getOutputCoords() {
        return 2 * int(resultUV.y * ceil(float(outTexShape[0]) / 2.0));
      }
    `:`
      int getOutputCoords() {
        return 2 * int(resultUV.y * ${r[0]}.0);
      }
    `:n?`
    int getOutputCoords() {
      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(packedTexShape[0], packedTexShape[1]));
      return 2 * (resTexRC.x * packedTexShape[1] + resTexRC.y);
    }
  `:`
    int getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${r[0]}, ${r[1]}));
      return 2 * (resTexRC.x * ${r[1]} + resTexRC.y);
    }
  `}function MXe(t,e,n){return e[0]===1?n?`
      int getOutputCoords() {
        return int(resultUV.x * float(outTexShape[1]));
      }
    `:`
      int getOutputCoords() {
        return int(resultUV.x * ${e[1]}.0);
      }
    `:e[1]===1?n?`
      int getOutputCoords() {
        return int(resultUV.y * float(outTexShape[0]));
      }
    `:`
      int getOutputCoords() {
        return int(resultUV.y * ${e[0]}.0);
      }
    `:n?`
    int getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(outTexShape[0], outTexShape[1]));
      return resTexRC.x * outTexShape[1] + resTexRC.y;
    }
  `:`
    int getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${e[0]}, ${e[1]}));
      return resTexRC.x * ${e[1]} + resTexRC.y;
    }
  `}function FXe(t,e,n){if(n)return`
    ivec3 getOutputCoords() {
      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));
      int texelsInLogicalRow = int(ceil(float(outShape[2]) / 2.0));
      int texelsInBatch = texelsInLogicalRow * int(ceil(float(outShape[1]) / 2.0));
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(packedTexShape[0], packedTexShape[1]));
      int index = resTexRC.x * packedTexShape[1] + resTexRC.y;

      int b = index / texelsInBatch;
      index -= b * texelsInBatch;

      int r = 2 * (index / texelsInLogicalRow);
      int c = imod(index, texelsInLogicalRow) * 2;

      return ivec3(b, r, c);
    }
  `;const r=[Math.ceil(e[0]/2),Math.ceil(e[1]/2)],o=Math.ceil(t[2]/2),s=o*Math.ceil(t[1]/2);return`
    ivec3 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${r[0]}, ${r[1]}));
      int index = resTexRC.x * ${r[1]} + resTexRC.y;

      int b = index / ${s};
      index -= b * ${s};

      int r = 2 * (index / ${o});
      int c = imod(index, ${o}) * 2;

      return ivec3(b, r, c);
    }
  `}function LXe(t,e,n){if(n)return`
  ivec3 getOutputCoords() {
    ivec2 resTexRC = ivec2(resultUV.yx *
                           vec2(outTexShape[0], outTexShape[1]));
    int index = resTexRC.x * outTexShape[1] + resTexRC.y;
    ${uS(["r","c","d"],t)}
    return ivec3(r, c, d);
  }
`;const r=gu(["r","c","d"],t);return`
    ivec3 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${e[0]}, ${e[1]}));
      int index = resTexRC.x * ${e[1]} + resTexRC.y;
      ${r}
      return ivec3(r, c, d);
    }
  `}function jXe(t,e,n){if(n)return`
    ivec4 getOutputCoords() {
      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(packedTexShape[0], packedTexShape[1]));
      int index = resTexRC.x * packedTexShape[1] + resTexRC.y;

      int texelsInLogicalRow = int(ceil(float(outShape[3]) / 2.0));
      int texelsInBatch = texelsInLogicalRow * int(ceil(float(outShape[2]) / 2.0));
      int texelsInBatchN = texelsInBatch * outShape[1];

      int b2 = index / texelsInBatchN;
      index -= b2 * texelsInBatchN;

      int b = index / texelsInBatch;
      index -= b * texelsInBatch;

      int r = 2 * (index / texelsInLogicalRow);
      int c = imod(index, texelsInLogicalRow) * 2;

      return ivec4(b2, b, r, c);
    }
  `;const r=[Math.ceil(e[0]/2),Math.ceil(e[1]/2)],o=Math.ceil(t[t.length-1]/2),s=o*Math.ceil(t[t.length-2]/2);let i=s,a="",l="b, r, c";for(let c=2;c<t.length-1;c++)i*=t[t.length-c-1],a=`
      int b${c} = index / ${i};
      index -= b${c} * ${i};
    `+a,l=`b${c}, `+l;return`
    ivec${t.length} getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${r[0]}, ${r[1]}));
      int index = resTexRC.x * ${r[1]} + resTexRC.y;

      ${a}

      int b = index / ${s};
      index -= b * ${s};

      int r = 2 * (index / ${o});
      int c = imod(index, ${o}) * 2;

      return ivec${t.length}(${l});
    }
  `}function BXe(t,e,n){if(n)return`
    ivec4 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
        vec2(outTexShape[0], outTexShape[1]));
      int index = resTexRC.x * outTexShape[1] + resTexRC.y;
      ${uS(["r","c","d","d2"],t)}
      return ivec4(r, c, d, d2);
    }
  `;const r=gu(["r","c","d","d2"],t);return`
    ivec4 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
        vec2(${e[0]}, ${e[1]}));
      int index = resTexRC.x * ${e[1]} + resTexRC.y;
      ${r}
      return ivec4(r, c, d, d2);
    }
  `}function zXe(t,e){const n=gu(["r","c","d","d2","d3"],t);return`
    ivec5 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx * vec2(${e[0]},
                             ${e[1]}));

      int index = resTexRC.x * ${e[1]} + resTexRC.y;

      ${n}

      ivec5 outShape = ivec5(r, c, d, d2, d3);
      return outShape;
    }
  `}function WXe(t,e){const n=gu(["r","c","d","d2","d3","d4"],t);return`
    ivec6 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
        vec2(${e[0]}, ${e[1]}));
      int index = resTexRC.x * ${e[1]} + resTexRC.y;

      ${n}

      ivec6 result = ivec6(r, c, d, d2, d3, d4);
      return result;
    }
  `}function VXe(t,e,n){const r=[Math.ceil(e[0]/2),Math.ceil(e[1]/2)];if(dt(t,e))return n?`
      ivec2 getOutputCoords() {
        ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));
        return 2 * ivec2(resultUV.yx * vec2(packedTexShape[0], packedTexShape[1]));
      }
    `:`
      ivec2 getOutputCoords() {
        return 2 * ivec2(resultUV.yx * vec2(${r[0]}, ${r[1]}));
      }
    `;const o=Math.ceil(t[1]/2);return n?`
    ivec2 getOutputCoords() {
      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));
      int texelsInLogicalRow = int(ceil(float(outShape[1]) / 2.0));
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(packedTexShape[0], packedTexShape[1]));

      int index = resTexRC.x * packedTexShape[1] + resTexRC.y;
      int r = 2 * (index / texelsInLogicalRow);
      int c = imod(index, texelsInLogicalRow) * 2;

      return ivec2(r, c);
    }
  `:`
    ivec2 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${r[0]}, ${r[1]}));

      int index = resTexRC.x * ${r[1]} + resTexRC.y;
      int r = 2 * (index / ${o});
      int c = imod(index, ${o}) * 2;

      return ivec2(r, c);
    }
  `}function UXe(t,e,n){return dt(t,e)?n?`
      ivec2 getOutputCoords() {
        return ivec2(resultUV.yx * vec2(outTexShape[0], outTexShape[1]));
      }
    `:`
      ivec2 getOutputCoords() {
        return ivec2(resultUV.yx * vec2(${e[0]}, ${e[1]}));
      }
    `:t[1]===1?n?`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(outTexShape[0], outTexShape[1]));
        int index = resTexRC.x * outTexShape[1] + resTexRC.y;
        return ivec2(index, 0);
      }
    `:`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(${e[0]}, ${e[1]}));
        int index = resTexRC.x * ${e[1]} + resTexRC.y;
        return ivec2(index, 0);
      }
    `:t[0]===1?n?`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(outTexShape[0], outTexShape[1]));
        int index = resTexRC.x * outTexShape[1] + resTexRC.y;
        return ivec2(0, index);
      }
    `:`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(${e[0]}, ${e[1]}));
        int index = resTexRC.x * ${e[1]} + resTexRC.y;
        return ivec2(0, index);
      }
    `:n?`
    ivec2 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(outTexShape[0], outTexShape[1]));
      int index = resTexRC.x * outTexShape[1] + resTexRC.y;
      int r = index / outShape[1];
      int c = index - r * outShape[1];
      return ivec2(r, c);
    }
  `:`
    ivec2 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${e[0]}, ${e[1]}));
      int index = resTexRC.x * ${e[1]} + resTexRC.y;
      int r = index / ${t[1]};
      int c = index - r * ${t[1]};
      return ivec2(r, c);
    }
  `}function yu(t){return`offset${t}`}function GXe(t){const e=t.name,n="get"+e.charAt(0).toUpperCase()+e.slice(1),r=mr();return`
    vec4 ${n}() {
      return ${r.texture2D}(${e}, halfCR);
    }
  `}function HXe(t,e){const n=t.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1);if(t.shapeInfo.isUniform)return`float ${r}() {return ${n};}`;const[o,s]=t.shapeInfo.texShape;if(o===1&&s===1)return`
      float ${r}() {
        return sampleTexture(${n}, halfCR);
      }
    `;const i=yu(n);if(e)return`
    float ${r}() {
      vec2 uv = uvFromFlat(${n}TexShape[0], ${n}TexShape[1], ${i});
      return sampleTexture(${n}, uv);
    }
  `;const[a,l]=t.shapeInfo.texShape;return`
    float ${r}() {
      vec2 uv = uvFromFlat(${a}, ${l}, ${i});
      return sampleTexture(${n}, uv);
    }
  `}function KXe(t,e){const n=t.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),o=t.shapeInfo.texShape,s=mr();if(e)return`
    vec4 ${r}(int index) {
      ivec2 packedTexShape = ivec2(ceil(float(${n}TexShape[0]) / 2.0), ceil(float(${n}TexShape[1]) / 2.0));
      vec2 uv = packedUVfrom1D(
        packedTexShape[0], packedTexShape[1], index);
      return ${s.texture2D}(${n}, uv);
    }
  `;const i=[Math.ceil(o[0]/2),Math.ceil(o[1]/2)];return`
    vec4 ${r}(int index) {
      vec2 uv = packedUVfrom1D(
        ${i[0]}, ${i[1]}, index);
      return ${s.texture2D}(${n}, uv);
    }
  `}function qXe(t,e){const n=t.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1);if(t.shapeInfo.isUniform)return`
      float ${r}(int index) {
        ${nh(t)}
      }
    `;const o=t.shapeInfo.texShape,s=o[0],i=o[1];if(i===1&&s===1)return`
      float ${r}(int index) {
        return sampleTexture(${n}, halfCR);
      }
    `;const a=yu(n);return i===1?e?`
      float ${r}(int index) {
        vec2 uv = vec2(0.5, (float(index + ${a}) + 0.5) / float(${n}TexShape[0]));
        return sampleTexture(${n}, uv);
      }
    `:`
      float ${r}(int index) {
        vec2 uv = vec2(0.5, (float(index + ${a}) + 0.5) / ${s}.0);
        return sampleTexture(${n}, uv);
      }
    `:s===1?e?`
      float ${r}(int index) {
        vec2 uv = vec2((float(index + ${a}) + 0.5) / float(${n}TexShape[1]), 0.5);
        return sampleTexture(${n}, uv);
      }
    `:`
      float ${r}(int index) {
        vec2 uv = vec2((float(index + ${a}) + 0.5) / ${i}.0, 0.5);
        return sampleTexture(${n}, uv);
      }
    `:e?`
    float ${r}(int index) {
      vec2 uv = uvFromFlat(${n}TexShape[0], ${n}TexShape[1], index + ${a});
      return sampleTexture(${n}, uv);
    }
  `:`
    float ${r}(int index) {
      vec2 uv = uvFromFlat(${s}, ${i}, index + ${a});
      return sampleTexture(${n}, uv);
    }
  `}function XXe(t,e){const n=t.shapeInfo.logicalShape,r=t.name,o="get"+r.charAt(0).toUpperCase()+r.slice(1),s=t.shapeInfo.texShape,i=s[0],a=s[1],l=mr();if(s!=null&&dt(n,s))return e?`
      vec4 ${o}(int row, int col) {
        vec2 uv = (vec2(col, row) + halfCR) / vec2(${r}TexShape[1], ${r}TexShape[0]);

        return ${l.texture2D}(${r}, uv);
      }
    `:`
      vec4 ${o}(int row, int col) {
        vec2 uv = (vec2(col, row) + halfCR) / vec2(${a}.0, ${i}.0);

        return ${l.texture2D}(${r}, uv);
      }
    `;if(e)return`
    vec4 ${o}(int row, int col) {
      ivec2 packedTexShape = ivec2(ceil(float(${r}TexShape[0]) / 2.0), ceil(float(${r}TexShape[1]) / 2.0));
      int valuesPerRow = int(ceil(float(${r}Shape[1]) / 2.0));
      vec2 uv = packedUVfrom2D(valuesPerRow, packedTexShape[0], packedTexShape[1], row, col);
      return ${l.texture2D}(${r}, uv);
    }
  `;const c=[Math.ceil(s[0]/2),Math.ceil(s[1]/2)],u=Math.ceil(n[1]/2);return`
    vec4 ${o}(int row, int col) {
      vec2 uv = packedUVfrom2D(${u}, ${c[0]}, ${c[1]}, row, col);
      return ${l.texture2D}(${r}, uv);
    }
  `}function YXe(t,e){const n=t.shapeInfo.logicalShape,r=t.name,o="get"+r.charAt(0).toUpperCase()+r.slice(1),s=t.shapeInfo.texShape;if(s!=null&&dt(n,s)){if(e)return`
      float ${o}(int row, int col) {
        vec2 uv = (vec2(col, row) + halfCR) / vec2(${r}TexShape[1], ${r}TexShape[0]);
        return sampleTexture(${r}, uv);
      }
    `;const f=s[0],h=s[1];return`
    float ${o}(int row, int col) {
      vec2 uv = (vec2(col, row) + halfCR) / vec2(${h}.0, ${f}.0);
      return sampleTexture(${r}, uv);
    }
  `}const{newShape:i,keptDims:a}=El(n),l=i;if(l.length<n.length){const f=rh(t,l),h=["row","col"];return`
      ${th(f,e)}
      float ${o}(int row, int col) {
        return ${o}(${oh(h,a)});
      }
    `}if(t.shapeInfo.isUniform)return`
      float ${o}(int row, int col) {
        int index = round(dot(vec2(row, col), vec2(${n[1]}, 1)));
        ${nh(t)}
      }
    `;const c=s[0],u=s[1],d=yu(r);return u===1?e?`
      float ${o}(int row, int col) {
        float index = dot(vec3(row, col, ${d}), vec3(${r}Shape[1], 1, 1));
        vec2 uv = vec2(0.5, (index + 0.5) / float(${r}TexShape[0]));
        return sampleTexture(${r}, uv);
      }
    `:`
    float ${o}(int row, int col) {
      float index = dot(vec3(row, col, ${d}), vec3(${n[1]}, 1, 1));
      vec2 uv = vec2(0.5, (index + 0.5) / ${c}.0);
      return sampleTexture(${r}, uv);
    }
  `:c===1?e?`
      float ${o}(int row, int col) {
        float index = dot(vec3(row, col, ${d}), vec3(${r}Shape[1], 1, 1));
        vec2 uv = vec2((index + 0.5) / float(${r}TexShape[1]), 0.5);
        return sampleTexture(${r}, uv);
      }
    `:`
    float ${o}(int row, int col) {
      float index = dot(vec3(row, col, ${d}), vec3(${n[1]}, 1, 1));
      vec2 uv = vec2((index + 0.5) / ${u}.0, 0.5);
      return sampleTexture(${r}, uv);
    }
  `:e?`
      float ${o}(int row, int col) {
        // Explicitly use integer operations as dot() only works on floats.
        int index = row * ${r}Shape[1] + col + ${d};
        vec2 uv = uvFromFlat(${r}TexShape[0], ${r}TexShape[1], index);
        return sampleTexture(${r}, uv);
      }
    `:`
  float ${o}(int row, int col) {
    // Explicitly use integer operations as dot() only works on floats.
    int index = row * ${n[1]} + col + ${d};
    vec2 uv = uvFromFlat(${c}, ${u}, index);
    return sampleTexture(${r}, uv);
  }
`}function QXe(t,e){const n=t.shapeInfo.logicalShape,r=t.name,o="get"+r.charAt(0).toUpperCase()+r.slice(1),s=t.shapeInfo.texShape,i=[Math.ceil(s[0]/2),Math.ceil(s[1]/2)];if(n[0]===1){const f=n.slice(1),h=[1,2],p=rh(t,f),m=["b","row","col"];return`
        ${S7(p,e)}
        vec4 ${o}(int b, int row, int col) {
          return ${o}(${oh(m,h)});
        }
      `}const a=mr();if(e)return`
    vec4 ${o}(int b, int row, int col) {
      ivec2 packedTexShape = ivec2(ceil(float(${r}TexShape[0]) / 2.0), ceil(float(${r}TexShape[1]) / 2.0));
      int valuesPerRow = int(ceil(float(${r}Shape[2]) / 2.0));
      int texelsInBatch = valuesPerRow * int(ceil(float(${r}Shape[1]) / 2.0));
      vec2 uv = packedUVfrom3D(
        packedTexShape[0], packedTexShape[1], texelsInBatch, valuesPerRow, b, row, col);
      return ${a.texture2D}(${r}, uv);
    }
  `;const l=i[0],c=i[1],u=Math.ceil(n[2]/2),d=u*Math.ceil(n[1]/2);return`
    vec4 ${o}(int b, int row, int col) {
      vec2 uv = packedUVfrom3D(
        ${l}, ${c}, ${d}, ${u}, b, row, col);
      return ${a.texture2D}(${r}, uv);
    }
  `}function ZXe(t,e){const n=t.shapeInfo.logicalShape,r=t.name,o="get"+r.charAt(0).toUpperCase()+r.slice(1),s=n[1]*n[2],i=n[2],{newShape:a,keptDims:l}=El(n),c=a;if(c.length<n.length){const m=rh(t,c),g=["row","col","depth"];return`
        ${th(m,e)}
        float ${o}(int row, int col, int depth) {
          return ${o}(${oh(g,l)});
        }
      `}if(t.shapeInfo.isUniform)return`
      float ${o}(int row, int col, int depth) {
        int index = round(dot(vec3(row, col, depth),
                          vec3(${s}, ${i}, 1)));
        ${nh(t)}
      }
    `;const u=t.shapeInfo.texShape,d=u[0],f=u[1],h=t.shapeInfo.flatOffset;if(f===s&&h==null)return e?`
      float ${o}(int row, int col, int depth) {
        int stride1 = ${r}Shape[2];
        float texR = float(row);
        float texC = dot(vec2(col, depth), vec2(stride1, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(${r}TexShape[1], ${r}TexShape[0]);
        return sampleTexture(${r}, uv);
      }
    `:`
        float ${o}(int row, int col, int depth) {
          float texR = float(row);
          float texC = dot(vec2(col, depth), vec2(${i}, 1));
          vec2 uv = (vec2(texC, texR) + halfCR) /
                     vec2(${f}.0, ${d}.0);
          return sampleTexture(${r}, uv);
        }
      `;if(f===i&&h==null)return e?`
      float ${o}(int row, int col, int depth) {
        float texR = dot(vec2(row, col), vec2(${r}Shape[1], 1));
        float texC = float(depth);
        vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${r}TexShape[1], ${r}TexShape[0]);
        return sampleTexture(${r}, uv);
      }
    `:`
    float ${o}(int row, int col, int depth) {
      float texR = dot(vec2(row, col), vec2(${n[1]}, 1));
      float texC = float(depth);
      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${f}.0, ${d}.0);
      return sampleTexture(${r}, uv);
    }
  `;const p=yu(r);return e?`
    float ${o}(int row, int col, int depth) {
      // Explicitly use integer operations as dot() only works on floats.
      int stride0 = ${r}Shape[1] * ${r}Shape[2];
      int stride1 = ${r}Shape[2];
      int index = row * stride0 + col * stride1 + depth + ${p};
      vec2 uv = uvFromFlat(${r}TexShape[0], ${r}TexShape[1], index);
      return sampleTexture(${r}, uv);
    }
    `:`
      float ${o}(int row, int col, int depth) {
        // Explicitly use integer operations as dot() only works on floats.
        int index = row * ${s} + col * ${i} + depth + ${p};
        vec2 uv = uvFromFlat(${d}, ${f}, index);
        return sampleTexture(${r}, uv);
      }
  `}function JXe(t,e){const n=t.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),o=mr();if(e)return`
    vec4 ${r}(int b2, int b, int row, int col) {
      int valuesPerRow = int(ceil(float(${n}Shape[3]) / 2.0));
      int texelsInBatch = valuesPerRow * int(ceil(float(${n}Shape[2]) / 2.0));
      int index = b * texelsInBatch + (row / 2) * valuesPerRow + (col / 2);
      texelsInBatch *= ${n}Shape[1];
      index = b2 * texelsInBatch + index;
      ivec2 packedTexShape = ivec2(ceil(float(${n}TexShape[0]) / 2.0), ceil(float(${n}TexShape[1]) / 2.0));
      int texR = index / packedTexShape[1];
      int texC = index - texR * packedTexShape[1];
      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(packedTexShape[1], packedTexShape[0]); return ${o.texture2D}(${n}, uv);
    }
  `;const s=t.shapeInfo.logicalShape,i=s.length,a=t.shapeInfo.texShape,l=[Math.ceil(a[0]/2),Math.ceil(a[1]/2)],c=l[0],u=l[1],d=Math.ceil(s[i-1]/2);let f=d*Math.ceil(s[i-2]/2),h="int b, int row, int col",p=`b * ${f} + (row / 2) * ${d} + (col / 2)`;for(let m=2;m<i-1;m++)h=`int b${m}, `+h,f*=s[i-m-1],p=`b${m} * ${f} + `+p;return`
    vec4 ${r}(${h}) {
      int index = ${p};
      int texR = index / ${u};
      int texC = index - texR * ${u};
      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${u}, ${c});
      return ${o.texture2D}(${n}, uv);
    }
  `}function e9e(t,e){const n=t.shapeInfo.logicalShape,r=t.name,o="get"+r.charAt(0).toUpperCase()+r.slice(1),s=n[3],i=n[2]*s,a=n[1]*i,{newShape:l,keptDims:c}=El(n);if(l.length<n.length){const v=rh(t,l),x=["row","col","depth","depth2"];return`
      ${th(v,e)}
      float ${o}(int row, int col, int depth, int depth2) {
        return ${o}(${oh(x,c)});
      }
    `}if(t.shapeInfo.isUniform)return`
      float ${o}(int row, int col, int depth, int depth2) {
        int index = round(dot(vec4(row, col, depth, depth2),
                          vec4(${a}, ${i}, ${s}, 1)));
        ${nh(t)}
      }
    `;const u=t.shapeInfo.flatOffset,d=t.shapeInfo.texShape,f=d[0],h=d[1],p=`int stride2 = ${r}Shape[3];`,m=`int stride1 = ${r}Shape[2] * stride2;`,g=`int stride0 = ${r}Shape[1] * stride1;`;if(h===a&&u==null)return e?`
      float ${o}(int row, int col, int depth, int depth2) {
        ${p}
        ${m}
        float texR = float(row);
        float texC =
            dot(vec3(col, depth, depth2),
                vec3(stride1, stride2, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(${r}TexShape[1], ${r}TexShape[0]);
        return sampleTexture(${r}, uv);
      }
    `:`
      float ${o}(int row, int col, int depth, int depth2) {
        float texR = float(row);
        float texC =
            dot(vec3(col, depth, depth2),
                vec3(${i}, ${s}, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(${h}.0, ${f}.0);
        return sampleTexture(${r}, uv);
      }
    `;if(h===s&&u==null)return e?`
      float ${o}(int row, int col, int depth, int depth2) {
        float texR = dot(vec3(row, col, depth),
                         vec3(${r}Shape[1] * ${r}Shape[2], ${r}Shape[2], 1));
        float texC = float(depth2);
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(${r}TexShape[1], ${r}TexShape[0]);
        return sampleTexture(${r}, uv);
      }
    `:`
      float ${o}(int row, int col, int depth, int depth2) {
        float texR = dot(vec3(row, col, depth),
                         vec3(${n[1]*n[2]}, ${n[2]}, 1));
        float texC = float(depth2);
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(${h}.0, ${f}.0);
        return sampleTexture(${r}, uv);
      }
    `;const y=yu(r);return e?`
    float ${o}(int row, int col, int depth, int depth2) {
      // Explicitly use integer operations as dot() only works on floats.
      ${p}
      ${m}
      ${g}
      int index = row * stride0 + col * stride1 +
          depth * stride2 + depth2;
      vec2 uv = uvFromFlat(${r}TexShape[0], ${r}TexShape[1], index + ${y});
      return sampleTexture(${r}, uv);
    }
  `:`
    float ${o}(int row, int col, int depth, int depth2) {
      // Explicitly use integer operations as dot() only works on floats.
      int index = row * ${a} + col * ${i} +
          depth * ${s} + depth2;
      vec2 uv = uvFromFlat(${f}, ${h}, index + ${y});
      return sampleTexture(${r}, uv);
    }
  `}function t9e(t){const e=t.shapeInfo.logicalShape,n=t.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),o=e[4],s=e[3]*o,i=e[2]*s,a=e[1]*i,{newShape:l,keptDims:c}=El(e);if(l.length<e.length){const m=rh(t,l),g=["row","col","depth","depth2","depth3"];return`
      ${th(m)}
      float ${r}(int row, int col, int depth, int depth2, int depth3) {
        return ${r}(${oh(g,c)});
      }
    `}if(t.shapeInfo.isUniform)return`
      float ${r}(int row, int col, int depth, int depth2, int depth3) {
        float index = dot(
          vec4(row, col, depth, depth2),
          vec4(${a}, ${i}, ${s}, ${o})) +
          depth3;
        ${nh(t)}
      }
    `;const u=t.shapeInfo.flatOffset,d=t.shapeInfo.texShape,f=d[0],h=d[1];if(h===a&&u==null)return`
      float ${r}(int row, int col, int depth, int depth2, int depth3) {
        int texR = row;
        float texC = dot(vec4(col, depth, depth2, depth3),
                         vec4(${i}, ${s}, ${o}, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(${h}.0, ${f}.0);
        return sampleTexture(${n}, uv);
      }
    `;if(h===o&&u==null)return`
      float ${r}(int row, int col, int depth, int depth2, int depth3) {
        float texR = dot(
          vec4(row, col, depth, depth2),
          vec4(${e[1]*e[2]*e[3]},
               ${e[2]*e[3]}, ${e[3]}, 1));
        int texC = depth3;
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(${h}.0, ${f}.0);
        return sampleTexture(${n}, uv);
      }
    `;const p=yu(n);return`
    float ${r}(int row, int col, int depth, int depth2, int depth3) {
      // Explicitly use integer operations as dot() only works on floats.
      int index = row * ${a} + col * ${i} + depth * ${s} +
          depth2 * ${o} + depth3 + ${p};
      vec2 uv = uvFromFlat(${f}, ${h}, index);
      return sampleTexture(${n}, uv);
    }
  `}function n9e(t){const e=t.shapeInfo.logicalShape,n=t.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),{newShape:o,keptDims:s}=El(e);if(o.length<e.length){const g=rh(t,o),y=["row","col","depth","depth2","depth3","depth4"];return`
      ${th(g)}
      float ${r}(int row, int col, int depth,
                    int depth2, int depth3, int depth4) {
        return ${r}(${oh(y,s)});
      }
    `}const i=e[5],a=e[4]*i,l=e[3]*a,c=e[2]*l,u=e[1]*c;if(t.shapeInfo.isUniform)return`
      float ${r}(int row, int col, int depth,
                  int depth2, int depth3, int depth4) {
        int index = round(dot(
          vec4(row, col, depth, depth2),
          vec4(${u}, ${c}, ${l}, ${a})) +
          dot(
            vec2(depth3, depth4),
            vec2(${i}, 1)));
        ${nh(t)}
      }
    `;const d=t.shapeInfo.flatOffset,f=t.shapeInfo.texShape,h=f[0],p=f[1];if(p===u&&d==null)return`
      float ${r}(int row, int col, int depth,
                    int depth2, int depth3, int depth4) {
        int texR = row;
        float texC = dot(vec4(col, depth, depth2, depth3),
          vec4(${c}, ${l}, ${a}, ${i})) +
               float(depth4);
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(${p}.0, ${h}.0);
        return sampleTexture(${n}, uv);
      }
    `;if(p===i&&d==null)return`
      float ${r}(int row, int col, int depth,
                    int depth2, int depth3, int depth4) {
        float texR = dot(vec4(row, col, depth, depth2),
          vec4(${e[1]*e[2]*e[3]*e[4]},
               ${e[2]*e[3]*e[4]},
               ${e[3]*e[4]},
               ${e[4]})) + float(depth3);
        int texC = depth4;
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(${p}.0, ${h}.0);
        return sampleTexture(${n}, uv);
      }
    `;const m=yu(n);return`
    float ${r}(int row, int col, int depth,
                  int depth2, int depth3, int depth4) {
      // Explicitly use integer operations as dot() only works on floats.
      int index = row * ${u} + col * ${c} + depth * ${l} +
          depth2 * ${a} + depth3 * ${i} + depth4 + ${m};
      vec2 uv = uvFromFlat(${h}, ${p}, index);
      return sampleTexture(${n}, uv);
    }
  `}function nh(t){const e=t.name,n=ne(t.shapeInfo.logicalShape);return n<2?`return ${e};`:`
    for (int i = 0; i < ${n}; i++) {
      if (i == index) {
        return ${e}[i];
      }
    }
  `}function r9e(t,e){const n=t.name,r=n.charAt(0).toUpperCase()+n.slice(1),o="get"+r+"AtOutCoords",s=t.shapeInfo.logicalShape.length,i=e.logicalShape.length,a=w7(t.shapeInfo.logicalShape,e.logicalShape),l=vt(i),c=i-s;let u;const d=["x","y","z","w","u","v"];s===0?u="":i<2&&a.length>=1?u="coords = 0;":u=a.map(v=>`coords.${d[v+c]} = 0;`).join(`
`);let f="";i<2&&s>0?f="coords":f=t.shapeInfo.logicalShape.map((v,x)=>`coords.${d[x+c]}`).join(", ");let h="return outputValue;";const m=ne(t.shapeInfo.logicalShape)===1,y=ne(e.logicalShape)===1;if(s===1&&!m&&!y)h=`
      return vec4(outputValue.xy, outputValue.xy);
    `;else if(m&&!y)i===1?h=`
        return vec4(outputValue.x, outputValue.x, 0., 0.);
      `:h=`
        return vec4(outputValue.x);
      `;else if(a.length){const v=s-2,x=s-1;a.indexOf(v)>-1&&a.indexOf(x)>-1?h="return vec4(outputValue.x);":a.indexOf(v)>-1?h="return vec4(outputValue.x, outputValue.y, outputValue.x, outputValue.y);":a.indexOf(x)>-1&&(h="return vec4(outputValue.xx, outputValue.zz);")}return`
    vec4 ${o}() {
      ${l} coords = getOutputCoords();
      ${u}
      vec4 outputValue = get${r}(${f});
      ${h}
    }
  `}function o9e(t,e){const n=t.name,r=n.charAt(0).toUpperCase()+n.slice(1),o="get"+r+"AtOutCoords",s=e.texShape,i=t.shapeInfo.texShape,a=t.shapeInfo.logicalShape.length,l=e.logicalShape.length;if(!t.shapeInfo.isUniform&&a===l&&t.shapeInfo.flatOffset==null&&dt(i,s))return`
      float ${o}() {
        return sampleTexture(${n}, resultUV);
      }
    `;const c=vt(l),u=w7(t.shapeInfo.logicalShape,e.logicalShape),d=l-a;let f;const h=["x","y","z","w","u","v"];a===0?f="":l<2&&u.length>=1?f="coords = 0;":f=u.map(m=>`coords.${h[m+d]} = 0;`).join(`
`);let p="";return l<2&&a>0?p="coords":p=t.shapeInfo.logicalShape.map((m,g)=>`coords.${h[g+d]}`).join(", "),`
    float ${o}() {
      ${c} coords = getOutputCoords();
      ${f}
      return get${r}(${p});
    }
  `}function vt(t){if(t<=1)return"int";if(t===2)return"ivec2";if(t===3)return"ivec3";if(t===4)return"ivec4";if(t===5)return"ivec5";if(t===6)return"ivec6";throw Error(`GPU for rank ${t} is not yet supported`)}function $P(t,e,n){const{newShape:r,keptDims:o}=El(e),s=e.length,i=t&&s===3&&e[0]===1,a=i?e.slice(1):r,l=!t&&s>1&&!dt(e,n)&&r.length<s||i;return{useSqueezeShape:l,uniformShape:l?a:e,keptDims:o}}function rh(t,e){const n=JSON.parse(JSON.stringify(t));return n.shapeInfo.logicalShape=e,n}function oh(t,e){return e.map(n=>t[n]).join(", ")}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function s9e(t,e,n,r){const o=n.map((u,d)=>{const f={logicalShape:u.shape,texShape:u.isUniform?null:u.texData.texShape,isUniform:u.isUniform,isPacked:u.isUniform?!1:u.texData.isPacked,flatOffset:null};return u.texData!=null&&u.texData.slice!=null&&u.texData.slice.flatOffset>0&&(f.flatOffset=u.texData.slice.flatOffset),{name:e.variableNames[d],shapeInfo:f}}),s=o.map(u=>u.shapeInfo),i={logicalShape:r.shape,texShape:r.texData.texShape,isUniform:!1,isPacked:r.texData.isPacked,flatOffset:null},a=CXe(o,i,e),l=Z8e(t.gl,a),c=t.createProgram(l);return ee().get("ENGINE_COMPILE_ONLY")?{program:e,fragmentShader:l,source:a,webGLProgram:c,inShapeInfos:s,outShapeInfo:i,variablesLocations:null,customUniformLocations:null,infLoc:null,nanLoc:null,outShapeLocation:null,outShapeStridesLocation:null,outTexShapeLocation:null}:(t.buildVao(c),Object.assign({program:e,fragmentShader:l,source:a,webGLProgram:c,inShapeInfos:s,outShapeInfo:i},$7(t,e,c)))}function $7(t,e,n){const r=[],o=[];let s,i,a,l=null,c=null;c=t.getUniformLocation(n,"NAN",!1),ee().getNumber("WEBGL_VERSION")===1&&(l=t.getUniformLocation(n,"INFINITY",!1));const u=!1;for(const d of e.variableNames){const f={name:d,uniform:t.getUniformLocation(n,d,u),offset:t.getUniformLocation(n,`offset${d}`,u)};e.enableShapeUniforms&&(f.shape=t.getUniformLocation(n,`${d}Shape`,u),f.texShape=t.getUniformLocation(n,`${d}TexShape`,u)),r.push(f)}if(e.enableShapeUniforms&&(s=t.getUniformLocation(n,"outShape",u),a=t.getUniformLocation(n,"outShapeStrides",u),i=t.getUniformLocation(n,"outTexShape",u)),e.customUniforms)for(const d of e.customUniforms)o.push(t.getUniformLocation(n,d.name,u));return{variablesLocations:r,customUniformLocations:o,infLoc:l,nanLoc:c,outShapeLocation:s,outShapeStridesLocation:a,outTexShapeLocation:i}}function Xj(t,e){if(t.length!==e.length)throw Error(`Binary was compiled with ${t.length} inputs, but was executed with ${e.length} inputs`);t.forEach((n,r)=>{const o=n.logicalShape,s=e[r],i=s.shape;if(!dt(o,i))throw Error(`Binary was compiled with different shapes than the current args. Shapes ${o} and ${i} must match`);if(n.isUniform&&s.isUniform)return;const a=n.texShape,l=s.isUniform?null:s.texData.texShape;if(!dt(a,l))throw Error(`Binary was compiled with different texture shapes than the current args. Shape ${a} and ${l} must match`)})}function i9e(t,e,n,r,o){e.program.enableShapeUniforms||(Xj(e.inShapeInfos,n),Xj([e.outShapeInfo],[r]));const s=r.texData.texture,i=r.texData.texShape;r.texData.isPacked?t.setOutputPackedMatrixTexture(s.texture,i[0],i[1]):t.setOutputMatrixTexture(s.texture,i[0],i[1]),t.setProgram(e.webGLProgram),t.bindVertexArray(e.webGLProgram.vao),ee().getNumber("WEBGL_VERSION")===1&&e.infLoc!==null&&t.gl.uniform1f(e.infLoc,1/0),e.nanLoc!==null&&t.gl.uniform1f(e.nanLoc,NaN);for(let l=0;l<n.length;++l){const c=n[l],{uniform:u,offset:d,shape:f,texShape:h}=e.variablesLocations[l];if(f){const{uniformShape:p}=$P(e.program.packedInputs,c.shape,c.texData.texShape);switch(p.length){case 1:t.gl.uniform1iv(f,new Int32Array(p));break;case 2:t.gl.uniform2iv(f,new Int32Array(p));break;case 3:t.gl.uniform3iv(f,new Int32Array(p));break;case 4:t.gl.uniform4iv(f,new Int32Array(p));break}}if(h&&t.gl.uniform2i(h,c.texData.texShape[0],c.texData.texShape[1]),u!=null){if(c.isUniform){if(ne(c.shape)<2)t.gl.uniform1f(u,c.uniformValues[0]);else{let p=c.uniformValues;p instanceof Float32Array||(p=new Float32Array(p)),t.gl.uniform1fv(u,p)}continue}c.texData.slice!=null&&d!=null&&t.gl.uniform1i(d,c.texData.slice.flatOffset),t.setInputMatrixTexture(c.texData.texture.texture,u,l)}}const a=e.outShapeLocation;if(a)switch(r.shape.length){case 1:t.gl.uniform1iv(a,new Int32Array(r.shape));break;case 2:t.gl.uniform2iv(a,new Int32Array(r.shape));break;case 3:t.gl.uniform3iv(a,new Int32Array(r.shape));break;case 4:t.gl.uniform4iv(a,new Int32Array(r.shape));break}if(e.outShapeStridesLocation){const l=Ie(r.shape);switch(r.shape.length){case 2:t.gl.uniform1iv(e.outShapeStridesLocation,new Int32Array(l));break;case 3:t.gl.uniform2iv(e.outShapeStridesLocation,new Int32Array(l));break;case 4:t.gl.uniform3iv(e.outShapeStridesLocation,new Int32Array(l));break}}if(e.outTexShapeLocation&&t.gl.uniform2i(e.outTexShapeLocation,r.texData.texShape[0],r.texData.texShape[1]),e.program.customUniforms&&o)for(let l=0;l<e.program.customUniforms.length;++l){const c=e.program.customUniforms[l],u=e.customUniformLocations[l],d=o[l];if(c.type==="float")t.gl.uniform1fv(u,d);else if(c.type==="vec2")t.gl.uniform2fv(u,d);else if(c.type==="vec3")t.gl.uniform3fv(u,d);else if(c.type==="vec4")t.gl.uniform4fv(u,d);else if(c.type==="int")t.gl.uniform1iv(u,d);else if(c.type==="ivec2")t.gl.uniform2iv(u,d);else if(c.type==="ivec3")t.gl.uniform3iv(u,d);else if(c.type==="ivec4")t.gl.uniform4iv(u,d);else throw Error(`uniform type ${c.type} is not supported yet.`)}t.executeProgram()}function a9e(t,e,n){let r="";e.concat(n).forEach(i=>{const a=i.texData!=null&&i.texData.slice!=null&&i.texData.slice.flatOffset>0;if(t.enableShapeUniforms&&!i.isUniform){const l=i.texData.texShape,{useSqueezeShape:c,uniformShape:u,keptDims:d}=$P(t.packedInputs,i.shape,l);let f="",h="",p="";if(u.length===1&&t.packedInputs){const w=[Math.ceil(l[0]/2),Math.ceil(l[1]/2)];f=`${w[0]>1}_${w[1]>1}`}else if(u.length===2&&!t.packedInputs)h=`${u[0]>1}_${u[1]>1}`;else if(u.length>2&&!t.packedInputs){const w=Ie(u);p=`${w[0]===l[1]}_${w[w.length-1]===l[1]}`}const m=i.shape.length,g=u.length===2&&dt(i.shape,l),y=ne(i.shape)===1,v=pf(i.shape,n.shape),x=!t.packedInputs&&m===n.shape.length&&dt(l,n.texData.texShape),b=t.packedInputs||u.length>2?"":`${l[0]>1}_${l[1]>1}`;r+=`${m}_${x}_${c?d:""}_${u.length}_${y}_${v}_${g}_${f}_${h}_${p}_${b}_${a}`}else{const l=i.isUniform?"uniform":i.texData.texShape;r+=`${i.shape}_${l}_${a}`}});const o=t.userCode;let s=t.constructor.name;return s+="_"+r+"_"+o+`${ee().getNumber("WEBGL_VERSION")}`,s}function Jn(t){return ee().getBool("WEBGL_USE_SHAPES_UNIFORMS")&&t<=4}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class l9e{constructor(e){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outPackingScheme=_m.DENSE,this.customUniforms=[{name:"texShape",type:"ivec2"}];const n=mr();this.outputShape=e,this.enableShapeUniforms=Jn(this.outputShape.length),this.userCode=`
      ivec3 outCoordsFromFlatIndex(int index) {
        ${this.enableShapeUniforms?uS(["r","c","d"],e):gu(["r","c","d"],e)}
        return ivec3(r, c, d);
      }

      void main() {
        ivec2 resTexRC = ivec2(resultUV.yx * vec2(texShape[0], texShape[1]));
        int index = 4 * (resTexRC.x * texShape[1] + resTexRC.y);

        vec4 result = vec4(0.);

        for (int i=0; i<4; i++) {
          int flatIndex = index + i;
          ivec3 rc = outCoordsFromFlatIndex(flatIndex);
          result[i] = getA(rc.x, rc.y, rc.z);
        }

        ${n.output} = result;
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class c9e{constructor(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outPackingScheme=_m.DENSE,this.customUniforms=[{name:"texShape",type:"ivec2"}];const n=mr();this.outputShape=e,this.enableShapeUniforms=Jn(this.outputShape.length),this.userCode=`
      ivec3 outCoordsFromFlatIndex(int index) {
        ${this.enableShapeUniforms?uS(["r","c","d"],e):gu(["r","c","d"],e)}
        return ivec3(r, c, d);
      }

      void main() {
        ivec2 resTexRC = ivec2(resultUV.yx * vec2(texShape[0], texShape[1]));
        int index = 4 * (resTexRC.x * texShape[1] + resTexRC.y);

        vec4 result = vec4(0.);

        for (int i=0; i<4; i++) {
          int flatIndex = index + i;
          ivec3 rc = outCoordsFromFlatIndex(flatIndex);
          result[i] = getChannel(getA(rc.x, rc.y, rc.z), vec2(rc.y, rc.z));
        }

        ${n.output} = result;
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class u9e{constructor(e){this.variableNames=["A"],this.outTexUsage=uo.DOWNLOAD;const n=mr();this.outputShape=e,this.userCode=`
      ${b7}

      void main() {
        float x = getAAtOutCoords();
        ${n.output} = encode_float(x);
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class d9e{constructor(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outTexUsage=uo.DOWNLOAD;const n=mr();this.outputShape=e,this.userCode=`
      ${b7}

      void main() {
        ivec3 coords = getOutputCoords();
        float x = getChannel(getAAtOutCoords(), vec2(coords.y, coords.z));
        ${n.output} = encode_float(x);
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const f9e={R:0,G:1,B:2,A:3};class Yj{constructor(e,n=!1,r="RGBA"){this.variableNames=["A"],this.customUniforms=[{name:"texShape",type:"ivec2"}];const o=mr();this.outputShape=e,this.enableShapeUniforms=Jn(this.outputShape.length);let s="result";n&&(s="floor(result * 255. + 0.5)");let i="";for(let a=0;a<r.length;a++){const l=r[a];i+=`
          if(offset == ${a}) {
            result = values[${f9e[l]}];
          }`}this.userCode=`
      ${this.enableShapeUniforms?CP():SP(e)}

      void main() {
        ivec3 coords = getOutputCoords();
        int flatIndex = getFlatIndex(coords);
        float result = 0.;
        int offset = imod(flatIndex, ${r.length});

        flatIndex = idiv(flatIndex, ${r.length}, 1.);

        int r = flatIndex / texShape[1];
        if (r < texShape[0]) {
          int c = imod(flatIndex, texShape[1]);
          vec2 uv = (vec2(c, r) + halfCR) / vec2(texShape[1], texShape[0]);
          vec4 values = ${o.texture2D}(A, uv);
          ${i}
        }
        ${o.output} = vec4(${s}, 0., 0., 0.);
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class h9e{constructor(e,n=!1){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.customUniforms=[{name:"texShape",type:"ivec2"}];const r=mr();this.outputShape=e,this.enableShapeUniforms=Jn(this.outputShape.length);let o="",s="result";n&&(s="floor(result * 255. + 0.5)");for(let i=0;i<=1;i++)for(let a=0;a<=1;a++){const l=i*2+a;o+=`
          localCoords = coords;
          if(localCoords[2] + ${a} < ${this.enableShapeUniforms?"outShape[2]":`${e[2]}`}) {
          localCoords[2] += ${a};
          if (localCoords[1] + ${i} < ${this.enableShapeUniforms?"outShape[1]":`${e[1]}`}) {
            localCoords[1] += ${i};

            flatIndex = getFlatIndex(localCoords);
            offset = imod(flatIndex, 4);

            flatIndex = idiv(flatIndex, 4, 1.);

            int r = flatIndex / texShape[1];
            int c = imod(flatIndex, texShape[1]);
            vec2 uv = (vec2(c, r) + halfCR) / vec2(texShape[1], texShape[0]);
            values = ${r.texture2D}(A, uv);

            if (offset == 0) {
              result[${l}] = values[0];
            } else if (offset == 1) {
              result[${l}] = values[1];
            } else if (offset == 2) {
              result[${l}] = values[2];
            } else {
              result[${l}] = values[3];
            }
          }
        }
        `}this.userCode=`
        ${this.enableShapeUniforms?CP():SP(e)}

        void main() {
          ivec3 coords = getOutputCoords();

          vec4 result = vec4(0.);
          int flatIndex, r, c, offset;
          ivec3 localCoords;
          vec2 uv;
          vec4 values;

          ${o}

          ${r.output} = ${s};
        }
    `}}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function p9e(t){const e=mr(),n=`${e.version}
    precision highp float;
    ${e.attribute} vec3 clipSpacePos;
    ${e.attribute} vec2 uv;
    ${e.varyingVs} vec2 resultUV;

    void main() {
      gl_Position = vec4(clipSpacePos, 1);
      resultUV = uv;
    }`;return Q8e(t,n)}function m9e(t){const e=new Float32Array([-1,1,0,0,1,-1,-1,0,0,0,1,1,0,1,1,1,-1,0,1,0]);return nXe(t,e)}function g9e(t){const e=new Uint16Array([0,1,2,2,1,3]);return rXe(t,e)}function Ey(t,e,n,r,o,s){sXe(e,n);const i=oXe(t),a=t.TEXTURE_2D;return ve(t,()=>t.bindTexture(a,i)),ve(t,()=>t.texParameteri(a,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE)),ve(t,()=>t.texParameteri(a,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE)),ve(t,()=>t.texParameteri(a,t.TEXTURE_MIN_FILTER,t.NEAREST)),ve(t,()=>t.texParameteri(a,t.TEXTURE_MAG_FILTER,t.NEAREST)),ee().getNumber("WEBGL_VERSION")===1?ve(t,()=>t.texImage2D(a,0,r,e,n,0,o,s,null)):ve(t,()=>t.texStorage2D(a,1,r,e,n)),ve(t,()=>t.bindTexture(t.TEXTURE_2D,null)),{texture:i,texShape:[n,e]}}function k7(t){return t.internalFormatFloat}function y9e(t,e,n,r){const[o,s]=Ty(e,n);return Ey(t,o,s,k7(r),r.textureFormatFloat,t.FLOAT)}function T7(t){return t.internalFormatHalfFloat}function v9e(t,e,n,r){const[o,s]=Ty(e,n);return Ey(t,o,s,T7(r),r.textureFormatFloat,r.textureTypeHalfFloat)}function I7(t){return t.downloadTextureFormat}function x9e(t,e,n,r){const[o,s]=Ty(e,n);return Ey(t,o,s,I7(r),t.RGBA,t.UNSIGNED_BYTE)}function E7(t){return t.internalFormatPackedFloat}function b9e(t,e,n,r){const[o,s]=eh(e,n);return Ey(t,o,s,E7(r),t.RGBA,t.FLOAT)}function N7(t){return t.internalFormatPackedHalfFloat}function w9e(t,e,n,r){const[o,s]=eh(e,n);return Ey(t,o,s,N7(r),t.RGBA,r.textureTypeHalfFloat)}function S9e(t,e,n){return ve(t,()=>t.bindBuffer(t.ARRAY_BUFFER,n)),Hj(t,e,"clipSpacePos",n,3,20,0)&&Hj(t,e,"uv",n,2,20,12)}function C9e(t,e,n,r,o,s){ve(t,()=>t.bindTexture(t.TEXTURE_2D,e));let i,a,l;o instanceof Uint8Array?(i=new Uint8Array(n*r*4),a=t.UNSIGNED_BYTE,l=t.RGBA):(i=new Float32Array(n*r*4),a=t.FLOAT,l=s.internalFormatPackedFloat),i.set(o),ee().getNumber("WEBGL_VERSION")===2?ve(t,()=>t.texSubImage2D(t.TEXTURE_2D,0,0,0,n,r,t.RGBA,a,i)):ve(t,()=>t.texImage2D(t.TEXTURE_2D,0,l,n,r,0,t.RGBA,a,i)),ve(t,()=>t.bindTexture(t.TEXTURE_2D,null))}function $9e(t,e,n){ve(t,()=>t.bindTexture(t.TEXTURE_2D,e)),n.data instanceof Uint8Array?ee().getNumber("WEBGL_VERSION")===2?ve(t,()=>t.texSubImage2D(t.TEXTURE_2D,0,0,0,n.width,n.height,t.RGBA,t.UNSIGNED_BYTE,n.data)):ve(t,()=>t.texImage2D(t.TEXTURE_2D,0,t.RGBA,n.width,n.height,0,t.RGBA,t.UNSIGNED_BYTE,n.data)):ee().getNumber("WEBGL_VERSION")===2?ve(t,()=>t.texSubImage2D(t.TEXTURE_2D,0,0,0,t.RGBA,t.UNSIGNED_BYTE,n)):ve(t,()=>t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,n)),ve(t,()=>t.bindTexture(t.TEXTURE_2D,null))}function k9e(t,e,n,r){const o=t.createBuffer();ve(t,()=>t.bindBuffer(t.PIXEL_PACK_BUFFER,o));const a=4*4*e*n;return ve(t,()=>t.bufferData(t.PIXEL_PACK_BUFFER,a,t.STREAM_READ)),ve(t,()=>t.readPixels(0,0,n,e,t.RGBA,t.FLOAT,0)),ve(t,()=>t.bindBuffer(t.PIXEL_PACK_BUFFER,null)),o}function T9e(t,e,n){const r=t,o=new Float32Array(n);return r.bindBuffer(r.PIXEL_PACK_BUFFER,e),r.getBufferSubData(r.PIXEL_PACK_BUFFER,0,o),r.bindBuffer(r.PIXEL_PACK_BUFFER,null),o}function I9e(t,e,n,r){const[o,s]=Ty(e,n),i=4,a=new Uint8Array(U8e(e*n,i));return ve(t,()=>t.readPixels(0,0,o,s,r.downloadTextureFormat,t.UNSIGNED_BYTE,a)),new Float32Array(a.buffer)}function E9e(t,e,n,r,o,s,i,a){const l=t,c=new Float32Array(G8e(s,i));return l.bindBuffer(l.PIXEL_PACK_BUFFER,e),l.getBufferSubData(l.PIXEL_PACK_BUFFER,0,c),l.bindBuffer(l.PIXEL_PACK_BUFFER,null),c}function N9e(t,e,n){const r=new Float32Array(e*n*4);return ve(t,()=>t.readPixels(0,0,n,e,t.RGBA,t.FLOAT,r)),r}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class JC{constructor(e){this.outputTexture=null,this.program=null,this.disposed=!1,this.itemsToPoll=[];const n=ee().getNumber("WEBGL_VERSION");if(e!=null?(this.gl=e,z8e(n,e)):this.gl=_s(n),e=this.gl,ee().getNumber("WEBGL_VERSION")===2){const s=e;this.createVertexArray=()=>ve(s,()=>s.createVertexArray()),this.bindVertexArray=i=>ve(s,()=>s.bindVertexArray(i)),this.deleteVertexArray=i=>ve(s,()=>s.deleteVertexArray(i)),this.getVertexArray=()=>ve(s,()=>s.getParameter(s.VERTEX_ARRAY_BINDING))}else if(e!=null){const s=e.getExtension("OES_vertex_array_object");if(s==null)throw new Error("All WebGL1 implementations are expected to offer OES_vertex_array_object.");this.createVertexArray=()=>ve(e,()=>s.createVertexArrayOES()),this.bindVertexArray=i=>ve(e,()=>s.bindVertexArrayOES(i)),this.deleteVertexArray=i=>ve(e,()=>s.deleteVertexArrayOES(i)),this.getVertexArray=()=>ve(e,()=>e.getParameter(s.VERTEX_ARRAY_BINDING_OES))}let r="WEBGL_color_buffer_float";const o="EXT_color_buffer_half_float";if(this.parallelCompilationExtension=this.gl.getExtension("KHR_parallel_shader_compile"),ee().getNumber("WEBGL_VERSION")===1){const s="OES_texture_float",i="OES_texture_half_float";if(this.textureFloatExtension=Tv(this.gl,s),zo(this.gl,i))this.textureHalfFloatExtension=Tv(this.gl,i);else if(ee().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support half float textures, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.");if(this.colorBufferFloatExtension=this.gl.getExtension(r),zo(this.gl,o))this.colorBufferHalfFloatExtension=Tv(this.gl,o);else if(ee().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support color renderable half floats, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.")}else if(r="EXT_color_buffer_float",zo(this.gl,r))this.colorBufferFloatExtension=this.gl.getExtension(r);else if(zo(this.gl,o))this.colorBufferHalfFloatExtension=this.gl.getExtension(o);else throw new Error("GL context does not support color renderable floats");this.vertexBuffer=m9e(this.gl),this.indexBuffer=g9e(this.gl),this.framebuffer=iXe(this.gl),this.textureConfig=wP(this.gl,this.textureHalfFloatExtension)}get debug(){return ee().getBool("DEBUG")}dispose(){if(this.disposed)return;this.program!=null&&console.warn("Disposing a GPGPUContext that still has a bound WebGLProgram. This is probably a resource leak, delete the program with GPGPUContext.deleteProgram before disposing."),this.outputTexture!=null&&console.warn("Disposing a GPGPUContext that still has a bound output matrix texture.  This is probably a resource leak, delete the output matrix texture with GPGPUContext.deleteMatrixTexture before disposing.");const e=this.gl;ve(e,()=>e.finish()),ve(e,()=>e.bindFramebuffer(e.FRAMEBUFFER,null)),ve(e,()=>e.deleteFramebuffer(this.framebuffer)),ve(e,()=>e.bindBuffer(e.ARRAY_BUFFER,null)),ve(e,()=>e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,null)),ve(e,()=>e.deleteBuffer(this.indexBuffer)),this.disposed=!0}createFloat32MatrixTexture(e,n){return this.throwIfDisposed(),y9e(this.gl,e,n,this.textureConfig)}createFloat16MatrixTexture(e,n){return this.throwIfDisposed(),v9e(this.gl,e,n,this.textureConfig)}createUnsignedBytesMatrixTexture(e,n){return this.throwIfDisposed(),x9e(this.gl,e,n,this.textureConfig)}uploadPixelDataToTexture(e,n){this.throwIfDisposed(),$9e(this.gl,e,n)}uploadDenseMatrixToTexture(e,n,r,o){this.throwIfDisposed(),C9e(this.gl,e,n,r,o,this.textureConfig)}createFloat16PackedMatrixTexture(e,n){return this.throwIfDisposed(),w9e(this.gl,e,n,this.textureConfig)}createPackedMatrixTexture(e,n){return this.throwIfDisposed(),b9e(this.gl,e,n,this.textureConfig)}deleteMatrixTexture(e){this.throwIfDisposed(),this.outputTexture===e&&(Kj(this.gl,this.framebuffer),this.outputTexture=null),ve(this.gl,()=>this.gl.deleteTexture(e))}downloadByteEncodedFloatMatrixFromOutputTexture(e,n,r){return this.downloadMatrixDriver(e,()=>I9e(this.gl,n,r,this.textureConfig))}downloadPackedMatrixFromBuffer(e,n,r,o,s,i){return E9e(this.gl,e,n,r,o,s,i,this.textureConfig)}downloadFloat32MatrixFromBuffer(e,n){return T9e(this.gl,e,n)}createBufferFromTexture(e,n,r){this.bindTextureToFrameBuffer(e);const o=k9e(this.gl,n,r,this.textureConfig);return this.unbindTextureToFrameBuffer(),o}createAndWaitForFence(){const e=this.createFence(this.gl);return this.pollFence(e)}createFence(e){let n,r;if(ee().getBool("WEBGL_FENCE_API_ENABLED")){const o=e,s=o.fenceSync(o.SYNC_GPU_COMMANDS_COMPLETE,0);e.flush(),r=()=>{const i=o.clientWaitSync(s,0,0);return i===o.ALREADY_SIGNALED||i===o.CONDITION_SATISFIED},n=s}else ee().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0?(n=this.beginQuery(),this.endQuery(),r=()=>this.isQueryAvailable(n,ee().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))):r=()=>!0;return{query:n,isFencePassed:r}}downloadMatrixFromPackedTexture(e,n,r){return this.downloadMatrixDriver(e,()=>N9e(this.gl,n,r))}createProgram(e){this.throwIfDisposed();const n=this.gl;this.vertexShader==null&&(this.vertexShader=p9e(n));const r=eXe(n);ve(n,()=>n.attachShader(r,this.vertexShader)),ve(n,()=>n.attachShader(r,e)),tXe(n,r);const o=Object.assign(r,{vao:this.createVertexArray()});return this.debug&&XC(n,o),o}buildVao(e){this.setProgram(e),this.bindVertexArray(e.vao);const n=this.gl;ve(n,()=>n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,this.indexBuffer)),S9e(n,e,this.vertexBuffer)}deleteProgram(e){this.throwIfDisposed(),e===this.program&&(this.program=null),e!=null&&(ve(this.gl,()=>this.gl.deleteProgram(e)),this.deleteVertexArray(e.vao))}setProgram(e){this.throwIfDisposed(),this.program=e,this.program!=null&&this.debug&&XC(this.gl,this.program),ve(this.gl,()=>this.gl.useProgram(e))}getUniformLocation(e,n,r=!0){return this.throwIfDisposed(),r?lXe(this.gl,e,n):cXe(this.gl,e,n)}getAttributeLocation(e,n){return this.throwIfDisposed(),ve(this.gl,()=>this.gl.getAttribLocation(e,n))}getUniformLocationNoThrow(e,n){return this.throwIfDisposed(),this.gl.getUniformLocation(e,n)}setInputMatrixTexture(e,n,r){this.throwIfDisposed(),this.throwIfNoProgram(),uXe(this.gl,e,n,r)}setOutputMatrixTexture(e,n,r){this.setOutputMatrixTextureDriver(e,r,n)}setOutputPackedMatrixTexture(e,n,r){this.throwIfDisposed();const[o,s]=eh(n,r);this.setOutputMatrixTextureDriver(e,o,s)}setOutputMatrixWriteRegion(e,n,r,o){this.setOutputMatrixWriteRegionDriver(r,e,o,n)}setOutputPackedMatrixWriteRegion(e,n,r,o){throw new Error("setOutputPackedMatrixWriteRegion not implemented.")}debugValidate(){this.program!=null&&XC(this.gl,this.program),Iv(this.gl)}executeProgram(){this.throwIfDisposed(),this.throwIfNoProgram();const e=this.gl;if(this.debug){const n=this.getVertexArray();console.assert(n===this.program.vao,"VAO changed between setProgram and executeProgram!"),this.debugValidate()}ve(e,()=>e.drawElements(e.TRIANGLES,6,e.UNSIGNED_SHORT,0))}blockUntilAllProgramsCompleted(){this.throwIfDisposed(),ve(this.gl,()=>this.gl.finish())}getQueryTimerExtension(){return this.disjointQueryTimerExtension==null&&(this.disjointQueryTimerExtension=Tv(this.gl,ee().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")===2?"EXT_disjoint_timer_query_webgl2":"EXT_disjoint_timer_query")),this.disjointQueryTimerExtension}getQueryTimerExtensionWebGL2(){return this.getQueryTimerExtension()}getQueryTimerExtensionWebGL1(){return this.getQueryTimerExtension()}beginQuery(){if(ee().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")===2){const r=this.gl,o=this.getQueryTimerExtensionWebGL2(),s=r.createQuery();return r.beginQuery(o.TIME_ELAPSED_EXT,s),s}const e=this.getQueryTimerExtensionWebGL1(),n=e.createQueryEXT();return e.beginQueryEXT(e.TIME_ELAPSED_EXT,n),n}endQuery(){if(ee().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")===2){const n=this.gl,r=this.getQueryTimerExtensionWebGL2();n.endQuery(r.TIME_ELAPSED_EXT);return}const e=this.getQueryTimerExtensionWebGL1();e.endQueryEXT(e.TIME_ELAPSED_EXT)}async waitForQueryAndGetTime(e){return await ML(()=>this.disposed||this.isQueryAvailable(e,ee().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))),this.getQueryTime(e,ee().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))}getQueryTime(e,n){if(n===0)return null;if(n===2){const r=this.gl;return r.getQueryParameter(e,r.QUERY_RESULT)/1e6}else{const r=this.getQueryTimerExtensionWebGL1();return r.getQueryObjectEXT(e,r.QUERY_RESULT_EXT)/1e6}}isQueryAvailable(e,n){if(n===0)return!0;if(n===2){const r=this.gl,o=this.getQueryTimerExtensionWebGL2(),s=r.getQueryParameter(e,r.QUERY_RESULT_AVAILABLE);return this.disjoint==null&&(this.disjoint=this.gl.getParameter(o.GPU_DISJOINT_EXT)),s&&!this.disjoint}else{const r=this.getQueryTimerExtensionWebGL1(),o=r.getQueryObjectEXT(e,r.QUERY_RESULT_AVAILABLE_EXT);return this.disjoint==null&&(this.disjoint=this.gl.getParameter(r.GPU_DISJOINT_EXT)),o&&!this.disjoint}}pollFence(e){return new Promise(n=>{this.addItemToPoll(()=>e.isFencePassed(),()=>n())})}pollItems(){const e=A9e(this.itemsToPoll.map(n=>n.isDoneFn));for(let n=0;n<=e;++n){const{resolveFn:r}=this.itemsToPoll[n];r()}this.itemsToPoll=this.itemsToPoll.slice(e+1)}addItemToPoll(e,n){if(this.itemsToPoll.push({isDoneFn:e,resolveFn:n}),this.itemsToPoll.length>1)return;let r;"setTimeoutCustom"in ee().platform&&(r=ee().platform.setTimeoutCustom.bind(ee().platform)),ML(()=>(this.pollItems(),this.itemsToPoll.length===0),()=>0,null,r)}bindTextureToFrameBuffer(e){this.throwIfDisposed(),YC(this.gl,e,this.framebuffer),this.debug&&Iv(this.gl)}unbindTextureToFrameBuffer(){this.outputTexture!=null?(YC(this.gl,this.outputTexture,this.framebuffer),this.debug&&Iv(this.gl)):Kj(this.gl,this.framebuffer)}downloadMatrixDriver(e,n){this.bindTextureToFrameBuffer(e);const r=n();return this.unbindTextureToFrameBuffer(),r}setOutputMatrixTextureDriver(e,n,r){this.throwIfDisposed();const o=this.gl;YC(o,e,this.framebuffer),this.debug&&Iv(o),this.outputTexture=e,ve(o,()=>o.viewport(0,0,n,r)),ve(o,()=>o.scissor(0,0,n,r))}setOutputMatrixWriteRegionDriver(e,n,r,o){this.throwIfDisposed(),ve(this.gl,()=>this.gl.scissor(e,n,r,o))}throwIfDisposed(){if(this.disposed)throw new Error("Attempted to use disposed GPGPUContext.")}throwIfNoProgram(){if(this.program==null)throw new Error("No GPU program is currently set.")}}function A9e(t){let e=0;for(;e<t.length&&t[e]();++e);return e-1}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const{addImpl:O9e,bincountImpl:A7,bincountReduceImpl:P9e,bitwiseAndImpl:R9e,castImpl:_9e,ceilImpl:D9e,concatImpl:M9e,equalImpl:F9e,expImpl:L9e,expm1Impl:j9e,floorImpl:B9e,gatherNdImpl:z9e,gatherV2Impl:W9e,greaterImpl:V9e,greaterEqualImpl:U9e,lessImpl:G9e,lessEqualImpl:H9e,linSpaceImpl:K9e,logImpl:q9e,maxImpl:X9e,maximumImpl:Y9e,minimumImpl:Q9e,multiplyImpl:Z9e,negImpl:J9e,notEqualImpl:eYe,prodImpl:tYe,raggedGatherImpl:nYe,raggedRangeImpl:rYe,raggedTensorToTensorImpl:oYe,rangeImpl:sYe,rsqrtImpl:iYe,scatterImpl:aYe,sigmoidImpl:lYe,simpleAbsImpl:O7,sliceImpl:cYe,sparseFillEmptyRowsImpl:uYe,sparseReshapeImpl:dYe,sparseSegmentReductionImpl:P7,sqrtImpl:fYe,staticRegexReplaceImpl:hYe,stridedSliceImpl:pYe,stringNGramsImpl:mYe,stringSplitImpl:gYe,stringToHashBucketFastImpl:yYe,subImpl:vYe,tileImpl:xYe,topKImpl:bYe,transposeImpl:kP,uniqueImpl:wYe}=$He;/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function R7(t,e){return["x","y","z","w","u","v"].slice(0,e).map(n=>`${t}.${n}`)}function dr(t,e){return e===1?[t]:R7(t,e)}function SYe(t,e){if(t===1)return"rc";let n="";for(let r=0;r<t;r++)n+=e[r],r<t-1&&(n+=",");return n}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class CYe{constructor(e){if(this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outputShape=e,this.rank=e.length,this.enableShapeUniforms=Jn(this.outputShape.length),this.rank===0)this.userCode=`
        void main() {
          setOutput(vec4(getA(), 0., 0., 0.));
        }
      `;else{const n=dr("rc",this.rank),r=vt(this.rank),o=this.getOutOfBoundsCondition(n),s=this.getSetup(n),i=this.getOutput(n);this.userCode=`
        void main() {
          ${r} rc = getOutputCoords();

          if(${o}) {
            setOutput(vec4(0));
          } else {
            ${s}

            setOutput(vec4(${i}));
          }
        }
      `}}getSourceCoordsArr(e){const n=[];for(let r=0;r<=1;r++)for(let o=0;o<=1;o++){let s=`${r===0?"r":"rp1"}, ${o===0?"c":"cp1"}`;for(let i=2;i<this.rank;i++)s=`${e[e.length-1-i]},`+s;n.push(s)}return n}getOutOfBoundsCondition(e){if(this.rank===1)return`rc > ${this.enableShapeUniforms?"outShape":this.outputShape[0]}`;let n="";for(let r=this.rank-2;r<this.rank;r++)n+=`${e[r]} >= ${this.enableShapeUniforms?`outShape[${r}]`:this.outputShape[r]}`,r<this.rank-1&&(n+="||");return n}getSetup(e){if(this.rank===1)return"";const n=e.slice(-2),r=this.enableShapeUniforms?`outShape[${this.rank} - 1]`:this.outputShape[this.rank-1],o=this.enableShapeUniforms?`outShape[${this.rank} - 2]`:this.outputShape[this.rank-2];return`
      int r = ${n[0]};
      int c = ${n[1]};
      int rp1 = r + 1;
      int cp1 = c + 1;

      bool cEdge = cp1 >= ${r};
      bool rEdge = rp1 >= ${o};
    `}getOutput(e){const n=this.getSourceCoordsArr(e);return this.rank===1?`getA(rc), (rc + 1 >= ${this.enableShapeUniforms?"outShape":this.outputShape[0]} ? 0. : getA(rc + 1)), 0, 0`:`getA(${n[0]}),
            cEdge ? 0. : getA(${n[1]}),
            rEdge ? 0. : getA(${n[2]}),
            rEdge || cEdge ? 0. : getA(${n[3]})`}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class _7{constructor(e,n){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"inputShape",type:"ivec3"}],this.outputShape=e,this.enableShapeUniforms=Jn(this.outputShape.length);let r="";for(let o=0;o<4;o++){let s="thisRC = rc;";o%2===1&&(s+="thisRC.z += 1;"),o>1&&(s+="thisRC.y += 1;"),r+=`
        ${s}
        ${o>0?"if(thisRC.y < rows && thisRC.z < cols){":""}
          int flatIndex = getFlatIndex(thisRC);

          ivec3 inputRC = inputCoordsFromReshapedOutCoords(flatIndex);
          vec2 inputRCInnerDims = vec2(float(inputRC.y),float(inputRC.z));

          result[${o}] =
            getChannel(getA(inputRC.x, inputRC.y, inputRC.z), inputRCInnerDims);
        ${o>0?"}":""}
      `}this.userCode=`
      ${$Ye(n,this.enableShapeUniforms)}
      ${this.enableShapeUniforms?CP():SP(e)}

      void main() {
        ivec3 rc = getOutputCoords();

        vec4 result = vec4(0.);

        ivec3 thisRC;
        int rows = ${this.enableShapeUniforms?"outShape[1]":e[1]};
        int cols = ${this.enableShapeUniforms?"outShape[2]":e[2]};

        ${r}

        setOutput(result);
      }
    `}}function $Ye(t,e){return`
    ivec3 inputCoordsFromReshapedOutCoords(int index) {
      ${e?SXe(["r","c","d"],"inputShape"):gu(["r","c","d"],t)}
      return ivec3(r, c, d);
    }
  `}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class kYe{constructor(e){this.gpgpu=e,this.numUsedTextures=0,this.numFreeTextures=0,this._numBytesAllocated=0,this._numBytesFree=0,this.freeTextures={},this.usedTextures={},this.logEnabled=!1}acquireTexture(e,n,r){const o=Zj(n,r),s=Jj(e,o,r);s in this.freeTextures||(this.freeTextures[s]=[]),s in this.usedTextures||(this.usedTextures[s]=[]);const i=Qj(e,o,this.gpgpu.gl,this.gpgpu.textureConfig,r);if(this.freeTextures[s].length>0){this.numFreeTextures--,this.numUsedTextures++,this._numBytesFree-=i,this.log();const l=this.freeTextures[s].pop();return this.usedTextures[s].push(l),l}let a;return o===_n.PACKED_2X2_FLOAT32?a=this.gpgpu.createPackedMatrixTexture(e[0],e[1]):o===_n.PACKED_2X2_FLOAT16?a=this.gpgpu.createFloat16PackedMatrixTexture(e[0],e[1]):o===_n.UNPACKED_FLOAT32?a=this.gpgpu.createFloat32MatrixTexture(e[0],e[1]):o===_n.UNPACKED_FLOAT16?a=this.gpgpu.createFloat16MatrixTexture(e[0],e[1]):o===_n.PACKED_4X1_UNSIGNED_BYTE&&(a=this.gpgpu.createUnsignedBytesMatrixTexture(e[0],e[1])),this.usedTextures[s].push(a),this.numUsedTextures++,this._numBytesAllocated+=i,this.log(),a}releaseTexture(e,n,r,o){if(this.freeTextures==null)return;const s=Zj(r,o),i=Jj(n,s,o);i in this.freeTextures||(this.freeTextures[i]=[]);const a=Qj(n,s,this.gpgpu.gl,this.gpgpu.textureConfig,o),l=ee().getNumber("WEBGL_DELETE_TEXTURE_THRESHOLD");l!==-1&&this._numBytesAllocated>l?(this.gpgpu.deleteMatrixTexture(e.texture),this._numBytesAllocated-=a):(this.freeTextures[i].push(e),this.numFreeTextures++,this._numBytesFree+=a),this.numUsedTextures--;const c=this.usedTextures[i],u=c&&c.indexOf(e);if(u==null||u<0)throw new Error("Cannot release a texture that was never provided by this texture manager");c[u]=c[c.length-1],c.pop(),this.log()}log(){if(!this.logEnabled)return;const e=this.numFreeTextures+this.numUsedTextures;console.log("Free/Used",`${this.numFreeTextures} / ${this.numUsedTextures}`,`(${e})`);const n=this._numBytesFree/this._numBytesAllocated;console.log(`Bytes allocated: ${this._numBytesAllocated}`),console.log(`Bytes unused: ${this._numBytesFree} (${Math.round(100*n)}%)`)}get numBytesAllocated(){return this._numBytesAllocated}get numBytesFree(){return this._numBytesFree}getNumUsedTextures(){return this.numUsedTextures}getNumFreeTextures(){return this.numFreeTextures}dispose(){if(this.freeTextures!=null){for(const e in this.freeTextures)this.freeTextures[e].forEach(n=>{this.gpgpu.deleteMatrixTexture(n.texture)});for(const e in this.usedTextures)this.usedTextures[e].forEach(n=>{this.gpgpu.deleteMatrixTexture(n.texture)});this.freeTextures=null,this.usedTextures=null,this.numUsedTextures=0,this.numFreeTextures=0,this._numBytesAllocated=0,this._numBytesFree=0}}}function TYe(t,e){const n=t;if(e===n.R32F)return 4;if(e===n.R16F)return 2;if(e===n.RGBA32F)return 16;if(e===t.RGBA)return 16;if(e===n.RGBA16F)return 8;if(e===n.RGBA8)return 4;throw new Error(`Unknown internal format ${e}`)}function Qj(t,e,n,r,o){const s=IYe(e,r);let i;if(o){const[l,c]=eh(t[0],t[1]);i=l*c}else{const[l,c]=Ty(t[0],t[1]);i=l*c}const a=TYe(n,s);return i*a}function IYe(t,e){switch(t){case _n.PACKED_2X2_FLOAT32:return E7(e);case _n.PACKED_2X2_FLOAT16:return N7(e);case _n.UNPACKED_FLOAT32:return k7(e);case _n.UNPACKED_FLOAT16:return T7(e);case _n.PACKED_4X1_UNSIGNED_BYTE:return I7(e);default:throw new Error(`Unknown physical texture type ${t}`)}}function EYe(t){return ee().getBool("WEBGL_RENDER_FLOAT32_ENABLED")?t?_n.PACKED_2X2_FLOAT32:_n.UNPACKED_FLOAT32:t?_n.PACKED_2X2_FLOAT16:_n.UNPACKED_FLOAT16}function Zj(t,e){if(t===uo.UPLOAD)return _n.PACKED_2X2_FLOAT32;if(t===uo.RENDER||t==null)return EYe(e);if(t===uo.DOWNLOAD||t===uo.PIXELS)return _n.PACKED_4X1_UNSIGNED_BYTE;throw new Error(`Unknown logical texture type ${t}`)}function Jj(t,e,n){return`${t[0]}_${t[1]}_${e}_${n}`}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class ti{constructor(e,n){this.variableNames=["A"],this.outputShape=e,this.enableShapeUniforms=Jn(this.outputShape.length),this.userCode=`
      float unaryOperation(float x) {
        ${n}
      }

      void main() {
        float x = getAAtOutCoords();
        float y = unaryOperation(x);

        setOutput(y);
      }
    `}}const ts="if (isnan(x)) return x;",NYe="return x;",e3="return abs(x);",AYe="return (x >= 0.0) ? x : (exp(x) - 1.0);",OYe=ts+`
  return (x < 0.0) ? 0.0 : x;
`,PYe=ts+`
  return (x < 0.0) ? 0.0 : min(6.0, x);
`,Ta="return x;",RYe="return 1.0 / (1.0 + exp(-1.0 * x));";/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const _Ye="return x;",DYe=`
  vec4 result;

  result.r = (x.r >= 0.0) ? x.r : (exp(x.r) - 1.0);
  result.g = (x.g >= 0.0) ? x.g : (exp(x.g) - 1.0);
  result.b = (x.b >= 0.0) ? x.b : (exp(x.b) - 1.0);
  result.a = (x.a >= 0.0) ? x.a : (exp(x.a) - 1.0);

  return result;
`,MYe=`
  vec4 result = x * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,FYe=`
  vec4 result = min(x, vec4(6.)) * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,LYe="return 1.0 / (1.0 + exp(-1.0 * x));";class Ua{constructor(e,n){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e,this.enableShapeUniforms=Jn(this.outputShape.length),this.userCode=`
      vec4 unaryOperation(vec4 x) {
        ${n}
      }

      void main() {
        vec4 x = getAAtOutCoords();
        vec4 y = unaryOperation(x);

        setOutput(y);
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class jYe{constructor(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outputShape=e,this.enableShapeUniforms=Jn(this.outputShape.length);const n=e.length,r=dr("rc",n),o=vt(n),s=SYe(n,r),i=r.slice(-2),a=n<=1?"rc":`vec2(${i.join(",")})`;this.userCode=`
      void main() {
        ${o} rc = getOutputCoords();
        vec4 packedInput = getA(${s});

        setOutput(getChannel(packedInput, ${a}));
      }
    `}}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const BYe=o8,zYe=1e-7,WYe=1e-4,Av={};function VYe(t){return t in Av||(Av[t]={}),Av[t]}const UYe=ee().getNumber("CPU_HANDOFF_SIZE_THRESHOLD"),GYe=600;function HYe(){return ee().global.screen==null?1024:ee().global.screen.height*ee().global.screen.width*window.devicePixelRatio*GYe/1024/1024}class dS extends z2{nextDataId(){return dS.nextDataId++}constructor(e){if(super(),this.pendingRead=new WeakMap,this.pendingDisposal=new WeakSet,this.dataRefCount=new WeakMap,this.numBytesInGPU=0,this.uploadWaitMs=0,this.downloadWaitMs=0,this.lastGlFlushTime=0,this.warnedAboutMemory=!1,this.pendingDeletes=0,this.disposed=!1,!ee().getBool("HAS_WEBGL"))throw new Error("WebGL is not supported on this device");let n;if(e!=null){if(e instanceof JC)n=e;else{const r=_s(ee().getNumber("WEBGL_VERSION"),e);n=new JC(r)}this.binaryCache={},this.gpgpuCreatedLocally=!1}else{const r=_s(ee().getNumber("WEBGL_VERSION"));n=new JC(r),this.binaryCache=VYe(ee().getNumber("WEBGL_VERSION")),this.gpgpuCreatedLocally=!0}this.gpgpu=n,this.canvas=this.gpgpu.gl.canvas,this.textureManager=new kYe(this.gpgpu),this.numMBBeforeWarning=HYe(),this.texData=new CK(this,Ws())}numDataIds(){return this.texData.numDataIds()-this.pendingDeletes}writeTexture(e,n,r,o,s,i){const a=this.makeTensorInfo(n,r),l=this.texData.get(a.dataId);l.isPacked=!1,l.texture={texture:e,texShape:[o,s]},l.texShape=[o,s];const c=Ev(n),u=new Yj(c,!1,i),d=this.runWebGLProgram(u,[a],r,[[o,s]]);return d.shape=n,l.texture=null,this.disposeIntermediateTensorInfo(a),d.dataId}write(e,n,r){if((ee().getBool("WEBGL_CHECK_NUMERICAL_PROBLEMS")||ee().getBool("DEBUG"))&&this.checkNumericalProblems(e),r==="complex64"&&e!=null)throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");const o={id:this.nextDataId()};return this.texData.set(o,{shape:n,dtype:r,values:e,usage:uo.UPLOAD,refCount:1}),o}refCount(e){return this.texData.has(e)?this.texData.get(e).refCount:0}incRef(e){const n=this.texData.get(e);n.refCount++}decRef(e){if(this.texData.has(e)){const n=this.texData.get(e);n.refCount--}}move(e,n,r,o,s){if(ee().getBool("DEBUG")&&this.checkNumericalProblems(n),o==="complex64")throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");this.texData.set(e,{shape:r,dtype:o,values:n,usage:uo.UPLOAD,refCount:s})}disposeIntermediateTensorInfo(e){this.disposeData(e.dataId)}readSync(e){const n=this.texData.get(e),{values:r,dtype:o,complexTensorInfos:s,slice:i,shape:a,isPacked:l}=n;if(i!=null){let f;l?f=new Ua(a,Ta):f=new ti(a,Ta);const h=this.runWebGLProgram(f,[{dataId:e,shape:a,dtype:o}],o),p=this.readSync(h.dataId);return this.disposeIntermediateTensorInfo(h),p}if(r!=null)return this.convertAndCacheOnCPU(e);if(o==="string")return r;const c=this.activeTimers!=null;let u;c&&(u=Sr());let d;if(o==="complex64"){const f=this.readSync(s.real.dataId),h=this.readSync(s.imag.dataId);d=ra(f,h)}else d=this.getValuesFromTexture(e);return c&&(this.downloadWaitMs+=Sr()-u),this.convertAndCacheOnCPU(e,d)}async read(e){if(this.pendingRead.has(e)){const p=this.pendingRead.get(e);return new Promise(m=>p.push(m))}const n=this.texData.get(e),{values:r,shape:o,slice:s,dtype:i,complexTensorInfos:a,isPacked:l}=n;if(s!=null){let p;l?p=new Ua(o,Ta):p=new ti(o,Ta);const m=this.runWebGLProgram(p,[{dataId:e,shape:o,dtype:i}],i),g=this.read(m.dataId);return this.disposeIntermediateTensorInfo(m),g}if(r!=null)return this.convertAndCacheOnCPU(e);if(ee().getBool("DEBUG")&&!ee().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")&&ee().getNumber("WEBGL_VERSION")===2)throw new Error("tensor.data() with WEBGL_DOWNLOAD_FLOAT_ENABLED=false and WEBGL_VERSION=2 not yet supported.");let c=null,u;if(i!=="complex64"&&ee().get("WEBGL_BUFFER_SUPPORTED")){u=this.decode(e);const p=this.texData.get(u.dataId);c=this.gpgpu.createBufferFromTexture(p.texture.texture,...kv(o))}this.pendingRead.set(e,[]),i!=="complex64"&&await this.gpgpu.createAndWaitForFence();let d;if(i==="complex64"){const p=await Promise.all([this.read(a.real.dataId),this.read(a.imag.dataId)]),m=p[0],g=p[1];d=ra(m,g)}else if(c==null)d=this.getValuesFromTexture(e);else{const p=ne(o);d=this.gpgpu.downloadFloat32MatrixFromBuffer(c,p)}if(u!=null&&this.disposeIntermediateTensorInfo(u),c!=null){const p=this.gpgpu.gl;ve(p,()=>p.deleteBuffer(c))}const f=this.convertAndCacheOnCPU(e,d),h=this.pendingRead.get(e);return this.pendingRead.delete(e),h.forEach(p=>p(f)),this.pendingDisposal.has(e)&&(this.pendingDisposal.delete(e),this.disposeData(e)&&Ws().removeDataId(e,this),this.pendingDeletes--),f}readToGPU(e,n={}){const r=this.texData.get(e),{values:o,shape:s,slice:i,dtype:a,isPacked:l,texture:c}=r;if(a==="complex64")throw new Error("Does not support reading texture for complex64 dtype.");if(i!=null){let h;l?h=new Ua(s,Ta):h=new ti(s,Ta);const p=this.runWebGLProgram(h,[{dataId:e,shape:s,dtype:a}],a),m=this.readToGPU(p,n);return this.disposeIntermediateTensorInfo(p),m}if(c==null)throw o!=null?new Error("Data is not on GPU but on CPU."):new Error("There is no data on GPU or CPU.");const u=this.decode(e,n.customTexShape),d=Ws().makeTensorFromTensorInfo(u),f=this.texData.get(u.dataId);return Object.assign({tensorRef:d},f.texture)}bufferSync(e){const n=this.readSync(e.dataId);if(e.dtype==="string")try{const r=n.map(o=>fl(o));return Ge(e.shape,e.dtype,r)}catch{throw new Error("Failed to decode encoded string bytes into utf-8")}return Ge(e.shape,e.dtype,n)}checkNumericalProblems(e){if(e!=null)for(let n=0;n<e.length;n++){const r=e[n];if(!X8e(r))throw ee().getBool("WEBGL_RENDER_FLOAT32_CAPABLE")?Error(`The value ${r} cannot be represented with your current settings. Consider enabling float32 rendering: 'tf.env().set('WEBGL_RENDER_FLOAT32_ENABLED', true);'`):Error(`The value ${r} cannot be represented on this device.`)}}getValuesFromTexture(e){const{shape:n,dtype:r,isPacked:o}=this.texData.get(e),s=ne(n);if(ee().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")){const f=this.decode(e),h=this.texData.get(f.dataId),p=this.gpgpu.downloadMatrixFromPackedTexture(h.texture.texture,...kv(n)).subarray(0,s);return this.disposeIntermediateTensorInfo(f),p}const i=ee().getBool("WEBGL_PACK")&&o===!0,a=i?Ev(n):n,l=i?new d9e(a):new u9e(a),c=this.runWebGLProgram(l,[{shape:a,dtype:r,dataId:e}],"float32"),u=this.texData.get(c.dataId),d=this.gpgpu.downloadByteEncodedFloatMatrixFromOutputTexture(u.texture.texture,u.texShape[0],u.texShape[1]).subarray(0,s);return this.disposeIntermediateTensorInfo(c),d}timerAvailable(){return ee().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0}time(e){const n=this.activeTimers,r=[];let o=!1;this.programTimersStack==null?(this.programTimersStack=r,o=!0):this.activeTimers.push(r),this.activeTimers=r,e();const s=Bc(this.activeTimers.map(l=>l.query)).filter(l=>l!=null),i=Bc(this.activeTimers.map(l=>l.name)).filter(l=>l!=null);this.activeTimers=n,o&&(this.programTimersStack=null);const a={uploadWaitMs:this.uploadWaitMs,downloadWaitMs:this.downloadWaitMs,kernelMs:null,wallMs:null};return(async()=>{if(ee().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0){const l=await Promise.all(s);a.kernelMs=PMe(l),a.getExtraProfileInfo=()=>l.map((c,u)=>({name:i[u],ms:c})).map(c=>`${c.name}: ${c.ms}`).join(", ")}else a.kernelMs={error:"WebGL query timers are not supported in this environment."};return this.uploadWaitMs=0,this.downloadWaitMs=0,a})()}memory(){return{unreliable:!1,numBytesInGPU:this.numBytesInGPU,numBytesInGPUAllocated:this.textureManager.numBytesAllocated,numBytesInGPUFree:this.textureManager.numBytesFree}}startTimer(){return ee().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?this.gpgpu.beginQuery():{startMs:Sr(),endMs:null}}endTimer(e){return ee().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?(this.gpgpu.endQuery(),e):(e.endMs=Sr(),e)}async getQueryTime(e){if(ee().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0)return this.gpgpu.waitForQueryAndGetTime(e);const n=e;return n.endMs-n.startMs}disposeData(e,n=!1){if(this.pendingDisposal.has(e))return!1;if(!this.texData.has(e))return!0;if(n?this.texData.get(e).refCount=0:this.texData.get(e).refCount--,!n&&this.texData.get(e).refCount>0)return!1;if(this.pendingRead.has(e))return this.pendingDisposal.add(e),this.pendingDeletes++,!1;this.releaseGPUData(e);const{complexTensorInfos:r}=this.texData.get(e);return r!=null&&(this.disposeData(r.real.dataId,n),this.disposeData(r.imag.dataId,n)),this.texData.delete(e),!0}releaseGPUData(e){const{texture:n,dtype:r,texShape:o,usage:s,isPacked:i,slice:a}=this.texData.get(e),l=a&&a.origDataId||e,c=this.dataRefCount.get(l);c>1?this.dataRefCount.set(l,c-1):(this.dataRefCount.delete(l),n!=null&&(this.numBytesInGPU-=this.computeBytes(o,r),this.textureManager.releaseTexture(n,o,s,i)));const u=this.texData.get(e);u.texture=null,u.texShape=null,u.isPacked=!1,u.slice=null}getTexture(e){return this.uploadToGPU(e),this.texData.get(e).texture.texture}getDataInfo(e){return this.texData.get(e)}shouldExecuteOnCPU(e,n=UYe){return ee().getBool("WEBGL_CPU_FORWARD")&&e.every(r=>this.texData.get(r.dataId).texture==null&&ne(r.shape)<n)}getGPGPUContext(){return this.gpgpu}where(e){lo("tf.where() in webgl locks the UI thread. Call tf.whereAsync() instead");const n=e.dataSync();return BYe(e.shape,n)}packedUnaryOp(e,n,r){const o=new Ua(e.shape,n),s=this.compileAndRun(o,[e],r);return Ws().makeTensorFromTensorInfo(s)}abs(e){if(this.shouldExecuteOnCPU([e])&&e.dtype!=="complex64"){const o=O7(this.texData.get(e.dataId).values);return this.makeOutput(e.shape,e.dtype,o)}if(ee().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(e,e3,e.dtype);const n=new ti(e.shape,e3),r=this.compileAndRun(n,[e]);return Ws().makeTensorFromTensorInfo(r)}makeTensorInfo(e,n,r){let o;if(n==="string"&&r!=null&&r.length>0&&hg(r[0])){const s=r.map(i=>rl(i));o=this.write(s,e,n)}else o=this.write(r,e,n);return this.texData.get(o).usage=null,{dataId:o,shape:e,dtype:n}}makeOutput(e,n,r){return Ws().makeTensorFromTensorInfo(this.makeTensorInfo(e,n,r),this)}unpackTensor(e){const n=new jYe(e.shape);return this.runWebGLProgram(n,[e],e.dtype)}packTensor(e){const n=new CYe(e.shape);return this.runWebGLProgram(n,[e],e.dtype,null,!0)}packedReshape(e,n){const r=[bf(e.shape),...wf(e.shape)],o={dtype:e.dtype,shape:r,dataId:e.dataId},s=[bf(n),...wf(n)],i=new _7(s,r),a=!0,l=[r],c=this.runWebGLProgram(i,[o],e.dtype,l,a);return{dataId:c.dataId,shape:n,dtype:c.dtype}}decode(e,n){const r=this.texData.get(e),{isPacked:o,shape:s,dtype:i}=r;if(n!=null){const f=ne(s),h=n[0]*n[1]*4;M(f<=h,()=>"customTexShape is too small. Row * Column * 4 should be equal or larger than the size of the tensor data.")}const a=Ev(s);let l;o?l=new c9e(a):l=new l9e(a);const c=!0,u=[n??kv(a)],d=this.runWebGLProgram(l,[{shape:a,dtype:i,dataId:e}],i,u,c,n);return{dtype:i,shape:s,dataId:d.dataId}}runWebGLProgram(e,n,r,o,s=!1,i){const a=this.makeTensorInfo(e.outputShape,r),l=this.texData.get(a.dataId);if(e.packedOutput&&(l.isPacked=!0),e.outPackingScheme===_m.DENSE){const y=i??kv(e.outputShape);l.texShape=y.map(v=>v*2)}if(e.outTexUsage!=null&&(l.usage=e.outTexUsage),ne(a.shape)===0)return l.values=qn(a.dtype,0),a;const c=[],u=n.map(y=>{if(y.dtype==="complex64")throw new Error("GPGPUProgram does not support complex64 input. For complex64 dtypes, please separate the program into real and imaginary parts.");let v=this.texData.get(y.dataId);if(v.texture==null){if(!e.packedInputs&&ne(y.shape)<=ee().getNumber("WEBGL_SIZE_UPLOAD_UNIFORM"))return{shape:y.shape,texData:null,isUniform:!0,uniformValues:v.values};e.packedInputs&&(v.isPacked=!0,v.shape=y.shape)}if(this.uploadToGPU(y.dataId),!!v.isPacked!=!!e.packedInputs)y=v.isPacked?this.unpackTensor(y):this.packTensor(y),c.push(y),v=this.texData.get(y.dataId);else if(v.isPacked&&!a0(v.shape,y.shape)){const x=y,b=y.shape;y.shape=v.shape,y=this.packedReshape(y,b),c.push(y),v=this.texData.get(y.dataId),x.shape=b}return{shape:y.shape,texData:v,isUniform:!1}});this.uploadToGPU(a.dataId);const d={shape:a.shape,texData:l,isUniform:!1},f=a9e(e,u,d),h=this.getAndSaveBinary(f,()=>s9e(this.gpgpu,e,u,d)),p=this.activeTimers!=null;let m;p&&(m=this.startTimer()),ee().get("ENGINE_COMPILE_ONLY")||i9e(this.gpgpu,h,u,d,o),c.forEach(y=>this.disposeIntermediateTensorInfo(y)),p&&(m=this.endTimer(m),this.activeTimers.push({name:e.constructor.name,query:this.getQueryTime(m)}));const g=ee().getNumber("WEBGL_FLUSH_THRESHOLD");if(g>0){const y=Sr();y-this.lastGlFlushTime>g&&(this.gpgpu.gl.flush(),this.lastGlFlushTime=y)}if(!ee().getBool("WEBGL_LAZILY_UNPACK")&&l.isPacked&&s===!1){const y=this.unpackTensor(a);return this.disposeIntermediateTensorInfo(a),y}return a}compileAndRun(e,n,r,o,s=!1){return r=r||n[0].dtype,this.runWebGLProgram(e,n,r,o,s)}getAndSaveBinary(e,n){return e in this.binaryCache||(this.binaryCache[e]=n()),this.binaryCache[e]}getTextureManager(){return this.textureManager}dispose(){this.disposed||(ee().getBool("IS_TEST")||Object.keys(this.binaryCache).forEach(n=>{this.gpgpu.deleteProgram(this.binaryCache[n].webGLProgram),delete this.binaryCache[n]}),this.textureManager.dispose(),this.canvas!=null&&typeof HTMLCanvasElement<"u"&&this.canvas instanceof HTMLCanvasElement?this.canvas.remove():this.canvas=null,this.gpgpuCreatedLocally&&(this.gpgpu.program=null,this.gpgpu.dispose()),this.disposed=!0)}floatPrecision(){return this.floatPrecisionValue==null&&(this.floatPrecisionValue=Y(()=>{if(!ee().get("WEBGL_RENDER_FLOAT32_ENABLED")){const e=ee().getBool("DEBUG");ee().set("DEBUG",!1);const n=this.abs(ct(1e-8)).dataSync()[0];if(ee().set("DEBUG",e),n>0)return 32}return 16})),this.floatPrecisionValue}epsilon(){return this.floatPrecision()===32?zYe:WYe}uploadToGPU(e){const n=this.texData.get(e),{shape:r,dtype:o,values:s,texture:i,usage:a,isPacked:l}=n;if(i!=null)return;const c=this.activeTimers!=null;let u;c&&(u=Sr());let d=n.texShape;if(d==null&&(d=hXe(r,l),n.texShape=d),s!=null){const f=Ev(r);let h,p=d[1],m=d[0];const g=s instanceof Uint8Array||s instanceof Uint8ClampedArray;(l||!g)&&([p,m]=eh(d[0],d[1])),l?h=new h9e(f,g):h=new Yj(f,g);const y=g?[m,p]:d,v=this.makeTensorInfo(y,o),x=this.texData.get(v.dataId);g?x.usage=uo.PIXELS:x.usage=uo.UPLOAD,x.texShape=y,this.gpgpu.uploadDenseMatrixToTexture(this.getTexture(v.dataId),p,m,s);const b=[[m,p]],C=this.runWebGLProgram(h,[v],o,b,!0),$=this.texData.get(C.dataId);n.texShape=$.texShape,n.isPacked=$.isPacked,n.usage=$.usage,ee().get("ENGINE_COMPILE_ONLY")?this.disposeData(C.dataId):(n.texture=$.texture,n.values=null,this.texData.delete(C.dataId)),this.disposeIntermediateTensorInfo(v),c&&(this.uploadWaitMs+=Sr()-u)}else{const f=this.acquireTexture(d,a,o,l);n.texture=f}}convertAndCacheOnCPU(e,n){const r=this.texData.get(e),{dtype:o}=r;return n!=null&&(r.values=KYe(n,o)),r.values}acquireTexture(e,n,r,o){if(this.numBytesInGPU+=this.computeBytes(e,r),!this.warnedAboutMemory&&this.numBytesInGPU>this.numMBBeforeWarning*1024*1024){const s=(this.numBytesInGPU/1024/1024).toFixed(2);this.warnedAboutMemory=!0,console.warn(`High memory usage in GPU: ${s} MB, most likely due to a memory leak`)}return this.textureManager.acquireTexture(e,n,o)}computeBytes(e,n){return e[0]*e[1]*Mb(n)}checkCompileCompletion(){for(const[,e]of Object.entries(this.binaryCache))this.checkCompletion_(e)}async checkCompileCompletionAsync(){const e=[];if(this.gpgpu.parallelCompilationExtension){for(const[,n]of Object.entries(this.binaryCache))e.push(this.checkCompletionAsync_(n));return Promise.all(e)}else{for(const[,n]of Object.entries(this.binaryCache)){const r=new Promise(o=>{try{this.checkCompletion_(n),o(!0)}catch(s){throw s}});e.push(r)}return Promise.all(e)}}async checkCompletionAsync_(e){return this.gpgpu.gl.getProgramParameter(e.webGLProgram,this.gpgpu.parallelCompilationExtension.COMPLETION_STATUS_KHR)?this.checkCompletion_(e):(await w8(),this.checkCompletionAsync_(e))}checkCompletion_(e){if(this.gpgpu.gl.getProgramParameter(e.webGLProgram,this.gpgpu.gl.LINK_STATUS)===!1)throw console.log(this.gpgpu.gl.getProgramInfoLog(e.webGLProgram)),this.gpgpu.gl.getShaderParameter(e.fragmentShader,this.gpgpu.gl.COMPILE_STATUS)===!1?(x7(e.source,this.gpgpu.gl.getShaderInfoLog(e.fragmentShader)),new Error("Failed to compile fragment shader.")):new Error("Failed to link vertex and fragment shaders.");return!0}getUniformLocations(){for(const e of Object.values(this.binaryCache)){this.gpgpu.buildVao(e.webGLProgram);const{variablesLocations:n,customUniformLocations:r,infLoc:o,nanLoc:s,outShapeLocation:i,outShapeStridesLocation:a,outTexShapeLocation:l}=$7(this.gpgpu,e.program,e.webGLProgram);e.variablesLocations=n,e.customUniformLocations=r,e.infLoc=o,e.nanLoc=s,e.outShapeLocation=i,e.outShapeStridesLocation=a,e.outTexShapeLocation=l}}createTensorFromGPUData(e,n,r){e.channels=e.channels||"RGBA";const{texture:o,height:s,width:i,channels:a}=e,l=Ws().backend;if(!l.gpgpu.gl.isTexture(o))throw new Error("The texture is invalid. Also, please make sure the texture and the TFJS WebGL backend are using the same canvas. If you want to use your own custom canvas, you have to create and use the custom TFJS WebGL backend created from the canvas through 'new tf.MathBackendWebGL(customCanvas)'.");const c=l.writeTexture(o,n,r,s,i,a);return Ws().makeTensorFromDataId(c,n,r,l)}}dS.nextDataId=0;function KYe(t,e){if(e==="float32"||e==="complex64")return t;if(e==="int32"||e==="bool"){const n=e==="int32"?new Int32Array(t.length):new Uint8Array(t.length);for(let r=0;r<n.length;++r)n[r]=Math.round(t[r]);return n}else throw new Error(`Unknown dtype ${e}`)}/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */gq()&&bq("webgl",()=>new dS,2);/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const TP=`
  if (isnan(a)) return a;
  if (isnan(b)) return b;
`;class Zc{constructor(e,n,r){this.variableNames=["A","B"],this.outputShape=Be(n,r),this.enableShapeUniforms=Jn(this.outputShape.length),this.userCode=`
      float binaryOperation(float a, float b) {
        ${e}
      }

      void main() {
        float a = getAAtOutCoords();
        float b = getBAtOutCoords();
        setOutput(binaryOperation(a, b));
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const vu=`
  result.r = isNaN.r ? NAN : result.r;
  result.g = isNaN.g ? NAN : result.g;
  result.b = isNaN.b ? NAN : result.b;
  result.a = isNaN.a ? NAN : result.a;
`;class sh{constructor(e,n,r,o=!1){this.variableNames=["A","B"],this.supportsBroadcasting=!0,this.packedInputs=!0,this.packedOutput=!0,this.outputShape=Be(n,r);const s=this.outputShape.length;this.enableShapeUniforms=Jn(s);let i="";if(o)if(s===0||ne(this.outputShape)===1)i=`
          result.y = 0.;
          result.z = 0.;
          result.w = 0.;
        `;else if(i=`
          ${vt(s)} coords = getOutputCoords();
        `,s===1)this.enableShapeUniforms?i+=`
            result.y = (coords + 1) >= outShape ? 0. : result.y;
            result.z = 0.;
            result.w = 0.;
          `:i+=`
            result.y = (coords + 1) >= ${this.outputShape[0]} ? 0. : result.y;
            result.z = 0.;
            result.w = 0.;
          `;else{const l=dr("coords",s);this.enableShapeUniforms?i+=`
            bool nextRowOutOfBounds =
              (${l[s-2]} + 1) >= outShape[${s} - 2];
            bool nextColOutOfBounds =
              (${l[s-1]} + 1) >= outShape[${s} - 1];
            result.y = nextColOutOfBounds ? 0. : result.y;
            result.z = nextRowOutOfBounds ? 0. : result.z;
            result.w = nextColOutOfBounds || nextRowOutOfBounds ? 0. : result.w;
          `:i+=`
            bool nextRowOutOfBounds =
              (${l[s-2]} + 1) >= ${this.outputShape[s-2]};
            bool nextColOutOfBounds =
              (${l[s-1]} + 1) >= ${this.outputShape[s-1]};
            result.y = nextColOutOfBounds ? 0. : result.y;
            result.z = nextRowOutOfBounds ? 0. : result.z;
            result.w = nextColOutOfBounds || nextRowOutOfBounds ? 0. : result.w;
          `}this.userCode=`
      vec4 binaryOperation(vec4 a, vec4 b) {
        ${e}
      }

      void main() {
        vec4 a = getAAtOutCoords();
        vec4 b = getBAtOutCoords();

        vec4 result = binaryOperation(a, b);
        ${i}

        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Zr(t){const{inputs:e,backend:n}=t,{x:r}=e;return n.incRef(r.dataId),{dataId:r.dataId,shape:r.shape,dtype:r.dtype}}const qYe={kernelName:_g,backendName:"webgl",kernelFunc:Zr};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Fl(t){const{inputs:e,backend:n}=t,{real:r,imag:o}=e,s=n.makeTensorInfo(r.shape,"complex64"),i=n.texData.get(s.dataId),a=Zr({inputs:{x:r},backend:n}),l=Zr({inputs:{x:o},backend:n});return i.complexTensorInfos={real:a,imag:l},s}const XYe={kernelName:eA,backendName:"webgl",kernelFunc:Fl};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const D7="return (a < 0.) ? b * a : a;",M7=`
  vec4 aLessThanZero = vec4(lessThan(a, vec4(0.)));
  return (aLessThanZero * (b * a)) + ((vec4(1.0) - aLessThanZero) * a);
`;function YYe(t){const{inputs:e,backend:n,attrs:r}=t,{x:o}=e,{alpha:s}=r,i=n.makeTensorInfo([],"float32",Nl(s,"float32")),a=ee().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new sh(M7,o.shape,i.shape):new Zc(D7,o.shape,i.shape),l=n.runWebGLProgram(a,[o,i],"float32");return n.disposeIntermediateTensorInfo(i),l}const QYe={kernelName:s1,backendName:"webgl",kernelFunc:YYe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const F7="return (a < 0.) ? b * a : a;",L7=`
  vec4 aLessThanZero = vec4(lessThan(a, vec4(0.)));
  return (aLessThanZero * (b * a)) + ((vec4(1.0) - aLessThanZero) * a);
`;function ZYe(t){const{inputs:e,backend:n}=t,{x:r,alpha:o}=e,s=ee().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new sh(L7,r.shape,o.shape):new Zc(F7,r.shape,o.shape);return n.runWebGLProgram(s,[r,o],"float32")}const JYe={kernelName:$1,backendName:"webgl",kernelFunc:ZYe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ih="if (isnan(x)) return x;";function ot({opSnippet:t,packedOpSnippet:e,cpuKernelImpl:n,dtype:r}){return({inputs:o,backend:s})=>{const{x:i}=o,a=s,l=r||i.dtype;if(a.shouldExecuteOnCPU([i])&&n!=null){const d=a.texData.get(i.dataId),f=n(d.values,l);return a.makeTensorInfo(i.shape,l,f)}const c=ee().getBool("WEBGL_PACK_UNARY_OPERATIONS")&&e!=null;let u;return c?u=new Ua(i.shape,e):u=new ti(i.shape,t),a.runWebGLProgram(u,[i],l)}}function Bn({opSnippet:t,packedOpSnippet:e,checkOutOfBounds:n=!1,supportsComplex:r=!1,cpuKernelImpl:o,dtype:s}){return({inputs:i,backend:a})=>{const{a:l,b:c}=i,u=a;if(r&&l.dtype==="complex64"){const p=u.texData.get(l.dataId),m=u.texData.get(c.dataId),[g,y]=[[p.complexTensorInfos.real,m.complexTensorInfos.real],[p.complexTensorInfos.imag,m.complexTensorInfos.imag]].map(x=>{const[b,w]=x,C={dataId:b.dataId,dtype:b.dtype,shape:l.shape},$={dataId:w.dataId,dtype:w.dtype,shape:c.shape},T=new Zc(t,l.shape,c.shape);return u.runWebGLProgram(T,[C,$],Yr(b.dtype,w.dtype))}),v=Fl({inputs:{real:g,imag:y},backend:u});return u.disposeIntermediateTensorInfo(g),u.disposeIntermediateTensorInfo(y),v}const d=s||Yr(l.dtype,c.dtype);if((l.dtype==="string"||c.dtype==="string"||u.shouldExecuteOnCPU([l,c]))&&o!=null){const p=u.texData.get(l.dataId).values,m=u.texData.get(c.dataId).values,g=l.dtype==="string"?oa(p):p,y=l.dtype==="string"?oa(m):m,[v,x]=o(l.shape,c.shape,g,y,d),b=u.makeTensorInfo(x,d),w=u.texData.get(b.dataId);return w.values=v,b}const f=ee().getBool("WEBGL_PACK_BINARY_OPERATIONS")&&e!=null;let h;return f?h=new sh(e,l.shape,c.shape,n):h=new Zc(t,l.shape,c.shape),u.runWebGLProgram(h,[l,c],d)}}function Dm(t,e=!1){if(t==="linear")return e?_Ye:NYe;if(t==="relu")return e?MYe:OYe;if(t==="elu")return e?DYe:AYe;if(t==="relu6")return e?FYe:PYe;if(t==="prelu")return e?L7:F7;if(t==="leakyrelu")return e?M7:D7;if(t==="sigmoid")return e?LYe:RYe;throw new Error(`Activation ${t} has not been implemented for the WebGL backend.`)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class j7{constructor(e,n,r,o=!1,s=!1,i=!1,a=null,l=!1,c=!1){this.variableNames=["matrixA","matrixB"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=r,this.enableShapeUniforms=Jn(this.outputShape.length);const u=o?e[1]:e[2],d=Math.ceil(u/2),f=o?"i * 2, rc.y":"rc.y, i * 2",h=s?"rc.z, i * 2":"i * 2, rc.z",p=o?["a.xxyy","a.zzww"]:["a.xxzz","a.yyww"],m=s?["b.xzxz","b.ywyw"]:["b.xyxy","b.zwzw"];let g="",y="";a&&(l?g=`vec4 activation(vec4 a) {
          vec4 b = getPreluActivationWeightsAtOutCoords();
          ${a}
        }`:c?g=`vec4 activation(vec4 a) {
          vec4 b = getLeakyreluAlphaAtOutCoords();
          ${a}
        }`:g=`vec4 activation(vec4 x) {
          ${a}
        }`,y="result = activation(result);");const v=i?"result += getBiasAtOutCoords();":"";i&&this.variableNames.push("bias"),l&&this.variableNames.push("preluActivationWeights"),c&&this.variableNames.push("leakyreluAlpha");let x="rc.x",b="rc.x";e[0]<n[0]?x=`imod(rc.x, ${e[0]})`:n[0]<e[0]&&(b=`imod(rc.x, ${n[0]})`),this.userCode=`
      ${g}
      // Don't use uniform for sharedDimensionPacked for performance.
      const float sharedDimension = ${d}.0;

      vec4 dot2x2ARowBCol(ivec3 rc) {
        vec4 result = vec4(0);
        int batchA = ${x};
        int batchB = ${b};
        for (int i = 0; i < ${d}; i++) {
          vec4 a = getMatrixA(batchA, ${f});
          vec4 b = getMatrixB(batchB, ${h});

          // These swizzled products need to be separately added.
          // See: https://github.com/tensorflow/tfjs/issues/1735
          result += (${p[0]} * ${m[0]});
          result += (${p[1]} * ${m[1]});
        }
        return result;
      }

      void main() {
        ivec3 rc = getOutputCoords();
        vec4 result = dot2x2ARowBCol(rc);

        ${v}

        ${y}

        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const t3={REAL:"return areal * breal - aimag * bimag;",IMAG:"return areal * bimag + aimag * breal;"};class n3{constructor(e,n,r){this.variableNames=["AReal","AImag","BReal","BImag"],this.outputShape=Be(n,r),this.userCode=`
      float binaryOpComplex(
          float areal, float aimag, float breal, float bimag) {
        ${e}
      }

      void main() {
        float areal = getARealAtOutCoords();
        float aimag = getAImagAtOutCoords();
        float breal = getBRealAtOutCoords();
        float bimag = getBImagAtOutCoords();
        setOutput(binaryOpComplex(areal, aimag, breal, bimag));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const r3="return a * b;";function IP(t){const{inputs:e,backend:n}=t,{a:r,b:o}=e,s=Yr(r.dtype,o.dtype);if(r.dtype==="complex64"){const a=n.texData.get(r.dataId),l=n.texData.get(o.dataId),c=new n3(t3.REAL,r.shape,o.shape),u=new n3(t3.IMAG,r.shape,o.shape),d=[{dataId:a.complexTensorInfos.real.dataId,dtype:a.complexTensorInfos.real.dtype,shape:r.shape},{dataId:a.complexTensorInfos.imag.dataId,dtype:a.complexTensorInfos.imag.dtype,shape:r.shape},{dataId:l.complexTensorInfos.real.dataId,dtype:l.complexTensorInfos.real.dtype,shape:o.shape},{dataId:l.complexTensorInfos.imag.dataId,dtype:l.complexTensorInfos.imag.dtype,shape:o.shape}],f=n.runWebGLProgram(c,d,"float32"),h=n.runWebGLProgram(u,d,"float32"),p=Fl({inputs:{real:f,imag:h},backend:n});return n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(h),p}if(n.shouldExecuteOnCPU([r,o])){const a=n.texData.get(r.dataId),l=n.texData.get(o.dataId),[c,u]=Z9e(r.shape,o.shape,a.values,l.values,s),d=n.makeTensorInfo(u,s),f=n.texData.get(d.dataId);return f.values=c,d}let i;return ee().getBool("WEBGL_PACK_BINARY_OPERATIONS")?i=new sh(r3,r.shape,o.shape):i=new Zc(r3,r.shape,o.shape),n.runWebGLProgram(i,[r,o],s)}const e7e={kernelName:Vg,backendName:"webgl",kernelFunc:IP};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function t7e(t,e,n){const r=[bf(t.shape),...wf(t.shape)],o={dtype:t.dtype,shape:r,dataId:t.dataId},s=[bf(e),...wf(e)],i=new _7(s,r),a=!0,l=[r],c=n.runWebGLProgram(i,[o],t.dtype,l,a);return{dataId:c.dataId,shape:e,dtype:c.dtype}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ge(t){const{inputs:e,backend:n,attrs:r}=t,{x:o}=e,{shape:s}=r,i=n,a=ne(o.shape),l=kK(s,a),c=ne(l);M(a===c,()=>`The new shape (${l}) has ${c} elements and the old shape (${o.shape}) has ${a} elements. The new shape and old shape must have the same number of elements.`);const u=i.texData.get(o.dataId);return u.isPacked&&!a0(o.shape,l)&&!(u.texture!==null&&a0(u.shape,l))?t7e(o,l,i):(i.incRef(o.dataId),{dataId:o.dataId,shape:l,dtype:o.dtype})}const n7e={kernelName:T1,backendName:"webgl",kernelFunc:ge};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class o3{constructor(e,n){this.variableNames=["x"];const{windowSize:r,batchSize:o,inSize:s,outSize:i}=e;this.outputShape=[o,i];const a=Math.floor(r/4)*4,l=r%4;let c="sumValue += dot(values, ones);";if(n!=null){const d=1/n;c=`sumValue += dot(values * ${uf(d)?d.toPrecision(2):d}, ones);`}let u="";s%r>0&&(u=`
        if (inIdx < 0 || inIdx >= ${s}) {
          return 0.0;
        }
      `),this.userCode=`
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float getValue(int batch, int inIdx) {
        ${u}
        return getX(batch, inIdx);
      }

      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = outIdx * ${r};

        float sumValue = 0.0;

        for (int i = 0; i < ${a}; i += 4) {
          int inIdx = inOffset + i;
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            getValue(batch, inIdx + 3)
          );

          ${c}
        }

        int inIdx = inOffset + ${a};
        if (${l===1}) {
          vec4 values = vec4(getValue(batch, inIdx), 0.0, 0.0, 0.0);

          ${c}
        } else if (${l===2}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1), 0.0, 0.0);

          ${c}
        } else if (${l===3}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2), 0.0);

          ${c}
        }
        setOutput(sumValue);
      }
    `}}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class r7e{constructor(e,n){this.variableNames=["x"];const{windowSize:r,batchSize:o,inSize:s,outSize:i}=e;this.outputShape=[o,i];let a="0.0",l="";n==="prod"?a="1.0":n==="min"?(a="1.0 / 1e-20",l="min"):n==="max"&&(a="-1.0 / 1e-20",l="max");let c=`${n}(${n}(${n}(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])`;n==="sum"?c="sumValue":n==="prod"?c="prodValue":n==="all"?c="allValue":n==="any"&&(c="anyValue");const u=Math.floor(r/4)*4,d=r%4;let f=`
      if (${n==="sum"}) {
        sumValue += dot(values, ones);
      } else if (${n==="prod"}) {
        vec2 tmp = vec2(values[0], values[1]) * vec2(values[2], values[3]);
        prodValue *= tmp[0] * tmp[1];
      } else {
        minMaxValue = ${l}(values, minMaxValue);
        if (${n==="min"} || ${n==="max"}) {
          minMaxValue = ${l}(values, minMaxValue);
          bvec4 isNaN = isnan(values);
          if (isNaN.r || isNaN.g || isNaN.b || isNaN.a) {
            minMaxValue = vec4(NAN);
          }
        }
      }
    `,h="vec4";n==="all"?(a="1.0",f=`
        bool reducedAllValue = all(values);
        float floatedReducedAllValue = float(reducedAllValue);
        allValue = float(allValue >= 1.0 && floatedReducedAllValue >= 1.0);
      `,h="bvec4"):n==="any"&&(a="0.0",f=`
        bool reducedAnyValue = any(values);
        float floatedReducedAnyValue = float(reducedAnyValue);
        anyValue = float(anyValue >= 1.0 || floatedReducedAnyValue >= 1.0);
      `,h="bvec4");let p="";s%r>0&&(p=`
        if (inIdx < 0 || inIdx >= ${s}) {
          return initializationValue;
        }
      `),this.userCode=`
      const float initializationValue = ${a};
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float getValue(int batch, int inIdx) {
        ${p}
        return getX(batch, inIdx);
      }

      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = outIdx * ${r};

        vec4 minMaxValue = vec4(${a});
        float prodValue = 1.0;
        float sumValue = 0.0;
        float allValue = 1.0;
        float anyValue = 0.0;

        for (int i = 0; i < ${u}; i += 4) {
          int inIdx = inOffset + i;
          ${h} values = ${h}(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            getValue(batch, inIdx + 3)
          );

          ${f}
        }

        int inIdx = inOffset + ${u};
        if (${d===1}) {
          ${h} values = ${h}(
            getValue(batch, inIdx),
            initializationValue,
            initializationValue,
            initializationValue
          );

          ${f}
        } else if (${d===2}) {
          ${h} values = ${h}(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            initializationValue,
            initializationValue
          );

          ${f}
        } else if (${d===3}) {
          ${h} values = ${h}(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            initializationValue
          );

          ${f}
        }
        setOutput(${c});
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function o7e(t){const e=[];for(;e.length===0||e[e.length-1].outSize!==1;){const n=e.length?e[e.length-1].outSize:t[1],r=X1(n);e.push({inSize:n,windowSize:r,outSize:Math.ceil(n/r)})}return e}function xu(t,e,n,r){const o=o7e(t.shape);let s=t;for(let i=0;i<o.length;i++){const{inSize:a,windowSize:l,outSize:c}=o[i];let u,d;n==="mean"?u=i===0?new o3({windowSize:l,inSize:a,batchSize:t.shape[0],outSize:c},a):new o3({windowSize:l,inSize:a,batchSize:t.shape[0],outSize:c}):u=new r7e({windowSize:l,inSize:a,batchSize:t.shape[0],outSize:c},n),d=s,s=r.runWebGLProgram(u,[s],e),d.dataId!==t.dataId&&r.disposeIntermediateTensorInfo(d)}return s}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class s7e{constructor(e,n){this.variableNames=["A"];const r=new Array(e.length);for(let i=0;i<r.length;i++)r[i]=e[n[i]];this.outputShape=r,this.rank=r.length;const o=vt(this.rank),s=i7e(n);this.userCode=`
    void main() {
      ${o} resRC = getOutputCoords();
      setOutput(getA(${s}));
    }
    `}}function i7e(t){const e=t.length;if(e>6)throw Error(`Transpose for rank ${e} is not yet supported`);const n=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u","resRC.v"],r=new Array(e);for(let o=0;o<t.length;o++)r[t[o]]=n[o];return r.join()}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class a7e{constructor(e,n){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0;const r=new Array(e.length);for(let u=0;u<r.length;u++)r[u]=e[n[u]];if(this.outputShape=r,this.rank=r.length,this.rank>6)throw Error(`Packed transpose for rank ${this.rank} is not yet supported.`);const o=vt(this.rank),s=R7("rc",this.rank),i=new Array(this.rank);for(let u=0;u<n.length;u++)i[n[u]]=s[u];const a=`vec2(${i.slice(-2).join()})`,l=`++${s[this.rank-1]} < ${r[this.rank-1]}`,c=`getChannel(getA(${i.join()}), ${a})`;this.userCode=`
    void main() {
      ${o} rc = getOutputCoords();
      vec4 result = vec4(0.);
      result[0] = ${c};
      if(${l}) {
        result[1] = ${c};
      }
      --${s[this.rank-1]};
      if(++${s[this.rank-2]} < ${r[this.rank-2]}) {
        result[2] = ${c};
        if(${l}) {
          result[3] = ${c};
        }
      }
      setOutput(result);
    }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fS(t,e,n){const r=ee().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new a7e(t.shape,e):new s7e(t.shape,e);return n.runWebGLProgram(r,[t],t.dtype)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function l7e(t,e,n,r){const o=e,s=t.shape.length,i=He(o,t.shape);let a=i;const l=Wt(a,s),c=l!=null;let u=t;c&&(u=fS(t,l,r),a=nn(a.length,s)),jn("sum",a,s);const[d,f]=On(u.shape,a);let h=d;n&&(h=un(d,i));const p=ne(f),g=ne(t.shape)/p,y=ge({inputs:{x:u},attrs:{shape:[g,p]},backend:r}),v=DA(t.dtype),x=xu(y,v,"sum",r),b=ge({inputs:{x},attrs:{shape:h},backend:r});return r.disposeIntermediateTensorInfo(y),r.disposeIntermediateTensorInfo(x),c&&r.disposeIntermediateTensorInfo(u),b}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hS(t){const{inputs:e,backend:n,attrs:r}=t,{x:o}=e,{axis:s,keepDims:i}=r;return l7e(o,s,i,n)}const c7e={kernelName:P1,backendName:"webgl",kernelFunc:hS};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pr(t){const{inputs:e,backend:n,attrs:r}=t,{x:o}=e,{perm:s}=r,i=n,a=o.shape.length,l=new Array(a);for(let u=0;u<l.length;u++)l[u]=o.shape[s[u]];let c;if(i.shouldExecuteOnCPU([o])){const d=i.texData.get(o.dataId).values,f=kP(d,o.shape,o.dtype,s,l);c=i.makeTensorInfo(l,o.dtype);const h=i.texData.get(c.dataId);h.values=f}else c=fS(o,s,i);return c}const u7e={kernelName:hd,backendName:"webgl",kernelFunc:pr};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const B7=1e3;function l0({a:t,b:e,transposeA:n,transposeB:r,backend:o,bias:s=null,preluActivationWeights:i=null,leakyreluAlpha:a=0,activation:l=null}){const c=t.shape.length,u=e.shape.length,d=n?t.shape[c-2]:t.shape[c-1],f=r?e.shape[u-1]:e.shape[u-2],h=n?t.shape[c-1]:t.shape[c-2],p=r?e.shape[u-2]:e.shape[u-1],m=t.shape.slice(0,-2),g=e.shape.slice(0,-2),y=ne(m),v=ne(g),b=Be(t.shape.slice(0,-2),e.shape.slice(0,-2)).concat([h,p]);M(d===f,()=>`Error in matMul: inner shapes (${d}) and (${f}) of Tensors with shapes ${t.shape} and ${e.shape} and transposeA=${n} and transposeB=${r} must match.`);const w=n?[y,d,h]:[y,h,d],C=r?[v,p,f]:[v,f,p],$=ge({inputs:{x:t},backend:o,attrs:{shape:w}}),T=ge({inputs:{x:e},backend:o,attrs:{shape:C}}),I=[$,T],E=Math.max(y,v),N=n?$.shape[1]:$.shape[2],A=s!=null,R=i!=null,P=l==="leakyrelu",F=l!=null?Dm(l,!0):null,_=A||R||P||F!=null;let L;if((h===1||p===1)&&N>B7&&_===!1){let D=$,B=T;n&&(D=pr({inputs:{x:$},backend:o,attrs:{perm:[0,2,1]}}),I.push(D)),r&&(B=pr({inputs:{x:T},backend:o,attrs:{perm:[0,2,1]}}),I.push(B));const V=p!==1,G=p===1;let Q=D;V&&(Q=ge({inputs:{x:D},backend:o,attrs:{shape:[E,N,1]}}),I.push(Q));const re=p===1?2:1;let ie=B;G&&(ie=ge({inputs:{x:B},backend:o,attrs:{shape:[E,1,N]}}),I.push(ie));const ce=IP({inputs:{a:Q,b:ie},backend:o});L=hS({inputs:{x:ce},backend:o,attrs:{axis:re,keepDims:!0}}),I.push(ce)}else{const D=Yr(t.dtype,e.dtype),B=new j7(w,C,[E,h,p],n,r,A,F,R,P),V=[$,T];if(s!=null&&V.push(s),R&&V.push(i),P){const G=o.makeTensorInfo([],"float32",Nl(a,"float32"));V.push(G),I.push(G)}L=o.runWebGLProgram(B,V,D)}const O=ge({inputs:{x:L},backend:o,attrs:{shape:b}});I.push(L);for(const D of I)o.disposeIntermediateTensorInfo(D);return O}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function d7e(t){const{inputs:e,backend:n,attrs:r}=t,{a:o,b:s,bias:i,preluActivationWeights:a}=e,{transposeA:l,transposeB:c,activation:u,leakyreluAlpha:d}=r;return l0({a:o,b:s,transposeA:l,transposeB:c,backend:n,bias:i,preluActivationWeights:a,leakyreluAlpha:d,activation:u})}const f7e={kernelName:Fb,backendName:"webgl",kernelFunc:d7e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const s3="return abs(x);";function h7e(t){const{inputs:e,backend:n}=t,{x:r}=e;if(n.shouldExecuteOnCPU([r])&&r.dtype!=="complex64"){const s=n.texData.get(r.dataId),i=O7(s.values);return n.makeTensorInfo(r.shape,r.dtype,i)}let o;return ee().getBool("WEBGL_PACK_UNARY_OPERATIONS")?o=new Ua(r.shape,s3):o=new ti(r.shape,s3),n.runWebGLProgram(o,[r],r.dtype)}const p7e={kernelName:jw,backendName:"webgl",kernelFunc:h7e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const m7e=ts+`
  if (abs(x) > 1.) {
    return NAN;
  }
  return acos(x);
`,g7e=ot({opSnippet:m7e}),y7e={kernelName:pg,backendName:"webgl",kernelFunc:g7e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const v7e=ts+`
  if (x < 1.0) return NAN;
return log(x + sqrt(x * x - 1.0));`,x7e=ot({opSnippet:v7e}),b7e={kernelName:mg,backendName:"webgl",kernelFunc:x7e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const i3="return a + b;",w7e=Bn({opSnippet:i3,packedOpSnippet:i3,supportsComplex:!0,cpuKernelImpl:O9e}),S7e={kernelName:Kf,backendName:"webgl",kernelFunc:w7e};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class C7e{constructor(e,n){this.outputShape=[],this.outputShape=e,this.variableNames=n.map((s,i)=>`T${i}`);const r=[];this.variableNames.forEach(s=>{r.push(`float v${s} = get${s}AtOutCoords();`)});const o=this.variableNames.map(s=>`v${s}`).join(" + ");this.userCode=`
      void main() {
        ${r.join(`
        `)}

        float result = ${o};
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class $7e{constructor(e,n){this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e,this.variableNames=n.map((s,i)=>`T${i}`);const r=[];this.variableNames.forEach(s=>{r.push(`vec4 v${s} = get${s}AtOutCoords();`)});const o=this.variableNames.map(s=>`v${s}`).join(" + ");this.userCode=`
      void main() {
        ${r.join(`
        `)}

        vec4 result = ${o};
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Qv(t){const{inputs:e,backend:n}=t,r=e;if(r.length===1)return Zr({inputs:{x:r[0]},backend:n});if(r.length>ee().getNumber("WEBGL_MAX_TEXTURES_IN_SHADER")){const l=Math.floor(r.length/2),c=Qv({inputs:r.slice(0,l),backend:n}),u=Qv({inputs:r.slice(l),backend:n});return Qv({inputs:[c,u],backend:n})}const o=r.map(l=>l.dtype).reduce((l,c)=>Yr(l,c)),s=r.map(l=>l.shape),a=ee().getBool("WEBGL_PACK")?new $7e(r[0].shape,s):new C7e(r[0].shape,s);return n.runWebGLProgram(a,r,o)}const k7e={kernelName:K2,backendName:"webgl",kernelFunc:Qv};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function T7e(t){const{inputs:e,backend:n,attrs:r}=t,{x:o}=e,{axis:s,keepDims:i}=r,a=o.shape.length,l=He(s,o.shape);let c=l;const u=Wt(c,a);let d=o;u!=null&&(d=pr({inputs:{x:o},backend:n,attrs:{perm:u}}),c=nn(c.length,a)),jn("all",c,a);const[f,h]=On(d.shape,c),p=ne(h),m=ge({inputs:{x:d},backend:n,attrs:{shape:[-1,p]}}),g=xu(m,m.dtype,"all",n);let y;if(i){const v=un(f,l);y=ge({inputs:{x:g},backend:n,attrs:{shape:v}})}else y=ge({inputs:{x:g},backend:n,attrs:{shape:f}});return n.disposeIntermediateTensorInfo(m),n.disposeIntermediateTensorInfo(g),u!=null&&n.disposeIntermediateTensorInfo(d),y}const I7e={kernelName:q2,backendName:"webgl",kernelFunc:T7e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function E7e(t){const{inputs:e,backend:n,attrs:r}=t,{x:o}=e,{axis:s,keepDims:i}=r,a=o.shape.length,l=He(s,o.shape);let c=l;const u=Wt(c,a);let d=o;u!=null&&(d=pr({inputs:{x:o},backend:n,attrs:{perm:u}}),c=nn(c.length,a)),jn("any",c,a);const[f,h]=On(d.shape,c),p=ne(h),m=ge({inputs:{x:d},backend:n,attrs:{shape:[-1,p]}}),g=xu(m,m.dtype,"any",n);let y;if(i){const v=un(f,l);y=ge({inputs:{x:g},backend:n,attrs:{shape:v}})}else y=ge({inputs:{x:g},backend:n,attrs:{shape:f}});return n.disposeIntermediateTensorInfo(m),n.disposeIntermediateTensorInfo(g),u!=null&&n.disposeIntermediateTensorInfo(d),y}const N7e={kernelName:X2,backendName:"webgl",kernelFunc:E7e};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class A7e{constructor(e,n,r){this.variableNames=["A"];const{windowSize:o,batchSize:s,outSize:i}=e;r||this.variableNames.push("bestIndicesA"),this.outputShape=[s,i];const a=n==="max"?">":"<",l=r?"inOffset + i;":"round(getBestIndicesA(batch, inOffset + i));";this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = outIdx * ${o};

        int bestIndex = inOffset;
        float bestValue = getA(batch, bestIndex);

        for (int i = 0; i < ${o}; i++) {
          int inIdx = ${l};
          float candidate = getA(batch, inIdx);
          if (candidate ${a} bestValue) {
            bestValue = candidate;
            bestIndex = inIdx;
          }
        }
        setOutput(float(bestIndex));
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class O7e{constructor(e,n,r,o){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,M(e.length>2,()=>`Packed arg${r.charAt(0).toUpperCase()+r.slice(1)} supports only inputs with rank above 2.`);const s=e[e.length-1],i=Math.ceil(s/n);this.outputShape=e.slice(0,-1),i>1&&this.outputShape.push(i),o||this.variableNames.push("bestIndicesA");const a=this.outputShape,l=a.length,c=vt(l),u=dr("coords",l);let d,f;if(i===1){f=l+1;const T=vt(f);d=`
        ${T} sourceLocR = ${T}(${u.join()}, 0);
        ++${u[l-1]};
        ${T} sourceLocG = ${T}(${u.join()}, 0);
        ++${u[l-2]};
        ${T} sourceLocA = ${T}(${u.join()}, 0);
        --${u[l-1]};
        ${T} sourceLocB = ${T}(${u.join()}, 0);
        --${u[l-2]};`}else f=l,d=`
        ${c} sourceLocR = coords;
        ++${u[l-1]};
        ${c} sourceLocG = coords;
        ++${u[l-2]};
        ${c} sourceLocA = coords;
        --${u[l-1]};
        ${c} sourceLocB = coords;
        --${u[l-2]};`;const h=["x","y","z","w","u","v"].slice(0,f),p="."+h[f-1],m=h.map(T=>"int "+T),g=dr("sourceLocR",f-1).concat("inIdx.r"),y=dr("sourceLocG",f-1).concat("inIdx.g"),v=dr("sourceLocB",f-1).concat("inIdx.b"),x=dr("sourceLocA",f-1).concat("inIdx.a"),b=r==="max"?"greaterThan":"lessThan",w=o?"":`
          inIdx = round(vec4(getBestIndicesAChannel(${g.join()}),
                             getBestIndicesAChannel(${y.join()}),
                             getBestIndicesAChannel(${v.join()}),
                             getBestIndicesAChannel(${x.join()})));`,C=`vec4(
            getAChannel(${g.join()}),
            hasNextCol ? getAChannel(${y.join()}) : 0.,
            hasNextRow ? getAChannel(${v.join()}) : 0.,
            hasNextRow && hasNextCol ? getAChannel(${x.join()}) : 0.)`,$=o?"":`
      float getBestIndicesAChannel(${m.join()}) {
        return getChannel(getBestIndicesA(${h.join()}),
                                          vec2(${h.slice(-2).join()}));
      }`;this.userCode=`
      float getAChannel(${m.join()}) {
        return getChannel(getA(${h.join()}),
                               vec2(${h.slice(-2).join()}));
      }
      ${$}
      void main() {
        ${c} coords = getOutputCoords();
        bool hasNextCol = ${u[l-1]} < ${a[l-1]-1};
        bool hasNextRow = ${u[l-2]} < ${a[l-2]-1};
        ${d}
        ivec4 srcIdx = ivec4(sourceLocR${p}, sourceLocG${p},
          sourceLocB${p}, sourceLocA${p}) * ${n};
        ivec4 inIdx = srcIdx;
        vec4 bestIndex = vec4(inIdx);
        vec4 bestValue = ${C};

        for (int i = 0; i < ${n}; i++) {
          inIdx = srcIdx;
          ${w}
          vec4 candidate = ${C};
          bvec4 nan = isnan(candidate);
          bvec4 replace = bvec4(
            vec4(${b}(candidate, bestValue)) * (vec4(1.0) - vec4(nan)));

          bestValue = vec4(replace.x  ? candidate.x : bestValue.x,
                           replace.y  ? candidate.y : bestValue.y,
                           replace.z  ? candidate.z : bestValue.z,
                           replace.w  ? candidate.w : bestValue.w);
          bestIndex = mix(bestIndex, vec4(inIdx), vec4(replace));
          srcIdx++;
        }
        setOutput(bestIndex);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function z7(t,e,n,r=null){let o=e.shape[0],s=e.shape[1];r!=null&&(o=r.shape[0],s=r.shape[1]);const i=X1(s),a={windowSize:i,inSize:s,batchSize:o,outSize:Math.ceil(s/i)},l=new A7e(a,n,r==null),c=[e];r!=null&&c.push(r);const u=t.runWebGLProgram(l,c,"int32");if(u.shape[1]===1)return u;const d=z7(t,e,n,u);return t.disposeIntermediateTensorInfo(u),d}function W7(t,e,n,r=null){const o=r!=null?r.shape:e.shape,s=o[o.length-1],i=X1(s),a=new O7e(o,i,n,r==null),l=r==null?[e]:[e,r],c=t.runWebGLProgram(a,l,"int32");if(c.shape.length===e.shape.length){const u=W7(t,e,n,c);return t.disposeIntermediateTensorInfo(c),u}return c}function V7(t,e,n,r){const o=[n];if(jn("arg"+r.charAt(0).toUpperCase()+r.slice(1),o,e.shape.length),!ee().getBool("WEBGL_PACK_REDUCE")||e.shape.length<=2){const s=[],i=t.texData.get(e.dataId),a=i!==null&&i.isPacked;let l=e;a&&(l=t.unpackTensor(e),s.push(l));const[c,u]=On(l.shape,o),d=ne(u),f=ge({inputs:{x:l},backend:t,attrs:{shape:[-1,d]}});s.push(f);const h=z7(t,f,r);s.push(h);const p=ge({inputs:{x:h},backend:t,attrs:{shape:c}});return s.forEach(m=>t.disposeIntermediateTensorInfo(m)),p}return W7(t,e,r)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function P7e(t){const{inputs:e,backend:n,attrs:r}=t,{x:o}=e,{axis:s}=r;let i=He(s,o.shape);const a=Wt(i,o.shape.length);let l=o;const c=[];a!=null&&(l=pr({inputs:{x:o},backend:n,attrs:{perm:a}}),c.push(l),i=nn(i.length,l.shape.length)),jn("argMax",[i[0]],l.shape.length);const u=V7(n,l,i[0],"max");return c.forEach(d=>n.disposeIntermediateTensorInfo(d)),u}const R7e={kernelName:Bw,backendName:"webgl",kernelFunc:P7e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _7e(t){const{inputs:e,backend:n,attrs:r}=t,{x:o}=e,{axis:s}=r;let i=He(s,o.shape);const a=Wt(i,o.shape.length);let l=o;const c=[];a!=null&&(l=pr({inputs:{x:o},backend:n,attrs:{perm:a}}),c.push(l),i=nn(i.length,l.shape.length)),jn("argMin",[i[0]],l.shape.length);const u=V7(n,l,i[0],"min");return c.forEach(d=>n.disposeIntermediateTensorInfo(d)),u}const D7e={kernelName:zw,backendName:"webgl",kernelFunc:_7e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const M7e=ts+`
  if (abs(x) > 1.) {
    return NAN;
  }
  return asin(x);
`,F7e=ot({opSnippet:M7e}),L7e={kernelName:gg,backendName:"webgl",kernelFunc:F7e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const j7e=ts+"return log(x + sqrt(x * x + 1.0));",B7e=ot({opSnippet:j7e}),z7e={kernelName:yg,backendName:"webgl",kernelFunc:B7e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const W7e=ts+`
  return atan(x);
`,V7e=ot({opSnippet:W7e}),U7e={kernelName:vg,backendName:"webgl",kernelFunc:V7e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const G7e=TP+`
  return atan(a, b);
`,H7e=`
  vec4 result = atan(a, b);
  bvec4 isNaNA = isnan(a);
  bvec4 isNaNB = isnan(b);
  bvec4 isNaN = bvec4(isNaNA.x || isNaNB.x, isNaNA.y || isNaNB.y, isNaNA.z || isNaNB.z, isNaNA.w || isNaNB.w);
  `+vu+`
  return result;
`,K7e=Bn({opSnippet:G7e,packedOpSnippet:H7e}),q7e={kernelName:bg,backendName:"webgl",kernelFunc:K7e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const X7e=ts+`
  if ((x < -1.0) || (x > 1.0)) return NAN;
return (log(1.0 + x) - log(1.0 - x)) / 2.0;`,Y7e=ot({opSnippet:X7e}),Q7e={kernelName:xg,backendName:"webgl",kernelFunc:Y7e};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Mm{constructor(e,n,r,o=!1,s=!1){if(this.variableNames=["x"],n==="avg"&&r)throw new Error("Cannot compute positions for average pool.");const i=e.filterWidth,a=e.strideHeight,l=e.strideWidth,c=e.dilationHeight,u=e.dilationWidth,d=e.effectiveFilterHeight,f=e.effectiveFilterWidth,h=e.padInfo.top,p=e.padInfo.left;this.outputShape=e.outShape;const m=n==="avg",g=`((batch  * ${e.inHeight} + xR) * ${e.inWidth} + xC) * ${e.inChannels} + d`,y=`(xR * ${e.inWidth} + xC) * ${e.inChannels} + d`;let v="0.0";if(m||(v="-1.0 / 1e-20"),r){const T=">=";this.userCode=`
        const ivec2 strides = ivec2(${a}, ${l});
        const ivec2 pads = ivec2(${h}, ${p});

        void main() {
          ivec4 coords = getOutputCoords();
          int batch = coords[0];
          int d = coords[3];

          ivec2 xRCCorner = coords.yz * strides - pads;
          int xRCorner = xRCCorner.x;
          int xCCorner = xRCCorner.y;

          // max/min x(?, ?, d) to get y(yR, yC, d).
          // ? = to be determined
          float minMaxValue = 0.0;
          float minMaxValueFound = 0.0;
          int minMaxPosition = 0;
          float avgValue = 0.0;

          for (int wR = 0; wR < ${d};
              wR += ${c}) {
            int xR = xRCorner + wR;

            if (xR < 0 || xR >= ${e.inHeight}) {
              continue;
            }

            for (int wC = 0; wC < ${f};
                wC += ${u}) {
              int xC = xCCorner + wC;

              if (xC < 0 || xC >= ${e.inWidth}) {
                continue;
              }

              float value = getX(batch, xR, xC, d);

              // If a min / max value has already been found, use it. If not,
              // use the current value.
              float currMinMaxValue = mix(
                  value, minMaxValue, minMaxValueFound);
              if (value ${T} currMinMaxValue) {
                minMaxValue = value;
                minMaxValueFound = 1.0;
                minMaxPosition = ${o?s?g:y:`wR * ${f} + wC`};
              }
            }
          }
          setOutput(float(minMaxPosition));
        }
      `;return}const x="max";let b=`${n}(${n}(${n}(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])`;n==="avg"&&(b="avgValue / max(count, 1.0)");const w=Math.floor(i/4)*4,C=i%4,$=`
      if (${m}) {
        avgValue += dot(values, ones);
      } else {
        minMaxValue = ${x}(values, minMaxValue);
      }
    `;this.userCode=`
      const ivec2 strides = ivec2(${a}, ${l});
      const ivec2 pads = ivec2(${h}, ${p});
      const float initializationValue = ${v};
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float count = 0.0;

      float getValue(int batch, int xR, int xC, int d) {
        if (xC < 0 || xC >= ${e.inWidth}) {
          return initializationValue;
        }
        count += 1.0;
        return getX(batch, xR, xC, d);
      }

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d = coords[3];

        ivec2 xRCCorner = coords.yz * strides - pads;
        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        // max/min x(?, ?, d) to get y(yR, yC, d).
        // ? = to be determined
        vec4 minMaxValue = vec4(${v});
        float avgValue = 0.0;
        count = 0.0;

        for (int wR = 0; wR < ${d};
            wR += ${c}) {
          int xR = xRCorner + wR;

          if (xR < 0 || xR >= ${e.inHeight}) {
            continue;
          }

          for (int wC = 0; wC < ${w}; wC += 4) {
            int xC = xCCorner + wC * ${u};

            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              getValue(batch, xR, xC + ${u}, d),
              getValue(batch, xR, xC + 2 * ${u}, d),
              getValue(batch, xR, xC + 3 * ${u}, d)
            );

            ${$}
          }

          int xC = xCCorner + ${w};
          if (${C===1}) {
            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              initializationValue,
              initializationValue,
              initializationValue
            );

            ${$}
          } else if (${C===2}) {
            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              getValue(batch, xR, xC + ${u}, d),
              initializationValue,
              initializationValue
            );

            ${$}
          } else if (${C===3}) {
            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              getValue(batch, xR, xC + ${u}, d),
              getValue(batch, xR, xC + 2 * ${u}, d),
              initializationValue
            );

            ${$}
          }
        }
        setOutput(${b});
      }
    `}}class EP{constructor(e,n,r,o=!1,s=!1){if(this.variableNames=["x"],n==="avg"&&r)throw new Error("Cannot compute positions for average pool.");const i=e.filterWidth,a=e.strideDepth,l=e.strideHeight,c=e.strideWidth,u=e.dilationDepth,d=e.dilationHeight,f=e.dilationWidth,h=e.effectiveFilterDepth,p=e.effectiveFilterHeight,m=e.effectiveFilterWidth,g=e.padInfo.front,y=e.padInfo.top,v=e.padInfo.left;this.outputShape=e.outShape;const x=n==="avg";let b="0.0";if(x||(b="-1.0 / 1e-20"),r){const E=">=";this.userCode=`
        const ivec3 strides =
            ivec3(${a}, ${l}, ${c});
        const ivec3 pads = ivec3(${g}, ${y}, ${v});

        void main() {
          ivec5 coords = getOutputCoords();
          int batch = coords.x;
          int ch = coords.u;

          ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;
          int xDCorner = xCorner.x;
          int xRCorner = xCorner.y;
          int xCCorner = xCorner.z;

          // max/min x(?, ?, ?, ch) to get y(yD, yR, yC, ch).
          // ? = to be determined
          float minMaxValue = 0.0;
          float minMaxValueFound = 0.0;
          int minMaxPosition = 0;

          for (int wD = 0; wD < ${h};
              wD += ${u}) {
            int xD = xDCorner + wD;

            if (xD < 0 || xD >= ${e.inDepth}) {
              continue;
            }

            for (int wR = 0; wR < ${p};
                wR += ${d}) {
              int xR = xRCorner + wR;

              if (xR < 0 || xR >= ${e.inHeight}) {
                continue;
              }

              for (int wC = 0; wC < ${m};
                  wC += ${f}) {
                int xC = xCCorner + wC;

                if (xC < 0 || xC >= ${e.inWidth}) {
                  continue;
                }

                float value = getX(batch, xD, xR, xC, ch);

                // If a min / max value has already been found, use it. If not,
                // use the current value.
                float currMinMaxValue = mix(
                    value, minMaxValue, minMaxValueFound);
                if (value ${E} currMinMaxValue) {
                  minMaxValue = value;
                  minMaxValueFound = 1.0;
                  minMaxPosition = ${o?s?`(((batch * ${e.inDepth} + xD) * ${e.inHeight} + xR) * ${e.inWidth} + xC) * ${e.inChannels} + ch`:`((xD * ${e.inHeight} + xR) * ${e.inWidth} + xC) * ${e.inChannels} + ch`:`wD * ${p} * ${m} +
                      wR * ${m} + wC`};
                }
              }
            }
          }
          setOutput(float(minMaxPosition));
        }
      `;return}const w="max";let C=`${n}(${n}(${n}(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])`;n==="avg"&&(C="avgValue / max(count, 1.0)");const $=Math.floor(i/4)*4,T=i%4,I=`
      if (${x}) {
        avgValue += dot(values, ones);
      } else {
        minMaxValue = ${w}(values, minMaxValue);
      }
    `;this.userCode=`
      const ivec3 strides =
        ivec3(${a}, ${l}, ${c});
      const ivec3 pads = ivec3(${g}, ${y}, ${v});
      const float initializationValue = ${b};
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float count = 0.0;

      float getValue(int batch, int xD, int xR, int xC, int ch) {
        if (xC < 0 || xC >= ${e.inWidth}) {
          return initializationValue;
        }
        count += 1.0;
        return getX(batch, xD, xR, xC, ch);
      }

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int ch = coords.u;

        ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;
        int xDCorner = xCorner.x;
        int xRCorner = xCorner.y;
        int xCCorner = xCorner.z;

        // max/min x(?, ?, ?, d) to get y(yD, yR, yC, ch).
        // ? = to be determined
        vec4 minMaxValue = vec4(${b});
        float avgValue = 0.0;
        count = 0.0;

        for (int wD = 0; wD < ${h};
            wD += ${u}) {
          int xD = xDCorner + wD;

          if (xD < 0 || xD >= ${e.inDepth}) {
            continue;
          }

          for (int wR = 0; wR < ${p};
            wR += ${d}) {
            int xR = xRCorner + wR;

            if (xR < 0 || xR >= ${e.inHeight}) {
              continue;
            }

            for (int wC = 0; wC < ${$}; wC += 4) {
              int xC = xCCorner + wC * ${f};

              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                getValue(batch, xD, xR, xC + ${f}, ch),
                getValue(batch, xD, xR, xC + 2 * ${f}, ch),
                getValue(batch, xD, xR, xC + 3 * ${f}, ch)
              );

              ${I}
            }

            int xC = xCCorner + ${$};
            if (${T===1}) {
              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                initializationValue,
                initializationValue,
                initializationValue
              );

              ${I}
            } else if (${T===2}) {
              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                getValue(batch, xD, xR, xC + ${f}, ch),
                initializationValue,
                initializationValue
              );

              ${I}
            } else if (${T===3}) {
              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                getValue(batch, xD, xR, xC + ${f}, ch),
                getValue(batch, xD, xR, xC + 2 * ${f}, ch),
                initializationValue
              );

              ${I}
            }
          }
        }
        setOutput(${C});
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Z7e(t){const{inputs:e,backend:n,attrs:r}=t,{x:o}=e;Iy(o,"avgPool");const{filterSize:s,strides:i,pad:a,dimRoundingMode:l}=r,c=1;M(Qn(i,c),()=>`Error in avgPool: Either strides or dilations must be 1. Got strides ${i} and dilations '${c}'`);const u=Jo(o.shape,s,i,c,a,l);if(u.filterWidth===1&&u.filterHeight===1&&dt(u.inShape,u.outShape))return Zr({inputs:{x:o},backend:n});const d=new Mm(u,"avg",!1);return n.runWebGLProgram(d,[o],"float32")}const J7e={kernelName:Ww,backendName:"webgl",kernelFunc:Z7e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function eQe(t){const{inputs:e,backend:n,attrs:r}=t,{x:o}=e,{filterSize:s,strides:i,pad:a,dimRoundingMode:l,dataFormat:c}=r,u=[1,1,1],d=ua(o.shape,s,i,u,a,l,c),f=new EP(d,"avg",!1);return n.runWebGLProgram(f,[o],"float32")}const tQe={kernelName:Vw,backendName:"webgl",kernelFunc:eQe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class nQe{constructor(e){this.variableNames=["dy"],this.outputShape=e.inShape;const n=e.filterHeight,r=e.filterWidth,o=e.strideHeight,s=e.strideWidth,i=e.dilationHeight,a=e.dilationWidth,l=e.effectiveFilterHeight,c=e.effectiveFilterWidth,u=l-1-e.padInfo.top,d=c-1-e.padInfo.left,f=1/(n*r);this.userCode=`
      const ivec2 pads = ivec2(${u}, ${d});
      const float avgMultiplier = float(${f});

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];

        ivec2 dyRCCorner = coords.yz - pads;
        int dyRCorner = dyRCCorner.x;
        int dyCCorner = dyRCCorner.y;

        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < ${l};
            wR += ${i}) {
          float dyR = float(dyRCorner + wR) / ${o}.0;

          if (dyR < 0.0 || dyR >= ${e.outHeight}.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          for (int wC = 0; wC < ${c};
            wC+= ${a}) {
            float dyC = float(dyCCorner + wC) / ${s}.0;

            if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            float dyValue = getDy(b, idyR, idyC, d);

            dotProd += dyValue * avgMultiplier;
          }
        }
        setOutput(dotProd);
      }
    `}}class rQe{constructor(e){this.variableNames=["dy"],this.outputShape=e.inShape;const n=e.filterDepth,r=e.filterHeight,o=e.filterWidth,s=e.strideDepth,i=e.strideHeight,a=e.strideWidth,l=e.dilationDepth,c=e.dilationHeight,u=e.dilationWidth,d=e.effectiveFilterDepth,f=e.effectiveFilterHeight,h=e.effectiveFilterWidth,p=d-1-e.padInfo.front,m=f-1-e.padInfo.top,g=h-1-e.padInfo.left,y=1/(n*r*o);this.userCode=`
      const ivec3 pads = ivec3(${p}, ${m}, ${g});
      const float avgMultiplier = float(${y});

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int ch = coords.u;

        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;
        int dyDCorner = dyCorner.x;
        int dyRCorner = dyCorner.y;
        int dyCCorner = dyCorner.z;

        // Convolve dy(?, ?, ?, d) with pos mask(:, :, :, ch) to get
        // dx(xD, xR, xC, ch).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;

        for (int wD = 0; wD < ${d};
            wD += ${l}) {
          float dyD = float(dyDCorner + wD) / ${s}.0;

          if (dyD < 0.0 || dyD >= ${e.outDepth}.0 || fract(dyD) > 0.0) {
            continue;
          }
          int idyD = int(dyD);

          for (int wR = 0; wR < ${f};
              wR += ${c}) {
            float dyR = float(dyRCorner + wR) / ${i}.0;

            if (dyR < 0.0 || dyR >= ${e.outHeight}.0 ||
                fract(dyR) > 0.0) {
              continue;
            }
            int idyR = int(dyR);

            for (int wC = 0; wC < ${h};
                wC += ${u}) {
              float dyC = float(dyCCorner + wC) / ${a}.0;

              if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                  fract(dyC) > 0.0) {
                continue;
              }
              int idyC = int(dyC);

              float dyValue = getDy(batch, idyD, idyR, idyC, ch);

              dotProd += dyValue * avgMultiplier;
            }
          }
        }
        setOutput(dotProd);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function oQe(t){const{inputs:e,backend:n,attrs:r}=t,{dy:o,input:s}=e,i=s,{filterSize:a,strides:l,pad:c,dimRoundingMode:u}=r,d=[1,1,1],f=ua(i.shape,a,l,d,c,u),h=new rQe(f);return n.runWebGLProgram(h,[o],i.dtype)}const sQe={kernelName:Q2,backendName:"webgl",kernelFunc:oQe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function iQe(t){const{inputs:e,backend:n,attrs:r}=t,{dy:o,input:s}=e,i=s;Iy([o,s],"avgPoolGrad");const{filterSize:a,strides:l,pad:c}=r,u=Jo(i.shape,a,l,1,c),d=new nQe(u);return n.runWebGLProgram(d,[o],i.dtype)}const aQe={kernelName:Y2,backendName:"webgl",kernelFunc:iQe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lQe(t){const{inputs:e,backend:n,attrs:r}=t,{a:o,b:s}=e,{transposeA:i,transposeB:a}=r;return l0({a:o,b:s,transposeA:i,transposeB:a,backend:n})}const cQe={kernelName:Uw,backendName:"webgl",kernelFunc:lQe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class uQe{constructor(e,n,r,o,s,i){this.outputShape=[],this.variableNames=["x","mean","variance"],Be(e,n),Be(e,r);let a="0.0";o!=null&&(Be(e,o),this.variableNames.push("offset"),a="getOffsetAtOutCoords()");let l="1.0";s!=null&&(Be(e,s),this.variableNames.push("scale"),l="getScaleAtOutCoords()"),this.outputShape=e,this.userCode=`
      void main() {
        float x = getXAtOutCoords();
        float mean = getMeanAtOutCoords();
        float variance = getVarianceAtOutCoords();
        float offset = ${a};
        float scale = ${l};
        float inv = scale * inversesqrt(variance + float(${i}));
        setOutput(dot(vec3(x, -mean, offset), vec3(inv, inv, 1)));
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class dQe{constructor(e,n,r,o,s,i){this.packedInputs=!0,this.packedOutput=!0,this.variableNames=["x","mean","variance"],Be(e,n),Be(e,r);let a="vec4(0.0)";o!=null&&(Be(e,o),this.variableNames.push("offset"),a="getOffsetAtOutCoords()");let l="vec4(1.0)";s!=null&&(Be(e,s),this.variableNames.push("scale"),l="getScaleAtOutCoords()"),this.outputShape=e,this.userCode=`
      void main() {
        vec4 offset = ${a};
        vec4 scale = ${l};

        vec4 x = getXAtOutCoords();
        vec4 mean = getMeanAtOutCoords();
        vec4 variance = getVarianceAtOutCoords();

        vec4 inv = scale * inversesqrt(variance + vec4(${i}));

        setOutput((x - mean) * inv + offset);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const fQe=({inputs:t,backend:e,attrs:n})=>{const{x:r,mean:o,variance:s,offset:i,scale:a}=t;M(o.shape.length===s.shape.length,()=>"Batch normalization gradient requires mean and variance to have equal ranks."),M(i==null||o.shape.length===i.shape.length,()=>"Batch normalization gradient requires mean and offset to have equal ranks."),M(a==null||o.shape.length===a.shape.length,()=>"Batch normalization gradient requires mean and scale to have equal ranks.");let{varianceEpsilon:l}=n;l==null&&(l=.001);const c=[r,o,s];let u=null;i!=null&&(u=i.shape,c.push(i));let d=null;a!=null&&(d=a.shape,c.push(a));const f=ee().getBool("WEBGL_PACK_NORMALIZATION")?new dQe(r.shape,o.shape,s.shape,u,d,l):new uQe(r.shape,o.shape,s.shape,u,d,l);return e.runWebGLProgram(f,c,c[0].dtype)},hQe={kernelName:n1,backendName:"webgl",kernelFunc:fQe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class pQe{constructor(e){this.variableNames=["source"],this.outputShape=e,this.rank=e.length;const n=vt(this.rank);this.customUniforms=[{name:"start",arrayIndex:this.rank,type:"int"}];const r=mQe(this.rank);let o;const s=e.map((i,a)=>`sourceLoc.${BI[a]} = start[${a}] + coords.${BI[a]};`);o=`
        ${n} sourceLoc;
        ${n} coords = getOutputCoords();
        ${s.join(`
`)}
      `,this.userCode=`
      void main() {
        ${o}
        setOutput(getSource(${r}));
      }
    `}}const BI=["x","y","z","w","u","v"];function mQe(t){if(t===1)return"sourceLoc";if(t<=6)return BI.slice(0,t).map(e=>"sourceLoc."+e).join(",");throw Error(`Slicing for rank ${t} is not yet supported`)}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class gQe{constructor(e){this.variableNames=["source"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e,this.rank=e.length,this.customUniforms=[{name:"start",arrayIndex:this.rank,type:"int"}];const n=vt(this.rank),r=dr("coords",this.rank),o=dr("sourceLoc",this.rank),s=this.rank===1?"sourceLoc":`vec2(${o.slice(-2).join()})`,i=`getChannel(getSource(${o.join()}), ${s})`,a=`
      result.x = ${i};
      if (++${r[this.rank-1]} < ${e[this.rank-1]}) {
        ++${o[this.rank-1]};
        result.y = ${i};
        --${o[this.rank-1]};
      }
    `,l=this.rank===1?"":`
      --${r[this.rank-1]};
      if (++${r[this.rank-2]} < ${e[this.rank-2]}) {
        ++${o[this.rank-2]};
        result.z = ${i};
        if (++${r[this.rank-1]} < ${e[this.rank-1]}) {
          ++${o[this.rank-1]};
          result.w = ${i};
        }
      }
    `,c=this.rank<=4?`sourceLoc = coords +
            ${n}(${e.map((u,d)=>`start[${d}]`).join()});`:e.map((u,d)=>`${o[d]} = ${r[d]} + start[${d}];`).join(`
`);this.userCode=`
      void main() {
        ${n} coords = getOutputCoords();
        ${n} sourceLoc;
        ${c}
        vec4 result = vec4(0.);
        ${a}
        ${l}
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function yQe(t,e,n,r){const o=r.texData.get(t.dataId),s=r.makeTensorInfo(n,t.dtype),i=r.texData.get(s.dataId);Object.assign(i,o),i.refCount=1,i.shape=n,i.dtype=t.dtype;let a=CO(e,Ie(t.shape));o.slice&&(a+=o.slice.flatOffset),i.slice={flatOffset:a,origDataId:o.slice&&o.slice.origDataId||t.dataId};const l=r.dataRefCount.get(i.slice.origDataId)||1;return r.dataRefCount.set(i.slice.origDataId,l+1),s}function ah(t){const{inputs:e,backend:n,attrs:r}=t,{x:o}=e,{begin:s,size:i}=r,[a,l]=q1(o,s,i);if(bO(o,a,l),ne(l)===0)return n.makeTensorInfo(l,o.dtype,[]);if(n.shouldExecuteOnCPU([o])||o.dtype==="string"){const d=n.texData.get(o.dataId),f=cYe(d.values,a,l,o.shape,o.dtype);return n.makeTensorInfo(l,o.dtype,f)}const{isPacked:c}=n.texData.get(o.dataId),u=SO(o.shape,a,l);if(c||!u){const d=ee().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new gQe(l):new pQe(l),f=[a];return n.runWebGLProgram(d,[o],o.dtype,f)}return n.uploadToGPU(o.dataId),yQe(o,a,l,n)}const vQe={kernelName:O1,backendName:"webgl",kernelFunc:ah};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const xQe=t=>{const{inputs:e,backend:n,attrs:r}=t,{x:o}=e,{blockShape:s,crops:i}=r;M(o.shape.length<=4,()=>"batchToSpaceND for rank > 4 with a WebGL backend not implemented yet");const a=s.reduce((v,x)=>v*x),l=py(o.shape,s,a),c=my(l.length,s.length),u=gy(o.shape,s,a),d=EO(i,s.length),f=NO(u,i,s.length),h=[],p=ge({inputs:{x:o},backend:n,attrs:{shape:l}}),m=pr({inputs:{x:p},backend:n,attrs:{perm:c}}),g=ge({inputs:{x:m},backend:n,attrs:{shape:u}}),y=ah({inputs:{x:g},backend:n,attrs:{begin:d,size:f}});return h.push(p),h.push(m),h.push(g),h.forEach(v=>n.disposeIntermediateTensorInfo(v)),y},bQe={kernelName:Gw,backendName:"webgl",kernelFunc:xQe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function wQe(t){const{inputs:e,backend:n,attrs:r}=t,{x:o,weights:s}=e,{size:i}=r,a=n.readSync(o.dataId),l=n.readSync(s.dataId),c=A7(a,l,s.dtype,s.shape,i);return n.makeTensorInfo([i],s.dtype,c)}const SQe={kernelName:Z2,backendName:"webgl",kernelFunc:wQe};/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const CQe=`
  int r = int(a.r) & int(b.r);
  int g = int(a.g) & int(b.g);
  int rb = int(a.b) & int(b.b);
  int ra = int(a.a) & int(b.a);
  return vec4(r, g, rb, ra);
`,$Qe=`
  return float(int(a.r) & int(b.r));
`;function kQe(t){const{inputs:e,backend:n}=t,{a:r,b:o}=e,s=ee().getBool("WEBGL_PACK_BINARY_OPERATIONS"),i=ee().getNumber("WEBGL_VERSION");if(n.shouldExecuteOnCPU([r,o])||i===1){const l=n.texData.get(r.dataId).values,c=n.texData.get(o.dataId).values,[u,d]=R9e(r.shape,o.shape,l,c,r.dtype),f=n.makeTensorInfo(d,r.dtype),h=n.texData.get(f.dataId);return h.values=u,f}let a;return s?a=new sh(CQe,r.shape,o.shape,!1):a=new Zc($Qe,r.shape,o.shape),n.runWebGLProgram(a,[r,o],r.dtype)}const TQe={kernelName:J2,backendName:"webgl",kernelFunc:kQe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function IQe(t){const{inputs:e,backend:n}=t,{s0:r,s1:o}=e,s=n.readSync(r.dataId),i=n.readSync(o.dataId),a=Be(Array.from(s),Array.from(i));return n.makeTensorInfo([a.length],"int32",Int32Array.from(a))}const EQe={kernelName:OK,backendName:"webgl",kernelFunc:IQe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const NQe="return float(a != b);",U7=Bn({opSnippet:NQe,cpuKernelImpl:eYe,dtype:"bool"}),AQe={kernelName:x1,backendName:"webgl",kernelFunc:U7};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ny(t){const{inputs:e,backend:n}=t,{input:r}=e,o=n.texData.get(r.dataId);return Zr({inputs:{x:o.complexTensorInfos.real},backend:n})}const OQe={kernelName:$A,backendName:"webgl",kernelFunc:Ny};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const PQe="return float(int(x));";function RQe(t,e){const n=new ti(t.shape,PQe),r=e.runWebGLProgram(n,[t],"int32");return{dataId:r.dataId,shape:r.shape,dtype:r.dtype}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zI(t){const{inputs:e,backend:n,attrs:r}=t,{x:o}=e,{dtype:s}=r;if(s==="complex64"){if(o.dtype==="complex64")return Zr({inputs:{x:o},backend:n});const i=kn(o.shape),a=zI({inputs:{x:o},backend:n,attrs:{dtype:"float32"}}),l=Fl({inputs:{real:a,imag:i},backend:n});return i.dispose(),n.disposeIntermediateTensorInfo(a),l}if(o.dtype==="complex64"){const i=Ny({inputs:{input:o},backend:n}),a=zI({inputs:{x:i},backend:n,attrs:{dtype:s}});return n.disposeIntermediateTensorInfo(i),a}if(!TK(o.dtype,s)){const i=Zr({inputs:{x:o},backend:n});return{dataId:i.dataId,shape:i.shape,dtype:s}}if(n.shouldExecuteOnCPU([o])){const i=n.texData.get(o.dataId).values,[a,l,c]=_9e(i,o.shape,o.dtype,s);return n.makeTensorInfo(a,l,c)}if(s==="int32")return RQe(o,n);if(s==="bool"){const i=n.makeTensorInfo([],"bool",qn("bool",1)),l=U7({inputs:{a:o,b:i},backend:n});return n.disposeIntermediateTensorInfo(i),l}throw new Error(`Error in Cast: failed to cast ${o.dtype} to ${s}`)}const _Qe={kernelName:wg,backendName:"webgl",kernelFunc:zI};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const a3="return ceil(x);",DQe=ot({opSnippet:a3,packedOpSnippet:a3,cpuKernelImpl:D9e}),MQe={kernelName:Sg,backendName:"webgl",kernelFunc:DQe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class FQe{constructor(e){this.variableNames=["A"],this.customUniforms=[{name:"minVal",type:"float"},{name:"maxVal",type:"float"}],this.outputShape=e,this.userCode=`

      void main() {
        float value = getAAtOutCoords();
        if (isnan(value)) {
          setOutput(value);
          return;
        }

        setOutput(clamp(value, minVal, maxVal));
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class LQe{constructor(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"minVal",type:"float"},{name:"maxVal",type:"float"}],this.outputShape=e,this.userCode=`
      void main() {
        vec4 value = getAAtOutCoords();

        if (any(isnan(value))) {
          setOutput(value);
          return;
        }

        setOutput(clamp(value, vec4(minVal), vec4(maxVal)));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function jQe(t){const{inputs:e,backend:n,attrs:r}=t,{x:o}=e,{clipValueMin:s,clipValueMax:i}=r;let a;ee().getBool("WEBGL_PACK_CLIP")?a=new LQe(o.shape):a=new FQe(o.shape);const l=[[s],[i]];return n.runWebGLProgram(a,[o],o.dtype,l)}const BQe={kernelName:Cg,backendName:"webgl",kernelFunc:jQe};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class zQe{constructor(e){this.variableNames=["real","imag"],this.outputShape=e,this.userCode=`
      void main() {
        float re = abs(getRealAtOutCoords());
        float im = abs(getImagAtOutCoords());
        float mx = max(re, im);

        // sadly the length function in glsl is not underflow-safe
        // (at least not on Intel GPUs). So the safe solution is
        // to ensure underflow-safety in all cases.
        setOutput(
          mx == 0.0 ? 0.0 : mx * length(vec2(1, min(re, im)/mx))
        );
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function l3(t,e){return{dataId:e.dataId,dtype:e.dtype,shape:t.shape}}function WQe(t){const{inputs:e,backend:n}=t,{x:r}=e,o=n.texData.get(r.dataId),s=new zQe(r.shape),i=[l3(r,o.complexTensorInfos.real),l3(r,o.complexTensorInfos.imag)];return n.runWebGLProgram(s,i,i[0].dtype)}const VQe={kernelName:Hw,backendName:"webgl",kernelFunc:WQe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class UQe{constructor(e){this.outputShape=[],this.outputShape=ci(e,1),this.variableNames=e.map((i,a)=>`T${a}`);const n=new Array(e.length-1);n[0]=e[0][1];for(let i=1;i<n.length;i++)n[i]=n[i-1]+e[i][1];const r=[`if (yC < ${n[0]}) setOutput(getT0(yR, yC));`];for(let i=1;i<n.length;i++){const a=n[i-1];r.push(`else if (yC < ${n[i]}) setOutput(getT${i}(yR, yC-${a}));`)}const o=n.length,s=n[n.length-1];r.push(`else setOutput(getT${o}(yR, yC-${s}));`),this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int yR = coords.x;
        int yC = coords.y;

        ${r.join(`
        `)}
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class GQe{constructor(e,n){this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[],this.outputShape=ci(e,n);const r=this.outputShape,o=r.length,s=vt(o),i=dr("coords",o),a=["x","y","z","w","u","v"].slice(0,o);this.variableNames=e.map((m,g)=>`T${g}`);const l=new Array(e.length-1);l[0]=e[0][n];for(let m=1;m<l.length;m++)l[m]=l[m-1]+e[m][n];const c=a[n],u=a.slice(-2),d=a.join();let f=`if (${c} < ${l[0]}) {
        return getChannel(
            getT0(${d}), vec2(${u.join()}));
        }`;for(let m=1;m<l.length;m++){const g=l[m-1];f+=`
        if (${c} < ${l[m]}  && ${c} >= ${l[m-1]}) {
          return getChannel(
            getT${m}(${Ov(a,c,g)}),
            vec2(${Ov(u,c,g)}));
        }`}const h=l.length,p=l[l.length-1];f+=`
        return getChannel(
          getT${h}(${Ov(a,c,p)}),
          vec2(${Ov(u,c,p)}));`,this.userCode=`
      float getValue(${a.map(m=>"int "+m)}) {
        ${f}
      }

      void main() {
        ${s} coords = getOutputCoords();
        vec4 result = vec4(getValue(${i}), 0., 0., 0.);

        ${i[o-1]} = ${i[o-1]} + 1;
        if (${i[o-1]} < ${r[o-1]}) {
          result.g = getValue(${i});
        }

        ${i[o-2]} = ${i[o-2]} + 1;
        if (${i[o-2]} < ${r[o-2]}) {
          result.a = getValue(${i});
        }

        ${i[o-1]} = ${i[o-1]} - 1;
        if (${i[o-2]} < ${r[o-2]} &&
            ${i[o-1]} < ${r[o-1]}) {
          result.b = getValue(${i});
        }
        setOutput(result);
      }
    `}}function Ov(t,e,n){const r=t.indexOf(e);return t.map((s,i)=>i===r?`${s} - ${n}`:s).join()}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pS(t){const{inputs:e,backend:n}=t,{input:r}=e,o=n.texData.get(r.dataId);return Zr({inputs:{x:o.complexTensorInfos.imag},backend:n})}const HQe={kernelName:gA,backendName:"webgl",kernelFunc:pS};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Qh(t,e,n){const r=t[0].dtype;if(r==="complex64"){const h=t.map(v=>Ny({inputs:{input:v},backend:n})),p=t.map(v=>pS({inputs:{input:v},backend:n})),m=Qh(h,e,n),g=Qh(p,e,n),y=Fl({inputs:{real:m,imag:g},backend:n});return h.forEach(v=>n.disposeIntermediateTensorInfo(v)),p.forEach(v=>n.disposeIntermediateTensorInfo(v)),n.disposeIntermediateTensorInfo(m),n.disposeIntermediateTensorInfo(g),y}let o=n.shouldExecuteOnCPU(t);if(r==="string"&&(o=!0),o){const h=t.map(b=>{const C=[-1,ne(b.shape.slice(e))];return ge({inputs:{x:b},backend:n,attrs:{shape:C}})}),p=h.map(b=>({vals:n.readSync(b.dataId),shape:b.shape})),m=ci(h.map(b=>b.shape),1),g=h[0].shape[0]===1,y=M9e(p,m,r,g),v=ci(t.map(b=>b.shape),e),x=n.makeTensorInfo(v,r,y);return h.forEach(b=>n.disposeIntermediateTensorInfo(b)),x}const s=t.filter(h=>ne(h.shape)>0),i=ee().getBool("WEBGL_PACK_ARRAY_OPERATIONS")&&s[0].shape.length>1;if(s.length===1){const h=i?new ti(t[0].shape,Ta):new Ua(t[0].shape,Ta);return n.runWebGLProgram(h,t,r)}const a=ee().getNumber("WEBGL_MAX_TEXTURES_IN_SHADER");if(s.length>a){const h=[];for(let m=0;m<s.length;m+=a){const g=s.slice(m,m+a);h.push(Qh(g,e,n))}const p=Qh(h,e,n);for(const m of h)n.disposeIntermediateTensorInfo(m);return p}if(i){const h=new GQe(s.map(p=>p.shape),e);return n.runWebGLProgram(h,s,r)}const{tensors2D:l,outShape:c}=KQe(s,e,n),u=new UQe(l.map(h=>h.shape)),d=n.runWebGLProgram(u,l,r);l.forEach(h=>n.disposeIntermediateTensorInfo(h));const f=ge({inputs:{x:d},attrs:{shape:c},backend:n});return n.disposeIntermediateTensorInfo(d),f}function KQe(t,e,n){const r=ci(t.map(s=>s.shape),e);return{tensors2D:t.map(s=>ge({inputs:{x:s},attrs:{shape:[-1,ne(s.shape.slice(e))]},backend:n})),outShape:r}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function G7(t){const{inputs:e,backend:n,attrs:r}=t,{axis:o}=r,s=He(o,e[0].shape)[0],i=e.map(c=>c.shape);kO(i,s);const a=ci(e.map(c=>c.shape),s);if(ne(a)===0)return n.makeTensorInfo(a,e[0].dtype,[]);const l=e.filter(c=>ne(c.shape)>0);return l.length===1?Zr({inputs:{x:l[0]},backend:n}):Qh(l,s,n)}const qQe={kernelName:Kw,backendName:"webgl",kernelFunc:G7};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class H7{constructor(e,n=!1,r=null,o=!1,s=!1){this.variableNames=["x","W"],this.outputShape=e.outShape;const i=e.padInfo.top,a=e.padInfo.left,l=e.strideHeight,c=e.strideWidth,u=e.dilationHeight,d=e.dilationWidth,f=e.filterHeight,h=e.filterWidth,p=Math.floor(e.inChannels/4)*4,m=e.inChannels%4,g=e.dataFormat==="channelsLast",y=g?1:2,v=g?2:3,x=g?3:1;let b="",w="";r&&(o?b=`float activation(float a) {
          float b = getPreluActivationWeightsAtOutCoords();
          ${r}
        }`:s?b=`float activation(float a) {
          float b = getLeakyreluAlphaAtOutCoords();
          ${r}
        }`:b=`
          float activation(float x) {
            ${r}
          }
        `,w="result = activation(result);");const C=n?"result += getBiasAtOutCoords();":"";n&&this.variableNames.push("bias"),o&&this.variableNames.push("preluActivationWeights"),s&&this.variableNames.push("leakyreluAlpha"),this.userCode=`
      ${b}

      const ivec2 strides = ivec2(${l}, ${c});
      const ivec2 pads = ivec2(${i}, ${a});

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d2 = coords[${x}];

        ivec2 xRCCorner =
            ivec2(coords[${y}], coords[${v}]) * strides - pads;
        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        // Convolve x(?, ?, d1) with w(:, :, d1, d2) to get y(yR, yC, d2).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < ${f}; wR++) {
          int xR = xRCorner + wR * ${u};

          if (xR < 0 || xR >= ${e.inHeight}) {
            continue;
          }

          for (int wC = 0; wC < ${h}; wC++) {
            int xC = xCCorner + wC * ${d};

            if (xC < 0 || xC >= ${e.inWidth}) {
              continue;
            }

            for (int d1 = 0; d1 < ${p}; d1 += 4) {
              vec4 wValues = vec4(
                getW(wR, wC, d1, d2),
                getW(wR, wC, d1 + 1, d2),
                getW(wR, wC, d1 + 2, d2),
                getW(wR, wC, d1 + 3, d2)
              );

              if (${g}) {
                vec4 xValues = vec4(
                  getX(batch, xR, xC, d1),
                  getX(batch, xR, xC, d1 + 1),
                  getX(batch, xR, xC, d1 + 2),
                  getX(batch, xR, xC, d1 + 3)
                );
                dotProd += dot(xValues, wValues);
              } else {
                vec4 xValues = vec4(
                  getX(batch, d1, xR, xC),
                  getX(batch, d1 + 1, xR, xC),
                  getX(batch, d1 + 2, xR, xC),
                  getX(batch, d1 + 3, xR, xC)
                );
                dotProd += dot(xValues, wValues);
              }
            }

            if (${m===1}) {

              if (${g}) {
                dotProd +=
                    getX(batch, xR, xC, ${p}) *
                    getW(wR, wC, ${p}, d2);
              } else {
                dotProd +=
                    getX(batch, ${p}, xR, xC) *
                    getW(wR, wC, ${p}, d2);
              }

            } else if (${m===2}) {
              vec2 wValues = vec2(
                getW(wR, wC, ${p}, d2),
                getW(wR, wC, ${p} + 1, d2)
              );

              if (${g}) {
                vec2 xValues = vec2(
                  getX(batch, xR, xC, ${p}),
                  getX(batch, xR, xC, ${p} + 1)
                );
                dotProd += dot(xValues, wValues);
              } else {
                vec2 xValues = vec2(
                  getX(batch, ${p}, xR, xC),
                  getX(batch, ${p} + 1, xR, xC)
                );
                dotProd += dot(xValues, wValues);
              }

            } else if (${m===3}) {
              vec3 wValues = vec3(
                getW(wR, wC, ${p}, d2),
                getW(wR, wC, ${p} + 1, d2),
                getW(wR, wC, ${p} + 2, d2)
              );

              if (${g}) {
                vec3 xValues = vec3(
                  getX(batch, xR, xC, ${p}),
                  getX(batch, xR, xC, ${p} + 1),
                  getX(batch, xR, xC, ${p} + 2)
                );
                dotProd += dot(xValues, wValues);
              } else {
                vec3 xValues = vec3(
                  getX(batch, ${p}, xR, xC),
                  getX(batch, ${p} + 1, xR, xC),
                  getX(batch, ${p} + 2, xR, xC)
                );
                dotProd += dot(xValues, wValues);
              }

            }
          }
        }

        float result = dotProd;
        ${C}
        ${w}
        setOutput(result);
      }
    `}}class XQe{constructor(e){this.variableNames=["x","W"],this.outputShape=e.outShape;const n=e.padInfo.front,r=e.padInfo.top,o=e.padInfo.left,s=e.strideDepth,i=e.strideHeight,a=e.strideWidth,l=e.dilationDepth,c=e.dilationHeight,u=e.dilationWidth,d=e.filterDepth,f=e.filterHeight,h=e.filterWidth,p=Math.floor(e.inChannels/4)*4,m=e.inChannels%4;this.userCode=`
      const ivec3 strides = ivec3(${s}, ${i}, ${a});
      const ivec3 pads = ivec3(${n}, ${r}, ${o});

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int d2 = coords.u;

        ivec3 xFRCCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;
        int xFCorner = xFRCCorner.x;
        int xRCorner = xFRCCorner.y;
        int xCCorner = xFRCCorner.z;

        // Convolve x(?, ?, ?, d1) with w(:, :, :, d1, d2) to get
        // y(yF, yR, yC, d2). ? = to be determined. : = across all
        // values in that axis.
        float dotProd = 0.0;
        for (int wF = 0; wF < ${d}; wF++) {
          int xF = xFCorner + wF * ${l};

          if (xF < 0 || xF >= ${e.inDepth}) {
            continue;
          }

          for (int wR = 0; wR < ${f}; wR++) {
            int xR = xRCorner + wR * ${c};

            if (xR < 0 || xR >= ${e.inHeight}) {
              continue;
            }

            for (int wC = 0; wC < ${h}; wC++) {
              int xC = xCCorner + wC * ${u};

              if (xC < 0 || xC >= ${e.inWidth}) {
                continue;
              }

              for (int d1 = 0; d1 < ${p}; d1 += 4) {
                vec4 xValues = vec4(
                  getX(batch, xF, xR, xC, d1),
                  getX(batch, xF, xR, xC, d1 + 1),
                  getX(batch, xF, xR, xC, d1 + 2),
                  getX(batch, xF, xR, xC, d1 + 3)
                );
                vec4 wValues = vec4(
                  getW(wF, wR, wC, d1, d2),
                  getW(wF, wR, wC, d1 + 1, d2),
                  getW(wF, wR, wC, d1 + 2, d2),
                  getW(wF, wR, wC, d1 + 3, d2)
                );

                dotProd += dot(xValues, wValues);
              }

              if (${m===1}) {
                dotProd +=
                  getX(batch, xF, xR, xC, ${p}) *
                  getW(wF, wR, wC, ${p}, d2);
              } else if (${m===2}) {
                vec2 xValues = vec2(
                  getX(batch, xF, xR, xC, ${p}),
                  getX(batch, xF, xR, xC, ${p} + 1)
                );
                vec2 wValues = vec2(
                  getW(wF, wR, wC, ${p}, d2),
                  getW(wF, wR, wC, ${p} + 1, d2)
                );
                dotProd += dot(xValues, wValues);
              } else if (${m===3}) {
                vec3 xValues = vec3(
                  getX(batch, xF, xR, xC, ${p}),
                  getX(batch, xF, xR, xC, ${p} + 1),
                  getX(batch, xF, xR, xC, ${p} + 2)
                );
                vec3 wValues = vec3(
                  getW(wF, wR, wC, ${p}, d2),
                  getW(wF, wR, wC, ${p} + 1, d2),
                  getW(wF, wR, wC, ${p} + 2, d2)
                );
                dotProd += dot(xValues, wValues);
              }
            }
          }
        }
        setOutput(dotProd);
      }
    `}}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class K7{constructor(e,n=!1,r=null,o=!1,s=!1){this.variableNames=["x","W"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"pads",type:"ivec2"},{name:"strides",type:"ivec2"},{name:"dilations",type:"ivec2"},{name:"inDims",type:"ivec2"}],this.outputShape=e.outShape,this.enableShapeUniforms=Jn(this.outputShape.length);const i=e.padInfo.left,a=e.strideWidth,l=e.dilationWidth,c=e.filterHeight,u=e.filterWidth,d=u;let f=`
       int xR; int xC; int xCOffset;
       vec4 wTexel; vec4 previous; vec4 final;`;for(let g=0;g<u;g++)f+=`
           vec4 xTexelC${g*2};
           int xTexelC${g*2}Ready;
           vec4 xTexelC${g*2+1};
           int xTexelC${g*2+1}Ready;
           vec4 xC${g};`;f+=`
     for (int r = 0; r < ${c}; r++) {
      for (int d1 = 0; d1 < ${e.inChannels}; d1 += 2) {
       `;for(let g=0;g<u;g++)f+=`
           xTexelC${g*2} = vec4(0.0);
           xTexelC${g*2}Ready = 0;
           xTexelC${g*2+1} = vec4(0.0);
           xTexelC${g*2+1}Ready = 0;
           xC${g} = vec4(0.0);`;f+=`
         xR = xRCorner + r * dilations[0];
         if (xR >=0 && xR < inDims[0]) {
       `;for(let g=0;g<(d+1)/2;g++){const y=g*2;if(f+=`
           xC = xCCorner + ${y*l};
           `,a===1){if(y<u&&(i%2===1?(f+=`
                 xCOffset = xC + 1;
                 if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${y}Ready == 0) {
                   xTexelC${y} = getX(batch, xR, xCOffset, d1);

                   // Need to manually clear unused channels in case
                   // we're reading from recycled texture.
                   if (xCOffset + 1 >= inDims[1]) {
                     xTexelC${y}.zw = vec2(0.0);
                   }
                   xTexelC${y}Ready = 1;
                 }
               `,l===1&&y>0?f+=`
                 xC${y} = vec4(xTexelC${y-2}.zw, xTexelC${y}.xy);
                 `:f+=`
                   xCOffset = xC + 1 - 2;

                   if (xCOffset >= 0 && xCOffset < inDims[1]) {
                     previous = getX(batch, xR, xCOffset, d1);

                     // Need to manually clear unused channels in case
                     // we're reading from recycled texture.
                     if (xCOffset + 1 >= inDims[1]) {
                       previous.zw = vec2(0.0);
                     }

                     xC${y} = vec4(previous.zw, xTexelC${y}.xy);
                   } else {
                     xC${y} = vec4(0.0, 0.0, xTexelC${y}.xy);
                   }
                   `):f+=`
                 if (xC >= 0 && xC < inDims[1] && xTexelC${y}Ready == 0) {
                   xTexelC${y} = getX(batch, xR, xC, d1);
                   if (xC + 1 >= inDims[1]) {
                     xTexelC${y}.zw = vec2(0.0);
                   }
                   xTexelC${y}Ready = 1;
                 }

                 xC${y} = xTexelC${y};
                 `,y+1<u)){const v=i%2===0?W2(l):l;l%2===0&&i%2===1||l%2!==0&&i%2!==1?(f+=`
                   xCOffset = xC + imod(pads[1], 2) + ${v};

                   if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${y+1}Ready == 0) {
                     xTexelC${y+1} = getX(batch, xR, xCOffset, d1);

                     // Need to manually clear unused channels in case
                     // we're reading from recycled texture.
                     if (xCOffset + 1 >= inDims[1]) {
                       xTexelC${y+1}.zw = vec2(0.0);
                     }
                     xTexelC${y+1}Ready = 1;
                   }
                   `,l>1?f+=`
                     xCOffset -= 2;
                     if (xCOffset >= 0 && xCOffset < inDims[1]) {
                      previous = getX(batch, xR, xCOffset, d1);
                      xC${y+1} = vec4(previous.zw, xTexelC${y+1}.xy);
                     } else {
                      xC${y+1} = vec4(0.0, 0.0, xTexelC${y+1}.xy);
                     }
                     `:f+=`
                     xC${y+1} = vec4(xTexelC${y}.zw, xTexelC${y+1}.xy);
                     `):v===1?f+=`
                     xC${y+1} = xTexelC${y};
                     `:f+=`
                     xCOffset = xC + ${v};

                     if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${y+1}Ready == 0) {
                       xTexelC${y+1} = getX(batch, xR, xCOffset, d1);
                       if (xCOffset + 1 >= inDims[1]) {
                         xTexelC${y+1}.zw = vec2(0.0);
                       }
                       xTexelC${y+1}Ready = 1;
                     }

                     xC${y+1} = xTexelC${y+1};
                     `}}else y<u&&(i%2===1?(f+=`
                 xCOffset = xC + 1 - strides[1];
                 if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${y}Ready == 0) {
                   xTexelC${y} = getX(batch, xR, xCOffset, d1);
                   // Need to manually clear unused channels in case
                   // we're reading from recycled texture.
                   if (xCOffset + 1 >= inDims[1]) {
                     xTexelC${y}.zw = vec2(0.0);
                   }
                   xTexelC${y}Ready = 1;
                 }

                 if(xC + 1 >= 0 && xC + 1 < inDims[1] && xTexelC${y+1}Ready == 0) {
                   xTexelC${y+1} = getX(batch, xR, xC + 1, d1);
                   // Need to manually clear unused channels in case
                   // we're reading from recycled texture.
                   if (xC + 2 >= inDims[1]) {
                     xTexelC${y+1}.zw = vec2(0.0);
                   }
                   xTexelC${y+1}Ready = 1;
                 }

                 xC${y} = vec4(xTexelC${y}.zw, xTexelC${y+1}.zw);
               `,y+1<u&&(f+=`
                   final = vec4(0.0);
                   xCOffset = xC + 1 + strides[1];
                   if(xCOffset >= 0 && xCOffset < inDims[1]) {
                     final = getX(batch, xR, xCOffset, d1);
                   }
                   xC${y+1} = vec4(xTexelC${y+1}.xy, final.xy);
                 `)):(f+=`
                 if(xC >= 0 && xC < inDims[1] && xTexelC${y}Ready == 0) {
                   xTexelC${y} = getX(batch, xR, xC, d1);
                   if (xC + 1 >= inDims[1]) {
                     xTexelC${y}.zw = vec2(0.0);
                   }
                   xTexelC${y}Ready = 1;
                 }

                 xCOffset = xC + strides[1];
                 if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${y+1}Ready == 0) {
                   xTexelC${y+1} = getX(batch, xR, xCOffset, d1);
                   if (xCOffset + 1 >= inDims[1]) {
                     xTexelC${y+1}.zw = vec2(0.);
                   }
                   xTexelC${y+1}Ready = 1;
                 }

                 xC${y} = vec4(
                   xTexelC${y}.xy, xTexelC${y+1}.xy);
               `,y+1<u&&(f+=`
                   xC${y+1} = vec4(xTexelC${y}.zw, xTexelC${y+1}.zw);
                 `)));y<u&&(f+=`
             wTexel = getW(r, ${y}, d1, d2);
             dotProd += xC${y}.xxzz * vec4(wTexel.xy, wTexel.xy);
             if(d1 + 1 < ${e.inChannels}) {
               dotProd += xC${y}.yyww * vec4(wTexel.zw, wTexel.zw);
             }
           `,y+1<u&&(f+=`
               wTexel = getW(r, ${y+1}, d1, d2);
               dotProd += xC${y+1}.xxzz * vec4(wTexel.xy, wTexel.xy);
               if(d1 + 1 < ${e.inChannels}) {
                 dotProd += xC${y+1}.yyww * vec4(wTexel.zw, wTexel.zw);
               }
             `))}f+=`
     }
   `,f+=`
     }
   `,f+=`
     }
   `;let h="",p="";r&&(o?h=`vec4 activation(vec4 a) {
           vec4 b = getPreluActivationWeightsAtOutCoords();
           ${r}
         }`:s?h=`vec4 activation(vec4 a) {
           vec4 b = getLeakyreluAlphaAtOutCoords();
           ${r}
         }`:h=`vec4 activation(vec4 x) {
           ${r}
         }`,p="result = activation(result);");const m=n?"result += getBiasAtOutCoords();":"";n&&this.variableNames.push("bias"),o&&this.variableNames.push("preluActivationWeights"),s&&this.variableNames.push("leakyreluAlpha"),this.userCode=`
       ${h}

       void main() {
         ivec4 coords = getOutputCoords();
         int batch = coords.x;
         ivec2 xRCCorner = coords.yz * strides - pads;
         int d2 = coords.w;
         int xRCorner = xRCCorner.x;
         int xCCorner = xRCCorner.y;

         //intialize dotProd with a small epsilon seems to reduce GPU accuracy loss.
         vec4 dotProd = vec4(0.000000000000001);

         ${f}

         vec4 result = dotProd - vec4(0.000000000000001);
         ${m}
         ${p}
         setOutput(result);
       }
     `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class YQe{constructor(e,n){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"inputShape",type:"ivec4"},{name:"pad",type:"ivec2"},{name:"stride",type:"ivec2"},{name:"dilation",type:"ivec2"},{name:"inChannels",type:"int"},{name:"itemsPerBlockRow",type:"int"},{name:"outWidth",type:"int"}],this.outputShape=e,this.enableShapeUniforms=Jn(this.outputShape.length);const{dataFormat:r}=n,o=mr(),s=r==="channelsLast",i=s?1:2,a=s?2:3,l=this.enableShapeUniforms?"if(blockIndex < outShape[2] && pos < outShape[1]) {":`if(blockIndex < ${e[2]} && pos < ${e[1]}) {`;let c="";for(let u=0;u<=1;u++)for(let d=0;d<=1;d++)c+=`
          blockIndex = rc.z + ${d};
          pos = rc.y + ${u};

          ${l}
            offsetY = int(blockIndex / outWidth) * stride[0] - pad[0];
            d0 = offsetY + dilation[0] * (pos / itemsPerBlockRow);

            if(d0 < inputShape[${i}] && d0 >= 0) {
              // Use custom imod instead mod. On Intel GPU, mod may generate
              // unexpected value.
              // https://github.com/tensorflow/tfjs/issues/5447
              offsetX = imod(blockIndex, outWidth) * stride[1] - pad[1];
              d1 = offsetX + dilation[1] * (imod(pos, itemsPerBlockRow) /
                  inChannels);

              if(d1 < inputShape[${a}] && d1 >= 0) {

                ch = imod(pos, inChannels);

                if (${s}) {
                  innerDims = vec2(d1, ch);
                  result[${u*2+d}] = getChannel(
                    getA(rc.x, d0, int(innerDims.x),
                    int(innerDims.y)), innerDims);
                } else {
                  innerDims = vec2(d0, d1);
                  result[${u*2+d}] = getChannel(
                    getA(rc.x, ch, int(innerDims.x),
                    int(innerDims.y)), innerDims);
                }
              }
            }
          }
        `;this.userCode=`
      void main() {
        ivec3 rc = getOutputCoords();

        vec4 result = vec4(0);

        int blockIndex, pos, offsetY, d0, offsetX, d1, ch;
        vec2 innerDims;

        ${c}

        ${o.output} = result;
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function c0(t,e){const n=t.length;return n>=3?e?[...t.slice(0,-3),t[n-3]*t[n-2],t[n-1]]:[...t.slice(0,-3),t[n-3],t[n-2]*t[n-1]]:!e&&n===1&&t[0]>1?[t[0],1]:null}function q7({x:t,filter:e,convInfo:n,backend:r,bias:o=null,preluActivationWeights:s=null,leakyreluAlpha:i=0,activation:a=null}){const l=t.shape,c=r.texData.get(t.dataId),u=n.inChannels,d=l[0]*l[1]*l[2],f=n.outChannels,h=n.dataFormat==="channelsLast",p=!1,m=!1;let g;const y=[];if(s!=null){const b=c0(s.shape,h);b!=null&&(s=ge({inputs:{x:s},backend:r,attrs:{shape:b}}),y.push(s))}if(o!=null){const b=c0(o.shape,h);b!=null&&(o=ge({inputs:{x:o},backend:r,attrs:{shape:b}}),y.push(o))}if(!((d===1||f===1)&&u>B7)&&c.isPacked&&h&&c.texture!=null&&l[2]%2!==0&&dt(c.shape.slice(-3),l.slice(-3))){const b=l[0]*l[1]*(l[2]+1),w={dataId:t.dataId,shape:[1,b,n.inChannels],dtype:t.dtype},C=c.shape;c.shape=c.shape.slice(),c.shape[c.shape.length-2]++,M(a0(c.shape,w.shape),()=>`packed reshape ${c.shape} to ${w.shape} isn't free`);const $=ge({inputs:{x:e},backend:r,attrs:{shape:[1,n.inChannels,n.outChannels]}});y.push($);const T=l0({a:w,b:$,backend:r,transposeA:p,transposeB:m,bias:o,activation:a,preluActivationWeights:s,leakyreluAlpha:i}),I=r.texData.get(T.dataId);M(I.isPacked,()=>"batchMatMul result is expected to be packed"),c.shape=C,I.shape=n.outShape,g=Zr({inputs:{x:T},backend:r}),g.shape=n.outShape,y.push(T)}else{const b=n.outHeight*n.outWidth,w=ge({inputs:{x:t},backend:r,attrs:{shape:h?[n.batchSize,b,n.inChannels]:[n.batchSize,n.inChannels,b]}}),C=ge({inputs:{x:e},backend:r,attrs:{shape:[1,n.inChannels,n.outChannels]}}),$=l0({a:h?w:C,b:h?C:w,transposeA:!h,transposeB:m,backend:r,bias:o,activation:a,preluActivationWeights:s,leakyreluAlpha:i});g=ge({inputs:{x:$},backend:r,attrs:{shape:n.outShape}}),y.push(w),y.push(C),y.push($)}for(const b of y)r.disposeIntermediateTensorInfo(b);return g}function X7({x:t,filter:e,convInfo:n,backend:r,bias:o=null,preluActivationWeights:s=null,leakyreluAlpha:i=0,activation:a=null}){const{filterWidth:l,filterHeight:c,inChannels:u,outWidth:d,outHeight:f,dataFormat:h}=n,p=h==="channelsLast",m=l*c*u,g=f*d,y=[n.batchSize,m,g],v=!0,x=!1,b=[];if(s!=null){const O=c0(s.shape,p);O!=null&&(s=ge({inputs:{x:s},backend:r,attrs:{shape:O}}),b.push(s))}if(o!=null){const O=c0(o.shape,p);O!=null&&(o=ge({inputs:{x:o},backend:r,attrs:{shape:O}}),b.push(o))}const w=ge({inputs:{x:e},backend:r,attrs:{shape:[1,m,ne(e.shape)/m]}});b.push(w);const C=new YQe(y,n),$=[t.shape,[n.padInfo.top,n.padInfo.left],[n.strideHeight,n.strideWidth],[n.dilationHeight,n.dilationWidth],[n.inChannels],[n.filterWidth*n.inChannels],[n.outWidth]],T=r.runWebGLProgram(C,[t],"float32",$),I=ge({inputs:{x:T},backend:r,attrs:{shape:y}});b.push(T),b.push(I);const E=o!=null,N=s!=null,A=a==="leakyrelu",R=a?Dm(a,!0):null,P=new j7(p?I.shape:w.shape,p?w.shape:I.shape,p?[n.batchSize,g,n.outChannels]:[n.batchSize,n.outChannels,g],v,x,E,R,N,A),F=p?[I,w]:[w,I];if(o&&F.push(o),N&&F.push(s),A){const O=r.makeTensorInfo([],"float32",Nl(i,"float32"));F.push(O),b.push(O)}const _=r.runWebGLProgram(P,F,"float32"),L=ge({inputs:{x:_},backend:r,attrs:{shape:n.outShape}});b.push(_);for(const O of b)r.disposeIntermediateTensorInfo(O);return L}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function QQe(t){const{inputs:e,backend:n,attrs:r}=t,{x:o,filter:s}=e,{strides:i,pad:a,dataFormat:l,dilations:c,dimRoundingMode:u}=r,d=da(l),f=Ln(o.shape,s.shape,i,c,a,u,!1,d);let h;if(f.filterHeight===1&&f.filterWidth===1&&f.dilationHeight===1&&f.dilationWidth===1&&f.strideHeight===1&&f.strideWidth===1&&(f.padInfo.type==="SAME"||f.padInfo.type==="VALID"))h=q7({x:o,filter:s,convInfo:f,backend:n});else if(f.strideWidth<=2&&d==="channelsLast"&&ee().getBool("WEBGL_EXP_CONV")){const m=new K7(f),g=[[f.padInfo.top,f.padInfo.left],[f.strideHeight,f.strideWidth],[f.dilationHeight,f.dilationWidth],[f.inHeight,f.inWidth]];h=n.runWebGLProgram(m,[o,s],"float32",g)}else if(ee().getBool("WEBGL_CONV_IM2COL"))h=X7({x:o,filter:s,convInfo:f,backend:n});else{const m=new H7(f);h=n.runWebGLProgram(m,[o,s],"float32")}const p=ge({inputs:{x:h},backend:n,attrs:{shape:f.outShape}});return n.disposeIntermediateTensorInfo(h),p}const ZQe={kernelName:qw,backendName:"webgl",kernelFunc:QQe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class JQe{constructor(e){this.variableNames=["x","dy"],this.outputShape=e.filterShape;const n=e.strideHeight,r=e.strideWidth,o=e.padInfo.top,s=e.padInfo.left,i=e.dataFormat==="channelsLast";this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int wR = coords.x;
        int wC = coords.y;
        int d1 = coords.z;
        int d2 = coords.w;

        // Convolve x(?, ?, d1) with dy(:, :, d2) to get dw(wR, wC, d1, d2).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;

        for (int b = 0; b < ${e.batchSize}; b++) {
          for (int yR = 0; yR < ${e.outHeight}; yR++) {
            int xR = wR + yR * ${n} - ${o};

            if (xR < 0 || xR >= ${e.inHeight}) {
              continue;
            }

            for (int yC = 0; yC < ${e.outWidth}; yC++) {
              int xC = wC + yC * ${r} - ${s};

              if (xC < 0 || xC >= ${e.inWidth}) {
                continue;
              }

              ${i?`float dyValue = getDy(b, yR, yC, d2);
              float xValue = getX(b, xR, xC, d1);
              dotProd += (xValue * dyValue);`:`float dyValue = getDy(b, d2, yR, yC);
              float xValue = getX(b, d1, xR, xC);
              dotProd += (xValue * dyValue);`}
            }
          }
        }
        setOutput(dotProd);
      }
    `}}class eZe{constructor(e){this.variableNames=["dy","W"],this.outputShape=e.inShape;const n=e.filterHeight,r=e.filterWidth,o=e.strideHeight,s=e.strideWidth,i=e.dataFormat==="channelsLast",a=n-1-e.padInfo.top,l=r-1-e.padInfo.left,c=i?1:2,u=i?2:3,d=i?3:1;this.userCode=`
      const ivec2 pads = ivec2(${a}, ${l});

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d1 = coords[${d}];

        ivec2 dyCorner = ivec2(coords[${c}], coords[${u}]) - pads;
        int dyRCorner = dyCorner.x;
        int dyCCorner = dyCorner.y;

        // Convolve dy(?, ?, d2) with w(:, :, d1, d2) to compute dx(xR, xC, d1).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < ${n}; wR++) {
          float dyR = float(dyRCorner + wR) / ${o}.0;

          if (dyR < 0.0 || dyR >= ${e.outHeight}.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          int wRPerm = ${n} - 1 - wR;

          for (int wC = 0; wC < ${r}; wC++) {
            float dyC = float(dyCCorner + wC) / ${s}.0;

            if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            int wCPerm = ${r} - 1 - wC;

            for (int d2 = 0; d2 < ${e.outChannels}; d2++) {

              if (${i}) {
                float xValue = getDy(batch, idyR, idyC, d2);
                float wValue = getW(wRPerm, wCPerm, d1, d2);
                dotProd += xValue * wValue;
              } else {
                float xValue = getDy(batch, d2, idyR, idyC);
                float wValue = getW(wRPerm, wCPerm, d1, d2);
                dotProd += xValue * wValue;
              }

            }
          }
        }
        setOutput(dotProd);
      }
    `}}class tZe{constructor(e){this.variableNames=["x","dy"],this.outputShape=e.filterShape;const n=e.strideDepth,r=e.strideHeight,o=e.strideWidth,s=e.padInfo.front,i=e.padInfo.top,a=e.padInfo.left;this.userCode=`
      void main() {
        ivec5 coords = getOutputCoords();
        int wF = coords.x;
        int wR = coords.y;
        int wC = coords.z;
        int d1 = coords.w;
        int d2 = coords.u;

        float dotProd = 0.0;

        for (int b = 0; b < ${e.batchSize}; b++) {
          for (int yF = 0; yF < ${e.outDepth}; yF++) {
            int xF = wF + yF * ${n} - ${s};

            if (xF < 0 || xF >= ${e.inDepth}) {
              continue;
            }

            for (int yR = 0; yR < ${e.outHeight}; yR++) {
              int xR = wR + yR * ${r} - ${i};

              if (xR < 0 || xR >= ${e.inHeight}) {
                continue;
              }

              for (int yC = 0; yC < ${e.outWidth}; yC++) {
                int xC = wC + yC * ${o} - ${a};

                if (xC < 0 || xC >= ${e.inWidth}) {
                  continue;
                }

                float dyValue = getDy(b, yF, yR, yC, d2);
                float xValue = getX(b, xF, xR, xC, d1);
                dotProd += (xValue * dyValue);
              }
            }
          }
        }
        setOutput(dotProd);
      }
    `}}class nZe{constructor(e){this.variableNames=["dy","W"],this.outputShape=e.inShape;const n=e.filterDepth,r=e.filterHeight,o=e.filterWidth,s=e.strideDepth,i=e.strideHeight,a=e.strideWidth,l=n-1-e.padInfo.front,c=r-1-e.padInfo.top,u=o-1-e.padInfo.left;this.userCode=`
      const ivec3 pads = ivec3(${l}, ${c}, ${u});

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int d1 = coords.u;


        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;
        int dyFCorner = dyCorner.x;
        int dyRCorner = dyCorner.y;
        int dyCCorner = dyCorner.z;

        float dotProd = 0.0;
        for (int wF = 0; wF < ${n}; wF++) {
          float dyF = float(dyFCorner + wF) / ${s}.0;

          if (dyF < 0.0 || dyF >= ${e.outDepth}.0 || fract(dyF) > 0.0) {
            continue;
          }
          int idyF = int(dyF);

          int wFPerm = ${n} - 1 - wF;

          for (int wR = 0; wR < ${r}; wR++) {
            float dyR = float(dyRCorner + wR) / ${i}.0;

            if (dyR < 0.0 || dyR >= ${e.outHeight}.0 ||
              fract(dyR) > 0.0) {
              continue;
            }
            int idyR = int(dyR);

            int wRPerm = ${r} - 1 - wR;

            for (int wC = 0; wC < ${o}; wC++) {
              float dyC = float(dyCCorner + wC) / ${a}.0;

              if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                  fract(dyC) > 0.0) {
                continue;
              }
              int idyC = int(dyC);

              int wCPerm = ${o} - 1 - wC;

              for (int d2 = 0; d2 < ${e.outChannels}; d2++) {
                float xValue = getDy(batch, idyF, idyR, idyC, d2);
                float wValue = getW(wFPerm, wRPerm, wCPerm, d1, d2);
                dotProd += xValue * wValue;
              }
            }
          }
        }
        setOutput(dotProd);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function rZe(t){const{inputs:e,backend:n,attrs:r}=t,{x:o,dy:s}=e,{strides:i,pad:a,dataFormat:l,dimRoundingMode:c,filterShape:u}=r,d=da(l),f=Ln(o.shape,u,i,1,a,c,!1,d),h=new JQe(f);return n.runWebGLProgram(h,[o,s],"float32")}const oZe={kernelName:tA,backendName:"webgl",kernelFunc:rZe};/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class sZe{constructor(e){this.variableNames=["dy","W"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"strides",type:"vec2"}],this.outputShape=e.inShape,this.enableShapeUniforms=Jn(this.outputShape.length);const n=e.filterHeight,r=e.filterWidth,o=n-1-e.padInfo.top,s=r-1-e.padInfo.left;this.userCode=`
      const ivec2 pads = ivec2(${o}, ${s});

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d1 = coords[3];

        ivec2 dyCorner = ivec2(coords[1], coords[2]) - pads;
        int dyRCorner = dyCorner.x;
        int dyCCorner = dyCorner.y;

        vec4 result = vec4(0.);
        for (int wR = 0; wR < ${n}; wR++) {
          float dyR = float(dyRCorner + wR) / strides[0];
          if (dyR < 0.0 || dyR >= ${e.outHeight}.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);
          int wRPerm = ${n} - 1 - wR;

          for (int wC = 0; wC < ${r}; wC++) {
            int wCPerm = ${r} - 1 - wC;

            float dyC = float(dyCCorner + wC) / strides[1];
            bool idyCVal = (dyC >= 0.0) && (dyC < ${e.outWidth}.0)
              && (fract(dyC) == 0.0);
            int idyC = int(dyC);

            float dyC2 = float(dyCCorner + wC + 1) / strides[1];
            bool idyCVal2 = (dyC2 >= 0.0) && (dyC2 < ${e.outWidth}.0)
              && (fract(dyC2) == 0.0);
            int idyC2 = int(dyC2);

            if (idyCVal && idyCVal2) {
              for (int d2 = 0; d2 < ${e.outChannels}; d2 += 2) {
                vec4 wValue = getW(wRPerm, wCPerm, d1, d2);
                vec4 dySample = getDy(batch, idyR, idyC, d2);
                vec4 dySample2 = (idyC / 2 == idyC2 / 2) ?
                  dySample : getDy(batch, idyR, idyC2, d2);

                vec2 dyValue = mod(float(idyC), 2.) == 0. ?
                  dySample.xy : dySample.zw;
                result.xy += vec2(dot(dyValue, wValue.xy),
                  dot(dyValue, wValue.zw));

                dyValue = mod(float(idyC2), 2.) == 0. ?
                  dySample2.xy : dySample2.zw;
                result.zw += vec2(dot(dyValue, wValue.xy),
                  dot(dyValue, wValue.zw));
              }
            } else if (idyCVal) {
              for (int d2 = 0; d2 < ${e.outChannels}; d2 += 2) {
                vec4 wValue = getW(wRPerm, wCPerm, d1, d2);
                vec4 dySample = getDy(batch, idyR, idyC, d2);
                vec2 dyValue = mod(float(idyC), 2.) == 0. ?
                  dySample.xy : dySample.zw;
                result.xy += vec2(dot(dyValue, wValue.xy),
                  dot(dyValue, wValue.zw));
              }
            } else if (idyCVal2) {
              for (int d2 = 0; d2 < ${e.outChannels}; d2 += 2) {
                vec4 wValue = getW(wRPerm, wCPerm, d1, d2);
                vec4 dySample = getDy(batch, idyR, idyC2, d2);
                vec2 dyValue = mod(float(idyC2), 2.) == 0. ?
                  dySample.xy : dySample.zw;
                result.zw += vec2(dot(dyValue, wValue.xy),
                  dot(dyValue, wValue.zw));
              }
            }
          }
        }
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function iZe(t){const{inputs:e,backend:n,attrs:r}=t,{dy:o,filter:s}=e,{inputShape:i,strides:a,pad:l,dataFormat:c,dimRoundingMode:u}=r,d=da(c),f=Ln(i,s.shape,a,1,l,u,!1,d);if(ee().getBool("WEBGL_PACK_CONV2DTRANSPOSE")&&d==="channelsLast"){const h=[[f.strideHeight,f.strideWidth]],p=new sZe(f);return n.runWebGLProgram(p,[o,s],"float32",h)}else{const h=new eZe(f);return n.runWebGLProgram(h,[o,s],"float32")}}const aZe={kernelName:Xw,backendName:"webgl",kernelFunc:iZe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lZe(t){const{inputs:e,backend:n,attrs:r}=t,{x:o,filter:s}=e,{strides:i,pad:a,dilations:l}=r,c=Al(o.shape,s.shape,i,l,a),u=new XQe(c);return n.runWebGLProgram(u,[o,s],"float32")}const cZe={kernelName:Yw,backendName:"webgl",kernelFunc:lZe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function uZe(t){const{inputs:e,backend:n,attrs:r}=t,{x:o,dy:s}=e,{strides:i,pad:a,filterShape:l}=r,c=Al(o.shape,l,i,1,a),u=new tZe(c);return n.runWebGLProgram(u,[o,s],"float32")}const dZe={kernelName:nA,backendName:"webgl",kernelFunc:uZe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fZe(t){const{inputs:e,backend:n,attrs:r}=t,{dy:o,filter:s}=e,{pad:i,strides:a,inputShape:l}=r,c=Al(l,s.shape,a,1,i),u=new nZe(c);return n.runWebGLProgram(u,[o,s],"float32")}const hZe={kernelName:rA,backendName:"webgl",kernelFunc:fZe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const pZe=ih+`
  return cos(x);
`,mZe=`
  vec4 result = cos(x);
  bvec4 isNaN = isnan(x);
  ${vu}
  return result;
`,gZe=ot({opSnippet:pZe,packedOpSnippet:mZe}),yZe={kernelName:$g,backendName:"webgl",kernelFunc:gZe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const vZe=`
  float e2x = exp(-x);
  return (e2x + 1.0 / e2x) / 2.0;
`,xZe=ot({opSnippet:vZe}),bZe={kernelName:kg,backendName:"webgl",kernelFunc:xZe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class wZe{constructor(e,n,r,o,s){this.variableNames=["Image","Boxes","BoxInd"],this.outputShape=[];const[i,a,l,c]=e,[u]=n,[d,f]=r;this.outputShape=[u,d,f,c];const h=o==="bilinear"?1:0,[p,m]=[`${a-1}.0`,`${l-1}.0`],[g,y,v]=d>1?[`${(a-1)/(d-1)}`,"(y2-y1) * height_ratio",`y1*${p} + float(y)*(height_scale)`]:["0.0","0.0",`0.5 * (y1+y2) * ${p}`],[x,b,w]=f>1?[`${(l-1)/(f-1)}`,"(x2-x1) * width_ratio",`x1*${m} + float(x)*(width_scale)`]:["0.0","0.0",`0.5 * (x1+x2) * ${m}`];this.userCode=`
      const float height_ratio = float(${g});
      const float width_ratio = float(${x});
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int y = coords[1];
        int x = coords[2];
        int d = coords[3];

        // get box vals
        float y1 = getBoxes(b,0);
        float x1 = getBoxes(b,1);
        float y2 = getBoxes(b,2);
        float x2 = getBoxes(b,3);

        // get image in batch index
        int bInd = round(getBoxInd(b));
        if(bInd < 0 || bInd >= ${i}) {
          return;
        }

        float height_scale = ${y};
        float width_scale = ${b};

        float in_y = ${v};
        if( in_y < 0.0 || in_y > ${p} ) {
          setOutput(float(${s}));
          return;
        }
        float in_x = ${w};
        if( in_x < 0.0 || in_x > ${m} ) {
          setOutput(float(${s}));
          return;
        }

        vec2 sourceFracIndexCR = vec2(in_x,in_y);
        if(${h} == 1) {
          // Compute the four integer indices.
          ivec2 sourceFloorCR = ivec2(sourceFracIndexCR);
          ivec2 sourceCeilCR = ivec2(ceil(sourceFracIndexCR));

          float topLeft = getImage(b, sourceFloorCR.y, sourceFloorCR.x, d);
          float bottomLeft = getImage(b, sourceCeilCR.y, sourceFloorCR.x, d);
          float topRight = getImage(b, sourceFloorCR.y, sourceCeilCR.x, d);
          float bottomRight = getImage(b, sourceCeilCR.y, sourceCeilCR.x, d);

          vec2 fracCR = sourceFracIndexCR - vec2(sourceFloorCR);

          float top = topLeft + (topRight - topLeft) * fracCR.x;
          float bottom = bottomLeft + (bottomRight - bottomLeft) * fracCR.x;
          float newValue = top + (bottom - top) * fracCR.y;
          setOutput(newValue);
        } else {
          // Compute the coordinators of nearest neighbor point.
          ivec2 sourceNearestCR = ivec2(floor(
            sourceFracIndexCR + vec2(0.5,0.5)));
          float newValue = getImage(b, sourceNearestCR.y, sourceNearestCR.x, d);
          setOutput(newValue);
        }
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const SZe=t=>{const{inputs:e,backend:n,attrs:r}=t,{image:o,boxes:s,boxInd:i}=e,{cropSize:a,method:l,extrapolationValue:c}=r,u=new wZe(o.shape,s.shape,a,l,c);return n.runWebGLProgram(u,[o,s,i],"float32")},CZe={kernelName:sA,backendName:"webgl",kernelFunc:SZe};var Fm;(function(t){t.Prod="*",t.Sum="+"})(Fm||(Fm={}));class c3{constructor(e,n,r,o){this.op=e,this.outputShape=n,this.variableNames=["x"],this.customUniforms=[{name:"index",type:"float"}];const s=this.outputShape.length,i=this.op===Fm.Prod?"1.0":"0.0",a=r?i:`getX(${u3(s,"coords",this.op)})`,l=this.outputShape[this.outputShape.length-1];let c="",u="";r?(c=o?`end != ${l-1}`:"end != 0",u=o?"end + 1":"end - 1"):(c=o?`end + pow2 < ${l}`:"end >= pow2",u=o?"end + pow2":"end - pow2"),this.userCode=`
      void main() {
        ${vt(s)} coords = getOutputCoords();
        int end = ${d3(s,"coords",this.op)};
        float val = ${a};
        int pow2 = int(pow(2.0, index));
        if (${c}) {
          int idx = ${u};
          ${d3(s,"coords",this.op)} = idx;
          val ${this.op}= getX(${u3(s,"coords",this.op)});
        }
        setOutput(val);
      }
    `}}function u3(t,e,n){if(t===1)return`${e}`;if(t===2)return`${e}.x, ${e}.y`;if(t===3)return`${e}.x, ${e}.y, ${e}.z`;if(t===4)return`${e}.x, ${e}.y, ${e}.z, ${e}.w`;throw new Error(`Cumulative ${n} for rank ${t} is not yet supported`)}function d3(t,e,n){if(t===1)return`${e}`;if(t===2)return`${e}.y`;if(t===3)return`${e}.z`;if(t===4)return`${e}.w`;throw new Error(`Cumulative ${n} for rank ${t} is not yet supported`)}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Y7(t,e,n,r,o,s){const i=e.shape.length,a=Wt([r],i);let l=e;a!=null&&(l=pr({inputs:{x:e},backend:n,attrs:{perm:a}}));const c=nn(1,i)[0];if(c!==i-1)throw new Error(`WebGL cumprod shader expects an inner-most axis=${e.shape.length-1} but got axis=${r}`);const u=l.shape[c];let d=Zr({inputs:{x:l},backend:n});for(let f=0;f<=Math.ceil(Math.log2(u))-1;f++){const h=new c3(t,l.shape,!1,s),p=[[f]],m=d;d=n.runWebGLProgram(h,[d],d.dtype,p),n.disposeIntermediateTensorInfo(m)}if(o){const f=new c3(t,l.shape,o,s),h=d;d=n.runWebGLProgram(f,[d],d.dtype),n.disposeIntermediateTensorInfo(h)}if(a!=null){const f=Ol(a),h=pr({inputs:{x:d},backend:n,attrs:{perm:f}});return n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(l),h}return d}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $Ze(t){const{inputs:e,backend:n,attrs:r}=t,{x:o}=e,{axis:s,exclusive:i,reverse:a}=r;return Y7(Fm.Prod,o,n,s,i,a)}const kZe={kernelName:oA,backendName:"webgl",kernelFunc:$Ze};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function TZe(t){const{inputs:e,backend:n,attrs:r}=t,{x:o}=e,{axis:s,exclusive:i,reverse:a}=r;return Y7(Fm.Sum,o,n,s,i,a)}const IZe={kernelName:Qw,backendName:"webgl",kernelFunc:TZe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function EZe(t){const{inputs:e,backend:n,attrs:r}=t,{x:o,weights:s}=e,{size:i,binaryOutput:a}=r;if(o.shape.length===1){const l=n.readSync(o.dataId),c=n.readSync(s.dataId),u=A7(l,c,s.dtype,s.shape,i);return n.makeTensorInfo([i],s.dtype,u)}else if(o.shape.length===2){const l=n.bufferSync(o),c=n.bufferSync(s),u=P9e(l,c,i,a);return n.makeTensorInfo(u.shape,s.dtype,u.values)}throw new Error(`Error in denseBincount: input must be at most rank 2, but got rank${o.shape.length}.`)}const NZe={kernelName:iA,backendName:"webgl",kernelFunc:EZe};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class AZe{constructor(e,n,r){this.variableNames=["x"],this.outputShape=[],this.outputShape=e,this.blockSize=n,this.dataFormat=r,this.userCode=`
    void main() {
      ivec4 coords = getOutputCoords();
      int b = coords[0];
      int h = ${this.getHeightCoordString()};
      int w = ${this.getWidthCoordString()};
      int d = ${this.getDepthCoordString()};

      int in_h = h / ${n};
      int offset_h = imod(h, ${n});
      int in_w = w / ${n};
      int offset_w = imod(w, ${n});
      int offset_d = (offset_h * ${n} + offset_w) *
        ${this.getOutputDepthSize()};
      int in_d = d + offset_d;

      float result = ${this.getInputSamplingString()};
      setOutput(result);
    }
  `}getHeightCoordString(){return this.dataFormat==="NHWC"?"coords[1]":"coords[2]"}getWidthCoordString(){return this.dataFormat==="NHWC"?"coords[2]":"coords[3]"}getDepthCoordString(){return this.dataFormat==="NHWC"?"coords[3]":"coords[1]"}getOutputDepthSize(){return this.dataFormat==="NHWC"?this.outputShape[3]:this.outputShape[1]}getInputSamplingString(){return this.dataFormat==="NHWC"?"getX(b, in_h, in_w, in_d)":"getX(b, in_d, in_h, in_w)"}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function OZe(t){const{inputs:e,backend:n,attrs:r}=t,{x:o}=e,{blockSize:s,dataFormat:i}=r,a=o.shape[0],l=i==="NHWC"?o.shape[1]:o.shape[2],c=i==="NHWC"?o.shape[2]:o.shape[3],u=i==="NHWC"?o.shape[3]:o.shape[1],d=l*s,f=c*s,h=u/(s*s),p=i==="NHWC"?[a,d,f,h]:[a,h,d,f],m=new AZe(p,s,i);return n.runWebGLProgram(m,[o],o.dtype)}const PZe={kernelName:aA,backendName:"webgl",kernelFunc:OZe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Q7{constructor(e,n=!1,r=null,o=!1,s=!1){this.variableNames=["x","W"],this.customUniforms=[{name:"pads",type:"ivec2"},{name:"strides",type:"ivec2"},{name:"dilations",type:"ivec2"},{name:"inDims",type:"ivec2"}],this.outputShape=e.outShape,this.enableShapeUniforms=Jn(this.outputShape.length);const i=e.filterHeight,a=e.filterWidth,l=e.outChannels/e.inChannels;let c="",u="";r&&(o?c=`float activation(float a) {
          float b = getPreluActivationWeightsAtOutCoords();
          ${r}
        }`:s?c=`float activation(float a) {
          float b = getLeakyreluAlphaAtOutCoords();
          ${r}
        }`:c=`
          float activation(float x) {
            ${r}
          }
        `,u="result = activation(result);");const d=n?"result += getBiasAtOutCoords();":"";n&&this.variableNames.push("bias"),o&&this.variableNames.push("preluActivationWeights"),s&&this.variableNames.push("leakyreluAlpha"),this.userCode=`
      ${c}

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords.x;
        ivec2 xRCCorner = coords.yz * strides - pads;
        int d2 = coords.w;
        int d1 = d2 / ${l};
        int q = d2 - d1 * ${l};

        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        // Convolve x(?, ?, d1) with w(:, :, d1, q) to get y(yR, yC, d2).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        // TO DO(dsmilkov): Flatten the two for loops and vec4 the operations.
        for (int wR = 0; wR < ${i}; wR++) {
          int xR = xRCorner + wR * dilations[0];

          if (xR < 0 || xR >= inDims[0]) {
            continue;
          }

          for (int wC = 0; wC < ${a}; wC++) {
            int xC = xCCorner + wC * dilations[1];

            if (xC < 0 || xC >= inDims[1]) {
              continue;
            }

            float xVal = getX(batch, xR, xC, d1);
            float wVal = getW(wR, wC, d1, q);
            dotProd += xVal * wVal;
          }
        }

        float result = dotProd;
        ${d}
        ${u}
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Z7{constructor(e,n=!1,r=null,o=!1,s=!1){this.variableNames=["x","W"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"pads",type:"ivec2"},{name:"strides",type:"ivec2"},{name:"dilations",type:"ivec2"},{name:"inDims",type:"ivec2"}],this.outputShape=e.outShape,this.enableShapeUniforms=Jn(this.outputShape.length);const i=e.outChannels/e.inChannels,a=e.padInfo.left,l=e.strideWidth,c=e.dilationWidth,u=e.filterHeight,d=e.filterWidth,f=d;let h=`
      int xR; int xC; int xCOffset;
      vec4 wTexel; vec4 previous; vec4 final;`;for(let y=0;y<d;y++)h+=`
          vec4 xTexelC${y*2};
          int xTexelC${y*2}Ready;
          vec4 xTexelC${y*2+1};
          int xTexelC${y*2+1}Ready;
          vec4 xC${y};`;h+=`
    for (int r = 0; r < ${u}; r++) {
      `;for(let y=0;y<d;y++)h+=`
          xTexelC${y*2} = vec4(0.0);
          xTexelC${y*2}Ready = 0;
          xTexelC${y*2+1} = vec4(0.0);
          xTexelC${y*2+1}Ready = 0;
          xC${y} = vec4(0.0);`;h+=`
        xR = xRCorner + r * dilations[0];
        if (xR >=0 && xR < inDims[0]) {
      `;for(let y=0;y<(f+1)/2;y++){const v=y*2;if(h+=`
          xC = xCCorner + ${v*c};
          `,l===1){if(v<d&&(a%2===1?(h+=`
                xCOffset = xC + 1;
                if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${v}Ready == 0) {
                  xTexelC${v} = getX(batch, xR, xCOffset, d1);

                  // Need to manually clear unused channels in case
                  // we're reading from recycled texture.
                  if (xCOffset + 1 >= inDims[1]) {
                    xTexelC${v}.zw = vec2(0.0);
                  }
                  xTexelC${v}Ready = 1;
                }
              `,c===1&&v>0?h+=`
                xC${v} = vec4(xTexelC${v-2}.zw, xTexelC${v}.xy);
                `:h+=`
                  xCOffset = xC + 1 - 2;

                  if (xCOffset >= 0 && xCOffset < inDims[1]) {
                    previous = getX(batch, xR, xCOffset, d1);

                    // Need to manually clear unused channels in case
                    // we're reading from recycled texture.
                    if (xCOffset + 1 >= inDims[1]) {
                      previous.zw = vec2(0.0);
                    }

                    xC${v} = vec4(previous.zw, xTexelC${v}.xy);
                  } else {
                    xC${v} = vec4(0.0, 0.0, xTexelC${v}.xy);
                  }
                  `):h+=`
                if (xC >= 0 && xC < inDims[1] && xTexelC${v}Ready == 0) {
                  xTexelC${v} = getX(batch, xR, xC, d1);
                  if (xC + 1 >= inDims[1]) {
                    xTexelC${v}.zw = vec2(0.0);
                  }
                  xTexelC${v}Ready = 1;
                }

                xC${v} = xTexelC${v};
                `,v+1<d)){const x=a%2===0?W2(c):c;c%2===0&&a%2===1||c%2!==0&&a%2!==1?(h+=`
                  xCOffset = xC + imod(pads[1], 2) + ${x};

                  if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${v+1}Ready == 0) {
                    xTexelC${v+1} = getX(batch, xR, xCOffset, d1);

                    // Need to manually clear unused channels in case
                    // we're reading from recycled texture.
                    if (xCOffset + 1 >= inDims[1]) {
                      xTexelC${v+1}.zw = vec2(0.0);
                    }
                    xTexelC${v+1}Ready = 1;
                  }
                  `,c>1?h+=`
                    xCOffset -= 2;
                    if (xCOffset >= 0 && xCOffset < inDims[1]) {
                     previous = getX(batch, xR, xCOffset, d1);
                     xC${v+1} = vec4(previous.zw, xTexelC${v+1}.xy);
                    } else {
                     xC${v+1} = vec4(0.0, 0.0, xTexelC${v+1}.xy);
                    }
                    `:h+=`
                    xC${v+1} = vec4(xTexelC${v}.zw, xTexelC${v+1}.xy);
                    `):x===1?h+=`
                    xC${v+1} = xTexelC${v};
                    `:h+=`
                    xCOffset = xC + ${x};

                    if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${v+1}Ready == 0) {
                      xTexelC${v+1} = getX(batch, xR, xCOffset, d1);
                      if (xCOffset + 1 >= inDims[1]) {
                        xTexelC${v+1}.zw = vec2(0.0);
                      }
                      xTexelC${v+1}Ready = 1;
                    }

                    xC${v+1} = xTexelC${v+1};
                    `}}else v<d&&(a%2===1?(h+=`
                xCOffset = xC + 1 - strides[1];
                if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${v}Ready == 0) {
                  xTexelC${v} = getX(batch, xR, xCOffset, d1);
                  // Need to manually clear unused channels in case
                  // we're reading from recycled texture.
                  if (xCOffset + 1 >= inDims[1]) {
                    xTexelC${v}.zw = vec2(0.0);
                  }
                  xTexelC${v}Ready = 1;
                }

                if(xC + 1 >= 0 && xC + 1 < inDims[1] && xTexelC${v+1}Ready == 0) {
                  xTexelC${v+1} = getX(batch, xR, xC + 1, d1);
                  // Need to manually clear unused channels in case
                  // we're reading from recycled texture.
                  if (xC + 2 >= inDims[1]) {
                    xTexelC${v+1}.zw = vec2(0.0);
                  }
                  xTexelC${v+1}Ready = 1;
                }

                xC${v} = vec4(xTexelC${v}.zw, xTexelC${v+1}.zw);
              `,v+1<d&&(h+=`
                  final = vec4(0.0);
                  xCOffset = xC + 1 + strides[1];
                  if(xCOffset >= 0 && xCOffset < inDims[1]) {
                    final = getX(batch, xR, xCOffset, d1);
                  }
                  xC${v+1} = vec4(xTexelC${v+1}.xy, final.xy);
                `)):(h+=`
                if(xC >= 0 && xC < inDims[1] && xTexelC${v}Ready == 0) {
                  xTexelC${v} = getX(batch, xR, xC, d1);
                  if (xC + 1 >= inDims[1]) {
                    xTexelC${v}.zw = vec2(0.0);
                  }
                  xTexelC${v}Ready = 1;
                }

                xCOffset = xC + strides[1];
                if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${v+1}Ready == 0) {
                  xTexelC${v+1} = getX(batch, xR, xCOffset, d1);
                  if (xCOffset + 1 >= inDims[1]) {
                    xTexelC${v+1}.zw = vec2(0.);
                  }
                  xTexelC${v+1}Ready = 1;
                }

                xC${v} = vec4(
                  xTexelC${v}.xy, xTexelC${v+1}.xy);
              `,v+1<d&&(h+=`
                  xC${v+1} = vec4(xTexelC${v}.zw, xTexelC${v+1}.zw);
                `)));v<d&&(h+=`
            wTexel = getW(r, ${v}, d1, q);
            dotProd += xC${v} * vec4(wTexel.xz, wTexel.xz);
          `,v+1<d&&(h+=`
              wTexel = getW(r, ${v+1}, d1, q);
              dotProd += xC${v+1} * vec4(wTexel.xz, wTexel.xz);
            `))}h+=`
    }
  `,h+=`
      }
    `;let p="",m="";r&&(o?p=`vec4 activation(vec4 a) {
          vec4 b = getPreluActivationWeightsAtOutCoords();
          ${r}
        }`:s?p=`vec4 activation(vec4 a) {
          vec4 b = getLeakyreluAlphaAtOutCoords();
          ${r}
        }`:p=`vec4 activation(vec4 x) {
          ${r}
        }`,m="result = activation(result);");const g=n?"result += getBiasAtOutCoords();":"";n&&this.variableNames.push("bias"),o&&this.variableNames.push("preluActivationWeights"),s&&this.variableNames.push("leakyreluAlpha"),this.userCode=`
      ${p}

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords.x;
        ivec2 xRCCorner = coords.yz * strides - pads;
        int d2 = coords.w;
        int d1 = d2 / ${i};
        int q = d2 - d1 * ${i};
        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        //intialize dotProd with a small epsilon seems to reduce GPU accuracy loss.
        vec4 dotProd = vec4(0.000000000000001);

        ${h}

        vec4 result = dotProd - vec4(0.000000000000001);
        ${g}
        ${m}
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function RZe(t){const{inputs:e,backend:n,attrs:r}=t,{x:o,filter:s}=e,{strides:i,pad:a,dilations:l,dimRoundingMode:c}=r;let u=l;u==null&&(u=[1,1]),M(Qn(i,u),()=>`Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides ${i} and dilations '${u}'`);const d=Ln(o.shape,s.shape,i,u,a,c,!0);let f;ee().getBool("WEBGL_PACK_DEPTHWISECONV")&&d.strideWidth<=2&&d.outChannels/d.inChannels===1?f=new Z7(d):f=new Q7(d);const h=[[d.padInfo.top,d.padInfo.left],[d.strideHeight,d.strideWidth],[d.dilationHeight,d.dilationWidth],[d.inHeight,d.inWidth]];return n.runWebGLProgram(f,[o,s],"float32",h)}const _Ze={kernelName:Zw,backendName:"webgl",kernelFunc:RZe};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class DZe{constructor(e){this.variableNames=["x","dy"],this.outputShape=e.filterShape;const n=e.strideHeight,r=e.strideWidth,o=e.padInfo.top,s=e.padInfo.left,i=e.outChannels/e.inChannels;this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int wR = coords.x;
        int wC = coords.y;
        int d1 = coords.z;
        int dm = coords.w;
        int d2 = d1 * ${i} + dm;

        float dotProd = 0.0;

        // TO DO: Vec4 over the batch size
        for (int b = 0; b < ${e.batchSize}; b++) {
          for (int yR = 0; yR < ${e.outHeight}; yR++) {
            int xR = wR + yR * ${n} - ${o};

            if (xR < 0 || xR >= ${e.inHeight}) {
              continue;
            }

            for (int yC = 0; yC < ${e.outWidth}; yC++) {
              int xC = wC + yC * ${r} - ${s};

              if (xC < 0 || xC >= ${e.inWidth}) {
                continue;
              }

              float dyValue = getDy(b, yR, yC, d2);
              float xValue = getX(b, xR, xC, d1);
              dotProd += (xValue * dyValue);
            }
          }
        }
        setOutput(dotProd);
      }
    `}}class MZe{constructor(e){this.variableNames=["dy","W"],this.outputShape=e.inShape;const n=e.filterHeight,r=e.filterWidth,o=e.strideHeight,s=e.strideWidth,i=n-1-e.padInfo.top,a=r-1-e.padInfo.left,l=e.outChannels/e.inChannels;this.userCode=`
      const ivec2 pads = ivec2(${i}, ${a});

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d1 = coords[3];
        ivec2 dyCorner = coords.yz - pads;
        int dyRCorner = dyCorner.x;
        int dyCCorner = dyCorner.y;

        float dotProd = 0.0;

        for (int wR = 0; wR < ${n}; wR++) {
          float dyR = float(dyRCorner + wR) / ${o}.0;

          if (dyR < 0.0 || dyR >= ${e.outHeight}.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          int wRPerm = ${n} - 1 - wR;

          for (int wC = 0; wC < ${r}; wC++) {
            float dyC = float(dyCCorner + wC) / ${s}.0;

            if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            int wCPerm = ${r} - 1 - wC;

            // TO DO: Vec4 over the channelMul
            for (int dm = 0; dm < ${l}; dm++) {
              int d2 = d1 * ${l} + dm;
              float xValue = getDy(batch, idyR, idyC, d2);
              float wValue = getW(wRPerm, wCPerm, d1, dm);
              dotProd += xValue * wValue;
            }
          }
        }
        setOutput(dotProd);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function FZe(t){const{inputs:e,backend:n,attrs:r}=t,{x:o,dy:s}=e,{strides:i,dilations:a,pad:l,dimRoundingMode:c,filterShape:u}=r,d=Ln(o.shape,u,i,a,l,c,!0),f=new DZe(d);return n.runWebGLProgram(f,[o,s],"float32")}const LZe={kernelName:lA,backendName:"webgl",kernelFunc:FZe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function jZe(t){const{inputs:e,backend:n,attrs:r}=t,{dy:o,filter:s}=e,{strides:i,dilations:a,pad:l,dimRoundingMode:c,inputShape:u}=r,d=Ln(u,s.shape,i,a,l,c,!0),f=new MZe(d);return n.runWebGLProgram(f,[o,s],"float32")}const BZe={kernelName:cA,backendName:"webgl",kernelFunc:jZe};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class zZe{constructor(e){this.variableNames=["X"],this.outputShape=[e,e],this.userCode=`
      void main() {
          ivec2 coords = getOutputCoords();
          float val = coords[0] == coords[1] ? getX(coords[0]) : 0.0;
          setOutput(val);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function WZe(t){const{inputs:e,backend:n}=t,{x:r}=e,o=[...r.shape,...r.shape],s=ne(r.shape),i=ge({inputs:{x:r},backend:n,attrs:{shape:[s]}}),a=new zZe(s),l=n.runWebGLProgram(a,[i],i.dtype),c=ge({inputs:{x:l},backend:n,attrs:{shape:o}});return n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(l),c}const VZe={kernelName:PK,backendName:"webgl",kernelFunc:WZe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class UZe{constructor(e){this.variableNames=["x","W"],this.outputShape=e.outShape;const{inHeight:n,inWidth:r,padInfo:o,strideHeight:s,strideWidth:i,filterHeight:a,filterWidth:l,dilationHeight:c,dilationWidth:u}=e,{top:d,left:f}=o;this.userCode=`
      const ivec2 strides = ivec2(${s}, ${i});
      const ivec2 pads = ivec2(${d}, ${f});
      const float neg_infinity = -3.4e38;

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords.x;
        int d1 = coords.w;
        ivec2 outTopLeftCorner =
            coords.yz * strides - pads;
        int hBeg = outTopLeftCorner.x;
        int wBeg = outTopLeftCorner.y;

        float curVal = neg_infinity;
        for (int h = 0; h < ${a}; h++) {
          int hIn = hBeg + h * ${c};

          if (hIn >= 0 && hIn < ${n}) {
            for (int w = 0; w < ${l}; w++) {
              int wIn = wBeg + w * ${u};

              if (wIn >= 0 && wIn < ${r}) {
                float xVal = getX(batch, hIn, wIn, d1);
                float wVal = getW(h, w, d1);

                float val = xVal + wVal;
                if (val > curVal) {
                  curVal = val;
                }
              }
            }
          }
        }

        float result = curVal;
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function GZe(t){const{inputs:e,backend:n,attrs:r}=t,{x:o,filter:s}=e,{strides:i,pad:a,dilations:l}=r,c=cy(o.shape,s.shape,i,a,"NHWC",l);let u;const d=new UZe(c);u=n.runWebGLProgram(d,[o,s],"float32");const f=ge({inputs:{x:u},backend:n,attrs:{shape:c.outShape}});return n.disposeIntermediateTensorInfo(u),f}const HZe={kernelName:Jw,backendName:"webgl",kernelFunc:GZe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function KZe(t){const{inputs:e,backend:n,attrs:r}=t,{equation:o}=r,s=e,{allDims:i,summedDims:a,idDims:l}=FO(o,s.length);jO(i.length,l,s);const{path:c,steps:u}=BO(a,l),d=u.length;let f=null,h=i.length;const p=[];for(let m=0;m<d;++m){for(const g of u[m]){const{permutationIndices:y,expandDims:v}=LO(h,l[g]);let x;zO(y)?x=s[g]:(x=pr({inputs:{x:s[g]},backend:n,attrs:{perm:y}}),p.push(x));const b=x.shape.slice();for(let w=0;w<v.length;++w)b.splice(v[w],0,1);dt(x.shape,b)||(x=ge({inputs:{x},backend:n,attrs:{shape:b}}),p.push(x)),f===null?f=x:(f=IP({inputs:{a:x,b:f},backend:n}),p.push(f))}m<d-1&&(c[m]>=0&&(f=hS({inputs:{x:f},backend:n,attrs:{axis:c[m]-(i.length-h),keepDims:!1}}),p.push(f)),h--)}for(const m of p)m!==f&&n.disposeIntermediateTensorInfo(m);return f}const qZe={kernelName:uA,backendName:"webgl",kernelFunc:KZe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const XZe="return (x >= 0.0) ? x : (exp(x) - 1.0);",YZe=`
  vec4 result;

  result.r = (x.r >= 0.0) ? x.r : (exp(x.r) - 1.0);
  result.g = (x.g >= 0.0) ? x.g : (exp(x.g) - 1.0);
  result.b = (x.b >= 0.0) ? x.b : (exp(x.b) - 1.0);
  result.a = (x.a >= 0.0) ? x.a : (exp(x.a) - 1.0);

  return result;
`,QZe=ot({opSnippet:XZe,packedOpSnippet:YZe}),ZZe={kernelName:Ig,backendName:"webgl",kernelFunc:QZe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const JZe="return (b >= 0.0) ? a : a * (b + 1.0);",eJe=`
  vec4 bGTEZero = vec4(greaterThanEqual(b, vec4(0.)));
  return (bGTEZero * a) + ((vec4(1.0) - bGTEZero) * (a * (b + vec4(1.0))));
`,tJe=t=>{const{inputs:e,backend:n}=t,{dy:r,y:o}=e,s=ee().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new sh(eJe,r.shape,o.shape):new Zc(JZe,r.shape,o.shape);return n.runWebGLProgram(s,[r,o],r.dtype)},nJe={kernelName:dA,backendName:"webgl",kernelFunc:tJe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const rJe=`
  return vec4(equal(a, b));
`,oJe="return float(a == b);",sJe=Bn({opSnippet:oJe,packedOpSnippet:rJe,dtype:"bool",cpuKernelImpl:F9e}),iJe={kernelName:e1,backendName:"webgl",kernelFunc:sJe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const aJe=`
  // Error function is calculated approximately with elementary function.
  // See "Handbook of Mathematical Functions with Formulas,
  // Graphs, and Mathematical Tables", Abramowitz and Stegun.
  float p = ${AO};
  float a1 = ${OO};
  float a2 = ${PO};
  float a3 = ${RO};
  float a4 = ${_O};
  float a5 = ${DO};

  float sign = sign(x);
  x = abs(x);
  float t = 1.0 / (1.0 + p * x);
  return sign * (1.0 - (((((a5*t + a4)*t) + a3)*t + a2)*t + a1)*t*exp(-x*x));
`,lJe=ot({opSnippet:aJe}),cJe={kernelName:Eg,backendName:"webgl",kernelFunc:lJe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const uJe=ih+`
  return exp(x);
`,dJe=`
  vec4 result = exp(x);
  bvec4 isNaN = isnan(x);
  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,J7=ot({opSnippet:uJe,packedOpSnippet:dJe,cpuKernelImpl:L9e,dtype:"float32"}),fJe={kernelName:Ng,backendName:"webgl",kernelFunc:J7};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function WI(t){const{inputs:e,attrs:n,backend:r}=t,{dim:o}=n,{input:s}=e,i=s.shape.length,a=s.shape.slice();let l=o;return o<0&&(M(-(i+1)<=o,()=>`Axis must be in the interval [${-(i+1)}, ${i}]`),l=i+o+1),a.splice(l,0,1),ge({inputs:{x:s},backend:r,attrs:{shape:a}})}const hJe={kernelName:t1,backendName:"webgl",kernelFunc:WI};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const f3="return exp(x) - 1.0;",pJe=ot({opSnippet:f3,packedOpSnippet:f3,cpuKernelImpl:j9e}),mJe={kernelName:Ag,backendName:"webgl",kernelFunc:pJe};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class h3{constructor(e,n,r){this.variableNames=["real","imag"];const o=n[1];this.outputShape=n;const s=r?`2.0 * ${Math.PI}`:`-2.0 * ${Math.PI}`,i=r?`${o}.0`:"1.0";let a;if(e==="real")a="return real * expR - imag * expI;";else if(e==="imag")a="return real * expI + imag * expR;";else throw new Error(`FFT component must be either "real" or "imag", got ${e}.`);this.userCode=`
      const float exponentMultiplier = ${s};

      float unaryOpComplex(float real, float expR, float imag, float expI) {
        ${a}
      }

      float mulMatDFT(int batch, int index) {
        float indexRatio = float(index) / float(${o});
        float exponentMultiplierTimesIndexRatio =
            exponentMultiplier * indexRatio;

        float result = 0.0;

        for (int i = 0; i < ${o}; i++) {
          // x = (-2|2 * PI / N) * index * i;
          float x = exponentMultiplierTimesIndexRatio * float(i);
          float expR = cos(x);
          float expI = sin(x);
          float real = getReal(batch, i);
          float imag = getImag(batch, i);

          result +=
              unaryOpComplex(real, expR, imag, expI) / ${i};
        }

        return result;
      }

      void main() {
        ivec2 coords = getOutputCoords();
        setOutput(mulMatDFT(coords[0], coords[1]));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function eQ(t,e,n){const r=n.texData.get(t.dataId),o=ne(t.shape),s=t.shape[t.shape.length-1],i=o/s,a=ge({inputs:{x:t},backend:n,attrs:{shape:[i,s]}}),l=a.shape,c=new h3("real",l,e),u=new h3("imag",l,e),d=[{dataId:r.complexTensorInfos.real.dataId,dtype:r.complexTensorInfos.real.dtype,shape:l},{dataId:r.complexTensorInfos.imag.dataId,dtype:r.complexTensorInfos.imag.dtype,shape:l}],f=n.runWebGLProgram(c,d,"float32"),h=n.runWebGLProgram(u,d,"float32"),p=Fl({inputs:{real:f,imag:h},backend:n});n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(h);const m=ge({inputs:{x:p},backend:n,attrs:{shape:t.shape}});return n.disposeIntermediateTensorInfo(a),n.disposeIntermediateTensorInfo(p),m}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gJe(t){const{inputs:e,backend:n}=t,{input:r}=e;return eQ(r,!1,n)}const yJe={kernelName:fA,backendName:"webgl",kernelFunc:gJe};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class vJe{constructor(e,n){this.outputShape=[],this.customUniforms=[{name:"value",type:"float"}],this.variableNames=["x"],this.outputShape=e,this.userCode=`
      void main() {
        // Input can be obtained from uniform value.
        setOutput(value);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ay(t){const{backend:e,attrs:n}=t,{shape:r,value:o}=n;let{dtype:s}=n;if(s=s||Gf(o),s==="string"){const i=Qt(s,ne(r));return i.fill(o),e.makeTensorInfo(r,s,i)}else{const i=new vJe(r,o),a=[[o]];return e.runWebGLProgram(i,[],s,a)}}const xJe={kernelName:hA,backendName:"webgl",kernelFunc:Ay};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class bJe{constructor(e){this.variableNames=["Image"],this.outputShape=[];const n=e[2];this.outputShape=e,this.userCode=`
        void main() {
          ivec4 coords = getOutputCoords();
          int x = coords[2];

          int coordX = ${n} - x - 1;
          float outputValue;
          if(coordX >= 0 && coordX < ${n}) {
            outputValue = getImage(coords[0], coords[1], coordX, coords[3]);
          } else {
            outputValue = getImage(coords[0], coords[1], coords[2], coords[3]);
          }
          setOutput(outputValue);
        }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const wJe={kernelName:pA,backendName:"webgl",kernelFunc:({inputs:t,backend:e})=>{const{image:n}=t,r=e,o=new bJe(n.shape);return r.runWebGLProgram(o,[n],n.dtype)}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const p3="return floor(x);",SJe=ot({opSnippet:p3,packedOpSnippet:p3,cpuKernelImpl:B9e}),CJe={kernelName:Og,backendName:"webgl",kernelFunc:SJe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const $Je=`
  float s = sign(a) * sign(b);
  int ia = round(a);
  int ib = round(b);
  if (ib != 0) {
    // Windows (D3D) wants guaranteed non-zero int division at compile-time.
    return float(idiv(ia, ib, s));
  } else {
    return NAN;
  }
`,kJe=`
  ivec4 ia = round(a);
  ivec4 ib = round(b);
  bvec4 cond = notEqual(ib, ivec4(0));
  ivec4 result = ivec4(0);
  vec4 s = sign(a) * sign(b);

  // Windows (D3D) wants guaranteed non-zero int division at compile-time.
  if (cond[0]) {
    result[0] = idiv(ia[0], ib[0], s[0]);
  }
  if (cond[1]) {
    result[1] = idiv(ia[1], ib[1], s[1]);
  }
  if (cond[2]) {
    result[2] = idiv(ia[2], ib[2], s[2]);
  }
  if (cond[3]) {
    result[3] = idiv(ia[3], ib[3], s[3]);
  }
  return vec4(result);
`,TJe=Bn({opSnippet:$Je,packedOpSnippet:kJe,dtype:"int32"}),IJe={kernelName:Pg,backendName:"webgl",kernelFunc:TJe};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class EJe{constructor(e){this.variableNames=["A"];const n=mr(),[r,o]=e;this.outputShape=e,this.userCode=`
      void main() {
        ivec3 coords = getOutputCoords();
        int texR = coords[0];
        int texC = coords[1];
        int depth = coords[2];
        vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${o}.0, ${r}.0);

        vec4 values = ${n.texture2D}(A, uv);
        float value;
        if (depth == 0) {
          value = values.r;
        } else if (depth == 1) {
          value = values.g;
        } else if (depth == 2) {
          value = values.b;
        } else if (depth == 3) {
          value = values.a;
        }

        setOutput(floor(value * 255.0 + 0.5));
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class NJe{constructor(e){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0;const n=mr(),[r,o]=e;this.outputShape=e,this.userCode=`
      void main() {
        ivec3 coords = getOutputCoords();
        int texR = coords[0];
        int texC = coords[1];
        int depth = coords[2];

        vec4 result = vec4(0.);

        for(int row=0; row<=1; row++) {
          for(int col=0; col<=1; col++) {
            texC = coords[1] + row;
            depth = coords[2] + col;

            vec2 uv = (vec2(texC, texR) + halfCR) /
                       vec2(${o}.0, ${r}.0);
            vec4 values = ${n.texture2D}(A, uv);
            float value;
            if (depth == 0) {
              value = values.r;
            } else if (depth == 1) {
              value = values.g;
            } else if (depth == 2) {
              value = values.b;
            } else if (depth == 3) {
              value = values.a;
            }

            result[row * 2 + col] = floor(value * 255.0 + 0.5);
          }
        }

        ${n.output} = result;
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const AJe={kernelName:KMe,backendName:"webgl",kernelFunc:OJe};let Ou,e$=ee().getBool("CANVAS2D_WILL_READ_FREQUENTLY_FOR_GPU");function OJe(t){const{inputs:e,backend:n,attrs:r}=t;let{pixels:o}=e;const{numChannels:s}=r,i=typeof HTMLVideoElement<"u"&&o instanceof HTMLVideoElement,a=typeof HTMLImageElement<"u"&&o instanceof HTMLImageElement,[l,c]=i?[o.videoWidth,o.videoHeight]:[o.width,o.height],u=[c,l],d=[c,l,s];if(a||i){const m=ee().getBool("CANVAS2D_WILL_READ_FREQUENTLY_FOR_GPU");(Ou==null||m!==e$)&&(e$=m,Ou=document.createElement("canvas").getContext("2d",{willReadFrequently:e$})),Ou.canvas.width=l,Ou.canvas.height=c,Ou.drawImage(o,0,0,l,c),o=Ou.canvas}const f=n.makeTensorInfo(u,"int32");n.texData.get(f.dataId).usage=uo.PIXELS,n.gpgpu.uploadPixelDataToTexture(n.getTexture(f.dataId),o);const h=ee().getBool("WEBGL_PACK")?new NJe(d):new EJe(d),p=n.runWebGLProgram(h,[f],"int32");return n.disposeData(f.dataId),p}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function PJe(t){const{inputs:e,backend:n,attrs:r}=t,{x:o,filter:s,bias:i,preluActivationWeights:a}=e,{strides:l,pad:c,dataFormat:u,dilations:d,dimRoundingMode:f,activation:h,leakyreluAlpha:p}=r,m=da(u),g=Ln(o.shape,s.shape,l,d,c,f,!1,m);let y;const v=[],x=i!=null,b=a!=null,w=h==="leakyrelu",C=()=>{const T=[o,s],I=(E,N)=>{if(N==="NCHW"&&E.shape.length===1&&E.shape[0]!==1){const A=ge({inputs:{x:E},backend:n,attrs:{shape:[E.shape[0],1,1]}});return v.push(A),A}return E};if(x&&T.push(I(i,u)),b&&T.push(I(a,u)),w){const E=n.makeTensorInfo([],"float32",Nl(p,"float32"));T.push(E),v.push(E)}return T};if(g.filterHeight===1&&g.filterWidth===1&&g.dilationHeight===1&&g.dilationWidth===1&&g.strideHeight===1&&g.strideWidth===1&&(g.padInfo.type==="SAME"||g.padInfo.type==="VALID"))y=q7({x:o,filter:s,convInfo:g,backend:n,bias:i,activation:h,preluActivationWeights:a,leakyreluAlpha:p});else if(g.strideWidth<=2&&m==="channelsLast"&&ee().getBool("WEBGL_EXP_CONV")){const T=h?Dm(h,!0):null,I=new K7(g,x,T,b,w),E=[[g.padInfo.top,g.padInfo.left],[g.strideHeight,g.strideWidth],[g.dilationHeight,g.dilationWidth],[g.inHeight,g.inWidth]],N=C();y=n.runWebGLProgram(I,N,"float32",E)}else if(ee().getBool("WEBGL_CONV_IM2COL"))y=X7({x:o,filter:s,convInfo:g,backend:n,bias:i,activation:h,preluActivationWeights:a,leakyreluAlpha:p});else{const T=h?Dm(h,!1):null,I=new H7(g,x,T,b,w),E=C();y=n.runWebGLProgram(I,E,"float32")}const $=ge({inputs:{x:y},backend:n,attrs:{shape:g.outShape}});return v.push(y),v.forEach(T=>n.disposeIntermediateTensorInfo(T)),$}const RJe={kernelName:Lb,backendName:"webgl",kernelFunc:PJe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _Je(t){const{inputs:e,backend:n,attrs:r}=t,{x:o,filter:s,bias:i,preluActivationWeights:a}=e,{strides:l,pad:c,dilations:u,dimRoundingMode:d,activation:f,leakyreluAlpha:h}=r,p=[];let m=u;m==null&&(m=[1,1]),M(Qn(l,m),()=>`Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides ${l} and dilations '${m}'`);const g=Ln(o.shape,s.shape,l,m,c,d,!0),y=ee().getBool("WEBGL_PACK_DEPTHWISECONV")&&g.strideWidth<=2&&g.outChannels/g.inChannels===1,v=f?Dm(f,y):null,x=[o,s],b=i!=null,w=a!=null,C=f==="leakyrelu";if(b&&x.push(i),w&&x.push(a),C){const E=n.makeTensorInfo([],"float32",Nl(h,"float32"));x.push(E),p.push(E)}let $;y?$=new Z7(g,b,v,w,C):$=new Q7(g,b,v,w,C);const T=[[g.padInfo.top,g.padInfo.left],[g.strideHeight,g.strideWidth],[g.dilationHeight,g.dilationWidth],[g.inHeight,g.inWidth]],I=n.runWebGLProgram($,x,"float32",T);return p.forEach(E=>n.disposeIntermediateTensorInfo(E)),I}const DJe={kernelName:QK,backendName:"webgl",kernelFunc:_Je};class MJe{constructor(e,n,r,o){this.sliceDim=e,this.strides=n,this.paramsShape=o,this.variableNames=["x","indices"],this.outputShape=r;const s=vt(r.length);let i=`
    int index;`;for(let a=0;a<this.sliceDim;a++)i+=`
          index = round(getIndices(coords[0], ${a}));
          out_of_bounds = out_of_bounds || index < 0;
          out_of_bounds = out_of_bounds || index >= ${this.paramsShape[a]};
          flattenIndex += index * ${this.strides[a]};`;this.userCode=`
         void main() {
          ${s} coords = getOutputCoords();
          int flattenIndex = 0;
          bool out_of_bounds = false;

          ${i}

          setOutput(out_of_bounds ? 0.0 : getX(flattenIndex, coords[1]));
        }
      `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function FJe(t){const{inputs:e,backend:n}=t,{params:r,indices:o}=e,s=o.shape,i=s[s.length-1],a=ne(r.shape),[l,c,u,d]=xO(r,o),f=ge({inputs:{x:o},backend:n,attrs:{shape:[c,i]}}),h=ge({inputs:{x:r},backend:n,attrs:{shape:[ne(r.shape)/u,u]}});if(n.shouldExecuteOnCPU([r,o])||r.dtype==="string"){const y=n.readSync(o.dataId),v=n.bufferSync(r),x=z9e(y,v,r.dtype,c,i,u,d,r.shape,a);return n.makeTensorInfo(l,r.dtype,x.values)}const p=new MJe(i,d,[c,u],r.shape),m=n.runWebGLProgram(p,[h,f],h.dtype),g=ge({inputs:{x:m},backend:n,attrs:{shape:l}});return n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(m),g}const LJe={kernelName:RK,backendName:"webgl",kernelFunc:FJe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class jJe{constructor(e,n){this.variableNames=["A","indices"],this.outputShape=n,this.rank=n.length;const r=vt(this.rank),o=BJe(e);this.userCode=`
      void main() {
        ${r} resRC = getOutputCoords();
        int index = int(getIndices(resRC.x, resRC.z));
        float inBounds = (index >= 0) && (index < ${e[2]}) ? 1.0 : 0.0;
        setOutput(inBounds * getA(${o}));
      }
    `}}function BJe(t,e){const n=["resRC.x","resRC.y","resRC.z","resRC.w"],r=[];for(let o=0;o<t.length;o++)o===2?r.push("index"):r.push(`${n[o]}`);return r.join()}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tQ(t){const{inputs:e,backend:n,attrs:r}=t,{x:o,indices:s}=e,{axis:i,batchDims:a}=r,l=He(i,o.shape)[0];if(ee().get("DEBUG")){const v=n.readSync(s.dataId),x=o.shape[l];for(let b=0;b<v.length;++b){const w=v[b];M(w<=x-1&&w>=0,()=>`GatherV2: the index value ${w} is not in [0, ${x-1}]`)}}const c=VO(o,s,l,a),u=ne(s.shape),d=[],f=ge({inputs:{x:o},backend:n,attrs:{shape:[c.batchSize,c.outerSize,c.dimSize,c.sliceSize]}}),h=ge({inputs:{x:s},backend:n,attrs:{shape:[c.batchSize,u/c.batchSize]}});d.push(f),d.push(h);const p=[c.batchSize,c.outerSize,u/c.batchSize,c.sliceSize];if(n.shouldExecuteOnCPU([o,s])||o.dtype==="string"){const v=n.bufferSync(h),x=n.bufferSync(f),b=W9e(x,v,p);return d.forEach(w=>n.disposeIntermediateTensorInfo(w)),n.makeTensorInfo(c.outputShape,b.dtype,b.values)}const m=new jJe(f.shape,p),g=n.runWebGLProgram(m,[f,h],f.dtype);d.push(g);const y=ge({inputs:{x:g},backend:n,attrs:{shape:c.outputShape}});return d.forEach(v=>n.disposeIntermediateTensorInfo(v)),y}const zJe={kernelName:r1,backendName:"webgl",kernelFunc:tQ};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const WJe="return float(a > b);",VJe=`
  return vec4(greaterThan(a, b));
`,UJe=Bn({opSnippet:WJe,packedOpSnippet:VJe,cpuKernelImpl:V9e,dtype:"bool"}),GJe={kernelName:o1,backendName:"webgl",kernelFunc:UJe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const HJe="return float(a >= b);",KJe=`
  return vec4(greaterThanEqual(a, b));
`,qJe=Bn({opSnippet:HJe,packedOpSnippet:KJe,dtype:"bool",cpuKernelImpl:U9e}),XJe={kernelName:Rg,backendName:"webgl",kernelFunc:qJe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function YJe(t){const{inputs:e,backend:n}=t,{input:r}=e;return eQ(r,!0,n)}const QJe={kernelName:mA,backendName:"webgl",kernelFunc:YJe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ZJe="return float(!isnan(x) && !isinf(x));",JJe=ot({opSnippet:ZJe,dtype:"bool"}),eet={kernelName:Dg,backendName:"webgl",kernelFunc:JJe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const tet="return float(isinf(x));",net=ot({opSnippet:tet,dtype:"bool"}),ret={kernelName:Mg,backendName:"webgl",kernelFunc:net};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const oet="return float(isnan(x));",set=ot({opSnippet:oet,dtype:"bool"}),iet={kernelName:Fg,backendName:"webgl",kernelFunc:set};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const aet="return float(a < b);",cet=`
  return vec4(lessThan(a, b));
`,uet=Bn({opSnippet:aet,packedOpSnippet:cet,cpuKernelImpl:G9e,dtype:"bool"}),det={kernelName:i1,backendName:"webgl",kernelFunc:uet};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const fet="return float(a <= b);",het=`
  return vec4(lessThanEqual(a, b));
`,pet=Bn({opSnippet:fet,packedOpSnippet:het,cpuKernelImpl:H9e,dtype:"bool"}),met={kernelName:a1,backendName:"webgl",kernelFunc:pet};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function get(t){const{backend:e,attrs:n}=t,{start:r,stop:o,num:s}=n,i=K9e(r,o,s);return e.makeTensorInfo([i.length],"float32",i)}const yet={kernelName:_K,backendName:"webgl",kernelFunc:get};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const vet=ih+`
  return x < 0.0 ? 0./0. : log(x);
`,xet=`
  vec4 result = log(x);
  bvec4 isNaN = isnan(x);
  result.r = isNaN.r ? x.r : (x.r < 0.0 ? 0./0. : result.r);
  result.g = isNaN.g ? x.g : (x.g < 0.0 ? 0./0. : result.g);
  result.b = isNaN.b ? x.b : (x.b < 0.0 ? 0./0. : result.b);
  result.a = isNaN.a ? x.a : (x.a < 0.0 ? 0./0. : result.a);
  return result;
`,bet=ot({opSnippet:vet,packedOpSnippet:xet,cpuKernelImpl:q9e}),wet={kernelName:Lg,backendName:"webgl",kernelFunc:bet};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Cet=ih+`
  return log(1.0 + x);
`,$et=ot({opSnippet:Cet}),ket={kernelName:jg,backendName:"webgl",kernelFunc:$et};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Tet="return float(a >= 1.0 && b >= 1.0);",Iet=`
  return vec4(
    vec4(greaterThanEqual(a, vec4(1.0))) *
    vec4(greaterThanEqual(b, vec4(1.0))));
`,Eet=Bn({opSnippet:Tet,packedOpSnippet:Iet,dtype:"bool"}),Net={kernelName:l1,backendName:"webgl",kernelFunc:Eet};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Aet="return float(!(x >= 1.0));",Oet=ot({opSnippet:Aet}),Pet={kernelName:c1,backendName:"webgl",kernelFunc:Oet};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Ret="return float(a >= 1.0 || b >= 1.0);",_et=`
  return min(
    vec4(greaterThanEqual(a, vec4(1.0))) +
    vec4(greaterThanEqual(b, vec4(1.0))),
    vec4(1.0));
`,Det=Bn({opSnippet:Ret,packedOpSnippet:_et,dtype:"bool"}),Met={kernelName:u1,backendName:"webgl",kernelFunc:Det};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Fet{constructor(e,n,r,o,s){this.variableNames=["x"],this.outputShape=[];const i=n,a=e[3]-1;this.outputShape=e;let l;const c=`float(${r}) + float(${o}) * sum`;s===.5?l=`inversesqrt(${c})`:s===1?l=`1.0/(${c})`:l=`exp(log(${c}) * float(-${s}));`,this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int r = coords[1];
        int c = coords[2];
        int d = coords[3];
        float x = getX(b, r, c, d);
        float sum = 0.0;
        for (int j = -${i}; j <= ${i}; j++) {
          int idx = d + j;
          if (idx >= 0 && idx <=  ${a}) {
            float z = getX(b, r, c, idx);
            sum += z * z;
          }
        }
        float val = x * ${l};
        setOutput(val);
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Let{constructor(e,n,r,o,s){this.variableNames=["x"],this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0;const i=n,a=e[3]-1;this.outputShape=e;let l;const c=`float(${r}) + float(${o}) * sum`;s===.5?l=`inversesqrt(${c})`:s===1?l=`1.0/(${c})`:l=`exp(log(${c}) * float(-${s}));`,this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords.x;
        int r = coords.y;
        int c = coords.z;
        int d = coords.w;

        bool hasNextCol = d < ${this.outputShape[3]};
        bool hasNextRow = c < ${this.outputShape[2]};

        vec4 sum = vec4(0.);
        vec4 xFragAtOutputCoords = getX(b, r, c, d);

        vec4 xAtOutputCoords = vec4(
          getChannel(xFragAtOutputCoords, vec2(c, d)),
          hasNextCol ?
            getChannel(xFragAtOutputCoords, vec2(c, d + 1)) : 0.0,
          hasNextRow ?
            getChannel(xFragAtOutputCoords , vec2(c + 1, d)) : 0.0,
          (hasNextRow && hasNextCol) ?
            getChannel(xFragAtOutputCoords, vec2(c + 1, d + 1)) : 0.0
        );

        int firstChannel = d - ${i};
        vec2 cache = vec2(0.);
        if(firstChannel >= 0){
          vec4 firstChannelFrag = getX(b, r, c, firstChannel);
          cache.x = getChannel(firstChannelFrag, vec2(c, firstChannel));
            if(hasNextRow){
              cache.y = getChannel(firstChannelFrag, vec2(c + 1, firstChannel));
            }
        }

        ivec2 depth = ivec2(d, d + 1);
        for (int j = - ${i}; j <= ${i}; j++) {
          ivec2 idx = depth + j;
          bvec2 aboveLowerBound = greaterThanEqual(idx, ivec2(0));
          bvec2 belowUpperBound = lessThanEqual(idx, ivec2(${a}));

          bool depthInRange = aboveLowerBound.x && belowUpperBound.x;
          bool depthPlusOneInRange = aboveLowerBound.y && belowUpperBound.y;

          if(depthInRange || depthPlusOneInRange){
            vec4 z = vec4(0.);
            vec4 xFragAtCurrentDepth;
            z.xz = cache.xy;
            if(depthPlusOneInRange && hasNextCol){
              xFragAtCurrentDepth = idx.y != d ?
                getX(b, r, c, idx.y) : xFragAtOutputCoords;
              z.y = getChannel(xFragAtCurrentDepth, vec2(c, idx.y));
              if(hasNextRow){
                z.w = getChannel(xFragAtCurrentDepth, vec2(c + 1, idx.y));
              }
            }
            cache.xy = z.yw;
            sum += z * z;
          }
        }
        vec4 result = xAtOutputCoords * ${l};
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const jet=t=>{const{inputs:e,backend:n,attrs:r}=t,{x:o}=e,{depthRadius:s,bias:i,alpha:a,beta:l}=r,c=ee().getBool("WEBGL_PACK_NORMALIZATION")?new Let(o.shape,s,i,a,l):new Fet(o.shape,s,i,a,l);return n.runWebGLProgram(c,[o],o.dtype)},Bet={kernelName:d1,backendName:"webgl",kernelFunc:jet};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class zet{constructor(e,n,r,o,s){this.variableNames=["inputImage","outputImage","dy"],this.outputShape=[],this.outputShape=e,this.depth=e[3],this.depthRadius=n,this.bias=r,this.alpha=o,this.beta=s,this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int r = coords[1];
        int c = coords[2];

        float result = 0.0;
        for (int d = 0; d < ${this.depth}; ++d) {
          int depthBegin = int(max(0.0, float(d - ${n})));
          int depthEnd = int(min(float(${this.depth}),
              float(d + ${n} + 1)));

          const int MIN_DEPTH_BEGIN = 0;
          const int MAX_DEPTH_END = ${this.depth};

          float norm = 0.0;
          for (int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k) {
            if (k < depthBegin){
              continue;
            }
            else if (k >= depthBegin && k < depthEnd) {
              norm += getInputImage(b, r, c, k) * getInputImage(b, r, c, k);
            }
            else {
              break;
            }
          }

          norm = float(${o}) * norm + float(${r});

          for(int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k){
            if (k < depthBegin){
              continue;
            }
            else if (k >= depthBegin && k < depthEnd){
              float dyi = -2.0 * float(${o})
                * float(${s})
                * getInputImage(b, r, c, k) * getOutputImage(b, r, c, d)
                / norm;
              if (k == d) {
                dyi += pow(norm, -1.0 * ${s});
              }
              if (k == coords[3]) {
                dyi *= getDy(b, r, c, d);
                result += dyi;
              }
            }
            else {
              break;
            }
          }
      }
      setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Wet=t=>{const{inputs:e,backend:n,attrs:r}=t,{x:o,y:s,dy:i}=e,{depthRadius:a,bias:l,alpha:c,beta:u}=r,d=new zet(o.shape,a,l,c,u);return n.runWebGLProgram(d,[o,s,i],o.dtype)},Vet={kernelName:yA,backendName:"webgl",kernelFunc:Wet};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Uet(t,e,n,r){const o=ne(e),i=ne(t.shape)/o,a=ge({inputs:{x:t},attrs:{shape:[i,o]},backend:r}),l=xu(a,t.dtype,"max",r),c=ge({inputs:{x:l},attrs:{shape:n},backend:r});return r.disposeIntermediateTensorInfo(a),r.disposeIntermediateTensorInfo(l),c}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nQ(t){const{inputs:e,backend:n,attrs:r}=t,{x:o}=e,{reductionIndices:s,keepDims:i}=r,a=o.shape.length,l=He(s,o.shape);let c=l;const u=Wt(c,a),d=u!=null,f=n.shouldExecuteOnCPU([o]);let h=o;if(d){if(f){const x=n.texData.get(h.dataId).values,b=new Array(a);for(let $=0;$<b.length;$++)b[$]=o.shape[u[$]];const w=kP(x,o.shape,o.dtype,u,b);h=n.makeTensorInfo(b,o.dtype);const C=n.texData.get(h.dataId);C.values=w}else h=fS(o,u,n);c=nn(c.length,a)}jn("max",c,a);const[p,m]=On(h.shape,c);let g=p;i&&(g=un(p,l));let y;if(f){const x=n.texData.get(h.dataId).values,b=X9e(x,ne(m),g,o.dtype);y=n.makeTensorInfo(g,o.dtype);const w=n.texData.get(y.dataId);w.values=b}else y=Uet(h,m,g,n);return d&&n.disposeIntermediateTensorInfo(h),y}const Get={kernelName:f1,backendName:"webgl",kernelFunc:nQ};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Het=TP+`
  return max(a, b);
`,Ket=`
  vec4 result = vec4(max(a, b));
  bvec4 isNaNA = isnan(a);
  bvec4 isNaNB = isnan(b);
  bvec4 isNaN = bvec4(isNaNA.x || isNaNB.x, isNaNA.y || isNaNB.y, isNaNA.z || isNaNB.z, isNaNA.w || isNaNB.w);
  `+vu+`
  return result;
`,qet=Bn({opSnippet:Het,packedOpSnippet:Ket,cpuKernelImpl:Y9e}),Xet={kernelName:Bg,backendName:"webgl",kernelFunc:qet};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Yet(t){const{inputs:e,backend:n,attrs:r}=t,{x:o}=e;Iy(o,"maxPool");const{filterSize:s,strides:i,pad:a,dimRoundingMode:l}=r,c=1;M(Qn(i,c),()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${i} and dilations '${c}'`);const u=Jo(o.shape,s,i,c,a,l);if(u.filterWidth===1&&u.filterHeight===1&&dt(u.inShape,u.outShape))return Zr({inputs:{x:o},backend:n});const d=new Mm(u,"max",!1);return n.runWebGLProgram(d,[o],o.dtype)}const Qet={kernelName:h1,backendName:"webgl",kernelFunc:Yet};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Zet(t){const{inputs:e,backend:n,attrs:r}=t,{x:o}=e,{filterSize:s,strides:i,pad:a,dataFormat:l,dimRoundingMode:c}=r,u=[1,1,1],d=ua(o.shape,s,i,u,a,c,l),f=new EP(d,"max",!1);return n.runWebGLProgram(f,[o],o.dtype)}const Jet={kernelName:p1,backendName:"webgl",kernelFunc:Zet};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class ett{constructor(e){this.variableNames=["dy","maxPos"],this.outputShape=e.inShape;const n=e.strideHeight,r=e.strideWidth,o=e.dilationHeight,s=e.effectiveFilterHeight,i=e.effectiveFilterWidth,a=s-1-e.padInfo.top,l=i-1-e.padInfo.left,c=s*i-1;this.userCode=`
      const ivec2 pads = ivec2(${a}, ${l});

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];

        ivec2 dyRCCorner = coords.yz - pads;
        int dyRCorner = dyRCCorner.x;
        int dyCCorner = dyRCCorner.y;

        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < ${s};
          wR += ${o}) {
          float dyR = float(dyRCorner + wR) / ${n}.0;

          if (dyR < 0.0 || dyR >= ${e.outHeight}.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          for (int wC = 0; wC < ${i}; wC++) {
            float dyC = float(dyCCorner + wC) / ${r}.0;

            if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            float dyValue = getDy(b, idyR, idyC, d);
            int maxPosValue = ${c} - int(getMaxPos(b, idyR, idyC, d));

            // Get the current value, check it against the value from the
            // position matrix.
            int curPosValue = wR * ${i} + wC;
            float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);

            dotProd += dyValue * mask;
          }
        }
        setOutput(dotProd);
      }
    `}}class ttt{constructor(e){this.variableNames=["dy","maxPos"],this.outputShape=e.inShape;const n=e.strideDepth,r=e.strideHeight,o=e.strideWidth,s=e.dilationDepth,i=e.dilationHeight,a=e.dilationWidth,l=e.effectiveFilterDepth,c=e.effectiveFilterHeight,u=e.effectiveFilterWidth,d=l-1-e.padInfo.front,f=c-1-e.padInfo.top,h=u-1-e.padInfo.left,p=l*c*u-1;this.userCode=`
      const ivec3 pads = ivec3(${d}, ${f}, ${h});

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int ch = coords.u;

        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;
        int dyDCorner = dyCorner.x;
        int dyRCorner = dyCorner.y;
        int dyCCorner = dyCorner.z;

        // Convolve dy(?, ?, ?, ch) with pos mask(:, :, :, d) to get
        // dx(xD, xR, xC, ch).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;

        for (int wD = 0; wD < ${l};
           wD += ${s}) {
          float dyD = float(dyDCorner + wD) / ${n}.0;

          if (dyD < 0.0 || dyD >= ${e.outDepth}.0 || fract(dyD) > 0.0) {
            continue;
          }
          int idyD = int(dyD);

          for (int wR = 0; wR < ${c};
              wR += ${i}) {
            float dyR = float(dyRCorner + wR) / ${r}.0;

            if (dyR < 0.0 || dyR >= ${e.outHeight}.0 ||
                fract(dyR) > 0.0) {
              continue;
            }
            int idyR = int(dyR);

            for (int wC = 0; wC < ${u};
                wC += ${a}) {
              float dyC = float(dyCCorner + wC) / ${o}.0;

              if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                  fract(dyC) > 0.0) {
                continue;
              }
              int idyC = int(dyC);

              float dyValue = getDy(batch, idyD, idyR, idyC, ch);
              int maxPosValue = ${p} -
                  int(getMaxPos(batch, idyD, idyR, idyC, ch));

              // Get the current value, check it against the value from the
              // position matrix.
              int curPosValue =
                  wD * ${c} * ${u} +
                  wR * ${u} + wC;
              float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);

              dotProd += dyValue * mask;
            }
          }
        }
        setOutput(dotProd);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ntt(t){const{inputs:e,backend:n,attrs:r}=t,{dy:o,input:s}=e,i=s,{filterSize:a,strides:l,pad:c,dimRoundingMode:u}=r,d=[1,1,1],f=ua(i.shape,a,l,d,c,u),h=new EP(f,"max",!0),p=n.runWebGLProgram(h,[i],i.dtype),m=new ttt(f),g=n.runWebGLProgram(m,[o,p],i.dtype);return n.disposeIntermediateTensorInfo(p),g}const rtt={kernelName:xA,backendName:"webgl",kernelFunc:ntt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ott(t){const{inputs:e,backend:n,attrs:r}=t,{dy:o,input:s,output:i}=e,a=s;Iy([s,i],"maxPoolGrad");const{filterSize:l,strides:c,pad:u,dimRoundingMode:d}=r,f=Jo(a.shape,l,c,1,u,d),h=!0,p=new Mm(f,"max",h),m=n.runWebGLProgram(p,[a],a.dtype),g=new ett(f),y=n.runWebGLProgram(g,[o,m],a.dtype);return n.disposeIntermediateTensorInfo(m),y}const stt={kernelName:vA,backendName:"webgl",kernelFunc:ott};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function itt(t,e,n,r){let o=new Mm(n,"max",!1);const s=r.runWebGLProgram(o,[t],"float32");o=new Mm(n,"max",!0,!0,e);const i=r.runWebGLProgram(o,[t],"float32");return[s,i]}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const att={kernelName:DK,backendName:"webgl",kernelFunc:({inputs:t,attrs:e,backend:n})=>{const{x:r}=t,{filterSize:o,strides:s,pad:i,includeBatchInIndex:a}=e,l=n;M(r.shape.length===4,()=>`Error in maxPool: input must be rank 4 but got rank ${r.shape.length}.`);const c=[1,1];M(Qn(s,c),()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${s} and dilations '${c}'`);const u=Jo(r.shape,o,s,c,i),[d,f]=itt(r,a,u,l);return[d,f]}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ltt(t,e,n,r){const o=ne(e),i=ne(t.shape)/o,a=ge({inputs:{x:t},attrs:{shape:[i,o]},backend:r}),l=xu(a,"float32","mean",r),c=ge({inputs:{x:l},attrs:{shape:n},backend:r});return r.disposeIntermediateTensorInfo(a),r.disposeIntermediateTensorInfo(l),c}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ctt={kernelName:m1,backendName:"webgl",kernelFunc:({inputs:t,attrs:e,backend:n})=>{const{x:r}=t,{keepDims:o,axis:s}=e,i=n,a=r.shape.length,l=He(s,r.shape);let c=l;const u=Wt(c,a),d=u!=null,f=i.shouldExecuteOnCPU([r]),h=[];let p=r;if(d){if(f){const b=i.texData.get(p.dataId).values,w=new Array(a);for(let T=0;T<w.length;T++)w[T]=r.shape[u[T]];const C=kP(b,r.shape,r.dtype,u,w);p=i.makeTensorInfo(w,r.dtype);const $=i.texData.get(p.dataId);$.values=C}else p=fS(r,u,i);h.push(p),c=nn(c.length,a)}jn("sum",c,a);const[m,g]=On(p.shape,c);let y=m;o&&(y=un(m,l));const v=ltt(p,g,y,i);for(const x of h)i.disposeIntermediateTensorInfo(x);return v}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function utt(t){const{inputs:e,backend:n,attrs:r}=t,{x:o}=e,{axis:s,keepDims:i}=r,a=o.shape.length,l=He(s,o.shape);let c=l;const u=Wt(c,a);let d=o;u!=null&&(d=pr({inputs:{x:o},backend:n,attrs:{perm:u}}),c=nn(c.length,o.shape.length)),jn("min",c,a);const[f,h]=On(d.shape,c),p=ne(h),m=ge({inputs:{x:d},backend:n,attrs:{shape:[-1,p]}}),g=xu(m,m.dtype,"min",n);let y;if(i){const v=un(f,l);y=ge({inputs:{x:g},backend:n,attrs:{shape:v}})}else y=ge({inputs:{x:g},backend:n,attrs:{shape:f}});return n.disposeIntermediateTensorInfo(m),n.disposeIntermediateTensorInfo(g),u!=null&&n.disposeIntermediateTensorInfo(d),y}const dtt={kernelName:g1,backendName:"webgl",kernelFunc:utt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ftt=TP+`
  return min(a, b);
`,htt=`
  vec4 result = vec4(min(a, b));
  bvec4 isNaNA = isnan(a);
  bvec4 isNaNB = isnan(b);
  bvec4 isNaN = bvec4(isNaNA.x || isNaNB.x, isNaNA.y || isNaNB.y, isNaNA.z || isNaNB.z, isNaNA.w || isNaNB.w);
  `+vu+`
  return result;
`,ptt=Bn({opSnippet:ftt,packedOpSnippet:htt,cpuKernelImpl:Q9e}),mtt={kernelName:zg,backendName:"webgl",kernelFunc:ptt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class gtt{constructor(e,n,r){this.variableNames=["x"],this.outputShape=n.map((u,d)=>u[0]+e[d]+u[1]);const o=e.length,s=vt(o),i=n.map(u=>u[0]).join(","),a=n.map((u,d)=>u[0]+e[d]).join(","),l=["coords[0]","coords[1]","coords[2]","coords[3]"].slice(0,o),c=r==="reflect"?0:1;if(o===1){this.userCode=`
        int start = ${i};
        int end = ${a};

        void main() {
          int outC = getOutputCoords();
          if (outC < start) {
            outC = start * 2 - outC - ${c};
          } else if(outC >= end) {
            outC = (end - 1) * 2 - outC + ${c};
          }
          setOutput(getX(outC - start));
        }
      `;return}this.userCode=`
      ${s} start = ${s}(${i});
      ${s} end = ${s}(${a});

      void main() {
        ${s} outC = getOutputCoords();
        for (int i = 0; i < ${o}; i++) {
          if (outC[i] < start[i]) {
            outC[i] = start[i] * 2 - outC[i] - ${c};
          } else if(outC[i] >= end[i]) {
            outC[i] = (end[i] - 1) * 2 - outC[i] + ${c};
          }
        }
        ${s} coords = outC - start;
        setOutput(getX(${l}));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class ytt{constructor(e,n,r){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=n.map((p,m)=>p[0]+e[m]+p[1]);const o=e.length,s=vt(o),i=n.map(p=>p[0]).join(","),a=n.map((p,m)=>p[0]+e[m]).join(","),l=dr("rc",o),c=dr("source",o),u=`${l[o-1]} < ${this.outputShape[o-1]}`,d=o===1?"source":`vec2(${c.slice(-2).join()})`,f=r==="reflect"?0:1;let h="";if(o===1){const p=`
        ${s} source = rc;
        if (source < start) {
          source = start * 2 - source - ${f};
        } else if (source >= end) {
          source = (end - 1) * 2 - source + ${f};
        }
        source -= start;
      `;h=`
        ${s} rc = outputLoc;
        ${p}
        result[0] = getChannel(getX(${c.join()}), ${d});
        ${l[o-1]} += 1;
        if(${u}) {
          ${p}
          result[1] = getChannel(getX(${c.join()}), ${d});
        }
      `}else{const p=`
        ${s} source = rc;
        ${s} lt = ${s}(lessThan(source, start));
        ${s} gte = ${s}(greaterThanEqual(source, end));
        ${s} orig = 1 - (lt + gte);
        source = orig * source +
                lt * (start * 2 - source - ${f}) +
                gte * ((end - 1) * 2 - source + ${f});
        source -= start;
      `;h=`
        ${s} rc = outputLoc;
        ${p}
        result[0] = getChannel(getX(${c.join()}), ${d});
        ${l[o-1]} += 1;
        if(${u}) {
          ${p}
          result[1] = getChannel(getX(${c.join()}), ${d});
        }
        rc = outputLoc;
        ${l[o-2]} += 1;
        if(${l[o-2]} < ${this.outputShape[o-2]}) {
          ${p}
          result[2] = getChannel(getX(${c.join()}), ${d});
          ${l[o-1]} += 1;
          if(${u}) {
            ${p}
            result[3] = getChannel(getX(${c.join()}), ${d});
          }
        }
      `}this.userCode=`
      const ${s} start = ${s}(${i});
      const ${s} end = ${s}(${a});

      void main() {
        ${s} outputLoc = getOutputCoords();
        vec4 result = vec4(0.);
        ${h}
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const vtt=({inputs:t,backend:e,attrs:n})=>{const{x:r}=t,{paddings:o,mode:s}=n,i=ee().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new ytt(r.shape,o,s):new gtt(r.shape,o,s);return e.runWebGLProgram(i,[r],r.dtype)},xtt={kernelName:y1,backendName:"webgl",kernelFunc:vtt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const btt=`if (b == 0.0) return NAN;
  return mod(a, b);`,wtt=`
  vec4 result = mod(a, b);
  bvec4 isNaN = equal(b, vec4(0.0));
  `+vu+`
  return result;
`,Stt=Bn({opSnippet:btt,packedOpSnippet:wtt}),Ctt={kernelName:Wg,backendName:"webgl",kernelFunc:Stt};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class $tt{constructor(e,n,r){this.variableNames=["probs"],this.customUniforms=[{name:"seed",type:"float"}],this.outputShape=[e,r],this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];

        float r = random(seed);
        float cdf = 0.0;

        for (int i = 0; i < ${n-1}; i++) {
          cdf += getProbs(batch, i);

          if (r < cdf) {
            setOutput(float(i));
            return;
          }
        }

        // If no other event happened, last event happened.
        setOutput(float(${n-1}));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ktt=`
if (a == b) {
  return 1.0;
};
return a / b;`,Ttt=`
  // vec4 one = vec4(equal(a, b));
  // return one + (vec4(1.0) - one) * a / b;
  vec4 result = a / b;
  if(a.x == b.x) {
    result.x = 1.;
  }
  if(a.y == b.y) {
    result.y = 1.;
  }
  if(a.z == b.z) {
    result.z = 1.;
  }
  if(a.w == b.w) {
    result.w = 1.;
  }

  return result;
`,rQ=Bn({opSnippet:ktt,packedOpSnippet:Ttt,checkOutOfBounds:!0}),Itt={kernelName:Tg,backendName:"webgl",kernelFunc:rQ};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const m3="return a - b;",oQ=Bn({opSnippet:m3,packedOpSnippet:m3,supportsComplex:!0,cpuKernelImpl:vYe}),Ett={kernelName:oy,backendName:"webgl",kernelFunc:oQ};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sQ(t){const{inputs:e,backend:n,attrs:r}=t,{logits:o}=e,{dim:s}=r,i=He([s],o.shape),a=nQ({inputs:{x:o},backend:n,attrs:{reductionIndices:i,keepDims:!1}}),l=un(a.shape,i),c=ge({inputs:{x:a},backend:n,attrs:{shape:l}}),u=oQ({inputs:{a:o,b:c},backend:n}),d=J7({inputs:{x:u},backend:n}),f=hS({inputs:{x:d},backend:n,attrs:{axis:i,keepDims:!1}}),h=ge({inputs:{x:f},backend:n,attrs:{shape:l}}),p=rQ({inputs:{a:d,b:h},backend:n});return n.disposeIntermediateTensorInfo(a),n.disposeIntermediateTensorInfo(c),n.disposeIntermediateTensorInfo(u),n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(h),p}const Ntt={kernelName:D1,backendName:"webgl",kernelFunc:sQ};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Att(t){const{inputs:e,backend:n,attrs:r}=t,{logits:o}=e,{numSamples:s,seed:i,normalized:a}=r,l=a?o:sQ({inputs:{logits:o},backend:n,attrs:{dim:o.shape.length-1}}),c=l.shape[0],u=l.shape[1],d=new $tt(c,u,s),f=[[i]],h=n.runWebGLProgram(d,[l],"int32",f);return a||n.disposeIntermediateTensorInfo(l),h}const Ott={kernelName:MK,backendName:"webgl",kernelFunc:Att};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Ptt=ts+`
  return -x;
`,Rtt=`
  vec4 result = -x;
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`;function _tt(t){const{inputs:e,backend:n}=t,{x:r}=e;if(n.shouldExecuteOnCPU([r])){const s=n.texData.get(r.dataId),[i,a]=J9e(s.values,r.shape,r.dtype);return n.makeTensorInfo(a,r.dtype,i)}let o;return ee().getBool("WEBGL_PACK_UNARY_OPERATIONS")?o=new Ua(r.shape,Rtt):o=new ti(r.shape,Ptt),n.runWebGLProgram(o,[r],r.dtype)}const Dtt={kernelName:v1,backendName:"webgl",kernelFunc:_tt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Mtt=pO;function Ftt(t){lo("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");const{inputs:e,backend:n,attrs:r}=t,{boxes:o,scores:s}=e,{maxOutputSize:i,iouThreshold:a,scoreThreshold:l}=r,c=n.readSync(o.dataId),u=n.readSync(s.dataId),{selectedIndices:d}=Mtt(c,u,i,a,l);return n.makeTensorInfo([d.length],"int32",new Int32Array(d))}const Ltt={kernelName:bA,backendName:"webgl",kernelFunc:Ftt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const jtt=mO;function Btt(t){lo("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");const{inputs:e,backend:n,attrs:r}=t,{boxes:o,scores:s}=e,{maxOutputSize:i,iouThreshold:a,scoreThreshold:l,padToMaxOutputSize:c}=r,u=n.readSync(o.dataId),d=n.readSync(s.dataId),{selectedIndices:f,validOutputs:h}=jtt(u,d,i,a,l,c);return[n.makeTensorInfo([f.length],"int32",new Int32Array(f)),n.makeTensorInfo([],"int32",new Int32Array([h]))]}const ztt={kernelName:wA,backendName:"webgl",kernelFunc:Btt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Wtt=gO;function Vtt(t){lo("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");const{inputs:e,backend:n,attrs:r}=t,{boxes:o,scores:s}=e,{maxOutputSize:i,iouThreshold:a,scoreThreshold:l,softNmsSigma:c}=r,u=n.readSync(o.dataId),d=n.readSync(s.dataId),f=i,h=a,p=l,m=c,{selectedIndices:g,selectedScores:y}=Wtt(u,d,f,h,p,m);return[n.makeTensorInfo([g.length],"int32",new Int32Array(g)),n.makeTensorInfo([y.length],"float32",new Float32Array(y))]}const Utt={kernelName:SA,backendName:"webgl",kernelFunc:Vtt};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Gtt{constructor(e,n,r,o){this.variableNames=["indices"],this.outputShape=[e,n],this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int index = round(getIndices(coords.x));
        setOutput(mix(float(${o}), float(${r}),
                      float(index == coords.y)));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Htt=t=>{const{inputs:e,backend:n,attrs:r}=t,{indices:o}=e,{dtype:s,depth:i,onValue:a,offValue:l}=r,c=ne(o.shape),u=new Gtt(c,i,a,l),d=ge({inputs:{x:o},backend:n,attrs:{shape:[c]}}),f=n.runWebGLProgram(u,[d],s);n.disposeIntermediateTensorInfo(d);const h=[...o.shape,i],p=ge({inputs:{x:f},backend:n,attrs:{shape:h}});return n.disposeIntermediateTensorInfo(f),p},Ktt={kernelName:w1,backendName:"webgl",kernelFunc:Htt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function u0(t){const{inputs:e,backend:n}=t,{x:r}=e;if(r.dtype==="complex64"){const o=Ny({inputs:{input:r},backend:n}),s=u0({inputs:{x:o},backend:n}),i=pS({inputs:{input:r},backend:n}),a=u0({inputs:{x:i},backend:n}),l=Fl({inputs:{real:s,imag:a},backend:n});return n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(s),n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(a),l}else return Ay({attrs:{shape:r.shape,dtype:r.dtype,value:r.dtype==="string"?"":0},backend:n})}const qtt={kernelName:L1,backendName:"webgl",kernelFunc:u0};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function iQ(t){const{inputs:e,backend:n}=t,{x:r}=e;if(r.dtype==="string")throw new Error("onesLike is not supported under string dtype");if(r.dtype==="complex64"){const o=Ny({inputs:{input:r},backend:n}),s=iQ({inputs:{x:o},backend:n}),i=pS({inputs:{input:r},backend:n}),a=u0({inputs:{x:i},backend:n}),l=Fl({inputs:{real:s,imag:a},backend:n});return n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(s),n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(a),l}else return Ay({attrs:{shape:r.shape,dtype:r.dtype,value:1},backend:n})}const Xtt={kernelName:b1,backendName:"webgl",kernelFunc:iQ};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ytt(t){const{inputs:e,backend:n,attrs:r}=t,{axis:o}=r;if(e.length===1)return WI({inputs:{input:e[0]},backend:n,attrs:{dim:o}});const s=e[0].shape,i=e[0].dtype;e.forEach(u=>{V2(s,u.shape,"All tensors passed to stack must have matching shapes"),M(i===u.dtype,()=>"All tensors passed to stack must have matching dtypes")});const a=[],l=e.map(u=>{const d=WI({inputs:{input:u},backend:n,attrs:{dim:o}});return a.push(d),d}),c=G7({inputs:l,backend:n,attrs:{axis:o}});return a.forEach(u=>n.disposeIntermediateTensorInfo(u)),c}const Qtt={kernelName:S1,backendName:"webgl",kernelFunc:Ytt};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Ztt{constructor(e,n,r){this.variableNames=["x"],this.customUniforms=[{name:"value",type:"float"}],this.outputShape=n.map((c,u)=>c[0]+e[u]+c[1]);const o=e.length,s=vt(o),i=n.map(c=>c[0]).join(","),a=n.map((c,u)=>c[0]+e[u]).join(","),l=["coords[0]","coords[1]","coords[2]","coords[3]"].slice(0,o);if(o===1){this.userCode=`
        int start = ${i};
        int end = ${a};

        void main() {
          int outC = getOutputCoords();
          if (outC < start || outC >= end) {
            setOutput(value);
          } else {
            setOutput(getX(outC - start));
          }
        }
      `;return}this.userCode=`
      ${s} start = ${s}(${i});
      ${s} end = ${s}(${a});

      void main() {
        ${s} outC = getOutputCoords();
        if (any(lessThan(outC, start)) || any(greaterThanEqual(outC, end))) {
          setOutput(value);
        } else {
          ${s} coords = outC - start;
          setOutput(getX(${l}));
        }
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Jtt{constructor(e,n,r){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"value",type:"float"}],this.outputShape=n.map((m,g)=>m[0]+e[g]+m[1]);const o=e.length,s=vt(o),i=n.map(m=>m[0]).join(","),a=n.map((m,g)=>m[0]+e[g]).join(","),l=dr("rc",o),c=dr("source",o),u=`${l[o-1]} < ${this.outputShape[o-1]}`,d=o===1?"source":`vec2(${c.slice(-2).join()})`,f=[`${s} rc = outputLoc;`,`${l[o-1]} += 1;
       if(${u}) {
      `,o===1?"":`}
       rc = outputLoc;
       ${l[o-2]} += 1;
       if(${l[o-2]} < ${this.outputShape[o-2]}) {`,o===1?"":`  ${l[o-1]} += 1;
         if(${u}) {`],h=o===1?"rc < start || rc >= end":"any(lessThan(rc, start)) || any(greaterThanEqual(rc, end))";let p="";for(let m=0,g=o===1?2:4;m<g;m++)p+=`
        ${f[m]}
        if (${h}) {
          result[${m}] = float(value);
        } else {
          ${s} source = rc - start;
          result[${m}] = getChannel(getX(${c.join()}), ${d});
        }
      `;p+=o===1?"} ":"}}",this.userCode=`
      const ${s} start = ${s}(${i});
      const ${s} end = ${s}(${a});

      void main() {
        ${s} outputLoc = getOutputCoords();
        vec4 result = vec4(0.);
        ${p}
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const aQ=t=>{const{inputs:e,backend:n,attrs:r}=t,{x:o}=e,{paddings:s,constantValue:i}=r;if(ne(o.shape)===0){const c=s.map((u,d)=>u[0]+o.shape[d]+u[1]);return Ay({backend:n,attrs:{shape:c,value:i,dtype:o.dtype}})}const a=ee().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new Jtt(o.shape,s,i):new Ztt(o.shape,s,i),l=[[i]];return n.runWebGLProgram(a,[o],o.dtype,l)},ent={kernelName:C1,backendName:"webgl",kernelFunc:aQ};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const tnt=`
  if(a < 0.0 && floor(b) < b){
    return NAN;
  }
  if (b == 0.0) {
    return 1.0;
  }
  return (round(mod(b, 2.0)) != 1) ?
      pow(abs(a), b) : sign(a) * pow(abs(a), b);
`,nnt=`
  // isModRound1 has 1 for components with round(mod(b, 2.0)) == 1, 0 otherwise.
  vec4 isModRound1 = vec4(equal(round(mod(b, 2.0)), ivec4(1)));
  vec4 multiplier = sign(a) * isModRound1 + (vec4(1.0) - isModRound1);
  vec4 result = multiplier * pow(abs(a), b);

  // Ensure that a^0 = 1, including 0^0 = 1 as this correspond to TF and JS
  bvec4 isExpZero = equal(b, vec4(0.0));
  result.r = isExpZero.r ? 1.0 : result.r;
  result.g = isExpZero.g ? 1.0 : result.g;
  result.b = isExpZero.b ? 1.0 : result.b;
  result.a = isExpZero.a ? 1.0 : result.a;

  bvec4 isNaN1 = lessThan(a, vec4(0.0));
  bvec4 isNaN2 = lessThan(floor(b), b);
  bvec4 isNaN = bvec4(isNaN1.x && isNaN2.x, isNaN1.y && isNaN2.y, isNaN1.z && isNaN2.z, isNaN1.w && isNaN2.w);
  `+vu+`
  return result;
`,rnt=Bn({opSnippet:tnt,packedOpSnippet:nnt}),ont={kernelName:Ug,backendName:"webgl",kernelFunc:rnt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function snt(t){const{inputs:e,backend:n,attrs:r}=t,{x:o}=e,{axis:s,keepDims:i}=r,a=o.shape.length,l=[],c=He(s,o.shape);let u=c;const d=Wt(u,a);let f=o;d!=null&&(f=pr({inputs:{x:o},backend:n,attrs:{perm:d}}),u=nn(u.length,a),l.push(f)),jn("prod",u,a);let h;if(n.shouldExecuteOnCPU([f])){const p=n.texData.get(f.dataId).values,{outVals:m,outShape:g,outDtype:y}=tYe(f.shape,f.dtype,p,u);h=n.makeTensorInfo(g,y,m)}else{const[p,m]=On(f.shape,u),g=ne(m),y=ge({inputs:{x:f},backend:n,attrs:{shape:[-1,g]}}),v=DA(o.dtype),x=xu(y,v,"prod",n);h=ge({inputs:{x},backend:n,attrs:{shape:p}}),l.push(y),l.push(x)}if(i){l.push(h);const p=un(h.shape,c);h=ge({inputs:{x:h},backend:n,attrs:{shape:p}})}return l.forEach(p=>n.disposeIntermediateTensorInfo(p)),h}const int={kernelName:k1,backendName:"webgl",kernelFunc:snt};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ant(t){const{inputs:e,backend:n,attrs:r}=t,{paramsNestedSplits:o,paramsDenseValues:s,indices:i}=e,{outputRaggedRank:a}=r,l=o.map(y=>n.readSync(y.dataId)),c=o.map(y=>y.shape),u=n.readSync(s.dataId),d=n.readSync(i.dataId),[f,h,p]=nYe(l,c,u,s.shape,s.dtype,d,i.shape,a),m=f.map(y=>n.makeTensorInfo([y.length],"int32",y)),g=n.makeTensorInfo(p,s.dtype,h);return m.concat([g])}const lnt={kernelName:FK,backendName:"webgl",kernelFunc:ant};/**
 * @license
 * Copyright 2022 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cnt(t){const{inputs:e,backend:n}=t,{starts:r,limits:o,deltas:s}=e,i=n.readSync(r.dataId),a=n.readSync(o.dataId),l=n.readSync(s.dataId),[c,u]=rYe(i,r.shape,r.dtype,a,o.shape,l,s.shape),d=n.makeTensorInfo([c.length],"int32",c),f=n.makeTensorInfo([u.length],r.dtype,u);return[d,f]}const unt={kernelName:LK,backendName:"webgl",kernelFunc:cnt};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dnt(t){const{inputs:e,backend:n,attrs:r}=t,{shape:o,values:s,defaultValue:i,rowPartitionTensors:a}=e,{rowPartitionTypes:l}=r,c=n.readSync(o.dataId),u=n.readSync(s.dataId),d=n.readSync(i.dataId),f=a.map(g=>n.readSync(g.dataId)),h=a.map(g=>g.shape),[p,m]=oYe(c,o.shape,u,s.shape,s.dtype,d,i.shape,f,h,l);return n.makeTensorInfo(p,s.dtype,m)}const fnt={kernelName:jK,backendName:"webgl",kernelFunc:dnt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const lQ=t=>{const{backend:e,attrs:n}=t,{start:r,stop:o,step:s,dtype:i}=n,a=sYe(r,o,s,i);return e.makeTensorInfo([a.length],i,a)},hnt={kernelName:CA,backendName:"webgl",kernelFunc:lQ};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const pnt="return 1.0 / x;",mnt=ot({opSnippet:pnt}),gnt={kernelName:Gg,backendName:"webgl",kernelFunc:mnt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ynt=ts+`
  return (x < 0.0) ? 0.0 : x;
`,vnt=`
  vec4 result = x * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,xnt=ot({opSnippet:ynt,packedOpSnippet:vnt}),bnt={kernelName:Hg,backendName:"webgl",kernelFunc:xnt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const wnt=ts+`
  return (x < 0.0) ? 0.0 : min(6.0, x);
`,Snt=`
  vec4 result = min(x, vec4(6.)) * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,Cnt=ot({opSnippet:wnt,packedOpSnippet:Snt}),$nt={kernelName:Kg,backendName:"webgl",kernelFunc:Cnt};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class knt{constructor(e,n,r,o,s){this.variableNames=["A"],this.outputShape=[];const[i,a,l,c]=e;this.outputShape=[i,n,r,c];const u=[o&&n>1?a-1:a,o&&r>1?l-1:l],d=[o&&n>1?n-1:n,o&&r>1?r-1:r];let f;s?f="(vec2(yRC) + vec2(0.5)) * effectiveInputOverOutputRatioRC - vec2(0.5)":f="vec2(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`
      const vec2 effectiveInputOverOutputRatioRC = vec2(
          ${u[0]/d[0]},
          ${u[1]/d[1]});
      const vec2 inputShapeRC = vec2(${a}.0, ${l}.0);

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        ivec2 yRC = coords.yz;

        // Fractional source index.
        vec2 sourceFracIndexRC = ${f};

        // Compute the four integer indices.
        ivec2 sourceFloorRC = ivec2(max(sourceFracIndexRC, vec2(0.0)));
        ivec2 sourceCeilRC = ivec2(
          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));

        float topLeft = getA(b, sourceFloorRC.x, sourceFloorRC.y, d);
        float bottomLeft = getA(b, sourceCeilRC.x, sourceFloorRC.y, d);
        float topRight = getA(b, sourceFloorRC.x, sourceCeilRC.y, d);
        float bottomRight = getA(b, sourceCeilRC.x, sourceCeilRC.y, d);

        vec2 fracRC = sourceFracIndexRC - vec2(sourceFloorRC);

        float top = topLeft + (topRight - topLeft) * fracRC.y;
        float bottom = bottomLeft + (bottomRight - bottomLeft) * fracRC.y;
        float newValue = top + (bottom - top) * fracRC.x;

        setOutput(newValue);
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Tnt{constructor(e,n,r,o,s){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[];const[i,a,l,c]=e;this.outputShape=[i,n,r,c];const u=[o&&n>1?a-1:a,o&&r>1?l-1:l],d=[o&&n>1?n-1:n,o&&r>1?r-1:r];let f;s?f="(vec3(yRC) + vec3(0.5)) * effectiveInputOverOutputRatioRC - vec3(0.5)":f="vec3(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`
      const vec3 effectiveInputOverOutputRatioRC = vec3(
          ${u[0]/d[0]},
          ${u[1]/d[1]},
          ${u[1]/d[1]});
      const vec3 inputShapeRC = vec3(${a}.0, ${l}.0,
                                     ${l}.0);

      float getAValue(int b, int r, int c, int d) {
        return getChannel(getA(b, r, c, d), vec2(c, d));
      }

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        // Calculate values for next column in yRC.z.
        ivec3 yRC = coords.yzz + ivec3(0, 0, 1);

        // Fractional source index.
        vec3 sourceFracIndexRC = ${f};

        // Compute the four integer indices.
        ivec3 sourceFloorRC = ivec3(max(sourceFracIndexRC, vec3(0.0)));
        ivec3 sourceCeilRC = ivec3(
          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));

        // Should we calculate next column and row elements in 2x2 packed cell.
        bool hasNextCol = d < ${c-1};
        bool hasNextRow = coords.z < ${r-1};

        // In parallel, construct four corners for all four components in
        // packed 2x2 cell.
        vec4 topLeft = vec4(
          getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d),
          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d + 1) : 0.0);

        vec4 bottomLeft = vec4(
          getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d),
          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d + 1) : 0.0);

        vec4 topRight = vec4(
          getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d),
          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d + 1) : 0.0);

        vec4 bottomRight = vec4(
          getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d),
          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d + 1) : 0.0);

        vec3 fracRC = sourceFracIndexRC - vec3(sourceFloorRC);

        vec4 top = mix(topLeft, topRight, fracRC.yyzz);
        vec4 bottom = mix(bottomLeft, bottomRight, fracRC.yyzz);
        vec4 newValue = mix(top, bottom, fracRC.x);

        setOutput(newValue);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Int(t){const{inputs:e,backend:n,attrs:r}=t,{images:o}=e,{alignCorners:s,halfPixelCenters:i,size:a}=r,[l,c]=a,u=ee().getBool("WEBGL_PACK_IMAGE_OPERATIONS")?new Tnt(o.shape,l,c,s,i):new knt(o.shape,l,c,s,i);return n.runWebGLProgram(u,[o],"float32")}const Ent={kernelName:E1,backendName:"webgl",kernelFunc:Int};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Nnt{constructor(e,n,r){this.variableNames=["dy"],this.outputShape=[],this.outputShape=n;const[,o,s]=n,[,i,a]=e,l=[r&&i>1?o-1:o,r&&a>1?s-1:s],c=[r&&i>1?i-1:i,r&&a>1?a-1:a],u=l[0]/c[0],d=l[1]/c[1],f=1/u,h=1/d,p=Math.ceil(f)*2+2,m=Math.ceil(h)*2+2;this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        int r = coords[1];
        int c = coords[2];

        float accumulator = 0.0;

        const float heightScale = float(${u});
        const float widthScale = float(${d});

        const float invHeightScale = float(${f});
        const float invWidthScale = float(${h});

        const int winHeight = int(${p});
        const int winWidth = int(${m});

        // Compute bounds for where in dy we will look
        float startRLerp = floor(float(r) * invHeightScale);
        int startDyR = int(startRLerp - float(winHeight / 2));

        float startCLerp = floor(float(c) * invWidthScale);
        int startDyC = int(startCLerp - float(winWidth / 2));

        // Loop over dy
        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {
          int dyR = dyROffset + startDyR;

          // Guard against the window exceeding the bounds of dy
          if (dyR < 0 || dyR >= ${i}) {
            continue;
          }

          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {
            int dyC = dyCOffset + startDyC;

            // Guard against the window exceeding the bounds of dy
            if (dyC < 0 || dyC >= ${a}) {
              continue;
            }

            float dxR = float(dyR) * heightScale;
            int topDxRIndex = int(floor(dxR));
            int bottomDxRIndex = int(min(ceil(dxR), ${o-1}.0));
            float dxRLerp = dxR - float(topDxRIndex);
            float inverseDxRLerp = 1.0 - dxRLerp;

            float dxC = float(dyC) * widthScale;
            int leftDxCIndex = int(floor(dxC));
            int rightDxCIndex = int(min(ceil(dxC), ${s-1}.0));
            float dxCLerp = dxC - float(leftDxCIndex);
            float inverseDxCLerp = 1.0 - dxCLerp;

            if (r == topDxRIndex && c == leftDxCIndex) {
              // topLeft
              accumulator +=
                getDy(b, dyR, dyC, d) * inverseDxRLerp * inverseDxCLerp;
            }

            if (r == topDxRIndex && c == rightDxCIndex) {
              // topRight
              accumulator += getDy(b, dyR, dyC, d) * inverseDxRLerp * dxCLerp;
            }

            if (r == bottomDxRIndex && c == leftDxCIndex) {
              // bottomLeft
              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * inverseDxCLerp;
            }

            if (r == bottomDxRIndex && c == rightDxCIndex) {
              // bottomRight
              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * dxCLerp;
            }
          }
        }
        // End loop over dy

        setOutput(accumulator);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ant(t){const{inputs:e,backend:n,attrs:r}=t,{images:o,dy:s}=e,{alignCorners:i}=r,a=new Nnt(s.shape,o.shape,i);return n.runWebGLProgram(a,[s],s.dtype)}const Ont={kernelName:TA,backendName:"webgl",kernelFunc:Ant};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Pnt{constructor(e,n,r,o,s){this.variableNames=["A"],this.outputShape=[];const[i,a,l,c]=e;this.outputShape=[i,n,r,c];const u=[o&&n>1?a-1:a,o&&r>1?l-1:l],d=[o&&n>1?n-1:n,o&&r>1?r-1:r],f=o?"0.5":"0.0";let h;s?h="max((vec2(yRC) + vec2(0.5)) * effectiveInputOverOutputRatioRC, vec2(0.0))":h="vec2(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`
      const vec2 effectiveInputOverOutputRatioRC = vec2(
          ${u[0]/d[0]},
          ${u[1]/d[1]});
      const vec2 inputShapeRC = vec2(${a}.0, ${l}.0);

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        ivec2 yRC = coords.yz;

        // Fractional source index.
        vec2 sourceFracIndexRC = ${h};

        // Compute the coordinators of nearest neighbor point.
        ivec2 sourceNearestRC = ivec2(
          min(inputShapeRC - 1.0, floor(sourceFracIndexRC + ${f})));
        float newValue = getA(b, sourceNearestRC.x, sourceNearestRC.y, d);

        setOutput(newValue);
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Rnt{constructor(e,n,r,o,s){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[];const[i,a,l,c]=e;this.outputShape=[i,n,r,c];const u=[o&&n>1?a-1:a,o&&r>1?l-1:l],d=[o&&n>1?n-1:n,o&&r>1?r-1:r],f=o?"0.5":"0.0";let h;s?h="max((vec3(yRC) + vec3(0.5)) * effectiveInputOverOutputRatioRC, vec3(0.0))":h="vec3(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`
      const vec3 effectiveInputOverOutputRatioRC = vec3(
          ${u[0]/d[0]},
          ${u[1]/d[1]},
          ${u[1]/d[1]});
      const vec3 inputShapeRC = vec3(${a}.0, ${l}.0,
                                     ${l}.0);

      float getAValue(int b, int r, int c, int d) {
        return getChannel(getA(b, r, c, d), vec2(c, d));
      }

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        // Calculate values for next column in yRC.z.
        ivec3 yRC = coords.yzz + ivec3(0, 0, 1);

        // Fractional source index.
        vec3 sourceFracIndexRC = ${h};

        // Compute the coordinators of nearest neighbor point.
        ivec3 sourceNearestRC = ivec3(
          min(inputShapeRC - 1.0, floor(sourceFracIndexRC + ${f})));

        // Should we calculate next column and row elements in 2x2 packed cell.
        bool hasNextCol = d < ${c-1};
        bool hasNextRow = coords.z < ${r-1};

        vec4 newValue = vec4(
          getAValue(b, sourceNearestRC.x, sourceNearestRC.y, d),
          hasNextCol ? getAValue(b, sourceNearestRC.x, sourceNearestRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceNearestRC.x, sourceNearestRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceNearestRC.x, sourceNearestRC.z, d + 1) : 0.0);

        setOutput(newValue);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _nt(t){const{inputs:e,backend:n,attrs:r}=t,{images:o}=e,{alignCorners:s,halfPixelCenters:i,size:a}=r,[l,c]=a,u=ee().getBool("WEBGL_PACK_IMAGE_OPERATIONS")?new Rnt(o.shape,l,c,s,i):new Pnt(o.shape,l,c,s,i);return n.runWebGLProgram(u,[o],o.dtype)}const Dnt={kernelName:I1,backendName:"webgl",kernelFunc:_nt};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Mnt{constructor(e,n,r){this.variableNames=["dy"],this.outputShape=[],this.outputShape=n;const[,o,s]=n,[,i,a]=e,l=[r&&i>1?o-1:o,r&&a>1?s-1:s],c=[r&&i>1?i-1:i,r&&a>1?a-1:a],u=l[0]/c[0],d=l[1]/c[1],f=1/u,h=1/d,p=Math.ceil(f)*2+2,m=Math.ceil(h)*2+2;this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        int r = coords[1];
        int c = coords[2];

        float accumulator = 0.0;

        const float heightScale = float(${u});
        const float widthScale = float(${d});

        const float invHeightScale = float(${f});
        const float invWidthScale = float(${h});

        const int winHeight = int(${p});
        const int winWidth = int(${m});

        // Compute bounds for where in dy we will look
        float startRLerp = floor(float(r) * invHeightScale);
        int startDyR = int(floor(startRLerp - float(winHeight / 2)));

        float startCLerp = floor(float(c) * invWidthScale);
        int startDyC = int(floor(startCLerp - float(winWidth / 2)));

        // Loop over dy
        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {
          int dyR = dyROffset + startDyR;

          // Guard against the window exceeding the bounds of dy
          if (dyR < 0 || dyR >= ${i}) {
            continue;
          }

          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {
            int dyC = dyCOffset + startDyC;

            // Guard against the window exceeding the bounds of dy
            if (dyC < 0 || dyC >= ${a}) {
              continue;
            }

            float sourceFracRow =
              float(${l[0]}) *
                (float(dyR) / float(${c[0]}));

            float sourceFracCol =
                float(${l[1]}) *
                  (float(dyC) / float(${c[1]}));

            int sourceNearestRow = int(min(
                float(int(${o}) - 1),
                ${r} ? float(round(sourceFracRow)) :
                                  float(floor(sourceFracRow))));

            int sourceNearestCol = int(min(
                float(int(${s}) - 1),
                ${r} ? float(round(sourceFracCol)) :
                                  float(floor(sourceFracCol))));

            if (r == sourceNearestRow && c == sourceNearestCol) {
              accumulator += getDy(b, dyR, dyC, d);
            }
          }
        }
        // End loop over dy

        setOutput(accumulator);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Fnt(t){const{inputs:e,backend:n,attrs:r}=t,{images:o,dy:s}=e,{alignCorners:i}=r,a=new Mnt(s.shape,o.shape,i);return n.runWebGLProgram(a,[s],s.dtype)}const Lnt={kernelName:kA,backendName:"webgl",kernelFunc:Fnt};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class jnt{constructor(e,n){this.variableNames=["x"];const r=e.length;if(r>4)throw new Error(`WebGL backend: Reverse of rank-${r} tensor is not yet supported`);if(this.outputShape=e,r===1){this.userCode=`
        void main() {
          int coord = getOutputCoords();
          setOutput(getX(${e[0]} - coord - 1));
        }
      `;return}const o=a=>n.indexOf(a)!==-1&&e[a]!==1?`${e[a]} - coords[${a}] - 1`:`coords[${a}]`,s=e.map((a,l)=>o(l)).join(","),i=vt(r);this.userCode=`
      void main() {
        ${i} coords = getOutputCoords();
        setOutput(getX(${s}));
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Bnt{constructor(e,n){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0;const r=e.length;if(r>4)throw new Error(`WebGL backend: Reverse of rank-${r} tensor is not yet supported`);this.outputShape=e;const o=dr("rc",r),s=`${o[r-1]} + 1 < ${this.outputShape[r-1]}`,i=`${o[r-2]} + 1 < ${this.outputShape[r-2]}`,a=vt(r);r===1?this.userCode=`
        void main(){
          int rc = getOutputCoords();
          vec4 result = vec4(0.);
          result.r = getChannel(getX(${e[0]} - rc - 1),
            ${e[0]} - rc - 1);
          if(${s}){
              result.g = getChannel(getX(${e[0]} - (rc  + 1) - 1),
                ${e[0]} - (rc  + 1) - 1);
          }
          setOutput(result);
        }
      `:this.userCode=`
        void main() {
          ${a} rc = getOutputCoords();
          vec4 result = vec4(0.);
          result.r = ${l(o.slice())};
          if(${s}){
            result.g = ${c(o.slice())};
          }
          if(${i}) {
            result.b = ${u(o.slice())};
            if(${s}) {
              result.a = ${d(o.slice())};
            }
          }
          setOutput(result);
        }
    `;function l(p){return f(p)}function c(p){return p[r-1]="("+p[r-1]+" + 1)",f(p)}function u(p){return p[r-2]="("+p[r-2]+" + 1)",f(p)}function d(p){return p[r-1]="("+p[r-1]+" + 1)",p[r-2]="("+p[r-2]+" + 1)",f(p)}function f(p){const m=e.map((v,x)=>h(x,p)),g=m.join(","),y=m.slice(-2).join(",");return`getChannel(getX(${g}), vec2(${y}))`}function h(p,m){return n.indexOf(p)!==-1&&e[p]!==1?`${e[p]} - ${m[p]} - 1`:`${m[p]}`}}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function znt(t){const{inputs:e,backend:n,attrs:r}=t,{x:o}=e,{dims:s}=r,i=o.shape.length,a=He(s,o.shape);if(i===0)return Zr({inputs:{x:o},backend:n});const l=ee().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new Bnt(o.shape,a):new jnt(o.shape,a);return n.runWebGLProgram(l,[o],o.dtype)}const Wnt={kernelName:N1,backendName:"webgl",kernelFunc:znt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Vnt{constructor(e,n){this.variableNames=["Image"],this.outputShape=[],this.customUniforms=[{name:"params",type:"vec4"}];const r=e[1],o=e[2];this.outputShape=e;let s="";typeof n=="number"?s=`float outputValue = ${n.toFixed(2)};`:s=`
        vec3 fill = vec3(${n.join(",")});
        float outputValue = fill[coords[3]];`,this.userCode=`
        void main() {
          ivec4 coords = getOutputCoords();
          int x = coords[2];
          int y = coords[1];
          float coordXFloat = (float(x) - params[0]) * params[3] -
            (float(y) - params[1]) * params[2];
          float coordYFloat = (float(x) - params[0]) * params[2] +
            (float(y) - params[1]) * params[3];
          int coordX = int(round(coordXFloat + params[0]));
          int coordY = int(round(coordYFloat + params[1]));
          ${s}
          if(coordX >= 0 && coordX < ${o} && coordY >= 0 && coordY < ${r}) {
            outputValue = getImage(coords[0], coordY, coordX, coords[3]);
          }
          setOutput(outputValue);
        }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Unt={kernelName:RA,backendName:"webgl",kernelFunc:({inputs:t,attrs:e,backend:n})=>{const{image:r}=t,{radians:o,fillValue:s,center:i}=e,a=n,l=new Vnt(r.shape,s),[c,u]=IO(i,r.shape[1],r.shape[2]),d=[[c,u,Math.sin(o),Math.cos(o)]];return a.runWebGLProgram(l,[r],r.dtype,d)}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Gnt=`
  // OpenGL ES does not support round function.
  // The algorithm is based on banker's rounding.
  float base = floor(x);
  if ((x - base) < 0.5) {
    return floor(x);
  } else if ((x - base) > 0.5) {
    return ceil(x);
  } else {
    if (mod(base, 2.0) == 0.0) {
      return base;
    } else {
      return base + 1.0;
    }
  }
`,Hnt=ot({opSnippet:Gnt}),Knt={kernelName:qg,backendName:"webgl",kernelFunc:Hnt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const qnt="return inversesqrt(x);",Xnt=ot({opSnippet:qnt,cpuKernelImpl:iYe}),Ynt={kernelName:Xg,backendName:"webgl",kernelFunc:Xnt};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class NP{constructor(e,n,r,o,s,i,a=!0,l=!1){this.variableNames=["updates","indices","defaultValue"],this.outputShape=i;const c=vt(s.length),u=vt(i.length);let d="";r===1?d="i":r===2&&(d="i, j");const f=`getIndices(${d})`;let h="";o===1?h="i":o===2&&(h="i, coords[1]");const p=`getUpdates(${h})`;let m="";l&&(m="coords[0], coords[1]");const g=`getDefaultValue(${m})`,y=n>1?"strides[j]":"strides";this.userCode=`
        ${c} strides = ${c}(${s});

        void main() {
          ${u} coords = getOutputCoords();
          float sum = 0.0;
          bool found = false;
          for (int i = 0; i < ${e}; i++) {
            int flattenedIndex = 0;
            for (int j = 0; j < ${n}; j++) {
              int index = round(${f});
              flattenedIndex += index * ${y};
            }
            if (flattenedIndex == coords[0]) {
              sum += ${p};
              found = true;
            }
          }
          setOutput(mix(${g}, sum, float(found)));
        }
      `}}/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Qnt{constructor(e,n,r,o,s,i,a=!0,l=!1){this.variableNames=["updates","indices","defaultValue"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=i;const c=vt(s.length),u=vt(i.length);let d="";r===1?d="i":r===2&&(d="i, j");const f=`getIndices(${d})`;let h="";o===1?h="i":o===2&&(h="i, coords[1]");const p=`getUpdates(${h})`;let m="";l&&(m="coords[0], coords[1]");const g=`getDefaultValue(${m})`,y=n>1?"strides[j]":"strides",v=n>1?"strides[j + 1]":"strides";this.userCode=`
        ${c} strides = ${c}(${s});

        void main() {
          ${u} coords = getOutputCoords();
          vec4 sum = vec4(0.);
          vec4 found = vec4(0.);
          for (int i = 0; i < ${e}; i+=2) {
            ivec2 flattenedIndex = ivec2(0);
            for (int j = 0; j < ${n}; j+=2) {
              ivec4 index = round(${f});
              flattenedIndex += index.xz * ${y};
              if (j + 1 < ${n}) {
                flattenedIndex += index.yw * ${v};
              }
            }
            if (flattenedIndex[0] == coords[0] || flattenedIndex[1] == coords[0] ||
                flattenedIndex[0] == coords[0] + 1 || flattenedIndex[1] == coords[0] + 1) {
              vec4 updVals = ${p};
              if (flattenedIndex[0] == coords[0]) {
                sum.xy += updVals.xy;
                found.xy = vec2(1.);
              } else if (flattenedIndex[0] == coords[0] + 1) {
                sum.zw += updVals.xy;
                found.zw = vec2(1.);
              }
              if (flattenedIndex[1] == coords[0]) {
                sum.xy += updVals.zw;
                found.xy = vec2(1.);
              } else if (flattenedIndex[1] == coords[0] + 1) {
                sum.zw += updVals.zw;
                found.zw = vec2(1.);
              }
            }
          }
          setOutput(mix(${g}, sum, found));
        }
      `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Znt(t){const{inputs:e,backend:n,attrs:r}=t,{indices:o,updates:s}=e,{shape:i}=r,{sliceRank:a,numUpdates:l,sliceSize:c,strides:u,outputSize:d}=hu(s,o,i),f=[d/c,c];if(d===0)return n.makeTensorInfo(i,o.dtype);const h=ge({inputs:{x:o},backend:n,attrs:{shape:[l,a]}}),p=ge({inputs:{x:s},backend:n,attrs:{shape:[l,c]}}),m=n.makeTensorInfo([],"float32",new Float32Array([0]));let g;ee().getBool("WEBGL_PACK")?g=new Qnt(l,a,h.shape.length,p.shape.length,u,f):g=new NP(l,a,h.shape.length,p.shape.length,u,f);const y=n.runWebGLProgram(g,[p,h,m],p.dtype),v=ge({inputs:{x:y},backend:n,attrs:{shape:i}});return n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(y),n.disposeIntermediateTensorInfo(m),v}const Jnt={kernelName:BK,backendName:"webgl",kernelFunc:Znt};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class ert{constructor(e,n,r,o){this.variableNames=["sortedSequence","values"],this.customUniforms=[{name:"numInputs",type:"int"}],this.outputShape=[e,r];const s="while (left < right) {",i=`for (int i = 0; i < ${Math.ceil(Math.log2(n+1))}; ++i) { if (left >= right) break;`,a=ee().getNumber("WEBGL_VERSION")===2?s:i,l=o==="left"?"<":"<=";this.userCode=`
       int findBound(int batch, float value) {
         int left = 0;
         int right = numInputs;
         int mid;
         ${a}
           mid = (left + right) / 2;
           if (getSortedSequence(batch, mid) ${l} value) {
             left = mid + 1;
           } else {
             right = mid;
           }
         }
         return right;
       }

       void main() {
         ivec2 coords = getOutputCoords();
         int batch = coords[0];
         int valueIndex = coords[1];

         float value = getValues(batch, valueIndex);

         setOutput(float(findBound(batch, value)));
       }
     `}}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function trt(t){const{inputs:e,backend:n,attrs:r}=t,{sortedSequence:o,values:s}=e,{side:i}=r,a=new ert(o.shape[0],o.shape[1],s.shape[1],i),l=[[o.shape[1]]];return n.runWebGLProgram(a,[o,s],"int32",l)}const nrt={kernelName:WK,backendName:"webgl",kernelFunc:trt};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class rrt{constructor(e,n,r){this.variableNames=["c","a","b"],this.outputShape=n;let o,s;if(r>4)throw Error(`Where for rank ${r} is not yet supported`);if(r===1)s="resRC",o="resRC";else{const a=["resRC.x","resRC.y","resRC.z","resRC.w"],l=[],c=[];for(let u=0;u<n.length;u++)c.push(`${a[u]}`),u<e&&l.push(`${a[u]}`);o=l.join(),s=c.join()}const i=vt(r);this.userCode=`
      void main() {
        ${i} resRC = getOutputCoords();
        float cVal = getC(${o});
        if (cVal >= 1.0) {
          setOutput(getA(${s}));
        } else {
          setOutput(getB(${s}));
        }
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ort(t){const{inputs:e,backend:n}=t,{condition:r,t:o,e:s}=e,i=new rrt(r.shape.length,o.shape,o.shape.length);return n.runWebGLProgram(i,[r,o,s],Yr(o.dtype,s.dtype))}const srt={kernelName:A1,backendName:"webgl",kernelFunc:ort};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const irt=`
  // Stable and Attracting Fixed Point (0, 1) for Normalized Weights.
  // see: https://arxiv.org/abs/1706.02515
  float scaleAlpha = ${Y1};
  float scale = ${Q1};
  return (x >= 0.0) ? scale * x : scaleAlpha * (exp(x) - 1.0);
`,art=ot({opSnippet:irt}),lrt={kernelName:Yg,backendName:"webgl",kernelFunc:art};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const crt=ih+`
  return 1.0 / (1.0 + exp(-1.0 * x));
`,urt=`
  vec4 result = 1.0 / (1.0 + exp(-1.0 * x));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,drt=ot({opSnippet:crt,packedOpSnippet:urt,cpuKernelImpl:lYe}),frt={kernelName:ey,backendName:"webgl",kernelFunc:drt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const hrt=`
  if (isnan(x)) { return 0.0; }
  return sign(x);
`,prt=ot({opSnippet:hrt}),mrt={kernelName:Jg,backendName:"webgl",kernelFunc:prt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const grt=ih+`
  return sin(x);
`,yrt=`
  vec4 result = sin(x);
  bvec4 isNaN = isnan(x);
  ${vu}
  return result;
`,vrt=ot({opSnippet:grt,packedOpSnippet:yrt}),xrt={kernelName:Qg,backendName:"webgl",kernelFunc:vrt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const brt=`
  float e2x = exp(x);
  return (e2x - 1.0 / e2x) / 2.0;
`,wrt=ot({opSnippet:brt}),Srt={kernelName:Zg,backendName:"webgl",kernelFunc:wrt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Crt=`
  float epsilon = 1.1920928955078125e-7;
  float threshold = log(epsilon) + 2.0;

  bool too_large = x > -threshold;
  bool too_small = x < threshold;

  float result;
  float exp_x = exp(x);

  if (too_large){
    result = x;
  }
  else if (too_small){
    result = exp_x;
  }
  else{
    result = log(exp_x + 1.0);
  }
  return result;
`,$rt=ot({opSnippet:Crt}),krt={kernelName:ty,backendName:"webgl",kernelFunc:$rt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Trt=t=>{const{inputs:e,backend:n,attrs:r}=t,{x:o}=e,{blockShape:s,paddings:i}=r;M(o.shape.length<=4,()=>"spaceToBatchND for rank > 4 with a WebGL backend not implemented yet");const a=s.reduce((y,v)=>y*v),l=[[0,0]];l.push(...i);for(let y=1+s.length;y<o.shape.length;++y)l.push([0,0]);const c=[],u=aQ({inputs:{x:o},backend:n,attrs:{paddings:l,constantValue:0}}),d=py(u.shape,s,a,!1),f=my(d.length,s.length,!1),h=gy(u.shape,s,a,!1),p=ge({inputs:{x:u},backend:n,attrs:{shape:d}}),m=pr({inputs:{x:p},backend:n,attrs:{perm:f}}),g=ge({inputs:{x:m},backend:n,attrs:{shape:h}});return c.push(u),c.push(p),c.push(m),c.forEach(y=>n.disposeIntermediateTensorInfo(y)),g},Irt={kernelName:R1,backendName:"webgl",kernelFunc:Trt};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ert(t){const{inputs:e,backend:n}=t,{indices:r,values:o,denseShape:s,defaultValue:i}=e;if(s.shape.length!==1)throw new Error(`Dense shape must be a vector, saw:
         ${s.shape}`);if(r.shape.length!==2)throw new Error(`Indices must be a matrix, saw:
         ${r.shape}`);if(o.shape.length!==1)throw new Error(`Values must be a vector, saw:
         ${o.shape}`);if(i.shape.length!==0)throw new Error(`Default value must be a scalar, saw:
        ${i.shape}`);const a=n.readSync(r.dataId),l=n.readSync(o.dataId),c=n.readSync(s.dataId),u=n.readSync(i.dataId)[0],[d,f,h,p,m]=uYe(a,r.shape,r.dtype,l,o.dtype,c,u);return[n.makeTensorInfo(f,r.dtype,d),n.makeTensorInfo([f[0]],o.dtype,h),n.makeTensorInfo([p.length],"bool",new Uint8Array(p.map(g=>Number(g)))),n.makeTensorInfo([m.length],r.dtype,new Int32Array(m))]}const Nrt={kernelName:VK,backendName:"webgl",kernelFunc:Ert};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Art(t){const{inputs:e,backend:n}=t,{inputIndices:r,inputShape:o,newShape:s}=e;if(r.shape.length!==2)throw new Error(`Input indices should be a matrix but received shape ${r.shape}`);if(o.shape.length!==1)throw new Error(`Input shape should be a vector but received shape ${o.shape}`);if(s.shape.length!==1)throw new Error(`Target shape should be a vector but received shape ${s.shape}`);const i=Array.from(n.readSync(o.dataId)),a=n.readSync(r.dataId),l=Array.from(n.readSync(s.dataId)),[c,u,d]=dYe(a,r.shape,r.dtype,i,l);return[n.makeTensorInfo(u,r.dtype,c),n.makeTensorInfo([d.length],s.dtype,new Int32Array(d))]}const Ort={kernelName:UK,backendName:"webgl",kernelFunc:Art};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Prt(t){const{inputs:e,backend:n}=t,{data:r,indices:o,segmentIds:s}=e;if(r.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(o.shape.length!==1)throw new Error(`Indices should be a vector but received shape
              ${o.shape}`);if(s.shape.length!==1)throw new Error(`Segment ids should be a vector but received shape
              ${s.shape}`);const i=n.readSync(r.dataId),a=n.readSync(o.dataId),l=n.readSync(s.dataId),[c,u]=P7(i,r.shape,r.dtype,a,l,!0);return n.makeTensorInfo(u,r.dtype,c)}const Rrt={kernelName:GK,backendName:"webgl",kernelFunc:Prt};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _rt(t){const{inputs:e,backend:n}=t,{data:r,indices:o,segmentIds:s}=e;if(r.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(o.shape.length!==1)throw new Error(`Indices should be a vector but received shape
             ${o.shape}`);if(s.shape.length!==1)throw new Error(`Segment ids should be a vector but received shape
             ${s.shape}`);const i=n.readSync(r.dataId),a=n.readSync(o.dataId),l=n.readSync(s.dataId),[c,u]=P7(i,r.shape,r.dtype,a,l);return n.makeTensorInfo(u,r.dtype,c)}const Drt={kernelName:HK,backendName:"webgl",kernelFunc:_rt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Mrt(t){const{inputs:e,backend:n,attrs:r}=t,{sparseIndices:o,sparseValues:s,defaultValue:i}=e,{outputShape:a}=r,{sliceRank:l,numUpdates:c,sliceSize:u,strides:d,outputSize:f}=hu(s,o,a),h=!1;if(s.dtype==="string"){const y=n.bufferSync(o),v=n.bufferSync(s),x=fl(n.readSync(i.dataId)[0]),b=aYe(y,v,a,f,u,c,l,d,x,h);return n.makeTensorInfo(a,b.dtype,b.values)}const p=new NP(c,l,o.shape.length,s.shape.length,d,[f,1],h),m=n.runWebGLProgram(p,[s,o,i],s.dtype),g=ge({inputs:{x:m},backend:n,attrs:{shape:a}});return n.disposeIntermediateTensorInfo(m),g}const Frt={kernelName:KK,backendName:"webgl",kernelFunc:Mrt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Lrt(t){const{inputs:e,backend:n,attrs:r}=t,{x:o}=e,{numOrSizeSplits:s,axis:i}=r,a=He(i,o.shape)[0],l=WO(o,s,a),c=o.shape.length,u=new Array(c).fill(0),d=o.shape.slice();return l.map(f=>{const h=[...d];h[a]=f;const p=ah({inputs:{x:o},backend:n,attrs:{begin:u,size:h}});return u[a]+=f,p})}const jrt={kernelName:_1,backendName:"webgl",kernelFunc:Lrt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const g3="return sqrt(x);",Brt=ot({opSnippet:g3,packedOpSnippet:g3,cpuKernelImpl:fYe}),zrt={kernelName:ny,backendName:"webgl",kernelFunc:Brt};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Wrt="return x * x;",Vrt=ot({opSnippet:Wrt}),Urt={kernelName:IA,backendName:"webgl",kernelFunc:Vrt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const y3="return (a - b) * (a - b);",Grt=Bn({opSnippet:y3,packedOpSnippet:y3}),Hrt={kernelName:ry,backendName:"webgl",kernelFunc:Grt};/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Krt(t){const{inputs:e,backend:n,attrs:r}=t,{x:o}=e;if(o.dtype!=="string")throw new Error("Input must be of datatype string");const s=n.readSync(o.dataId),i=oa(s),a=hYe(i,"string",r);return n.makeTensorInfo(o.shape,"string",a)}const qrt={kernelName:EA,backendName:"webgl",kernelFunc:Krt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Xrt({inputs:t,attrs:e,backend:n}){const{x:r}=t,o=ts+`
    return x > 0.0 ? 1.0 : float(${e.alpha});
  `,s=new ti(r.shape,o);return n.runWebGLProgram(s,[r],r.dtype)}const Yrt={kernelName:ly,backendName:"webgl",kernelFunc:Xrt};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Qrt{constructor(e,n,r){this.variableNames=["x"],this.outputShape=r;const o=r.length,s=vt(r.length),i=vt(r.length);let a="";if(o===1)a="coords * strides + begin";else{let l=0;a=r.map((c,u)=>(l++,r.length===1?`coords * strides[${u}] + begin[${u}]`:`coords[${l-1}] * strides[${u}] + begin[${u}]`)).join(",")}this.userCode=`
      ${s} begin = ${s}(${e});
      ${s} strides = ${s}(${n});

      void main() {
        ${i} coords = getOutputCoords();
        setOutput(getX(${a}));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Zrt(t){const{inputs:e,backend:n,attrs:r}=t,{x:o}=e,{begin:s,end:i,strides:a,beginMask:l,endMask:c,ellipsisMask:u,newAxisMask:d,shrinkAxisMask:f}=r,{finalShapeSparse:h,finalShape:p,isIdentity:m,sliceDim0:g,isSimpleSlice:y,begin:v,end:x,strides:b}=$O(o.shape,s,i,a,l,c,u,d,f);let w;if(m)w=ge({inputs:{x:o},backend:n,attrs:{shape:p}});else if(g||y){M(o.shape.length>=1,()=>`Input must have rank at least 1, got: ${o.shape.length}`);const $=wO(v,x,b),T=ah({inputs:{x:o},backend:n,attrs:{begin:v,size:$}});w=ge({inputs:{x:T},backend:n,attrs:{shape:p}}),n.disposeIntermediateTensorInfo(T)}else if(n.shouldExecuteOnCPU([o])){const T=n.readSync(o.dataId),I=Ge(o.shape,o.dtype,T),E=pYe(h,I,b,v);w=n.makeTensorInfo(p,o.dtype,E.values)}else{const T=new Qrt(v,b,h);w=n.runWebGLProgram(T,[o],o.dtype)}const C=ge({inputs:{x:w},backend:n,attrs:{shape:p}});return n.disposeIntermediateTensorInfo(w),C}const Jrt={kernelName:NA,backendName:"webgl",kernelFunc:Zrt};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function eot(t){const{inputs:e,backend:n,attrs:r}=t,{separator:o,nGramWidths:s,leftPad:i,rightPad:a,padWidth:l,preserveShortSequences:c}=r,{data:u,dataSplits:d}=e,f=n.readSync(u.dataId),h=n.readSync(d.dataId),[p,m]=mYe(f,h,o,s,i,a,l,c);return[n.makeTensorInfo([p.length],"string",p),n.makeTensorInfo(d.shape,"int32",m)]}const tot={kernelName:qK,backendName:"webgl",kernelFunc:eot};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function not(t){const{inputs:e,backend:n,attrs:r}=t,{skipEmpty:o}=r,{input:s,delimiter:i}=e;if(s.dtype!=="string")throw new Error("Input must be of datatype string");if(s.shape.length!==1)throw new Error(`Input must be a vector, got shape: ${s.shape}`);if(i.shape.length!==0)throw new Error(`Delimiter must be a scalar, got shape: ${i.shape}`);const a=n.readSync(s.dataId),l=n.readSync(i.dataId)[0],[c,u,d]=gYe(a,l,o),f=u.length;return[n.makeTensorInfo([f,2],"int32",c),n.makeTensorInfo([f],"string",u),n.makeTensorInfo([2],"int32",new Int32Array(d))]}const rot={kernelName:XK,backendName:"webgl",kernelFunc:not};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function oot(t){const{inputs:e,backend:n,attrs:r}=t,{numBuckets:o}=r,{input:s}=e;if(s.dtype!=="string")throw new Error("Input must be of datatype string");if(o<=0)throw new Error("Number of buckets must be at least 1");const i=n.readSync(s.dataId),a=yYe(i,o);return n.makeTensorInfo(s.shape,"int32",a)}const sot={kernelName:YK,backendName:"webgl",kernelFunc:oot};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const iot="return tan(x);",aot=ot({opSnippet:iot}),lot={kernelName:sy,backendName:"webgl",kernelFunc:aot};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const cot=`
  float e2x = exp(-2.0 * abs(x));
  return sign(x) * (1.0 - e2x) / (1.0 + e2x);
`,uot=ot({opSnippet:cot}),dot={kernelName:iy,backendName:"webgl",kernelFunc:uot};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fot(t){const{inputs:e,backend:n,attrs:r}=t,{tensor:o,indices:s,updates:i}=e,{sliceRank:a,numUpdates:l,sliceSize:c,strides:u,outputSize:d}=hu(i,s,o.shape),f=[d/c,c];if(d===0)return n.makeTensorInfo(o.shape,s.dtype);const h=ge({inputs:{x:s},backend:n,attrs:{shape:[l,a]}}),p=ge({inputs:{x:i},backend:n,attrs:{shape:[l,c]}}),m=ge({inputs:{x:o},backend:n,attrs:{shape:f}}),g=new NP(l,a,h.shape.length,p.shape.length,u,f,!1,!0),y=n.runWebGLProgram(g,[p,h,m],m.dtype),v=ge({inputs:{x:y},backend:n,attrs:{shape:o.shape}});return n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(m),n.disposeIntermediateTensorInfo(y),v}const hot={kernelName:zK,backendName:"webgl",kernelFunc:fot};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class pot{constructor(e,n){this.variableNames=["A"];const r=new Array(e.length);for(let i=0;i<r.length;i++)r[i]=e[i]*n[i];this.outputShape=r,this.rank=r.length;const o=vt(this.rank),s=mot(e);this.userCode=`
      void main() {
        ${o} resRC = getOutputCoords();
        setOutput(getA(${s}));
      }
    `}}function mot(t){const e=t.length;if(e>5)throw Error(`Tile for rank ${e} is not yet supported`);if(e===1)return`imod(resRC, ${t[0]})`;const n=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u"],r=[];for(let o=0;o<t.length;o++)r.push(`imod(${n[o]}, ${t[o]})`);return r.join()}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cQ(t){const{inputs:e,backend:n,attrs:r}=t,{x:o}=e,{reps:s}=r;if(o.dtype==="string"||o.shape.length>5){const l=n.readSync(o.dataId),c=o.dtype==="string"?l.map(f=>fl(f)):l,u=Ge(o.shape,o.dtype,c),d=xYe(u,s);return n.makeTensorInfo(d.shape,d.dtype,d.values)}const i=new pot(o.shape,s);return n.runWebGLProgram(i,[o],o.dtype)}const got={kernelName:ay,backendName:"webgl",kernelFunc:cQ};class yot{constructor(e){this.variableNames=["x","indices"],this.customUniforms=[{name:"n",type:"int"},{name:"firstPass",type:"int"},{name:"negativeInf",type:"float"},{name:"dir",type:"int"},{name:"inc",type:"int"}],this.outputShape=e,this.userCode=`
       void main() {
         ivec2 coords = getOutputCoords();
         int batch = coords[0];
         int elemIdx = coords[1];

         // We compare elements pair-wise within a group of size 2 * inc.
         // The comparing rule for each group alternates between ascending
         // and descending. Within each group, we compare each pair at
         // positions i and i+inc. To decide whether an element at position i
         // is x0 or x1, we mod it by 2 * inc, if the result is smaller than
         // inc, it is in the first half of the group, we denote it as x0,
         // otherwise we denote it as x1.
         // For example, as shown in the Bitonic top K paper referenced above,
         // Figure5(a) shows that element[1] is in the
         // second half of the group when group size is 2, but it is in the
         // first half of the group when group size is 4.

         bool isFirstInPair = imod(elemIdx, 2 * inc) < inc;
         int i = isFirstInPair ? elemIdx : elemIdx - inc;

         int i0 = firstPass == 1 ? i : int(getIndices(batch, i));
         int i1 = firstPass == 1 ? i + inc : int(getIndices(batch, i + inc));
         float x0 = i0 < n ? getX(batch, i0) : negativeInf;
         float x1 = i1 < n ? getX(batch, i1) : negativeInf;

         // Denotes which direction indices are in (ascending or descending).
         bool reverse = imod(elemIdx, 2 * dir) >= dir;
         bool isGreater = x0 > x1 || (x0 == x1 && i1 > i0);
         if (reverse == isGreater) { // Elements in opposite order of direction
           int iTemp = i0;
           i0 = i1;
           i1 = iTemp;
         }
         if (isFirstInPair) {
            setOutput(float(i0));
         } else {
            setOutput(float(i1));
         }
       }
     `}}class vot{constructor(e){this.variableNames=["x","indices"],this.customUniforms=[{name:"n",type:"int"},{name:"firstPass",type:"int"},{name:"k",type:"int"}],this.outputShape=e,this.userCode=`
    void main() {
         // Takes max of indices (0, k), (1, k + 1), (2, k + 2) ...
         ivec2 coords = getOutputCoords();
         int batch = coords[0];
         int elemIdx = coords[1];

         // The output size is half of the previous size.
         // If the previous sequence is | | | | _ _ _ _  | | | |  _ _ _ _ (k=4),
         // we only need to output the indices at positions |, the indices at
         // positions _ can be thrown away, see Figure5(b) After Phase 2
         // (Merge phase) in the Bitonic Top K paper referenced above.
         // For example, the paper shows we only need to output the orange bars.
         // The output sequence should look like this | | | | | | | |.
         // Because the sequence is halved, to map the output index back
         // to the previous sequence to find the corresponding value,
         // we need to double the index. When we double the index,
         // we basically interpolate a position, so 2i looks like
         // | _ | _ | _ | _ | _ | _ | _. We move the | to the first k position
         // of each 2k positions by - elemIdx % k. E.g. for output at
         // index 4,5,6,7, we want to get the corresponding element at
         // original index 8,9,10,11, for output at index 8,9,10,11,
         // we want to get the corresponding element at original index
         // 16,17,18,19, so on and so forth.

         int i = elemIdx < k ? elemIdx : (elemIdx * 2 - imod(elemIdx, k));
         int i0 = firstPass == 1 ? i : int(getIndices(batch, i));
         int i1 = firstPass == 1 ? i + k : int(getIndices(batch, i + k));

         float x0 = getX(batch, i0);
         float x1 = i1 < n ? getX(batch, i1) : x0;

         setOutput(x0 >= x1 ? float(i0) : float(i1));
       }
     `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zl(t,e){e!==null&&t.disposeIntermediateTensorInfo(e)}function v3(t){let e=1;for(;e<t;)e*=2;return e}function xot(t){const{inputs:e,backend:n,attrs:r}=t,{x:o}=e,{k:s,sorted:i}=r,a=ee().getNumber("TOPK_LAST_DIM_CPU_HANDOFF_SIZE_THRESHOLD"),l=ee().getNumber("TOPK_K_CPU_HANDOFF_THRESHOLD"),c=o.shape,u=c[c.length-1];if(n.shouldExecuteOnCPU([o])||u<a||s>l){const E=n.readSync(o.dataId),[N,A]=bYe(E,c,o.dtype,s,i);return[n.makeTensorInfo(N.shape,N.dtype,N.values),n.makeTensorInfo(A.shape,A.dtype,A.values)]}if(s===0)return c[c.length-1]=0,[n.makeTensorInfo(c,o.dtype,[]),n.makeTensorInfo(c,"int32",[])];if(u===1)return[o,Ay({attrs:{shape:c,dtype:"int32",value:0},backend:n})];const d=n.texData.get(o.dataId),f=d!==null&&d.isPacked,h=f?n.unpackTensor(o):o,m=ne(c)/u,g=ge({inputs:{x:h},attrs:{shape:[m,u]},backend:n});f&&zl(n,h);const y=v3(s),v=v3(u);let x=null;const b=()=>x===null?[g,g]:[g,x],w=(E,N,A)=>{const R=b(),P=new yot(A),_=[[u],[x===null?1:0],[Number.NEGATIVE_INFINITY],[E],[N]],L=x;x=n.runWebGLProgram(P,R,"int32",_),zl(n,L)};for(let E=1;E<y;E*=2){const N=E*2;for(let A=E;A>=1;A/=2)w(N,A,[m,v])}for(let E=v;E>y;E/=2){const N=b(),A=new vot([m,E/2]),P=[[u],[x===null?1:0],[y]],F=x;x=n.runWebGLProgram(A,N,"int32",P),zl(n,F);const _=y/2,L=_*2;for(let O=_;O>=1;O/=2)w(L,O,x.shape)}let C=x;x=ah({inputs:{x},backend:n,attrs:{begin:0,size:[m,s]}}),zl(n,C);let $=tQ({inputs:{x:g,indices:x},backend:n,attrs:{axis:1,batchDims:1}});zl(n,g);const T=c.slice(0,-1);T.push(s),C=x,x=ge({inputs:{x},attrs:{shape:T},backend:n}),zl(n,C);const I=$;return $=ge({inputs:{x:$},attrs:{shape:T},backend:n}),zl(n,I),[$,x]}const bot={kernelName:AA,backendName:"webgl",kernelFunc:xot};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class wot{constructor(e,n,r,o,s,i){this.variableNames=["Image","Transforms"],this.outputShape=i;const a=r==="nearest"?1:2;let l;switch(o){case"constant":l=1;break;case"reflect":l=2;break;case"wrap":l=3;break;case"nearest":l=4;break;default:l=1;break}this.userCode=`
            float mapCoord(float outCoord, float len) {
              float inCoord = outCoord;
              if(${l} == 2) {
                if (inCoord < 0.0) {
                  if (len <= 1.0) {
                    inCoord = 0.0;
                  } else {
                    float sz2 = 2.0 * len;
                    if (inCoord < sz2) {
                      inCoord = sz2 * float(int(float(-inCoord / sz2))) +
                      inCoord;
                    }
                    inCoord = inCoord < -len ? inCoord + sz2 : -inCoord - 1.0;
                  }
                } else if (inCoord > len - 1.0) {
                  if (len <= 1.0) {
                    inCoord = 0.0;
                  } else {
                    float sz2 = 2.0 * len;
                    inCoord -= sz2 * float(int(float(inCoord / sz2)));
                    if (inCoord >= len) {
                      inCoord = sz2 - inCoord - 1.0;
                    }
                  }
                }
                return clamp(inCoord, 0.0, len - 1.0);
              } else if (${l} == 3) {
                if (inCoord < 0.0) {
                  if (len <= 1.0) {
                    inCoord = 0.0;
                  } else {
                    float sz = len - 1.0;
                    inCoord += len * (float(int(float(-inCoord / sz))) + 1.0);
                  }
                } else if (inCoord > len - 1.0) {
                  if (len <= 1.0) {
                    inCoord = 0.0;
                  } else {
                    float sz = len - 1.0;
                    inCoord -= len * float(int(float(inCoord / sz)));
                  }
                }
                return clamp(inCoord, 0.0, len - 1.0);
              } else if (${l} == 4) {
                return clamp(outCoord, 0.0, len - 1.0);
              } else {
                return outCoord;
              }
            }

            float readWithFillValue(int batch, int coordY, int coordX,
              int channel) {
              float outputValue;
              if (0 <= coordY && coordY < ${e} && 0 <= coordX && coordX < ${n}) {
                  outputValue = getImage(batch, coordY, coordX, channel);
              } else {
                outputValue = float(${s});
              }
              return outputValue;
            }

            void main() {
              ivec4 coords = getOutputCoords();
              float outputValue;
              int batch = coords[0];
              int x = coords[2];
              int y = coords[1];
              int channel = coords[3];
              float xf = float(x);
              float yf = float(y);
              float a1 = getTransforms(batch, 0);
              float a2 = getTransforms(batch, 1);
              float a3 = getTransforms(batch, 2);
              float b1 = getTransforms(batch, 3);
              float b2 = getTransforms(batch, 4);
              float b3 = getTransforms(batch, 5);
              float c1 = getTransforms(batch, 6);
              float c2 = getTransforms(batch, 7);
              float projection = c1 * xf + c2 * yf + 1.0;
              if (projection == 0.0) {
                outputValue = float(${s});
              } else {
                float inX = (a1 * xf + a2 * yf + a3) / projection;
                float inY = (b1 * xf + b2 * yf + b3) / projection;
                float mapX = mapCoord(inX, float(${n}));
                float mapY = mapCoord(inY, float(${e}));

                if (${a} == 1) {
                  int coordY = int(round(mapY));
                  int coordX = int(round(mapX));
                  outputValue = readWithFillValue(batch, coordY, coordX,
                    channel);
                } else {
                  float yFloor = floor(mapY);
                  float xFloor = floor(mapX);
                  float yCeil = yFloor + 1.0;
                  float xCeil = xFloor + 1.0;
                  float valueYFloor = (xCeil - mapX) *
                  readWithFillValue(batch, int(yFloor), int(xFloor), channel) +
                  (mapX - xFloor) *
                  readWithFillValue(batch, int(yFloor), int(xCeil), channel);
                  float valueYCeil = (xCeil - mapX) *
                  readWithFillValue(batch, int(yCeil), int(xFloor), channel) +
                  (mapX - xFloor) *
                  readWithFillValue(batch, int(yCeil), int(xCeil), channel);
                  outputValue = (yCeil - mapY) * valueYFloor +
                  (mapY - yFloor) * valueYCeil;
                }
              }
              setOutput(outputValue);
            }
        `}}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Sot(t){const{inputs:e,backend:n,attrs:r}=t,{image:o,transforms:s}=e,{interpolation:i,fillMode:a,fillValue:l,outputShape:c}=r,[u,d,f,h]=o.shape,[p,m]=c??[d,f],g=[u,p,m,h],y=new wot(d,f,i,a,l,g);return n.runWebGLProgram(y,[o,s],"float32")}const Cot={kernelName:OA,backendName:"webgl",kernelFunc:Sot};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $ot(t){const{inputs:e,attrs:n,backend:r}=t,{axis:o}=n,{x:s}=e;Iy(s,"unique"),console.warn("WARNING: ","UI might be locked temporarily as data is being downloaded");const i=r.readSync(s.dataId),{outputValues:a,outputShape:l,indices:c}=wYe(i,o,s.shape,s.dtype);return[r.makeTensorInfo(l,s.dtype,a),r.makeTensorInfo([c.length],"int32",c)]}const kot={kernelName:PA,backendName:"webgl",kernelFunc:$ot};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Tot(t){const{inputs:e,backend:n,attrs:r}=t,{value:o}=e;let{axis:s}=r;s<0&&(s+=o.shape.length);const i=o,a=i.shape.length,l=o.shape[s],c=new Array(a-1);let u=0;for(let m=0;m<a;m++)m!==s&&(c[u++]=i.shape[m]);const d=[],f=new Array(a).fill(0),h=i.shape.slice();h[s]=1;const p=new Array(l);for(let m=0;m<p.length;m++){f[s]=m;const g=ah({inputs:{x:i},backend:n,attrs:{begin:f,size:h}}),y=ge({inputs:{x:g},backend:n,attrs:{shape:c}});p[m]=y,d.push(g)}return d.forEach(m=>n.disposeIntermediateTensorInfo(m)),p}const Iot={kernelName:M1,backendName:"webgl",kernelFunc:Tot};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Eot{constructor(e,n){this.variableNames=["x","segmentIds"];const r=e.windowSize,o=e.batchSize,s=e.inSize,i=e.numSegments,a=i*Math.ceil(s/r);this.outputShape=[o,a];const l="0.0",c="sumValue",u=Math.floor(r/4)*4,d=r%4,f=`
        sumValue += dot(values, segFilter);
    `;let h="";s%r>0&&(h=`
        if (inIdx < 0 || inIdx >= ${s}) {
          return initializationValue;
        }
      `);let p="";s%r>0&&(p=`
        if (inIdx < 0 || inIdx >= ${s}) {
          return -1.0;
        }
      `),this.userCode=`
      const float initializationValue = ${l};

      float getValue(int batch, int inIdx) {
        ${h}
        return getX(batch, inIdx);
      }

      float getSegmentIdAtIndex(int inIdx) {
        ${p}
        return getSegmentIds(inIdx);
      }

      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = int(floor(float(outIdx) / float(
          ${i})) * float(${r}));
        int currentSeg = int(mod(float(outIdx), float(${i})));

        float sumValue = 0.0;

        for (int i = 0; i < ${u}; i += 4) {
          int inIdx = inOffset + i;
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            getValue(batch, inIdx + 3)
          );

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 3)) == currentSeg ? 1 : 0
          );

          ${f}
        }

        int inIdx = inOffset + ${u};
        if (${d===1}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            initializationValue,
            initializationValue,
            initializationValue
          );

          int inIdxSeg = int(getSegmentIdAtIndex(inIdx));

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            0,
            0,
            0
          );

          ${f}
        } else if (${d===2}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            initializationValue,
            initializationValue
          );

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,
              0,
              0
          );

          ${f}
        } else if (${d===3}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            initializationValue
          );

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,
            0
          );

          ${f}
        }
        setOutput(${c});
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Not(t){const{inputs:e,backend:n,attrs:r}=t,{x:o,segmentIds:s}=e,{numSegments:i}=r,a=o.shape.length,l=[];let c=0;const u=Wt([c],a);let d=o;u!=null&&(d=pr({inputs:{x:o},backend:n,attrs:{perm:u}}),l.push(d),c=nn(1,a)[0]);const f=U8(d.shape,c,i),h=ne([d.shape[c]]),p=ge({inputs:{x:d},backend:n,attrs:{shape:[-1,h]}});l.push(p);const m=DA(o.dtype),g=(b,w,C,$,T)=>{const I=b.shape[0],E=b.shape[1],N=V8(E,T),A={windowSize:N,inSize:E,batchSize:I,numSegments:T},R=new Eot(A,w),P=n.compileAndRun(R,[b,C],$);if(l.push(P),P.shape[1]===T)return P;const F=lQ({backend:n,attrs:{start:0,stop:T,step:1,dtype:"float32"}}),_=cQ({inputs:{x:F},backend:n,attrs:{reps:[E/N]}});return l.push(F),l.push(_),g(P,w,_,$,T)},y=g(p,"unsortedSegmentSum",s,m,i),v=ge({inputs:{x:y},backend:n,attrs:{shape:f}});let x=v;if(u!=null){l.push(v);const b=Ol(u);x=pr({inputs:{x},backend:n,attrs:{perm:b}})}return l.forEach(b=>n.disposeIntermediateTensorInfo(b)),x}const Aot={kernelName:F1,backendName:"webgl",kernelFunc:Not};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Oot=[f7e,p7e,y7e,b7e,S7e,k7e,I7e,N7e,R7e,D7e,L7e,z7e,U7e,q7e,Q7e,J7e,tQe,sQe,aQe,cQe,hQe,bQe,SQe,TQe,EQe,_Qe,MQe,BQe,XYe,VQe,qQe,ZQe,oZe,aZe,cZe,dZe,hZe,yZe,bZe,CZe,kZe,IZe,NZe,PZe,_Ze,LZe,BZe,VZe,HZe,qZe,ZZe,nJe,iJe,cJe,fJe,hJe,mJe,yJe,xJe,wJe,CJe,IJe,AJe,RJe,DJe,LJe,zJe,GJe,XJe,qYe,QJe,HQe,eet,ret,iet,QYe,det,met,yet,wet,ket,Net,Pet,Met,Bet,Vet,Get,Xet,Qet,Jet,rtt,stt,att,ctt,dtt,mtt,xtt,Ctt,Ott,e7e,Dtt,Ltt,ztt,Utt,AQe,Ktt,Xtt,Qtt,ent,ont,JYe,int,lnt,unt,fnt,hnt,OQe,Itt,gnt,bnt,$nt,n7e,Ent,Ont,Dnt,Lnt,Wnt,Unt,Knt,Ynt,Jnt,nrt,srt,lrt,frt,mrt,xrt,Srt,vQe,Ntt,krt,Irt,Nrt,Ort,Rrt,Drt,Frt,jrt,zrt,Urt,Hrt,qrt,Yrt,Jrt,tot,rot,sot,Ett,c7e,lot,dot,hot,got,bot,Cot,u7e,kot,Iot,Aot,qtt];for(const t of Oot)ZK(t);async function Pot(){await wFe(),console.log("TensorFlow.js initialized"),Wz(document.getElementById("root")).render(S.jsx(EMe,{}))}Pot();
